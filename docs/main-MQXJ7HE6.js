import{b as bv,c as wv,f as J1,g as Ev}from"./chunk-65CJINC2.js";import{a as N,b as z,c as wo,e as fr,g as Z1,h as Y1}from"./chunk-VOSPIT4N.js";var Yg=fr(Zg=>{"use strict";Object.defineProperty(Zg,"__esModule",{value:!0});var Kg=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Zg.default=Kg});var Xg=fr(za=>{"use strict";var NC=za&&za.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(za,"__esModule",{value:!0});var oR=NC((Ev(),Y1(J1))),sR=NC(Yg()),Jg=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=oR.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var s,a,l;let d=null,p=null,h=null,y=o.status,g=o.statusText;if(o.ok){if(this.method!=="HEAD"){let A=await o.text();A===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=A:p=JSON.parse(A))}let E=(s=this.headers.Prefer)===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),S=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");E&&S&&S.length>1&&(h=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(d={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,h=null,y=406,g="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{let E=await o.text();try{d=JSON.parse(E),Array.isArray(d)&&o.status===404&&(p=[],d=null,y=200,g="OK")}catch{o.status===404&&E===""?(y=204,g="No Content"):d={message:E}}if(d&&this.isMaybeSingle&&(!((l=d?.details)===null||l===void 0)&&l.includes("0 rows"))&&(d=null,y=200,g="OK"),d&&this.shouldThrowOnError)throw new sR.default(d)}return{error:d,data:p,count:h,status:y,statusText:g}});return this.shouldThrowOnError||(i=i.catch(o=>{var s,a,l;return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:`${(a=o?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}};za.default=Jg});var t0=fr(qa=>{"use strict";var aR=qa&&qa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qa,"__esModule",{value:!0});var lR=aR(Xg()),e0=class extends lR.default{select(t){let e=!1,r=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){let s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:i=r}={}){let o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var a;let l=[t?"analyze":null,e?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${d}"; options=${l};`,s==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};qa.default=e0});var ad=fr(Ga=>{"use strict";var cR=Ga&&Ga.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ga,"__esModule",{value:!0});var uR=cR(t0()),n0=class extends uR.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");let s=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};Ga.default=n0});var i0=fr(Qa=>{"use strict";var dR=Qa&&Qa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Qa,"__esModule",{value:!0});var Wa=dR(ad()),r0=class{constructor(t,{headers:e={},schema:r,fetch:i}){this.url=t,this.headers=e,this.schema=r,this.fetch=i}select(t,{head:e=!1,count:r}={}){let i=e?"HEAD":"GET",o=!1,s=(t??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",s),r&&(this.headers.Prefer=`count=${r}`),new Wa.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:r=!0}={}){let i="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),e&&o.push(`count=${e}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){let s=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(s.length>0){let a=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Wa.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){let s="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){let l=t.reduce((d,p)=>d.concat(Object.keys(p)),[]);if(l.length>0){let d=[...new Set(l)].map(p=>`"${p}"`);this.url.searchParams.set("columns",d.join(","))}}return new Wa.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),e&&i.push(`count=${e}`),this.headers.Prefer=i.join(","),new Wa.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Wa.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Qa.default=r0});var PC=fr(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.version=void 0;ld.version="0.0.0-automated"});var OC=fr(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});cd.DEFAULT_HEADERS=void 0;var fR=PC();cd.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${fR.version}`}});var FC=fr(Ka=>{"use strict";var RC=Ka&&Ka.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ka,"__esModule",{value:!0});var pR=RC(i0()),hR=RC(ad()),mR=OC(),o0=class n{constructor(t,{headers:e={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},mR.DEFAULT_HEADERS),e),this.schemaName=r,this.fetch=i}from(t){let e=new URL(`${this.url}/${t}`);return new pR.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:i=!1,count:o}={}){let s,a=new URL(`${this.url}/rpc/${t}`),l;r||i?(s=r?"HEAD":"GET",Object.entries(e).filter(([p,h])=>h!==void 0).map(([p,h])=>[p,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([p,h])=>{a.searchParams.append(p,h)})):(s="POST",l=e);let d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new hR.default({method:s,url:a,headers:d,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Ka.default=o0});var HC=fr(vt=>{"use strict";var us=vt&&vt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vt,"__esModule",{value:!0});vt.PostgrestError=vt.PostgrestBuilder=vt.PostgrestTransformBuilder=vt.PostgrestFilterBuilder=vt.PostgrestQueryBuilder=vt.PostgrestClient=void 0;var LC=us(FC());vt.PostgrestClient=LC.default;var VC=us(i0());vt.PostgrestQueryBuilder=VC.default;var jC=us(ad());vt.PostgrestFilterBuilder=jC.default;var UC=us(t0());vt.PostgrestTransformBuilder=UC.default;var BC=us(Xg());vt.PostgrestBuilder=BC.default;var $C=us(Yg());vt.PostgrestError=$C.default;vt.default={PostgrestClient:LC.default,PostgrestQueryBuilder:VC.default,PostgrestFilterBuilder:jC.default,PostgrestTransformBuilder:UC.default,PostgrestBuilder:BC.default,PostgrestError:$C.default}});function Sv(n,t){return Object.is(n,t)}var et=null,Fs=!1,Bf=1,Ft=Symbol("SIGNAL");function ge(n){let t=et;return et=n,t}function Dv(){return et}function X1(){return Fs}var Ci={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Dl(n){if(Fs)throw new Error("");if(et===null)return;et.consumerOnSignalRead(n);let t=et.nextProducerIndex++;if(Il(et),t<et.producerNode.length&&et.producerNode[t]!==n&&Ls(et)){let e=et.producerNode[t];xl(e,et.producerIndexOfThis[t])}et.producerNode[t]!==n&&(et.producerNode[t]=n,et.producerIndexOfThis[t]=Ls(et)?Av(n,et,t):0),et.producerLastReadVersion[t]=n.version}function eD(){Bf++}function xv(n){if(!(Ls(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Bf)){if(!n.producerMustRecompute(n)&&!js(n)){Cv(n);return}n.producerRecomputeValue(n),Cv(n)}}function Iv(n){if(n.liveConsumerNode===void 0)return;let t=Fs;Fs=!0;try{for(let e of n.liveConsumerNode)e.dirty||Mv(e)}finally{Fs=t}}function Tv(){return et?.consumerAllowSignalWrites!==!1}function Mv(n){n.dirty=!0,Iv(n),n.consumerMarkedDirty?.(n)}function Cv(n){n.dirty=!1,n.lastCleanEpoch=Bf}function Eo(n){return n&&(n.nextProducerIndex=0),ge(n)}function Vs(n,t){if(ge(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ls(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)xl(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function js(n){Il(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],r=n.producerLastReadVersion[t];if(r!==e.version||(xv(e),r!==e.version))return!0}return!1}function Co(n){if(Il(n),Ls(n))for(let t=0;t<n.producerNode.length;t++)xl(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Av(n,t,e){if(kv(n),n.liveConsumerNode.length===0&&Nv(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Av(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function xl(n,t){if(kv(n),n.liveConsumerNode.length===1&&Nv(n))for(let r=0;r<n.producerNode.length;r++)xl(n.producerNode[r],n.producerIndexOfThis[r]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[t],i=n.liveConsumerNode[t];Il(i),i.producerIndexOfThis[r]=t}}function Ls(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Il(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function kv(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Nv(n){return n.producerNode!==void 0}function Pv(n){let t=Object.create(tD);t.computation=n;let e=()=>{if(xv(t),Dl(t),t.value===Sl)throw t.error;return t.value};return e[Ft]=t,e}var Vf=Symbol("UNSET"),jf=Symbol("COMPUTING"),Sl=Symbol("ERRORED"),tD=z(N({},Ci),{value:Vf,dirty:!0,error:null,equal:Sv,kind:"computed",producerMustRecompute(n){return n.value===Vf||n.value===jf},producerRecomputeValue(n){if(n.value===jf)throw new Error("Detected cycle in computations.");let t=n.value;n.value=jf;let e=Eo(n),r,i=!1;try{r=n.computation(),ge(null),i=t!==Vf&&t!==Sl&&r!==Sl&&n.equal(t,r)}catch(o){r=Sl,n.error=o}finally{Vs(n,e)}if(i){n.value=t;return}n.value=r,n.version++}});function nD(){throw new Error}var Ov=nD;function Rv(){Ov()}function Fv(n){Ov=n}var rD=null;function Lv(n){let t=Object.create($f);t.value=n;let e=()=>(Dl(t),t.value);return e[Ft]=t,e}function Tl(n,t){Tv()||Rv(),n.equal(n.value,t)||(n.value=t,iD(n))}function Vv(n,t){Tv()||Rv(),Tl(n,t(n.value))}var $f=z(N({},Ci),{equal:Sv,value:void 0,kind:"signal"});function iD(n){n.version++,eD(),Iv(n),rD?.()}function jv(n,t,e){let r=Object.create(oD);e&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=t;let i=l=>{r.cleanupFn=l};function o(l){return l.fn===null&&l.schedule===null}function s(l){o(l)||(Co(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=Uf)}let a=()=>{if(r.fn===null)return;if(X1())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!js(r))return;r.hasRun=!0;let l=Eo(r);try{r.cleanupFn(),r.cleanupFn=Uf,r.fn(i)}finally{Vs(r,l)}};return r.ref={notify:()=>Mv(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[Ft]:r},r.ref}var Uf=()=>{},oD=z(N({},Ci),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Uf});function te(n){return typeof n=="function"}function So(n){let e=n(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Ml=So(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Si(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Re=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){t=o instanceof Ml?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Uv(o)}catch(s){t=t??[],s instanceof Ml?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Ml(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Uv(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Si(e,t)}remove(t){let{_finalizers:e}=this;e&&Si(e,t),t instanceof n&&t._removeParent(this)}};Re.EMPTY=(()=>{let n=new Re;return n.closed=!0,n})();var Hf=Re.EMPTY;function Al(n){return n instanceof Re||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function Uv(n){te(n)?n():n.unsubscribe()}var Mn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Do={setTimeout(n,t,...e){let{delegate:r}=Do;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=Do;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function kl(n){Do.setTimeout(()=>{let{onUnhandledError:t}=Mn;if(t)t(n);else throw n})}function Us(){}var Bv=zf("C",void 0,void 0);function $v(n){return zf("E",void 0,n)}function Hv(n){return zf("N",n,void 0)}function zf(n,t,e){return{kind:n,value:t,error:e}}var Di=null;function xo(n){if(Mn.useDeprecatedSynchronousErrorHandling){let t=!Di;if(t&&(Di={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:r}=Di;if(Di=null,e)throw r}}else n()}function zv(n){Mn.useDeprecatedSynchronousErrorHandling&&Di&&(Di.errorThrown=!0,Di.error=n)}var xi=class extends Re{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Al(t)&&t.add(this)):this.destination=lD}static create(t,e,r){return new pr(t,e,r)}next(t){this.isStopped?Gf(Hv(t),this):this._next(t)}error(t){this.isStopped?Gf($v(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Gf(Bv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sD=Function.prototype.bind;function qf(n,t){return sD.call(n,t)}var Wf=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){Nl(r)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){Nl(r)}else Nl(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Nl(e)}}},pr=class extends xi{constructor(t,e,r){super();let i;if(te(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&Mn.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&qf(t.next,o),error:t.error&&qf(t.error,o),complete:t.complete&&qf(t.complete,o)}):i=t}this.destination=new Wf(i)}};function Nl(n){Mn.useDeprecatedSynchronousErrorHandling?zv(n):kl(n)}function aD(n){throw n}function Gf(n,t){let{onStoppedNotification:e}=Mn;e&&Do.setTimeout(()=>e(n,t))}var lD={closed:!0,next:Us,error:aD,complete:Us};var Io=typeof Symbol=="function"&&Symbol.observable||"@@observable";function en(n){return n}function Qf(...n){return Kf(n)}function Kf(n){return n.length===0?en:n.length===1?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}var fe=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){let o=uD(e)?e:new pr(e,r,i);return xo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=qv(r),new r((i,o)=>{let s=new pr({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[Io](){return this}pipe(...e){return Kf(e)(this)}toPromise(e){return e=qv(e),new e((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function qv(n){var t;return(t=n??Mn.Promise)!==null&&t!==void 0?t:Promise}function cD(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function uD(n){return n&&n instanceof xi||cD(n)&&Al(n)}function Zf(n){return te(n?.lift)}function le(n){return t=>{if(Zf(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(n,t,e,r,i){return new Yf(n,t,e,r,i)}var Yf=class extends xi{constructor(t,e,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function To(){return le((n,t)=>{let e=null;n._refCount++;let r=ce(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let i=n._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}var Mo=class extends fe{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Zf(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Re;let e=this.getSubject();t.add(this.source.subscribe(ce(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Re.EMPTY)}return t}refCount(){return To()(this)}};var Gv=So(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Fe=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new Pl(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new Gv}next(e){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Hf:(this.currentObservers=null,o.push(e),new Re(()=>{this.currentObservers=null,Si(o,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){let e=new fe;return e.source=this,e}}return n.create=(t,e)=>new Pl(t,e),n})(),Pl=class extends Fe{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,t)}error(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&r!==void 0?r:Hf}};var pt=class extends Fe{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Jf={now(){return(Jf.delegate||Date).now()},delegate:void 0};var Ol=class extends Re{constructor(t,e){super()}schedule(t,e=0){return this}};var Bs={setInterval(n,t,...e){let{delegate:r}=Bs;return r?.setInterval?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=Bs;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var Rl=class extends Ol{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,r=0){return Bs.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return e;e!=null&&Bs.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,e);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Si(r,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var Ao=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}};Ao.now=Jf.now;var Fl=class extends Ao{constructor(t,e=Ao.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}};var Wv=new Fl(Rl);var Lt=new fe(n=>n.complete());function Qv(n){return n&&te(n.schedule)}function Kv(n){return n[n.length-1]}function Ll(n){return te(Kv(n))?n.pop():void 0}function Wr(n){return Qv(Kv(n))?n.pop():void 0}function Yv(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(h){s(h)}}function l(p){try{d(r.throw(p))}catch(h){s(h)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})}function Zv(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ii(n){return this instanceof Ii?(this.v=n,this):new Ii(n)}function Jv(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(b){return Promise.resolve(b).then(g,h)}}function a(g,b){r[g]&&(i[g]=function(E){return new Promise(function(S,A){o.push([g,E,S,A])>1||l(g,E)})},b&&(i[g]=b(i[g])))}function l(g,b){try{d(r[g](b))}catch(E){y(o[0][3],E)}}function d(g){g.value instanceof Ii?Promise.resolve(g.value.v).then(p,h):y(o[0][2],g)}function p(g){l("next",g)}function h(g){l("throw",g)}function y(g,b){g(b),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Xv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof Zv=="function"?Zv(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(d){o({value:d,done:a})},s)}}var Vl=n=>n&&typeof n.length=="number"&&typeof n!="function";function jl(n){return te(n?.then)}function Ul(n){return te(n[Io])}function Bl(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function $l(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hl=dD();function zl(n){return te(n?.[Hl])}function ql(n){return Jv(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:r,done:i}=yield Ii(e.read());if(i)return yield Ii(void 0);yield yield Ii(r)}}finally{e.releaseLock()}})}function Gl(n){return te(n?.getReader)}function He(n){if(n instanceof fe)return n;if(n!=null){if(Ul(n))return fD(n);if(Vl(n))return pD(n);if(jl(n))return hD(n);if(Bl(n))return ey(n);if(zl(n))return mD(n);if(Gl(n))return gD(n)}throw $l(n)}function fD(n){return new fe(t=>{let e=n[Io]();if(te(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pD(n){return new fe(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function hD(n){return new fe(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,kl)})}function mD(n){return new fe(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function ey(n){return new fe(t=>{vD(n,t).catch(e=>t.error(e))})}function gD(n){return ey(ql(n))}function vD(n,t){var e,r,i,o;return Yv(this,void 0,void 0,function*(){try{for(e=Xv(n);r=yield e.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})}function Vt(n,t,e,r=0,i=!1){let o=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Wl(n,t=0){return le((e,r)=>{e.subscribe(ce(r,i=>Vt(r,n,()=>r.next(i),t),()=>Vt(r,n,()=>r.complete(),t),i=>Vt(r,n,()=>r.error(i),t)))})}function Ql(n,t=0){return le((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function ty(n,t){return He(n).pipe(Ql(t),Wl(t))}function ny(n,t){return He(n).pipe(Ql(t),Wl(t))}function ry(n,t){return new fe(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function iy(n,t){return new fe(e=>{let r;return Vt(e,t,()=>{r=n[Hl](),Vt(e,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){e.error(s);return}o?e.complete():e.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function Kl(n,t){if(!n)throw new Error("Iterable cannot be null");return new fe(e=>{Vt(e,t,()=>{let r=n[Symbol.asyncIterator]();Vt(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function oy(n,t){return Kl(ql(n),t)}function sy(n,t){if(n!=null){if(Ul(n))return ty(n,t);if(Vl(n))return ry(n,t);if(jl(n))return ny(n,t);if(Bl(n))return Kl(n,t);if(zl(n))return iy(n,t);if(Gl(n))return oy(n,t)}throw $l(n)}function ze(n,t){return t?sy(n,t):He(n)}function K(...n){let t=Wr(n);return ze(n,t)}function Qr(n,t){let e=te(n)?n:()=>n,r=i=>i.error(e());return new fe(t?i=>t.schedule(r,0,i):r)}function Xf(n){return!!n&&(n instanceof fe||te(n.lift)&&te(n.subscribe))}var hr=So(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Y(n,t){return le((e,r)=>{let i=0;e.subscribe(ce(r,o=>{r.next(n.call(t,o,i++))}))})}var{isArray:yD}=Array;function _D(n,t){return yD(t)?n(...t):n(t)}function Zl(n){return Y(t=>_D(n,t))}var{isArray:bD}=Array,{getPrototypeOf:wD,prototype:ED,keys:CD}=Object;function Yl(n){if(n.length===1){let t=n[0];if(bD(t))return{args:t,keys:null};if(SD(t)){let e=CD(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}function SD(n){return n&&typeof n=="object"&&wD(n)===ED}function Jl(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function ko(...n){let t=Wr(n),e=Ll(n),{args:r,keys:i}=Yl(n);if(r.length===0)return ze([],t);let o=new fe(DD(r,t,i?s=>Jl(i,s):en));return e?o.pipe(Zl(e)):o}function DD(n,t,e=en){return r=>{ay(t,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)ay(t,()=>{let d=ze(n[l],t),p=!1;d.subscribe(ce(r,h=>{o[l]=h,p||(p=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ay(n,t,e){n?Vt(e,n,t):t()}function ly(n,t,e,r,i,o,s,a){let l=[],d=0,p=0,h=!1,y=()=>{h&&!l.length&&!d&&t.complete()},g=E=>d<r?b(E):l.push(E),b=E=>{o&&t.next(E),d++;let S=!1;He(e(E,p++)).subscribe(ce(t,A=>{i?.(A),o?g(A):t.next(A)},()=>{S=!0},void 0,()=>{if(S)try{for(d--;l.length&&d<r;){let A=l.shift();s?Vt(t,s,()=>b(A)):b(A)}y()}catch(A){t.error(A)}}))};return n.subscribe(ce(t,g,()=>{h=!0,y()})),()=>{a?.()}}function tt(n,t,e=1/0){return te(t)?tt((r,i)=>Y((o,s)=>t(r,o,i,s))(He(n(r,i))),e):(typeof t=="number"&&(e=t),le((r,i)=>ly(r,i,n,e)))}function ep(n=1/0){return tt(en,n)}function cy(){return ep(1)}function Kr(...n){return cy()(ze(n,Wr(n)))}function Xl(n){return new fe(t=>{He(n()).subscribe(t)})}function $s(...n){let t=Ll(n),{args:e,keys:r}=Yl(n),i=new fe(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,d=s;for(let p=0;p<s;p++){let h=!1;He(e[p]).subscribe(ce(o,y=>{h||(h=!0,d--),a[p]=y},()=>l--,void 0,()=>{(!l||!h)&&(d||o.next(r?Jl(r,a):a),o.complete())}))}});return t?i.pipe(Zl(t)):i}function Tt(n,t){return le((e,r)=>{let i=0;e.subscribe(ce(r,o=>n.call(t,o,i++)&&r.next(o)))})}function Gn(n){return le((t,e)=>{let r=null,i=!1,o;r=t.subscribe(ce(e,void 0,void 0,s=>{o=He(n(s,Gn(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function uy(n,t,e,r,i){return(o,s)=>{let a=e,l=t,d=0;o.subscribe(ce(s,p=>{let h=d++;l=a?n(l,p,h):(a=!0,p),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function Zr(n,t){return te(t)?tt(n,t,1):tt(n,1)}function tp(n,t=Wv){return le((e,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let d=o;o=null,r.next(d)}};function l(){let d=s+n,p=t.now();if(p<d){i=this.schedule(void 0,d-p),r.add(i);return}a()}e.subscribe(ce(r,d=>{o=d,s=t.now(),i||(i=t.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Yr(n){return le((t,e)=>{let r=!1;t.subscribe(ce(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function tn(n){return n<=0?()=>Lt:le((t,e)=>{let r=0;t.subscribe(ce(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function ec(n=xD){return le((t,e)=>{let r=!1;t.subscribe(ce(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function xD(){return new hr}function mr(n){return le((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function gr(n,t){let e=arguments.length>=2;return r=>r.pipe(n?Tt((i,o)=>n(i,o,r)):en,tn(1),e?Yr(t):ec(()=>new hr))}function No(n){return n<=0?()=>Lt:le((t,e)=>{let r=[];t.subscribe(ce(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function np(n,t){let e=arguments.length>=2;return r=>r.pipe(n?Tt((i,o)=>n(i,o,r)):en,No(1),e?Yr(t):ec(()=>new hr))}function rp(n,t){return le(uy(n,t,arguments.length>=2,!0))}function op(n={}){let{connector:t=()=>new Fe,resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,l,d=0,p=!1,h=!1,y=()=>{a?.unsubscribe(),a=void 0},g=()=>{y(),s=l=void 0,p=h=!1},b=()=>{let E=s;g(),E?.unsubscribe()};return le((E,S)=>{d++,!h&&!p&&y();let A=l=l??t();S.add(()=>{d--,d===0&&!h&&!p&&(a=ip(b,i))}),A.subscribe(S),!s&&d>0&&(s=new pr({next:L=>A.next(L),error:L=>{h=!0,y(),a=ip(g,e,L),A.error(L)},complete:()=>{p=!0,y(),a=ip(g,r),A.complete()}}),He(E).subscribe(s))})(o)}}function ip(n,t,...e){if(t===!0){n();return}if(t===!1)return;let r=new pr({next:()=>{r.unsubscribe(),n()}});return He(t(...e)).subscribe(r)}function sp(n){return Tt((t,e)=>n<=e)}function Hs(...n){let t=Wr(n);return le((e,r)=>{(t?Kr(n,e,t):Kr(n,e)).subscribe(r)})}function nn(n,t){return le((e,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();e.subscribe(ce(r,l=>{i?.unsubscribe();let d=0,p=o++;He(n(l,p)).subscribe(i=ce(r,h=>r.next(t?t(l,h,p,d++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function zs(n){return le((t,e)=>{He(n).subscribe(ce(e,()=>e.complete(),Us)),!e.closed&&t.subscribe(e)})}function Ge(n,t,e){let r=te(n)||t||e?{next:n,error:t,complete:e}:n;return r?le((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ce(o,l=>{var d;(d=r.next)===null||d===void 0||d.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,l),o.error(l)},()=>{var l,d;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):en}var Yy="https://g.co/ng/security#xss",k=class extends Error{code;constructor(t,e){super(Bc(t,e)),this.code=t}};function Bc(n,t){return`${`NG0${Math.abs(n)}`}${t?": "+t:""}`}var Jy=Symbol("InputSignalNode#UNSET"),ID=z(N({},$f),{transformFn:void 0,applyValueToInputSignal(n,t){Tl(n,t)}});function Xy(n,t){let e=Object.create(ID);e.value=n,e.transformFn=t?.transform;function r(){if(Dl(e),e.value===Jy)throw new k(-950,!1);return e.value}return r[Ft]=e,r}function oa(n){return{toString:n}.toString()}var tc="__parameters__";function TD(n){return function(...e){if(n){let r=n(...e);for(let i in r)this[i]=r[i]}}}function e_(n,t,e){return oa(()=>{let r=TD(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,d,p){let h=l.hasOwnProperty(tc)?l[tc]:Object.defineProperty(l,tc,{value:[]})[tc];for(;h.length<=p;)h.push(null);return(h[p]=h[p]||[]).push(s),l}}return e&&(i.prototype=Object.create(e.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var vr=globalThis;function xe(n){for(let t in n)if(n[t]===xe)return t;throw Error("Could not find renamed property on target object.")}function MD(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function At(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(At).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let t=n.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function _p(n,t){return n==null||n===""?t===null?"":t:t==null||t===""?n:n+" "+t}var AD=xe({__forward_ref__:xe});function wt(n){return n.__forward_ref__=wt,n.toString=function(){return At(this())},n}function Mt(n){return t_(n)?n():n}function t_(n){return typeof n=="function"&&n.hasOwnProperty(AD)&&n.__forward_ref__===wt}function P(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function nt(n){return{providers:n.providers||[],imports:n.imports||[]}}function $c(n){return dy(n,r_)||dy(n,i_)}function n_(n){return $c(n)!==null}function dy(n,t){return n.hasOwnProperty(t)?n[t]:null}function kD(n){let t=n&&(n[r_]||n[i_]);return t||null}function fy(n){return n&&(n.hasOwnProperty(py)||n.hasOwnProperty(ND))?n[py]:null}var r_=xe({\u0275prov:xe}),py=xe({\u0275inj:xe}),i_=xe({ngInjectableDef:xe}),ND=xe({ngInjectorDef:xe}),j=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=P({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function o_(n){return n&&!!n.\u0275providers}var PD=xe({\u0275cmp:xe}),OD=xe({\u0275dir:xe}),RD=xe({\u0275pipe:xe}),FD=xe({\u0275mod:xe}),hc=xe({\u0275fac:xe}),Qs=xe({__NG_ELEMENT_ID__:xe}),hy=xe({__NG_ENV_ID__:xe});function yr(n){return typeof n=="string"?n:n==null?"":String(n)}function LD(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():yr(n)}function VD(n,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new k(-200,n)}function xh(n,t){throw new k(-201,!1)}var se=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(se||{}),bp;function s_(){return bp}function jt(n){let t=bp;return bp=n,t}function a_(n,t,e){let r=$c(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&se.Optional)return null;if(t!==void 0)return t;xh(n,"Injector")}var jD={},Ks=jD,wp="__NG_DI_FLAG__",mc="ngTempTokenPath",UD="ngTokenPath",BD=/\n/gm,$D="\u0275",my="__source",Lo;function HD(){return Lo}function Jr(n){let t=Lo;return Lo=n,t}function zD(n,t=se.Default){if(Lo===void 0)throw new k(-203,!1);return Lo===null?a_(n,void 0,t):Lo.get(n,t&se.Optional?null:void 0,t)}function F(n,t=se.Default){return(s_()||zD)(Mt(n),t)}function M(n,t=se.Default){return F(n,Hc(t))}function Hc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ep(n){let t=[];for(let e=0;e<n.length;e++){let r=Mt(n[e]);if(Array.isArray(r)){if(r.length===0)throw new k(900,!1);let i,o=se.Default;for(let s=0;s<r.length;s++){let a=r[s],l=qD(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}t.push(F(i,o))}else t.push(F(r))}return t}function l_(n,t){return n[wp]=t,n.prototype[wp]=t,n}function qD(n){return n[wp]}function GD(n,t,e,r){let i=n[mc];throw t[my]&&i.unshift(t[my]),n.message=WD(`
`+n.message,i,e,r),n[UD]=i,n[mc]=null,n}function WD(n,t,e,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==$D?n.slice(2):n;let i=At(t);if(Array.isArray(t))i=t.map(At).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):At(a)))}i=`{${o.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${n.replace(BD,`
  `)}`}var zc=l_(e_("Optional"),8);var Ih=l_(e_("SkipSelf"),4);function Ai(n,t){let e=n.hasOwnProperty(hc);return e?n[hc]:null}function QD(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}function KD(n){return n.flat(Number.POSITIVE_INFINITY)}function Th(n,t){n.forEach(e=>Array.isArray(e)?Th(e,t):t(e))}function c_(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function gc(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function ZD(n,t){let e=[];for(let r=0;r<n;r++)e.push(t);return e}function YD(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(i===1)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;){let o=i-2;n[i]=n[o],i--}n[t]=e,n[t+1]=r}}function Mh(n,t,e){let r=sa(n,t);return r>=0?n[r|1]=e:(r=~r,YD(n,r,t,e)),r}function ap(n,t){let e=sa(n,t);if(e>=0)return n[e|1]}function sa(n,t){return JD(n,t,1)}function JD(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}var jo={},Ut=[],Uo=new j(""),u_=new j("",-1),d_=new j(""),vc=class{get(t,e=Ks){if(e===Ks){let r=new Error(`NullInjectorError: No provider for ${At(t)}!`);throw r.name="NullInjectorError",r}return e}};function f_(n,t){let e=n[FD]||null;if(!e&&t===!0)throw new Error(`Type ${At(n)} does not have '\u0275mod' property.`);return e}function ki(n){return n[PD]||null}function p_(n){return n[OD]||null}function h_(n){return n[RD]||null}function m_(n){let t=ki(n)||p_(n)||h_(n);return t!==null&&t.standalone}function Wo(n){return{\u0275providers:n}}function XD(...n){return{\u0275providers:g_(!0,n),\u0275fromNgModule:!0}}function g_(n,...t){let e=[],r=new Set,i,o=s=>{e.push(s)};return Th(t,s=>{let a=s;Cp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&v_(i,o),e}function v_(n,t){for(let e=0;e<n.length;e++){let{ngModule:r,providers:i}=n[e];Ah(i,o=>{t(o,r)})}}function Cp(n,t,e,r){if(n=Mt(n),!n)return!1;let i=null,o=fy(n),s=!o&&ki(n);if(!o&&!s){let l=n.ngModule;if(o=fy(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of l)Cp(d,t,e,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let d;try{Th(o.imports,p=>{Cp(p,t,e,r)&&(d||=[],d.push(p))})}finally{}d!==void 0&&v_(d,t)}if(!a){let d=Ai(i)||(()=>new i);t({provide:i,useFactory:d,deps:Ut},i),t({provide:d_,useValue:i,multi:!0},i),t({provide:Uo,useValue:()=>F(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let d=n;Ah(l,p=>{t(p,d)})}}else return!1;return i!==n&&n.providers!==void 0}function Ah(n,t){for(let e of n)o_(e)&&(e=e.\u0275providers),Array.isArray(e)?Ah(e,t):t(e)}var ex=xe({provide:String,useValue:xe});function y_(n){return n!==null&&typeof n=="object"&&ex in n}function tx(n){return!!(n&&n.useExisting)}function nx(n){return!!(n&&n.useFactory)}function Bo(n){return typeof n=="function"}function rx(n){return!!n.useClass}var qc=new j(""),ac={},ix={},lp;function kh(){return lp===void 0&&(lp=new vc),lp}var Bt=class{},Zs=class extends Bt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,Dp(t,s=>this.processProvider(s)),this.records.set(u_,Po(void 0,this)),i.has("environment")&&this.records.set(Bt,Po(void 0,this));let o=this.records.get(qc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(d_,Ut,se.Self))}destroy(){Gs(this),this._destroyed=!0;let t=ge(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(t)}}onDestroy(t){return Gs(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Gs(this);let e=Jr(this),r=jt(void 0),i;try{return t()}finally{Jr(e),jt(r)}}get(t,e=Ks,r=se.Default){if(Gs(this),t.hasOwnProperty(hy))return t[hy](this);r=Hc(r);let i,o=Jr(this),s=jt(void 0);try{if(!(r&se.SkipSelf)){let l=this.records.get(t);if(l===void 0){let d=cx(t)&&$c(t);d&&this.injectableDefInScope(d)?l=Po(Sp(t),ac):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=r&se.Self?kh():this.parent;return e=r&se.Optional&&e===Ks?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[mc]=a[mc]||[]).unshift(At(t)),o)throw a;return GD(a,t,"R3InjectorError",this.source)}else throw a}finally{jt(s),Jr(o)}}resolveInjectorInitializers(){let t=ge(null),e=Jr(this),r=jt(void 0),i;try{let o=this.get(Uo,Ut,se.Self);for(let s of o)s()}finally{Jr(e),jt(r),ge(t)}}toString(){let t=[],e=this.records;for(let r of e.keys())t.push(At(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Mt(t);let e=Bo(t)?t:Mt(t&&t.provide),r=sx(t);if(!Bo(t)&&t.multi===!0){let i=this.records.get(e);i||(i=Po(void 0,ac,!0),i.factory=()=>Ep(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e){let r=ge(null);try{return e.value===ac&&(e.value=ix,e.value=e.factory()),typeof e.value=="object"&&e.value&&lx(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{ge(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=Mt(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function Sp(n){let t=$c(n),e=t!==null?t.factory:Ai(n);if(e!==null)return e;if(n instanceof j)throw new k(204,!1);if(n instanceof Function)return ox(n);throw new k(204,!1)}function ox(n){if(n.length>0)throw new k(204,!1);let e=kD(n);return e!==null?()=>e.factory(n):()=>new n}function sx(n){if(y_(n))return Po(void 0,n.useValue);{let t=__(n);return Po(t,ac)}}function __(n,t,e){let r;if(Bo(n)){let i=Mt(n);return Ai(i)||Sp(i)}else if(y_(n))r=()=>Mt(n.useValue);else if(nx(n))r=()=>n.useFactory(...Ep(n.deps||[]));else if(tx(n))r=()=>F(Mt(n.useExisting));else{let i=Mt(n&&(n.useClass||n.provide));if(ax(n))r=()=>new i(...Ep(n.deps));else return Ai(i)||Sp(i)}return r}function Gs(n){if(n.destroyed)throw new k(205,!1)}function Po(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function ax(n){return!!n.deps}function lx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function cx(n){return typeof n=="function"||typeof n=="object"&&n instanceof j}function Dp(n,t){for(let e of n)Array.isArray(e)?Dp(e,t):e&&o_(e)?Dp(e.\u0275providers,t):t(e)}function sn(n,t){n instanceof Zs&&Gs(n);let e,r=Jr(n),i=jt(void 0);try{return t()}finally{Jr(r),jt(i)}}function b_(){return s_()!==void 0||HD()!=null}function Nh(n){if(!b_())throw new k(-203,!1)}function ux(n){return typeof n=="function"}var Dr=0,ue=1,X=2,bt=3,Nn=4,Ht=5,Ys=6,yc=7,bn=8,Js=9,_r=10,We=11,Xs=12,gy=13,Qo=14,wn=15,Ni=16,Oo=17,br=18,Gc=19,w_=20,Xr=21,lc=22,Pi=23,rn=24,kt=25,E_=1;var Oi=7,_c=8,$o=9,on=10;function ei(n){return Array.isArray(n)&&typeof n[E_]=="object"}function xr(n){return Array.isArray(n)&&n[E_]===!0}function Ph(n){return(n.flags&4)!==0}function Ui(n){return n.componentOffset>-1}function Wc(n){return(n.flags&1)===1}function wr(n){return!!n.template}function bc(n){return(n[X]&512)!==0}function aa(n){return(n[X]&256)===256}var xp=class{previousValue;currentValue;firstChange;constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function C_(n,t,e,r){t!==null?t.applyValueToInputSignal(t,r):n[e]=r}var Pn=(()=>{let n=()=>S_;return n.ngInherit=!0,n})();function S_(n){return n.type.prototype.ngOnChanges&&(n.setInput=fx),dx}function dx(){let n=x_(this),t=n?.current;if(t){let e=n.previous;if(e===jo)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function fx(n,t,e,r,i){let o=this.declaredInputs[r],s=x_(n)||px(n,{previous:jo,current:null}),a=s.current||(s.current={}),l=s.previous,d=l[o];a[o]=new xp(d&&d.currentValue,e,l===jo),C_(n,t,i,e)}var D_="__ngSimpleChanges__";function x_(n){return n[D_]||null}function px(n,t){return n[D_]=t}var vy=null;var _n=function(n,t,e){vy?.(n,t,e)},hx="svg",mx="math";function Qn(n){for(;Array.isArray(n);)n=n[Dr];return n}function I_(n,t){return Qn(t[n])}function On(n,t){return Qn(t[n.index])}function T_(n,t){return n.data[t]}function M_(n,t){return n[t]}function Kn(n,t){let e=t[n];return ei(e)?e:e[Dr]}function gx(n){return(n[X]&4)===4}function Oh(n){return(n[X]&128)===128}function vx(n){return xr(n[bt])}function Ho(n,t){return t==null?null:n[t]}function A_(n){n[Oo]=0}function Rh(n){n[X]&1024||(n[X]|=1024,Oh(n)&&la(n))}function yx(n,t){for(;n>0;)t=t[Qo],n--;return t}function Qc(n){return!!(n[X]&9216||n[rn]?.dirty)}function Ip(n){n[_r].changeDetectionScheduler?.notify(9),n[X]&64&&(n[X]|=1024),Qc(n)&&la(n)}function la(n){n[_r].changeDetectionScheduler?.notify(0);let t=Ri(n);for(;t!==null&&!(t[X]&8192||(t[X]|=8192,!Oh(t)));)t=Ri(t)}function k_(n,t){if(aa(n))throw new k(911,!1);n[Xr]===null&&(n[Xr]=[]),n[Xr].push(t)}function _x(n,t){if(n[Xr]===null)return;let e=n[Xr].indexOf(t);e!==-1&&n[Xr].splice(e,1)}function Ri(n){let t=n[bt];return xr(t)?t[bt]:t}function N_(n){return n[yc]??=[]}function P_(n){return n.cleanup??=[]}function bx(n,t,e,r){let i=N_(t);i.push(e),n.firstCreatePass&&P_(n).push(r,i.length-1)}var oe={lFrame:$_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Tp=!1;function wx(){return oe.lFrame.elementDepthCount}function Ex(){oe.lFrame.elementDepthCount++}function Cx(){oe.lFrame.elementDepthCount--}function O_(){return oe.bindingsEnabled}function R_(){return oe.skipHydrationRootTNode!==null}function Sx(n){return oe.skipHydrationRootTNode===n}function Dx(){oe.skipHydrationRootTNode=null}function ae(){return oe.lFrame.lView}function Ke(){return oe.lFrame.tView}function I(n){return oe.lFrame.contextLView=n,n[bn]}function T(n){return oe.lFrame.contextLView=null,n}function Nt(){let n=F_();for(;n!==null&&n.type===64;)n=n.parent;return n}function F_(){return oe.lFrame.currentTNode}function xx(){let n=oe.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function Bi(n,t){let e=oe.lFrame;e.currentTNode=n,e.isParent=t}function Fh(){return oe.lFrame.isParent}function Lh(){oe.lFrame.isParent=!1}function Ix(){return oe.lFrame.contextLView}function L_(){return Tp}function wc(n){let t=Tp;return Tp=n,t}function Kc(){let n=oe.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function V_(){return oe.lFrame.bindingIndex}function Tx(n){return oe.lFrame.bindingIndex=n}function Zc(){return oe.lFrame.bindingIndex++}function Yc(n){let t=oe.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function Mx(){return oe.lFrame.inI18n}function Ax(n,t){let e=oe.lFrame;e.bindingIndex=e.bindingRootIndex=n,Mp(t)}function kx(){return oe.lFrame.currentDirectiveIndex}function Mp(n){oe.lFrame.currentDirectiveIndex=n}function Nx(n){let t=oe.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function j_(){return oe.lFrame.currentQueryIndex}function Vh(n){oe.lFrame.currentQueryIndex=n}function Px(n){let t=n[ue];return t.type===2?t.declTNode:t.type===1?n[Ht]:null}function U_(n,t,e){if(e&se.SkipSelf){let i=t,o=n;for(;i=i.parent,i===null&&!(e&se.Host);)if(i=Px(o),i===null||(o=o[Qo],i.type&10))break;if(i===null)return!1;t=i,n=o}let r=oe.lFrame=B_();return r.currentTNode=t,r.lView=n,!0}function jh(n){let t=B_(),e=n[ue];oe.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function B_(){let n=oe.lFrame,t=n===null?null:n.child;return t===null?$_(n):t}function $_(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function H_(){let n=oe.lFrame;return oe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var z_=H_;function Uh(){let n=H_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ox(n){return(oe.lFrame.contextLView=yx(n,oe.lFrame.contextLView))[bn]}function Ir(){return oe.lFrame.selectedIndex}function Fi(n){oe.lFrame.selectedIndex=n}function Bh(){let n=oe.lFrame;return T_(n.tView,n.selectedIndex)}function Rx(){return oe.lFrame.currentNamespace}var q_=!0;function Jc(){return q_}function Xc(n){q_=n}function Fx(n,t,e){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=S_(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}i&&(e.preOrderHooks??=[]).push(0-n,i),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function eu(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:d,ngOnDestroy:p}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),d&&((n.viewHooks??=[]).push(e,d),(n.viewCheckHooks??=[]).push(e,d)),p!=null&&(n.destroyHooks??=[]).push(e,p)}}function cc(n,t,e){G_(n,t,3,e)}function uc(n,t,e,r){(n[X]&3)===e&&G_(n,t,e,r)}function cp(n,t){let e=n[X];(e&3)===t&&(e&=16383,e+=1,n[X]=e)}function G_(n,t,e,r){let i=r!==void 0?n[Oo]&65535:0,o=r??-1,s=t.length-1,a=0;for(let l=i;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],r!=null&&a>=r)break}else t[l]<0&&(n[Oo]+=65536),(a<o||o==-1)&&(Lx(n,e,t,l),n[Oo]=(n[Oo]&4294901760)+l+2),l++}function yy(n,t){_n(4,n,t);let e=ge(null);try{t.call(n)}finally{ge(e),_n(5,n,t)}}function Lx(n,t,e,r){let i=e[r]<0,o=e[r+1],s=i?-e[r]:e[r],a=n[s];i?n[X]>>14<n[Oo]>>16&&(n[X]&3)===t&&(n[X]+=16384,yy(a,o)):yy(a,o)}var Vo=-1,Li=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,r){this.factory=t,this.canSeeViewProviders=e,this.injectImpl=r}};function Vx(n){return n instanceof Li}function jx(n){return(n.flags&8)!==0}function Ux(n){return(n.flags&16)!==0}function Bx(n,t,e){let r=0;for(;r<e.length;){let i=e[r];if(typeof i=="number"){if(i!==0)break;r++;let o=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,o)}else{let o=i,s=e[++r];$x(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),r++}}return r}function W_(n){return n===3||n===4||n===6}function $x(n){return n.charCodeAt(0)===64}function zo(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?e=i:e===0||(e===-1||e===2?_y(n,e,i,null,t[++r]):_y(n,e,i,null,null))}}return n}function _y(n,t,e,r,i){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var up={},Ap=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=Hc(r);let i=this.injector.get(t,up,r);return i!==up||e===up?i:this.parentInjector.get(t,e,r)}};function Q_(n){return n!==Vo}function Ec(n){return n&32767}function Hx(n){return n>>16}function Cc(n,t){let e=Hx(n),r=t;for(;e>0;)r=r[Qo],e--;return r}var kp=!0;function Sc(n){let t=kp;return kp=n,t}var zx=256,K_=zx-1,Z_=5,qx=0,Wn={};function Gx(n,t,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(Qs)&&(r=e[Qs]),r==null&&(r=e[Qs]=qx++);let i=r&K_,o=1<<i;t.data[n+(i>>Z_)]|=o}function Dc(n,t){let e=Y_(n,t);if(e!==-1)return e;let r=t[ue];r.firstCreatePass&&(n.injectorIndex=t.length,dp(r.data,n),dp(t,null),dp(r.blueprint,null));let i=$h(n,t),o=n.injectorIndex;if(Q_(i)){let s=Ec(i),a=Cc(i,t),l=a[ue].data;for(let d=0;d<8;d++)t[o+d]=a[s+d]|l[s+d]}return t[o+8]=i,o}function dp(n,t){n.push(0,0,0,0,0,0,0,0,t)}function Y_(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function $h(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;i!==null;){if(r=nb(i),r===null)return Vo;if(e++,i=i[Qo],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return Vo}function Np(n,t,e){Gx(n,t,e)}function Wx(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let r=e.length,i=0;for(;i<r;){let o=e[i];if(W_(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof e[i]=="string";)i++;else{if(o===t)return e[i+1];i=i+2}}}return null}function J_(n,t,e){if(e&se.Optional||n!==void 0)return n;xh(t,"NodeInjector")}function X_(n,t,e,r){if(e&se.Optional&&r===void 0&&(r=null),!(e&(se.Self|se.Host))){let i=n[Js],o=jt(void 0);try{return i?i.get(t,r,e&se.Optional):a_(t,r,e&se.Optional)}finally{jt(o)}}return J_(r,t,e)}function eb(n,t,e,r=se.Default,i){if(n!==null){if(t[X]&2048&&!(r&se.Self)){let s=Yx(n,t,e,r,Wn);if(s!==Wn)return s}let o=tb(n,t,e,r,Wn);if(o!==Wn)return o}return X_(t,e,r,i)}function tb(n,t,e,r,i){let o=Kx(e);if(typeof o=="function"){if(!U_(t,n,r))return r&se.Host?J_(i,e,r):X_(t,e,r,i);try{let s;if(s=o(r),s==null&&!(r&se.Optional))xh(e);else return s}finally{z_()}}else if(typeof o=="number"){let s=null,a=Y_(n,t),l=Vo,d=r&se.Host?t[wn][Ht]:null;for((a===-1||r&se.SkipSelf)&&(l=a===-1?$h(n,t):t[a+8],l===Vo||!wy(r,!1)?a=-1:(s=t[ue],a=Ec(l),t=Cc(l,t)));a!==-1;){let p=t[ue];if(by(o,a,p.data)){let h=Qx(a,t,e,s,r,d);if(h!==Wn)return h}l=t[a+8],l!==Vo&&wy(r,t[ue].data[a+8]===d)&&by(o,a,t)?(s=p,a=Ec(l),t=Cc(l,t)):a=-1}}return i}function Qx(n,t,e,r,i,o){let s=t[ue],a=s.data[n+8],l=r==null?Ui(a)&&kp:r!=s&&(a.type&3)!==0,d=i&se.Host&&o===a,p=dc(a,s,e,l,d);return p!==null?ea(t,s,p,a):Wn}function dc(n,t,e,r,i){let o=n.providerIndexes,s=t.data,a=o&1048575,l=n.directiveStart,d=n.directiveEnd,p=o>>20,h=r?a:a+p,y=i?a+p:d;for(let g=h;g<y;g++){let b=s[g];if(g<l&&e===b||g>=l&&b.type===e)return g}if(i){let g=s[l];if(g&&wr(g)&&g.type===e)return l}return null}function ea(n,t,e,r){let i=n[e],o=t.data;if(Vx(i)){let s=i;s.resolving&&VD(LD(o[e]));let a=Sc(s.canSeeViewProviders);s.resolving=!0;let l,d=s.injectImpl?jt(s.injectImpl):null,p=U_(n,r,se.Default);try{i=n[e]=s.factory(void 0,o,n,r),t.firstCreatePass&&e>=r.directiveStart&&Fx(e,o[e],t)}finally{d!==null&&jt(d),Sc(a),s.resolving=!1,z_()}}return i}function Kx(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Qs)?n[Qs]:void 0;return typeof t=="number"?t>=0?t&K_:Zx:t}function by(n,t,e){let r=1<<n;return!!(e[t+(n>>Z_)]&r)}function wy(n,t){return!(n&se.Self)&&!(n&se.Host&&t)}var Mi=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return eb(this._tNode,this._lView,t,Hc(r),e)}};function Zx(){return new Mi(Nt(),ae())}function En(n){return oa(()=>{let t=n.prototype.constructor,e=t[hc]||Pp(t),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[hc]||Pp(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Pp(n){return t_(n)?()=>{let t=Pp(Mt(n));return t&&t()}:Ai(n)}function Yx(n,t,e,r,i){let o=n,s=t;for(;o!==null&&s!==null&&s[X]&2048&&!bc(s);){let a=tb(o,s,e,r|se.Self,Wn);if(a!==Wn)return a;let l=o.parent;if(!l){let d=s[w_];if(d){let p=d.get(e,Wn,r);if(p!==Wn)return p}l=nb(s),s=s[Qo]}o=l}return i}function nb(n){let t=n[ue],e=t.type;return e===2?t.declTNode:e===1?n[Ht]:null}function tu(n){return Wx(Nt(),n)}function Ey(n,t=null,e=null,r){let i=rb(n,t,e,r);return i.resolveInjectorInitializers(),i}function rb(n,t=null,e=null,r,i=new Set){let o=[e||Ut,XD(n)];return r=r||(typeof n=="object"?void 0:At(n)),new Zs(o,t||kh(),r||null,i)}var ht=class n{static THROW_IF_NOT_FOUND=Ks;static NULL=new vc;static create(t,e){if(Array.isArray(t))return Ey({name:""},e,t,"");{let r=t.name??"";return Ey({name:r},t.parent,t.providers,r)}}static \u0275prov=P({token:n,providedIn:"any",factory:()=>F(u_)});static __NG_ELEMENT_ID__=-1};var xc=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>tu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},Jx=new j("");Jx.__NG_ELEMENT_ID__=n=>{let t=Nt();if(t===null)throw new k(204,!1);if(t.type&2)return t.value;if(n&se.Optional)return null;throw new k(204,!1)};var ib=!1,$i=(()=>{class n{static __NG_ELEMENT_ID__=Xx;static __NG_ENV_ID__=e=>e}return n})(),Ic=class extends $i{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return k_(this._lView,t),()=>_x(this._lView,t)}};function Xx(){return new Ic(ae())}var ti=class{},nu=new j("",{providedIn:"root",factory:()=>!1});var ob=new j(""),Hh=new j(""),Tr=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new pt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=P({token:n,providedIn:"root",factory:()=>new n})}return n})();var Op=class extends Fe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,b_()&&(this.destroyRef=M($i,{optional:!0})??void 0,this.pendingTasks=M(Tr,{optional:!0})??void 0)}emit(t){let e=ge(null);try{super.next(t)}finally{ge(e)}}subscribe(t,e,r){let i=t,o=e||(()=>null),s=r;if(t&&typeof t=="object"){let l=t;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof Re&&t.add(a),a}wrapInTimeout(t){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(e),r!==void 0&&this.pendingTasks?.remove(r)})}}},_e=Op;function ta(...n){}function sb(n){let t,e;function r(){n=ta;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Cy(n){return queueMicrotask(()=>n()),()=>{n=ta}}var zh="isAngularZone",Tc=zh+"_ID",eI=0,De=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new _e(!1);onMicrotaskEmpty=new _e(!1);onStable=new _e(!1);onError=new _e(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=ib}=t;if(typeof Zone>"u")throw new k(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,rI(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(zh)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new k(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new k(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,tI,ta,ta);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}},tI={};function qh(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function nI(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){sb(()=>{n.callbackScheduled=!1,Rp(n),n.isCheckStableRunning=!0,qh(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),Rp(n)}function rI(n){let t=()=>{nI(n)},e=eI++;n._inner=n._inner.fork({name:"angular",properties:{[zh]:!0,[Tc]:e,[Tc+e]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(iI(l))return r.invokeTask(o,s,a,l);try{return Sy(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),Dy(n)}},onInvoke:(r,i,o,s,a,l,d)=>{try{return Sy(n),r.invoke(o,s,a,l,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!oI(l)&&t(),Dy(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Rp(n),qh(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Rp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Sy(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Dy(n){n._nesting--,qh(n)}var Mc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new _e;onMicrotaskEmpty=new _e;onStable=new _e;onError=new _e;run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}};function iI(n){return ab(n,"__ignore_ng_zone__")}function oI(n){return ab(n,"__scheduler_tick__")}function ab(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var $t=class{_console=console;handleError(t){this._console.error("ERROR",t)}},sI=new j("",{providedIn:"root",factory:()=>{let n=M(De),t=M($t);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function xy(n,t){return Xy(n,t)}function aI(n){return Xy(Jy,n)}var lb=(xy.required=aI,xy);function lI(){return Ko(Nt(),ae())}function Ko(n,t){return new Ze(On(n,t))}var Ze=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=lI}return n})();function cI(n){return n instanceof Ze?n.nativeElement:n}var Iy=new Set;function Rn(n){Iy.has(n)||(Iy.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Gh(n){return typeof n=="function"&&n[Ft]!==void 0}function lt(n,t){Rn("NgSignals");let e=Lv(n),r=e[Ft];return t?.equal&&(r.equal=t.equal),e.set=i=>Tl(r,i),e.update=i=>Vv(r,i),e.asReadonly=uI.bind(e),e}function uI(){let n=this[Ft];if(n.readonlyFn===void 0){let t=()=>this();t[Ft]=n,n.readonlyFn=t}return n.readonlyFn}function cb(n){return Gh(n)&&typeof n.set=="function"}function dI(){return this._results[Symbol.iterator]()}var Ac=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Fe}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let r=KD(t);(this._changesDetected=!QD(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=dI};function ub(n){return(n.flags&128)===128}var db=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(db||{}),fb=new Map,fI=0;function pI(){return fI++}function hI(n){fb.set(n[Gc],n)}function Fp(n){fb.delete(n[Gc])}var Ty="__ngContext__";function Hi(n,t){ei(t)?(n[Ty]=t[Gc],hI(t)):n[Ty]=t}function pb(n){return mb(n[Xs])}function hb(n){return mb(n[Nn])}function mb(n){for(;n!==null&&!xr(n);)n=n[Nn];return n}var Lp;function gb(n){Lp=n}function mI(){if(Lp!==void 0)return Lp;if(typeof document<"u")return document;throw new k(210,!1)}var ru=new j("",{providedIn:"root",factory:()=>gI}),gI="ng",Wh=new j(""),Et=new j("",{providedIn:"platform",factory:()=>"unknown"});var iu=new j(""),ca=new j("",{providedIn:"root",factory:()=>mI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var vI="h",yI="b";var vb=!1,_I=new j("",{providedIn:"root",factory:()=>vb});var Qh=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Qh||{}),Zo=new j("");var Ro=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ro||{}),yb=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=P({token:n,providedIn:"root",factory:()=>new n})}return n})(),bI=[Ro.EarlyRead,Ro.Write,Ro.MixedReadWrite,Ro.Read],wI=(()=>{class n{ngZone=M(De);scheduler=M(ti);errorHandler=M($t,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(Zo,{optional:!0})}execute(){this.executing=!0;for(let e of bI)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[e]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>r.hooks[e](r.pipelinedValue),r.snapshot))}catch(i){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(7))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,r){return r?r.run(Qh.AFTER_NEXT_RENDER,e):e()}static \u0275prov=P({token:n,providedIn:"root",factory:()=>new n})}return n})(),Vp=class{impl;hooks;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,r,i,o=null){this.impl=t,this.hooks=e,this.once=r,this.snapshot=o,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Kh(n,t){!t?.injector&&Nh(Kh);let e=t?.injector??M(ht);return Rn("NgAfterRender"),CI(n,e,t,!1)}function EI(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function CI(n,t,e,r){let i=t.get(yb);i.impl??=t.get(wI);let o=t.get(Zo,null,{optional:!0}),s=e?.phase??Ro.MixedReadWrite,a=e?.manualCleanup!==!0?t.get($i):null,l=new Vp(i.impl,EI(n,s),r,a,o?.snapshot(null));return i.impl.register(l),l}var SI=()=>null;function _b(n,t,e=!1){return SI(n,t,e)}function bb(n,t){let e=n.contentQueries;if(e!==null){let r=ge(null);try{for(let i=0;i<e.length;i+=2){let o=e[i],s=e[i+1];if(s!==-1){let a=n.data[s];Vh(o),a.contentQueries(2,t[s],s)}}}finally{ge(r)}}}function jp(n,t,e){Vh(0);let r=ge(null);try{t(n,e)}finally{ge(r)}}function Zh(n,t,e){if(Ph(t)){let r=ge(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{ge(r)}}}var Zn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Zn||{}),nc;function wb(){if(nc===void 0&&(nc=null,vr.trustedTypes))try{nc=vr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return nc}function ou(n){return wb()?.createHTML(n)||n}function DI(n){return wb()?.createScriptURL(n)||n}var rc;function xI(){if(rc===void 0&&(rc=null,vr.trustedTypes))try{rc=vr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return rc}function My(n){return xI()?.createScriptURL(n)||n}var Er=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Yy})`}},Up=class extends Er{getTypeName(){return"HTML"}},Bp=class extends Er{getTypeName(){return"Style"}},$p=class extends Er{getTypeName(){return"Script"}},Hp=class extends Er{getTypeName(){return"URL"}},zp=class extends Er{getTypeName(){return"ResourceURL"}};function Fn(n){return n instanceof Er?n.changingThisBreaksApplicationSecurity:n}function si(n,t){let e=II(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Yy})`)}return e===t}function II(n){return n instanceof Er&&n.getTypeName()||null}function Eb(n){return new Up(n)}function Cb(n){return new Bp(n)}function Sb(n){return new $p(n)}function Db(n){return new Hp(n)}function xb(n){return new zp(n)}function TI(n){let t=new Gp(n);return MI()?new qp(t):t}var qp=class{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(ou(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},Gp=class{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=ou(t),e}};function MI(){try{return!!new window.DOMParser().parseFromString(ou(""),"text/html")}catch{return!1}}var AI=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function su(n){return n=String(n),n.match(AI)?n:"unsafe:"+n}function Mr(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function ua(...n){let t={};for(let e of n)for(let r in e)e.hasOwnProperty(r)&&(t[r]=!0);return t}var Ib=Mr("area,br,col,hr,img,wbr"),Tb=Mr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Mb=Mr("rp,rt"),kI=ua(Mb,Tb),NI=ua(Tb,Mr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),PI=ua(Mb,Mr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ay=ua(Ib,NI,PI,kI),Ab=Mr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),OI=Mr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),RI=Mr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),FI=ua(Ab,OI,RI),LI=Mr("script,style,template"),Wp=class{sanitizedSomething=!1;buf=[];sanitizeChildren(t){let e=t.firstChild,r=!0,i=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild){i.push(e),e=UI(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=jI(e);if(o){e=o;break}e=i.pop()}}return this.buf.join("")}startElement(t){let e=ky(t).toLowerCase();if(!Ay.hasOwnProperty(e))return this.sanitizedSomething=!0,!LI.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let r=t.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!FI.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;Ab[a]&&(l=su(l)),this.buf.push(" ",s,'="',Ny(l),'"')}return this.buf.push(">"),!0}endElement(t){let e=ky(t).toLowerCase();Ay.hasOwnProperty(e)&&!Ib.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Ny(t))}};function VI(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function jI(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw kb(t);return t}function UI(n){let t=n.firstChild;if(t&&VI(n,t))throw kb(t);return t}function ky(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function kb(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var BI=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$I=/([^\#-~ |!])/g;function Ny(n){return n.replace(/&/g,"&amp;").replace(BI,function(t){let e=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((e-55296)*1024+(r-56320)+65536)+";"}).replace($I,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var ic;function Nb(n,t){let e=null;try{ic=ic||TI(n);let r=t?String(t):"";e=ic.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=e.innerHTML,e=ic.getInertBodyElement(r)}while(r!==o);let a=new Wp().sanitizeChildren(Py(e)||e);return ou(a)}finally{if(e){let r=Py(e)||e;for(;r.firstChild;)r.firstChild.remove()}}}function Py(n){return"content"in n&&HI(n)?n.content:null}function HI(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Ct=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Ct||{});function Ln(n){let t=Ob();return t?t.sanitize(Ct.URL,n)||"":si(n,"URL")?Fn(n):su(yr(n))}function Yh(n){let t=Ob();if(t)return My(t.sanitize(Ct.RESOURCE_URL,n)||"");if(si(n,"ResourceURL"))return My(Fn(n));throw new k(904,!1)}function Jh(n){return DI(n[0])}function zI(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?Yh:Ln}function Pb(n,t,e){return zI(t,e)(n)}function Ob(){let n=ae();return n&&n[_r].sanitizer}var qI=/^>|^->|<!--|-->|--!>|<!-$/g,GI=/(<|>)/g,WI="\u200B$1\u200B";function QI(n){return n.replace(qI,t=>t.replace(GI,WI))}function Rb(n){return n.ownerDocument}function Fb(n){return n instanceof Function?n():n}var ni=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ni||{});function KI(n,t,e){let r=n.length;for(;;){let i=n.indexOf(t,e);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}var Lb="ng-template";function ZI(n,t,e,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&KI(t[i+1].toLowerCase(),e,0)!==-1)return!0}else if(Xh(n))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===e)return!0}return!1}function Xh(n){return n.type===4&&n.value!==Lb}function YI(n,t,e){let r=n.type===4&&!e?Lb:n.value;return t===r}function JI(n,t,e){let r=4,i=n.attrs,o=i!==null?tT(i):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!An(r)&&!An(l))return!1;if(s&&An(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!YI(n,l,e)||l===""&&t.length===1){if(An(r))return!1;s=!0}}else if(r&8){if(i===null||!ZI(n,i,l,e)){if(An(r))return!1;s=!0}}else{let d=t[++a],p=XI(l,i,Xh(n),e);if(p===-1){if(An(r))return!1;s=!0;continue}if(d!==""){let h;if(p>o?h="":h=i[p+1].toLowerCase(),r&2&&d!==h){if(An(r))return!1;s=!0}}}}return An(r)||s}function An(n){return(n&1)===0}function XI(n,t,e,r){if(t===null)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){let s=t[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return nT(t,n)}function Vb(n,t,e=!1){for(let r=0;r<t.length;r++)if(JI(n,t[r],e))return!0;return!1}function eT(n){let t=n.attrs;if(t!=null){let e=t.indexOf(5);if(!(e&1))return t[e+1]}return null}function tT(n){for(let t=0;t<n.length;t++){let e=n[t];if(W_(e))return t}return n.length}function nT(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let r=n[e];if(typeof r=="number")return-1;if(r===t)return e;e++}return-1}function rT(n,t){e:for(let e=0;e<t.length;e++){let r=t[e];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Oy(n,t){return n?":not("+t.trim()+")":t}function iT(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(r&2){let a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!An(s)&&(t+=Oy(o,i),i=""),r=s,o=o||!An(r);e++}return i!==""&&(t+=Oy(o,i)),t}function oT(n){return n.map(iT).join(",")}function sT(n){let t=[],e=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&t.push(o,n[++r]):i===8&&e.push(o);else{if(!An(i))break;i=o}r++}return e.length&&t.push(1,...e),t}var zt={};function aT(n,t){return n.createText(t)}function lT(n,t,e){n.setValue(t,e)}function cT(n,t){return n.createComment(QI(t))}function jb(n,t,e){return n.createElement(t,e)}function kc(n,t,e,r,i){n.insertBefore(t,e,r,i)}function Ub(n,t,e){n.appendChild(t,e)}function Ry(n,t,e,r,i){r!==null?kc(n,t,e,r,i):Ub(n,t,e)}function uT(n,t,e){n.removeChild(null,t,e)}function dT(n,t,e){n.setAttribute(t,"style",e)}function fT(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Bb(n,t,e){let{mergedAttrs:r,classes:i,styles:o}=e;r!==null&&Bx(n,t,r),i!==null&&fT(n,t,i),o!==null&&dT(n,t,o)}function m(n=1){$b(Ke(),ae(),Ir()+n,!1)}function $b(n,t,e,r){if(!r)if((t[X]&3)===3){let o=n.preOrderCheckHooks;o!==null&&cc(t,o,e)}else{let o=n.preOrderHooks;o!==null&&uc(t,o,0,e)}Fi(e)}function D(n,t=se.Default){let e=ae();if(e===null)return F(n,t);let r=Nt();return eb(r,e,Mt(n),t)}function Hb(n,t,e,r,i,o){let s=ge(null);try{let a=null;i&ni.SignalBased&&(a=t[r][Ft]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&ni.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(t,o)),n.setInput!==null?n.setInput(t,a,o,e,r):C_(t,a,r,o)}finally{ge(s)}}function em(n,t,e,r,i,o,s,a,l,d,p){let h=t.blueprint.slice();return h[Dr]=i,h[X]=r|4|128|8|64|1024,(d!==null||n&&n[X]&2048)&&(h[X]|=2048),A_(h),h[bt]=h[Qo]=n,h[bn]=e,h[_r]=s||n&&n[_r],h[We]=a||n&&n[We],h[Js]=l||n&&n[Js]||null,h[Ht]=o,h[Gc]=pI(),h[Ys]=p,h[w_]=d,h[wn]=t.type==2?n[wn]:h,h}function zb(n,t,e,r){if(e===0)return-1;let i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function qb(n,t,e,r,i){let o=Ir(),s=r&2;try{Fi(-1),s&&t.length>kt&&$b(n,t,kt,!1),_n(s?2:0,i),e(r,i)}finally{Fi(o),_n(s?3:1,i)}}function tm(n,t,e){O_()&&(Hi(On(e,t),t),Gb(n,t,e))}function Gb(n,t,e){CT(n,t,e),(e.flags&64)===64&&ST(n,t,e)}function nm(n,t,e=On){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?e(t,n):n[s];n[i++]=a}}}function pT(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=rm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function rm(n,t,e,r,i,o,s,a,l,d,p){let h=kt+r,y=h+i,g=hT(h,y),b=typeof d=="function"?d():d;return g[ue]={type:n,blueprint:g,template:e,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1,ssrId:p}}function hT(n,t){let e=[];for(let r=0;r<t;r++)e.push(r<n?null:zt);return e}function mT(n,t,e,r){let o=r.get(_I,vb)||e===Zn.ShadowDom,s=n.selectRootElement(t,o);return gT(s),s}function gT(n){vT(n)}var vT=()=>null;function Fy(n,t,e,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;r??={};let a,l=ni.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let d=o;if(i!==null){if(!i.hasOwnProperty(o))continue;d=i[o]}n===0?Ly(r,e,d,a,l):Ly(r,e,d,a)}return r}function Ly(n,t,e,r,i){let o;n.hasOwnProperty(e)?(o=n[e]).push(t,r):o=n[e]=[t,r],i!==void 0&&o.push(i)}function yT(n,t,e){let r=t.directiveStart,i=t.directiveEnd,o=n.data,s=t.attrs,a=[],l=null,d=null;for(let p=r;p<i;p++){let h=o[p],y=e?e.get(h):null,g=y?y.inputs:null,b=y?y.outputs:null;l=Fy(0,h.inputs,p,l,g),d=Fy(1,h.outputs,p,d,b);let E=l!==null&&s!==null&&!Xh(t)?LT(l,p,s):null;a.push(E)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=d}function _T(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Wb(n,t,e,r,i,o,s,a){let l=On(t,e),d=t.inputs,p;!a&&d!=null&&(p=d[r])?(sm(n,e,p,r,i),Ui(t)&&bT(e,t.index)):t.type&3?(r=_T(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(l,r,i)):t.type&12}function bT(n,t){let e=Kn(t,n);e[X]&16||(e[X]|=64)}function im(n,t,e,r){if(O_()){let i=r===null?null:{"":-1},o=xT(n,e);if(o!==null){let[s,a]=Kb(n,e,o);Qb(n,t,e,s,i,a)}i&&TT(e,r,i)}e.mergedAttrs=zo(e.mergedAttrs,e.attrs)}function Qb(n,t,e,r,i,o){for(let d=0;d<r.length;d++)Np(Dc(e,t),n,r[d].type);AT(e,n.data.length,r.length);for(let d=0;d<r.length;d++){let p=r[d];p.providersResolver&&p.providersResolver(p)}let s=!1,a=!1,l=zb(n,t,r.length,null);for(let d=0;d<r.length;d++){let p=r[d];e.mergedAttrs=zo(e.mergedAttrs,p.hostAttrs),kT(n,e,t,l,p),MT(l,p,i),p.contentQueries!==null&&(e.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(e.flags|=64);let h=p.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}yT(n,e,o)}function wT(n,t,e,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;ET(s)!=a&&s.push(a),s.push(e,r,o)}}function ET(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function CT(n,t,e){let r=e.directiveStart,i=e.directiveEnd;Ui(e)&&PT(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||Dc(e,t);let o=e.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=ea(t,n,s,e);if(Hi(l,t),o!==null&&FT(t,s-r,l,a,e,o),wr(a)){let d=Kn(e.index,t);d[bn]=ea(t,n,s,e)}}}function ST(n,t,e){let r=e.directiveStart,i=e.directiveEnd,o=e.index,s=kx();try{Fi(o);for(let a=r;a<i;a++){let l=n.data[a],d=t[a];Mp(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&DT(l,d)}}finally{Fi(-1),Mp(s)}}function DT(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function xT(n,t){let e=n.directiveRegistry,r=null;if(e)for(let i=0;i<e.length;i++){let o=e[i];Vb(t,o.selectors,!1)&&(r??=[],wr(o)?r.unshift(o):r.push(o))}return r}function Kb(n,t,e){let r=[],i=null;for(let o of e)o.findHostDirectiveDefs!==null&&(i??=new Map,o.findHostDirectiveDefs(o,r,i)),wr(o)&&(r.push(o),IT(n,t,r.length-1));return Ui(t)?r.push(...e.slice(1)):r.push(...e),[r,i]}function IT(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function TT(n,t,e){if(t){let r=n.localNames=[];for(let i=0;i<t.length;i+=2){let o=e[t[i+1]];if(o==null)throw new k(-301,!1);r.push(t[i],o)}}}function MT(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;wr(t)&&(e[""]=n)}}function AT(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function kT(n,t,e,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ai(i.type,!0)),s=new Li(o,wr(i),D);n.blueprint[r]=s,e[r]=s,wT(n,t,r,zb(n,e,i.hostVars,zt),i)}function NT(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function PT(n,t,e){let r=On(t,n),i=pT(e),o=n[_r].rendererFactory,s=om(n,em(n,i,null,NT(e),r,t,null,o.createRenderer(r,e),null,null,null));return n[t.index]=s}function OT(n,t,e,r,i,o){let s=On(n,t);RT(t[We],s,o,n.value,e,r,i)}function RT(n,t,e,r,i,o,s){if(o==null)n.removeAttribute(t,i,e);else{let a=s==null?yr(o):s(o,r||"",i);n.setAttribute(t,i,a,e)}}function FT(n,t,e,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],d=s[a++],p=s[a++],h=s[a++];Hb(r,e,l,d,p,h)}}function LT(n,t,e){let r=null,i=0;for(;i<e.length;){let o=e[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(o,s[a+1],s[a+2],e[i+1]);break}}i+=2}return r}function Zb(n,t,e,r){return[n,!0,0,t,null,r,null,e,null,null]}function om(n,t){return n[Xs]?n[gy][Nn]=t:n[Xs]=t,n[gy]=t,t}function Yb(n,t){let e=n[Js],r=e?e.get($t,null):null;r&&r.handleError(t)}function sm(n,t,e,r,i){for(let o=0;o<e.length;){let s=e[o++],a=e[o++],l=e[o++],d=t[s],p=n.data[s];Hb(p,d,r,a,l,i)}}function VT(n,t){let e=Kn(t,n),r=e[ue];jT(r,e);let i=e[Dr];i!==null&&e[Ys]===null&&(e[Ys]=_b(i,e[Js])),am(r,e,e[bn])}function jT(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function am(n,t,e){jh(t);try{let r=n.viewQuery;r!==null&&jp(1,r,e);let i=n.template;i!==null&&qb(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[br]?.finishViewCreation(n),n.staticContentQueries&&bb(n,t),n.staticViewQueries&&jp(2,n.viewQuery,e);let o=n.components;o!==null&&UT(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[X]&=-5,Uh()}}function UT(n,t){for(let e=0;e<t.length;e++)VT(n,t[e])}var Yn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Yn||{}),BT;function lm(n,t){return BT(n,t)}function cm(n){return(n.flags&32)===32}function Fo(n,t,e,r,i){if(r!=null){let o,s=!1;xr(r)?o=r:ei(r)&&(s=!0,r=r[Dr]);let a=Qn(r);n===0&&e!==null?i==null?Ub(t,e,a):kc(t,e,a,i||null,!0):n===1&&e!==null?kc(t,e,a,i||null,!0):n===2?uT(t,a,s):n===3&&t.destroyNode(a),o!=null&&JT(t,n,o,e,i)}}function $T(n,t){Jb(n,t),t[Dr]=null,t[Ht]=null}function HT(n,t,e,r,i,o){r[Dr]=i,r[Ht]=t,lu(n,r,e,1,i,o)}function Jb(n,t){t[_r].changeDetectionScheduler?.notify(10),lu(n,t,t[We],2,null,null)}function zT(n){let t=n[Xs];if(!t)return fp(n[ue],n);for(;t;){let e=null;if(ei(t))e=t[Xs];else{let r=t[on];r&&(e=r)}if(!e){for(;t&&!t[Nn]&&t!==n;)ei(t)&&fp(t[ue],t),t=t[bt];t===null&&(t=n),ei(t)&&fp(t[ue],t),e=t&&t[Nn]}t=e}}function qT(n,t,e,r){let i=on+r,o=e.length;r>0&&(e[i-1][Nn]=t),r<o-on?(t[Nn]=e[i],c_(e,on+r,t)):(e.push(t),t[Nn]=null),t[bt]=e;let s=t[Ni];s!==null&&e!==s&&Xb(s,t);let a=t[br];a!==null&&a.insertView(n),Ip(t),t[X]|=128}function Xb(n,t){let e=n[$o],r=t[bt];if(ei(r))n[X]|=2;else{let i=r[bt][wn];t[wn]!==i&&(n[X]|=2)}e===null?n[$o]=[t]:e.push(t)}function um(n,t){let e=n[$o],r=e.indexOf(t);e.splice(r,1)}function Qp(n,t){if(n.length<=on)return;let e=on+t,r=n[e];if(r){let i=r[Ni];i!==null&&i!==n&&um(i,r),t>0&&(n[e-1][Nn]=r[Nn]);let o=gc(n,on+t);$T(r[ue],r);let s=o[br];s!==null&&s.detachView(o[ue]),r[bt]=null,r[Nn]=null,r[X]&=-129}return r}function ew(n,t){if(aa(t))return;let e=t[We];e.destroyNode&&lu(n,t,e,3,null,null),zT(t)}function fp(n,t){if(aa(t))return;let e=ge(null);try{t[X]&=-129,t[X]|=256,t[rn]&&Co(t[rn]),WT(n,t),GT(n,t),t[ue].type===1&&t[We].destroy();let r=t[Ni];if(r!==null&&xr(t[bt])){r!==t[bt]&&um(r,t);let i=t[br];i!==null&&i.detachView(n)}Fp(t)}finally{ge(e)}}function GT(n,t){let e=n.cleanup,r=t[yc];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[e[s+1]];e[s].call(a)}r!==null&&(t[yc]=null);let i=t[Xr];if(i!==null){t[Xr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[Pi];if(o!==null){t[Pi]=null;for(let s of o)s.destroy()}}function WT(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let i=t[e[r]];if(!(i instanceof Li)){let o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];_n(4,a,l);try{l.call(a)}finally{_n(5,a,l)}}else{_n(4,i,o);try{o.call(i)}finally{_n(5,i,o)}}}}}function tw(n,t,e){return QT(n,t.parent,e)}function QT(n,t,e){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return e[Dr];if(Ui(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Zn.None||i===Zn.Emulated)return null}return On(r,e)}function nw(n,t,e){return ZT(n,t,e)}function KT(n,t,e){return n.type&40?On(n,e):null}var ZT=KT,Vy;function au(n,t,e,r){let i=tw(n,r,t),o=t[We],s=r.parent||t[Ht],a=nw(s,r,t);if(i!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)Ry(o,i,e[l],a,!1);else Ry(o,i,e,a,!1);Vy!==void 0&&Vy(o,r,t,e,i)}function Ws(n,t){if(t!==null){let e=t.type;if(e&3)return On(t,n);if(e&4)return Kp(-1,n[t.index]);if(e&8){let r=t.child;if(r!==null)return Ws(n,r);{let i=n[t.index];return xr(i)?Kp(-1,i):Qn(i)}}else{if(e&128)return Ws(n,t.next);if(e&32)return lm(t,n)()||Qn(n[t.index]);{let r=rw(n,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Ri(n[wn]);return Ws(i,r)}else return Ws(n,t.next)}}}return null}function rw(n,t){if(t!==null){let r=n[wn][Ht],i=t.projection;return r.projection[i]}return null}function Kp(n,t){let e=on+n+1;if(e<t.length){let r=t[e],i=r[ue].firstChild;if(i!==null)return Ws(r,i)}return t[Oi]}function dm(n,t,e,r,i,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=r[e.index],l=e.type;if(s&&t===0&&(a&&Hi(Qn(a),r),e.flags|=2),!cm(e))if(l&8)dm(n,t,e.child,r,i,o,!1),Fo(t,n,i,a,o);else if(l&32){let d=lm(e,r),p;for(;p=d();)Fo(t,n,i,p,o);Fo(t,n,i,a,o)}else l&16?iw(n,t,r,e,i,o):Fo(t,n,i,a,o);e=s?e.projectionNext:e.next}}function lu(n,t,e,r,i,o){dm(e,r,n.firstChild,t,i,o,!1)}function YT(n,t,e){let r=t[We],i=tw(n,e,t),o=e.parent||t[Ht],s=nw(o,e,t);iw(r,0,t,e,i,s)}function iw(n,t,e,r,i,o){let s=e[wn],l=s[Ht].projection[r.projection];if(Array.isArray(l))for(let d=0;d<l.length;d++){let p=l[d];Fo(t,n,i,p,o)}else{let d=l,p=s[bt];ub(r)&&(d.flags|=128),dm(n,t,d,p,i,o,!0)}}function JT(n,t,e,r,i){let o=e[Oi],s=Qn(e);o!==s&&Fo(t,n,r,o,i);for(let a=on;a<e.length;a++){let l=e[a];lu(l[ue],l,n,t,r,o)}}function XT(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let o=r.indexOf("-")===-1?void 0:Yn.DashCase;i==null?n.removeStyle(e,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Yn.Important),n.setStyle(e,r,i,o))}}function ow(n,t,e,r){let i=ge(null);try{let o=t.tView,a=n[X]&4096?4096:16,l=em(n,o,e,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[t.index];l[Ni]=d;let p=n[br];return p!==null&&(l[br]=p.createEmbeddedView(o)),am(o,l,e),l}finally{ge(i)}}function Zp(n,t){return!t||t.firstChild===null||ub(n)}function sw(n,t,e,r=!0){let i=t[ue];if(qT(i,t,n,e),r){let s=Kp(e,n),a=t[We],l=a.parentNode(n[Oi]);l!==null&&HT(i,n[Ht],a,t,l,s)}let o=t[Ys];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Nc(n,t,e,r,i=!1){for(;e!==null;){if(e.type===128){e=i?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&r.push(Qn(o)),xr(o)&&eM(o,r);let s=e.type;if(s&8)Nc(n,t,e.child,r);else if(s&32){let a=lm(e,t),l;for(;l=a();)r.push(l)}else if(s&16){let a=rw(t,e);if(Array.isArray(a))r.push(...a);else{let l=Ri(t[wn]);Nc(l[ue],l,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function eM(n,t){for(let e=on;e<n.length;e++){let r=n[e],i=r[ue].firstChild;i!==null&&Nc(r[ue],r,i,t)}n[Oi]!==n[Dr]&&t.push(n[Oi])}var aw=[];function tM(n){return n[rn]??nM(n)}function nM(n){let t=aw.pop()??Object.create(iM);return t.lView=n,t}function rM(n){n.lView[rn]!==n&&(n.lView=null,aw.push(n))}var iM=z(N({},Ci),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{la(n.lView)},consumerOnSignalRead(){this.lView[rn]=this}});function oM(n){let t=n[rn]??Object.create(sM);return t.lView=n,t}var sM=z(N({},Ci),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=Ri(n.lView);for(;t&&!lw(t[ue]);)t=Ri(t);t&&Rh(t)},consumerOnSignalRead(){this.lView[rn]=this}});function lw(n){return n.type!==2}function cw(n){if(n[Pi]===null)return;let t=!0;for(;t;){let e=!1;for(let r of n[Pi])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=e&&!!(n[X]&8192)}}var aM=100;function uw(n,t=!0,e=0){let i=n[_r].rendererFactory,o=!1;o||i.begin?.();try{lM(n,e)}catch(s){throw t&&Yb(n,s),s}finally{o||i.end?.()}}function lM(n,t){let e=L_();try{wc(!0),Yp(n,t);let r=0;for(;Qc(n);){if(r===aM)throw new k(103,!1);r++,Yp(n,1)}}finally{wc(e)}}function cM(n,t,e,r){if(aa(t))return;let i=t[X],o=!1,s=!1;jh(t);let a=!0,l=null,d=null;o||(lw(n)?(d=tM(t),l=Eo(d)):Dv()===null?(a=!1,d=oM(t),l=Eo(d)):t[rn]&&(Co(t[rn]),t[rn]=null));try{A_(t),Tx(n.bindingStartIndex),e!==null&&qb(n,t,e,2,r);let p=(i&3)===3;if(!o)if(p){let g=n.preOrderCheckHooks;g!==null&&cc(t,g,null)}else{let g=n.preOrderHooks;g!==null&&uc(t,g,0,null),cp(t,0)}if(s||uM(t),cw(t),dw(t,0),n.contentQueries!==null&&bb(n,t),!o)if(p){let g=n.contentCheckHooks;g!==null&&cc(t,g)}else{let g=n.contentHooks;g!==null&&uc(t,g,1),cp(t,1)}fM(n,t);let h=n.components;h!==null&&pw(t,h,0);let y=n.viewQuery;if(y!==null&&jp(2,y,r),!o)if(p){let g=n.viewCheckHooks;g!==null&&cc(t,g)}else{let g=n.viewHooks;g!==null&&uc(t,g,2),cp(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[lc]){for(let g of t[lc])g();t[lc]=null}o||(t[X]&=-73)}catch(p){throw o||la(t),p}finally{d!==null&&(Vs(d,l),a&&rM(d)),Uh()}}function dw(n,t){for(let e=pb(n);e!==null;e=hb(e))for(let r=on;r<e.length;r++){let i=e[r];fw(i,t)}}function uM(n){for(let t=pb(n);t!==null;t=hb(t)){if(!(t[X]&2))continue;let e=t[$o];for(let r=0;r<e.length;r++){let i=e[r];Rh(i)}}}function dM(n,t,e){let r=Kn(t,n);fw(r,e)}function fw(n,t){Oh(n)&&Yp(n,t)}function Yp(n,t){let r=n[ue],i=n[X],o=n[rn],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&js(o)),s||=!1,o&&(o.dirty=!1),n[X]&=-9217,s)cM(r,n,r.template,n[bn]);else if(i&8192){cw(n),dw(n,1);let a=r.components;a!==null&&pw(n,a,1)}}function pw(n,t,e){for(let r=0;r<t.length;r++)dM(n,t[r],e)}function fM(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let i=e[r];if(i<0)Fi(~i);else{let o=i,s=e[++r],a=e[++r];Ax(s,o);let l=t[o];_n(24,l),a(2,l),_n(25,l)}}}finally{Fi(-1)}}function fm(n,t){let e=L_()?64:1088;for(n[_r].changeDetectionScheduler?.notify(t);n;){n[X]|=e;let r=Ri(n);if(bc(n)&&!r)return n;n=r}return null}var Vi=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,e=t[ue];return Nc(e,t,e.firstChild,[])}constructor(t,e,r=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=r}get context(){return this._lView[bn]}get dirty(){return!!(this._lView[X]&9280)||!!this._lView[rn]?.dirty}set context(t){this._lView[bn]=t}get destroyed(){return aa(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[bt];if(xr(t)){let e=t[_c],r=e?e.indexOf(this):-1;r>-1&&(Qp(t,r),gc(e,r))}this._attachedToViewContainer=!1}ew(this._lView[ue],this._lView)}onDestroy(t){k_(this._lView,t)}markForCheck(){fm(this._cdRefInjectingView||this._lView,4)}markForRefresh(){Rh(this._cdRefInjectingView||this._lView)}detach(){this._lView[X]&=-129}reattach(){Ip(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,uw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new k(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=bc(this._lView),e=this._lView[Ni];e!==null&&!t&&um(e,this._lView),Jb(this._lView[ue],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new k(902,!1);this._appRef=t;let e=bc(this._lView),r=this._lView[Ni];r!==null&&!e&&Xb(r,this._lView),Ip(this._lView)}},ri=(()=>{class n{static __NG_ELEMENT_ID__=mM}return n})(),pM=ri,hM=class extends pM{_declarationLView;_declarationTContainer;elementRef;constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,r){let i=ow(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:r});return new Vi(i)}};function mM(){return cu(Nt(),ae())}function cu(n,t){return n.type&4?new hM(t,n,Ko(n,t)):null}function Yo(n,t,e,r,i){let o=n.data[t];if(o===null)o=gM(n,t,e,r,i),Mx()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=r,o.attrs=i;let s=xx();o.injectorIndex=s===null?-1:s.injectorIndex}return Bi(o,!0),o}function gM(n,t,e,r,i){let o=F_(),s=Fh(),a=s?o:o&&o.parent,l=n.data[t]=yM(n,a,e,t,r,i);return vM(n,l,o,s),l}function vM(n,t,e,r){n.firstChild===null&&(n.firstChild=t),e!==null&&(r?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function yM(n,t,e,r,i,o){let s=t?t.injectorIndex:-1,a=0;return R_()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var v6=new RegExp(`^(\\d+)*(${yI}|${vI})*(.*)`);var _M=()=>null;function Jp(n,t){return _M(n,t)}var Xp=class{},Pc=class{},eh=class{resolveComponentFactory(t){throw Error(`No component factory found for ${At(t)}.`)}},qo=class{static NULL=new eh},ii=class{},Cn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>bM()}return n})();function bM(){let n=ae(),t=Nt(),e=Kn(t.index,n);return(ei(e)?e:n)[We]}var wM=(()=>{class n{static \u0275prov=P({token:n,providedIn:"root",factory:()=>null})}return n})();function Oc(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=_p(i,a);else if(o==2){let l=a,d=t[++s];r=_p(r,l+": "+d+";")}}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}var Rc=class extends qo{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=ki(t);return new na(e,this.ngModule)}};function jy(n,t){let e=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:ni.None;t?e.push({propName:s,templateName:r,isSignal:(a&ni.SignalBased)!==0}):e.push({propName:s,templateName:r})}return e}function EM(n){let t=n.toLowerCase();return t==="svg"?hx:t==="math"?mx:null}var na=class extends Pc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let t=this.componentDef,e=t.inputTransforms,r=jy(t.inputs,!0);if(e!==null)for(let i of r)e.hasOwnProperty(i.propName)&&(i.transform=e[i.propName]);return r}get outputs(){return jy(this.componentDef.outputs,!1)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=oT(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,r,i){let o=ge(null);try{i=i||this.ngModule;let s=i instanceof Bt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ap(t,s):t,l=a.get(ii,null);if(l===null)throw new k(407,!1);let d=a.get(wM,null),p=a.get(ti,null),h={rendererFactory:l,sanitizer:d,changeDetectionScheduler:p},y=l.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",b=r?mT(y,r,this.componentDef.encapsulation,a):jb(y,g,EM(g)),E=512;this.componentDef.signals?E|=4096:this.componentDef.onPush||(E|=16);let S=null;b!==null&&(S=_b(b,a,!0));let A=rm(0,null,null,1,0,null,null,null,null,null,null),L=em(null,A,null,E,null,null,h,y,a,null,S);L[kt]=b,jh(L);let V=null;try{let H=r?["ng-version","19.1.4"]:sT(this.componentDef.selectors[0]),W=Yo(A,kt,2,"#host",H),[Ee,Se]=Kb(A,W,[this.componentDef]);Qb(A,L,W,Ee,{},Se);for(let Be of Ee)W.mergedAttrs=zo(W.mergedAttrs,Be.hostAttrs);W.mergedAttrs=zo(W.mergedAttrs,H),Oc(W,W.mergedAttrs,!0),b&&(Bb(y,b,W),Hi(b,L)),e!==void 0&&CM(W,this.ngContentSelectors,e),Gb(A,L,W),Zh(A,W,L),eu(A,W),V=Kn(W.index,L),L[bn]=V[bn],am(A,L,null)}catch(H){throw V!==null&&Fp(V),Fp(L),H}finally{Uh()}return new th(this.componentType,L)}finally{ge(o)}}},th=class extends Xp{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e){super(),this._rootLView=e,this._tNode=T_(e[ue],kt),this.location=Ko(this._tNode,e),this.instance=Kn(this._tNode.index,e)[bn],this.hostView=this.changeDetectorRef=new Vi(e,void 0,!1),this.componentType=t}setInput(t,e){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let o=this._rootLView;sm(o[ue],o,i,t,e),this.previousInputValues.set(t,e);let s=Kn(this._tNode.index,o);fm(s,1)}}get injector(){return new Mi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function CM(n,t,e){let r=n.projection=[];for(let i=0;i<t.length;i++){let o=e[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ar=(()=>{class n{static __NG_ELEMENT_ID__=SM}return n})();function SM(){let n=Nt();return mw(n,ae())}var DM=Ar,hw=class extends DM{_lContainer;_hostTNode;_hostLView;constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return Ko(this._hostTNode,this._hostLView)}get injector(){return new Mi(this._hostTNode,this._hostLView)}get parentInjector(){let t=$h(this._hostTNode,this._hostLView);if(Q_(t)){let e=Cc(t,this._hostLView),r=Ec(t),i=e[ue].data[r+8];return new Mi(i,e)}else return new Mi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=Uy(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-on}createEmbeddedView(t,e,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Jp(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,i,Zp(this._hostTNode,s)),a}createComponent(t,e,r,i,o){let s=t&&!ux(t),a;if(s)a=e;else{let b=e||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let l=s?t:new na(ki(t)),d=r||this.parentInjector;if(!o&&l.ngModule==null){let E=(s?d:this.parentInjector).get(Bt,null);E&&(o=E)}let p=ki(l.componentType??{}),h=Jp(this._lContainer,p?.id??null),y=h?.firstChild??null,g=l.create(d,i,y,o);return this.insertImpl(g.hostView,a,Zp(this._hostTNode,h)),g}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){let i=t._lView;if(vx(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=i[bt],d=new hw(l,l[Ht],l[bt]);d.detach(d.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return sw(s,i,o,r),t.attachToViewContainerRef(),c_(pp(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=Uy(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),r=Qp(this._lContainer,e);r&&(gc(pp(this._lContainer),e),ew(r[ue],r))}detach(t){let e=this._adjustIndex(t,-1),r=Qp(this._lContainer,e);return r&&gc(pp(this._lContainer),e)!=null?new Vi(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function Uy(n){return n[_c]}function pp(n){return n[_c]||(n[_c]=[])}function mw(n,t){let e,r=t[n.index];return xr(r)?e=r:(e=Zb(r,t,null,n),t[n.index]=e,om(t,e)),IM(e,t,n,r),new hw(e,n,t)}function xM(n,t){let e=n[We],r=e.createComment(""),i=On(t,n),o=e.parentNode(i);return kc(e,o,r,e.nextSibling(i),!1),r}var IM=AM,TM=()=>!1;function MM(n,t,e){return TM(n,t,e)}function AM(n,t,e,r){if(n[Oi])return;let i;e.type&8?i=Qn(r):i=xM(t,e),n[Oi]=i}var nh=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},rh=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let r=t.contentQueries!==null?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)pm(t,e).matches!==null&&this.queries[e].setDirty()}},ih=class{flags;read;predicate;constructor(t,e,r=null){this.flags=e,this.read=r,typeof t=="string"?this.predicate=VM(t):this.predicate=t}},oh=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){let i=e!==null?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},sh=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,e,kM(e,o)),this.matchTNodeWithReadOption(t,e,dc(e,t,o,!1,!1))}else r===ri?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,dc(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ze||i===Ar||i===ri&&e.type&4)this.addMatch(e.index,-2);else{let o=dc(e,t,i,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function kM(n,t){let e=n.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1]}return null}function NM(n,t){return n.type&11?Ko(n,t):n.type&4?cu(n,t):null}function PM(n,t,e,r){return e===-1?NM(t,n):e===-2?OM(n,t,r):ea(n,n[ue],e,t)}function OM(n,t,e){if(e===Ze)return Ko(t,n);if(e===ri)return cu(t,n);if(e===Ar)return mw(t,n)}function gw(n,t,e,r){let i=t[br].queries[r];if(i.matches===null){let o=n.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let d=s[l];if(d<0)a.push(null);else{let p=o[d];a.push(PM(t,p,s[l+1],e.metadata.read))}}i.matches=a}return i.matches}function ah(n,t,e,r){let i=n.queries.getByIndex(e),o=i.matches;if(o!==null){let s=gw(n,t,i,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let d=o[a+1],p=t[-l];for(let h=on;h<p.length;h++){let y=p[h];y[Ni]===y[bt]&&ah(y[ue],y,d,r)}if(p[$o]!==null){let h=p[$o];for(let y=0;y<h.length;y++){let g=h[y];ah(g[ue],g,d,r)}}}}}return r}function RM(n,t){return n[br].queries[t].queryList}function FM(n,t,e){let r=new Ac((e&4)===4);return bx(n,t,r,r.destroy),(t[br]??=new rh).queries.push(new nh(r))-1}function LM(n,t,e){let r=Ke();return r.firstCreatePass&&(jM(r,new ih(n,t,e),-1),(t&2)===2&&(r.staticViewQueries=!0)),FM(r,ae(),t)}function VM(n){return n.split(",").map(t=>t.trim())}function jM(n,t,e){n.queries===null&&(n.queries=new oh),n.queries.track(new sh(t,e))}function pm(n,t){return n.queries.getByIndex(t)}function UM(n,t){let e=n[ue],r=pm(e,t);return r.crossesNgTemplate?ah(e,n,t,[]):gw(e,n,r,t)}var oi=class{},ra=class{};var lh=class extends oi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Rc(this);constructor(t,e,r,i=!0){super(),this.ngModuleType=t,this._parent=e;let o=f_(t);this._bootstrapComponents=Fb(o.bootstrap),this._r3Injector=rb(t,e,[{provide:oi,useValue:this},{provide:qo,useValue:this.componentFactoryResolver},...r],At(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},ch=class extends ra{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new lh(this.moduleType,t,[])}};var Fc=class extends oi{injector;componentFactoryResolver=new Rc(this);instance=null;constructor(t){super();let e=new Zs([...t.providers,{provide:oi,useValue:this},{provide:qo,useValue:this.componentFactoryResolver}],t.parent||kh(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function hm(n,t,e=null){return new Fc({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var BM=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=g_(!1,e.type),i=r.length>0?hm([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=P({token:n,providedIn:"environment",factory:()=>new n(F(Bt))})}return n})();function $(n){return oa(()=>{let t=vw(n),e=z(N({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===db.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(BM).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Zn.Emulated,styles:n.styles||Ut,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&Rn("NgStandalone"),yw(e);let r=n.dependencies;return e.directiveDefs=$y(r,!1),e.pipeDefs=$y(r,!0),e.id=zM(e),e})}function $M(n){return ki(n)||p_(n)}function HM(n){return n!==null}function rt(n){return oa(()=>({type:n.type,bootstrap:n.bootstrap||Ut,declarations:n.declarations||Ut,imports:n.imports||Ut,exports:n.exports||Ut,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function By(n,t){if(n==null)return jo;let e={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=ni.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),t?(e[o]=a!==ni.None?[r,a]:r,t[o]=s):e[o]=r}return e}function me(n){return oa(()=>{let t=vw(n);return yw(t),t})}function mm(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function vw(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||jo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ut,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:By(n.inputs,t),outputs:By(n.outputs),debugInfo:null}}function yw(n){n.features?.forEach(t=>t(n))}function $y(n,t){if(!n)return null;let e=t?h_:$M;return()=>(typeof n=="function"?n():n).map(r=>e(r)).filter(HM)}function zM(n){let t=0,e=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function qM(n){return Object.getPrototypeOf(n.prototype).constructor}function ct(n){let t=qM(n.type),e=!0,r=[n];for(;t;){let i;if(wr(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new k(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);let s=n;s.inputs=oc(n.inputs),s.inputTransforms=oc(n.inputTransforms),s.declaredInputs=oc(n.declaredInputs),s.outputs=oc(n.outputs);let a=i.hostBindings;a&&ZM(n,a);let l=i.viewQuery,d=i.contentQueries;if(l&&QM(n,l),d&&KM(n,d),GM(n,i),MD(n.outputs,i.outputs),wr(i)&&i.data.animation){let p=n.data;p.animation=(p.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ct&&(e=!1)}}t=Object.getPrototypeOf(t)}WM(r)}function GM(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let r=t.inputs[e];if(r!==void 0&&(n.inputs[e]=r,n.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=t.inputTransforms[i]}}}function WM(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=zo(i.hostAttrs,e=zo(e,i.hostAttrs))}}function oc(n){return n===jo?{}:n===Ut?[]:n}function QM(n,t){let e=n.viewQuery;e?n.viewQuery=(r,i)=>{t(r,i),e(r,i)}:n.viewQuery=t}function KM(n,t){let e=n.contentQueries;e?n.contentQueries=(r,i,o)=>{t(r,i,o),e(r,i,o)}:n.contentQueries=t}function ZM(n,t){let e=n.hostBindings;e?n.hostBindings=(r,i)=>{t(r,i),e(r,i)}:n.hostBindings=t}function zi(n){let t=n.inputConfig,e={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r];Array.isArray(i)&&i[3]&&(e[r]=i[3])}n.inputTransforms=e}function _w(n){return gm(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function YM(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),r;for(;!(r=e.next()).done;)t(r.value)}}function gm(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function vm(n,t,e){return n[t]=e}function JM(n,t){return n[t]}function Cr(n,t,e){let r=n[t];return Object.is(r,e)?!1:(n[t]=e,!0)}function ym(n,t,e,r){let i=Cr(n,t,e);return Cr(n,t+1,r)||i}function bw(n,t,e,r,i){let o=ym(n,t,e,r);return Cr(n,t+2,i)||o}function XM(n,t,e,r,i,o,s,a,l){let d=t.consts,p=Yo(t,n,4,s||null,a||null);im(t,e,p,Ho(d,l)),eu(t,p);let h=p.tView=rm(2,p,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,d,null);return t.queries!==null&&(t.queries.template(t,p),h.queries=t.queries.embeddedTView(p)),p}function ww(n,t,e,r,i,o,s,a,l,d){let p=e+kt,h=t.firstCreatePass?XM(p,t,n,r,i,o,s,a,l):t.data[p];Bi(h,!1);let y=eA(t,n,h,e);Jc()&&au(t,n,y,h),Hi(y,n);let g=Zb(y,n,y,h);return n[p]=g,om(n,g),MM(g,h,n),Wc(h)&&tm(t,n,h),l!=null&&nm(n,h,d),h}function C(n,t,e,r,i,o,s,a){let l=ae(),d=Ke(),p=Ho(d.consts,o);return ww(l,d,n,t,e,r,i,p,s,a),C}var eA=tA;function tA(n,t,e,r){return Xc(!0),t[We].createComment("")}var _m=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Ew=new j("");function qi(n){return!!n&&typeof n.then=="function"}function Cw(n){return!!n&&typeof n.subscribe=="function"}var Sw=new j("");var Dw=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=M(Sw,{optional:!0})??[];injector=M(ht);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let o=sn(this.injector,i);if(qi(o))e.push(o);else if(Cw(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xw=(()=>{class n{static \u0275prov=P({token:n,providedIn:"root",factory:()=>new Lc})}return n})(),Lc=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let e=t.zone,r=this.queues.get(e);r.has(t)&&(r.delete(t),this.queuedEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}},uu=new j("");function nA(){Fv(()=>{throw new k(600,!1)})}function rA(n){return n.isBoundToModule}var iA=10;function oA(n,t,e){try{let r=e();return qi(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}var Sr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(sI);afterRenderManager=M(yb);zonelessEnabled=M(nu);rootEffectScheduler=M(xw);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Fe;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=M(Tr).hasPendingTasks.pipe(Y(e=>!e));constructor(){M(Zo,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=M(Bt);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){let i=e instanceof Pc;if(!this._injector.get(Dw).done){let y=!i&&m_(e),g=!1;throw new k(405,g)}let s;i?s=e:s=this._injector.get(qo).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=rA(s)?void 0:this._injector.get(oi),l=r||s.selector,d=s.create(ht.NULL,[],l,a),p=d.location.nativeElement,h=d.injector.get(Ew,null);return h?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),fc(this.components,d),h?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(Qh.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new k(101,!1);let e=ge(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ge(e),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ii,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let e=0;for(;this.dirtyFlags!==0&&e++<iA;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)sA(r,i,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Qc(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;fc(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(uu,[]).forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>fc(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new k(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fc(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function sA(n,t,e,r){if(!e&&!Qc(n))return;uw(n,t,e&&!r?0:1)}function Jn(n,t,e,r){let i=ae(),o=Zc();if(Cr(i,o,t)){let s=Ke(),a=Bh();OT(a,i,n,t,e,r)}return Jn}function aA(n,t,e,r){return Cr(n,Zc(),e)?t+yr(e)+r:zt}function lA(n,t,e,r,i,o){let s=V_(),a=ym(n,s,e,i);return Yc(2),a?t+yr(e)+r+yr(i)+o:zt}function cA(n,t,e,r,i,o,s,a){let l=V_(),d=bw(n,l,e,i,s);return Yc(3),d?t+yr(e)+r+yr(i)+o+yr(s)+a:zt}function sc(n,t){return n<<17|t<<2}function ji(n){return n>>17&32767}function uA(n){return(n&2)==2}function dA(n,t){return n&131071|t<<17}function uh(n){return n|2}function Go(n){return(n&131068)>>2}function hp(n,t){return n&-131069|t<<2}function fA(n){return(n&1)===1}function dh(n){return n|1}function pA(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=ji(s),l=Go(s);n[r]=e;let d=!1,p;if(Array.isArray(e)){let h=e;p=h[1],(p===null||sa(h,p)>0)&&(d=!0)}else p=e;if(i)if(l!==0){let y=ji(n[a+1]);n[r+1]=sc(y,a),y!==0&&(n[y+1]=hp(n[y+1],r)),n[a+1]=dA(n[a+1],r)}else n[r+1]=sc(a,0),a!==0&&(n[a+1]=hp(n[a+1],r)),a=r;else n[r+1]=sc(l,0),a===0?a=r:n[l+1]=hp(n[l+1],r),l=r;d&&(n[r+1]=uh(n[r+1])),Hy(n,p,r,!0),Hy(n,p,r,!1),hA(t,p,n,r,o),s=sc(a,l),o?t.classBindings=s:t.styleBindings=s}function hA(n,t,e,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&sa(o,t)>=0&&(e[r+1]=dh(e[r+1]))}function Hy(n,t,e,r){let i=n[e+1],o=t===null,s=r?ji(i):Go(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],d=n[s+1];mA(l,t)&&(a=!0,n[s+1]=r?dh(d):uh(d)),s=r?ji(d):Go(d)}a&&(n[e+1]=r?uh(i):dh(i))}function mA(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?sa(n,t)>=0:!1}var kn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function gA(n){return n.substring(kn.key,kn.keyEnd)}function vA(n){return yA(n),Iw(n,Tw(n,0,kn.textEnd))}function Iw(n,t){let e=kn.textEnd;return e===t?-1:(t=kn.keyEnd=_A(n,kn.key=t,e),Tw(n,t,e))}function yA(n){kn.key=0,kn.keyEnd=0,kn.value=0,kn.valueEnd=0,kn.textEnd=n.length}function Tw(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function _A(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function v(n,t,e){let r=ae(),i=Zc();if(Cr(r,i,t)){let o=Ke(),s=Bh();Wb(o,s,r,n,t,r[We],e,!1)}return v}function fh(n,t,e,r,i){let o=t.inputs,s=i?"class":"style";sm(n,e,o[s],s,r)}function Xn(n,t,e){return Mw(n,t,e,!1),Xn}function Pt(n,t){return Mw(n,t,null,!0),Pt}function du(n){wA(IA,bA,n,!0)}function bA(n,t){for(let e=vA(t);e>=0;e=Iw(t,e))Mh(n,gA(t),!0)}function Mw(n,t,e,r){let i=ae(),o=Ke(),s=Yc(2);if(o.firstUpdatePass&&kw(o,n,s,r),t!==zt&&Cr(i,s,t)){let a=o.data[Ir()];Nw(o,a,i,i[We],n,i[s+1]=MA(t,e),r,s)}}function wA(n,t,e,r){let i=Ke(),o=Yc(2);i.firstUpdatePass&&kw(i,null,o,r);let s=ae();if(e!==zt&&Cr(s,o,e)){let a=i.data[Ir()];if(Pw(a,r)&&!Aw(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=_p(l,e||"")),fh(i,a,s,e,r)}else TA(i,a,s,s[We],s[o+1],s[o+1]=xA(n,t,e),r,o)}}function Aw(n,t){return t>=n.expandoStartIndex}function kw(n,t,e,r){let i=n.data;if(i[e+1]===null){let o=i[Ir()],s=Aw(n,e);Pw(o,r)&&t===null&&!s&&(t=!1),t=EA(i,o,t,r),pA(i,o,t,e,s,r)}}function EA(n,t,e,r){let i=Nx(n),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(e=mp(null,n,t,e,r),e=ia(e,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==i)if(e=mp(i,n,t,e,r),o===null){let l=CA(n,t,r);l!==void 0&&Array.isArray(l)&&(l=mp(null,n,t,l[1],r),l=ia(l,t.attrs,r),SA(n,t,r,l))}else o=DA(n,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),e}function CA(n,t,e){let r=e?t.classBindings:t.styleBindings;if(Go(r)!==0)return n[ji(r)]}function SA(n,t,e,r){let i=e?t.classBindings:t.styleBindings;n[ji(i)]=r}function DA(n,t,e){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ia(r,s,e)}return ia(r,t.attrs,e)}function mp(n,t,e,r,i){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],r=ia(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),r}function ia(n,t,e){let r=e?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Mh(n,s,e?!0:t[++o]))}return n===void 0?null:n}function xA(n,t,e){if(e==null||e==="")return Ut;let r=[],i=Fn(e);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function IA(n,t,e){let r=String(t);r!==""&&!r.includes(" ")&&Mh(n,r,e)}function TA(n,t,e,r,i,o,s,a){i===zt&&(i=Ut);let l=0,d=0,p=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;p!==null||h!==null;){let y=l<i.length?i[l+1]:void 0,g=d<o.length?o[d+1]:void 0,b=null,E;p===h?(l+=2,d+=2,y!==g&&(b=h,E=g)):h===null||p!==null&&p<h?(l+=2,b=p):(d+=2,b=h,E=g),b!==null&&Nw(n,t,e,r,b,E,s,a),p=l<i.length?i[l]:null,h=d<o.length?o[d]:null}}function Nw(n,t,e,r,i,o,s,a){if(!(t.type&3))return;let l=n.data,d=l[a+1],p=fA(d)?zy(l,t,e,i,Go(d),s):void 0;if(!Vc(p)){Vc(o)||uA(d)&&(o=zy(l,null,e,i,a,s));let h=I_(Ir(),e);XT(r,s,h,i,o)}}function zy(n,t,e,r,i,o){let s=t===null,a;for(;i>0;){let l=n[i],d=Array.isArray(l),p=d?l[1]:l,h=p===null,y=e[i+1];y===zt&&(y=h?Ut:void 0);let g=h?ap(y,r):p===r?y:void 0;if(d&&!Vc(g)&&(g=ap(l,r)),Vc(g)&&(a=g,s))return a;let b=n[i+1];i=s?ji(b):Go(b)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=ap(l,r))}return a}function Vc(n){return n!==void 0}function MA(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=At(Fn(n)))),n}function Pw(n,t){return(n.flags&(t?8:16))!==0}function AA(n,t,e,r,i,o){let s=t.consts,a=Ho(s,i),l=Yo(t,n,2,r,a);return im(t,e,l,Ho(s,o)),l.attrs!==null&&Oc(l,l.attrs,!1),l.mergedAttrs!==null&&Oc(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function u(n,t,e,r){let i=ae(),o=Ke(),s=kt+n,a=i[We],l=o.firstCreatePass?AA(s,o,i,t,e,r):o.data[s],d=kA(o,i,l,a,t,n);i[s]=d;let p=Wc(l);return Bi(l,!0),Bb(a,d,l),!cm(l)&&Jc()&&au(o,i,d,l),wx()===0&&Hi(d,i),Ex(),p&&(tm(o,i,l),Zh(o,l,i)),r!==null&&nm(i,l),u}function c(){let n=Nt();Fh()?Lh():(n=n.parent,Bi(n,!1));let t=n;Sx(t)&&Dx(),Cx();let e=Ke();return e.firstCreatePass&&(eu(e,n),Ph(n)&&e.queries.elementEnd(n)),t.classesWithoutHost!=null&&jx(t)&&fh(e,t,ae(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Ux(t)&&fh(e,t,ae(),t.stylesWithoutHost,!1),c}function _(n,t,e,r){return u(n,t,e,r),c(),_}var kA=(n,t,e,r,i,o)=>(Xc(!0),jb(r,i,Rx()));function NA(n,t,e,r,i){let o=t.consts,s=Ho(o,r),a=Yo(t,n,8,"ng-container",s);s!==null&&Oc(a,s,!0);let l=Ho(o,i);return im(t,e,a,l),t.queries!==null&&t.queries.elementStart(t,a),a}function it(n,t,e){let r=ae(),i=Ke(),o=n+kt,s=i.firstCreatePass?NA(o,i,r,t,e):i.data[o];Bi(s,!0);let a=PA(i,r,s,n);return r[o]=a,Jc()&&au(i,r,a,s),Hi(a,r),Wc(s)&&(tm(i,r,s),Zh(i,s,r)),e!=null&&nm(r,s),it}function ot(){let n=Nt(),t=Ke();return Fh()?Lh():(n=n.parent,Bi(n,!1)),t.firstCreatePass&&(eu(t,n),Ph(n)&&t.queries.elementEnd(n)),ot}var PA=(n,t,e,r)=>(Xc(!0),cT(t[We],""));function Q(){return ae()}var Ti=void 0;function OA(n){let t=n,e=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&r===0?1:5}var RA=["en",[["a","p"],["AM","PM"],Ti],[["AM","PM"],Ti,Ti],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ti,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ti,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ti,"{1} 'at' {0}",Ti],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",OA],gp={};function an(n){let t=FA(n),e=qy(t);if(e)return e;let r=t.split("-")[0];if(e=qy(r),e)return e;if(r==="en")return RA;throw new k(701,!1)}function qy(n){return n in gp||(gp[n]=vr.ng&&vr.ng.common&&vr.ng.common.locales&&vr.ng.common.locales[n]),gp[n]}var Qe=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Qe||{});function FA(n){return n.toLowerCase().replace(/_/g,"-")}var jc="en-US";var LA=jc;function VA(n){typeof n=="string"&&(LA=n.toLowerCase().replace(/_/g,"-"))}var jA=(n,t,e)=>{};function x(n,t,e,r){let i=ae(),o=Ke(),s=Nt();return Ow(o,i,i[We],s,n,t,r),x}function UA(n,t,e,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===e&&i[o+1]===r){let a=t[yc],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function Ow(n,t,e,r,i,o,s){let a=Wc(r),d=n.firstCreatePass&&P_(n),p=t[bn],h=N_(t),y=!0;if(r.type&3||s){let E=On(r,t),S=s?s(E):E,A=h.length,L=s?H=>s(Qn(H[r.index])):r.index,V=null;if(!s&&a&&(V=UA(n,t,i,r.index)),V!==null){let H=V.__ngLastListenerFn__||V;H.__ngNextListenerFn__=o,V.__ngLastListenerFn__=o,y=!1}else{o=Wy(r,t,p,o),jA(E,i,o);let H=e.listen(S,i,o);h.push(o,H),d&&d.push(i,L,A,A+1)}}else o=Wy(r,t,p,o);let g=r.outputs,b;if(y&&g!==null&&(b=g[i])){let E=b.length;if(E)for(let S=0;S<E;S+=2){let A=b[S],L=b[S+1],W=t[A][L].subscribe(o),Ee=h.length;h.push(o,W),d&&d.push(i,r.index,Ee,-(Ee+1))}}}function Gy(n,t,e,r){let i=ge(null);try{return _n(6,t,e),e(r)!==!1}catch(o){return Yb(n,o),!1}finally{_n(7,t,e),ge(i)}}function Wy(n,t,e,r){return function i(o){if(o===Function)return r;let s=Ui(n)?Kn(n.index,t):t;fm(s,5);let a=Gy(t,e,r,o),l=i.__ngNextListenerFn__;for(;l;)a=Gy(t,e,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function w(n=1){return Ox(n)}function BA(n,t){let e=null,r=eT(n);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){e=i;continue}if(r===null?Vb(n,o,!0):rT(r,o))return i}return e}function bm(n){let t=ae()[wn][Ht];if(!t.projection){let e=n?n.length:1,r=t.projection=ZD(e,null),i=r.slice(),o=t.child;for(;o!==null;){if(o.type!==128){let s=n?BA(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function wm(n,t=0,e,r,i,o){let s=ae(),a=Ke(),l=r?n+1:null;l!==null&&ww(s,a,l,r,i,o,null,e);let d=Yo(a,kt+n,16,null,e||null);d.projection===null&&(d.projection=t),Lh();let h=!s[Ys]||R_();s[wn][Ht].projection[d.projection]===null&&l!==null?$A(s,a,l):h&&!cm(d)&&YT(a,s,d)}function $A(n,t,e){let r=kt+e,i=t.data[r],o=n[r],s=Jp(o,i.tView.ssrId),a=ow(n,i,void 0,{dehydratedView:s});sw(o,a,0,Zp(i,s))}function Em(n,t,e){LM(n,t,e)}function fu(n){let t=ae(),e=Ke(),r=j_();Vh(r+1);let i=pm(e,r);if(n.dirty&&gx(t)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=UM(t,r);n.reset(o,cI),n.notifyOnChanges()}return!0}return!1}function pu(){return RM(ae(),j_())}function HA(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}function Gi(n){let t=Ix();return M_(t,kt+n)}function f(n,t=""){let e=ae(),r=Ke(),i=n+kt,o=r.firstCreatePass?Yo(r,i,1,t,null):r.data[i],s=zA(r,e,o,t,n);e[i]=s,Jc()&&au(r,e,s,o),Bi(o,!1)}var zA=(n,t,e,r,i)=>(Xc(!0),aT(t[We],r));function U(n){return O("",n,""),U}function O(n,t,e){let r=ae(),i=aA(r,n,t,e);return i!==zt&&Sm(r,Ir(),i),O}function da(n,t,e,r,i){let o=ae(),s=lA(o,n,t,e,r,i);return s!==zt&&Sm(o,Ir(),s),da}function Cm(n,t,e,r,i,o,s){let a=ae(),l=cA(a,n,t,e,r,i,o,s);return l!==zt&&Sm(a,Ir(),l),Cm}function Sm(n,t,e){let r=I_(t,n);lT(n[We],r,e)}function Le(n,t,e){cb(t)&&(t=t());let r=ae(),i=Zc();if(Cr(r,i,t)){let o=Ke(),s=Bh();Wb(o,s,r,n,t,r[We],e,!1)}return Le}function qe(n,t){let e=cb(n);return e&&n.set(t),e}function Ve(n,t){let e=ae(),r=Ke(),i=Nt();return Ow(r,e,e[We],i,n,t),Ve}function qA(n,t,e){let r=Ke();if(r.firstCreatePass){let i=wr(n);ph(e,r.data,r.blueprint,i,!0),ph(t,r.data,r.blueprint,i,!1)}}function ph(n,t,e,r,i){if(n=Mt(n),Array.isArray(n))for(let o=0;o<n.length;o++)ph(n[o],t,e,r,i);else{let o=Ke(),s=ae(),a=Nt(),l=Bo(n)?n:Mt(n.provide),d=__(n),p=a.providerIndexes&1048575,h=a.directiveStart,y=a.providerIndexes>>20;if(Bo(n)||!n.multi){let g=new Li(d,i,D),b=yp(l,t,i?p:p+y,h);b===-1?(Np(Dc(a,s),o,l),vp(o,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(g),s.push(g)):(e[b]=g,s[b]=g)}else{let g=yp(l,t,p+y,h),b=yp(l,t,p,p+y),E=g>=0&&e[g],S=b>=0&&e[b];if(i&&!S||!i&&!E){Np(Dc(a,s),o,l);let A=QA(i?WA:GA,e.length,i,r,d);!i&&S&&(e[b].providerFactory=A),vp(o,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(A),s.push(A)}else{let A=Rw(e[i?b:g],d,!i&&r);vp(o,n,g>-1?g:b,A)}!i&&r&&S&&e[b].componentProviders++}}}function vp(n,t,e,r){let i=Bo(t),o=rx(t);if(i||o){let l=(o?Mt(t.useClass):t).prototype.ngOnDestroy;if(l){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){let p=d.indexOf(e);p===-1?d.push(e,[r,l]):d[p+1].push(r,l)}else d.push(e,l)}}}function Rw(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function yp(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function GA(n,t,e,r){return hh(this.multi,[])}function WA(n,t,e,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ea(e,e[ue],this.providerFactory.index,r);o=a.slice(0,s),hh(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],hh(i,o);return o}function hh(n,t){for(let e=0;e<n.length;e++){let r=n[e];t.push(r())}return t}function QA(n,t,e,r,i){let o=new Li(n,e,D);return o.multi=[],o.index=t,o.componentProviders=0,Rw(o,i,r&&!e),o}function St(n,t=[]){return e=>{e.providersResolver=(r,i)=>qA(r,i?i(n):n,t)}}function hu(n,t,e){let r=Kc()+n,i=ae();return i[r]===zt?vm(i,r,e?t.call(e):t()):JM(i,r)}function Dt(n,t,e,r,i){return Lw(ae(),Kc(),n,t,e,r,i)}function Wi(n,t,e,r,i,o){return KA(ae(),Kc(),n,t,e,r,i,o)}function Fw(n,t){let e=n[t];return e===zt?void 0:e}function Lw(n,t,e,r,i,o,s){let a=t+e;return ym(n,a,i,o)?vm(n,a+2,s?r.call(s,i,o):r(i,o)):Fw(n,a+2)}function KA(n,t,e,r,i,o,s,a){let l=t+e;return bw(n,l,i,o,s)?vm(n,l+3,a?r.call(a,i,o,s):r(i,o,s)):Fw(n,l+3)}function ut(n,t){let e=Ke(),r,i=n+kt;e.firstCreatePass?(r=ZA(t,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks??=[]).push(i,r.onDestroy)):r=e.data[i];let o=r.factory||(r.factory=Ai(r.type,!0)),s,a=jt(D);try{let l=Sc(!1),d=o();return Sc(l),HA(e,ae(),i,d),d}finally{jt(a)}}function ZA(n,t){if(t)for(let e=t.length-1;e>=0;e--){let r=t[e];if(n===r.name)return r}}function dt(n,t,e,r){let i=n+kt,o=ae(),s=M_(o,i);return YA(o,i)?Lw(o,Kc(),t,s.transform,e,r,s):s.transform(e,r)}function YA(n,t){return n[ue].data[t].pure}function fa(n,t){return cu(n,t)}var mh=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},Dm=(()=>{class n{compileModuleSync(e){return new ch(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),i=f_(e),o=Fb(i.declarations).reduce((s,a)=>{let l=ki(a);return l&&s.push(new na(l)),s},[]);return new mh(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var JA=(()=>{class n{zone=M(De);changeDetectionScheduler=M(ti);applicationRef=M(Sr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function XA({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new De(z(N({},ek()),{scheduleInRootZone:e})),[{provide:De,useFactory:n},{provide:Uo,multi:!0,useFactory:()=>{let r=M(JA,{optional:!0});return()=>r.initialize()}},{provide:Uo,multi:!0,useFactory:()=>{let r=M(tk);return()=>{r.initialize()}}},t===!0?{provide:ob,useValue:!0}:[],{provide:Hh,useValue:e??ib}]}function ek(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var tk=(()=>{class n{subscription=new Re;initialized=!1;zone=M(De);pendingTasks=M(Tr);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Vw=(()=>{class n{appRef=M(Sr);taskService=M(Tr);ngZone=M(De);zonelessEnabled=M(nu);tracing=M(Zo,{optional:!0});disableScheduling=M(ob,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Re;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Tc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(Hh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Mc||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let r=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Cy:sb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Tc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(e),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Cy(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jw(){return Rn("NgZoneless"),Wo([{provide:ti,useExisting:Vw},{provide:De,useClass:Mc},{provide:nu,useValue:!0},{provide:Hh,useValue:!1},[]])}function nk(){return typeof $localize<"u"&&$localize.locale||jc}var Jo=new j("",{providedIn:"root",factory:()=>M(Jo,se.Optional|se.SkipSelf)||nk()});var gh=new j(""),rk=new j("");function qs(n){return!n.moduleRef}function ik(n){let t=qs(n)?n.r3Injector:n.moduleRef.injector,e=t.get(De);return e.run(()=>{qs(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=t.get($t,null),i;if(e.runOutsideAngular(()=>{i=e.onError.subscribe({next:o=>{r.handleError(o)}})}),qs(n)){let o=()=>t.destroy(),s=n.platformInjector.get(gh);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(gh);s.add(o),n.moduleRef.onDestroy(()=>{fc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return oA(r,e,()=>{let o=t.get(Dw);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(Jo,jc);if(VA(s||jc),!t.get(rk,!0))return qs(n)?t.get(Sr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(qs(n)){let l=t.get(Sr);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return ok(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function ok(n,t){let e=n.injector.get(Sr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>e.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new k(-403,!1);t.push(n)}var pc=null;function sk(n=[],t){return ht.create({name:t,providers:[{provide:qc,useValue:"platform"},{provide:gh,useValue:new Set([()=>pc=null])},...n]})}function ak(n=[]){if(pc)return pc;let t=sk(n);return pc=t,nA(),lk(t),t}function lk(n){let t=n.get(Wh,null);sn(n,()=>{t?.forEach(e=>e())})}var re=(()=>{class n{static __NG_ELEMENT_ID__=ck}return n})();function ck(n){return uk(Nt(),ae(),(n&16)===16)}function uk(n,t,e){if(Ui(n)&&!e){let r=Kn(n.index,t);return new Vi(r,r)}else if(n.type&175){let r=t[wn];return new Vi(r,t)}return null}var vh=class{constructor(){}supports(t){return _w(t)}create(t){return new yh(t)}},dk=(n,t)=>t,yh=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||dk}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){let s=!r||e&&e.currentIndex<Qy(r,i,o)?e:r,a=Qy(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,s.previousIndex==null)i++;else{o||(o=[]);let d=a-i,p=l-i;if(d!=p){for(let y=0;y<d;y++){let g=y<o.length?o[y]:o[y]=0,b=g+y;p<=b&&b<d&&(o[y]=g+1)}let h=s.previousIndex;o[h]=p-d}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!_w(t))throw new k(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),r=!0):(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else i=0,YM(t,a=>{s=this._trackByFn(i,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,i),r=!0):(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):t=this._addAfter(new _h(e,r),o,i)),t}_verifyReinsertion(t,e,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){let i=e===null?this._itHead:e._next;return t._next=i,t._prev=e,i===null?this._itTail=t:i._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Uc),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,r=t._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Uc),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},_h=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},bh=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let e=t._prevDup,r=t._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},Uc=class{map=new Map;put(t){let e=t.trackById,r=this.map.get(e);r||(r=new bh,this.map.set(e,r)),r.add(t)}get(t,e){let r=t,i=this.map.get(r);return i?i.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Qy(n,t,e){let r=n.previousIndex;if(r===null)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}var wh=class{constructor(){}supports(t){return t instanceof Map||gm(t)}create(){return new Eh}},Eh=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||gm(t)))throw new k(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(i,r);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let i=this._records.get(t);this._maybeAddToChanges(i,e);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Ch(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}},Ch=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(t){this.key=t}};function Ky(){return new xm([new vh])}var xm=(()=>{class n{factories;static \u0275prov=P({token:n,providedIn:"root",factory:Ky});constructor(e){this.factories=e}static create(e,r){if(r!=null){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||Ky()),deps:[[n,new Ih,new zc]]}}find(e){let r=this.factories.find(i=>i.supports(e));if(r!=null)return r;throw new k(901,!1)}}return n})();function Zy(){return new Im([new wh])}var Im=(()=>{class n{static \u0275prov=P({token:n,providedIn:"root",factory:Zy});factories;constructor(e){this.factories=e}static create(e,r){if(r){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||Zy()),deps:[[n,new Ih,new zc]]}}find(e){let r=this.factories.find(i=>i.supports(e));if(r)return r;throw new k(901,!1)}}return n})();function Uw(n){try{let{rootComponent:t,appProviders:e,platformProviders:r}=n,i=ak(r),o=[XA({}),{provide:ti,useExisting:Vw},...e||[]],s=new Fc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return ik({r3Injector:s.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}}function Vn(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function jn(n,t){Rn("NgSignals");let e=Pv(n);return t?.equal&&(e[Ft].equal=t.equal),e}function kr(n){let t=ge(null);try{return n()}finally{ge(t)}}var Bw=(()=>{class n{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=fk}return n})();function fk(){return new Bw(ae(),Nt())}var pk=!1,hk=(()=>{class n extends Lc{pendingTasks=M(Tr);taskId=null;schedule(e){super.schedule(e),this.taskId===null&&(this.taskId=this.pendingTasks.add(),queueMicrotask(()=>this.flush()))}flush(){try{super.flush()}finally{this.taskId!==null&&(this.pendingTasks.remove(this.taskId),this.taskId=null)}}static \u0275prov=P({token:n,providedIn:"root",factory:()=>new n})}return n})(),Sh=class{scheduler;effectFn;zone;injector;unregisterOnDestroy;watcher;constructor(t,e,r,i,o,s){this.scheduler=t,this.effectFn=e,this.zone=r,this.injector=o,this.watcher=jv(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(t){try{this.effectFn(t)}catch(e){this.injector.get($t,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.schedule(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function mk(){}function gk(n,t){Rn("NgSignals"),!t?.injector&&Nh(mk);let e=t?.injector??M(ht),r=t?.manualCleanup!==!0?e.get($i):null,i=new Sh(e.get(hk),n,typeof Zone>"u"?null:Zone.current,r,e,t?.allowSignalWrites??!1),o=e.get(re,null,{optional:!0});return!o||!(o._lView[X]&8)?i.watcher.notify():(o._lView[lc]??=[]).push(i.watcher.notify),i}var vk=pk;var Dh=class{[Ft];constructor(t){this[Ft]=t}destroy(){this[Ft].destroy()}};function Xo(n,t){if(vk)return gk(n,t);Rn("NgSignals"),!t?.injector&&Nh(Xo);let e=t?.injector??M(ht),r=t?.manualCleanup!==!0?e.get($i):null,i,o=e.get(Bw,null,{optional:!0}),s=e.get(ti);return o!==null&&!t?.forceRoot?(i=bk(o.view,s,n),r instanceof Ic&&r._lView===o.view&&(r=null)):i=wk(n,e.get(xw),s),i.injector=e,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Dh(i)}var $w=z(N({},Ci),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:ta,run(){if(this.dirty=!1,this.hasRun&&!js(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),t=Eo(this),e=wc(!1);try{this.maybeCleanup(),this.fn(n)}finally{wc(e),Vs(this,t)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),yk=z(N({},$w),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(13)},destroy(){Co(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),_k=z(N({},$w),{consumerMarkedDirty(){this.view[X]|=8192,la(this.view),this.notifier.notify(14)},destroy(){Co(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Pi]?.delete(this)}});function bk(n,t,e){let r=Object.create(_k);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=t,r.fn=e,n[Pi]??=new Set,n[Pi].add(r),r.consumerMarkedDirty(r),r}function wk(n,t,e){let r=Object.create(yk);return r.fn=n,r.scheduler=t,r.notifier=e,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(13),r}var Zw=null;function Rr(){return Zw}function Yw(n){Zw??=n}var Cu=class{};var je=new j(""),Lm=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>M(Ek),providedIn:"platform"})}return n})();var Ek=(()=>{class n extends Lm{_location;_history;_doc=M(je);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rr().getBaseHref(this._doc)}onPopState(e){let r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Vm(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function Hw(n){let t=n.match(/#|\?|$/),e=t&&t.index||n.length,r=e-(n[e-1]==="/"?1:0);return n.slice(0,r)+n.slice(e)}function Pr(n){return n&&n[0]!=="?"?"?"+n:n}var ai=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>M(Xw),providedIn:"root"})}return n})(),Jw=new j(""),Xw=(()=>{class n extends ai{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Vm(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+Pr(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+Pr(o));this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+Pr(o));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(F(Lm),F(Jw,8))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eE=(()=>{class n extends ai{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(e){let r=Vm(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+Pr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+Pr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(F(Lm),F(Jw,8))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),ha=(()=>{class n{_subject=new Fe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=Dk(Hw(zw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Pr(r))}normalize(e){return n.stripTrailingSlash(Sk(this._basePath,zw(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Pr(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Pr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Pr;static joinWithSlash=Vm;static stripTrailingSlash=Hw;static \u0275fac=function(r){return new(r||n)(F(ai))};static \u0275prov=P({token:n,factory:()=>Ck(),providedIn:"root"})}return n})();function Ck(){return new ha(F(ai))}function Sk(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function zw(n){return n.replace(/\/index.html$/,"")}function Dk(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var tE=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(tE||{});var Ot=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Ot||{}),Ie=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ie||{}),ln=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(ln||{}),cn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function xk(n){return an(n)[Qe.LocaleId]}function Ik(n,t,e){let r=an(n),i=[r[Qe.DayPeriodsFormat],r[Qe.DayPeriodsStandalone]],o=Sn(i,t);return Sn(o,e)}function Tk(n,t,e){let r=an(n),i=[r[Qe.DaysFormat],r[Qe.DaysStandalone]],o=Sn(i,t);return Sn(o,e)}function Mk(n,t,e){let r=an(n),i=[r[Qe.MonthsFormat],r[Qe.MonthsStandalone]],o=Sn(i,t);return Sn(o,e)}function Ak(n,t){let r=an(n)[Qe.Eras];return Sn(r,t)}function mu(n,t){let e=an(n);return Sn(e[Qe.DateFormat],t)}function gu(n,t){let e=an(n);return Sn(e[Qe.TimeFormat],t)}function vu(n,t){let r=an(n)[Qe.DateTimeFormat];return Sn(r,t)}function Or(n,t){let e=an(n),r=e[Qe.NumberSymbols][t];if(typeof r>"u"){if(t===cn.CurrencyDecimal)return e[Qe.NumberSymbols][cn.Decimal];if(t===cn.CurrencyGroup)return e[Qe.NumberSymbols][cn.Group]}return r}function kk(n,t){return an(n)[Qe.NumberFormats][t]}function nE(n){if(!n[Qe.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Qe.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Nk(n){let t=an(n);return nE(t),(t[Qe.ExtraData][2]||[]).map(r=>typeof r=="string"?Tm(r):[Tm(r[0]),Tm(r[1])])}function Pk(n,t,e){let r=an(n);nE(r);let i=[r[Qe.ExtraData][0],r[Qe.ExtraData][1]],o=Sn(i,t)||[];return Sn(o,e)||[]}function Sn(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function Tm(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var Ok=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,yu={},Rk=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Fk(n,t,e,r){let i=qk(n);t=Nr(e,t)||t;let s=[],a;for(;t;)if(a=Rk.exec(t),a){s=s.concat(a.slice(1));let p=s.pop();if(!p)break;t=p}else{s.push(t);break}let l=i.getTimezoneOffset();r&&(l=iE(r,l),i=zk(i,r,!0));let d="";return s.forEach(p=>{let h=$k(p);d+=h?h(i,e,l):p==="''"?"'":p.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function Su(n,t,e){let r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function Nr(n,t){let e=xk(n);if(yu[e]??={},yu[e][t])return yu[e][t];let r="";switch(t){case"shortDate":r=mu(n,ln.Short);break;case"mediumDate":r=mu(n,ln.Medium);break;case"longDate":r=mu(n,ln.Long);break;case"fullDate":r=mu(n,ln.Full);break;case"shortTime":r=gu(n,ln.Short);break;case"mediumTime":r=gu(n,ln.Medium);break;case"longTime":r=gu(n,ln.Long);break;case"fullTime":r=gu(n,ln.Full);break;case"short":let i=Nr(n,"shortTime"),o=Nr(n,"shortDate");r=_u(vu(n,ln.Short),[i,o]);break;case"medium":let s=Nr(n,"mediumTime"),a=Nr(n,"mediumDate");r=_u(vu(n,ln.Medium),[s,a]);break;case"long":let l=Nr(n,"longTime"),d=Nr(n,"longDate");r=_u(vu(n,ln.Long),[l,d]);break;case"full":let p=Nr(n,"fullTime"),h=Nr(n,"fullDate");r=_u(vu(n,ln.Full),[p,h]);break}return r&&(yu[e][t]=r),r}function _u(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return t!=null&&r in t?t[r]:e})),n}function Un(n,t,e="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function Lk(n,t){return Un(n,3).substring(0,t)}function Ye(n,t,e=0,r=!1,i=!1){return function(o,s){let a=Vk(n,o);if((e>0||a>-e)&&(a+=e),n===3)a===0&&e===-12&&(a=12);else if(n===6)return Lk(a,t);let l=Or(s,cn.MinusSign);return Un(a,t,l,r,i)}}function Vk(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Ae(n,t,e=Ot.Format,r=!1){return function(i,o){return jk(i,o,n,t,e,r)}}function jk(n,t,e,r,i,o){switch(e){case 2:return Mk(t,i,r)[n.getMonth()];case 1:return Tk(t,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let d=Nk(t),p=Pk(t,i,r),h=d.findIndex(y=>{if(Array.isArray(y)){let[g,b]=y,E=s>=g.hours&&a>=g.minutes,S=s<b.hours||s===b.hours&&a<b.minutes;if(g.hours<b.hours){if(E&&S)return!0}else if(E||S)return!0}else if(y.hours===s&&y.minutes===a)return!0;return!1});if(h!==-1)return p[h]}return Ik(t,i,r)[s<12?0:1];case 3:return Ak(t,r)[n.getFullYear()<=0?0:1];default:let l=e;throw new Error(`unexpected translation type ${l}`)}}function bu(n){return function(t,e,r){let i=-1*r,o=Or(e,cn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Un(s,2,o)+Un(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Un(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Un(s,2,o)+":"+Un(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Un(s,2,o)+":"+Un(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var Uk=0,Eu=4;function Bk(n){let t=Su(n,Uk,1).getDay();return Su(n,0,1+(t<=Eu?Eu:Eu+7)-t)}function rE(n){let t=n.getDay(),e=t===0?-3:Eu-t;return Su(n.getFullYear(),n.getMonth(),n.getDate()+e)}function Mm(n,t=!1){return function(e,r){let i;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();i=1+Math.floor((s+o)/7)}else{let o=rE(e),s=Bk(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Un(i,n,Or(r,cn.MinusSign))}}function wu(n,t=!1){return function(e,r){let o=rE(e).getFullYear();return Un(o,n,Or(r,cn.MinusSign),t)}}var Am={};function $k(n){if(Am[n])return Am[n];let t;switch(n){case"G":case"GG":case"GGG":t=Ae(3,Ie.Abbreviated);break;case"GGGG":t=Ae(3,Ie.Wide);break;case"GGGGG":t=Ae(3,Ie.Narrow);break;case"y":t=Ye(0,1,0,!1,!0);break;case"yy":t=Ye(0,2,0,!0,!0);break;case"yyy":t=Ye(0,3,0,!1,!0);break;case"yyyy":t=Ye(0,4,0,!1,!0);break;case"Y":t=wu(1);break;case"YY":t=wu(2,!0);break;case"YYY":t=wu(3);break;case"YYYY":t=wu(4);break;case"M":case"L":t=Ye(1,1,1);break;case"MM":case"LL":t=Ye(1,2,1);break;case"MMM":t=Ae(2,Ie.Abbreviated);break;case"MMMM":t=Ae(2,Ie.Wide);break;case"MMMMM":t=Ae(2,Ie.Narrow);break;case"LLL":t=Ae(2,Ie.Abbreviated,Ot.Standalone);break;case"LLLL":t=Ae(2,Ie.Wide,Ot.Standalone);break;case"LLLLL":t=Ae(2,Ie.Narrow,Ot.Standalone);break;case"w":t=Mm(1);break;case"ww":t=Mm(2);break;case"W":t=Mm(1,!0);break;case"d":t=Ye(2,1);break;case"dd":t=Ye(2,2);break;case"c":case"cc":t=Ye(7,1);break;case"ccc":t=Ae(1,Ie.Abbreviated,Ot.Standalone);break;case"cccc":t=Ae(1,Ie.Wide,Ot.Standalone);break;case"ccccc":t=Ae(1,Ie.Narrow,Ot.Standalone);break;case"cccccc":t=Ae(1,Ie.Short,Ot.Standalone);break;case"E":case"EE":case"EEE":t=Ae(1,Ie.Abbreviated);break;case"EEEE":t=Ae(1,Ie.Wide);break;case"EEEEE":t=Ae(1,Ie.Narrow);break;case"EEEEEE":t=Ae(1,Ie.Short);break;case"a":case"aa":case"aaa":t=Ae(0,Ie.Abbreviated);break;case"aaaa":t=Ae(0,Ie.Wide);break;case"aaaaa":t=Ae(0,Ie.Narrow);break;case"b":case"bb":case"bbb":t=Ae(0,Ie.Abbreviated,Ot.Standalone,!0);break;case"bbbb":t=Ae(0,Ie.Wide,Ot.Standalone,!0);break;case"bbbbb":t=Ae(0,Ie.Narrow,Ot.Standalone,!0);break;case"B":case"BB":case"BBB":t=Ae(0,Ie.Abbreviated,Ot.Format,!0);break;case"BBBB":t=Ae(0,Ie.Wide,Ot.Format,!0);break;case"BBBBB":t=Ae(0,Ie.Narrow,Ot.Format,!0);break;case"h":t=Ye(3,1,-12);break;case"hh":t=Ye(3,2,-12);break;case"H":t=Ye(3,1);break;case"HH":t=Ye(3,2);break;case"m":t=Ye(4,1);break;case"mm":t=Ye(4,2);break;case"s":t=Ye(5,1);break;case"ss":t=Ye(5,2);break;case"S":t=Ye(6,1);break;case"SS":t=Ye(6,2);break;case"SSS":t=Ye(6,3);break;case"Z":case"ZZ":case"ZZZ":t=bu(0);break;case"ZZZZZ":t=bu(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=bu(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=bu(2);break;default:return null}return Am[n]=t,t}function iE(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function Hk(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function zk(n,t,e){let r=e?-1:1,i=n.getTimezoneOffset(),o=iE(t,i);return Hk(n,r*(o-i))}function qk(n){if(qw(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Su(i,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(Ok))return Gk(r)}let t=new Date(n);if(!qw(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function Gk(n){let t=new Date(0),e=0,r=0,i=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-r,l=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,l,d),t}function qw(n){return n instanceof Date&&!isNaN(n.valueOf())}var Wk=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Gw=22,Du=".",pa="0",Qk=";",Kk=",",km="#";function Zk(n,t,e,r,i,o,s=!1){let a="",l=!1;if(!isFinite(n))a=Or(e,cn.Infinity);else{let d=eN(n);s&&(d=Xk(d));let p=t.minInt,h=t.minFrac,y=t.maxFrac;if(o){let L=o.match(Wk);if(L===null)throw new Error(`${o} is not a valid digit info`);let V=L[1],H=L[3],W=L[5];V!=null&&(p=Nm(V)),H!=null&&(h=Nm(H)),W!=null?y=Nm(W):H!=null&&h>y&&(y=h)}tN(d,h,y);let g=d.digits,b=d.integerLen,E=d.exponent,S=[];for(l=g.every(L=>!L);b<p;b++)g.unshift(0);for(;b<0;b++)g.unshift(0);b>0?S=g.splice(b,g.length):(S=g,g=[0]);let A=[];for(g.length>=t.lgSize&&A.unshift(g.splice(-t.lgSize,g.length).join(""));g.length>t.gSize;)A.unshift(g.splice(-t.gSize,g.length).join(""));g.length&&A.unshift(g.join("")),a=A.join(Or(e,r)),S.length&&(a+=Or(e,i)+S.join("")),E&&(a+=Or(e,cn.Exponential)+"+"+E)}return n<0&&!l?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function Yk(n,t,e){let r=kk(t,tE.Decimal),i=Jk(r,Or(t,cn.MinusSign));return Zk(n,i,t,cn.Group,cn.Decimal,e)}function Jk(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(Qk),i=r[0],o=r[1],s=i.indexOf(Du)!==-1?i.split(Du):[i.substring(0,i.lastIndexOf(pa)+1),i.substring(i.lastIndexOf(pa)+1)],a=s[0],l=s[1]||"";e.posPre=a.substring(0,a.indexOf(km));for(let p=0;p<l.length;p++){let h=l.charAt(p);h===pa?e.minFrac=e.maxFrac=p+1:h===km?e.maxFrac=p+1:e.posSuf+=h}let d=a.split(Kk);if(e.gSize=d[1]?d[1].length:0,e.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,o){let p=i.length-e.posPre.length-e.posSuf.length,h=o.indexOf(km);e.negPre=o.substring(0,h).replace(/'/g,""),e.negSuf=o.slice(h+p).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function Xk(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function eN(n){let t=Math.abs(n)+"",e=0,r,i,o,s,a;for((i=t.indexOf(Du))>-1&&(t=t.replace(Du,"")),(o=t.search(/e/i))>0?(i<0&&(i=o),i+=+t.slice(o+1),t=t.substring(0,o)):i<0&&(i=t.length),o=0;t.charAt(o)===pa;o++);if(o===(a=t.length))r=[0],i=1;else{for(a--;t.charAt(a)===pa;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(t.charAt(o))}return i>Gw&&(r=r.splice(0,Gw-1),e=i-1,i=1),{digits:r,exponent:e,integerLen:i}}function tN(n,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(t,i),e),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let h=s;h<r.length;h++)r[h]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let h=1;h<s;h++)r[h]=0}if(a>=5)if(s-1<0){for(let h=0;h>s;h--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=o!==0,d=t+n.integerLen,p=r.reduceRight(function(h,y,g,b){return y=y+h,b[g]=y<10?y:y-10,l&&(b[g]===0&&g>=d?b.pop():l=!1),y>=10?1:0},0);p&&(r.unshift(p),n.integerLen++)}function Nm(n){let t=parseInt(n);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+n);return t}function Iu(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let r=e.indexOf("="),[i,o]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var Pm=/\s+/,Ww=[],qt=(()=>{class n{_ngEl;_renderer;initialClasses=Ww;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(Pm):Ww}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(Pm):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(Pm).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(D(Ze),D(Cn))};static \u0275dir=me({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Om=class{$implicit;ngForOf;index;count;constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Je=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Om(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Qw(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Qw(o,i)})}static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(D(Ar),D(ri),D(xm))};static \u0275dir=me({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Qw(n,t){n.context.$implicit=t.item}var ee=(()=>{class n{_viewContainer;_context=new Rm;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,r){this._viewContainer=e,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Kw("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Kw("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(D(Ar),D(ri))};static \u0275dir=me({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Rm=class{$implicit=null;ngIf=null};function Kw(n,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${At(t)}'.`)}var Fm=class{_viewContainerRef;_templateRef;_created=!1;constructor(t,e){this._viewContainerRef=t,this._templateRef=e}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}},jm=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(e){this._ngSwitch=e,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){let r=e===this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(let r of this._defaultViews)r.enforceState(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),oE=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(e,r,i){this.ngSwitch=i,i._addCase(),this._view=new Fm(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(r){return new(r||n)(D(Ar),D(ri),D(jm,9))};static \u0275dir=me({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})();var sE=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,r,i){this._ngEl=e,this._differs=r,this._renderer=i}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){let[i,o]=e.split("."),s=i.indexOf("-")===-1?void 0:Yn.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||n)(D(Ze),D(Im),D(Cn))};static \u0275dir=me({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})();function aE(n,t){return new k(2100,!1)}var nN="mediumDate",rN=new j(""),iN=new j(""),er=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,r,i){this.locale=e,this.defaultTimezone=r,this.defaultOptions=i}transform(e,r,i,o){if(e==null||e===""||e!==e)return null;try{let s=r??this.defaultOptions?.dateFormat??nN,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Fk(e,s,o||this.locale,a)}catch(s){throw aE(n,s.message)}}static \u0275fac=function(r){return new(r||n)(D(Jo,16),D(rN,24),D(iN,24))};static \u0275pipe=mm({name:"date",type:n,pure:!0})}return n})();var Tu=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,r,i){if(!oN(e))return null;i||=this._locale;try{let o=sN(e);return Yk(o,i,r)}catch(o){throw aE(n,o.message)}}static \u0275fac=function(r){return new(r||n)(D(Jo,16))};static \u0275pipe=mm({name:"number",type:n,pure:!0})}return n})();function oN(n){return!(n==null||n===""||n!==n)}function sN(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var q=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=rt({type:n});static \u0275inj=nt({})}return n})(),Um="browser",aN="server";function Dn(n){return n===Um}function Bm(n){return n===aN}var es=class{};var va=class{},ya=class{},Fr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),o=e.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let i=(t.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(t,e){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var zm=class{encodeKey(t){return lE(t)}encodeValue(t){return lE(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function cN(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var uN=/%(\d[a-f0-9])/gi,dN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function lE(n){return encodeURIComponent(n).replace(uN,(t,e)=>dN[e]??t)}function Mu(n){return`${n}`}var ci=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new zm,t.fromString){if(t.fromObject)throw new k(2805,!1);this.map=cN(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],i=Array.isArray(r)?r.map(Mu):[Mu(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Mu(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(Mu(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var qm=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function fN(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function cE(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function uE(n){return typeof Blob<"u"&&n instanceof Blob}function dE(n){return typeof FormData<"u"&&n instanceof FormData}function pN(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ma="Content-Type",Au="Accept",Qm="X-Request-URL",mE="text/plain",gE="application/json",vE=`${gE}, ${mE}, */*`,ga=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,r,i){this.url=e,this.method=t.toUpperCase();let o;if(fN(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Fr,this.context??=new qm,!this.params)this.params=new ci,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||cE(this.body)||uE(this.body)||dE(this.body)||pN(this.body)?this.body:this.body instanceof ci?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||dE(this.body)?null:uE(this.body)?this.body.type||null:cE(this.body)?null:typeof this.body=="string"?mE:this.body instanceof ci?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?gE:null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,d=t.headers||this.headers,p=t.params||this.params,h=t.context??this.context;return t.setHeaders!==void 0&&(d=Object.keys(t.setHeaders).reduce((y,g)=>y.set(g,t.setHeaders[g]),d)),t.setParams&&(p=Object.keys(t.setParams).reduce((y,g)=>y.set(g,t.setParams[g]),p)),new n(e,r,s,{params:p,headers:d,context:h,reportProgress:l,responseType:i,withCredentials:a,transferCache:o})}},ui=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ui||{}),_a=class{headers;status;statusText;url;ok;type;constructor(t,e=200,r="OK"){this.headers=t.headers||new Fr,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},ku=class n extends _a{constructor(t={}){super(t)}type=ui.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},ba=class n extends _a{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=ui.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},li=class extends _a{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},yE=200,hN=204;function $m(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Km=(()=>{class n{handler;constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof ga)o=e;else{let l;i.headers instanceof Fr?l=i.headers:l=new Fr(i.headers);let d;i.params&&(i.params instanceof ci?d=i.params:d=new ci({fromObject:i.params})),o=new ga(e,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=K(o).pipe(Zr(l=>this.handler.handle(l)));if(e instanceof ga||i.observe==="events")return s;let a=s.pipe(Tt(l=>l instanceof ba));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Y(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new k(2806,!1);return l.body}));case"blob":return a.pipe(Y(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new k(2807,!1);return l.body}));case"text":return a.pipe(Y(l=>{if(l.body!==null&&typeof l.body!="string")throw new k(2808,!1);return l.body}));case"json":default:return a.pipe(Y(l=>l.body))}case"response":return a;default:throw new k(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new ci().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,$m(i,r))}post(e,r,i={}){return this.request("POST",e,$m(i,r))}put(e,r,i={}){return this.request("PUT",e,$m(i,r))}static \u0275fac=function(r){return new(r||n)(F(va))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),mN=/^\)\]\}',?\n/;function fE(n){if(n.url)return n.url;let t=Qm.toLocaleLowerCase();return n.headers.get(t)}var _E=new j(""),Hm=(()=>{class n{fetchImpl=M(Gm,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e));ngZone=M(De);handle(e){return new fe(r=>{let i=new AbortController;return this.doRequest(e,i.signal,r).then(Wm,o=>r.error(new li({error:o}))),()=>i.abort()})}async doRequest(e,r,i){let o=this.createRequestInit(e),s;try{let g=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,N({signal:r},o)));gN(g),i.next({type:ui.Sent}),s=await g}catch(g){i.error(new li({error:g,status:g.status??0,statusText:g.statusText,url:e.urlWithParams,headers:g.headers}));return}let a=new Fr(s.headers),l=s.statusText,d=fE(s)??e.urlWithParams,p=s.status,h=null;if(e.reportProgress&&i.next(new ku({headers:a,status:p,statusText:l,url:d})),s.body){let g=s.headers.get("content-length"),b=[],E=s.body.getReader(),S=0,A,L,V=typeof Zone<"u"&&Zone.current;await this.ngZone.runOutsideAngular(async()=>{for(;;){let{done:W,value:Ee}=await E.read();if(W)break;if(b.push(Ee),S+=Ee.length,e.reportProgress){L=e.responseType==="text"?(L??"")+(A??=new TextDecoder).decode(Ee,{stream:!0}):void 0;let Se=()=>i.next({type:ui.DownloadProgress,total:g?+g:void 0,loaded:S,partialText:L});V?V.run(Se):Se()}}});let H=this.concatChunks(b,S);try{let W=s.headers.get(ma)??"";h=this.parseBody(e,H,W)}catch(W){i.error(new li({error:W,headers:new Fr(s.headers),status:s.status,statusText:s.statusText,url:fE(s)??e.urlWithParams}));return}}p===0&&(p=h?yE:0),p>=200&&p<300?(i.next(new ba({body:h,headers:a,status:p,statusText:l,url:d})),i.complete()):i.error(new li({error:h,headers:a,status:p,statusText:l,url:d}))}parseBody(e,r,i){switch(e.responseType){case"json":let o=new TextDecoder().decode(r).replace(mN,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(e){let r={},i=e.withCredentials?"include":void 0;if(e.headers.forEach((o,s)=>r[o]=s.join(",")),e.headers.has(Au)||(r[Au]=vE),!e.headers.has(ma)){let o=e.detectContentTypeHeader();o!==null&&(r[ma]=o)}return{body:e.serializeBody(),method:e.method,headers:r,credentials:i}}concatChunks(e,r){let i=new Uint8Array(r),o=0;for(let s of e)i.set(s,o),o+=s.length;return i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),Gm=class{};function Wm(){}function gN(n){n.then(Wm,Wm)}function vN(n,t){return t(n)}function yN(n,t,e){return(r,i)=>sn(e,()=>t(r,o=>n(o,i)))}var bE=new j(""),_N=new j(""),bN=new j("",{providedIn:"root",factory:()=>!0});var pE=(()=>{class n extends va{backend;injector;chain=null;pendingTasks=M(Tr);contributeToStability=M(bN);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(bE),...this.injector.get(_N,[])]));this.chain=r.reduceRight((i,o)=>yN(i,o,this.injector),vN)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(mr(()=>this.pendingTasks.remove(r)))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(F(ya),F(Bt))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})();var wN=/^\)\]\}',?\n/,EN=RegExp(`^${Qm}:`,"m");function CN(n){return"responseURL"in n&&n.responseURL?n.responseURL:EN.test(n.getAllResponseHeaders())?n.getResponseHeader(Qm):null}var hE=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new k(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?ze(r.\u0275loadImpl()):K(null)).pipe(nn(()=>new fe(o=>{let s=r.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((E,S)=>s.setRequestHeader(E,S.join(","))),e.headers.has(Au)||s.setRequestHeader(Au,vE),!e.headers.has(ma)){let E=e.detectContentTypeHeader();E!==null&&s.setRequestHeader(ma,E)}if(e.responseType){let E=e.responseType.toLowerCase();s.responseType=E!=="json"?E:"text"}let a=e.serializeBody(),l=null,d=()=>{if(l!==null)return l;let E=s.statusText||"OK",S=new Fr(s.getAllResponseHeaders()),A=CN(s)||e.url;return l=new ku({headers:S,status:s.status,statusText:E,url:A}),l},p=()=>{let{headers:E,status:S,statusText:A,url:L}=d(),V=null;S!==hN&&(V=typeof s.response>"u"?s.responseText:s.response),S===0&&(S=V?yE:0);let H=S>=200&&S<300;if(e.responseType==="json"&&typeof V=="string"){let W=V;V=V.replace(wN,"");try{V=V!==""?JSON.parse(V):null}catch(Ee){V=W,H&&(H=!1,V={error:Ee,text:V})}}H?(o.next(new ba({body:V,headers:E,status:S,statusText:A,url:L||void 0})),o.complete()):o.error(new li({error:V,headers:E,status:S,statusText:A,url:L||void 0}))},h=E=>{let{url:S}=d(),A=new li({error:E,status:s.status||0,statusText:s.statusText||"Unknown Error",url:S||void 0});o.error(A)},y=!1,g=E=>{y||(o.next(d()),y=!0);let S={type:ui.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(S.total=E.total),e.responseType==="text"&&s.responseText&&(S.partialText=s.responseText),o.next(S)},b=E=>{let S={type:ui.UploadProgress,loaded:E.loaded};E.lengthComputable&&(S.total=E.total),o.next(S)};return s.addEventListener("load",p),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),e.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",b)),s.send(a),o.next({type:ui.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",p),s.removeEventListener("timeout",h),e.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",b)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(F(es))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),wE=new j(""),SN="XSRF-TOKEN",DN=new j("",{providedIn:"root",factory:()=>SN}),xN="X-XSRF-TOKEN",IN=new j("",{providedIn:"root",factory:()=>xN}),Nu=class{},TN=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Iu(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||n)(F(je),F(Et),F(DN))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})();function MN(n,t){let e=n.url.toLowerCase();if(!M(wE)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let r=M(Nu).getToken(),i=M(IN);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}var EE=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(EE||{});function AN(n,t){return{\u0275kind:n,\u0275providers:t}}function CE(...n){let t=[Km,hE,pE,{provide:va,useExisting:pE},{provide:ya,useFactory:()=>M(_E,{optional:!0})??M(hE)},{provide:bE,useValue:MN,multi:!0},{provide:wE,useValue:!0},{provide:Nu,useClass:TN}];for(let e of n)t.push(...e.\u0275providers);return Wo(t)}function SE(){return AN(EE.Fetch,[Hm,{provide:_E,useExisting:Hm},{provide:ya,useExisting:Hm}])}var Ym=class extends Cu{supportsDOMEvents=!0},Jm=class n extends Ym{static makeCurrent(){Yw(new n)}onAndCancel(t,e,r,i){return t.addEventListener(e,r,i),()=>{t.removeEventListener(e,r,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=NN();return e==null?null:PN(e)}resetBaseElement(){wa=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Iu(document.cookie,t)}},wa=null;function NN(){return wa=wa||document.querySelector("base"),wa?wa.getAttribute("href"):null}function PN(n){return new URL(n,document.baseURI).pathname}var ON=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),Xm=new j(""),ME=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i,o){return this._findPluginFor(r).addEventListener(e,r,i,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new k(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(F(Xm),F(De))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),Ou=class{_doc;constructor(t){this._doc=t}manager},Pu="ng-app-id";function DE(n){for(let t of n)t.remove()}function xE(n,t){let e=t.createElement("style");return e.textContent=n,e}function RN(n,t,e,r){let i=n.head?.querySelectorAll(`style[${Pu}="${t}"],link[${Pu}="${t}"]`);if(i)for(let o of i)o.removeAttribute(Pu),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function eg(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var AE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,this.isServer=Bm(o),RN(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,xE);r?.forEach(i=>this.addUsage(i,this.external,eg))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let o=r.get(e);o?o.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(DE(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])DE(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,xE(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,eg(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Pu,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(F(je),F(ru),F(ca,8),F(Et))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),Zm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ng=/%COMP%/g;var kE="%COMP%",FN=`_nghost-${kE}`,LN=`_ngcontent-${kE}`,VN=!0,jN=new j("",{providedIn:"root",factory:()=>VN});function UN(n){return LN.replace(ng,n)}function BN(n){return FN.replace(ng,n)}function NE(n,t){return t.map(e=>e.replace(ng,n))}var Ru=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,o,s,a,l,d=null,p=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=d,this.tracingService=p,this.platformIsServer=Bm(a),this.defaultRenderer=new Ea(e,s,l,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Zn.ShadowDom&&(r=z(N({},r),{encapsulation:Zn.Emulated}));let i=this.getOrCreateRenderer(e,r);return i instanceof Fu?i.applyToHost(e):i instanceof Ca&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,h=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case Zn.Emulated:o=new Fu(l,d,r,this.appId,p,s,a,h,y);break;case Zn.ShadowDom:return new tg(l,d,e,r,s,a,this.nonce,h,y);default:o=new Ca(l,d,r,p,s,a,h,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(F(ME),F(AE),F(ru),F(jN),F(je),F(Et),F(De),F(ca),F(Zo,8))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),Ea=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,i,o){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Zm[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(IE(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(IE(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new k(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let o=Zm[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=Zm[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(Yn.DashCase|Yn.Important)?t.style.setProperty(e,r,i&Yn.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Yn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,i){if(typeof t=="string"&&(t=Rr().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);let o=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,e,o)),this.eventManager.addEventListener(t,e,o,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function IE(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var tg=class extends Ea{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,i,o,s,a,l,d){super(t,o,s,l,d),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=i.styles;p=NE(i.id,p);for(let y of p){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=y,this.shadowRoot.appendChild(g)}let h=i.getExternalStyles?.();if(h)for(let y of h){let g=eg(y,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ca=class extends Ea{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,i,o,s,a,l,d){super(t,o,s,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let p=r.styles;this.styles=d?NE(d,p):p,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Fu=class extends Ca{contentAttr;hostAttr;constructor(t,e,r,i,o,s,a,l,d){let p=i+"-"+r.id;super(t,e,r,o,s,a,l,d,p),this.contentAttr=UN(p),this.hostAttr=BN(p)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}},$N=(()=>{class n extends Ou{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,o){return e.addEventListener(r,i,o),()=>this.removeEventListener(e,r,i,o)}removeEventListener(e,r,i,o){return e.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(F(je))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),TE=["alt","control","meta","shift"],HN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},qN=(()=>{class n extends Ou{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rr().onAndCancel(e,s.domEventName,a,o))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),TE.forEach(d=>{let p=r.indexOf(d);p>-1&&(r.splice(p,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let i=HN[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),TE.forEach(s=>{if(s!==i){let a=zN[s];a(e)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(F(je))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})();function PE(n,t){return Uw(N({rootComponent:n},GN(t)))}function GN(n){return{appProviders:[...YN,...n?.providers??[]],platformProviders:ZN}}function WN(){Jm.makeCurrent()}function QN(){return new $t}function KN(){return gb(document),document}var ZN=[{provide:Et,useValue:Um},{provide:Wh,useValue:WN,multi:!0},{provide:je,useFactory:KN,deps:[]}];var YN=[{provide:qc,useValue:"root"},{provide:$t,useFactory:QN,deps:[]},{provide:Xm,useClass:$N,multi:!0,deps:[je,De,Et]},{provide:Xm,useClass:qN,multi:!0,deps:[je]},Ru,AE,ME,{provide:ii,useExisting:Ru},{provide:es,useClass:ON,deps:[]},[]];var OE=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(F(je))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var rg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=F(JN),i},providedIn:"root"})}return n})(),JN=(()=>{class n extends rg{_doc;constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case Ct.NONE:return r;case Ct.HTML:return si(r,"HTML")?Fn(r):Nb(this._doc,String(r)).toString();case Ct.STYLE:return si(r,"Style")?Fn(r):r;case Ct.SCRIPT:if(si(r,"Script"))return Fn(r);throw new k(5200,!1);case Ct.URL:return si(r,"URL")?Fn(r):su(String(r));case Ct.RESOURCE_URL:if(si(r,"ResourceURL"))return Fn(r);throw new k(5201,!1);default:throw new k(5202,!1)}}bypassSecurityTrustHtml(e){return Eb(e)}bypassSecurityTrustStyle(e){return Cb(e)}bypassSecurityTrustScript(e){return Sb(e)}bypassSecurityTrustUrl(e){return Db(e)}bypassSecurityTrustResourceUrl(e){return xb(e)}static \u0275fac=function(r){return new(r||n)(F(je))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ie="primary",Va=Symbol("RouteTitle"),lg=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function ss(n){return new lg(n)}function eP(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function tP(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!tr(n[e],t[e]))return!1;return!0}function tr(n,t){let e=n?cg(n):void 0,r=t?cg(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!HE(n[i],t[i]))return!1;return!0}function cg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function HE(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}else return n===t}function zE(n){return n.length>0?n[n.length-1]:null}function fi(n){return Xf(n)?n:qi(n)?ze(Promise.resolve(n)):K(n)}var nP={exact:GE,subset:WE},qE={exact:rP,subset:iP,ignored:()=>!0};function FE(n,t,e){return nP[e.paths](n.root,t.root,e.matrixParams)&&qE[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function rP(n,t){return tr(n,t)}function GE(n,t,e){if(!Ki(n.segments,t.segments)||!ju(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!GE(n.children[r],t.children[r],e))return!1;return!0}function iP(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>HE(n[e],t[e]))}function WE(n,t,e){return QE(n,t,t.segments,e)}function QE(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!Ki(i,e)||t.hasChildren()||!ju(i,e,r))}else if(n.segments.length===e.length){if(!Ki(n.segments,e)||!ju(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!WE(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!Ki(n.segments,i)||!ju(n.segments,i,r)||!n.children[ie]?!1:QE(n.children[ie],t,o,r)}}function ju(n,t,e){return t.every((r,i)=>qE[e](n[i].parameters,r.parameters))}var Vr=class{root;queryParams;fragment;_queryParamMap;constructor(t=new we([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ss(this.queryParams),this._queryParamMap}toString(){return aP.serialize(this)}},we=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Uu(this)}},Qi=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=ss(this.parameters),this._parameterMap}toString(){return ZE(this)}};function oP(n,t){return Ki(n,t)&&n.every((e,r)=>tr(e.parameters,t[r].parameters))}function Ki(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function sP(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===ie&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ie&&(e=e.concat(t(i,r)))}),e}var Rg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>new Ma,providedIn:"root"})}return n})(),Ma=class{parse(t){let e=new dg(t);return new Vr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Sa(t.root,!0)}`,r=uP(t.queryParams),i=typeof t.fragment=="string"?`#${lP(t.fragment)}`:"";return`${e}${r}${i}`}},aP=new Ma;function Uu(n){return n.segments.map(t=>ZE(t)).join("/")}function Sa(n,t){if(!n.hasChildren())return Uu(n);if(t){let e=n.children[ie]?Sa(n.children[ie],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ie&&r.push(`${i}:${Sa(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=sP(n,(r,i)=>i===ie?[Sa(n.children[ie],!1)]:[`${i}:${Sa(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ie]!=null?`${Uu(n)}/${e[0]}`:`${Uu(n)}/(${e.join("//")})`}}function KE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lu(n){return KE(n).replace(/%3B/gi,";")}function lP(n){return encodeURI(n)}function ug(n){return KE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bu(n){return decodeURIComponent(n)}function LE(n){return Bu(n.replace(/\+/g,"%20"))}function ZE(n){return`${ug(n.path)}${cP(n.parameters)}`}function cP(n){return Object.entries(n).map(([t,e])=>`;${ug(t)}=${ug(e)}`).join("")}function uP(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${Lu(e)}=${Lu(i)}`).join("&"):`${Lu(e)}=${Lu(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var dP=/^[^\/()?;#]+/;function ig(n){let t=n.match(dP);return t?t[0]:""}var fP=/^[^\/()?;=#]+/;function pP(n){let t=n.match(fP);return t?t[0]:""}var hP=/^[^=?&#]+/;function mP(n){let t=n.match(hP);return t?t[0]:""}var gP=/^[^&#]+/;function vP(n){let t=n.match(gP);return t?t[0]:""}var dg=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[ie]=new we(t,e)),r}parseSegment(){let t=ig(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new k(4009,!1);return this.capture(t),new Qi(Bu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=pP(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=ig(this.remaining);i&&(r=i,this.capture(r))}t[Bu(e)]=Bu(r)}parseQueryParam(t){let e=mP(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=vP(this.remaining);s&&(r=s,this.capture(r))}let i=LE(e),o=LE(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ig(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new k(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=ie);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[ie]:new we([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new k(4011,!1)}};function YE(n){return n.segments.length>0?new we([],{[ie]:n}):n}function JE(n){let t={};for(let[r,i]of Object.entries(n.children)){let o=JE(i);if(r===ie&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let e=new we(n.segments,t);return yP(e)}function yP(n){if(n.numberOfChildren===1&&n.children[ie]){let t=n.children[ie];return new we(n.segments.concat(t.segments),t.children)}return n}function Zi(n){return n instanceof Vr}function _P(n,t,e=null,r=null){let i=XE(n);return eC(i,t,e,r)}function XE(n){let t;function e(o){let s={};for(let l of o.children){let d=e(l);s[l.outlet]=d}let a=new we(o.url,s);return o===n&&(t=a),a}let r=e(n.root),i=YE(r);return t??i}function eC(n,t,e,r){let i=n;for(;i.parent;)i=i.parent;if(t.length===0)return og(i,i,i,e,r);let o=bP(t);if(o.toRoot())return og(i,i,new we([],{}),e,r);let s=wP(o,i,n),a=s.processChildren?xa(s.segmentGroup,s.index,o.commands):nC(s.segmentGroup,s.index,o.commands);return og(i,s.segmentGroup,a,e,r)}function $u(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Aa(n){return typeof n=="object"&&n!=null&&n.outlets}function og(n,t,e,r,i){let o={};r&&Object.entries(r).forEach(([l,d])=>{o[l]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let s;n===t?s=e:s=tC(n,t,e);let a=YE(JE(s));return new Vr(a,o,i)}function tC(n,t,e){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===t?r[i]=e:r[i]=tC(o,t,e)}),new we(n.segments,r)}var Hu=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&$u(r[0]))throw new k(4003,!1);let i=r.find(Aa);if(i&&i!==zE(r))throw new k(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function bP(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Hu(!0,0,n);let t=0,e=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,d])=>{a[l]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Hu(e,t,r)}var rs=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function wP(n,t,e){if(n.isAbsolute)return new rs(t,!0,0);if(!e)return new rs(t,!1,NaN);if(e.parent===null)return new rs(e,!0,0);let r=$u(n.commands[0])?0:1,i=e.segments.length-1+r;return EP(e,i,n.numberOfDoubleDots)}function EP(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new k(4005,!1);i=r.segments.length}return new rs(r,!1,i-o)}function CP(n){return Aa(n[0])?n[0].outlets:{[ie]:n}}function nC(n,t,e){if(n??=new we([],{}),n.segments.length===0&&n.hasChildren())return xa(n,t,e);let r=SP(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new we(n.segments.slice(0,r.pathIndex),{});return o.children[ie]=new we(n.segments.slice(r.pathIndex),n.children),xa(o,0,i)}else return r.match&&i.length===0?new we(n.segments,{}):r.match&&!n.hasChildren()?fg(n,t,e):r.match?xa(n,0,i):fg(n,t,e)}function xa(n,t,e){if(e.length===0)return new we(n.segments,{});{let r=CP(e),i={};if(Object.keys(r).some(o=>o!==ie)&&n.children[ie]&&n.numberOfChildren===1&&n.children[ie].segments.length===0){let o=xa(n.children[ie],t,e);return new we(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=nC(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new we(n.segments,i)}}function SP(n,t,e){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;let s=n.segments[i],a=e[r];if(Aa(a))break;let l=`${a}`,d=r<e.length-1?e[r+1]:null;if(i>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!jE(l,d,s))return o;r+=2}else{if(!jE(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function fg(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let o=e[i];if(Aa(o)){let l=DP(o.outlets);return new we(r,l)}if(i===0&&$u(e[0])){let l=n.segments[t];r.push(new Qi(l.path,VE(e[0]))),i++;continue}let s=Aa(o)?o.outlets[ie]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&$u(a)?(r.push(new Qi(s,VE(a))),i+=2):(r.push(new Qi(s,{})),i++)}return new we(r,{})}function DP(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=fg(new we([],{}),0,r))}),t}function VE(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function jE(n,t,e){return n==e.path&&tr(t,e.parameters)}var Ia="imperative",mt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(mt||{}),xn=class{id;url;constructor(t,e){this.id=t,this.url=e}},ka=class extends xn{type=mt.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},di=class extends xn{urlAfterRedirects;type=mt.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},dn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(dn||{}),pg=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(pg||{}),Lr=class extends xn{reason;code;type=mt.NavigationCancel;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Yi=class extends xn{reason;code;type=mt.NavigationSkipped;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}},Na=class extends xn{error;target;type=mt.NavigationError;constructor(t,e,r,i){super(t,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},zu=class extends xn{urlAfterRedirects;state;type=mt.RoutesRecognized;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hg=class extends xn{urlAfterRedirects;state;type=mt.GuardsCheckStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mg=class extends xn{urlAfterRedirects;state;shouldActivate;type=mt.GuardsCheckEnd;constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},gg=class extends xn{urlAfterRedirects;state;type=mt.ResolveStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vg=class extends xn{urlAfterRedirects;state;type=mt.ResolveEnd;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yg=class{route;type=mt.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},_g=class{route;type=mt.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},bg=class{snapshot;type=mt.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wg=class{snapshot;type=mt.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Eg=class{snapshot;type=mt.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cg=class{snapshot;type=mt.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Pa=class{},as=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function xP(n,t){return n.providers&&!n._injector&&(n._injector=hm(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Bn(n){return n.outlet||ie}function IP(n,t){let e=n.filter(r=>Bn(r)===t);return e.push(...n.filter(r=>Bn(r)!==t)),e}function ja(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Sg=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ja(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Yu(this.rootInjector)}},Yu=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new Sg(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(F(Bt))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qu=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Dg(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=Dg(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=xg(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return xg(t,this._root).map(e=>e.value)}};function Dg(n,t){if(n===t.value)return t;for(let e of t.children){let r=Dg(n,e);if(r)return r}return null}function xg(n,t){if(n===t.value)return[t];for(let e of t.children){let r=xg(n,e);if(r.length)return r.unshift(t),r}return[]}var un=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function ns(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Gu=class extends qu{snapshot;constructor(t,e){super(t),this.snapshot=e,Fg(this,t)}toString(){return this.snapshot.toString()}};function rC(n){let t=TP(n),e=new pt([new Qi("",{})]),r=new pt({}),i=new pt({}),o=new pt({}),s=new pt(""),a=new fn(e,r,o,s,i,ie,n,t.root);return a.snapshot=t.root,new Gu(new un(a,[]),t)}function TP(n){let t={},e={},r={},i="",o=new is([],t,r,i,e,ie,n,null,{});return new Qu("",new un(o,[]))}var fn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,i,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Y(d=>d[Va]))??K(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(t=>ss(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(t=>ss(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Wu(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:N(N({},t.params),n.params),data:N(N({},t.data),n.data),resolve:N(N(N(N({},n.data),t.data),i?.data),n._resolvedData)}:r={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},i&&oC(i)&&(r.resolve[Va]=i.title),r}var is=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Va]}constructor(t,e,r,i,o,s,a,l,d){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ss(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ss(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Qu=class extends qu{url;constructor(t,e){super(e),this.url=t,Fg(this,e)}toString(){return iC(this._root)}};function Fg(n,t){t.value._routerState=n,t.children.forEach(e=>Fg(n,e))}function iC(n){let t=n.children.length>0?` { ${n.children.map(iC).join(", ")} } `:"";return`${n.value}${t}`}function sg(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,tr(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),tr(t.params,e.params)||n.paramsSubject.next(e.params),tP(t.url,e.url)||n.urlSubject.next(e.url),tr(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ig(n,t){let e=tr(n.params,t.params)&&oP(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||Ig(n.parent,t.parent))}function oC(n){return typeof n.title=="string"||n.title===null}var MP=new j(""),Lg=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ie;activateEvents=new _e;deactivateEvents=new _e;attachEvents=new _e;detachEvents=new _e;routerOutletData=lb(void 0);parentContexts=M(Yu);location=M(Ar);changeDetector=M(re);inputBinder=M(Vg,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new k(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new k(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new k(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new k(4013,!1);this._activatedRoute=e;let i=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Tg(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Pn]})}return n})(),Tg=class n{route;childContexts;parent;outletData;__ngOutletInjector(t){return new n(this.route,this.childContexts,t,this.outletData)}constructor(t,e,r,i){this.route=t,this.childContexts=e,this.parent=r,this.outletData=i}get(t,e){return t===fn?this.route:t===Yu?this.childContexts:t===MP?this.outletData:this.parent.get(t,e)}},Vg=new j("");function AP(n,t,e){let r=Oa(n,t._root,e?e._root:void 0);return new Gu(r,t)}function Oa(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=kP(n,t,e);return new un(r,i)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Oa(n,a)),s}}let r=NP(t.value),i=t.children.map(o=>Oa(n,o));return new un(r,i)}}function kP(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Oa(n,r,i);return Oa(n,r)})}function NP(n){return new fn(new pt(n.url),new pt(n.params),new pt(n.queryParams),new pt(n.fragment),new pt(n.data),n.outlet,n.component,n)}var Ra=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},sC="ngNavigationCancelingError";function Ku(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=Zi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=aC(!1,dn.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function aC(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[sC]=!0,e.cancellationCode=t,e}function PP(n){return lC(n)&&Zi(n.url)}function lC(n){return!!n&&n[sC]}var OP=(n,t,e,r)=>Y(i=>(new Mg(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),Mg=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,i,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),sg(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=ns(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=ns(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=ns(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=ns(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Cg(o.value.snapshot))}),t.children.length&&this.forwardEvent(new wg(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(sg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),sg(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},Zu=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},os=class{component;route;constructor(t,e){this.component=t,this.route=e}};function RP(n,t,e){let r=n._root,i=t?t._root:null;return Da(r,i,e,[r.value])}function FP(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function cs(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!n_(n)?n:t.get(n):r}function Da(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ns(t);return n.children.forEach(s=>{LP(s,o[s.value.outlet],e,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ta(a,e.getContext(s),i)),i}function LP(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=VP(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Zu(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Da(n,t,a?a.children:null,r,i):Da(n,t,e,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new os(a.outlet.component,s))}else s&&Ta(t,a,i),i.canActivateChecks.push(new Zu(r)),o.component?Da(n,null,a?a.children:null,r,i):Da(n,null,e,r,i);return i}function VP(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Ki(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ki(n.url,t.url)||!tr(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ig(n,t)||!tr(n.queryParams,t.queryParams);case"paramsChange":default:return!Ig(n,t)}}function Ta(n,t,e){let r=ns(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?t?Ta(s,t.children.getContext(o),e):Ta(s,null,e):Ta(s,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new os(t.outlet.component,i)):e.canDeactivateChecks.push(new os(null,i)):e.canDeactivateChecks.push(new os(null,i))}function Ua(n){return typeof n=="function"}function jP(n){return typeof n=="boolean"}function UP(n){return n&&Ua(n.canLoad)}function BP(n){return n&&Ua(n.canActivate)}function $P(n){return n&&Ua(n.canActivateChild)}function HP(n){return n&&Ua(n.canDeactivate)}function zP(n){return n&&Ua(n.canMatch)}function cC(n){return n instanceof hr||n?.name==="EmptyError"}var Vu=Symbol("INITIAL_VALUE");function ls(){return nn(n=>ko(n.map(t=>t.pipe(tn(1),Hs(Vu)))).pipe(Y(t=>{for(let e of t)if(e!==!0){if(e===Vu)return Vu;if(e===!1||qP(e))return e}return!0}),Tt(t=>t!==Vu),tn(1)))}function qP(n){return Zi(n)||n instanceof Ra}function GP(n,t){return tt(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?K(z(N({},e),{guardsResult:!0})):WP(s,r,i,n).pipe(tt(a=>a&&jP(a)?QP(r,o,n,t):K(a)),Y(a=>z(N({},e),{guardsResult:a})))})}function WP(n,t,e,r){return ze(n).pipe(tt(i=>XP(i.component,i.route,e,t,r)),gr(i=>i!==!0,!0))}function QP(n,t,e,r){return ze(t).pipe(Zr(i=>Kr(ZP(i.route.parent,r),KP(i.route,r),JP(n,i.path,e),YP(n,i.route,e))),gr(i=>i!==!0,!0))}function KP(n,t){return n!==null&&t&&t(new Eg(n)),K(!0)}function ZP(n,t){return n!==null&&t&&t(new bg(n)),K(!0)}function YP(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return K(!0);let i=r.map(o=>Xl(()=>{let s=ja(t)??e,a=cs(o,s),l=BP(a)?a.canActivate(t,n):sn(s,()=>a(t,n));return fi(l).pipe(gr())}));return K(i).pipe(ls())}function JP(n,t,e){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>FP(s)).filter(s=>s!==null).map(s=>Xl(()=>{let a=s.guards.map(l=>{let d=ja(s.node)??e,p=cs(l,d),h=$P(p)?p.canActivateChild(r,n):sn(d,()=>p(r,n));return fi(h).pipe(gr())});return K(a).pipe(ls())}));return K(o).pipe(ls())}function XP(n,t,e,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return K(!0);let s=o.map(a=>{let l=ja(t)??i,d=cs(a,l),p=HP(d)?d.canDeactivate(n,t,e,r):sn(l,()=>d(n,t,e,r));return fi(p).pipe(gr())});return K(s).pipe(ls())}function eO(n,t,e,r){let i=t.canLoad;if(i===void 0||i.length===0)return K(!0);let o=i.map(s=>{let a=cs(s,n),l=UP(a)?a.canLoad(t,e):sn(n,()=>a(t,e));return fi(l)});return K(o).pipe(ls(),uC(r))}function uC(n){return Qf(Ge(t=>{if(typeof t!="boolean")throw Ku(n,t)}),Y(t=>t===!0))}function tO(n,t,e,r){let i=t.canMatch;if(!i||i.length===0)return K(!0);let o=i.map(s=>{let a=cs(s,n),l=zP(a)?a.canMatch(t,e):sn(n,()=>a(t,e));return fi(l)});return K(o).pipe(ls(),uC(r))}var Fa=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},La=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function ts(n){return Qr(new Fa(n))}function nO(n){return Qr(new k(4e3,!1))}function rO(n){return Qr(aC(!1,dn.GuardRejected))}var Ag=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return K(r);if(i.numberOfChildren>1||!i.children[ie])return nO(`${t.redirectTo}`);i=i.children[ie]}}applyRedirectCommands(t,e,r,i,o){if(typeof e!="string"){let a=e,{queryParams:l,fragment:d,routeConfig:p,url:h,outlet:y,params:g,data:b,title:E}=i,S=sn(o,()=>a({params:g,data:b,queryParams:l,fragment:d,routeConfig:p,url:h,outlet:y,title:E}));if(S instanceof Vr)throw new La(S);e=S}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r);if(e[0]==="/")throw new La(s);return s}applyRedirectCreateUrlTree(t,e,r,i){let o=this.createSegmentGroup(t,e.root,r,i);return new Vr(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(t,e,r,i){let o=this.createSegments(t,e.segments,r,i),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,r,i)}),new we(o,s)}createSegments(t,e,r,i){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new k(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}},kg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function iO(n,t,e,r,i){let o=dC(n,t,e);return o.matched?(r=xP(t,r),tO(r,t,e,i).pipe(Y(s=>s===!0?o:N({},kg)))):K(o)}function dC(n,t,e){if(t.path==="**")return oO(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?N({},kg):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||eP)(e,n,t);if(!i)return N({},kg);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?N(N({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function oO(n){return{matched:!0,parameters:n.length>0?zE(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function UE(n,t,e,r){return e.length>0&&lO(n,e,r)?{segmentGroup:new we(t,aO(r,new we(e,n.children))),slicedSegments:[]}:e.length===0&&cO(n,e,r)?{segmentGroup:new we(n.segments,sO(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new we(n.segments,n.children),slicedSegments:e}}function sO(n,t,e,r){let i={};for(let o of e)if(Ju(n,t,o)&&!r[Bn(o)]){let s=new we([],{});i[Bn(o)]=s}return N(N({},r),i)}function aO(n,t){let e={};e[ie]=t;for(let r of n)if(r.path===""&&Bn(r)!==ie){let i=new we([],{});e[Bn(r)]=i}return e}function lO(n,t,e){return e.some(r=>Ju(n,t,r)&&Bn(r)!==ie)}function cO(n,t,e){return e.some(r=>Ju(n,t,r))}function Ju(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function uO(n,t,e){return t.length===0&&!n.children[e]}var Ng=class{};function dO(n,t,e,r,i,o,s="emptyOnly"){return new Pg(n,t,e,r,i,s,o).recognize()}var fO=31,Pg=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,i,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ag(this.urlSerializer,this.urlTree)}noMatchError(t){return new k(4002,`'${t.segmentGroup}'`)}recognize(){let t=UE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Y(({children:e,rootSnapshot:r})=>{let i=new un(r,e),o=new Qu("",i),s=_P(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new is([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,ie,e).pipe(Y(r=>({children:r,rootSnapshot:e})),Gn(r=>{if(r instanceof La)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Fa?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,o):this.processSegment(t,e,r,r.segments,i,!0,o).pipe(Y(s=>s instanceof un?[s]:[]))}processChildren(t,e,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ze(o).pipe(Zr(s=>{let a=r.children[s],l=IP(e,s);return this.processSegmentGroup(t,l,a,s,i)}),rp((s,a)=>(s.push(...a),s)),Yr(null),np(),tt(s=>{if(s===null)return ts(r);let a=fC(s);return pO(a),K(a)}))}processSegment(t,e,r,i,o,s,a){return ze(e).pipe(Zr(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,r,i,o,s,a).pipe(Gn(d=>{if(d instanceof Fa)return K(null);throw d}))),gr(l=>!!l),Gn(l=>{if(cC(l))return uO(r,i,o)?K(new Ng):ts(r);throw l}))}processSegmentAgainstRoute(t,e,r,i,o,s,a,l){return Bn(r)!==s&&(s===ie||!Ju(i,o,r))?ts(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,o,s,l):ts(i)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s,a){let{matched:l,parameters:d,consumedSegments:p,positionalParamSegments:h,remainingSegments:y}=dC(e,i,o);if(!l)return ts(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>fO&&(this.allowRedirects=!1));let g=new is(o,d,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,BE(i),Bn(i),i.component??i._loadedComponent??null,i,$E(i)),b=Wu(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(b.params),g.data=Object.freeze(b.data);let E=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,h,g,t);return this.applyRedirects.lineralizeSegments(i,E).pipe(tt(S=>this.processSegment(t,r,e,S.concat(y),s,!1,a)))}matchSegmentAgainstRoute(t,e,r,i,o,s){let a=iO(e,r,i,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(nn(l=>l.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(nn(({routes:d})=>{let p=r._loadedInjector??t,{parameters:h,consumedSegments:y,remainingSegments:g}=l,b=new is(y,h,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,BE(r),Bn(r),r.component??r._loadedComponent??null,r,$E(r)),E=Wu(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(E.params),b.data=Object.freeze(E.data);let{segmentGroup:S,slicedSegments:A}=UE(e,y,g,d);if(A.length===0&&S.hasChildren())return this.processChildren(p,d,S,b).pipe(Y(V=>new un(b,V)));if(d.length===0&&A.length===0)return K(new un(b,[]));let L=Bn(r)===o;return this.processSegment(p,d,S,A,L?ie:o,!0,b).pipe(Y(V=>new un(b,V instanceof un?[V]:[])))}))):ts(e)))}getChildConfig(t,e,r){return e.children?K({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?K({routes:e._loadedRoutes,injector:e._loadedInjector}):eO(t,e,r,this.urlSerializer).pipe(tt(i=>i?this.configLoader.loadChildren(t,e).pipe(Ge(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):rO(e))):K({routes:[],injector:t})}};function pO(n){n.sort((t,e)=>t.value.outlet===ie?-1:e.value.outlet===ie?1:t.value.outlet.localeCompare(e.value.outlet))}function hO(n){let t=n.value.routeConfig;return t&&t.path===""}function fC(n){let t=[],e=new Set;for(let r of n){if(!hO(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=fC(r.children);t.push(new un(r.value,i))}return t.filter(r=>!e.has(r))}function BE(n){return n.data||{}}function $E(n){return n.resolve||{}}function mO(n,t,e,r,i,o){return tt(s=>dO(n,t,e,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:l})=>z(N({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function gO(n,t){return tt(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return K(e);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let d of pC(l))s.add(d);let a=0;return ze(s).pipe(Zr(l=>o.has(l)?vO(l,r,n,t):(l.data=Wu(l,l.parent,n).resolve,K(void 0))),Ge(()=>a++),No(1),tt(l=>a===s.size?K(e):Lt))})}function pC(n){let t=n.children.map(e=>pC(e)).flat();return[n,...t]}function vO(n,t,e,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!oC(i)&&(o[Va]=i.title),yO(o,n,t,r).pipe(Y(s=>(n._resolvedData=s,n.data=Wu(n,n.parent,e).resolve,null)))}function yO(n,t,e,r){let i=cg(n);if(i.length===0)return K({});let o={};return ze(i).pipe(tt(s=>_O(n[s],t,e,r).pipe(gr(),Ge(a=>{if(a instanceof Ra)throw Ku(new Ma,a);o[s]=a}))),No(1),Y(()=>o),Gn(s=>cC(s)?Lt:Qr(s)))}function _O(n,t,e,r){let i=ja(t)??r,o=cs(n,i),s=o.resolve?o.resolve(t,e):sn(i,()=>o(t,e));return fi(s)}function ag(n){return nn(t=>{let e=n(t);return e?ze(e).pipe(Y(()=>t)):K(t)})}var hC=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ie);return r}getResolvedTitleForRoute(e){return e.data[Va]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>M(bO),providedIn:"root"})}return n})(),bO=(()=>{class n extends hC{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(F(OE))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jg=new j("",{providedIn:"root",factory:()=>({})}),wO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=$({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&_(0,"router-outlet")},dependencies:[Lg],encapsulation:2})}return n})();function Ug(n){let t=n.children&&n.children.map(Ug),e=t?z(N({},n),{children:t}):N({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==ie&&(e.component=wO),e}var Bg=new j(""),EO=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(Dm);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return K(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=fi(e.loadComponent()).pipe(Y(mC),Ge(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),mr(()=>{this.componentLoaders.delete(e)})),i=new Mo(r,()=>new Fe).pipe(To());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=CO(r,this.compiler,e,this.onLoadEndListener).pipe(mr(()=>{this.childrenLoaders.delete(r)})),s=new Mo(o,()=>new Fe).pipe(To());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function CO(n,t,e,r){return fi(n.loadChildren()).pipe(Y(mC),tt(i=>i instanceof ra||Array.isArray(i)?K(i):ze(t.compileModuleAsync(i))),Y(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(e).injector,s=o.get(Bg,[],{optional:!0,self:!0}).flat()),{routes:s.map(Ug),injector:o}}))}function SO(n){return n&&typeof n=="object"&&"default"in n}function mC(n){return SO(n)?n.default:n}var $g=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>M(DO),providedIn:"root"})}return n})(),DO=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xO=new j("");var IO=new j(""),TO=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Fe;transitionAbortSubject=new Fe;configLoader=M(EO);environmentInjector=M(Bt);destroyRef=M($i);urlSerializer=M(Rg);rootContexts=M(Yu);location=M(ha);inputBindingEnabled=M(Vg,{optional:!0})!==null;titleStrategy=M(hC);options=M(jg,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M($g);createViewTransition=M(xO,{optional:!0});navigationErrorHandler=M(IO,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>K(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new yg(i)),r=i=>this.events.next(new _g(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(z(N(N({},this.transitions.value),e),{id:r}))}setupNavigations(e,r,i){return this.transitions=new pt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ia,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Tt(o=>o.id!==0),Y(o=>z(N({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),nn(o=>{let s=!1,a=!1;return K(o).pipe(nn(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",dn.SupersededByNewNavigation),Lt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?z(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!d&&p!=="reload"){let h="";return this.events.next(new Yi(l.id,this.urlSerializer.serialize(l.rawUrl),h,pg.IgnoredSameUrlNavigation)),l.resolve(!1),Lt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return K(l).pipe(nn(h=>{let y=this.transitions?.getValue();return this.events.next(new ka(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),y!==this.transitions?.getValue()?Lt:Promise.resolve(h)}),mO(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=z(N({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let y=new zu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:y,source:g,restoredState:b,extras:E}=l,S=new ka(h,this.urlSerializer.serialize(y),g,b);this.events.next(S);let A=rC(this.rootComponentType).snapshot;return this.currentTransition=o=z(N({},l),{targetSnapshot:A,urlAfterRedirects:y,extras:z(N({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,K(o)}else{let h="";return this.events.next(new Yi(l.id,this.urlSerializer.serialize(l.extractedUrl),h,pg.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Lt}}),Ge(l=>{let d=new hg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Y(l=>(this.currentTransition=o=z(N({},l),{guards:RP(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),GP(this.environmentInjector,l=>this.events.next(l)),Ge(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Ku(this.urlSerializer,l.guardsResult);let d=new mg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Tt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",dn.GuardRejected),!1)),ag(l=>{if(l.guards.canActivateChecks.length)return K(l).pipe(Ge(d=>{let p=new gg(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),nn(d=>{let p=!1;return K(d).pipe(gO(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(d,"",dn.NoDataFromResolver)}}))}),Ge(d=>{let p=new vg(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),ag(l=>{let d=p=>{let h=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(p.routeConfig).pipe(Ge(y=>{p.component=y}),Y(()=>{})));for(let y of p.children)h.push(...d(y));return h};return ko(d(l.targetSnapshot.root)).pipe(Yr(null),tn(1))}),ag(()=>this.afterPreactivation()),nn(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return p?ze(p).pipe(Y(()=>o)):K(o)}),Y(l=>{let d=AP(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=z(N({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),Ge(()=>{this.events.next(new Pa)}),OP(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),tn(1),Ge({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new di(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),zs(this.transitionAbortSubject.pipe(Ge(l=>{throw l}))),mr(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",dn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Gn(l=>{if(this.destroyed)return o.resolve(!1),Lt;if(a=!0,lC(l))this.events.next(new Lr(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),PP(l)?this.events.next(new as(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let d=new Na(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let p=sn(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(p instanceof Ra){let{message:h,cancellationCode:y}=Ku(this.urlSerializer,p);this.events.next(new Lr(o.id,this.urlSerializer.serialize(o.extractedUrl),h,y)),this.events.next(new as(p.redirectTo,p.navigationBehaviorOptions))}else throw this.events.next(d),l}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return Lt}))}))}cancelNavigationTransition(e,r,i){let o=new Lr(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MO(n){return n!==Ia}var AO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>M(kO),providedIn:"root"})}return n})(),Og=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},kO=(()=>{class n extends Og{static \u0275fac=(()=>{let e;return function(i){return(e||(e=En(n)))(i||n)}})();static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>M(NO),providedIn:"root"})}return n})(),NO=(()=>{class n extends gC{location=M(ha);urlSerializer=M(Rg);options=M(jg,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=M($g);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Vr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=rC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&e(r.url,r.state)})}handleRouterEvent(e,r){if(e instanceof ka)this.stateMemento=this.createStateMemento();else if(e instanceof Yi)this.rawUrlTree=r.initialUrl;else if(e instanceof zu){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else e instanceof Pa?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):e instanceof Lr&&(e.code===dn.GuardRejected||e.code===dn.NoDataFromResolver)?this.restoreHistory(r):e instanceof Na?this.restoreHistory(r,!0):e instanceof di&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,r){let i=e instanceof Vr?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=N(N({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=N(N({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=En(n)))(i||n)}})();static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function PO(n,t){n.events.pipe(Tt(e=>e instanceof di||e instanceof Lr||e instanceof Na||e instanceof Yi),Y(e=>e instanceof di||e instanceof Yi?0:(e instanceof Lr?e.code===dn.Redirect||e.code===dn.SupersededByNewNavigation:!1)?2:1),Tt(e=>e!==2),tn(1)).subscribe(()=>{t()})}var OO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},RO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},gt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(_m);stateManager=M(gC);options=M(jg,{optional:!0})||{};pendingTasks=M(Tr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(TO);urlSerializer=M(Rg);location=M(ha);urlHandlingStrategy=M($g);_events=new Fe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(AO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(Bg,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(Vg,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Re;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Lr&&r.code!==dn.Redirect&&r.code!==dn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof di)this.navigated=!0;else if(r instanceof as){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=N({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||MO(i.source)},s);this.scheduleNavigation(a,Ia,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}LO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ia,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",r)},0)})}navigateToSyncWithBrowser(e,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=N({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Ug),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:s,p=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":p=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let h;try{let y=i?i.snapshot:this.routerState.snapshot.root;h=XE(y)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),h=this.currentUrlTree.root}return eC(h,e,p,d??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=Zi(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ia,null,r)}navigate(e,r={skipLocationChange:!1}){return FO(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=N({},OO):r===!1?i=N({},RO):i=r,Zi(e))return FE(this.currentUrlTree,e,i);let o=this.parseUrl(e);return FE(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(e,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,d;s?(a=s.resolve,l=s.reject,d=s.promise):d=new Promise((h,y)=>{a=h,l=y});let p=this.pendingTasks.add();return PO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function FO(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new k(4008,!1)}function LO(n){return!(n instanceof Pa)&&!(n instanceof as)}var Ue=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Fe;constructor(e,r,i,o,s,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(d=>{d instanceof di&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Zi(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let r=this.href===null?null:Pb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(e,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,e,r):i.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Zi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(D(gt),D(fn),tu("tabindex"),D(Cn),D(Ze),D(ai))};static \u0275dir=me({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&x("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Jn("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Vn],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Vn],replaceUrl:[2,"replaceUrl","replaceUrl",Vn],routerLink:"routerLink"},features:[zi,Pn]})}return n})();var VO=new j("");function vC(n,...t){return Wo([{provide:Bg,multi:!0,useValue:n},[],{provide:fn,useFactory:jO,deps:[gt]},{provide:uu,multi:!0,useFactory:BO},t.map(e=>e.\u0275providers)])}function jO(n){return n.routerState.root}function UO(n,t){return{\u0275kind:n,\u0275providers:t}}function BO(){let n=M(ht);return t=>{let e=n.get(Sr);if(t!==e.components[0])return;let r=n.get(gt),i=n.get($O);n.get(HO)===1&&r.initialNavigation(),n.get(zO,null,se.Optional)?.setUpPreloading(),n.get(VO,null,se.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var $O=new j("",{factory:()=>new Fe}),HO=new j("",{providedIn:"root",factory:()=>1});var zO=new j("");function yC(){return UO(6,[{provide:ai,useClass:eE}])}var Hg;try{Hg=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Hg=!1}var Xu=(()=>{class n{_platformId=M(Et);isBrowser=this._platformId?Dn(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Hg)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zg(n){return Array.isArray(n)?n:[n]}var _C=new Set,Xi,qO=(()=>{class n{_platform=M(Xu);_nonce=M(ca,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):WO}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&GO(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GO(n,t){if(!_C.has(n))try{Xi||(Xi=document.createElement("style"),t&&Xi.setAttribute("nonce",t),Xi.setAttribute("type","text/css"),document.head.appendChild(Xi)),Xi.sheet&&(Xi.sheet.insertRule(`@media ${n} {body{ }}`,0),_C.add(n))}catch(e){console.error(e)}}function WO(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var wC=(()=>{class n{_mediaMatcher=M(qO);_zone=M(De);_queries=new Map;_destroySubject=new Fe;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return bC(zg(e)).some(i=>this._registerQuery(i).mql.matches)}observe(e){let i=bC(zg(e)).map(s=>this._registerQuery(s).observable),o=ko(i);return o=Kr(o.pipe(tn(1)),o.pipe(sp(1),tp(0))),o.pipe(Y(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:d})=>{a.matches=a.matches||l,a.breakpoints[d]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let r=this._mediaMatcher.matchMedia(e),o={observable:new fe(s=>{let a=l=>this._zone.run(()=>s.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Hs(r),Y(({matches:s})=>({query:e,matches:s})),zs(this._destroySubject)),mql:r};return this._queries.set(e,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bC(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var eo=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(eo||{}),EC="cdk-high-contrast-black-on-white",CC="cdk-high-contrast-white-on-black",qg="cdk-high-contrast-active",SC=(()=>{class n{_platform=M(Xu);_hasCheckedHighContrastMode;_document=M(je);_breakpointSubscription;constructor(){this._breakpointSubscription=M(wC).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return eo.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(e):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return eo.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return eo.BLACK_ON_WHITE}return eo.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(qg,EC,CC),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===eo.BLACK_ON_WHITE?e.add(qg,EC):r===eo.WHITE_ON_BLACK&&e.add(qg,CC)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Gg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=rt({type:n});static \u0275inj=nt({})}return n})();var Wg=(()=>{class n{constructor(){M(SC)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=rt({type:n});static \u0275inj=nt({imports:[Gg,Gg]})}return n})();var QO=["*"],ed;function KO(){if(ed===void 0&&(ed=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(ed=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return ed}function Ba(n){return KO()?.createHTML(n)||n}function DC(n){return Error(`Unable to find icon with the name "${n}"`)}function ZO(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function xC(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function IC(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var jr=class{url;svgText;options;svgElement;constructor(t,e,r){this.url=t,this.svgText=e,this.options=r}},YO=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,r,i,o){this._httpClient=e,this._sanitizer=r,this._errorHandler=o,this._document=i}addSvgIcon(e,r,i){return this.addSvgIconInNamespace("",e,r,i)}addSvgIconLiteral(e,r,i){return this.addSvgIconLiteralInNamespace("",e,r,i)}addSvgIconInNamespace(e,r,i,o){return this._addSvgIconConfig(e,r,new jr(i,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,i,o){let s=this._sanitizer.sanitize(Ct.HTML,i);if(!s)throw IC(i);let a=Ba(s);return this._addSvgIconConfig(e,r,new jr("",a,o))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,i){return this._addSvgIconSetConfig(e,new jr(r,null,i))}addSvgIconSetLiteralInNamespace(e,r,i){let o=this._sanitizer.sanitize(Ct.HTML,r);if(!o)throw IC(r);let s=Ba(o);return this._addSvgIconSetConfig(e,new jr("",s,i))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let r=this._sanitizer.sanitize(Ct.RESOURCE_URL,e);if(!r)throw xC(e);let i=this._cachedIconsByUrl.get(r);return i?K(td(i)):this._loadSvgIconFromConfig(new jr(e,null)).pipe(Ge(o=>this._cachedIconsByUrl.set(r,o)),Y(o=>td(o)))}getNamedSvgIcon(e,r=""){let i=TC(r,e),o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,e),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(r);return s?this._getSvgFromIconSetConfigs(e,s):Qr(DC(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?K(td(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Y(r=>td(r)))}_getSvgFromIconSetConfigs(e,r){let i=this._extractIconWithNameFromAnySet(e,r);if(i)return K(i);let o=r.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Gn(a=>{let d=`Loading icon set URL: ${this._sanitizer.sanitize(Ct.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(d)),K(null)})));return $s(o).pipe(Y(()=>{let s=this._extractIconWithNameFromAnySet(e,r);if(!s)throw DC(e);return s}))}_extractIconWithNameFromAnySet(e,r){for(let i=r.length-1;i>=0;i--){let o=r[i];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,e,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Ge(r=>e.svgText=r),Y(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?K(null):this._fetchIcon(e).pipe(Ge(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,i){let o=e.querySelector(`[id="${r}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,i);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),i);let a=this._svgElementFromString(Ba("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,i)}_svgElementFromString(e){let r=this._document.createElement("DIV");r.innerHTML=e;let i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(e){let r=this._svgElementFromString(Ba("<svg></svg>")),i=e.attributes;for(let o=0;o<i.length;o++){let{name:s,value:a}=i[o];s!=="id"&&r.setAttribute(s,a)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){let{url:r,options:i}=e,o=i?.withCredentials??!1;if(!this._httpClient)throw ZO();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let s=this._sanitizer.sanitize(Ct.RESOURCE_URL,r);if(!s)throw xC(r);let a=this._inProgressUrlFetches.get(s);if(a)return a;let l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(Y(d=>Ba(d)),mr(()=>this._inProgressUrlFetches.delete(s)),op());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(e,r,i){return this._svgIconConfigs.set(TC(e,r),i),this}_addSvgIconSetConfig(e,r){let i=this._iconSetConfigs.get(e);return i?i.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){let r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let i=0;i<this._resolvers.length;i++){let o=this._resolvers[i](r,e);if(o)return JO(o)?new jr(o.url,null,o.options):new jr(o,null)}}static \u0275fac=function(r){return new(r||n)(F(Km,8),F(rg),F(je,8),F($t))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function td(n){return n.cloneNode(!0)}function TC(n,t){return n+":"+t}function JO(n){return!!(n.url&&n.options)}var XO=new j("MAT_ICON_DEFAULT_OPTIONS"),eR=new j("mat-icon-location",{providedIn:"root",factory:tR});function tR(){let n=M(je),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var MC=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],nR=MC.map(n=>`[${n}]`).join(", "),rR=/^url\(['"]?#(.*?)['"]?\)$/,nd=(()=>{class n{_elementRef=M(Ze);_iconRegistry=M(YO);_location=M(eR);_errorHandler=M($t);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Re.EMPTY;constructor(){let e=M(new xc("aria-hidden"),{optional:!0}),r=M(XO,{optional:!0});r&&(r.color&&(this.color=this._defaultColor=r.color),r.fontSet&&(this.fontSet=r.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let i=e.childNodes[r];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>e.classList.remove(i)),r.forEach(i=>e.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){let r=e.querySelectorAll(nR),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)MC.forEach(s=>{let a=r[o],l=a.getAttribute(s),d=l?l.match(rR):null;if(d){let p=i.get(a);p||(p=[],i.set(a,p)),p.push({name:s,value:d[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[r,i]=this._splitIconName(e);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(tn(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${r}:${i}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=$({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){r&2&&(Jn("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),du(i.color?"mat-"+i.color:""),Pt("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Vn],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[zi],ngContentSelectors:QO,decls:1,vars:0,template:function(r,i){r&1&&(bm(),wm(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),rd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=rt({type:n});static \u0275inj=nt({imports:[Wg,Wg]})}return n})();var kC=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-MAQGHWLI.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var $a=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},id=class extends $a{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},od=class extends $a{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},sd=class extends $a{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},Qg=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(Qg||{});var iR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(h){s(h)}}function l(p){try{d(r.throw(p))}catch(h){s(h)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})},Ha=class{constructor(t,{headers:e={},customFetch:r,region:i=Qg.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=kC(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return iR(this,void 0,void 0,function*(){try{let{headers:i,method:o,body:s}=e,a={},{region:l}=e;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let d;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=s):typeof s=="string"?(a["Content-Type"]="text/plain",d=s):typeof FormData<"u"&&s instanceof FormData?d=s:(a["Content-Type"]="application/json",d=JSON.stringify(s)));let p=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:d}).catch(b=>{throw new id(b)}),h=p.headers.get("x-relay-error");if(h&&h==="true")throw new od(p);if(!p.ok)throw new sd(p);let y=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return y==="application/json"?g=yield p.json():y==="application/octet-stream"?g=yield p.blob():y==="text/event-stream"?g=p:y==="multipart/form-data"?g=yield p.formData():g=yield p.text(),{data:g,error:null}}catch(i){return{data:null,error:i}}})}};var zC=Z1(HC(),1),{PostgrestClient:qC,PostgrestQueryBuilder:pq,PostgrestFilterBuilder:hq,PostgrestTransformBuilder:mq,PostgrestBuilder:gq,PostgrestError:gR}=zC.default;var GC="2.11.2";var WC={"X-Client-Info":`realtime-js/${GC}`},QC="1.0.0",ud=1e4,KC=1e3,ds=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(ds||{}),pn=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(pn||{}),In=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(In||{}),s0=function(n){return n.websocket="websocket",n}(s0||{}),to=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(to||{});var dd=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){let i=e.getUint8(1),o=e.getUint8(2),s=this.HEADER_LENGTH+2,a=r.decode(t.slice(s,s+i));s=s+i;let l=r.decode(t.slice(s,s+o));s=s+o;let d=JSON.parse(r.decode(t.slice(s,t.byteLength)));return{ref:null,topic:a,event:l,payload:d}}};var fs=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Pe=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(Pe||{}),l0=(n,t,e={})=>{var r;let i=(r=e.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((o,s)=>(o[s]=vR(s,n,t,i),o),{})},vR=(n,t,e,r)=>{let i=t.find(a=>a.name===n),o=i?.type,s=e[n];return o&&!r.includes(o)?ZC(o,s):a0(s)},ZC=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return wR(t,e)}switch(n){case Pe.bool:return yR(t);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return _R(t);case Pe.json:case Pe.jsonb:return bR(t);case Pe.timestamp:return ER(t);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return a0(t);default:return a0(t)}},a0=n=>n,yR=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},_R=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},bR=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},wR=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let o,s=n.slice(1,e);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>ZC(t,a))}return n},ER=n=>typeof n=="string"?n.replace(" ","T"):n,fd=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};var ps=class{constructor(t,e,r={},i=ud){this.channel=t,this.event=e,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var Za=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,o,s),this.pendingDiffs.forEach(l=>{this.state=n.syncDiff(this.state,l,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,i){let o=this.cloneDeep(t),s=this.transformState(e),a={},l={};return this.map(o,(d,p)=>{s[d]||(l[d]=p)}),this.map(s,(d,p)=>{let h=o[d];if(h){let y=p.map(S=>S.presence_ref),g=h.map(S=>S.presence_ref),b=p.filter(S=>g.indexOf(S.presence_ref)<0),E=h.filter(S=>y.indexOf(S.presence_ref)<0);b.length>0&&(a[d]=b),E.length>0&&(l[d]=E)}else a[d]=p}),this.syncDiff(o,{joins:a,leaves:l},r,i)}static syncDiff(t,e,r,i){let{joins:o,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var d;let p=(d=t[a])!==null&&d!==void 0?d:[];if(t[a]=this.cloneDeep(l),p.length>0){let h=t[a].map(g=>g.presence_ref),y=p.filter(g=>h.indexOf(g.presence_ref)<0);t[a].unshift(...y)}r(a,p,l)}),this.map(s,(a,l)=>{let d=t[a];if(!d)return;let p=l.map(h=>h.presence_ref);d=d.filter(h=>p.indexOf(h.presence_ref)<0),t[a]=d,i(a,d,l),d.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let i=t[r];return"metas"in i?e[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):e[r]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Ur=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(Ur||{});var Ya=class n{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=pn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new ps(this,In.join,this.params,this.timeout),this.rejoinTimer=new fs(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(In.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new Za(this),this.broadcastEndpointURL=fd(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:o,presence:s,private:a}}=this.params;this._onError(p=>t?.(Ur.CHANNEL_ERROR,p)),this._onClose(()=>t?.(Ur.CLOSED));let l={},d={broadcast:o,presence:s,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},l)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:p})=>{var h;if(this.socket.setAuth(),p===void 0){t?.(Ur.SUBSCRIBED);return}else{let y=this.bindings.postgres_changes,g=(h=y?.length)!==null&&h!==void 0?h:0,b=[];for(let E=0;E<g;E++){let S=y[E],{filter:{event:A,schema:L,table:V,filter:H}}=S,W=p&&p[E];if(W&&W.event===A&&W.schema===L&&W.table===V&&W.filter===H)b.push(Object.assign(Object.assign({},S),{id:W.id}));else{this.unsubscribe(),t?.(Ur.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Ur.SUBSCRIBED);return}}).receive("error",p=>{t?.(Ur.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t?.(Ur.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,r){return this._on(t,e,r)}async send(t,e={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){let{event:o,payload:s}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{let d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=e.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,l;let d=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=pn.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(In.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let i=new ps(this,In.leave,{},t);i.receive("ok",()=>{e(),r("ok")}).receive("timeout",()=>{e(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(t,e,r){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(o),s}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ps(this,t,e,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:l,leave:d,join:p}=In;if(r&&[a,l,d,p].indexOf(s)>=0&&r!==this._joinRef())return;let y=this._onMessage(s,e,r);if(e&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var b,E,S;return((b=g.filter)===null||b===void 0?void 0:b.event)==="*"||((S=(E=g.filter)===null||E===void 0?void 0:E.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===s}).map(g=>g.callback(y,r)):(o=this.bindings[s])===null||o===void 0||o.filter(g=>{var b,E,S,A,L,V;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in g){let H=g.id,W=(b=g.filter)===null||b===void 0?void 0:b.event;return H&&((E=e.ids)===null||E===void 0?void 0:E.includes(H))&&(W==="*"||W?.toLocaleLowerCase()===((S=e.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{let H=(L=(A=g?.filter)===null||A===void 0?void 0:A.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return H==="*"||H===((V=e?.event)===null||V===void 0?void 0:V.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===s}).map(g=>{if(typeof y=="object"&&"ids"in y){let b=y.data,{schema:E,table:S,commit_timestamp:A,type:L,errors:V}=b;y=Object.assign(Object.assign({},{schema:E,table:S,commit_timestamp:A,eventType:L,new:{},old:{},errors:V}),this._getPayloadRecords(b))}g.callback(y,r)})}_isClosed(){return this.state===pn.closed}_isJoined(){return this.state===pn.joined}_isJoining(){return this.state===pn.joining}_isLeaving(){return this.state===pn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let i=t.toLocaleLowerCase(),o={type:i,filter:e,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&n.isEqual(i.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(In.close,{},t)}_onError(t){this._on(In.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=l0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=l0(t.columns,t.old_record)),e}};var SR=()=>{},DR=typeof WebSocket<"u",xR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Ja=class{constructor(t,e){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=WC,this.params={},this.timeout=ud,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=SR,this.conn=null,this.sendBuffer=[],this.serializer=new dd,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...a)=>import("./chunk-MAQGHWLI.js").then(({default:l})=>l(...a)):s=fetch,(...a)=>s(...a)},this.endPoint=`${t}/${s0.websocket}`,this.httpEndpoint=fd(t),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let i=(r=e?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=e?.encode?e.encode:(o,s)=>s(JSON.stringify(o)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new fs(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(DR){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new c0(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-KYSFV2V4.js").then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:QC}))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){let e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){let t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),t}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ds.connecting:return to.Connecting;case ds.open:return to.Open;case ds.closing:return to.Closing;default:return to.Closed}}isConnected(){return this.connectionState()===to.Open}channel(t,e={config:{}}){let r=new Ya(`realtime:${t}`,e,this);return this.channels.push(r),r}push(t){let{topic:e,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){let e=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(e){let r=null;try{r=JSON.parse(atob(e.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=e,this.channels.forEach(i=>{e&&i.updateJoinPayload({access_token:e}),i.joinedOnce&&i._isJoined()&&i._push(In.access_token,{access_token:e})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(KC,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:r,event:i,payload:o,ref:s}=e;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${i} ${s&&"("+s+")"||""}`,o),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,o,s)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(In.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${r}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([xR],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}};var c0=class{constructor(t,e,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ds.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}};var hs=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Xe(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var pd=class extends hs{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},no=class extends hs{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var IR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(h){s(h)}}function l(p){try{d(r.throw(p))}catch(h){s(h)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})},md=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-MAQGHWLI.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},YC=()=>IR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-MAQGHWLI.js")).Response:Response}),hd=n=>{if(Array.isArray(n))return n.map(e=>hd(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let i=e.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=hd(r)}),t};var ro=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(h){s(h)}}function l(p){try{d(r.throw(p))}catch(h){s(h)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})},u0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),TR=(n,t,e)=>ro(void 0,void 0,void 0,function*(){let r=yield YC();n instanceof r&&!e?.noResolveJson?n.json().then(i=>{t(new pd(u0(i),n.status||500))}).catch(i=>{t(new no(u0(i),i))}):t(new no(u0(n),n))}),MR=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),e))};function Xa(n,t,e,r,i,o){return ro(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,MR(t,r,i,o)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>TR(l,a,r))})})}function ms(n,t,e,r){return ro(this,void 0,void 0,function*(){return Xa(n,"GET",t,e,r)})}function nr(n,t,e,r,i){return ro(this,void 0,void 0,function*(){return Xa(n,"POST",t,r,i,e)})}function JC(n,t,e,r,i){return ro(this,void 0,void 0,function*(){return Xa(n,"PUT",t,r,i,e)})}function XC(n,t,e,r){return ro(this,void 0,void 0,function*(){return Xa(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function gd(n,t,e,r,i){return ro(this,void 0,void 0,function*(){return Xa(n,"DELETE",t,r,i,e)})}var Gt=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(h){s(h)}}function l(p){try{d(r.throw(p))}catch(h){s(h)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})},AR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},eS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},vd=class{constructor(t,e={},r,i){this.url=t,this.headers=e,this.bucketId=r,this.fetch=md(i)}uploadOrUpdate(t,e,r,i){return Gt(this,void 0,void 0,function*(){try{let o,s=Object.assign(Object.assign({},eS),i),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)}),l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let d=this._removeEmptyFolders(e),p=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:t,body:o,headers:a},s?.duplex?{duplex:s.duplex}:{})),y=yield h.json();return h.ok?{data:{path:d,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(o){if(Xe(o))return{data:null,error:o};throw o}})}upload(t,e,r){return Gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,i){return Gt(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(t),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let l,d=Object.assign({upsert:eS.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",d.cacheControl)):(l=r,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType);let h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:p}),y=yield h.json();return h.ok?{data:{path:o,fullPath:y.Key},error:null}:{data:null,error:y}}catch(l){if(Xe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return Gt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");let o=yield nr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new hs("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}update(t,e,r){return Gt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return Gt(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}copy(t,e,r){return Gt(this,void 0,void 0,function*(){try{return{data:{path:(yield nr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,r){return Gt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield nr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,r){return Gt(this,void 0,void 0,function*(){try{let i=yield nr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}download(t,e){return Gt(this,void 0,void 0,function*(){let i=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),s=o?`?${o}`:"";try{let a=this._getFinalPath(t);return{data:yield(yield ms(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Xe(a))return{data:null,error:a};throw a}})}info(t){return Gt(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield ms(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:hd(r),error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}exists(t){return Gt(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield XC(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Xe(r)&&r instanceof no){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),i=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);let a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&i.push(l);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${d}`)}}}remove(t){return Gt(this,void 0,void 0,function*(){try{return{data:yield gd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(Xe(e))return{data:null,error:e};throw e}})}list(t,e,r){return Gt(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},AR),e),{prefix:t||""});return{data:yield nr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Xe(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var tS="2.7.1";var nS={"X-Client-Info":`storage-js/${tS}`};var gs=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(h){s(h)}}function l(p){try{d(r.throw(p))}catch(h){s(h)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})},yd=class{constructor(t,e={},r){this.url=t,this.headers=Object.assign(Object.assign({},nS),e),this.fetch=md(r)}listBuckets(){return gs(this,void 0,void 0,function*(){try{return{data:yield ms(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Xe(t))return{data:null,error:t};throw t}})}getBucket(t){return gs(this,void 0,void 0,function*(){try{return{data:yield ms(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(Xe(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return gs(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}updateBucket(t,e){return gs(this,void 0,void 0,function*(){try{return{data:yield JC(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}})}emptyBucket(t){return gs(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(Xe(e))return{data:null,error:e};throw e}})}deleteBucket(t){return gs(this,void 0,void 0,function*(){try{return{data:yield gd(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(Xe(e))return{data:null,error:e};throw e}})}};var el=class extends yd{constructor(t,e={},r){super(t,e,r)}from(t){return new vd(this.url,this.headers,t,this.fetch)}};var rS="2.48.1";var tl="";typeof Deno<"u"?tl="deno":typeof document<"u"?tl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?tl="react-native":tl="node";var kR={"X-Client-Info":`supabase-js-${tl}/${rS}`},iS={headers:kR},oS={schema:"public"},sS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},aS={};Ev();var NR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(h){s(h)}}function l(p){try{d(r.throw(p))}catch(h){s(h)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})},PR=n=>{let t;return n?t=n:typeof fetch>"u"?t=bv:t=fetch,(...e)=>t(...e)},OR=()=>typeof Headers>"u"?wv:Headers,lS=(n,t,e)=>{let r=PR(e),i=OR();return(o,s)=>NR(void 0,void 0,void 0,function*(){var a;let l=(a=yield t())!==null&&a!==void 0?a:n,d=new i(s?.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},s),{headers:d}))})};var RR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(h){s(h)}}function l(p){try{d(r.throw(p))}catch(h){s(h)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})};function cS(n){return n.replace(/\/$/,"")}function uS(n,t){let{db:e,auth:r,realtime:i,global:o}=n,{db:s,auth:a,realtime:l,global:d}=t,p={db:Object.assign(Object.assign({},s),e),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},d),o),accessToken:()=>RR(this,void 0,void 0,function*(){return""})};return n.accessToken?p.accessToken=n.accessToken:delete p.accessToken,p}function dS(n){return Math.round(Date.now()/1e3)+n}function fS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var $n=()=>typeof document<"u",io={tested:!1,writable:!1},pi=()=>{if(!$n())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(io.tested)return io.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),io.tested=!0,io.writable=!0}catch{io.tested=!0,io.writable=!1}return io.writable};function _d(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return e.searchParams.forEach((r,i)=>{t[i]=r}),t}var bd=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-MAQGHWLI.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},pS=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",hi=async(n,t,e)=>{await n.setItem(t,JSON.stringify(e))},rl=async(n,t)=>{let e=await n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},wd=async(n,t)=>{await n.removeItem(t)};function FR(n){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="",r,i,o,s,a,l,d,p=0;for(n=n.replace("-","+").replace("_","/");p<n.length;)s=t.indexOf(n.charAt(p++)),a=t.indexOf(n.charAt(p++)),l=t.indexOf(n.charAt(p++)),d=t.indexOf(n.charAt(p++)),r=s<<2|a>>4,i=(a&15)<<4|l>>2,o=(l&3)<<6|d,e=e+String.fromCharCode(r),l!=64&&i!=0&&(e=e+String.fromCharCode(i)),d!=64&&o!=0&&(e=e+String.fromCharCode(o));return e}var nl=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};nl.promiseConstructor=Promise;function d0(n){let t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=n.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");let r=e[1];return JSON.parse(FR(r))}async function hS(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function mS(n,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{let s=await n(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})()})}function LR(n){return("0"+n.toString(16)).substr(-2)}function oo(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,i="";for(let o=0;o<56;o++)i+=e.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,LR).join("")}async function VR(n){let e=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",e),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}function jR(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function so(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=await VR(n);return jR(e)}var il=class extends Error{constructor(t,e){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e}};function de(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var Ed=class extends il{constructor(t,e){super(t,e),this.name="AuthApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}};function gS(n){return de(n)&&n.name==="AuthApiError"}var vs=class extends il{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},Br=class extends il{constructor(t,e,r){super(t),this.name=e,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}},$r=class extends Br{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}},ys=class extends Br{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}},ao=class extends Br{constructor(t){super(t,"AuthInvalidCredentialsError",400)}},lo=class extends Br{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},ol=class extends Br{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},_s=class extends Br{constructor(t,e){super(t,"AuthRetryableFetchError",e)}};function Sd(n){return de(n)&&n.name==="AuthRetryableFetchError"}var Cd=class extends Br{constructor(t,e,r){super(t,"AuthWeakPasswordError",e),this.reasons=r}};var UR=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},bs=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),BR=[502,503,504];async function vS(n){if(!pS(n))throw new _s(bs(n),0);if(BR.includes(n.status))throw new _s(bs(n),n.status);let t;try{t=await n.json()}catch(e){throw new vs(bs(e),e)}throw typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)?new Cd(bs(t),n.status,t.weak_password.reasons):new Ed(bs(t),n.status||500)}var $R=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),e))};async function pe(n,t,e,r){var i;let o=Object.assign({},r?.headers);r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await HR(n,t,e+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function HR(n,t,e,r,i,o){let s=$R(t,r,i,o),a;try{a=await n(e,s)}catch(l){throw console.error(l),new _s(bs(l),0)}if(a.ok||await vS(a),r?.noResolveJson)return a;try{return await a.json()}catch(l){await vS(l)}}function mi(n){var t;let e=null;zR(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=dS(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function f0(n){let t=mi(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function rr(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function yS(n){return{data:n,error:null}}function _S(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o}=n,s=UR(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},s);return{data:{properties:a,user:l},error:null}}function bS(n){return n}function zR(n){return n.access_token&&n.refresh_token&&n.expires_in}var qR=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},ws=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=bd(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,e="global"){try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,e={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:rr})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{let{options:e}=t,r=qR(t,["options"]),i=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:_S,redirectTo:e?.redirectTo})}catch(e){if(de(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:rr})}catch(e){if(de(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,r,i,o,s,a,l;try{let d={nextPage:null,lastPage:0,total:0},p=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:bS});if(p.error)throw p.error;let h=await p.json(),y=(s=p.headers.get("x-total-count"))!==null&&s!==void 0?s:0,g=(l=(a=p.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(b=>{let E=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(b.split(";")[1].split("=")[1]);d[`${S}Page`]=E}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(de(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:rr})}catch(e){if(de(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:rr})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,e=!1){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:rr})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{let{data:e,error:r}=await pe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:r}}catch(e){if(de(e))return{data:null,error:e};throw e}}async _deleteFactor(t){try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(de(e))return{data:null,error:e};throw e}}};var Dd="2.61.0";var wS="http://localhost:9999",ES="supabase.auth.token";var CS={"X-Client-Info":`gotrue-js/${Dd}`},p0=10;var SS={getItem:n=>pi()?globalThis.localStorage.getItem(n):null,setItem:(n,t)=>{pi()&&globalThis.localStorage.setItem(n,t)},removeItem:n=>{pi()&&globalThis.localStorage.removeItem(n)}};function h0(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}function DS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var GR={debug:!!(globalThis&&pi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},xd=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}};DS();var WR={url:wS,storageKey:ES,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:CS,flowType:"implicit",debug:!1},sl=30*1e3,xS=3;async function QR(n,t,e){return await e()}var m0=(()=>{class n{constructor(e){var r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&$n()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let i=Object.assign(Object.assign({},WR),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ws({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=bd(i.fetch),this.lock=i.lock||QR,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:pi()?this.storage=SS:(this.memoryStorage={},this.storage=h0(this.memoryStorage)):(this.memoryStorage={},this.storage=h0(this.memoryStorage)),$n()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Dd}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{let e=$n()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:r,error:i}=await this._getSessionFromURL(e);if(i)return this._debug("#_initialize()","error detecting session from URL",i),i?.message==="Identity is already linked"||i?.message==="Identity is already linked to another user"?{error:i}:(await this._removeSession(),{error:i});let{session:o,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return de(e)?{error:e}:{error:new vs("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var r,i,o;try{await this._removeSession();let s;if("email"in e){let{email:h,password:y,options:g}=e,b=null,E=null;if(this.flowType==="pkce"){let S=oo();await hi(this.storage,`${this.storageKey}-code-verifier`,S),b=await so(S),E=S===b?"plain":"s256"}s=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g?.emailRedirectTo,body:{email:h,password:y,data:(r=g?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:b,code_challenge_method:E},xform:mi})}else if("phone"in e){let{phone:h,password:y,options:g}=e;s=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:y,data:(i=g?.data)!==null&&i!==void 0?i:{},channel:(o=g?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:mi})}else throw new ao("You must provide either an email or phone number and a password");let{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};let d=a.session,p=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let r;if("email"in e){let{email:s,password:a,options:l}=e;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:f0})}else if("phone"in e){let{phone:s,password:a,options:l}=e;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:f0})}else throw new ao("You must provide either an email or phone number and a password");let{data:i,error:o}=r;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new ys}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(de(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,i,o,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){let r=await rl(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/"),{data:s,error:a}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:mi});return await wd(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new ys}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=e,l=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:mi}),{data:d,error:p}=l;return p?{data:{user:null,session:null},error:p}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new ys}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:p})}catch(r){if(de(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,i,o,s,a;try{if(await this._removeSession(),"email"in e){let{email:l,options:d}=e,p=null,h=null;if(this.flowType==="pkce"){let g=oo();await hi(this.storage,`${this.storageKey}-code-verifier`,g),p=await so(g),h=g===p?"plain":"s256"}let{error:y}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=d?.data)!==null&&r!==void 0?r:{},create_user:(i=d?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:p,code_challenge_method:h},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){let{phone:l,options:d}=e,{data:p,error:h}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=d?.data)!==null&&o!==void 0?o:{},create_user:(s=d?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(a=d?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:h}}throw new ao("You must provide either an email or phone number.")}catch(l){if(de(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,i;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let o,s;"options"in e&&(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:l}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:mi});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let d=a.session,p=a.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(o){if(de(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var r,i,o;try{await this._removeSession();let s=null,a=null;if(this.flowType==="pkce"){let l=oo();await hi(this.storage,`${this.storageKey}-code-verifier`,l),s=await so(l),a=l===s?"plain":"s256"}return await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:yS})}catch(s){if(de(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new $r;let{error:o}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(de(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();let r=`${this.url}/resend`;if("email"in e){let{email:i,type:o,options:s}=e,{error:a}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:i,type:o,options:s}=e,{data:a,error:l}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new ao("You must provide either an email or phone number and a type")}catch(r){if(de(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=await rl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let i=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i)return{data:{session:e},error:null};let{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:rr}):await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:rr})})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async i=>{let{data:o,error:s}=i;if(s)throw s;if(!o.session)throw new $r;let a=o.session,l=null,d=null;if(this.flowType==="pkce"&&e.email!=null){let y=oo();await hi(this.storage,`${this.storageKey}-code-verifier`,y),l=await so(y),d=y===l?"plain":"s256"}let{data:p,error:h}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:d}),jwt:a.access_token,xform:rr});if(h)throw h;return a.user=p.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(i){if(de(i))return{data:{user:null},error:i};throw i}}_decodeJWT(e){return d0(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new $r;let r=Date.now()/1e3,i=r,o=!0,s=null,a=d0(e.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{session:l,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};s=l}else{let{data:l,error:d}=await this._getUser(e.access_token);if(d)throw d;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(de(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var i;if(!e){let{data:a,error:l}=r;if(l)throw l;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new $r;let{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(de(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e){try{if(!$n())throw new lo("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new lo("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new ol("Not a valid PKCE flow url.");let r=_d(window.location.href);if(e){if(!r.code)throw new ol("No code detected.");let{data:V,error:H}=await this._exchangeCodeForSession(r.code);if(H)throw H;let W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:V.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new lo(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:l,expires_at:d,token_type:p}=r;if(!s||!l||!a||!p)throw new lo("No session defined in URL");let h=Math.round(Date.now()/1e3),y=parseInt(l),g=h+y;d&&(g=parseInt(d));let b=g-h;b*1e3<=sl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);let E=g-y;h-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,g,h):h-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",E,g,h);let{data:S,error:A}=await this._getUser(s);if(A)throw A;let L={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:y,expires_at:g,refresh_token:a,token_type:p,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:L,redirectType:r.type},error:null}}catch(r){if(de(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){let e=_d(window.location.href);return!!($n()&&(e.access_token||e.error_description))}async _isPKCEFlow(){let e=_d(window.location.href),r=await rl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return{error:s};let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:l}=await this.admin.signOut(a,e);if(l&&!(gS(l)&&(l.status===404||l.status===401)))return{error:l}}return e!=="others"&&(await this._removeSession(),await wd(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){let r=fS(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async r=>{var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let i=null,o=null;if(this.flowType==="pkce"){let s=oo();await hi(this.storage,`${this.storageKey}-code-verifier`,`${s}/PASSWORD_RECOVERY`),i=await so(s),o=s===i?"plain":"s256"}try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(de(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{let{data:i,error:o}=await this._useSession(async s=>{var a,l,d,p,h;let{data:y,error:g}=s;if(g)throw g;let b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",b,{headers:this.headers,jwt:(h=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&h!==void 0?h:void 0})});if(o)throw o;return $n()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(de(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await mS(async o=>(await hS(o*200),this._debug(r,"refreshing attempt",o),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:mi})),(o,s,a)=>a&&a.error&&Sd(a.error)&&Date.now()+(o+1)*200-i<sl)}catch(i){if(this._debug(r,"error",i),de(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),$n()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let i=await rl(this.storage,this.storageKey);if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}let o=Math.round(Date.now()/1e3),s=((e=i.expires_at)!==null&&e!==void 0?e:1/0)<o+p0;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${p0}s`),s){if(this.autoRefreshToken&&i.refresh_token){let{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),Sd(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,i;if(!e)throw new $r;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new nl;let{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new $r;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(o,"error",s),de(s)){let a={session:null,error:s};return Sd(s)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,r,i=!0){let o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(d){s.push(d)}});if(await Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await hi(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await wd(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&$n()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),sl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-e)/sl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${sl}ms, refresh threshold is ${xS} ticks`),o<=xS&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof xd)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$n()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,i){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let s=oo();await hi(this.storage,`${this.storageKey}-code-verifier`,s);let a=await so(s),l=s===a?"plain":"s256";this._debug("PKCE","code verifier",`${s.substring(0,5)}...`,"code challenge",a,"method",l);let d=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});o.push(d.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?{data:null,error:s}:await pe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)return{data:null,error:a};let{data:l,error:d}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return d?{data:null,error:d}:(!((o=l?.totp)===null||o===void 0)&&o.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return{data:null,error:s};let{data:a,error:l}=await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(de(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?{data:null,error:s}:await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(de(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){let{data:r,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){let{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};let i=e?.factors||[],o=i.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:i,totp:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,i;let{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let a=this._decodeJWT(o.access_token),l=null;a.aal&&(l=a.aal);let d=l;((i=(r=o.user.factors)===null||r===void 0?void 0:r.filter(y=>y.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");let h=a.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:h},error:null}}))}}return n.nextInstanceID=0,n})();var KR=m0,g0=KR;var Id=class extends g0{constructor(t){super(t)}};var ZR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(h){s(h)}}function l(p){try{d(r.throw(p))}catch(h){s(h)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})},Td=class{constructor(t,e,r){var i,o,s;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let a=cS(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;let l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:oS,realtime:aS,auth:Object.assign(Object.assign({},sS),{storageKey:l}),global:iS},p=uS(r??{},d);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(h,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=p.auth)!==null&&s!==void 0?s:{},this.headers,p.global.fetch),this.fetch=lS(e,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new qC(`${a}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new Ha(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new el(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return ZR(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,storageKey:o,flowType:s,lock:a,debug:l},d,p){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Id({url:this.authUrl,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,flowType:s,lock:a,debug:l,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Ja(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var IS=(n,t,e)=>new Td(n,t,e);var v0={API_URL:"https://jsgltiaidlacvchyjjha.supabase.co",anon_key:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpzZ2x0aWFpZGxhY3ZjaHlqamhhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2NjIzNDIsImV4cCI6MjA1NTIzODM0Mn0.bPtRMhXapLzUgPEIf6GoW9r52umh0F1YZhG1bfLyb0s",supabase_LocalStorage_key:"sb-jsgltiaidlacvchyjjha-auth-token"};var Ce=class n{constructor(t){this.platformId=t;this.supabase=IS(v0.API_URL,v0.anon_key,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),this.setupAuthStateSignalSync()}supabase;USER_PROFILE_KEY="userProfile";user=lt(null);currentUsername=lt(null);loginStatus=lt(null);GetClient(){return this.supabase}setupAuthStateSignalSync(){Dn(this.platformId)&&(this.supabase.auth.getSession().then(({data:t})=>{this.updateSignalsFromSession(t.session)}),this.supabase.auth.onAuthStateChange((t,e)=>{this.updateSignalsFromSession(e)}))}updateSignalsFromSession(t){if(t&&t.user){this.user.set(t.user);let e=t.user?.identities?.[0]?.identity_data?.firstname||null;this.currentUsername.set(e),this.loginStatus.set(!0)}else this.user.set(null),this.currentUsername.set(null),this.loginStatus.set(!1)}supaScream(){return"SupaScream"}static \u0275fac=function(e){return new(e||n)(F(Et))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var Md=class n{constructor(t){this.supabaseService=t;this.userFirstName=this.supabaseService.currentUsername()}userFirstName;static \u0275fac=function(e){return new(e||n)(D(Ce))};static \u0275cmp=$({type:n,selectors:[["app-landing-page"]],decls:66,vars:4,consts:[[1,"container","mt-4"],[1,"mb-4","text-center"],[1,"row","g-4","mb-5"],[1,"col-md-6"],[1,"card","h-100","shadow-sm"],[1,"card-body","d-flex","align-items-center"],[1,"ms-4","me-4","step-icon",2,"--step-color","#2563eb"],[1,"flex-grow-1"],[1,"text-uppercase","fw-bold","text-secondary",2,"letter-spacing","2px"],[1,"fw-semibold","mb-1"],[1,"mb-3","text-secondary"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#2563eb","color","#fff",3,"routerLink"],[1,"ms-4","me-4","step-icon",2,"--step-color","#15803d"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#15803d","color","#fff",3,"routerLink"],[1,"ms-4","me-4","step-icon",2,"--step-color","#b45309"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#b45309","color","#fff",3,"routerLink"],[1,"ms-4","me-4","step-icon",2,"--step-color","#6d28d9"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#6d28d9","color","#fff",3,"routerLink"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"h2",1),f(2,"Begin Your Trading Transformation"),c(),u(3,"h2",1),f(4,"Your Professional Workflow"),c(),u(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"mat-icon"),f(11,"check_circle"),c()(),u(12,"div",7)(13,"div",8),f(14,"Step 1 "),c(),u(15,"h4",9),f(16,"Daily Emotional Check-in"),c(),u(17,"p",10),f(18,"Understand your emotional state before making trading decisions."),c(),u(19,"a",11),f(20,"Begin Assessment"),c()()()()(),u(21,"div",3)(22,"div",4)(23,"div",5)(24,"div",12)(25,"mat-icon"),f(26,"trending_up"),c()(),u(27,"div",7)(28,"div",8),f(29,"Step 2 "),c(),u(30,"h4",9),f(31,"Plan Your Trades"),c(),u(32,"p",10),f(33,"Document your trading plan before executing any trades."),c(),u(34,"a",13),f(35,"Create Trading Plan"),c()()()()(),u(36,"div",3)(37,"div",4)(38,"div",5)(39,"div",14)(40,"mat-icon"),f(41,"candlestick_chart"),c()(),u(42,"div",7)(43,"div",8),f(44,"Step 3 "),c(),u(45,"h4",9),f(46,"Update your Trades"),c(),u(47,"p",10),f(48,"Record results and analyze your trading performance."),c(),u(49,"a",15),f(50,"Manage Positions"),c()()()()(),u(51,"div",3)(52,"div",4)(53,"div",5)(54,"div",16)(55,"mat-icon"),f(56,"psychology"),c()(),u(57,"div",7)(58,"div",8),f(59,"Step 4 "),c(),u(60,"h4",9),f(61,"Reflection & Meditation"),c(),u(62,"p",10),f(63,"Clear your mind with mindfulness practices."),c(),u(64,"a",17),f(65,"Begin Session"),c()()()()()()()),e&2&&(m(19),v("routerLink","/emotions"),m(15),v("routerLink","/tradejournal"),m(15),v("routerLink","/tradejournal"),m(15),v("routerLink","/meditationhub"))},dependencies:[Ue,q,rd,nd],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:8px}.card-body[_ngcontent-%COMP%]{padding-left:0}.card-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.75rem}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}.btn-custom[_ngcontent-%COMP%]{border-radius:20px;font-weight:600}.step-icon[_ngcontent-%COMP%]{width:64px;height:64px;background:var(--step-color, --primary-btn-color);border-radius:16px;display:flex;align-items:center;justify-content:center;flex-shrink:0;box-shadow:0 2px 8px #0000000a}.step-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:36px;width:36px;height:36px;line-height:36px;display:flex;align-items:center;justify-content:center}.card-body.d-flex.align-items-center[_ngcontent-%COMP%]{gap:1.5rem}@media (max-width: 576px){.card-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.btn-custom[_ngcontent-%COMP%]{padding:.5rem 1rem}}"]})};var ft=class n{constructor(t,e){this.supabaseService=t;this.router=e}canActivate(t,e){return this.supabaseService.loginStatus()?!0:this.router.createUrlTree([""],{queryParams:{returnUrl:e.url}})}static \u0275fac=function(e){return new(e||n)(F(Ce),F(gt))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var al=class n{constructor(t,e){this.supabaseService=t;this.router=e}canActivate(t,e){return this.supabaseService.loginStatus()?this.router.createUrlTree(["/home"]):!0}static \u0275fac=function(e){return new(e||n)(F(Ce),F(gt))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var FS=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||n)(D(Cn),D(Ze))};static \u0275dir=me({type:n})}return n})(),uo=(()=>{class n extends FS{static \u0275fac=(()=>{let e;return function(i){return(e||(e=En(n)))(i||n)}})();static \u0275dir=me({type:n,features:[ct]})}return n})(),or=new j(""),YR={provide:or,useExisting:wt(()=>Hr),multi:!0},Hr=(()=>{class n extends uo{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=En(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&x("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[St([YR]),ct]})}return n})(),JR={provide:or,useExisting:wt(()=>he),multi:!0};function XR(){let n=Rr()?Rr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var eF=new j(""),he=(()=>{class n extends FS{_compositionMode;_composing=!1;constructor(e,r,i){super(e,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!XR())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||n)(D(Cn),D(Ze),D(eF,8))};static \u0275dir=me({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&x("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[St([JR]),ct]})}return n})();function gi(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function LS(n){return n!=null&&typeof n.length=="number"}var xs=new j(""),Ud=new j(""),tF=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,R=class{static min(t){return VS(t)}static max(t){return jS(t)}static required(t){return nF(t)}static requiredTrue(t){return rF(t)}static email(t){return iF(t)}static minLength(t){return oF(t)}static maxLength(t){return sF(t)}static pattern(t){return aF(t)}static nullValidator(t){return kd(t)}static compose(t){return qS(t)}static composeAsync(t){return WS(t)}};function VS(n){return t=>{if(gi(t.value)||gi(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function jS(n){return t=>{if(gi(t.value)||gi(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function nF(n){return gi(n.value)?{required:!0}:null}function rF(n){return n.value===!0?null:{required:!0}}function iF(n){return gi(n.value)||tF.test(n.value)?null:{email:!0}}function oF(n){return t=>gi(t.value)||!LS(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function sF(n){return t=>LS(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function aF(n){if(!n)return kd;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(gi(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function kd(n){return null}function US(n){return n!=null}function BS(n){return qi(n)?ze(n):n}function $S(n){let t={};return n.forEach(e=>{t=e!=null?N(N({},t),e):t}),Object.keys(t).length===0?null:t}function HS(n,t){return t.map(e=>e(n))}function lF(n){return!n.validate}function zS(n){return n.map(t=>lF(t)?t:e=>t.validate(e))}function qS(n){if(!n)return null;let t=n.filter(US);return t.length==0?null:function(e){return $S(HS(e,t))}}function GS(n){return n!=null?qS(zS(n)):null}function WS(n){if(!n)return null;let t=n.filter(US);return t.length==0?null:function(e){let r=HS(e,t).map(BS);return $s(r).pipe(Y($S))}}function QS(n){return n!=null?WS(zS(n)):null}function TS(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function KS(n){return n._rawValidators}function ZS(n){return n._rawAsyncValidators}function y0(n){return n?Array.isArray(n)?n:[n]:[]}function Nd(n,t){return Array.isArray(n)?n.includes(t):n===t}function MS(n,t){let e=y0(t);return y0(n).forEach(i=>{Nd(e,i)||e.push(i)}),e}function AS(n,t){return y0(t).filter(e=>!Nd(n,e))}var Pd=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=GS(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=QS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},co=class extends Pd{name;get formDirective(){return null}get path(){return null}},ir=class extends Pd{_parent=null;name=null;valueAccessor=null},Od=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},cF={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},a7=z(N({},cF),{"[class.ng-submitted]":"isSubmitted"}),ve=(()=>{class n extends Od{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(D(ir,2))};static \u0275dir=me({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Pt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ct]})}return n})(),Ne=(()=>{class n extends Od{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(D(co,10))};static \u0275dir=me({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Pt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[ct]})}return n})();var ll="VALID",Ad="INVALID",Es="PENDING",cl="DISABLED",vi=class{},Rd=class extends vi{value;source;constructor(t,e){super(),this.value=t,this.source=e}},ul=class extends vi{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},dl=class extends vi{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Cs=class extends vi{status;source;constructor(t,e){super(),this.status=t,this.source=e}},_0=class extends vi{source;constructor(t){super(),this.source=t}},b0=class extends vi{source;constructor(t){super(),this.source=t}};function C0(n){return(Bd(n)?n.validators:n)||null}function uF(n){return Array.isArray(n)?GS(n):n||null}function S0(n,t){return(Bd(t)?t.asyncValidators:n)||null}function dF(n){return Array.isArray(n)?QS(n):n||null}function Bd(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function YS(n,t,e){let r=n.controls;if(!(t?Object.keys(r):r).length)throw new k(1e3,"");if(!r[e])throw new k(1001,"")}function JS(n,t,e){n._forEachChild((r,i)=>{if(e[i]===void 0)throw new k(1002,"")})}var Ss=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return kr(this.statusReactive)}set status(t){kr(()=>this.statusReactive.set(t))}_status=jn(()=>this.statusReactive());statusReactive=lt(void 0);get valid(){return this.status===ll}get invalid(){return this.status===Ad}get pending(){return this.status==Es}get disabled(){return this.status===cl}get enabled(){return this.status!==cl}errors;get pristine(){return kr(this.pristineReactive)}set pristine(t){kr(()=>this.pristineReactive.set(t))}_pristine=jn(()=>this.pristineReactive());pristineReactive=lt(!0);get dirty(){return!this.pristine}get touched(){return kr(this.touchedReactive)}set touched(t){kr(()=>this.touchedReactive.set(t))}_touched=jn(()=>this.touchedReactive());touchedReactive=lt(!1);get untouched(){return!this.touched}_events=new Fe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(MS(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(MS(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(AS(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(AS(t,this._rawAsyncValidators))}hasValidator(t){return Nd(this._rawValidators,t)}hasAsyncValidator(t){return Nd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(z(N({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new dl(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new dl(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(z(N({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new ul(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new ul(!0,r))}markAsPending(t={}){this.status=Es;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Cs(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(z(N({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=cl,this.errors=null,this._forEachChild(i=>{i.disable(z(N({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Rd(this.value,r)),this._events.next(new Cs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(z(N({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ll,this._forEachChild(r=>{r.enable(z(N({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(z(N({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ll||this.status===Es)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Rd(this.value,e)),this._events.next(new Cs(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(z(N({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cl:ll}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Es,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let r=BS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Cs(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new _e,this.statusChanges=new _e}_calculateStatus(){return this._allControlsDisabled()?cl:this.errors?Ad:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Es)?Es:this._anyControlsHaveStatus(Ad)?Ad:ll}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new ul(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new dl(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Bd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=uF(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=dF(this._rawAsyncValidators)}},Ds=class extends Ss{constructor(t,e,r){super(C0(e),S0(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){JS(this,!0,t),Object.keys(t).forEach(r=>{YS(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var w0=class extends Ds{};var Is=new j("",{providedIn:"root",factory:()=>pl}),pl="always";function XS(n,t){return[...t.path,n]}function Fd(n,t,e=pl){D0(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),pF(n,t),mF(n,t),hF(n,t),fF(n,t)}function Ld(n,t,e=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),jd(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Vd(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function fF(n,t){if(t.valueAccessor.setDisabledState){let e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function D0(n,t){let e=KS(n);t.validator!==null?n.setValidators(TS(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let r=ZS(n);t.asyncValidator!==null?n.setAsyncValidators(TS(r,t.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Vd(t._rawValidators,i),Vd(t._rawAsyncValidators,i)}function jd(n,t){let e=!1;if(n!==null){if(t.validator!==null){let i=KS(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let i=ZS(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Vd(t._rawValidators,r),Vd(t._rawAsyncValidators,r),e}function pF(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&e1(n,t)})}function hF(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&e1(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function e1(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function mF(n,t){let e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function gF(n,t){n==null,D0(n,t)}function vF(n,t){return jd(n,t)}function x0(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function yF(n){return Object.getPrototypeOf(n.constructor)===uo}function _F(n,t){n._syncPendingControls(),t.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function I0(n,t){if(!t)return null;Array.isArray(t);let e,r,i;return t.forEach(o=>{o.constructor===he?e=o:yF(o)?r=o:i=o}),i||r||e||null}function bF(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function kS(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function NS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var fl=class extends Ss{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,r){super(C0(e),S0(r,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bd(e)&&(e.nonNullable||e.initialValueIsDefault)&&(NS(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){kS(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){kS(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){NS(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var wF=n=>n instanceof fl;var EF={provide:ir,useExisting:wt(()=>zr)},PS=Promise.resolve(),zr=(()=>{class n extends ir{_changeDetectorRef;callSetDisabledState;control=new fl;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new _e;constructor(e,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=I0(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),x0(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Fd(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){PS.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let r=e.isDisabled.currentValue,i=r!==0&&Vn(r);PS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?XS(e,this._parent):[e]}static \u0275fac=function(r){return new(r||n)(D(co,9),D(xs,10),D(Ud,10),D(or,10),D(re,8),D(Is,8))};static \u0275dir=me({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[St([EF]),ct,Pn]})}return n})(),Wt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),CF={provide:or,useExisting:wt(()=>Hn),multi:!0},Hn=(()=>{class n extends uo{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=En(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&x("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[St([CF]),ct]})}return n})(),SF={provide:or,useExisting:wt(()=>mn),multi:!0};var DF=(()=>{class n{_accessors=[];add(e,r){this._accessors.push([e,r])}remove(e){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===e){this._accessors.splice(r,1);return}}select(e){this._accessors.forEach(r=>{this._isSameGroup(r,e)&&r[1]!==e&&r[1].fireUncheck(e.value)})}_isSameGroup(e,r){return e[0].control?e[0]._parent===r._control._parent&&e[1].name===r.name:!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mn=(()=>{class n extends uo{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=M(Is,{optional:!0})??pl;constructor(e,r,i,o){super(e,r),this._registry=i,this._injector=o}ngOnInit(){this._control=this._injector.get(ir),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}setDisabledState(e){(this.setDisabledStateFired||e||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",e),this.setDisabledStateFired=!0}fireUncheck(e){this.writeValue(e)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||n)(D(Cn),D(Ze),D(DF),D(ht))};static \u0275dir=me({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&x("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[St([SF]),ct]})}return n})(),xF={provide:or,useExisting:wt(()=>T0),multi:!0},T0=(()=>{class n extends uo{writeValue(e){this.setProperty("value",parseFloat(e))}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=En(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,i){r&1&&x("change",function(s){return i.onChange(s.target.value)})("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[St([xF]),ct]})}return n})(),M0=new j(""),IF={provide:ir,useExisting:wt(()=>A0)},A0=(()=>{class n extends ir{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(e){}model;update=new _e;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(e),this._setAsyncValidators(r),this.valueAccessor=I0(this,i)}ngOnChanges(e){if(this._isControlChanged(e)){let r=e.form.previousValue;r&&Ld(r,this,!1),Fd(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}x0(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Ld(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(D(xs,10),D(Ud,10),D(or,10),D(M0,8),D(Is,8))};static \u0275dir=me({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[St([IF]),ct,Pn]})}return n})(),TF={provide:co,useExisting:wt(()=>Me)},Me=(()=>{class n extends co{callSetDisabledState;get submitted(){return kr(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=jn(()=>this._submittedReactive());_submittedReactive=lt(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new _e;constructor(e,r,i){super(),this.callSetDisabledState=i,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(jd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let r=this.form.get(e.path);return Fd(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){Ld(e.control||null,e,!1),bF(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this._submittedReactive.set(!0),_F(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new _0(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new b0(this.form))}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,i=this.form.get(e.path);r!==i&&(Ld(r||null,e),wF(i)&&(Fd(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);gF(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&vF(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){D0(this.form,this),this._oldForm&&jd(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(D(xs,10),D(Ud,10),D(Is,8))};static \u0275dir=me({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&x("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[St([TF]),ct,Pn]})}return n})();var MF={provide:ir,useExisting:wt(()=>Oe)},Oe=(()=>{class n extends ir{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new _e;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=I0(this,o)}ngOnChanges(e){this._added||this._setUpControl(),x0(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return XS(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(D(co,13),D(xs,10),D(Ud,10),D(or,10),D(M0,8))};static \u0275dir=me({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[St([MF]),ct,Pn]})}return n})(),AF={provide:or,useExisting:wt(()=>Qt),multi:!0};function t1(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function kF(n){return n.split(":")[0]}var Qt=(()=>{class n extends uo{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let r=this._getOptionId(e),i=t1(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){let r=kF(e);return this._optionMap.has(r)?this._optionMap.get(r):e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=En(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&x("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[St([AF]),ct]})}return n})(),Kt=(()=>{class n{_element;_renderer;_select;id;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(t1(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(D(Ze),D(Cn),D(Qt,9))};static \u0275dir=me({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),NF={provide:or,useExisting:wt(()=>n1),multi:!0};function OS(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function PF(n){return n.split(":")[0]}var n1=(()=>{class n extends uo{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let r;if(Array.isArray(e)){let i=e.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],d=this._getOptionValue(l.value);i.push(d)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let d=this._getOptionValue(l.value);i.push(d)}}}this.value=i,e(i)}}_registerOption(e){let r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){let r=PF(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=En(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&x("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[St([NF]),ct]})}return n})(),Zt=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(OS(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(OS(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(D(Ze),D(Cn),D(n1,9))};static \u0275dir=me({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function r1(n){return typeof n=="number"?n:parseFloat(n)}var i1=(()=>{class n{_validator=kd;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):kd,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,features:[Pn]})}return n})(),OF={provide:xs,useExisting:wt(()=>k0),multi:!0},k0=(()=>{class n extends i1{max;inputName="max";normalizeInput=e=>r1(e);createValidator=e=>jS(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=En(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Jn("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[St([OF]),ct]})}return n})(),RF={provide:xs,useExisting:wt(()=>hl),multi:!0},hl=(()=>{class n extends i1{min;inputName="min";normalizeInput=e=>r1(e);createValidator=e=>VS(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=En(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Jn("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[St([RF]),ct]})}return n})();var o1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=rt({type:n});static \u0275inj=nt({})}return n})(),E0=class extends Ss{constructor(t,e,r){super(C0(e),S0(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){JS(this,!1,t),t.forEach((r,i)=>{YS(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,r)=>r._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function RS(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var xt=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,r=null){let i=this._reduceControls(e),o={};return RS(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Ds(i,o)}record(e,r=null){let i=this._reduceControls(e);return new w0(i,r)}control(e,r,i){let o={};return this.useNonNullable?(RS(r)?o=r:(o.validators=r,o.asyncValidators=i),new fl(e,z(N({},o),{nonNullable:!0}))):new fl(e,r,i)}array(e,r,i){let o=e.map(s=>this._createControl(s));return new E0(o,r,i)}_reduceControls(e){let r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){if(e instanceof fl)return e;if(e instanceof Ss)return e;if(Array.isArray(e)){let r=e[0],i=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(r,i,o)}else return this.control(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var sr=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Is,useValue:e.callSetDisabledState??pl}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=rt({type:n});static \u0275inj=nt({imports:[o1]})}return n})(),be=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:M0,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Is,useValue:e.callSetDisabledState??pl}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=rt({type:n});static \u0275inj=nt({imports:[o1]})}return n})();var yt=[];for(let n=0;n<256;++n)yt.push((n+256).toString(16).slice(1));function s1(n,t=0){return(yt[n[t+0]]+yt[n[t+1]]+yt[n[t+2]]+yt[n[t+3]]+"-"+yt[n[t+4]]+yt[n[t+5]]+"-"+yt[n[t+6]]+yt[n[t+7]]+"-"+yt[n[t+8]]+yt[n[t+9]]+"-"+yt[n[t+10]]+yt[n[t+11]]+yt[n[t+12]]+yt[n[t+13]]+yt[n[t+14]]+yt[n[t+15]]).toLowerCase()}var N0,FF=new Uint8Array(16);function P0(){if(!N0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");N0=crypto.getRandomValues.bind(crypto)}return N0(FF)}var LF=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),O0={randomUUID:LF};function VF(n,t,e){if(O0.randomUUID&&!t&&!n)return O0.randomUUID();n=n||{};let r=n.random??n.rng?.()??P0();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){if(e=e||0,e<0||e+16>t.length)throw new RangeError(`UUID byte range ${e}:${e+15} is out of buffer bounds`);for(let i=0;i<16;++i)t[e+i]=r[i];return t}return s1(r)}var fo=VF;var It=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;ngOnInit(){}async addTradeLog(t,e){let r=this.supabaseService.user();if(!r)throw new Error("User not authenticated");t.userid=r.id;let{data:i,error:o}=await this.supabase.from(e).insert([t]);if(o)throw console.error("Error inserting trade log: ",o),o;return typeof window<"u"&&sessionStorage.setItem(`${e}_refresh`,"yes"),i}async getTradeLogs(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let r=!1,i=null;if(typeof window<"u"){r=sessionStorage.getItem(`${t}_refresh`)==="yes";let a=sessionStorage.getItem(t);if(a)try{i=JSON.parse(a)}catch(l){console.error("Error parsing cached trade logs:",l),i=null}}if(!r&&i)return i;let{data:o,error:s}=await this.supabase.from(t).select("*").eq("userid",e.id);if(s)throw console.error("Error fetching trade logs:",s),s;return typeof window<"u"&&(sessionStorage.setItem(t,JSON.stringify(o)),sessionStorage.removeItem(`${t}_refresh`)),o}async getTradeLogsOfSelectedAccount(t,e){let r=this.supabaseService.user();if(!r)throw new Error("User not authenticated");let i=`${t}_${e}`,o=`${i}_refresh`,s=!1,a=null;if(typeof window<"u"){s=sessionStorage.getItem(o)==="yes";let p=sessionStorage.getItem(i);if(p)try{a=JSON.parse(p)}catch(h){console.error("Error parsing cached trade logs:",h),a=null}}if(!s&&a)return a;let{data:l,error:d}=await this.supabase.from(t).select("*").eq("userid",r.id).eq("trade_account_id",e);if(d)throw console.error("Error fetching trade logs:",d),d;return typeof window<"u"&&(sessionStorage.setItem(i,JSON.stringify(l)),sessionStorage.removeItem(o)),l}async addTradeLogOfSelectedAccount(t,e,r){let i=this.supabaseService.user();if(!i)throw new Error("User not authenticated");t.userid=i.id;let{data:o,error:s}=await this.supabase.from(e).insert([t]);if(s)throw console.error("Error inserting trade log: ",s),s;return typeof window<"u"&&sessionStorage.setItem(`${e}_${r}_refresh`,"yes"),o}async updateTradeLogOfSelectedAccount(t,e,r){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:o,error:s}=await this.supabase.from(e).update(t).eq("tradeid",t.tradeid);if(s)throw console.error("Error updating trade log: ",s),s;return typeof window<"u"&&sessionStorage.setItem(`${e}_${r}_refresh`,"yes"),o}async deleteTradeLogOfSelectedAccount(t,e,r){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:o,error:s}=await this.supabase.from(e).delete().eq("tradeid",t);if(s)throw console.error("Error deleting trade log: ",s),s;return typeof window<"u"&&sessionStorage.setItem(`${e}_${r}_refresh`,"yes"),o}async updateTradeLog(t,e){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:i,error:o}=await this.supabase.from(e).update(t).eq("tradeid",t.tradeid);if(o)throw console.error("Error updating trade log: ",o),o;return typeof window<"u"&&sessionStorage.setItem(`${e}_refresh`,"yes"),i}async deleteTradeLog(t,e){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:i,error:o}=await this.supabase.from(e).delete().eq("tradeid",t);if(o)throw console.error("Error deleting trade log: ",o),o;return typeof window<"u"&&sessionStorage.setItem(`${e}_refresh`,"yes"),i}async canLogTrade(){let t=this.supabaseService.user()?.id;if(t===null)throw new Error("User not authenticated");let{data:e,error:r}=await this.supabase.rpc("can_log_trade",{user_id:t});return!r&&e===!0}static \u0275fac=function(e){return new(e||n)(F(Ce))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var jF=(n,t)=>({"text-success":n,"text-danger":t});function UF(n,t){if(n&1&&(u(0,"div",138),_(1,"div",139),c()),n&2){let e=w();m(),Xn("width",e.calculateFormProgress()+"%")}}function BF(n,t){if(n&1&&(u(0,"span",140),f(1),c()),n&2){let e=w();m(),O("",e.calculateFormProgress(),"% Complete")}}function $F(n,t){n&1&&(u(0,"div",141),f(1," Account name is required "),c())}function HF(n,t){n&1&&(u(0,"div",141),f(1," Please select an instrument type "),c())}function zF(n,t){n&1&&(u(0,"div",141),f(1," Trade symbol is required "),c())}function qF(n,t){n&1&&(u(0,"div",141),f(1," Please select trade direction "),c())}function GF(n,t){n&1&&(u(0,"div",141),f(1," Time frame selection is required "),c())}function WF(n,t){n&1&&(u(0,"div",141),f(1," Please select an analysis type "),c())}function QF(n,t){n&1&&(u(0,"div",141),f(1," Strategy name is required "),c())}function KF(n,t){n&1&&(u(0,"div",141),f(1," Order type is required "),c())}function ZF(n,t){n&1&&(u(0,"div",141),f(1," Entry criteria is required (min 10 characters) "),c())}function YF(n,t){n&1&&(u(0,"div",141),f(1," Exit strategy is required (min 10 characters) "),c())}function JF(n,t){n&1&&(u(0,"div",141),f(1," Valid account balance is required "),c())}function XF(n,t){n&1&&(u(0,"div",141),f(1," Position size is required "),c())}function e2(n,t){n&1&&(u(0,"div",141),f(1," Valid entry price is required "),c())}function t2(n,t){n&1&&(u(0,"div",141),f(1," Entry date/time is required "),c())}function n2(n,t){n&1&&(u(0,"div",141),f(1," Stop loss price is required "),c())}function r2(n,t){n&1&&(u(0,"div",141),f(1," Take profit price is required "),c())}function i2(n,t){n&1&&(u(0,"div",141),f(1," Risk percentage is required "),c())}function o2(n,t){n&1&&(u(0,"div",142),_(1,"i",143),f(2," Risk exceeds recommended 2% "),c())}function s2(n,t){n&1&&(u(0,"div",141),f(1," Estimated reward is required "),c())}function a2(n,t){n&1&&(u(0,"div",141),f(1," Please select your emotional state "),c())}function l2(n,t){n&1&&(u(0,"div",142),_(1,"i",143),f(2," Consider if this emotional state might negatively impact your decision making "),c())}function c2(n,t){n&1&&(u(0,"div",144),f(1," Please rate your confidence "),c())}function u2(n,t){n&1&&(u(0,"div",141),f(1," Please identify potential biases (min 5 characters) "),c())}function d2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Trade Setup"),c())}function f2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Strategy Details"),c())}function p2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Risk Management"),c())}function h2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Psychological Analysis"),c())}function m2(n,t){if(n&1&&(u(0,"div",145),_(1,"i",146),u(2,"strong"),f(3,"Please fix the errors highlighted above before submitting."),c(),u(4,"ul",147),C(5,d2,2,0,"li",148)(6,f2,2,0,"li",148)(7,p2,2,0,"li",148)(8,h2,2,0,"li",148),c()()),n&2){let e=w();m(5),v("ngIf",e.hasErrors("tradeSetup")),m(),v("ngIf",e.hasErrors("strategyDetails")),m(),v("ngIf",e.hasErrors("riskManagement")),m(),v("ngIf",e.hasErrors("psychologicalAnalysis"))}}function g2(n,t){if(n&1){let e=Q();u(0,"button",149),x("click",function(){I(e);let i=w();return T(i.onCancel())}),_(1,"i",150),f(2,"Cancel "),c()}}function v2(n,t){if(n&1&&(u(0,"div",151),_(1,"i",152),f(2),c()),n&2){let e=w();m(2),O("",e.message," ")}}function y2(n,t){if(n&1&&(u(0,"div",153),_(1,"i",146),f(2),c()),n&2){let e=w();m(2),O("",e.errorMessage," ")}}var Ts=class n{constructor(t,e,r){this.fb=t;this.supabaseTradeTableService=e;this.cdr=r}tradeLogData=null;formSubmitted=new _e;cancel=new _e;preTradeTableName="pretrade";postTradeTableName="posttrade";preTradeForm;postTradeForm;showEmotionalSection=!1;message="";errorMessage="";formSubmitMarker=!1;ngOnInit(){this.formSubmitMarker=!1,this.createForm()}createForm(){var t=fo();this.preTradeForm=this.fb.group({tradeid:[this.tradeLogData?.tradeid??t],userid:[this.tradeLogData?.userid??"the-db-is-likely-hacked-1234-abcd-5678-efgh"],createdtime:[this.tradeLogData?.createdtime??new Date().toISOString()],accountname:[this.tradeLogData?.accountname??"",R.required],instrumenttype:[this.tradeLogData?.instrumenttype??"",R.required],analysistype:[this.tradeLogData?.analysistype??"",R.required],tradesymbol:[this.tradeLogData?.tradesymbol??"",R.required],tradetype:[this.tradeLogData?.tradetype??"Long",R.required],timeframe:[this.tradeLogData?.timeframe??"Day",R.required],strategyname:[this.tradeLogData?.strategyname??""],typeoforder:[this.tradeLogData?.typeoforder??"",R.required],entrycriteria:[this.tradeLogData?.entrycriteria??""],exitstrategy:[this.tradeLogData?.exitstrategy??""],entrydatetime:[this.tradeLogData?.entrydatetime??""],entryprice:[this.tradeLogData?.entryprice??""],accountbalance:[this.tradeLogData?.accountbalance??null,[R.required,R.min(0)]],positionsize:[this.tradeLogData?.positionsize??"",R.required],estimatedrisk:[this.tradeLogData?.estimatedrisk??null,R.required],estimatedpnl:[this.tradeLogData?.estimatedpnl??null,R.required],estimatedstoploss:[this.tradeLogData?.estimatedstoploss??null,R.required],estimatedtakeprofit:[this.tradeLogData?.estimatedtakeprofit??null,R.required],setupscreenshot:[this.tradeLogData?.setupscreenshot??""],tradeconfidence:[this.tradeLogData?.tradeconfidence??"1"],isopen:!0,emotionalstatebefore:[this.tradeLogData?.emotionalstatebefore??"",R.required],potentialbiases:[this.tradeLogData?.potentialbiases??"",R.required],notes:[this.tradeLogData?.notes??""],updatedtime:[new Date().toISOString()]})}toggleEmotionalSection(){this.showEmotionalSection=!this.showEmotionalSection}onFileSelected(t){let e=t.target;if(!e.files||e.files.length===0)return;let r=e.files[0],i=new FileReader;i.onload=o=>{this.preTradeForm.patchValue({setupscreenshot:o.target.result})},i.readAsDataURL(r)}async onSubmit(){if(this.formSubmitMarker=!0,this.preTradeForm.invalid){this.preTradeForm.markAllAsTouched();return}let t=this.preTradeForm.value;try{this.tradeLogData?await this.supabaseTradeTableService.updateTradeLog(t,this.preTradeTableName):await this.supabaseTradeTableService.addTradeLog(t,this.preTradeTableName),this.message="Trade log updated successfully. Resetting in 5 seconds.",setTimeout(()=>{this.cdr.markForCheck()},0),this.formSubmitted.emit(),this.formSubmitMarker=!1,this.cdr.markForCheck(),setTimeout(()=>{this.preTradeForm.reset(),this.preTradeForm.markAsPristine(),this.message="Form has been reset",this.cdr.markForCheck()},5e3),setTimeout(()=>{this.message="",this.cdr.markForCheck()},3e3)}catch(e){console.error("Error processing trade log:",e),this.errorMessage="Something went wrong.",this.cdr.markForCheck()}}async onDelete(){if(this.tradeLogData)try{await this.supabaseTradeTableService.deleteTradeLog(this.tradeLogData.tradeid,this.preTradeTableName),this.message="Trade log deleted successfully.",this.formSubmitted.emit()}catch(t){console.error("Error deleting trade log:",t),this.errorMessage="Something went wrong while deleting."}finally{this.cdr.markForCheck()}}onCancel(){this.cancel.emit()}calculateFormProgress(){let e=0;return this.preTradeForm.get("accountname")?.valid&&e++,this.preTradeForm.get("instrumenttype")?.valid&&e++,this.preTradeForm.get("tradesymbol")?.valid&&e++,this.preTradeForm.get("tradetype")?.valid&&e++,this.preTradeForm.get("timeframe")?.valid&&e++,this.preTradeForm.get("analysistype")?.valid&&e++,this.preTradeForm.get("strategyname")?.valid&&e++,this.preTradeForm.get("typeoforder")?.valid&&e++,this.preTradeForm.get("entrycriteria")?.valid&&e++,this.preTradeForm.get("exitstrategy")?.valid&&e++,this.preTradeForm.get("accountbalance")?.valid&&e++,this.preTradeForm.get("positionsize")?.valid&&e++,this.preTradeForm.get("entryprice")?.valid&&e++,this.preTradeForm.get("entrydatetime")?.valid&&e++,this.preTradeForm.get("estimatedstoploss")?.valid&&e++,this.preTradeForm.get("estimatedtakeprofit")?.valid&&e++,this.preTradeForm.get("estimatedrisk")?.valid&&e++,this.preTradeForm.get("estimatedpnl")?.valid&&e++,this.preTradeForm.get("emotionalstatebefore")?.valid&&e++,this.preTradeForm.get("tradeConfidence")?.valid&&e++,this.preTradeForm.get("potentialbiases")?.valid&&e++,Math.round(e/18*100)}calculateRiskRewardRatio(){let t=parseFloat(this.preTradeForm.get("estimatedrisk")?.value||"0"),e=parseFloat(this.preTradeForm.get("estimatedpnl")?.value||"0");return t<=0||e<=0?"N/A":`1:${(e/t).toFixed(2)}`}isGoodRiskReward(){let t=parseFloat(this.preTradeForm.get("estimatedrisk")?.value||"0"),e=parseFloat(this.preTradeForm.get("estimatedpnl")?.value||"0");return t<=0||e<=0?!1:e/t>=2}isNegativeEmotionalState(){let t=this.preTradeForm.get("emotionalstatebefore")?.value;return["Anxious","Frustrated","Fearful","Overconfident"].includes(t)}hasErrors(t){switch(t){case"tradeSetup":return this.preTradeForm.get("accountname")?.invalid||this.preTradeForm.get("instrumenttype")?.invalid||this.preTradeForm.get("tradesymbol")?.invalid||this.preTradeForm.get("tradetype")?.invalid||this.preTradeForm.get("timeframe")?.invalid||this.preTradeForm.get("analysistype")?.invalid||!1;case"strategyDetails":return this.preTradeForm.get("strategyname")?.invalid||this.preTradeForm.get("typeoforder")?.invalid||this.preTradeForm.get("entrycriteria")?.invalid||this.preTradeForm.get("exitstrategy")?.invalid||!1;case"riskManagement":return this.preTradeForm.get("accountbalance")?.invalid||this.preTradeForm.get("positionsize")?.invalid||this.preTradeForm.get("entryprice")?.invalid||this.preTradeForm.get("entrydatetime")?.invalid||this.preTradeForm.get("estimatedstoploss")?.invalid||this.preTradeForm.get("estimatedtakeprofit")?.invalid||this.preTradeForm.get("estimatedrisk")?.invalid||this.preTradeForm.get("estimatedpnl")?.invalid||!1;case"psychologicalAnalysis":return this.preTradeForm.get("emotionalstatebefore")?.invalid||this.preTradeForm.get("tradeConfidence")?.invalid||this.preTradeForm.get("potentialbiases")?.invalid||!1;default:return!1}}static \u0275fac=function(e){return new(e||n)(D(xt),D(It),D(re))};static \u0275cmp=$({type:n,selectors:[["app-pre-trade-log"]],inputs:{tradeLogData:"tradeLogData"},outputs:{formSubmitted:"formSubmitted",cancel:"cancel"},decls:332,vars:40,consts:[[1,"container","my-4"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item","text-decoration-none"],["routerLink","/home"],[3,"click"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row","mb-4"],[1,"col-lg-8"],[1,"mb-2"],[1,"text-muted"],[1,"col-lg-4","text-lg-end","d-flex","align-items-center","justify-content-lg-end","mt-3","mt-lg-0"],["class","progress w-100","style","height: 8px;",4,"ngIf"],["class","ms-2 small text-muted",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-1-circle","me-2"],[1,"badge","bg-primary"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-6"],["for","accountname",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-person"],["type","text","id","accountname","formControlName","accountname","placeholder","Enter your account name",1,"form-control"],["class","text-danger mt-1 small",4,"ngIf"],["for","instrumenttype",1,"form-label"],["id","instrumenttype","formControlName","instrumenttype",1,"form-select"],["value","","selected","","disabled",""],["value","Forex"],["value","Stocks"],["value","Futures"],["value","Crypto"],["value","Options"],["value","ETF"],["value","Other"],["for","tradesymbol",1,"form-label"],[1,"bi","bi-tag"],["type","text","id","tradesymbol","formControlName","tradesymbol","placeholder","Enter ticker symbol",1,"form-control"],["for","tradetype",1,"form-label"],["role","group","aria-label","Trade type",1,"btn-group","w-100"],["type","radio","name","tradetype","id","tradetype_long","value","Long","formControlName","tradetype",1,"btn-check"],["for","tradetype_long",1,"btn","btn-outline-success"],["type","radio","name","tradetype","id","tradetype_short","value","Short","formControlName","tradetype",1,"btn-check"],["for","tradetype_short",1,"btn","btn-outline-danger"],["for","timeframe",1,"form-label"],["id","timeframe","formControlName","timeframe",1,"form-select"],["value","Scalp"],["value","Day"],["value","Swing"],["value","Position"],["value","LongTerm"],["for","analysistype",1,"form-label"],["id","analysistype","formControlName","analysistype",1,"form-select"],["value","Technical"],["value","Fundamental"],["value","Both"],["value","Sentiment"],[1,"bi","bi-2-circle","me-2"],["for","strategyname",1,"form-label"],["type","text","id","strategyname","formControlName","strategyname","placeholder","e.g., Breakout, Reversal, Trend Following",1,"form-control"],["for","typeoforder",1,"form-label"],["id","typeoforder","formControlName","typeoforder",1,"form-select"],["value","Market"],["value","Limit"],["value","Stop"],["value","StopLimit"],["value","TrailingStop"],[1,"col-12"],["for","entrycriteria",1,"form-label"],["id","entrycriteria","formControlName","entrycriteria","placeholder","Describe your specific entry conditions (e.g., technical indicators, patterns, fundamental factors)","rows","3",1,"form-control"],[1,"form-text"],["for","exitstrategy",1,"form-label"],["id","exitstrategy","formControlName","exitstrategy","placeholder","Define your profit targets and stop loss levels","rows","3",1,"form-control"],[1,"bi","bi-3-circle","me-2"],["for","accountbalance",1,"form-label"],["type","number","step","0.01","min","0","id","accountbalance","formControlName","accountbalance","placeholder","Current account value",1,"form-control"],["for","positionsize",1,"form-label"],["type","text","id","positionsize","formControlName","positionsize","placeholder","Units/Contracts/Shares",1,"form-control"],["type","button","data-bs-toggle","tooltip","title","Calculate based on risk",1,"btn","btn-outline-secondary"],["for","entryprice",1,"form-label"],["type","number","id","entryprice","formControlName","entryprice","step","0.01","min","0","placeholder","Planned entry price",1,"form-control"],["for","entrydatetime",1,"form-label"],["type","datetime-local","id","entrydatetime","formControlName","entrydatetime",1,"form-control"],["for","estimatedstoploss",1,"form-label"],["type","number","step","0.01","min","0","id","estimatedstoploss","formControlName","estimatedstoploss","placeholder","Stop loss price level",1,"form-control"],["for","estimatedtakeprofit",1,"form-label"],["type","number","step","0.01","min","0","id","estimatedtakeprofit","formControlName","estimatedtakeprofit","placeholder","Target price level",1,"form-control"],[1,"mb-3"],[1,"col-md-4"],["for","estimatedrisk",1,"form-label"],["type","number","step","0.01","min","0","max","100","id","estimatedrisk","formControlName","estimatedrisk","placeholder","1-2% recommended",1,"form-control"],["class","text-warning mt-1 small",4,"ngIf"],["for","estimatedpnl",1,"form-label"],["type","number","step","0.01","min","0","id","estimatedpnl","formControlName","estimatedpnl","placeholder","Expected % gain",1,"form-control"],[1,"form-label"],["type","text","readonly","",1,"form-control","bg-light",3,"value"],[1,"form-text",3,"ngClass"],[1,"bi","bi-5-circle","me-2"],["for","emotionalstatebefore",1,"form-label"],["id","emotionalstatebefore","formControlName","emotionalstatebefore",1,"form-select"],["value","Calm"],["value","Excited"],["value","Anxious"],["value","Frustrated"],["value","Overconfident"],["value","Fearful"],["value","Neutral"],[1,"form-label","d-block"],["role","group",1,"btn-group","w-100"],["type","radio","formControlName","tradeconfidence","id","confidence1","value","1",1,"btn-check"],["for","confidence1",1,"btn","btn-outline-danger"],["type","radio","formControlName","tradeconfidence","id","confidence2","value","2",1,"btn-check"],["for","confidence2",1,"btn","btn-outline-warning"],["type","radio","formControlName","tradeconfidence","id","confidence3","value","3",1,"btn-check"],["for","confidence3",1,"btn","btn-outline-secondary"],["type","radio","formControlName","tradeconfidence","id","confidence4","value","4",1,"btn-check"],["for","confidence4",1,"btn","btn-outline-primary"],["type","radio","formControlName","tradeconfidence","id","confidence5","value","5",1,"btn-check"],["for","confidence5",1,"btn","btn-outline-success"],[1,"form-text","text-center","mt-1"],["class","text-danger mt-1 small text-center",4,"ngIf"],["for","potentialbiases",1,"form-label"],["id","potentialbiases","formControlName","potentialbiases","placeholder","What biases might affect your decision? (e.g., revenge trading, FOMO, overconfidence)","rows","3",1,"form-control"],[1,"bi","bi-6-circle","me-2"],[1,"badge","bg-secondary"],["for","notes",1,"form-label"],["id","notes","formControlName","notes","placeholder","Any additional information or context for this trade","rows","3",1,"form-control"],["class","alert alert-danger mb-3",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-success"],[1,"bi","bi-check-circle","me-1"],["class","alert alert-success mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"progress","w-100",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success"],[1,"ms-2","small","text-muted"],[1,"text-danger","mt-1","small"],[1,"text-warning","mt-1","small"],[1,"bi","bi-exclamation-triangle"],[1,"text-danger","mt-1","small","text-center"],[1,"alert","alert-danger","mb-3"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"mb-0","mt-2"],[4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-x-circle","me-1"],[1,"alert","alert-success","mt-3"],[1,"bi","bi-check-circle-fill","me-2"],[1,"alert","alert-danger","mt-3"]],template:function(e,r){if(e&1&&(u(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),c()(),u(6,"li",3)(7,"a",5),x("click",function(){return r.onCancel()}),f(8,"Pre-Trade Logs"),c()(),u(9,"li",6),f(10,"Pre-Trading Journal"),c()()(),u(11,"div",7)(12,"div",8)(13,"h2",9),f(14),c(),u(15,"p",10),f(16,"Document your strategy before entering positions to maintain discipline and clarity"),c()(),u(17,"div",11),C(18,UF,2,2,"div",12)(19,BF,2,1,"span",13),c()(),u(20,"form",14),x("ngSubmit",function(){return r.onSubmit()}),u(21,"div",15)(22,"div",16)(23,"h5",17),_(24,"i",18),f(25,"Trade Setup "),c(),u(26,"span",19),f(27,"Required"),c()(),u(28,"div",20)(29,"div",21)(30,"div",22)(31,"label",23),f(32,"Account Name"),c(),u(33,"div",24)(34,"span",25),_(35,"i",26),c(),_(36,"input",27),c(),C(37,$F,2,0,"div",28),c(),u(38,"div",22)(39,"label",29),f(40,"Instrument Type"),c(),u(41,"select",30)(42,"option",31),f(43,"Choose instrument type"),c(),u(44,"option",32),f(45,"Forex"),c(),u(46,"option",33),f(47,"Stocks"),c(),u(48,"option",34),f(49,"Futures"),c(),u(50,"option",35),f(51,"Crypto"),c(),u(52,"option",36),f(53,"Options"),c(),u(54,"option",37),f(55,"ETF"),c(),u(56,"option",38),f(57,"Other"),c()(),C(58,HF,2,0,"div",28),c(),u(59,"div",22)(60,"label",39),f(61,"Trade Symbol"),c(),u(62,"div",24)(63,"span",25),_(64,"i",40),c(),_(65,"input",41),c(),C(66,zF,2,0,"div",28),c(),u(67,"div",22)(68,"label",42),f(69,"Trade Direction"),c(),u(70,"div",43),_(71,"input",44),u(72,"label",45),f(73,"Long"),c(),_(74,"input",46),u(75,"label",47),f(76,"Short"),c()(),C(77,qF,2,0,"div",28),c(),u(78,"div",22)(79,"label",48),f(80,"Time Frame"),c(),u(81,"select",49)(82,"option",31),f(83,"Select time frame"),c(),u(84,"option",50),f(85,"Scalp (minutes)"),c(),u(86,"option",51),f(87,"Day Trade (hours)"),c(),u(88,"option",52),f(89,"Swing (days-weeks)"),c(),u(90,"option",53),f(91,"Position (weeks-months)"),c(),u(92,"option",54),f(93,"Long Term (months+)"),c()(),C(94,GF,2,0,"div",28),c(),u(95,"div",22)(96,"label",55),f(97,"Analysis Type"),c(),u(98,"select",56)(99,"option",31),f(100,"Choose analysis method"),c(),u(101,"option",57),f(102,"Technical"),c(),u(103,"option",58),f(104,"Fundamental"),c(),u(105,"option",59),f(106,"Both"),c(),u(107,"option",60),f(108,"Sentiment"),c(),u(109,"option",38),f(110,"Other"),c()(),C(111,WF,2,0,"div",28),c()()()(),u(112,"div",15)(113,"div",16)(114,"h5",17),_(115,"i",61),f(116,"Strategy Details "),c(),u(117,"span",19),f(118,"Required"),c()(),u(119,"div",20)(120,"div",21)(121,"div",22)(122,"label",62),f(123,"Strategy Name"),c(),_(124,"input",63),C(125,QF,2,0,"div",28),c(),u(126,"div",22)(127,"label",64),f(128,"Type of Order"),c(),u(129,"select",65)(130,"option",31),f(131,"Choose order type"),c(),u(132,"option",66),f(133,"Market"),c(),u(134,"option",67),f(135,"Limit"),c(),u(136,"option",68),f(137,"Stop"),c(),u(138,"option",69),f(139,"Stop Limit"),c(),u(140,"option",70),f(141,"Trailing Stop"),c()(),C(142,KF,2,0,"div",28),c(),u(143,"div",71)(144,"label",72),f(145,"Entry Criteria "),u(146,"span",10),f(147,"(Why are you taking this trade?)"),c()(),_(148,"textarea",73),u(149,"div",74),f(150,"Be specific about what signals or conditions must be met for entry."),c(),C(151,ZF,2,0,"div",28),c(),u(152,"div",71)(153,"label",75),f(154,"Exit Strategy "),u(155,"span",10),f(156,"(How will you close this position?)"),c()(),_(157,"textarea",76),u(158,"div",74),f(159,"Include both profit-taking and loss-cutting criteria."),c(),C(160,YF,2,0,"div",28),c()()()(),u(161,"div",15)(162,"div",16)(163,"h5",17),_(164,"i",77),f(165,"Risk Management "),c(),u(166,"span",19),f(167,"Required"),c()(),u(168,"div",20)(169,"div",21)(170,"div",22)(171,"label",78),f(172,"Account Balance"),c(),u(173,"div",24)(174,"span",25),f(175,"$"),c(),_(176,"input",79),c(),C(177,JF,2,0,"div",28),c(),u(178,"div",22)(179,"label",80),f(180,"Position Size"),c(),u(181,"div",24),_(182,"input",81),u(183,"button",82),f(184,"Calculate"),c()(),C(185,XF,2,0,"div",28),c(),u(186,"div",22)(187,"label",83),f(188,"Entry Price"),c(),u(189,"div",24)(190,"span",25),f(191,"$"),c(),_(192,"input",84),c(),C(193,e2,2,0,"div",28),c(),u(194,"div",22)(195,"label",85),f(196,"Entry Date/Time"),c(),_(197,"input",86),C(198,t2,2,0,"div",28),c(),u(199,"div",22)(200,"label",87),f(201,"Stop Loss Price"),c(),u(202,"div",24)(203,"span",25),f(204,"$"),c(),_(205,"input",88),c(),C(206,n2,2,0,"div",28),c(),u(207,"div",22)(208,"label",89),f(209,"Take Profit Price"),c(),u(210,"div",24)(211,"span",25),f(212,"$"),c(),_(213,"input",90),c(),C(214,r2,2,0,"div",28),c(),u(215,"div",71),_(216,"hr"),u(217,"h6",91),f(218,"Risk/Reward Analysis"),c()(),u(219,"div",92)(220,"label",93),f(221,"Risk Per Trade"),c(),u(222,"div",24),_(223,"input",94),u(224,"span",25),f(225,"%"),c()(),u(226,"div",74),f(227,"Percentage of account at risk"),c(),C(228,i2,2,0,"div",28)(229,o2,3,0,"div",95),c(),u(230,"div",92)(231,"label",96),f(232,"Estimated Reward"),c(),u(233,"div",24),_(234,"input",97),u(235,"span",25),f(236,"%"),c()(),C(237,s2,2,0,"div",28),c(),u(238,"div",92)(239,"label",98),f(240,"Risk/Reward Ratio"),c(),u(241,"div",24),_(242,"input",99),u(243,"span",25),f(244,"R:R"),c()(),u(245,"div",100),_(246,"i"),f(247),c()()()()(),u(248,"div",15)(249,"div",16)(250,"h5",17),_(251,"i",101),f(252,"Psychological Analysis "),c(),u(253,"span",19),f(254,"Required"),c()(),u(255,"div",20)(256,"div",21)(257,"div",22)(258,"label",102),f(259,"Current Emotional State"),c(),u(260,"select",103)(261,"option",31),f(262,"How are you feeling?"),c(),u(263,"option",104),f(264,"Calm & Focused"),c(),u(265,"option",105),f(266,"Excited"),c(),u(267,"option",106),f(268,"Anxious"),c(),u(269,"option",107),f(270,"Frustrated"),c(),u(271,"option",108),f(272,"Overconfident"),c(),u(273,"option",109),f(274,"Fearful"),c(),u(275,"option",110),f(276,"Neutral"),c(),u(277,"option",38),f(278,"Other"),c()(),C(279,a2,2,0,"div",28)(280,l2,3,0,"div",95),c(),u(281,"div",22)(282,"label",111),f(283,"Trading Confidence"),c(),u(284,"div",112),_(285,"input",113),u(286,"label",114),f(287,"1"),c(),_(288,"input",115),u(289,"label",116),f(290,"2"),c(),_(291,"input",117),u(292,"label",118),f(293,"3"),c(),_(294,"input",119),u(295,"label",120),f(296,"4"),c(),_(297,"input",121),u(298,"label",122),f(299,"5"),c()(),u(300,"div",123),f(301,"Low (1) to High (5)"),c(),C(302,c2,2,0,"div",124),c(),u(303,"div",71)(304,"label",125),f(305,"Potential Biases"),c(),_(306,"textarea",126),u(307,"div",74),f(308,"Identifying biases helps improve future decision making"),c(),C(309,u2,2,0,"div",28),c()()()(),u(310,"div",15)(311,"div",16)(312,"h5",17),_(313,"i",127),f(314,"Additional Notes "),c(),u(315,"span",128),f(316,"Optional"),c()(),u(317,"div",20)(318,"div",21)(319,"div",71)(320,"label",129),f(321,"Notes"),c(),_(322,"textarea",130),c()()()(),C(323,m2,9,4,"div",131),u(324,"div",132),C(325,g2,3,0,"button",133),u(326,"div")(327,"button",134),_(328,"i",135),f(329),c()()(),C(330,v2,3,1,"div",136)(331,y2,3,1,"div",137),c()()),e&2){let i,o,s,a,l,d,p,h,y,g,b,E,S,A,L,V,H,W,Ee,Se,Be,Rt;m(14),U(r.tradeLogData?"Edit Pre-Trading Journal":"Create Pre-Trading Journal"),m(4),v("ngIf",!r.tradeLogData),m(),v("ngIf",!r.tradeLogData),m(),v("formGroup",r.preTradeForm),m(17),v("ngIf",((i=r.preTradeForm.get("accountname"))==null?null:i.invalid)&&(((i=r.preTradeForm.get("accountname"))==null?null:i.dirty)||((i=r.preTradeForm.get("accountname"))==null?null:i.touched)||r.formSubmitMarker)),m(21),v("ngIf",((o=r.preTradeForm.get("instrumenttype"))==null?null:o.invalid)&&(((o=r.preTradeForm.get("instrumenttype"))==null?null:o.dirty)||((o=r.preTradeForm.get("instrumenttype"))==null?null:o.touched)||r.formSubmitMarker)),m(8),v("ngIf",((s=r.preTradeForm.get("tradesymbol"))==null?null:s.invalid)&&(((s=r.preTradeForm.get("tradesymbol"))==null?null:s.dirty)||((s=r.preTradeForm.get("tradesymbol"))==null?null:s.touched)||r.formSubmitMarker)),m(11),v("ngIf",((a=r.preTradeForm.get("tradetype"))==null?null:a.invalid)&&(((a=r.preTradeForm.get("tradetype"))==null?null:a.dirty)||((a=r.preTradeForm.get("tradetype"))==null?null:a.touched)||r.formSubmitMarker)),m(17),v("ngIf",((l=r.preTradeForm.get("timeframe"))==null?null:l.invalid)&&(((l=r.preTradeForm.get("timeframe"))==null?null:l.dirty)||((l=r.preTradeForm.get("timeframe"))==null?null:l.touched)||r.formSubmitMarker)),m(17),v("ngIf",((d=r.preTradeForm.get("analysistype"))==null?null:d.invalid)&&(((d=r.preTradeForm.get("analysistype"))==null?null:d.dirty)||((d=r.preTradeForm.get("analysistype"))==null?null:d.touched)||r.formSubmitMarker)),m(14),v("ngIf",((p=r.preTradeForm.get("strategyname"))==null?null:p.invalid)&&(((p=r.preTradeForm.get("strategyname"))==null?null:p.dirty)||((p=r.preTradeForm.get("strategyname"))==null?null:p.touched)||r.formSubmitMarker)),m(17),v("ngIf",((h=r.preTradeForm.get("typeoforder"))==null?null:h.invalid)&&(((h=r.preTradeForm.get("typeoforder"))==null?null:h.dirty)||((h=r.preTradeForm.get("typeoforder"))==null?null:h.touched)||r.formSubmitMarker)),m(9),v("ngIf",((y=r.preTradeForm.get("entrycriteria"))==null?null:y.invalid)&&(((y=r.preTradeForm.get("entrycriteria"))==null?null:y.dirty)||((y=r.preTradeForm.get("entrycriteria"))==null?null:y.touched)||r.formSubmitMarker)),m(9),v("ngIf",((g=r.preTradeForm.get("exitstrategy"))==null?null:g.invalid)&&(((g=r.preTradeForm.get("exitstrategy"))==null?null:g.dirty)||((g=r.preTradeForm.get("exitstrategy"))==null?null:g.touched)||r.formSubmitMarker)),m(17),v("ngIf",((b=r.preTradeForm.get("accountbalance"))==null?null:b.invalid)&&(((b=r.preTradeForm.get("accountbalance"))==null?null:b.dirty)||((b=r.preTradeForm.get("accountbalance"))==null?null:b.touched)||r.formSubmitMarker)),m(8),v("ngIf",((E=r.preTradeForm.get("positionsize"))==null?null:E.invalid)&&(((E=r.preTradeForm.get("positionsize"))==null?null:E.dirty)||((E=r.preTradeForm.get("positionsize"))==null?null:E.touched)||r.formSubmitMarker)),m(8),v("ngIf",((S=r.preTradeForm.get("entryprice"))==null?null:S.invalid)&&(((S=r.preTradeForm.get("entryprice"))==null?null:S.dirty)||((S=r.preTradeForm.get("entryprice"))==null?null:S.touched)||r.formSubmitMarker)),m(5),v("ngIf",((A=r.preTradeForm.get("entrydatetime"))==null?null:A.invalid)&&(((A=r.preTradeForm.get("entrydatetime"))==null?null:A.dirty)||((A=r.preTradeForm.get("entrydatetime"))==null?null:A.touched)||r.formSubmitMarker)),m(8),v("ngIf",((L=r.preTradeForm.get("estimatedstoploss"))==null?null:L.invalid)&&(((L=r.preTradeForm.get("estimatedstoploss"))==null?null:L.dirty)||((L=r.preTradeForm.get("estimatedstoploss"))==null?null:L.touched)||r.formSubmitMarker)),m(8),v("ngIf",((V=r.preTradeForm.get("estimatedtakeprofit"))==null?null:V.invalid)&&(((V=r.preTradeForm.get("estimatedtakeprofit"))==null?null:V.dirty)||((V=r.preTradeForm.get("estimatedtakeprofit"))==null?null:V.touched)||r.formSubmitMarker)),m(14),v("ngIf",((H=r.preTradeForm.get("estimatedrisk"))==null?null:H.invalid)&&(((H=r.preTradeForm.get("estimatedrisk"))==null?null:H.dirty)||((H=r.preTradeForm.get("estimatedrisk"))==null?null:H.touched)||r.formSubmitMarker)),m(),v("ngIf",((W=r.preTradeForm.get("estimatedrisk"))==null?null:W.value)>2),m(8),v("ngIf",((Ee=r.preTradeForm.get("estimatedpnl"))==null?null:Ee.invalid)&&(((Ee=r.preTradeForm.get("estimatedpnl"))==null?null:Ee.dirty)||((Ee=r.preTradeForm.get("estimatedpnl"))==null?null:Ee.touched)||r.formSubmitMarker)),m(5),v("value",r.calculateRiskRewardRatio()),m(3),v("ngClass",Dt(37,jF,r.isGoodRiskReward(),!r.isGoodRiskReward())),m(),du(r.isGoodRiskReward()?"bi bi-check-circle":"bi bi-x-circle"),m(),O(" ",r.isGoodRiskReward()?"Good risk/reward ratio":"Risk/reward should be at least 1:2"," "),m(32),v("ngIf",((Se=r.preTradeForm.get("emotionalstatebefore"))==null?null:Se.invalid)&&(((Se=r.preTradeForm.get("emotionalstatebefore"))==null?null:Se.dirty)||((Se=r.preTradeForm.get("emotionalstatebefore"))==null?null:Se.touched)||r.formSubmitMarker)),m(),v("ngIf",r.isNegativeEmotionalState()),m(22),v("ngIf",((Be=r.preTradeForm.get("tradeconfidence"))==null?null:Be.invalid)&&(((Be=r.preTradeForm.get("tradeconfidence"))==null?null:Be.dirty)||((Be=r.preTradeForm.get("tradeconfidence"))==null?null:Be.touched)||r.formSubmitMarker)),m(7),v("ngIf",((Rt=r.preTradeForm.get("potentialbiases"))==null?null:Rt.invalid)&&(((Rt=r.preTradeForm.get("potentialbiases"))==null?null:Rt.dirty)||((Rt=r.preTradeForm.get("potentialbiases"))==null?null:Rt.touched)||r.formSubmitMarker)),m(14),v("ngIf",r.formSubmitMarker&&r.preTradeForm.invalid),m(2),v("ngIf",r.tradeLogData),m(4),O("",r.tradeLogData?"Update":"Submit"," "),m(),v("ngIf",r.message),m(),v("ngIf",r.errorMessage)}},dependencies:[q,qt,ee,be,Wt,Kt,Zt,he,Hn,Qt,mn,ve,Ne,hl,k0,Me,Oe,Ue],styles:[".card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 5px #0000000d;border:1px solid rgba(0,0,0,.1);color:#000}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid rgba(0,0,0,.1);padding:12px 16px}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:6px;padding:10px 12px;background-color:#f9f9f9;border:1px solid #ced4da}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{background-color:#fff;border-color:#80bdff;box-shadow:0 0 0 .25rem #0d6efd40}textarea.form-control[_ngcontent-%COMP%]{resize:vertical}.btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:500}.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545}"]})};function _2(n,t){n&1&&(u(0,"div",12),f(1,"Loading trade logs..."),c())}function b2(n,t){if(n&1&&(u(0,"div",13),f(1),c()),n&2){let e=w();m(),U(e.errorMessage)}}function w2(n,t){if(n&1){let e=Q();u(0,"div",16)(1,"div",17),x("click",function(){let i=I(e).$implicit,o=w(2);return T(o.openEditModal(i))}),u(2,"div",18),_(3,"i",19),f(4," Planned "),c(),u(5,"div",20),x("click",function(i){let o=I(e).$implicit,s=w(2);return T(s.onDeleteTradeLog(o,i))}),_(6,"i",21),c(),u(7,"div",22)(8,"h4",23),f(9),c(),u(10,"h5",24),f(11),c(),u(12,"div",25)(13,"div",26)(14,"div",27)(15,"strong"),f(16,"Analysis:"),c(),f(17),c(),u(18,"div",27)(19,"strong"),f(20,"Order:"),c(),f(21),c()(),u(22,"div",26)(23,"div",27)(24,"strong"),f(25,"Stop Loss:"),c(),f(26),c(),u(27,"div",27)(28,"strong"),f(29,"Take Profit:"),c(),f(30),c()(),u(31,"div",26)(32,"div",27)(33,"strong"),f(34,"Risk:"),c(),f(35),c(),u(36,"div",27)(37,"strong"),f(38,"Est. PnL:"),c(),f(39),c()(),u(40,"div",28)(41,"div",29)(42,"strong"),f(43,"Account:"),c(),f(44),c()()(),u(45,"div",30)(46,"small",31),f(47),ut(48,"date"),c()()()()()}if(n&2){let e=t.$implicit;m(9),U(e.tradesymbol),m(2),da(" ",e.tradetype," | ",e.instrumenttype," "),m(6),O(" ",e.analysistype," "),m(4),O(" ",e.typeoforder," "),m(5),O(" ",e.estimatedstoploss," "),m(4),O(" ",e.estimatedtakeprofit," "),m(5),O(" ",e.estimatedrisk," "),m(4),O(" ",e.estimatedpnl," "),m(5),O(" ",e.accountname," "),m(3),U(dt(48,11,e.createdtime,"medium"))}}function E2(n,t){if(n&1&&(u(0,"div",14),C(1,w2,49,14,"div",15),c()),n&2){let e=w();m(),v("ngForOf",e.tradeLogs)}}function C2(n,t){n&1&&(u(0,"div",32),f(1," No trade logs found. "),c())}function S2(n,t){if(n&1){let e=Q();u(0,"div",33),x("click",function(i){I(e);let o=w();return T(o.closeModalOnOverlayClick(i))}),u(1,"div",34),x("click",function(i){return I(e),T(i.stopPropagation())}),u(2,"app-pre-trade-log",35),x("formSubmitted",function(){I(e);let i=w();return T(i.onFormSubmitted())})("cancel",function(){I(e);let i=w();return T(i.closeModal())}),c()()()}if(n&2){let e=w();m(2),v("tradeLogData",e.selectedTradeLog)}}var $d=class n{constructor(t,e){this.supabaseTradeTableService=t;this.cdr=e}tableName="pretrade";tradeLogs=[];loading=!1;errorMessage="";showModal=!1;selectedTradeLog=null;async ngOnInit(){this.loading=!0,await this.fetchTradeLogs(),this.loading=!1,this.cdr.markForCheck()}async fetchTradeLogs(){try{this.tradeLogs=await this.supabaseTradeTableService.getTradeLogs(this.tableName)}catch(t){console.error("Error fetching trade logs:",t),this.errorMessage="Error fetching trade logs."}}openEditModal(t){this.selectedTradeLog=t,this.showModal=!0}onFormSubmitted(){this.fetchTradeLogs(),this.closeModal()}closeModal(){this.showModal=!1,this.selectedTradeLog=null,this.cdr.markForCheck()}closeModalOnOverlayClick(t){this.closeModal(),this.cdr.markForCheck()}async onDeleteTradeLog(t,e){e.stopPropagation();try{await this.supabaseTradeTableService.deleteTradeLog(t.tradeid,this.tableName),await this.fetchTradeLogs(),this.cdr.markForCheck()}catch(r){console.error("Error deleting trade log:",r),this.errorMessage="Error deleting trade log."}}static \u0275fac=function(e){return new(e||n)(D(It),D(re))};static \u0275cmp=$({type:n,selectors:[["app-pre-trade-table"]],decls:18,vars:5,consts:[[1,"container","mt-3"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item","text-decoration-none"],["routerLink","/home"],["aria-current","page",1,"breadcrumb-item","active"],["routerLink","/pretradelog"],["class","alert alert-info",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","row mt-5",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"alert","alert-info"],[1,"alert","alert-danger"],[1,"row","mt-5"],["class","col-md-4 col-12 mb-4",4,"ngFor","ngForOf"],[1,"col-md-4","col-12","mb-4"],[1,"card","h-100","position-relative","shadow",2,"cursor","pointer",3,"click"],[1,"trade-status-indicator","status-planned"],[1,"bi","bi-clipboard-check"],[1,"delete-icon",3,"click"],[1,"bi","bi-trash"],[1,"card-body"],[1,"card-title","mt-5"],[1,"card-subtitle","mb-3","text-muted","fw-bold"],[1,"card-text"],[1,"row","mb-2"],[1,"col-6"],[1,"row"],[1,"col-12"],[1,"mt-3"],[1,"text-muted"],[1,"alert","alert-warning"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[3,"formSubmitted","cancel","tradeLogData"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),c()(),u(6,"li",5),f(7,"Pre-Trade Logs"),c(),u(8,"li",3)(9,"a",6),f(10,"Pre-Trading Journal"),c()()()(),u(11,"h2"),f(12,"Pre Trade Logs"),c(),C(13,_2,2,0,"div",7)(14,b2,2,1,"div",8)(15,E2,2,1,"div",9)(16,C2,2,0,"div",10),c(),C(17,S2,3,1,"div",11)),e&2&&(m(13),v("ngIf",r.loading),m(),v("ngIf",r.errorMessage),m(),v("ngIf",r.tradeLogs&&r.tradeLogs.length),m(),v("ngIf",!r.loading&&(!r.tradeLogs||r.tradeLogs.length===0)),m(),v("ngIf",r.showModal))},dependencies:[Ue,q,Je,ee,er,Ts],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;max-width:90%;max-height:90%;overflow:auto;position:relative}.card[_ngcontent-%COMP%]{position:relative;border:none;transition:all .2s ease;border-left:4px solid #6c757d!important}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0000001a!important}.delete-icon[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;display:none;color:#dc3545;background:#fffc;border-radius:50%;padding:5px;z-index:10}.card[_ngcontent-%COMP%]:hover   .delete-icon[_ngcontent-%COMP%]{display:block}.delete-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.trade-status-indicator[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;padding:5px 10px;border-radius:12px;font-size:.8rem;font-weight:700;z-index:10;color:#fff}.status-planned[_ngcontent-%COMP%]{background-color:#6c757d}.trade-status-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:3px}"],changeDetection:0})};function D2(n,t){if(n&1&&(u(0,"div",131),_(1,"div",132),c()),n&2){let e=w();m(),Xn("width",e.calculateFormProgress()+"%")}}function x2(n,t){if(n&1&&(u(0,"span",133),f(1),c()),n&2){let e=w();m(),O("",e.calculateFormProgress(),"% Complete")}}function I2(n,t){n&1&&(u(0,"div",134),f(1," Account name is required "),c())}function T2(n,t){n&1&&(u(0,"div",134),f(1," Please select an instrument type "),c())}function M2(n,t){n&1&&(u(0,"div",134),f(1," Please select an analysis type "),c())}function A2(n,t){n&1&&(u(0,"div",134),f(1," Trade symbol is required "),c())}function k2(n,t){n&1&&(u(0,"div",134),f(1," Please select trade direction "),c())}function N2(n,t){n&1&&(u(0,"div",134),f(1," Time frame selection is required "),c())}function P2(n,t){n&1&&(u(0,"div",134),f(1," Strategy name is required "),c())}function O2(n,t){n&1&&(u(0,"div",134),f(1," Order type is required "),c())}function R2(n,t){n&1&&(u(0,"div",134),f(1," Entry date/time is required "),c())}function F2(n,t){n&1&&(u(0,"div",134),f(1," Exit date/time is required "),c())}function L2(n,t){n&1&&(u(0,"div",134),f(1," Valid entry price is required "),c())}function V2(n,t){n&1&&(u(0,"div",134),f(1," Valid exit price is required "),c())}function j2(n,t){n&1&&(u(0,"div",134),f(1," Position size is required "),c())}function U2(n,t){n&1&&(u(0,"div",134),f(1," Please select trade outcome "),c())}function B2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Trade Details"),c())}function $2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Strategy Information"),c())}function H2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Trade Execution"),c())}function z2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Trade Outcome"),c())}function q2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Post-Trade Analysis"),c())}function G2(n,t){if(n&1&&(u(0,"div",135),_(1,"i",136),u(2,"strong"),f(3,"Please fix the errors highlighted above before submitting."),c(),u(4,"ul",137),C(5,B2,2,0,"li",138)(6,$2,2,0,"li",138)(7,H2,2,0,"li",138)(8,z2,2,0,"li",138)(9,q2,2,0,"li",138),c()()),n&2){let e=w();m(5),v("ngIf",e.hasErrors("tradeDetails")),m(),v("ngIf",e.hasErrors("strategyInformation")),m(),v("ngIf",e.hasErrors("tradeExecution")),m(),v("ngIf",e.hasErrors("tradeOutcome")),m(),v("ngIf",e.hasErrors("postTradeAnalysis"))}}function W2(n,t){if(n&1){let e=Q();u(0,"button",139),x("click",function(){I(e);let i=w();return T(i.onCancel())}),_(1,"i",140),f(2,"Cancel "),c()}}function Q2(n,t){if(n&1&&(u(0,"div",141),_(1,"i",142),f(2),c()),n&2){let e=w();m(2),O("",e.message," ")}}function K2(n,t){if(n&1&&(u(0,"div",143),_(1,"i",136),f(2),c()),n&2){let e=w();m(2),O("",e.errorMessage," ")}}var Ms=class n{constructor(t,e,r){this.fb=t;this.cdr=e;this.supabaseTradeTableService=r}tradeLogData=null;formSubmitted=new _e;cancel=new _e;tableName="posttrade";postTradeForm;message="";errorMessage="";formSubmitMarker=!1;tradeOutcomes=["Win","Loss","Breakeven"];tradeDirections=["Long","Short"];ngOnInit(){this.formSubmitMarker=!1,this.createForm()}createForm(){var t=fo();this.postTradeForm=this.fb.group({tradeid:[this.tradeLogData?.tradeid??t],userid:[this.tradeLogData?.userid??"the-db-is-likely-hacked-1234-abcd-5678-efgh"],createdtime:[new Date().toISOString(),R.required],accountname:[this.tradeLogData?.accountname,[R.required,R.maxLength(255)]],accountbalance:[this.tradeLogData?.accountbalance??""],instrumenttype:[this.tradeLogData?.instrumenttype??"",[R.required,R.maxLength(50)]],analysistype:[this.tradeLogData?.analysistype??"",[R.required,R.maxLength(100)]],tradesymbol:[this.tradeLogData?.tradesymbol??"",[R.required,R.maxLength(50)]],tradetype:[this.tradeLogData?.tradetype??"",[R.required,R.maxLength(50)]],timeframe:[this.tradeLogData?.timeframe??"",[R.required,R.maxLength(50)]],entrydatetime:[this.tradeLogData?.entrydatetime??"",R.required],strategyname:[this.tradeLogData?.strategyname??"",[R.required,R.maxLength(255)]],typeoforder:[this.tradeLogData?.typeoforder??"",[R.required,R.maxLength(50)]],exitstrategy:[this.tradeLogData?.exitstrategy??""],entryprice:[this.tradeLogData?.entryprice??"",[R.required,R.min(0)]],exitprice:[this.tradeLogData?.exitprice??"",[R.required,R.min(0)]],positionsize:[this.tradeLogData?.positionsize??"",[R.required,R.maxLength(50)]],exitdatetime:[this.tradeLogData?.exitdatetime??"",R.required],tradeoutcome:[this.tradeLogData?.tradeoutcome??"",R.required],profitlossamount:[this.tradeLogData?.profitlossamount??""],setupscreenshot:[this.tradeLogData?.setupscreenshot??""],emotionalstateafter:[this.tradeLogData?.emotionalstateafter??""],emotionalimpactondecision:[this.tradeLogData?.emotionalimpactondecision??""],whatwentwell:[this.tradeLogData?.whatwentwell??""],whatcouldimprove:[this.tradeLogData?.whatcouldimprove??""],notes:[this.tradeLogData?.notes??""],isopen:[this.tradeLogData?.isopen??!0,R.required],updatedtime:[new Date().toDateString(),R.required]})}onFileSelected(t){let e=t.target;if(!e.files||e.files.length===0)return;let r=e.files[0],i=new FileReader;i.onload=o=>{this.postTradeForm.patchValue({setupScreenshot:o.target.result})},i.readAsDataURL(r)}async onSubmit(){if(this.formSubmitMarker=!0,this.postTradeForm.invalid){this.postTradeForm.markAllAsTouched();return}let t=this.postTradeForm.value;try{this.tradeLogData?await this.supabaseTradeTableService.updateTradeLog(t,this.tableName):await this.supabaseTradeTableService.addTradeLog(t,this.tableName),this.message="Trade log updated successfully. Resetting in 5 seconds.",setTimeout(()=>{this.cdr.markForCheck()},0),this.formSubmitted.emit(),this.formSubmitMarker=!1,this.cdr.markForCheck()}catch(e){console.error("Error processing trade log:",e),this.errorMessage="Something went wrong.",this.cdr.markForCheck()}}async onDelete(){if(this.tradeLogData)try{await this.supabaseTradeTableService.deleteTradeLog(this.tradeLogData.tradeid,this.tableName),this.message="Trade log deleted successfully.",this.formSubmitted.emit()}catch(t){console.error("Error deleting trade log:",t),this.errorMessage="Something went wrong while deleting."}finally{this.cdr.markForCheck()}}onCancel(){this.cancel.emit()}calculateProfitLoss(){let t=this.postTradeForm.get("entryprice")?.value,e=this.postTradeForm.get("exitprice")?.value,r=parseFloat(this.postTradeForm.get("positionsize")?.value),i=this.postTradeForm.get("tradetype")?.value;if(t&&e&&r&&i){let o=0;i==="Long"?o=(e-t)*r:i==="Short"&&(o=(t-e)*r),this.postTradeForm.get("profitlossamount")?.setValue(o.toFixed(2)),o>0?this.postTradeForm.get("tradeoutcome")?.setValue("Win"):o<0?this.postTradeForm.get("tradeoutcome")?.setValue("Loss"):this.postTradeForm.get("tradeoutcome")?.setValue("Breakeven")}}calculateFormProgress(){let t=Object.keys(this.postTradeForm.controls).filter(r=>this.postTradeForm.get(r)?.validator!==null),e=t.filter(r=>this.postTradeForm.get(r)?.valid);return Math.round(e.length/t.length*100)}hasErrors(t){let e=!1,r={tradeDetails:["accountname","instrumenttype","analysistype","tradesymbol","tradetype","timeframe"],strategyInformation:["strategyname","typeoforder"],tradeExecution:["entrydatetime","exitdatetime","entryprice","exitprice","positionsize"],tradeOutcome:["tradeoutcome"],postTradeAnalysis:["emotionalstateafter","whatwentwell","whatcouldimprove"]};return r[t]&&r[t].forEach(i=>{this.postTradeForm.get(i)?.invalid&&(e=!0)}),e}static \u0275fac=function(e){return new(e||n)(D(xt),D(re),D(It))};static \u0275cmp=$({type:n,selectors:[["app-post-trade-log"]],inputs:{tradeLogData:"tradeLogData"},outputs:{formSubmitted:"formSubmitted",cancel:"cancel"},decls:299,vars:23,consts:[[1,"container","my-4"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item","text-decoration-none"],["routerLink","/home"],["routerLink","/posttrades"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row","mb-4"],[1,"col-lg-8"],[1,"mb-2"],[1,"text-muted"],[1,"col-lg-4","text-lg-end","d-flex","align-items-center","justify-content-lg-end","mt-3","mt-lg-0"],["class","progress w-100","style","height: 8px;",4,"ngIf"],["class","ms-2 small text-muted",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-1-circle","me-2"],[1,"badge","bg-primary"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-6"],["for","accountname",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-person"],["type","text","id","accountname","formControlName","accountname","placeholder","Enter your account name",1,"form-control"],["class","text-danger mt-1 small",4,"ngIf"],["for","accountbalance",1,"form-label"],["type","number","step","0.01","min","0","id","accountbalance","formControlName","accountbalance","placeholder","Current account value",1,"form-control"],["for","instrumenttype",1,"form-label"],["id","instrumenttype","formControlName","instrumenttype",1,"form-select"],["value","","selected","","disabled",""],["value","Forex"],["value","Stocks"],["value","Futures"],["value","Crypto"],["value","Options"],["value","ETF"],["value","Other"],["for","analysistype",1,"form-label"],["id","analysistype","formControlName","analysistype",1,"form-select"],["value","Technical"],["value","Fundamental"],["value","Both"],["value","Sentiment"],["for","tradesymbol",1,"form-label"],[1,"bi","bi-tag"],["type","text","id","tradesymbol","formControlName","tradesymbol","placeholder","Enter ticker symbol",1,"form-control"],["for","tradetype",1,"form-label"],["role","group","aria-label","Trade type",1,"btn-group","w-100"],["type","radio","name","tradetype","id","tradetype_long","value","Long","formControlName","tradetype",1,"btn-check"],["for","tradetype_long",1,"btn","btn-outline-success"],["type","radio","name","tradetype","id","tradetype_short","value","Short","formControlName","tradetype",1,"btn-check"],["for","tradetype_short",1,"btn","btn-outline-danger"],["for","timeframe",1,"form-label"],["id","timeframe","formControlName","timeframe",1,"form-select"],["value","Scalp"],["value","Day"],["value","Swing"],["value","Position"],["value","LongTerm"],[1,"bi","bi-2-circle","me-2"],["for","strategyname",1,"form-label"],["type","text","id","strategyname","formControlName","strategyname","placeholder","e.g., Breakout, Reversal, Trend Following",1,"form-control"],["for","typeoforder",1,"form-label"],["id","typeoforder","formControlName","typeoforder",1,"form-select"],["value","Market"],["value","Limit"],["value","Stop"],["value","StopLimit"],["value","TrailingStop"],[1,"col-12"],["for","exitstrategy",1,"form-label"],["id","exitstrategy","formControlName","exitstrategy","placeholder","Describe the exit strategy you implemented","rows","3",1,"form-control"],[1,"bi","bi-3-circle","me-2"],["for","entrydatetime",1,"form-label"],["type","datetime-local","id","entrydatetime","formControlName","entrydatetime",1,"form-control"],["for","exitdatetime",1,"form-label"],["type","datetime-local","id","exitdatetime","formControlName","exitdatetime",1,"form-control"],[1,"col-md-4"],["for","entryprice",1,"form-label"],["type","number","id","entryprice","formControlName","entryprice","step","0.01","min","0","placeholder","Actual entry price",1,"form-control"],["for","exitprice",1,"form-label"],["type","number","id","exitprice","formControlName","exitprice","step","0.01","min","0","placeholder","Actual exit price",1,"form-control"],["for","positionsize",1,"form-label"],["type","text","id","positionsize","formControlName","positionsize","placeholder","Units/Contracts/Shares",1,"form-control"],[1,"bi","bi-4-circle","me-2"],["for","tradeoutcome",1,"form-label"],["role","group","aria-label","Trade outcome",1,"btn-group","w-100"],["type","radio","name","tradeoutcome","id","tradeoutcome_win","value","Win","formControlName","tradeoutcome",1,"btn-check"],["for","tradeoutcome_win",1,"btn","btn-outline-success"],["type","radio","name","tradeoutcome","id","tradeoutcome_loss","value","Loss","formControlName","tradeoutcome",1,"btn-check"],["for","tradeoutcome_loss",1,"btn","btn-outline-danger"],["type","radio","name","tradeoutcome","id","tradeoutcome_breakeven","value","Breakeven","formControlName","tradeoutcome",1,"btn-check"],["for","tradeoutcome_breakeven",1,"btn","btn-outline-warning"],["for","profitlossamount",1,"form-label"],["type","number","step","0.01","id","profitlossamount","formControlName","profitlossamount","placeholder","e.g. 50.25 or -30.50",1,"form-control"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-6-circle","me-2"],["for","emotionalstateafter",1,"form-label"],["id","emotionalstateafter","formControlName","emotionalstateafter",1,"form-select"],["value","Satisfied"],["value","Excited"],["value","Relieved"],["value","Disappointed"],["value","Frustrated"],["value","Neutral"],["value","Angry"],["for","emotionalimpactondecision",1,"form-label"],["id","emotionalimpactondecision","formControlName","emotionalimpactondecision","placeholder","How did your emotions affect your trading decisions?","rows","3",1,"form-control"],["for","whatwentwell",1,"form-label"],["id","whatwentwell","formControlName","whatwentwell","placeholder","What aspects of this trade did you execute correctly?","rows","3",1,"form-control"],["for","whatcouldimprove",1,"form-label"],["id","whatcouldimprove","formControlName","whatcouldimprove","placeholder","What could you have done better in this trade?","rows","3",1,"form-control"],["for","isopen",1,"form-label"],[1,"form-check","form-switch"],["type","checkbox","id","isopen","formControlName","isopen",1,"form-check-input"],["for","isopen",1,"form-check-label"],[1,"bi","bi-7-circle","me-2"],[1,"badge","bg-secondary"],["for","notes",1,"form-label"],["id","notes","formControlName","notes","placeholder","Any additional information or context for this trade","rows","3",1,"form-control"],["class","alert alert-danger mb-3",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],["type","button","class","btn btn-tr-secondary",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-success"],[1,"bi","bi-check-circle","me-1"],["class","alert alert-success mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"progress","w-100",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success"],[1,"ms-2","small","text-muted"],[1,"text-danger","mt-1","small"],[1,"alert","alert-danger","mb-3"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"mb-0","mt-2"],[4,"ngIf"],["type","button",1,"btn","btn-tr-secondary",3,"click"],[1,"bi","bi-x-circle","me-1"],[1,"alert","alert-success","mt-3"],[1,"bi","bi-check-circle-fill","me-2"],[1,"alert","alert-danger","mt-3"]],template:function(e,r){if(e&1&&(u(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),c()(),u(6,"li",3)(7,"a",5),f(8,"Trade Logs"),c()(),u(9,"li",6),f(10,"Post-Trading Journal"),c()()(),u(11,"div",7)(12,"div",8)(13,"h2",9),f(14),c(),u(15,"p",10),f(16,"Document your completed trades to analyze performance and improve your strategy"),c()(),u(17,"div",11),C(18,D2,2,2,"div",12)(19,x2,2,1,"span",13),c()(),u(20,"form",14),x("ngSubmit",function(){return r.onSubmit()}),u(21,"div",15)(22,"div",16)(23,"h5",17),_(24,"i",18),f(25,"Trade Details "),c(),u(26,"span",19),f(27,"Required"),c()(),u(28,"div",20)(29,"div",21)(30,"div",22)(31,"label",23),f(32,"Account Name"),c(),u(33,"div",24)(34,"span",25),_(35,"i",26),c(),_(36,"input",27),c(),C(37,I2,2,0,"div",28),c(),u(38,"div",22)(39,"label",29),f(40,"Account Balance"),c(),u(41,"div",24)(42,"span",25),f(43,"$"),c(),_(44,"input",30),c()(),u(45,"div",22)(46,"label",31),f(47,"Instrument Type"),c(),u(48,"select",32)(49,"option",33),f(50,"Choose instrument type"),c(),u(51,"option",34),f(52,"Forex"),c(),u(53,"option",35),f(54,"Stocks"),c(),u(55,"option",36),f(56,"Futures"),c(),u(57,"option",37),f(58,"Crypto"),c(),u(59,"option",38),f(60,"Options"),c(),u(61,"option",39),f(62,"ETF"),c(),u(63,"option",40),f(64,"Other"),c()(),C(65,T2,2,0,"div",28),c(),u(66,"div",22)(67,"label",41),f(68,"Analysis Type"),c(),u(69,"select",42)(70,"option",33),f(71,"Choose analysis method"),c(),u(72,"option",43),f(73,"Technical"),c(),u(74,"option",44),f(75,"Fundamental"),c(),u(76,"option",45),f(77,"Both"),c(),u(78,"option",46),f(79,"Sentiment"),c(),u(80,"option",40),f(81,"Other"),c()(),C(82,M2,2,0,"div",28),c(),u(83,"div",22)(84,"label",47),f(85,"Trade Symbol"),c(),u(86,"div",24)(87,"span",25),_(88,"i",48),c(),_(89,"input",49),c(),C(90,A2,2,0,"div",28),c(),u(91,"div",22)(92,"label",50),f(93,"Trade Direction"),c(),u(94,"div",51),_(95,"input",52),u(96,"label",53),f(97,"Long"),c(),_(98,"input",54),u(99,"label",55),f(100,"Short"),c()(),C(101,k2,2,0,"div",28),c(),u(102,"div",22)(103,"label",56),f(104,"Time Frame"),c(),u(105,"select",57)(106,"option",33),f(107,"Select time frame"),c(),u(108,"option",58),f(109,"Scalp (minutes)"),c(),u(110,"option",59),f(111,"Day Trade (hours)"),c(),u(112,"option",60),f(113,"Swing (days-weeks)"),c(),u(114,"option",61),f(115,"Position (weeks-months)"),c(),u(116,"option",62),f(117,"Long Term (months+)"),c()(),C(118,N2,2,0,"div",28),c()()()(),u(119,"div",15)(120,"div",16)(121,"h5",17),_(122,"i",63),f(123,"Strategy Information "),c(),u(124,"span",19),f(125,"Required"),c()(),u(126,"div",20)(127,"div",21)(128,"div",22)(129,"label",64),f(130,"Strategy Name"),c(),_(131,"input",65),C(132,P2,2,0,"div",28),c(),u(133,"div",22)(134,"label",66),f(135,"Type of Order"),c(),u(136,"select",67)(137,"option",33),f(138,"Choose order type"),c(),u(139,"option",68),f(140,"Market"),c(),u(141,"option",69),f(142,"Limit"),c(),u(143,"option",70),f(144,"Stop"),c(),u(145,"option",71),f(146,"Stop Limit"),c(),u(147,"option",72),f(148,"Trailing Stop"),c()(),C(149,O2,2,0,"div",28),c(),u(150,"div",73)(151,"label",74),f(152,"Exit Strategy Used"),c(),_(153,"textarea",75),c()()()(),u(154,"div",15)(155,"div",16)(156,"h5",17),_(157,"i",76),f(158,"Trade Execution "),c(),u(159,"span",19),f(160,"Required"),c()(),u(161,"div",20)(162,"div",21)(163,"div",22)(164,"label",77),f(165,"Entry Date/Time"),c(),_(166,"input",78),C(167,R2,2,0,"div",28),c(),u(168,"div",22)(169,"label",79),f(170,"Exit Date/Time"),c(),_(171,"input",80),C(172,F2,2,0,"div",28),c(),u(173,"div",81)(174,"label",82),f(175,"Entry Price"),c(),u(176,"div",24)(177,"span",25),f(178,"$"),c(),_(179,"input",83),c(),C(180,L2,2,0,"div",28),c(),u(181,"div",81)(182,"label",84),f(183,"Exit Price"),c(),u(184,"div",24)(185,"span",25),f(186,"$"),c(),_(187,"input",85),c(),C(188,V2,2,0,"div",28),c(),u(189,"div",81)(190,"label",86),f(191,"Position Size"),c(),u(192,"div",24),_(193,"input",87),c(),C(194,j2,2,0,"div",28),c()()()(),u(195,"div",15)(196,"div",16)(197,"h5",17),_(198,"i",88),f(199,"Trade Outcome "),c(),u(200,"span",19),f(201,"Required"),c()(),u(202,"div",20)(203,"div",21)(204,"div",22)(205,"label",89),f(206,"Trade Result"),c(),u(207,"div",90),_(208,"input",91),u(209,"label",92),f(210,"Win"),c(),_(211,"input",93),u(212,"label",94),f(213,"Loss"),c(),_(214,"input",95),u(215,"label",96),f(216,"Breakeven"),c()(),C(217,U2,2,0,"div",28),c(),u(218,"div",22)(219,"label",97),f(220,"Profit/Loss Amount"),c(),u(221,"div",24)(222,"span",25),f(223,"$"),c(),_(224,"input",98),u(225,"button",99),x("click",function(){return r.calculateProfitLoss()}),f(226," Calculate "),c()()()()()(),u(227,"div",15)(228,"div",16)(229,"h5",17),_(230,"i",100),f(231,"Post-Trade Analysis "),c(),u(232,"span",19),f(233,"Required"),c()(),u(234,"div",20)(235,"div",21)(236,"div",22)(237,"label",101),f(238,"Emotional State After Trade"),c(),u(239,"select",102)(240,"option",33),f(241,"How do you feel now?"),c(),u(242,"option",103),f(243,"Satisfied"),c(),u(244,"option",104),f(245,"Excited"),c(),u(246,"option",105),f(247,"Relieved"),c(),u(248,"option",106),f(249,"Disappointed"),c(),u(250,"option",107),f(251,"Frustrated"),c(),u(252,"option",108),f(253,"Neutral"),c(),u(254,"option",109),f(255,"Angry"),c(),u(256,"option",40),f(257,"Other"),c()()(),u(258,"div",73)(259,"label",110),f(260,"Emotional Impact on Decisions"),c(),_(261,"textarea",111),c(),u(262,"div",73)(263,"label",112),f(264,"What Went Well"),c(),_(265,"textarea",113),c(),u(266,"div",73)(267,"label",114),f(268,"Areas for Improvement"),c(),_(269,"textarea",115),c(),u(270,"div",22)(271,"label",116),f(272,"Trade Status"),c(),u(273,"div",117),_(274,"input",118),u(275,"label",119),f(276,"This position is still open"),c()()()()()(),u(277,"div",15)(278,"div",16)(279,"h5",17),_(280,"i",120),f(281,"Additional Notes "),c(),u(282,"span",121),f(283,"Optional"),c()(),u(284,"div",20)(285,"div",21)(286,"div",73)(287,"label",122),f(288,"Notes"),c(),_(289,"textarea",123),c()()()(),C(290,G2,10,5,"div",124),u(291,"div",125),C(292,W2,3,0,"button",126),u(293,"div")(294,"button",127),_(295,"i",128),f(296),c()()(),C(297,Q2,3,1,"div",129)(298,K2,3,1,"div",130),c()()),e&2){let i,o,s,a,l,d,p,h,y,g,b,E,S,A;m(14),U(r.tradeLogData?"Edit Post-Trading Journal":"Create Post-Trading Journal"),m(4),v("ngIf",!r.tradeLogData),m(),v("ngIf",!r.tradeLogData),m(),v("formGroup",r.postTradeForm),m(17),v("ngIf",((i=r.postTradeForm.get("accountname"))==null?null:i.invalid)&&(((i=r.postTradeForm.get("accountname"))==null?null:i.dirty)||((i=r.postTradeForm.get("accountname"))==null?null:i.touched)||r.formSubmitMarker)),m(28),v("ngIf",((o=r.postTradeForm.get("instrumenttype"))==null?null:o.invalid)&&(((o=r.postTradeForm.get("instrumenttype"))==null?null:o.dirty)||((o=r.postTradeForm.get("instrumenttype"))==null?null:o.touched)||r.formSubmitMarker)),m(17),v("ngIf",((s=r.postTradeForm.get("analysistype"))==null?null:s.invalid)&&(((s=r.postTradeForm.get("analysistype"))==null?null:s.dirty)||((s=r.postTradeForm.get("analysistype"))==null?null:s.touched)||r.formSubmitMarker)),m(8),v("ngIf",((a=r.postTradeForm.get("tradesymbol"))==null?null:a.invalid)&&(((a=r.postTradeForm.get("tradesymbol"))==null?null:a.dirty)||((a=r.postTradeForm.get("tradesymbol"))==null?null:a.touched)||r.formSubmitMarker)),m(11),v("ngIf",((l=r.postTradeForm.get("tradetype"))==null?null:l.invalid)&&(((l=r.postTradeForm.get("tradetype"))==null?null:l.dirty)||((l=r.postTradeForm.get("tradetype"))==null?null:l.touched)||r.formSubmitMarker)),m(17),v("ngIf",((d=r.postTradeForm.get("timeframe"))==null?null:d.invalid)&&(((d=r.postTradeForm.get("timeframe"))==null?null:d.dirty)||((d=r.postTradeForm.get("timeframe"))==null?null:d.touched)||r.formSubmitMarker)),m(14),v("ngIf",((p=r.postTradeForm.get("strategyname"))==null?null:p.invalid)&&(((p=r.postTradeForm.get("strategyname"))==null?null:p.dirty)||((p=r.postTradeForm.get("strategyname"))==null?null:p.touched)||r.formSubmitMarker)),m(17),v("ngIf",((h=r.postTradeForm.get("typeoforder"))==null?null:h.invalid)&&(((h=r.postTradeForm.get("typeoforder"))==null?null:h.dirty)||((h=r.postTradeForm.get("typeoforder"))==null?null:h.touched)||r.formSubmitMarker)),m(18),v("ngIf",((y=r.postTradeForm.get("entrydatetime"))==null?null:y.invalid)&&(((y=r.postTradeForm.get("entrydatetime"))==null?null:y.dirty)||((y=r.postTradeForm.get("entrydatetime"))==null?null:y.touched)||r.formSubmitMarker)),m(5),v("ngIf",((g=r.postTradeForm.get("exitdatetime"))==null?null:g.invalid)&&(((g=r.postTradeForm.get("exitdatetime"))==null?null:g.dirty)||((g=r.postTradeForm.get("exitdatetime"))==null?null:g.touched)||r.formSubmitMarker)),m(8),v("ngIf",((b=r.postTradeForm.get("entryprice"))==null?null:b.invalid)&&(((b=r.postTradeForm.get("entryprice"))==null?null:b.dirty)||((b=r.postTradeForm.get("entryprice"))==null?null:b.touched)||r.formSubmitMarker)),m(8),v("ngIf",((E=r.postTradeForm.get("exitprice"))==null?null:E.invalid)&&(((E=r.postTradeForm.get("exitprice"))==null?null:E.dirty)||((E=r.postTradeForm.get("exitprice"))==null?null:E.touched)||r.formSubmitMarker)),m(6),v("ngIf",((S=r.postTradeForm.get("positionsize"))==null?null:S.invalid)&&(((S=r.postTradeForm.get("positionsize"))==null?null:S.dirty)||((S=r.postTradeForm.get("positionsize"))==null?null:S.touched)||r.formSubmitMarker)),m(23),v("ngIf",((A=r.postTradeForm.get("tradeoutcome"))==null?null:A.invalid)&&(((A=r.postTradeForm.get("tradeoutcome"))==null?null:A.dirty)||((A=r.postTradeForm.get("tradeoutcome"))==null?null:A.touched)||r.formSubmitMarker)),m(73),v("ngIf",r.formSubmitMarker&&r.postTradeForm.invalid),m(2),v("ngIf",r.tradeLogData),m(4),O("",r.tradeLogData?"Update":"Submit"," "),m(),v("ngIf",r.message),m(),v("ngIf",r.errorMessage)}},dependencies:[q,ee,be,Wt,Kt,Zt,he,Hn,Hr,Qt,mn,ve,Ne,hl,Me,Oe,Ue],styles:[".card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 5px #0000000d;border:1px solid rgba(0,0,0,.1);color:#000}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid rgba(0,0,0,.1);padding:12px 16px}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:6px;padding:10px 12px;background-color:#f9f9f9;border:1px solid #ced4da}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{background-color:#fff;border-color:#80bdff;box-shadow:0 0 0 .25rem #0d6efd40}textarea.form-control[_ngcontent-%COMP%]{resize:vertical}.btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:500}.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545}"]})};var Z2=(n,t,e)=>({"open-trade":n,"win-trade":t,"loss-trade":e}),Y2=(n,t,e)=>({"status-open":n,"status-win":t,"status-loss":e}),J2=(n,t,e)=>({"bi-clock-history":n,"bi-check-circle":t,"bi-x-circle":e}),X2=(n,t,e)=>({"text-success":n,"text-danger":t,"text-secondary":e});function eL(n,t){n&1&&(u(0,"div",12),f(1,"Loading trade logs..."),c())}function tL(n,t){if(n&1&&(u(0,"div",13),f(1),c()),n&2){let e=w();m(),U(e.errorMessage)}}function nL(n,t){if(n&1){let e=Q();u(0,"div",16)(1,"div",17),x("click",function(){let i=I(e).$implicit,o=w(2);return T(o.openEditModal(i))}),u(2,"div",18),_(3,"i",19),f(4),c(),u(5,"div",20),x("click",function(i){let o=I(e).$implicit,s=w(2);return T(s.onDeleteTradeLog(o,i))}),_(6,"i",21),c(),u(7,"div",22)(8,"h4",23),f(9),c(),u(10,"h5",24),f(11),c(),u(12,"div",25)(13,"div",26)(14,"div",27)(15,"strong"),f(16,"Strategy:"),c(),f(17),c(),u(18,"div",27)(19,"strong"),f(20,"Analysis:"),c(),f(21),c()(),u(22,"div",26)(23,"div",27)(24,"strong"),f(25,"Entry:"),c(),f(26),c(),u(27,"div",27)(28,"strong"),f(29,"Exit:"),c(),f(30),c()(),u(31,"div",26)(32,"div",27)(33,"strong"),f(34,"Date:"),c(),f(35),ut(36,"date"),c(),u(37,"div",27)(38,"strong"),f(39,"Account:"),c(),f(40),c()(),u(41,"div",28)(42,"div",29)(43,"strong"),f(44,"P/L:"),c(),u(45,"span",30),f(46),c()()()(),u(47,"div",31)(48,"small",32),f(49),ut(50,"date"),c()()()()()}if(n&2){let e=t.$implicit;m(),v("ngClass",Wi(23,Z2,e.isopen,!e.isopen&&e.tradeoutcome==="Win",!e.isopen&&e.tradeoutcome==="Loss")),m(),v("ngClass",Wi(27,Y2,e.isopen,!e.isopen&&e.tradeoutcome==="Win",!e.isopen&&e.tradeoutcome==="Loss")),m(),v("ngClass",Wi(31,J2,e.isopen,!e.isopen&&e.tradeoutcome==="Win",!e.isopen&&e.tradeoutcome==="Loss")),m(),O(" ",e.isopen?"In Progress":e.tradeoutcome," "),m(5),U(e.tradesymbol),m(2),Cm(" ",e.tradetype," | ",e.instrumenttype," | ",e.timeframe," "),m(6),O(" ",e.strategyname," "),m(4),O(" ",e.analysistype," "),m(5),O(" ",e.entryprice," "),m(4),O(" ",e.isopen?"Pending":e.exitprice," "),m(5),O(" ",dt(36,17,e.entrydatetime,"shortDate")," "),m(5),O(" ",e.accountname," "),m(5),v("ngClass",Wi(35,X2,!e.isopen&&e.tradeoutcome==="Win",!e.isopen&&e.tradeoutcome==="Loss",e.isopen)),m(),O(" ",e.isopen?"Trade in progress":e.profitlossamount," "),m(3),U(dt(50,20,e.createdtime,"medium"))}}function rL(n,t){if(n&1&&(u(0,"div",14),C(1,nL,51,39,"div",15),c()),n&2){let e=w();m(),v("ngForOf",e.tradeLogs)}}function iL(n,t){n&1&&(u(0,"div",33),f(1," No trade logs found. "),c())}function oL(n,t){if(n&1){let e=Q();u(0,"div",34),x("click",function(i){I(e);let o=w();return T(o.closeModalOnOverlayClick(i))}),u(1,"div",35),x("click",function(i){return I(e),T(i.stopPropagation())}),u(2,"app-post-trade-log",36),x("formSubmitted",function(){I(e);let i=w();return T(i.onFormSubmitted())})("cancel",function(){I(e);let i=w();return T(i.closeModal())}),c()()()}if(n&2){let e=w();m(2),v("tradeLogData",e.selectedTradeLog)}}var Hd=class n{constructor(t,e){this.supabaseTradeTableService=t;this.cdr=e}tableName="posttrade";tradeLogs=[];loading=!1;errorMessage="";showModal=!1;selectedTradeLog=null;async ngOnInit(){this.loading=!0,await this.fetchTradeLogs(),this.loading=!1,this.cdr.detectChanges()}async fetchTradeLogs(){try{this.tradeLogs=await this.supabaseTradeTableService.getTradeLogs(this.tableName),this.cdr.markForCheck()}catch(t){console.error("Error fetching trade logs",t),this.errorMessage="Error fetching trade logs."}}openEditModal(t){this.selectedTradeLog=t,this.showModal=!0}onFormSubmitted(){this.fetchTradeLogs(),this.closeModal()}closeModal(){this.showModal=!1,this.selectedTradeLog=null}closeModalOnOverlayClick(t){this.closeModal(),this.cdr.markForCheck()}async onDeleteTradeLog(t,e){e.stopPropagation();try{await this.supabaseTradeTableService.deleteTradeLog(t.tradeid,this.tableName),await this.fetchTradeLogs()}catch(r){console.error("Error deleting trade log:",r),this.errorMessage="Error deleting trade log."}}static \u0275fac=function(e){return new(e||n)(D(It),D(re))};static \u0275cmp=$({type:n,selectors:[["app-post-trade-table"]],decls:18,vars:5,consts:[[1,"container","mt-3"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item","text-decoration-none"],["routerLink","/home"],["aria-current","page",1,"breadcrumb-item","active"],["routerLink","/posttradelog"],["class","alert alert-info",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","row mt-5",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"alert","alert-info"],[1,"alert","alert-danger"],[1,"row","mt-5"],["class","col-md-4 col-12 mb-4",4,"ngFor","ngForOf"],[1,"col-md-4","col-12","mb-4"],[1,"card","h-100","position-relative","shadow",2,"cursor","pointer",3,"click","ngClass"],[1,"trade-status-indicator",3,"ngClass"],[1,"bi",3,"ngClass"],[1,"delete-icon",3,"click"],[1,"bi","bi-trash"],[1,"card-body"],[1,"card-title","mt-5"],[1,"card-subtitle","mb-3","text-muted","fw-bold"],[1,"card-text"],[1,"row","mb-2"],[1,"col-6"],[1,"row"],[1,"col-12"],[3,"ngClass"],[1,"mt-3"],[1,"text-muted"],[1,"alert","alert-warning"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[3,"formSubmitted","cancel","tradeLogData"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),c()(),u(6,"li",5),f(7,"Post-Trade Logs"),c(),u(8,"li",3)(9,"a",6),f(10,"Post-Trading Journal"),c()()()(),u(11,"h2"),f(12,"Post Trade Logs"),c(),C(13,eL,2,0,"div",7)(14,tL,2,1,"div",8)(15,rL,2,1,"div",9)(16,iL,2,0,"div",10),c(),C(17,oL,3,1,"div",11)),e&2&&(m(13),v("ngIf",r.loading),m(),v("ngIf",r.errorMessage),m(),v("ngIf",r.tradeLogs&&r.tradeLogs.length),m(),v("ngIf",!r.loading&&(!r.tradeLogs||r.tradeLogs.length===0)),m(),v("ngIf",r.showModal))},dependencies:[Ue,q,qt,Je,ee,er,Ms],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;max-width:90%;max-height:90%;overflow:auto;position:relative}.card[_ngcontent-%COMP%]{position:relative;border:none;transition:all .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0000001a!important}.delete-icon[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;display:none;color:#dc3545;background:#fffc;border-radius:50%;padding:5px;z-index:10}.card[_ngcontent-%COMP%]:hover   .delete-icon[_ngcontent-%COMP%]{display:block}.delete-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.open-trade[_ngcontent-%COMP%]{border-left:4px solid #17a2b8!important}.win-trade[_ngcontent-%COMP%]{border-left:4px solid #28a745!important}.loss-trade[_ngcontent-%COMP%]{border-left:4px solid #dc3545!important}.trade-status-indicator[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;padding:5px 10px;border-radius:12px;font-size:.8rem;font-weight:700;z-index:10;color:#fff}.status-open[_ngcontent-%COMP%]{background-color:#17a2b8}.status-win[_ngcontent-%COMP%]{background-color:#28a745}.status-loss[_ngcontent-%COMP%]{background-color:#dc3545}.trade-status-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:3px}"]})};var As=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;ngOnInit(){}async loadQuestions(){let{data:t,error:e}=await this.supabase.rpc("get_random_activequestions");if(e)throw console.error("Error loading questions: ",e),e;return t}async adminLoadQuestions(){let{data:t,error:e}=await this.supabase.from("adminquestions").select("*");if(e)throw console.error("Error loading questions: ",e),e;return t}async adminSaveQuestions(t){let e=null;for(let r of t.filter(i=>i.isModified))if(r.question_id){let{data:i,error:o}=await this.supabase.from("adminquestions").update({question_data:r.question_data,active:r.active}).eq("question_id",r.question_id).select().single();if(o){console.error("Error updating question:",o),e=o;break}else r.updated_at=i.updated_at,r.isModified=!1}else{let{data:i,error:o}=await this.supabase.from("adminquestions").insert([{question_data:r.question_data,active:r.active}]).select().single();if(o){console.error("Error inserting question:",o),e=o;break}else r.question_id=i.question_id,r.created_at=i.created_at,r.updated_at=i.updated_at,r.isModified=!1}return{error:e}}async deleteQuestion(t){let{error:e}=await this.supabase.from("adminquestions").delete().eq("question_id",t.question_id);return{error:e}}async getActiveQuestions(){let{data:t,error:e}=await this.supabase.from("activequestions").select("*");return{data:t,error:e}}async submitUserAnswers(t){let{error:e}=await this.supabase.from("answers").insert(t);return{error:e}}async getLastEmotionCheckInResult(){let t=(await this.supabase.auth.getUser()).data.user?.id,{data:e,error:r}=await this.supabase.from("answers").select("analysis").eq("user_id",t).order("created_at",{ascending:!1}).limit(1);return{data:e,error:r}}async submitUserCheckIn(t){let e=(await this.supabase.auth.getUser()).data.user?.id,{error:r}=await this.supabase.rpc("perform_checkin",{in_user_id:e,in_answers:t.answers,in_analysis:t.analysis});return{error:r}}async canLoadCheckInQuestions(){let t=this.supabaseService.user()?.id;if(t===null)throw new Error("User not authenticated");let{data:e,error:r}=await this.supabase.rpc("can_checkin",{user_id:t});return!r&&e===!0}static \u0275fac=function(e){return new(e||n)(F(Ce))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var sL=(n,t)=>({"alert-success":n,"alert-danger":t});function aL(n,t){if(n&1&&(u(0,"div",18),f(1),c()),n&2){let e=w();v("ngClass",Dt(2,sL,e.messageType==="success",e.messageType==="error")),m(),O(" ",e.message," ")}}function lL(n,t){if(n&1){let e=Q();it(0),u(1,"input",27),Ve("ngModelChange",function(i){I(e);let o=w().$implicit;return qe(o.choicesInput,i)||(o.choicesInput=i),T(i)}),x("change",function(){I(e);let i=w().$implicit,o=w();return T(o.updateChoices(i))}),c(),u(2,"div",28),f(3,'e.g., "Option A, Option B, Option C"'),c(),ot()}if(n&2){let e=w().$implicit;m(),Le("ngModel",e.choicesInput)}}function cL(n,t){if(n&1){let e=Q();u(0,"tr")(1,"td")(2,"select",19),Ve("ngModelChange",function(i){let o=I(e).$implicit;return qe(o.question_data.question_type,i)||(o.question_data.question_type=i),T(i)}),x("change",function(){let i=I(e).$implicit,o=w();return T(o.onQuestionChange(i))}),u(3,"option",9),f(4,"Fill"),c(),u(5,"option",10),f(6,"Multiple"),c(),u(7,"option",11),f(8,"Select One"),c()()(),u(9,"td")(10,"input",20),Ve("ngModelChange",function(i){let o=I(e).$implicit;return qe(o.question_data.question_icon,i)||(o.question_data.question_icon=i),T(i)}),x("change",function(){let i=I(e).$implicit,o=w();return T(o.onQuestionChange(i))}),c()(),u(11,"td")(12,"input",21),Ve("ngModelChange",function(i){let o=I(e).$implicit;return qe(o.question_data.question_title,i)||(o.question_data.question_title=i),T(i)}),x("change",function(){let i=I(e).$implicit,o=w();return T(o.onQuestionChange(i))}),c()(),u(13,"td")(14,"textarea",22),Ve("ngModelChange",function(i){let o=I(e).$implicit;return qe(o.question_data.question,i)||(o.question_data.question=i),T(i)}),x("change",function(){let i=I(e).$implicit,o=w();return T(o.onQuestionChange(i))}),c()(),u(15,"td"),C(16,lL,4,1,"ng-container",23),c(),u(17,"td")(18,"input",24),Ve("ngModelChange",function(i){let o=I(e).$implicit;return qe(o.question_data.placeholder,i)||(o.question_data.placeholder=i),T(i)}),x("change",function(){let i=I(e).$implicit,o=w();return T(o.onQuestionChange(i))}),c()(),u(19,"td")(20,"div",25)(21,"input",26),Ve("ngModelChange",function(i){let o=I(e).$implicit;return qe(o.active,i)||(o.active=i),T(i)}),x("change",function(){let i=I(e).$implicit,o=w();return T(o.onQuestionChange(i))}),c()()(),u(22,"td"),f(23),ut(24,"date"),c()()}if(n&2){let e=t.$implicit;m(2),Le("ngModel",e.question_data.question_type),m(8),Le("ngModel",e.question_data.question_icon),m(2),Le("ngModel",e.question_data.question_title),m(2),Le("ngModel",e.question_data.question),m(2),v("ngIf",e.question_data.question_type!=="fill"),m(2),Le("ngModel",e.question_data.placeholder),m(3),Le("ngModel",e.active),m(2),U(dt(24,8,e.updated_at,"short"))}}function uL(n,t){if(n&1){let e=Q();u(0,"div",29)(1,"input",30),Ve("ngModelChange",function(i){I(e);let o=w();return qe(o.newQuestionChoices,i)||(o.newQuestionChoices=i),T(i)}),c()()}if(n&2){let e=w();m(),Le("ngModel",e.newQuestionChoices)}}var zd=class n{constructor(t,e){this.cdr=t;this.supabaseService=e}questions=[];newQuestionText="";newQuestionType="fill";newQuestionChoices="";message="";messageType="success";async ngOnInit(){let t=await this.supabaseService.adminLoadQuestions();this.questions=t.map(e=>z(N({},e),{choicesInput:e.question_data.choices?.join(", ")||""})),this.cdr.markForCheck()}onQuestionChange(t){t.isModified=!0}updateChoices(t){let e=t.choicesInput??"";t.question_data.choices=e.split(",").map(r=>r.trim()).filter(r=>r),t.isModified=!0}addQuestion(){if(!this.newQuestionText.trim())return;let t={question_type:this.newQuestionType,question:this.newQuestionText.trim(),placeholder:this.newQuestionText.trim()};if(this.newQuestionType!=="fill"){let e=this.newQuestionChoices.split(",").map(r=>r.trim()).filter(r=>r);t.choices=e}this.questions.push({question_data:t,choicesInput:this.newQuestionChoices,active:!0,isModified:!0}),this.newQuestionText="",this.newQuestionChoices="",this.newQuestionType="fill",this.cdr.detectChanges()}async saveChanges(){let{error:t}=await this.supabaseService.adminSaveQuestions(this.questions);t?this.showMessage("Error saving questions","error"):this.showMessage("Questions saved successfully","success"),this.cdr.detectChanges()}async deleteQuestion(t){if(!t.question_id){this.questions=this.questions.filter(r=>r!==t),this.showMessage("Question removed locally","success"),this.cdr.markForCheck();return}let{error:e}=await this.supabaseService.deleteQuestion(t);e?this.showMessage("Error deleting question","error"):(this.questions=this.questions.filter(r=>r.question_id!==t.question_id),this.showMessage("Question deleted successfully","success")),this.cdr.markForCheck()}showMessage(t,e){this.message=t,this.messageType=e,this.cdr.markForCheck(),setTimeout(()=>{this.message="",this.cdr.markForCheck()},4e3)}hasChanges(){return this.questions.some(t=>t.isModified)}static \u0275fac=function(e){return new(e||n)(D(re),D(As))};static \u0275cmp=$({type:n,selectors:[["app-admin-emotion-dashboard"]],decls:53,vars:6,consts:[[1,"container-fluid","mt-4","p-5"],["class","alert",3,"ngClass",4,"ngIf"],[1,"table","mt-5"],[4,"ngFor","ngForOf"],["href","https://fonts.google.com/icons","target","_blank"],[1,"mt-4"],[1,"row","g-3","align-items-center","mb-3"],[1,"col-md-3"],[1,"form-select",3,"ngModelChange","ngModel"],["value","fill"],["value","multiple"],["value","select-one"],[1,"col-md-5"],["type","text","placeholder","Enter question text",1,"form-control",3,"ngModelChange","ngModel"],["class","col-md-4",4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click","disabled"],[1,"alert",3,"ngClass"],[1,"form-select",3,"ngModelChange","change","ngModel"],["type","text","placeholder","Enter icon URL or name",1,"form-control",3,"ngModelChange","change","ngModel"],["type","text","placeholder","Enter question title",1,"form-control",3,"ngModelChange","change","ngModel"],["type","text",1,"form-control",3,"ngModelChange","change","ngModel"],[4,"ngIf"],["type","text","placeholder","Enter placeholder text",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"form-check","form-switch"],["type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel"],["type","text","placeholder","Comma-separated choices",1,"form-control","mb-1",3,"ngModelChange","change","ngModel"],[1,"text-muted","small"],[1,"col-md-4"],["type","text","placeholder","Comma-separated choices",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,r){e&1&&(u(0,"div",0),C(1,aL,2,5,"div",1),u(2,"h1"),f(3,"Admin Emotion Question Dashboard"),c(),u(4,"table",2)(5,"thead")(6,"tr")(7,"th"),f(8,"Type"),c(),u(9,"th"),f(10,"Question Icon"),c(),u(11,"th"),f(12,"Question Title"),c(),u(13,"th"),f(14,"Question Text"),c(),u(15,"th"),f(16,"Choices"),c(),u(17,"th"),f(18,"Placeholder"),c(),u(19,"th"),f(20,"Active"),c(),u(21,"th"),f(22,"Last Updated"),c()()(),u(23,"tbody"),C(24,cL,25,11,"tr",3),c()(),u(25,"label"),f(26,"For icons, go to this website: "),u(27,"a",4),f(28,"https://fonts.google.com/icons"),c(),f(29,". "),_(30,"br"),f(31,"Search for favourite icon. When you click your icon, you will look for the name of the icon and "),_(32,"br"),f(33," put it into the space"),c(),u(34,"h4",5),f(35,"Add New Question"),c(),u(36,"div",6)(37,"div",7)(38,"select",8),Ve("ngModelChange",function(o){return qe(r.newQuestionType,o)||(r.newQuestionType=o),o}),u(39,"option",9),f(40,"Fill"),c(),u(41,"option",10),f(42,"Multiple"),c(),u(43,"option",11),f(44,"Select One"),c()()(),u(45,"div",12)(46,"input",13),Ve("ngModelChange",function(o){return qe(r.newQuestionText,o)||(r.newQuestionText=o),o}),c()(),C(47,uL,2,1,"div",14),c(),u(48,"div",15)(49,"button",16),x("click",function(){return r.addQuestion()}),f(50,"Add Question"),c(),u(51,"button",17),x("click",function(){return r.saveChanges()}),f(52,"Save Changes"),c()()()),e&2&&(m(),v("ngIf",r.message),m(23),v("ngForOf",r.questions),m(14),Le("ngModel",r.newQuestionType),m(8),Le("ngModel",r.newQuestionText),m(),v("ngIf",r.newQuestionType!=="fill"),m(4),v("disabled",!r.hasChanges()))},dependencies:[sr,Kt,Zt,he,Hr,Qt,ve,zr,q,qt,Je,ee,er],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:auto}.question-row[_ngcontent-%COMP%]{position:relative}.delete-button[_ngcontent-%COMP%]{display:none;position:absolute;right:10px;top:50%;transform:translateY(-50%)}.question-row[_ngcontent-%COMP%]:hover   .delete-button[_ngcontent-%COMP%]{display:block}.alert[_ngcontent-%COMP%]{padding:10px 20px;margin-bottom:15px;border-radius:4px;text-align:center}.table[_ngcontent-%COMP%]{--bs-table-bg: transparent}"]})};var L0=(n,t)=>t.some(e=>n instanceof e),l1,c1;function dL(){return l1||(l1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fL(){return c1||(c1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var V0=new WeakMap,R0=new WeakMap,qd=new WeakMap;function pL(n){let t=new Promise((e,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{e(ho(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return qd.set(t,n),t}function hL(n){if(V0.has(n))return;let t=new Promise((e,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{e(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});V0.set(n,t)}var j0={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return V0.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ho(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function p1(n){j0=n(j0)}function mL(n){return fL().includes(n)?function(...t){return n.apply(U0(this),t),ho(this.request)}:function(...t){return ho(n.apply(U0(this),t))}}function gL(n){return typeof n=="function"?mL(n):(n instanceof IDBTransaction&&hL(n),L0(n,dL())?new Proxy(n,j0):n)}function ho(n){if(n instanceof IDBRequest)return pL(n);if(R0.has(n))return R0.get(n);let t=gL(n);return t!==n&&(R0.set(n,t),qd.set(t,n)),t}var U0=n=>qd.get(n);function ml(n,t,{blocked:e,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,t),a=ho(s);return r&&s.addEventListener("upgradeneeded",l=>{r(ho(s.result),l.oldVersion,l.newVersion,ho(s.transaction),l)}),e&&s.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var vL=["get","getKey","getAll","getAllKeys","count"],yL=["put","add","delete","clear"],F0=new Map;function u1(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(F0.get(t))return F0.get(t);let e=t.replace(/FromIndex$/,""),r=t!==e,i=yL.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||vL.includes(e)))return;let o=async function(s,...a){let l=this.transaction(s,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[e](...a),i&&l.done]))[0]};return F0.set(t,o),o}p1(n=>z(N({},n),{get:(t,e,r)=>u1(t,e)||n.get(t,e,r),has:(t,e)=>!!u1(t,e)||n.has(t,e)}));var _L=["continue","continuePrimaryKey","advance"],d1={},B0=new WeakMap,h1=new WeakMap,bL={get(n,t){if(!_L.includes(t))return n[t];let e=d1[t];return e||(e=d1[t]=function(...r){B0.set(this,h1.get(this)[t](...r))}),e}};async function*wL(...n){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...n)),!t)return;t=t;let e=new Proxy(t,bL);for(h1.set(e,t),qd.set(e,U0(t));t;)yield e,t=await(B0.get(e)||t.continue()),B0.delete(e)}function f1(n,t){return t===Symbol.asyncIterator&&L0(n,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&L0(n,[IDBIndex,IDBObjectStore])}p1(n=>z(N({},n),{get(t,e,r){return f1(t,e)?wL:n.get(t,e,r)},has(t,e){return f1(t,e)||n.has(t,e)}}));var Yt=class n{constructor(t,e){this.supabaseService=t;this.platformId=e;this.supabase=this.supabaseService.GetClient()}supabase;ngOnInit(){}async getUserTradeAccounts(){let t=this.supabaseService.user();if(!t)throw new Error("User not authenticated");let e="tradeaccount",r=!1,i=null;if(typeof window<"u"){r=sessionStorage.getItem(`${e}_refresh`)==="yes";let a=sessionStorage.getItem(e);if(a)try{i=JSON.parse(a)}catch(l){console.error("Error parsing cached trade accounts:",l),i=null}}if(!r&&i)return i;let{data:o,error:s}=await this.supabase.from(e).select("*").eq("user_id",t.id);if(s)throw console.error("Error fetching trade accounts:",s),s;return typeof window<"u"&&(sessionStorage.setItem(e,JSON.stringify(o)),sessionStorage.removeItem(`${e}_refresh`)),o||[]}async addTradeAccount(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let d=t,{track_pl:r,include_in_analytics:i,trading_instruments:o}=d,s=wo(d,["track_pl","include_in_analytics","trading_instruments"]),a={track_pl:r,include_in_analytics:i,trading_instruments:o},{error:l}=await this.supabase.from("tradeaccount").insert([z(N({},s),{user_id:e.id,metadata:a})]);return l?(console.error("Failed to add trade account:",l),!1):(sessionStorage.setItem("tradeaccount_refresh","yes"),!0)}async editTradeAccount(t,e){let r=this.supabaseService.user();if(!r)throw new Error("User not authenticated");let p=e,{track_pl:i,include_in_analytics:o,trading_instruments:s}=p,a=wo(p,["track_pl","include_in_analytics","trading_instruments"]),l={track_pl:i,include_in_analytics:o,trading_instruments:s},{error:d}=await this.supabase.from("tradeaccount").update(z(N({},a),{metadata:l})).eq("account_id",t).eq("user_id",r.id);return d?(console.error("Failed to update trade account:",d),!1):(sessionStorage.setItem("tradeaccount_refresh","yes"),!0)}async removeTradeAccount(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let{error:r}=await this.supabase.from("tradejournal").delete().eq("trade_account_id",t).eq("userid",e.id);if(r)return console.error("Failed to delete associated trade logs:",r),!1;let{error:i}=await this.supabase.from("tradeaccount").delete().eq("account_id",t).eq("user_id",e.id);return i?(console.error("Failed to remove trade account:",i),!1):(typeof window<"u"&&(sessionStorage.setItem("tradeaccount_refresh","yes"),sessionStorage.setItem(`tradejournal_${t}_refresh`,"yes")),!0)}async getProfile(){console.log("getting profile picture");let t=this.supabaseService.user();if(!t)throw new Error("User not authenticated");return this.supabase.from("usersaccount").select("*").eq("user_id",t.id).single()}async createProfile(t){if(!this.supabaseService.user())throw new Error("User not authenticated");return this.supabase.from("usersaccount").insert(t)}async updateProfile(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");return this.supabase.from("usersaccount").update(t).eq("user_id",e.id)}async uploadProfilePicture(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let r=t.name.split(".").pop(),i=`${e.id}/profile.${r}`;await(await ml("profile-cache",1,{upgrade(a){a.createObjectStore("pictures")}})).delete("pictures",i);let{error:s}=await this.supabase.storage.from("user-profile-pictures").upload(i,t,{upsert:!0});return s?null:i}async cacheProfilePictureBlob(t,e){await(await ml("profile-cache",1,{upgrade(i){i.createObjectStore("pictures")}})).put("pictures",e,t)}async getCachedProfilePictureBlobUrl(t){if(!t)return null;let e=await ml("profile-cache",1,{upgrade(a){a.createObjectStore("pictures")}}),r=await e.get("pictures",t);if(r)return URL.createObjectURL(r);let i=await this.getPublicUrl(t);if(!i)return null;let o=await fetch(i);if(!o.ok)return null;let s=await o.blob();return await e.put("pictures",s,t),URL.createObjectURL(s)}clearCachedProfilePictureBlobUrl(){if(Dn(this.platformId)){let t=sessionStorage.getItem("profile_picture_blob_url");t&&(URL.revokeObjectURL(t),sessionStorage.removeItem("profile_picture_blob_url"))}}async deleteProfilePicture(){let{data:{user:t}}=await this.supabase.auth.getUser();if(!t)return;let e=`${t.id}/profile.png`,r=`${t.id}/profile.jpg`,i=`${t.id}/profile.jpeg`,o=`${t.id}/profile.webp`;await this.supabase.storage.from("user-profile-pictures").remove([e,r,i,o]);let s=await ml("profile-cache",1,{upgrade(a){a.createObjectStore("pictures")}});await s.delete("pictures",e),await s.delete("pictures",r),await s.delete("pictures",i),await s.delete("pictures",o)}async getPublicUrl(t){let{data:e}=await this.supabase.storage.from("user-profile-pictures").createSignedUrl(t,60);return e?.signedUrl??null}static \u0275fac=function(e){return new(e||n)(F(Ce),F(Et))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var ar=class n{constructor(t,e,r,i){this.supabaseService=t;this.supabaseAccountService=e;this.router=r;this.document=i;this.supabase=this.supabaseService.GetClient(),this.rootDomainName="https://app.tradingrehab.io/auth/update-password"}supabase;rootDomainName;async signIn(t,e){try{let{error:r}=await this.supabase.auth.signInWithPassword({email:t,password:e});if(r)throw r;return{success:!0}}catch(r){return console.error("Sign in error:",r),{success:!1,error:r}}}async logout(t=!0){try{await this.supabase.auth.signOut()}catch(e){console.error("Sign out error:",e)}this.supabaseService.updateSignalsFromSession(null),this.supabaseAccountService.clearCachedProfilePictureBlobUrl(),Dn(this.supabaseService.platformId)&&(sessionStorage.clear(),localStorage.clear()),t&&this.router.navigate(["/"])}async signUp(t,e,r,i){let{error:o}=await this.supabase.auth.signUp({email:t,password:e,options:{data:{firstname:r,lastname:i}}});return o?{success:!1,error:o}:{success:!0}}async requestPasswordReset(t){let{error:e}=await this.supabase.auth.resetPasswordForEmail(t,{redirectTo:"https://app.tradingrehab.io/#/?returnUrl=%2Fauth%2Fupdate-password"});return e?{success:!1,error:e}:{success:!0}}async updatePassword(t){let{error:e}=await this.supabase.auth.updateUser({password:t});return e?{success:!1,error:e}:{success:!0}}static \u0275fac=function(e){return new(e||n)(F(Ce),F(Yt),F(gt),F(je))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};function EL(n,t){if(n&1&&(u(0,"div",13),f(1),c()),n&2){let e=w();m(),O(" ",e.errorMessage," ")}}function CL(n,t){n&1&&(u(0,"div",28),f(1," A valid email is required. "),c())}function SL(n,t){n&1&&(u(0,"div",28),f(1," Password must be at least 6 characters. "),c())}function DL(n,t){if(n&1){let e=Q();u(0,"form",14),x("ngSubmit",function(){I(e);let i=w();return T(i.onSubmit())}),u(1,"div",15)(2,"label",16),f(3,"Email"),c(),_(4,"input",17),C(5,CL,2,0,"div",18),c(),u(6,"div",15)(7,"label",19),f(8,"Password"),c(),_(9,"input",20),C(10,SL,2,0,"div",18),u(11,"div",21)(12,"a",22),f(13,"Forgot password?"),c()()(),u(14,"div",23)(15,"button",24),f(16,"Continue"),c()(),u(17,"div",25)(18,"p",26),f(19,"Don't have an account? "),u(20,"a",27),x("click",function(){I(e);let i=w();return T(i.setActiveTab("signup"))}),f(21,"Sign up"),c()()()()}if(n&2){let e,r,i=w();v("formGroup",i.signinForm),m(5),v("ngIf",((e=i.signinForm.get("email"))==null?null:e.invalid)&&((e=i.signinForm.get("email"))==null?null:e.touched)),m(5),v("ngIf",((r=i.signinForm.get("password"))==null?null:r.invalid)&&((r=i.signinForm.get("password"))==null?null:r.touched)),m(5),v("disabled",i.signinForm.invalid)}}function xL(n,t){n&1&&(u(0,"small",43),f(1," First name is required "),c())}function IL(n,t){n&1&&(u(0,"small",43),f(1," Last name is required "),c())}function TL(n,t){n&1&&(u(0,"small",43),f(1," Valid email is required "),c())}function ML(n,t){n&1&&(u(0,"small",43),f(1," Password must be at least 6 characters "),c())}function AL(n,t){n&1&&(u(0,"small",43),f(1," Passwords do not match "),c())}function kL(n,t){if(n&1){let e=Q();u(0,"form",14),x("ngSubmit",function(){I(e);let i=w();return T(i.onSignupSubmit())}),u(1,"div",29)(2,"div",30)(3,"label",31),f(4,"First Name"),c(),_(5,"input",32),C(6,xL,2,0,"small",33),c(),u(7,"div",30)(8,"label",34),f(9,"Last Name"),c(),_(10,"input",35),C(11,IL,2,0,"small",33),c()(),u(12,"div",15)(13,"label",36),f(14,"Email"),c(),_(15,"input",37),C(16,TL,2,0,"small",33),c(),u(17,"div",15)(18,"label",38),f(19,"Password"),c(),_(20,"input",39),C(21,ML,2,0,"small",33),c(),u(22,"div",15)(23,"label",40),f(24,"Confirm Password"),c(),_(25,"input",41),C(26,AL,2,0,"small",33),c(),u(27,"div",21)(28,"a",22),f(29,"Forgot password?"),c()(),u(30,"div",23)(31,"button",24),f(32,"Create Account"),c()(),u(33,"div",25)(34,"p",26),f(35,"Already have an account? "),u(36,"a",42),x("click",function(){I(e);let i=w();return T(i.setActiveTab("login"))}),f(37,"Login"),c()()()()}if(n&2){let e,r,i,o,s,a=w();v("formGroup",a.signupForm),m(6),v("ngIf",((e=a.signupForm.get("firstname"))==null?null:e.invalid)&&((e=a.signupForm.get("firstname"))==null?null:e.touched)),m(5),v("ngIf",((r=a.signupForm.get("lastname"))==null?null:r.invalid)&&((r=a.signupForm.get("lastname"))==null?null:r.touched)),m(5),v("ngIf",((i=a.signupForm.get("email"))==null?null:i.invalid)&&((i=a.signupForm.get("email"))==null?null:i.touched)),m(5),v("ngIf",((o=a.signupForm.get("password"))==null?null:o.invalid)&&((o=a.signupForm.get("password"))==null?null:o.touched)),m(5),v("ngIf",a.signupForm.hasError("mismatch")&&((s=a.signupForm.get("confirmPassword"))==null?null:s.touched)),m(5),v("disabled",a.signupForm.invalid)}}var Wd=class n{constructor(t,e,r,i,o,s,a){this.fb=t;this.router=e;this.route=r;this.cdr=i;this.supabaseService=o;this.supabaseAuthService=s;this.supabaseAccountService=a;this.signinForm=this.fb.group({email:["",[R.required,R.email]],password:["",[R.required,R.minLength(6)]]}),this.signupForm=this.fb.group({firstname:["",R.required],lastname:["",R.required],email:["",[R.required,R.email]],password:["",[R.required,R.minLength(6)]],confirmPassword:["",R.required]},{validators:this.passwordMatchValidator})}activeTab="login";signinForm;signupForm;errorMessage=null;ngOnInit(){this.route.queryParams.subscribe(t=>{t.mode==="signup"&&(this.activeTab="signup")})}passwordMatchValidator(t){let e=t.get("password")?.value,r=t.get("confirmPassword")?.value;return e===r?null:{mismatch:!0}}setActiveTab(t){this.activeTab=t,this.errorMessage=null}async onSubmit(){if(this.signinForm.invalid){this.signinForm.markAllAsTouched();return}let{email:t,password:e}=this.signinForm.getRawValue();try{if(await this.supabaseAuthService.signIn(t,e),!this.supabaseService.currentUsername()){this.errorMessage="Login failed. Please try again.",this.cdr.markForCheck();return}this.signinForm.reset();let r=this.route.snapshot.queryParams.returnUrl||"/home";this.router.navigateByUrl(r),this.cdr.markForCheck()}catch(r){this.errorMessage=r.message||"An unexpected error occurred.",this.cdr.markForCheck()}}async onSignupSubmit(){if(this.signupForm.invalid){this.errorMessage="Please fill them correctly.",this.signupForm.markAllAsTouched(),this.cdr.markForCheck();return}let{email:t,password:e,firstname:r,lastname:i}=this.signupForm.getRawValue();try{let{success:o,error:s}=await this.supabaseAuthService.signUp(t,e,r,i);if(!o){this.errorMessage=s?.message||"Signup failed.",this.cdr.markForCheck();return}let a=this.supabaseService.user();if(!a){this.errorMessage="User not found after signup.",this.cdr.markForCheck();return}await this.supabaseAccountService.createProfile({user_id:a.id,firstname:r,lastname:i,email:t,phone:null,profile_picture_url:null,updated_at:new Date().toISOString(),preferences:{},metadata:{}}),this.signupForm.reset(),this.router.navigateByUrl("/home"),this.cdr.markForCheck()}catch(o){this.errorMessage=o.message||"An unexpected error occurred.",this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(D(xt),D(gt),D(fn),D(re),D(Ce),D(ar),D(Yt))};static \u0275cmp=$({type:n,selectors:[["app-login-signup"]],decls:20,vars:7,consts:[[1,"auth-container"],[1,"auth-card"],[1,"text-center","mb-4"],[1,"logo-circle","mx-auto"],["src","/tr_logo.svg","alt","Logo",1,"img-fluid"],[1,"brand-name","mt-3"],[1,"brand-tagline"],[1,"auth-tabs","d-flex","justify-content-center","mb-4"],[1,"tabs-container"],[1,"tab",3,"click"],[1,"mx-2","tab-separator"],["class","alert alert-danger mb-3",4,"ngIf"],["class","auth-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert","alert-danger","mb-3"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"form-control"],[1,"d-flex","justify-content-end","mt-2"],["routerLink","/auth/forgot-password",1,"forgot-link"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-tr","btn-primary","btn-md",3,"disabled"],[1,"text-center","mt-4"],[1,"mb-0"],["href","javascript:void(0)",1,"signup-link",3,"click"],[1,"text-danger","small","mt-1"],[1,"row"],[1,"col-md-6","mb-3"],["for","firstname",1,"form-label"],["type","text","id","firstname","formControlName","firstname","placeholder","First name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","lastname",1,"form-label"],["type","text","id","lastname","formControlName","lastname","placeholder","Last name",1,"form-control"],["for","signup-email",1,"form-label"],["type","email","id","signup-email","formControlName","email","placeholder","Enter your email",1,"form-control"],["for","signup-password",1,"form-label"],["type","password","id","signup-password","formControlName","password","placeholder","Create a password",1,"form-control"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password",1,"form-control"],["href","javascript:void(0)",1,"login-link",3,"click"],[1,"text-danger"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),_(4,"img",4),c(),u(5,"h2",5),f(6,"TRADING REHAB"),c(),u(7,"p",6),f(8,"Where Disciplined Trading Begins"),c()(),u(9,"div",7)(10,"div",8)(11,"span",9),x("click",function(){return r.setActiveTab("login")}),f(12,"Login"),c(),u(13,"span",10),f(14,"\u2022"),c(),u(15,"span",9),x("click",function(){return r.setActiveTab("signup")}),f(16,"Sign Up"),c()()(),C(17,EL,2,1,"div",11)(18,DL,22,4,"form",12)(19,kL,38,7,"form",12),c()()),e&2&&(m(11),Pt("active",r.activeTab==="login"),m(4),Pt("active",r.activeTab==="signup"),m(2),v("ngIf",r.errorMessage),m(),v("ngIf",r.activeTab==="login"),m(),v("ngIf",r.activeTab==="signup"))},dependencies:[q,ee,be,Wt,he,ve,Ne,Me,Oe,Ue],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100dvh;display:flex;align-items:center;justify-content:center}.auth-card[_ngcontent-%COMP%]{background-color:transparent;border-radius:12px;width:100%;max-width:450px;padding:30px}.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:transparent;position:relative;display:flex;align-items:center;justify-content:center;margin:0 auto}.dots-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;position:relative;background-image:radial-gradient(circle,#5046e5 3px,transparent 3px);background-size:15px 15px;transform:rotate(45deg)}.brand-name[_ngcontent-%COMP%]{font-weight:700;font-size:24px;margin-bottom:5px;letter-spacing:.5px}.brand-tagline[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.tabs-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-bottom:1px solid #eee;padding-bottom:5px}.tab[_ngcontent-%COMP%]{padding:8px 15px;cursor:pointer;color:#888;font-weight:500;font-size:16px;transition:color .2s}.tab.active[_ngcontent-%COMP%]{color:#5046e5;border-bottom:2px solid #5046e5}.tab-separator[_ngcontent-%COMP%]{color:#ccc}.auth-form[_ngcontent-%COMP%]{margin-top:10px}.form-control[_ngcontent-%COMP%]{height:auto;padding:12px 15px;border-radius:8px;border:1px solid #ddd;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{border-color:#5046e5;box-shadow:0 0 0 .2rem #5046e526}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555;margin-bottom:8px}.forgot-link[_ngcontent-%COMP%]{font-size:14px;color:#5046e5;text-decoration:none}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{color:#5046e5;font-weight:500;text-decoration:none}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-primary[_ngcontent-%COMP%]{background-color:#5046e5;border-color:#5046e5;padding:12px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus{background-color:#4238d0;border-color:#4238d0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#a8a4e0;border-color:#a8a4e0}.separator[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;color:#888;font-size:14px}.separator[_ngcontent-%COMP%]:before, .separator[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #ddd}.separator[_ngcontent-%COMP%]:before{margin-right:1em}.separator[_ngcontent-%COMP%]:after{margin-left:1em}.google-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;border:1px solid #ddd;color:#333;padding:12px;font-weight:500}.google-btn[_ngcontent-%COMP%]:hover{background-color:#f8f8f8;color:#333}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{padding:20px 15px}.brand-name[_ngcontent-%COMP%]{font-size:20px}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{padding:10px}}']})};var NL=["fileInput"],PL=(n,t)=>({"btn-danger":n,"btn-success":t}),OL=(n,t)=>({"fa-pause":n,"fa-play":t}),m1=(n,t)=>({"btn-success":n,"btn-light text-dark":t});function RL(n,t){if(n&1&&(u(0,"div",40),f(1),c()),n&2){let e=w();m(),O(" ",e.message," ")}}function FL(n,t){if(n&1){let e=Q();u(0,"div",41)(1,"div",42),x("click",function(){let i=I(e).$implicit,o=w();return T(o.playMedia(i))}),u(2,"img",43),x("error",function(i){let o=I(e).$implicit,s=w();return T(s.onImageError(i,o.type))}),c(),u(3,"div",44)(4,"h3",45),f(5),c(),u(6,"p",46),f(7),c()()()()}if(n&2){let e=t.$implicit;m(2),v("src",e.thumbnail,Ln)("alt",e.title),m(3),U(e.title),m(2),U(e.type)}}function LL(n,t){if(n&1){let e=Q();u(0,"div",47)(1,"h3",48),f(2),c(),u(3,"div",49),_(4,"iframe",50),c(),u(5,"div",51)(6,"button",52),x("click",function(){I(e);let i=w();return T(i.selectedMedia=null)}),_(7,"i",53),f(8," Stop Playing "),c()()()}if(n&2){let e=w();m(2),O("Now Playing: ",e.selectedMedia.title,""),m(2),v("src",e.selectedMedia.url,Yh)("title",e.selectedMedia.title)}}function VL(n,t){n&1&&(u(0,"p",54),f(1,"Select a video or audio from the catalog to play."),c())}function jL(n,t){if(n&1&&(u(0,"div",57)(1,"p",58),f(2),c(),u(3,"p",59),f(4),c()()),n&2){let e=t.$implicit;m(2),U(e.date),m(2),U(e.content)}}function UL(n,t){if(n&1&&(u(0,"div",55),C(1,jL,5,2,"div",56),c()),n&2){let e=w();m(),v("ngForOf",e.savedEntries)}}function BL(n,t){n&1&&(u(0,"p",60),f(1,"No journal entries yet."),c())}function $L(n,t){if(n&1){let e=Q();u(0,"div",51)(1,"label",72),f(2," Choose a color: "),c(),u(3,"input",73),Ve("ngModelChange",function(i){I(e);let o=w(2);return qe(o.backgroundColor,i)||(o.backgroundColor=i),T(i)}),c(),u(4,"div",74),f(5),c()()}if(n&2){let e=w(2);m(3),Le("ngModel",e.backgroundColor),m(2),O("Current Color: ",e.backgroundColor,"")}}function HL(n,t){if(n&1&&(u(0,"div",80)(1,"h3",81),f(2,"Image Preview:"),c(),_(3,"img",82),c()),n&2){let e=w(3);m(3),v("src",e.backgroundImage,Ln)}}function zL(n,t){if(n&1){let e=Q();u(0,"div",51)(1,"label",75),f(2,"Upload an image:"),c(),u(3,"input",76,2),x("change",function(i){I(e);let o=w(2);return T(o.handleImageUpload(i))}),c(),u(5,"button",77),x("click",function(){I(e);let i=w(2);return T(i.openFileInput())}),_(6,"i",78),f(7," Select Image "),c(),C(8,HL,4,1,"div",79),c()}if(n&2){let e=w(2);m(8),v("ngIf",e.backgroundImage)}}function qL(n,t){if(n&1){let e=Q();u(0,"div",61)(1,"div",62)(2,"div",63)(3,"div",64)(4,"button",65),x("click",function(){I(e);let i=w();return T(i.showSettingsModal=!1)}),c()(),u(5,"div",66)(6,"h2",67),f(7,"Customize Background"),c(),u(8,"div",68)(9,"button",69),x("click",function(){I(e);let i=w();return T(i.backgroundType="color")}),f(10," Solid Color "),c(),u(11,"button",69),x("click",function(){I(e);let i=w();return T(i.backgroundType="image")}),f(12," Image "),c()(),C(13,$L,6,2,"div",70)(14,zL,9,1,"div",70),u(15,"div",71)(16,"button",33),x("click",function(){I(e);let i=w();return T(i.showSettingsModal=!1)}),f(17," Done "),c()()()()()()}if(n&2){let e=w();m(9),v("ngClass",Dt(4,m1,e.backgroundType==="color",e.backgroundType!=="color")),m(2),v("ngClass",Dt(7,m1,e.backgroundType==="image",e.backgroundType!=="image")),m(2),v("ngIf",e.backgroundType==="color"),m(),v("ngIf",e.backgroundType==="image")}}var Qd=class n{meditationDuration=lt(10);timeLeft=lt(10*60);isRunning=!1;timerInterval;backgroundType="color";backgroundColor="#ffffff";backgroundImage="";fileInputRef;showSettingsModal=!1;journalEntry="";savedEntries=[];message="";mediaLibrary=[{id:1,type:"video",title:"Calm Forest Walk",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Forest+Walk",url:"https://www.youtube.com/embed/videoseries?list=PL_lP4l4g0l2Q0Q0Q0Q0Q0Q0Q0Q0Q0Q0Q"},{id:2,type:"audio",title:"Ocean Waves",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Ocean+Waves",url:"https://www.youtube.com/embed/videoseries?list=PL_lP4l4g0l2Q0Q0Q0Q0Q0Q0Q0Q0Q0Q0Q"},{id:3,type:"video",title:"Zen Garden",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Zen+Garden",url:"https://www.youtube.com/embed/videoseries?list=PL_lP4l4g0l2Q0Q0Q0Q0Q0Q0Q0Q0Q0Q0Q"},{id:4,type:"audio",title:"Gentle Rain",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Gentle+Rain",url:"https://www.youtube.com/embed/videoseries?list=PL_lP4l4g0l2Q0Q0Q0Q0Q0Q0Q0Q0Q0Q0Q"}];selectedMedia=null;ngOnInit(){this.resetTimer()}ngOnDestroy(){this.clearTimer()}formatTime(t){let e=Math.floor(t()/60),r=t()%60;return`${e.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}handleTimerToggle(){this.isRunning=!this.isRunning,this.setMessage(""),this.isRunning?this.timerInterval=setInterval(()=>{this.timeLeft.update(t=>t-1),this.timeLeft()===0&&(this.clearTimer(),this.isRunning=!1,this.setMessage("Meditation complete! \u{1F64F}"))},1e3):this.clearTimer()}handleTimerReset(){this.clearTimer(),this.isRunning=!1,this.timeLeft.set(this.meditationDuration()*60),this.setMessage("")}clearTimer(){this.timerInterval&&clearInterval(this.timerInterval)}resetTimer(){this.handleTimerReset()}onDurationChange(t){let e=isNaN(t)||t<1?1:Math.floor(t);this.meditationDuration.set(e),this.resetTimer()}handleImageUpload(t){let e=t.target;if(e.files&&e.files[0]){let r=e.files[0],i=new FileReader;i.onloadend=()=>{this.backgroundImage=i.result,this.backgroundType="image",this.setMessage("Image uploaded successfully!")},i.readAsDataURL(r)}}openFileInput(){this.fileInputRef.nativeElement.click()}saveJournalEntry(){if(this.journalEntry.trim()){let t={id:Date.now(),date:new Date().toLocaleString(),content:this.journalEntry.trim()};this.savedEntries.push(t),this.journalEntry="",this.setMessage("Journal entry saved!"),console.log("Journal Entry Saved:",t)}else this.setMessage("Journal entry cannot be empty.")}playMedia(t){this.selectedMedia=t,this.setMessage(`Now playing: ${t.title}`),console.log("Playing media:",t)}onImageError(t,e){let r=t.target;r.onerror=null,r.src=`https://placehold.co/300x180/E0F2F1/004D40?text=${e==="video"?"Video":"Audio"}`}setMessage(t){this.message=t,setTimeout(()=>{this.message=""},3e3)}get backgroundStyle(){return this.backgroundType==="color"?{"background-color":this.backgroundColor}:{"background-image":`url(${this.backgroundImage})`,"background-size":"cover","background-position":"center"}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-meditation-hub"]],viewQuery:function(e,r){if(e&1&&Em(NL,5),e&2){let i;fu(i=pu())&&(r.fileInputRef=i.first)}},decls:60,vars:22,consts:[["noMediaSelected",""],["noEntries",""],["fileInput",""],["rel","stylesheet","href",Jh`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css`,"crossorigin","anonymous","referrerpolicy","no-referrer"],["href",Jh`https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap`,"rel","stylesheet"],[1,"d-flex","flex-column","align-items-center","justify-content-center","p-3","font-inter",3,"ngStyle"],["class","position-absolute top-0 mt-5 bg-white bg-opacity-90 text-dark px-4 py-2 rounded shadow-lg z-index-1000 animate-fade-in-down",4,"ngIf"],[1,"p-4","w-100"],[1,"row","g-4"],[1,"col-12","text-center","p-3"],[1,"fs-2","fw-bold","text-dark"],[1,"text-secondary","mb-0"],[1,"col-12","col-lg-6"],[1,"card","p-4","rounded-3","h-100","d-flex","flex-column","text-center"],[1,"fs-3","fw-bold","text-dark","mb-4"],[1,"display-4","fw-light","text-success","mb-4","p-3","bg-light","rounded-3","shadow-inset","mx-auto",2,"min-width","180px"],[1,"mb-4","w-100"],["for","duration",1,"form-label","text-dark","fs-6","fw-semibold","mb-2"],["type","range","id","duration","min","1","max","60",1,"form-range",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-center","gap-3"],[1,"btn","btn-lg","rounded-pill","text-white","fw-bold","shadow-sm","transition-transform-hover",3,"click","ngClass"],[1,"fas",3,"ngClass"],[1,"btn","btn-lg","btn-secondary","rounded-pill","text-white","fw-bold","shadow-sm","transition-transform-hover",3,"click"],[1,"fas","fa-redo","me-2"],[1,"mt-3","text-secondary","mb-0"],[1,"card","bg-white","bg-opacity-90","p-4","rounded-3","shadow-sm","h-100","d-flex","flex-column"],[1,"fs-3","fw-bold","text-dark","mb-4","text-center"],[1,"row","row-cols-1","row-cols-sm-2","g-3","overflow-auto","flex-grow-1","pe-2"],["class","col",4,"ngFor","ngForOf"],[1,"col-12"],[1,"card","bg-white","bg-opacity-90","p-4","rounded-3","shadow-sm","min-h-150px","d-flex","align-items-center","justify-content-center"],["class","w-100 h-100",4,"ngIf","ngIfElse"],["placeholder","Write about your meditation experience, thoughts, and feelings here...","rows","5",1,"form-control","p-3","rounded-3","border","border-secondary","focus-ring","flex-grow-1","mb-3",3,"ngModelChange","ngModel"],[1,"btn","btn-success","rounded-pill","fw-bold","shadow-sm","transition-transform-hover",3,"click"],[1,"fas","fa-save","me-2"],["class","overflow-auto flex-grow-1 pe-2",4,"ngIf","ngIfElse"],[1,"col-12","text-center","py-3"],["title","Customize Background",1,"btn","btn-lg","rounded-circle","shadow-lg","hover-rotate-45",3,"click"],[1,"fas","fa-cog","fs-4"],["class","modal d-block bg-dark bg-opacity-50","tabindex","-1","role","dialog","style","display: block;",4,"ngIf"],[1,"position-absolute","top-0","mt-5","bg-white","bg-opacity-90","text-dark","px-4","py-2","rounded","shadow-lg","z-index-1000","animate-fade-in-down"],[1,"col"],[1,"card","bg-light","bg-opacity-75","rounded-3","shadow-sm","overflow-hidden","cursor-pointer","hover-shadow-lg","transition-transform-hover",3,"click"],[1,"card-img-top","object-fit-cover",2,"height","120px",3,"error","src","alt"],[1,"card-body","p-3"],[1,"card-title","fs-6","fw-semibold","text-dark","text-truncate","mb-1"],[1,"card-text","text-secondary","text-capitalize","small","mb-0"],[1,"w-100","h-100"],[1,"fs-4","fw-semibold","text-dark","mb-3","text-center"],[1,"ratio","ratio-16x9","rounded-3","overflow-hidden","mb-3"],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src","title"],[1,"text-center"],[1,"btn","btn-danger","rounded-pill","transition-transform-hover",3,"click"],[1,"fas","fa-stop","me-2"],[1,"text-secondary","fs-5"],[1,"overflow-auto","flex-grow-1","pe-2"],["class","card bg-light bg-opacity-75 p-3 rounded shadow-sm mb-3",4,"ngFor","ngForOf"],[1,"card","bg-light","bg-opacity-75","p-3","rounded","shadow-sm","mb-3"],[1,"text-secondary","small","mb-1"],[1,"text-dark","small","mb-0",2,"white-space","pre-wrap"],[1,"text-secondary","text-center","flex-grow-1","d-flex","align-items-center","justify-content-center","mb-0"],["tabindex","-1","role","dialog",1,"modal","d-block","bg-dark","bg-opacity-50",2,"display","block"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-3","shadow-lg"],[1,"modal-header","border-0","pb-0"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","p-4","pt-0","text-center"],[1,"fs-2","fw-bold","text-dark","mb-4"],[1,"d-flex","justify-content-center","gap-3","mb-4"],[1,"btn","rounded-pill","fw-semibold","transition-colors-hover",3,"click","ngClass"],["class","text-center",4,"ngIf"],[1,"mt-4","text-center"],["for","modalColorPicker",1,"form-label","text-dark","fs-5","fw-semibold","mb-3"],["type","color","id","modalColorPicker",1,"form-control","form-control-color","mx-auto",2,"width","96px","height","96px",3,"ngModelChange","ngModel"],[1,"mt-3","text-secondary"],[1,"form-label","text-dark","fs-5","fw-semibold","mb-3"],["type","file","accept","image/*",1,"d-none",3,"change"],[1,"btn","btn-primary","rounded-pill","fw-bold","shadow-sm","transition-transform-hover",3,"click"],[1,"fas","fa-upload","me-2"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"fs-5","fw-semibold","text-dark","mb-2"],["alt","Background Preview",1,"img-fluid","rounded-3","shadow-sm","mx-auto",2,"max-height","192px","object-fit","cover",3,"src"]],template:function(e,r){if(e&1){let i=Q();_(0,"link",3)(1,"link",4),u(2,"div",5),C(3,RL,2,1,"div",6),u(4,"div",7)(5,"div",8)(6,"div",9)(7,"h1",10),f(8,"Welcome to Your Meditation Hub!"),c(),u(9,"p",11),f(10,"Find your calm, track your journey."),c()(),u(11,"section",12)(12,"div",13)(13,"h2",14),f(14,"Meditation Timer"),c(),u(15,"div",15),f(16),c(),u(17,"div",16)(18,"label",17),f(19),c(),u(20,"input",18),x("ngModelChange",function(s){return I(i),T(r.onDurationChange(s))}),c()(),u(21,"div",19)(22,"button",20),x("click",function(){return I(i),T(r.handleTimerToggle())}),_(23,"i",21),f(24),c(),u(25,"button",22),x("click",function(){return I(i),T(r.handleTimerReset())}),_(26,"i",23),f(27," Reset "),c()(),u(28,"p",24),f(29),c()()(),u(30,"section",12)(31,"div",25)(32,"h2",26),f(33,"Video & Audio Catalog"),c(),u(34,"div",27),C(35,FL,8,4,"div",28),c()()(),u(36,"section",29)(37,"div",30),C(38,LL,9,3,"div",31)(39,VL,2,0,"ng-template",null,0,fa),c()(),u(41,"section",12)(42,"div",25)(43,"h2",26),f(44,"Meditation Journal"),c(),u(45,"textarea",32),Ve("ngModelChange",function(s){return I(i),qe(r.journalEntry,s)||(r.journalEntry=s),T(s)}),c(),u(46,"button",33),x("click",function(){return I(i),T(r.saveJournalEntry())}),_(47,"i",34),f(48," Save Entry "),c()()(),u(49,"section",12)(50,"div",25)(51,"h2",26),f(52,"Journal History"),c(),C(53,UL,2,1,"div",35)(54,BL,2,0,"ng-template",null,1,fa),c()(),u(56,"div",36)(57,"button",37),x("click",function(){return I(i),T(r.showSettingsModal=!0)}),_(58,"i",38),c()()()(),C(59,qL,18,10,"div",39),c()}if(e&2){let i=Gi(40),o=Gi(55);m(2),v("ngStyle",r.backgroundStyle),m(),v("ngIf",r.message),m(13),O(" ",r.formatTime(r.timeLeft)," "),m(3),O(" Duration (",r.meditationDuration().toString()," min): "),m(),v("ngModel",r.meditationDuration()),m(2),v("ngClass",Dt(16,PL,r.isRunning,!r.isRunning)),m(),v("ngClass",Dt(19,OL,r.isRunning,!r.isRunning)),m(),O(" ",r.isRunning?" Pause":" Start"," "),m(5),O(" ",r.isRunning?"Focus on your breath...":"Ready to begin?"," "),m(6),v("ngForOf",r.mediaLibrary),m(3),v("ngIf",r.selectedMedia)("ngIfElse",i),m(7),Le("ngModel",r.journalEntry),m(8),v("ngIf",r.savedEntries.length>0)("ngIfElse",o),m(6),v("ngIf",r.showSettingsModal)}},dependencies:[q,qt,Je,ee,sE,sr,he,T0,ve,zr],styles:[".font-inter[_ngcontent-%COMP%]{font-family:Inter,sans-serif}.backdrop-filter-blur[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.shadow-inset[_ngcontent-%COMP%]{box-shadow:inset 0 2px 4px #0000000f}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.hover-shadow-lg[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #00000026!important}.transition-transform-hover[_ngcontent-%COMP%]:hover{transform:translateY(-2px);transition:transform .2s ease-in-out}.hover-rotate-45[_ngcontent-%COMP%]:hover{transform:rotate(45deg);transition:transform .3s ease-in-out}.min-h-150px[_ngcontent-%COMP%]{min-height:150px}.animate-fade-in-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInDown .5s ease-out forwards}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.modal.d-block[_ngcontent-%COMP%]{display:flex!important;align-items:center;justify-content:center}"]})};var Kd=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-analytics"]],decls:2,vars:0,consts:[[1,"position-absolute","top-50","start-50","translate-middle"]],template:function(e,r){e&1&&(u(0,"h1",0),f(1,"Analytics Coming soon"),c())},encapsulation:2})};function GL(n,t){if(n&1&&(u(0,"div",1)(1,"div",2)(2,"h5",3),_(3,"i",4),f(4,"Planned Trade "),c(),u(5,"span",5),f(6,"Required"),c()(),u(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),f(11,"Direction"),c(),u(12,"div",10),_(13,"input",11),u(14,"label",12),f(15,"Long"),c(),_(16,"input",13),u(17,"label",14),f(18,"Short"),c()()(),u(19,"div",8)(20,"label",9),f(21,"Entry Price"),c(),_(22,"input",15),c(),u(23,"div",8)(24,"label",9),f(25,"Lot Size"),c(),_(26,"input",16),c(),u(27,"div",8)(28,"label",9),f(29,"Stop Loss"),c(),_(30,"input",17),c(),u(31,"div",8)(32,"label",9),f(33,"Take Profit"),c(),_(34,"input",18),c()()()()),n&2){let e=w();m(7),v("formGroup",e.formGroup)}}var Zd=class n{formGroup;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-planned-trade"]],inputs:{formGroup:"formGroup"},decls:1,vars:1,consts:[["class","card mb-4 shadow-sm",4,"ngIf"],[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","me-2"],[1,"badge","bg-primary"],[1,"card-body",3,"formGroup"],[1,"row","g-3"],[1,"col-md-2"],[1,"form-label"],["role","group",1,"btn-group","w-100"],["type","radio","id","planned_long","value","Long","formControlName","trade_direction",1,"btn-check"],["for","planned_long",1,"btn","btn-outline-success"],["type","radio","id","planned_short","value","Short","formControlName","trade_direction",1,"btn-check"],["for","planned_short",1,"btn","btn-outline-danger"],["type","number","step","0.00001","formControlName","entry_price",1,"form-control"],["type","number","step","0.01","formControlName","lot_size",1,"form-control"],["type","number","step","0.00001","formControlName","stop_loss_price",1,"form-control"],["type","number","step","0.00001","formControlName","take_profit_price",1,"form-control"]],template:function(e,r){e&1&&C(0,GL,35,1,"div",0),e&2&&v("ngIf",r.formGroup)},dependencies:[q,ee,be,he,Hn,mn,ve,Ne,Me,Oe],encapsulation:2})};function WL(n,t){if(n&1&&(u(0,"div",1)(1,"div",2)(2,"h5",3),_(3,"i",4),f(4,"Executing Trade "),c(),u(5,"span",5),f(6,"Required"),c()(),u(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),f(11,"Direction"),c(),u(12,"div",10),_(13,"input",11),u(14,"label",12),f(15,"Long"),c(),_(16,"input",13),u(17,"label",14),f(18,"Short"),c()()(),u(19,"div",8)(20,"label",9),f(21,"Entry Price"),c(),_(22,"input",15),c(),u(23,"div",8)(24,"label",9),f(25,"Lot Size"),c(),_(26,"input",16),c(),u(27,"div",8)(28,"label",9),f(29,"Stop Loss"),c(),_(30,"input",17),c(),u(31,"div",8)(32,"label",9),f(33,"Take Profit"),c(),_(34,"input",18),c(),u(35,"div",8)(36,"label",9),f(37,"Exit Price"),c(),_(38,"input",19),c(),u(39,"div",20)(40,"label",9),f(41,"Entry Time"),c(),_(42,"input",21),c(),u(43,"div",20)(44,"label",9),f(45,"Exit Time"),c(),_(46,"input",22),c(),u(47,"div",20)(48,"label",9),f(49,"Exit Type"),c(),u(50,"select",23)(51,"option",24),f(52,"Select exit type"),c(),u(53,"option",25),f(54,"Target"),c(),u(55,"option",26),f(56,"Stop Loss"),c(),u(57,"option",27),f(58,"Manual"),c()()()()()()),n&2){let e=w();m(7),v("formGroup",e.formGroup)}}var Yd=class n{formGroup;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-executing-trade"]],inputs:{formGroup:"formGroup"},decls:1,vars:1,consts:[["class","card mb-4 shadow-sm",4,"ngIf"],[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","me-2"],[1,"badge","bg-primary"],[1,"card-body",3,"formGroup"],[1,"row","g-3"],[1,"col-md-2"],[1,"form-label"],["role","group",1,"btn-group","w-100"],["type","radio","id","exec_long","value","Long","formControlName","trade_direction",1,"btn-check"],["for","exec_long",1,"btn","btn-outline-success"],["type","radio","id","exec_short","value","Short","formControlName","trade_direction",1,"btn-check"],["for","exec_short",1,"btn","btn-outline-danger"],["type","number","formControlName","entry_price",1,"form-control"],["type","number","formControlName","lot_size",1,"form-control"],["type","number","formControlName","stop_loss_price",1,"form-control"],["type","number","formControlName","take_profit_price",1,"form-control"],["type","number","formControlName","exit_price",1,"form-control"],[1,"col-md-4"],["type","datetime-local","formControlName","entry_time",1,"form-control"],["type","datetime-local","formControlName","exit_time",1,"form-control"],["formControlName","exit",1,"form-select"],["value","","disabled",""],["value","Target"],["value","StopLoss"],["value","Manual"]],template:function(e,r){e&1&&C(0,WL,59,1,"div",0),e&2&&v("ngIf",r.formGroup)},dependencies:[q,ee,be,Kt,Zt,he,Hn,Qt,mn,ve,Ne,Me,Oe],encapsulation:2})};function QL(n,t){if(n&1&&(u(0,"option",32),f(1),c()),n&2){let e=t.$implicit;v("value",e),m(),U(e)}}function KL(n,t){if(n&1&&(it(0),_(1,"app-planned-trade",33),ot()),n&2){let e=w();m(),v("formGroup",e.plannedTradeGroup)}}function ZL(n,t){if(n&1&&(it(0),_(1,"app-executing-trade",33),ot()),n&2){let e=w();m(),v("formGroup",e.executingTradeGroup)}}var Jd=class n{formGroup;tradeStatus;plannedTradeGroup;executingTradeGroup;currencyPairs=["AUD/USD","EUR/USD","GBP/USD","USD/JPY","USD/CHF","USD/CAD","NZD/USD","Gold","Silver","Oil"];static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-trade-setup"]],inputs:{formGroup:"formGroup",tradeStatus:"tradeStatus",plannedTradeGroup:"plannedTradeGroup",executingTradeGroup:"executingTradeGroup"},decls:58,vars:4,consts:[[1,"card","mb-4","shadow-sm",3,"formGroup"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-1-circle","me-2"],[1,"badge","bg-primary"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-6"],["for","trade_symbol",1,"form-label"],["id","trade_symbol","formControlName","trade_symbol",1,"form-select"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","trade_analysis",1,"form-label"],["id","trade_analysis","formControlName","trade_analysis",1,"form-select"],["value","Technical"],["value","Fundamental"],["value","Both"],["value","Sentiment"],["value","Other"],["for","trade_instrument",1,"form-label"],["type","text","id","trade_instrument","formControlName","trade_instrument",1,"form-control"],["for","type_of_order",1,"form-label"],["id","type_of_order","formControlName","type_of_order",1,"form-select"],["value","Market"],["value","Limit"],["value","Stop"],["value","StopLimit"],["value","TrailingStop"],[1,"col-12"],["for","market_condition",1,"form-label"],["id","market_condition","rows","3","formControlName","market_condition","placeholder","Describe current market conditions and relevant factors",1,"form-control"],[4,"ngIf"],[3,"value"],[3,"formGroup"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"h5",2),_(3,"i",3),f(4,"Trade Setup "),c(),u(5,"span",4),f(6,"Required"),c()(),u(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8),f(11,"Currency Pair/Commodities"),c(),u(12,"select",9)(13,"option",10),f(14,"Select..."),c(),C(15,QL,2,2,"option",11),c()(),u(16,"div",7)(17,"label",12),f(18,"Trade Analysis"),c(),u(19,"select",13)(20,"option",10),f(21,"Choose analysis method"),c(),u(22,"option",14),f(23,"Technical"),c(),u(24,"option",15),f(25,"Fundamental"),c(),u(26,"option",16),f(27,"Both"),c(),u(28,"option",17),f(29,"Sentiment"),c(),u(30,"option",18),f(31,"Other"),c()()(),u(32,"div",7)(33,"label",19),f(34,"Trade Instrument"),c(),_(35,"input",20),c(),u(36,"div",7)(37,"label",21),f(38,"Type of Order"),c(),u(39,"select",22)(40,"option",10),f(41,"Choose order type"),c(),u(42,"option",23),f(43,"Market"),c(),u(44,"option",24),f(45,"Limit"),c(),u(46,"option",25),f(47,"Stop"),c(),u(48,"option",26),f(49,"Stop Limit"),c(),u(50,"option",27),f(51,"Trailing Stop"),c()()(),u(52,"div",28)(53,"label",29),f(54,"Market Condition"),c(),_(55,"textarea",30),c(),C(56,KL,2,1,"ng-container",31)(57,ZL,2,1,"ng-container",31),c()()()),e&2&&(v("formGroup",r.formGroup),m(15),v("ngForOf",r.currencyPairs),m(41),v("ngIf",r.tradeStatus==="Planned"),m(),v("ngIf",r.tradeStatus!=="Planned"))},dependencies:[q,Je,ee,be,Kt,Zt,he,Qt,ve,Ne,Me,Oe,Zd,Yd],encapsulation:2})};var Xd=class n{control;disabled=!1;getIcon(t){switch(t){case"Planned":return"bi bi-hourglass";case"Executing":return"bi bi-play-fill";case"Completed":return"bi bi-check-circle";default:return"bi bi-question-circle"}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-trade-status-selector"]],inputs:{control:"control",disabled:"disabled"},decls:4,vars:2,consts:[["role","group","aria-label","Trade status display",1,"btn-group","w-100","shadow-sm","mb-3"],[1,"btn","btn-tr","w-100"],[1,"me-1",3,"ngClass"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1),_(2,"i",2),f(3),c()()),e&2&&(m(2),v("ngClass",r.getIcon(r.control==null?null:r.control.value)),m(),O(" ",r.control==null?null:r.control.value," "))},dependencies:[q,qt,be],encapsulation:2})};var ef=class n{formGroup;get entryWordCount(){let t=this.formGroup?.get("entry_criteria")?.value||"";return t.trim().length===0?0:t.trim().split(/\s+/).length}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-trade-strategy"]],inputs:{formGroup:"formGroup"},decls:26,vars:2,consts:[[1,"card","mb-4","shadow-sm",3,"formGroup"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-2-circle","me-2"],[1,"badge","bg-primary"],[1,"card-body","col-12"],["for","strategy_name",1,"form-label"],["type","text","id","strategy_name","formControlName","strategy_name","placeholder","e.g., Breakout, Reversal, Trend Following",1,"form-control"],[1,"card-body"],[1,"mb-4"],["for","entry_criteria",1,"form-label","fw-bold"],[1,"text-danger"],["id","entry_criteria","rows","5","formControlName","entry_criteria","placeholder","Explain in detail why you are taking this trade. Include your technical analysis, fundamental reasoning, market conditions, setup confirmation, etc.",1,"form-control"],[1,"form-text","text-muted"],["for","exit_criteria",1,"form-label","fw-bold"],["id","exit_criteria","rows","3","formControlName","exit_criteria","placeholder","Explain your plan to exit the trade. What would make you close the position? Include specific targets, stop-loss thresholds, trailing exits, or indicator-based signals.",1,"form-control"],[1,"form-text"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"h5",2),_(3,"i",3),f(4,"Trade Strategy "),c(),u(5,"span",4),f(6,"Required"),c()(),u(7,"div",5)(8,"label",6),f(9,"Strategy Name"),c(),_(10,"input",7),c(),u(11,"div",8)(12,"div",9)(13,"label",10),f(14,"Entry Criteria (Why are you taking this trade?) "),u(15,"span",11),f(16,"*"),c()(),_(17,"textarea",12),u(18,"div",13),f(19),c()(),u(20,"div")(21,"label",14),f(22,"Exit Criteria"),c(),_(23,"textarea",15),u(24,"div",16),f(25," Include both profit-taking and loss-cutting criteria. "),c()()()()),e&2&&(v("formGroup",r.formGroup),m(19),O(" Minimum 100 words recommended. Current: ",r.entryWordCount," words "))},dependencies:[q,be,he,ve,Ne,Me,Oe],encapsulation:2})};var YL=()=>[1,2,3,4,5];function JL(n,t){if(n&1&&(u(0,"option",20),f(1),c()),n&2){let e=t.$implicit;v("value",e),m(),U(e)}}function XL(n,t){if(n&1&&(u(0,"option",20),f(1),c()),n&2){let e=t.$implicit;v("value",e),m(),U(e)}}function eV(n,t){if(n&1&&(u(0,"div",8)(1,"label",9),f(2,"Potential Bias"),c(),u(3,"select",21)(4,"option",11),f(5,"Select potential bias"),c(),C(6,XL,2,2,"option",12),c()()),n&2){let e=w(2);m(6),v("ngForOf",e.biases)}}function tV(n,t){if(n&1&&(it(0),_(1,"input",22),u(2,"label",23),f(3),c(),ot()),n&2){let e=t.$implicit;m(),v("id","confidence_"+e)("value",e),m(),v("for","confidence_"+e),m(),U(e)}}function nV(n,t){if(n&1&&(u(0,"div",1)(1,"div",2)(2,"h5",3),_(3,"i",4),f(4),c(),u(5,"span",5),f(6,"Required"),c()(),u(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),f(11,"Emotional State"),c(),u(12,"select",10)(13,"option",11),f(14,"How are you feeling?"),c(),C(15,JL,2,2,"option",12),c()(),C(16,eV,7,1,"div",13),u(17,"div",14)(18,"label",9),f(19,"Trade Confidence"),c(),u(20,"div",15),C(21,tV,4,4,"ng-container",16),c(),u(22,"div",17),f(23,"Low (1) to High (5)"),c()(),u(24,"div",18)(25,"label",9),f(26,"Reflection"),c(),_(27,"textarea",19),c()()()()),n&2){let e=w();m(4),O("",e.label," Emotional Analysis "),m(3),v("formGroup",e.formGroup),m(8),v("ngForOf",e.emotionalStates),m(),v("ngIf",e.showBias),m(5),v("ngForOf",hu(5,YL))}}var tf=class n{formGroup;label="Pre-Trade";showBias=!1;emotionalStates=["Calm","Excited","Anxious","Frustrated","Overconfident","Fearful","Neutral","Other","Satisfied","Disappointed"];biases=["None - Clear Mindset","FOMO (Fear of Missing Out)","Recency Bias (Overweighting Recent Events)","Confirmation Bias O","Anchoring Bias","Loss Aversion O","Overconfidence","Revenge Trading"];static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-emotional-analysis"]],inputs:{formGroup:"formGroup",label:"label",showBias:"showBias"},decls:1,vars:1,consts:[["class","card mb-4 shadow-sm",4,"ngIf"],[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-3-circle","me-2"],[1,"badge","bg-primary"],[1,"card-body",3,"formGroup"],[1,"row","g-3"],[1,"col-md-6"],[1,"form-label"],["formControlName","emotional_state",1,"form-select"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","col-md-6",4,"ngIf"],[1,"col-md-12"],["role","group",1,"btn-group","w-100"],[4,"ngFor","ngForOf"],[1,"form-text","text-center"],[1,"col-12"],["rows","2","formControlName","reflection",1,"form-control"],[3,"value"],["formControlName","potential_bisa",1,"form-select"],["type","radio","formControlName","trade_confidence",1,"btn-check",3,"id","value"],[1,"btn","btn-outline-primary",3,"for"]],template:function(e,r){e&1&&C(0,nV,28,6,"div",0),e&2&&v("ngIf",r.formGroup)},dependencies:[q,Je,ee,be,Kt,Zt,he,Qt,mn,ve,Ne,Me,Oe],encapsulation:2})};var nf=class n{data;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-profit-analysis"]],inputs:{data:"data"},decls:36,vars:12,consts:[[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-4-circle","me-2"],[1,"badge","bg-primary"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-4"],[1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"form-control","bg-light"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"h5",2),_(3,"i",3),f(4,"Profit Analysis "),c(),u(5,"span",4),f(6,"Required"),c()(),u(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8),f(11,"Realized Profit"),c(),u(12,"div",9)(13,"span",10),f(14,"$"),c(),u(15,"span",11),f(16),ut(17,"number"),c()()(),u(18,"div",7)(19,"label",8),f(20,"Unrealized Profit"),c(),u(21,"div",9)(22,"span",10),f(23,"$"),c(),u(24,"span",11),f(25),ut(26,"number"),c()()(),u(27,"div",7)(28,"label",8),f(29,"Total Profit"),c(),u(30,"div",9)(31,"span",10),f(32,"$"),c(),u(33,"span",11),f(34),ut(35,"number"),c()()()()()()),e&2&&(m(16),O(" ",r.data!=null&&r.data.missing?"Data missing":dt(17,3,r.data==null?null:r.data.realized,"1.2-2")," "),m(9),O(" ",r.data!=null&&r.data.missing?"Data missing":dt(26,6,r.data==null?null:r.data.unrealized,"1.2-2")," "),m(9),O(" ",r.data!=null&&r.data.missing?"Data missing":dt(35,9,r.data==null?null:r.data.total,"1.2-2")," "))},dependencies:[q,Tu],encapsulation:2})};var rf=class n{control;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-notes"]],inputs:{control:"control"},decls:10,vars:1,consts:[[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-4-circle","me-2"],[1,"badge","bg-secondary"],[1,"p-3"],["rows","3","placeholder","Any additional information or context for this trade",1,"form-control",3,"formControl"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"h5",2),_(3,"i",3),f(4,"Additional Notes "),c(),u(5,"span",4),f(6,"Optional"),c()(),u(7,"div",5)(8,"textarea",6),f(9,"        "),c()()()),e&2&&(m(8),v("formControl",r.control))},dependencies:[q,be,he,ve,A0],encapsulation:2})};var of=class n{calculateRewardRiskRatio(t,e,r){let i=Math.abs(t-e),o=Math.abs(r-t);return i>0?o/i:0}calculateRiskDollar(t,e,r,i=10){return Math.abs(t-e)*i*r}calculateRiskPercent(t,e){return e>0?t/e*100:0}calculateProfit(t,e,r,i,o=10){return(i==="Long"?e-t:t-e)*o*r}aggregateProfit(t){if(!t?.length)return{realized:0,unrealized:0,total:0,missing:!0};let e=0,r=0;for(let i of t){let{entry_price:o,exit_price:s,lot_size:a,trade_direction:l,exit:d}=i,p=this.calculateProfit(o,s,a,l);d?e+=p:r+=p}return{realized:e,unrealized:r,total:e+r,missing:!1}}getPipDifference(t,e){return Math.round(Math.abs(e-t)*1e4)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ns=class n{constructor(t){this.supabase=t}async callEdgeFunction(t,e){let{data:r,error:i}=await this.supabase.GetClient().functions.invoke(t,{body:e});return{data:r,error:i}}static \u0275fac=function(e){return new(e||n)(F(Ce))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};function rV(n,t){if(n&1&&(u(0,"div",19),f(1),c()),n&2){let e=w();m(),O("Selected File: ",e.fileName,"")}}function iV(n,t){if(n&1&&(u(0,"div",20),_(1,"img",21),c()),n&2){let e=w();m(),v("src",e.imagePreviewUrl,Ln)}}function oV(n,t){if(n&1&&(u(0,"div",22),_(1,"i",23),f(2),c()),n&2){let e=w();m(2),O("",e.errorMessage," ")}}function sV(n,t){n&1&&(u(0,"span"),_(1,"i",24),f(2,"Extract Trade Data "),c())}function aV(n,t){n&1&&(u(0,"span"),_(1,"span",25),f(2," Extracting... "),c())}var sf=class n{constructor(t,e){this.supabase=t;this.cdr=e}file=null;fileName="";isLoading=!1;errorMessage=null;imagePreviewUrl=null;MAX_FILE_SIZE_BYTES=10*1024*1024;ALLOWED_FILE_TYPES=["image/png","image/jpeg"];extractTradeData=new _e;onFileSelected(t){this.errorMessage=null,this.file=null,this.fileName="",this.imagePreviewUrl=null;let e=t.target;if(!e.files||e.files.length===0)return;let r=e.files[0];if(!this.ALLOWED_FILE_TYPES.includes(r.type)){this.errorMessage="Invalid file type. Please upload a PNG or JPEG image.",e.value="";return}if(r.size>this.MAX_FILE_SIZE_BYTES){this.errorMessage=`File is too large. Maximum size is ${this.MAX_FILE_SIZE_BYTES/1024/1024}MB.`,e.value="";return}this.file=r,this.fileName=this.file.name;let i=new FileReader;i.onload=()=>{this.imagePreviewUrl=i.result},i.readAsDataURL(r),this.cdr.markForCheck()}async extractTextFromImage(){if(!this.file){this.errorMessage="Please select a file first.";return}this.isLoading=!0,this.errorMessage=null;try{let{base64:t,mimeType:e}=await this.convertToBase64(this.file),{data:r,error:i}=await this.supabase.callEdgeFunction("trade-chart-extract-gemini",{imageData:t,mimeType:e});if(i){this.errorMessage="Failed to extract data from the image. Please try again.";return}this.extractTradeData.emit(JSON.parse(r))}catch{this.errorMessage="An unexpected error occurred while processing the image.",this.cdr.markForCheck()}finally{this.isLoading=!1,this.cdr.markForCheck()}}convertToBase64(t){return new Promise((e,r)=>{let i=new FileReader;i.readAsDataURL(t),i.onload=()=>{let s=i.result.split(",");if(s.length!==2){r(new Error("Invalid Base64 string format"));return}let a=s[1],l=t.type;e({base64:a,mimeType:l})},i.onerror=o=>r(o)})}static \u0275fac=function(e){return new(e||n)(D(Ns),D(re))};static \u0275cmp=$({type:n,selectors:[["app-chart-upload"]],outputs:{extractTradeData:"extractTradeData"},decls:24,vars:8,consts:[["fileInput",""],[1,"card","mb-4","shadow-sm","border-primary"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"bi","bi-image","me-2"],[1,"card-body"],[1,"mb-3","text-muted"],[1,"border","rounded","border-dashed","p-4","text-center","bg-light"],["type","file","accept","image/png, image/jpeg","hidden","",3,"change","disabled"],[1,"mb-2"],[1,"bi","bi-cloud-upload","display-4","text-primary"],[1,"btn","btn-outline-primary",3,"click","disabled"],[1,"text-muted","mt-2"],["class","mt-3 fw-bold",4,"ngIf"],["class","mt-3",4,"ngIf"],["class","alert alert-danger mt-3","role","alert",4,"ngIf"],[1,"text-end","mt-3"],[1,"btn","btn-success",3,"click","disabled"],[4,"ngIf"],[1,"mt-3","fw-bold"],[1,"mt-3"],["alt","Image Preview",1,"img-fluid","rounded","shadow-sm",2,"max-height","700px",3,"src"],["role","alert",1,"alert","alert-danger","mt-3"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"bi","bi-magic","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,r){if(e&1){let i=Q();u(0,"div",1)(1,"div",2)(2,"h5",3),_(3,"i",4),f(4,"Chart Image Analysis "),c()(),u(5,"div",5)(6,"div",6),f(7," Upload your analyzed chart image and let AI automatically fill your trade fields "),c(),u(8,"div",7)(9,"input",8,0),x("change",function(s){return I(i),T(r.onFileSelected(s))}),c(),u(11,"div",9),_(12,"i",10),c(),u(13,"button",11),x("click",function(){I(i);let s=Gi(10);return T(s.click())}),f(14," Upload Chart Image "),c(),u(15,"div",12),f(16,"Support for PNG, JPG, JPEG files up to 10MB"),c(),C(17,rV,2,1,"div",13)(18,iV,2,1,"div",14),c(),C(19,oV,3,1,"div",15),u(20,"div",16)(21,"button",17),x("click",function(){return I(i),T(r.extractTextFromImage())}),C(22,sV,3,0,"span",18)(23,aV,3,0,"span",18),c()()()()}e&2&&(m(9),v("disabled",r.isLoading),m(4),v("disabled",r.isLoading),m(4),v("ngIf",r.fileName),m(),v("ngIf",r.imagePreviewUrl),m(),v("ngIf",r.errorMessage),m(2),v("disabled",!r.file||r.isLoading),m(),v("ngIf",!r.isLoading),m(),v("ngIf",r.isLoading))},dependencies:[q,ee,sr],encapsulation:2})};function lV(n,t){if(n&1&&(u(0,"div",1)(1,"div",2)(2,"h5",3),_(3,"i",4),f(4,"Risk Management "),c()(),u(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),f(9,"Risk % per Trade"),c(),u(10,"div",9),f(11),c()(),u(12,"div",7)(13,"div",8),f(14,"Risk $ per Trade"),c(),u(15,"div",9),f(16),c()(),u(17,"div",7)(18,"div",8),f(19,"Reward:Risk Ratio"),c(),u(20,"div",9),f(21),c()()(),u(22,"div",10),f(23,"Auto-calculated based on your inputs. Not stored to the database."),c()()()),n&2){let e=w();m(11),O("",e.riskPercent.toFixed(2),"%"),m(5),O("$",e.riskDollar.toFixed(2),""),m(5),U(e.rrRatio)}}var af=class n{entryPrice=0;stopLoss=0;takeProfit=0;lotSize=.01;metrics;get riskDollar(){return Math.abs(this.entryPrice-this.stopLoss)*this.lotSize*1e5}get riskPercent(){return this.entryPrice?Math.abs((this.entryPrice-this.stopLoss)/this.entryPrice)*100:0}get rrRatio(){let t=Math.abs(this.entryPrice-this.stopLoss),e=Math.abs(this.takeProfit-this.entryPrice);return t?`${(e/t).toFixed(2)}:1`:"0:1"}get hasAllInputs(){return this.entryPrice!==0&&this.stopLoss!==0&&this.takeProfit!==0&&this.lotSize!==0}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-risk-summary"]],inputs:{entryPrice:"entryPrice",stopLoss:"stopLoss",takeProfit:"takeProfit",lotSize:"lotSize",metrics:"metrics"},decls:1,vars:1,consts:[["class","card shadow-sm mb-4",4,"ngIf"],[1,"card","shadow-sm","mb-4"],[1,"card-header","bg-danger","bg-opacity-10","border-danger"],[1,"mb-0","text-danger"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"card-body"],[1,"row","text-center"],[1,"col-md-4"],[1,"fw-bold","text-muted"],[1,"fs-5"],[1,"text-muted","small","mt-2"]],template:function(e,r){e&1&&C(0,lV,24,3,"div",0),e&2&&v("ngIf",r.hasAllInputs)},dependencies:[q,ee],encapsulation:2})};function cV(n,t){if(n&1&&_(0,"app-profit-analysis",14),n&2){let e=w();v("data",e.aggregatedProfitData())}}function uV(n,t){if(n&1&&_(0,"app-emotional-analysis",15),n&2){let e=w();v("formGroup",e.emotionBeforeGroup)("showBias",!0)}}function dV(n,t){if(n&1&&_(0,"app-emotional-analysis",16),n&2){let e=w();v("formGroup",e.emotionAfterGroup)}}var Ps=class n{constructor(t,e,r){this.supabase=t;this.supabaseTradeService=e;this.cdr=r;Xo(()=>{this.tradeData&&(this.tradeForm().patchValue(z(N({},this.tradeData),{tradeid:this.tradeData.tradeid,planned_trade:this.tradeData.planned_trade?.[0]||{},executing_trade:this.tradeData.executing_trades?.[0]||{}})),this.mode==="complete"&&this.tradeForm().patchValue({trade_status:"Completed"}))})}fb=M(xt);tradeFormService=M(of);mode="create";tradeData=null;tradeAccountId=null;formSubmitted=new _e;cancel=new _e;tradeForm=lt(this.createForm());tradeStatus=jn(()=>this.tradeForm().get("trade_status")?.value);aggregatedProfitData=jn(()=>{let t=this.tradeForm().get("executing_trade")?.value;return this.tradeFormService.aggregateProfit([t])});riskMetrics=jn(()=>this.calculateRiskMetrics(this.tradeForm().get("planned_trade")?.value));createForm(){return this.fb.group({tradeid:[""],userid:[""],trade_status:["Planned",R.required],trade_symbol:["",R.required],trade_analysis:["",[R.minLength(1)]],trade_instrument:["",R.required],type_of_order:["",R.required],market_condition:["",R.required],strategy_name:["",R.required],entry_criteria:["",[R.minLength(1)]],exit_criteria:["",[R.minLength(1)]],planned_trade:this.fb.group({trade_direction:["Long"],entry_price:[0],lot_size:[.01],stop_loss_price:[0],take_profit_price:[0]}),executing_trade:this.fb.group({trade_direction:["Long"],entry_price:[0],lot_size:[.01],stop_loss_price:[0],take_profit_price:[0],exit_price:[0],entry_time:[""],exit_time:[""],exit:[""]}),emotion_before:this.fb.group({emotional_state:[""],potential_bisa:[""],trade_confidence:[""],reflection:[""]}),emotion_after:this.fb.group({emotional_state:[""],trade_confidence:[""],reflection:[""]}),notes:[""]})}async onSubmit(){if(this.tradeForm().valid){let t=this.tradeForm(),e=t.get("tradeid")?.value;if(this.mode==="create")(!e||typeof e!="string"||e.trim()==="")&&(e=fo(),t.patchValue({tradeid:e}));else if(!e||typeof e!="string"||e.trim()===""){console.error("Missing tradeid for edit/complete mode!");return}let r=this.supabase.user()?.id;t.patchValue({trade_account_id:this.tradeAccountId,updated_time:new Date().toISOString()});let i={tradeid:e,userid:r,trade_account_id:this.tradeAccountId,trade_symbol:t.get("trade_symbol")?.value,trade_analysis:t.get("trade_analysis")?.value,trade_instrument:t.get("trade_instrument")?.value,type_of_order:t.get("type_of_order")?.value,market_condition:t.get("market_condition")?.value,trade_status:t.get("trade_status")?.value,strategy_name:t.get("strategy_name")?.value,entry_criteria:t.get("entry_criteria")?.value,exit_criteria:t.get("exit_criteria")?.value,planned_trade:[t.get("planned_trade")?.value],executing_trades:[t.get("executing_trade")?.value],planned_profit:null,realized_profit:null,unrealized_profit:null,emotion_before:t.get("emotion_before")?.value,emotion_after:t.get("emotion_after")?.value,notes:t.get("notes")?.value,updated_time:new Date().toISOString()};try{this.mode==="create"?(console.log(i),await this.supabaseTradeService.addTradeLogOfSelectedAccount(i,"tradejournal",this.tradeAccountId)):["edit","complete"].includes(this.mode)&&await this.supabaseTradeService.updateTradeLogOfSelectedAccount(i,"tradejournal",this.tradeAccountId),this.formSubmitted.emit(),this.cdr.markForCheck()}catch(o){console.error("Error submitting trade:",o)}}else{let t=this.tradeForm();this.logInvalidControls(t),console.log("Invalid form")}}logInvalidControls(t,e=""){Object.keys(t.controls).forEach(r=>{let i=t.get(r),o=e?`${e}.${r}`:r;i instanceof Ds?this.logInvalidControls(i,o):i&&i.invalid&&console.warn(`Invalid control: ${o}`,i.errors)})}onCancel(){this.cancel.emit()}calculateRiskMetrics(t){let e=t?.entry_price||0,r=t?.stop_loss_price||0,i=t?.lot_size||0,o=Math.abs(e-r),s=o*i,a=e?o/e*100:0;return{riskPerLot:o,totalRisk:s,riskPercent:+a.toFixed(2)}}get tradeStatusControl(){return this.tradeForm().get("trade_status")}get notesControl(){return this.tradeForm().get("notes")}get emotionBeforeGroup(){return this.tradeForm().get("emotion_before")}get emotionAfterGroup(){return this.tradeForm().get("emotion_after")}get plannedTradeGroup(){return this.tradeForm().get("planned_trade")}get executingTradeGroup(){return this.tradeForm().get("executing_trade")}applyExtractedChartData(t){let e={};t.trade_status&&(e.trade_status=t.trade_status),t.trade_symbol&&(e.trade_symbol=t.trade_symbol),t.symbol&&!t.trade_symbol&&(e.trade_symbol=t.symbol),t.trade_analysis&&(e.trade_analysis=t.trade_analysis),t.trade_instrument&&(e.trade_instrument=t.trade_instrument),t.type_of_order&&(e.type_of_order=t.type_of_order),t.market_condition&&(e.market_condition=t.market_condition),t.strategy_name&&(e.strategy_name=t.strategy_name),t.entry_criteria&&(e.entry_criteria=t.entry_criteria),t.exit_criteria&&(e.exit_criteria=t.exit_criteria),t.planned_trade&&(e.planned_trade=t.planned_trade),t.executing_trade&&(e.executing_trade=t.executing_trade),t.emotion_before&&(e.emotion_before=t.emotion_before),t.emotion_after&&(e.emotion_after=t.emotion_after),t.notes&&(e.notes=t.notes),this.tradeForm().patchValue(e)}static \u0275fac=function(e){return new(e||n)(D(Ce),D(It),D(re))};static \u0275cmp=$({type:n,selectors:[["app-individual-trade"]],inputs:{mode:"mode",tradeData:"tradeData",tradeAccountId:"tradeAccountId"},outputs:{formSubmitted:"formSubmitted",cancel:"cancel"},decls:17,vars:13,consts:[[1,"container-fluid"],[1,"mb-4"],[3,"control","disabled"],[3,"extractTradeData"],[3,"formGroup","tradeStatus","plannedTradeGroup","executingTradeGroup"],[3,"formGroup"],[3,"metrics"],[3,"data",4,"ngIf"],["label","Pre-Trade",3,"formGroup","showBias",4,"ngIf"],["label","Post-Trade",3,"formGroup",4,"ngIf"],[3,"control"],[1,"d-flex","justify-content-end","mt-4","border-top","pt-3"],["type","button",1,"btn","btn-primary","me-2",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[3,"data"],["label","Pre-Trade",3,"formGroup","showBias"],["label","Post-Trade",3,"formGroup"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"h1",1),f(2,"Add Trade"),c(),_(3,"app-trade-status-selector",2),u(4,"app-chart-upload",3),x("extractTradeData",function(o){return r.applyExtractedChartData(o)}),c(),_(5,"app-trade-setup",4)(6,"app-trade-strategy",5)(7,"app-risk-summary",6),C(8,cV,1,1,"app-profit-analysis",7)(9,uV,1,2,"app-emotional-analysis",8)(10,dV,1,1,"app-emotional-analysis",9),_(11,"app-notes",10),u(12,"div",11)(13,"button",12),x("click",function(){return r.onSubmit()}),f(14,"Save"),c(),u(15,"button",13),x("click",function(){return r.onCancel()}),f(16),c()()()),e&2&&(m(3),v("control",r.tradeStatusControl)("disabled",r.mode==="view"),m(2),v("formGroup",r.tradeForm())("tradeStatus",r.tradeStatusControl.value)("plannedTradeGroup",r.plannedTradeGroup)("executingTradeGroup",r.executingTradeGroup),m(),v("formGroup",r.tradeForm()),m(),v("metrics",r.riskMetrics()),m(),v("ngIf",r.tradeStatusControl.value==="Completed"),m(),v("ngIf",r.tradeStatusControl.value==="Planned"),m(),v("ngIf",r.tradeStatusControl.value!=="Planned"),m(),v("control",r.notesControl),m(5),O(" ",r.mode==="view"?"Close":"Cancel"," "))},dependencies:[q,ee,be,Ne,Me,Jd,Xd,ef,tf,nf,rf,sf,af],encapsulation:2})};function fV(n,t){if(n&1&&(u(0,"div",14),f(1),c()),n&2){let e=w();m(),U(e.actionSuccess)}}function pV(n,t){if(n&1&&(u(0,"div",15),f(1),c()),n&2){let e=w();m(),U(e.actionError)}}function hV(n,t){if(n&1){let e=Q();u(0,"li",16)(1,"div",17)(2,"i",18),x("click",function(){let i=I(e).$implicit,o=w();return T(o.onRowClick(i))}),c(),u(3,"div",19),x("click",function(){let i=I(e).$implicit,o=w();return T(o.onRowClick(i))}),u(4,"h5",20),f(5),c(),u(6,"span",21)(7,"span",22),f(8),c(),f(9," | "),u(10,"span",22),f(11),c(),f(12," | "),u(13,"span",22),f(14),ut(15,"date"),c()()(),u(16,"div",23),x("click",function(){let i=I(e).$implicit,o=w();return T(o.deleteAccount(i.account_id))}),_(17,"i",24),c()()()}if(n&2){let e=t.$implicit;m(5),U(e.account_name),m(3),O("Broker: ",e.broker_name,""),m(3),da("Balance: ",e.balance," ",e.currency,""),m(3),O("Created At: ",dt(15,5,e.created_at,"y, MMMM, d h:mm a"),"")}}function mV(n,t){if(n&1&&(u(0,"div",15),f(1),c()),n&2){let e=w(2);m(),U(e.formError)}}function gV(n,t){if(n&1){let e=Q();u(0,"div",25),x("click",function(i){I(e);let o=w();return T(o.closeFormOnOutside(i))})("keydown.escape",function(){I(e);let i=w();return T(i.toggleForm())}),u(1,"div",26),x("click",function(i){return I(e),T(i.stopPropagation())}),u(2,"nav",27)(3,"ol",28)(4,"li",3)(5,"a",4),f(6,"Dashboard"),c()(),u(7,"li",3)(8,"a",29),x("click",function(i){I(e);let o=w();return T(o.closeFormOnOutside(i))}),f(9,"Trading Accounts"),c()(),u(10,"li",5),f(11,"Create Manual Account"),c()()(),u(12,"h4",30),f(13,"Create Manual Account"),c(),u(14,"p",31),f(15,"Set up a manual trading account to track your trades"),c(),u(16,"form",32),x("ngSubmit",function(){I(e);let i=w();return T(i.submitForm())}),u(17,"div",33)(18,"label",34),f(19,"Account Name"),c(),_(20,"input",35),c(),u(21,"div",33)(22,"label",34),f(23,"Broker Name"),c(),_(24,"input",36),c(),u(25,"div",33)(26,"label",34),f(27,"Account Type"),c(),_(28,"input",37),c(),u(29,"div",33)(30,"label",34),f(31,"Currency"),c(),_(32,"input",38),c(),u(33,"div",33)(34,"label",34),f(35,"Initial Balance"),c(),_(36,"input",39),c(),u(37,"div",33)(38,"label",34),f(39,"Account Notes (Optional)"),c(),_(40,"textarea",40),c(),u(41,"h5",8),f(42,"Trading Preferences"),c(),u(43,"div",41),_(44,"input",42),u(45,"label",43),f(46,"Track P&L"),c(),u(47,"small",44),f(48,"Enable profit and loss tracking for this account"),c()(),u(49,"div",41),_(50,"input",45),u(51,"label",46),f(52,"Include in Analytics"),c(),u(53,"small",44),f(54,"Include this account in overall performance metrics"),c()(),C(55,mV,2,1,"div",10),u(56,"div",47)(57,"button",48),x("click",function(){I(e);let i=w();return T(i.toggleForm())}),f(58,"Cancel"),c(),u(59,"button",49),f(60,"Create Account"),c()()()()()}if(n&2){let e=w();m(16),v("formGroup",e.tradeAccountForm),m(39),v("ngIf",e.formError)}}function vV(n,t){if(n&1){let e=Q();u(0,"div",25),x("click",function(){I(e);let i=w();return T(i.cancelDelete())})("keydown.escape",function(){I(e);let i=w();return T(i.cancelDelete())}),u(1,"div",26),x("click",function(i){return I(e),T(i.stopPropagation())}),u(2,"h5",33),f(3,"Confirm Deletion"),c(),u(4,"p"),f(5,"Are you sure you want to delete this trading account and all its associated data?"),c(),u(6,"div",47)(7,"button",50),x("click",function(){I(e);let i=w();return T(i.cancelDelete())}),f(8,"Cancel"),c(),u(9,"button",7),x("click",function(){I(e);let i=w();return T(i.confirmDelete())}),f(10,"Delete"),c()()()()}}var lf=class n{constructor(t,e,r,i){this.fb=t;this.supabaseService=e;this.supabaseAccountService=r;this.cdr=i;this.tradeAccountForm=this.fb.group({account_name:["",R.required],broker_name:[""],account_type:[""],currency:["USD"],balance:[0,R.min(0)],track_pl:[!1],include_in_analytics:[!1]})}tradeAccounts=[];showForm=!1;tradeAccountForm;formError=null;actionError=null;actionSuccess=null;selectedAccountId=null;showDeleteConfirm=!1;pendingDeleteAccountId=null;funMaterialIcons=["movie","music_note","videogame_asset","theater_comedy","sports_esports","fastfood","local_cafe","restaurant_menu","icecream","emoji_food_beverage","flight_takeoff","directions_car","hiking","beach_access","camping","smartphone","computer","memory","developer_mode","settings","mood","sentiment_satisfied","sentiment_very_dissatisfied","celebration","favorite","auto_awesome","nightlight","stars","magic_wand","castle"];ngOnInit(){this.loadAccounts()}async loadAccounts(){try{this.tradeAccounts=await this.supabaseAccountService.getUserTradeAccounts()}catch{this.actionError="Failed to load accounts. Please try again."}finally{this.cdr.markForCheck()}}async onRowClick(t){this.selectedAccountId=t.account_id,this.tradeAccountForm.patchValue({account_name:t.account_name,broker_name:t.broker_name,account_type:t.account_type,currency:t.currency,balance:t.balance,track_pl:t.metadata?.track_pl||!1,include_in_analytics:t.metadata?.include_in_analytics||!1}),this.showForm=!0}toggleForm(){this.showForm=!this.showForm,this.formError=null,this.actionSuccess=null,this.actionError=null,this.selectedAccountId=null,this.showForm||this.tradeAccountForm.reset({currency:"USD",balance:0})}async submitForm(){if(this.formError="",this.tradeAccountForm.valid){let t=this.tradeAccountForm.value;this.selectedAccountId?await this.supabaseAccountService.editTradeAccount(this.selectedAccountId,t)?(this.actionSuccess="Account updated successfully",this.loadAccounts(),this.toggleForm()):this.formError="Failed to update account":await this.supabaseAccountService.addTradeAccount(t)?(this.actionSuccess="Account added successfully",this.loadAccounts(),this.toggleForm()):this.formError="Failed to add account"}this.cdr.markForCheck()}async deleteAccount(t){this.showDeleteConfirm=!0,this.pendingDeleteAccountId=t}confirmDelete(){this.pendingDeleteAccountId&&this.performAccountDeletion(this.pendingDeleteAccountId),this.showDeleteConfirm=!1,this.pendingDeleteAccountId=null}cancelDelete(){this.showDeleteConfirm=!1,this.pendingDeleteAccountId=null}async performAccountDeletion(t){this.actionError=null,this.actionSuccess=null;try{await this.supabaseAccountService.removeTradeAccount(t)?(this.loadAccounts(),this.actionSuccess="Account deleted successfully."):this.actionError="Failed to delete account."}catch{this.actionError="An unexpected error occurred while deleting."}finally{this.cdr.markForCheck(),setTimeout(()=>{this.actionSuccess="",this.cdr.markForCheck()},5e3)}}handleEscape(t){this.showForm&&this.toggleForm()}closeFormOnOutside(t){t.target===t.currentTarget&&this.toggleForm()}static \u0275fac=function(e){return new(e||n)(D(xt),D(It),D(Yt),D(re))};static \u0275cmp=$({type:n,selectors:[["app-tradeaccountmanage"]],hostBindings:function(e,r){e&1&&x("keydown.escape",function(o){return r.handleEscape(o)},!1,Rb)},decls:23,vars:5,consts:[[1,"container","mt-4"],["aria-label","breadcrumb",2,"--bs-breadcrumb-divider",`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E")`],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/home",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],[1,"btn","btn-tr",3,"click"],[1,"mt-4"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"list-group"],["class","list-group-item bg-transparent",4,"ngFor","ngForOf"],["class","overlay","tabindex","0",3,"click","keydown.escape",4,"ngIf"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[1,"list-group-item","bg-transparent"],[1,"d-flex","align-items-center"],[1,"logo-circle","bi","bi-star-fill","text-primary",2,"font-size","2rem",3,"click"],[1,"ms-3",3,"click"],[1,"mt-2"],[1,"d-block","row","text-muted"],[1,"col-4"],["title","Delete Account",1,"delete-button","justify-content-end",3,"click"],[1,"bi","bi-trash"],["tabindex","0",1,"overlay",3,"click","keydown.escape"],[1,"modal-card",3,"click"],["aria-label","breadcrumb"],[1,"breadcrumb","small"],[3,"click"],[1,"mb-1"],[1,"text-muted","mb-3"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","account_name","placeholder","e.g., My Futures Account",1,"form-control"],["type","text","formControlName","broker_name","placeholder","e.g., NinjaTrader, TastyWorks",1,"form-control"],["type","text","formControlName","account_type","placeholder","e.g., Margin, Cash",1,"form-control"],["type","text","formControlName","currency","placeholder","USD",1,"form-control"],["type","number","formControlName","balance",1,"form-control"],["rows","3","placeholder","Add any additional information about this account","disabled","",1,"form-control"],[1,"form-check","form-switch","mb-2"],["type","checkbox","formControlName","track_pl","id","track_pl",1,"form-check-input"],["for","track_pl",1,"form-check-label"],[1,"text-muted","d-block","ms-4"],["type","checkbox","formControlName","include_in_analytics","id","include_in_analytics",1,"form-check-input"],["for","include_in_analytics",1,"form-check-label"],[1,"d-flex","justify-content-end","gap-2","mt-3"],["type","button",1,"btn","btn-tr-secondary",3,"click"],["type","submit",1,"btn","btn-tr"],[1,"btn","btn-tr-secondary",3,"click"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),c()(),u(6,"li",5),f(7,"Trading Accounts"),c()()(),u(8,"div",6)(9,"h3"),f(10,"Your Trade Accounts"),c(),u(11,"button",7),x("click",function(){return r.toggleForm()}),f(12,"Add Account"),c()(),u(13,"div",8)(14,"h5"),f(15,"Manage your trading accounts"),c()(),C(16,fV,2,1,"div",9)(17,pV,2,1,"div",10),u(18,"div",0)(19,"ul",11),C(20,hV,18,8,"li",12),c()(),C(21,gV,61,2,"div",13)(22,vV,11,0,"div",13),c()),e&2&&(m(16),v("ngIf",r.actionSuccess),m(),v("ngIf",r.actionError),m(3),v("ngForOf",r.tradeAccounts),m(),v("ngIf",r.showForm),m(),v("ngIf",r.showDeleteConfirm))},dependencies:[be,Wt,he,Hn,Hr,ve,Ne,Me,Oe,q,Je,ee,er,Ue],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;z-index:1050}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1050}.modal-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;width:100%;max-width:600px;max-height:90dvh;overflow-y:auto;box-shadow:0 10px 25px #00000026}.list-group-item[_ngcontent-%COMP%]{cursor:pointer}.delete-button[_ngcontent-%COMP%]{color:red;display:none;margin-left:auto}.list-group-item[_ngcontent-%COMP%]:hover   .delete-button[_ngcontent-%COMP%]{color:red;display:block}"]})};function yV(n,t){if(n&1&&_(0,"img",35),n&2){let e=w();v("src",e.currentImageUrl,Ln)}}function _V(n,t){if(n&1&&_(0,"img",36),n&2){let e=w();v("src",e.previewUrl,Ln)}}function bV(n,t){n&1&&(u(0,"div",14),f(1,"No new image selected"),c())}function wV(n,t){if(n&1&&(u(0,"div",23)(1,"div",37),f(2),c()()),n&2){let e=w();m(2),U(e.errorMessage)}}function EV(n,t){if(n&1&&(u(0,"button",38),f(1," Save Changes "),c()),n&2){let e=w();v("disabled",e.profileForm.invalid)}}var cf=class n{constructor(t,e,r){this.fb=t;this.supabaseService=e;this.cdr=r;this.profileForm=this.fb.group({firstname:["",R.required],lastname:[""],email:["",[R.required,R.email]],phone:[""]})}profileForm;currentImageUrl=null;previewUrl=null;selectedFile=null;userId="";originalFormValue;formChanged=!1;errorMessage="";async ngOnInit(){await this.loadProfile(),this.trackFormChanges()}async loadProfile(){try{let{data:t,error:e}=await this.supabaseService.getProfile();if(e){this.errorMessage="Failed to load profile: "+e.message,console.error("Supabase profile load error:",e);return}t?(this.profileForm.patchValue({firstname:t.firstname,lastname:t.lastname,email:t.email,phone:t.phone}),this.originalFormValue=this.profileForm.getRawValue(),t.profile_picture_url?(this.currentImageUrl=await this.supabaseService.getCachedProfilePictureBlobUrl(t.profile_picture_url),this.previewUrl=this.currentImageUrl):(this.currentImageUrl=null,this.previewUrl=null)):(this.errorMessage="No profile data found. Please complete your profile.",console.warn("No profile data received from Supabase."))}catch(t){this.errorMessage="An unexpected error occurred while loading profile.",console.error("Error in loadProfile:",t)}finally{this.cdr.markForCheck()}}async removeProfilePicture(){try{this.errorMessage="",await this.supabaseService.deleteProfilePicture(),this.supabaseService.clearCachedProfilePictureBlobUrl(),await this.supabaseService.updateProfile({profile_picture_url:null}),this.currentImageUrl=null,this.previewUrl=null,this.selectedFile=null,this.formChanged=!0}catch(t){this.errorMessage="Failed to remove profile picture: "+(t.message||t.toString()),console.error("Error removing profile picture:",t)}finally{this.cdr.markForCheck()}}trackFormChanges(){this.profileForm.valueChanges.subscribe(()=>{this.formChanged=this.profileForm.dirty||!!this.selectedFile,this.cdr.markForCheck()})}onFileChange(t){this.errorMessage="";let e=t.target,r=e?.files?.[0];if(!r){this.selectedFile=null;return}if(!["image/jpeg","image/png","image/webp"].includes(r.type)){this.errorMessage="Only JPG, PNG, or WEBP images are allowed.",this.selectedFile=null,e.value="";return}if(r.size>1024*1024){this.errorMessage="File size must be less than 1MB.",this.selectedFile=null,e.value="";return}this.selectedFile=r,this.previewUrl&&URL.revokeObjectURL(this.previewUrl),this.previewUrl=URL.createObjectURL(r),this.formChanged=!0,this.cdr.markForCheck()}async saveChanges(){if(this.errorMessage="",!this.formChanged){this.errorMessage="No changes detected.";return}if(this.profileForm.invalid){this.errorMessage="Please correct the highlighted form errors.",this.profileForm.markAllAsTouched(),this.cdr.markForCheck();return}let t=this.originalFormValue.profile_picture_url??null;if(this.selectedFile)try{if(t=await this.supabaseService.uploadProfilePicture(this.selectedFile),!t){this.errorMessage="Failed to upload profile picture. Please try again.",console.error("Supabase uploadProfilePicture returned null filePath");return}}catch(i){this.errorMessage="Error uploading profile picture: "+(i.message||i.toString()),console.error("Error during profile picture upload:",i);return}let e=this.profileForm.getRawValue(),r={firstname:e.firstname,lastname:e.lastname,email:e.email,phone:e.phone,profile_picture_url:t,updated_at:new Date().toISOString(),preferences:{},metadata:{}};try{await this.supabaseService.updateProfile(r),t&&(this.supabaseService.clearCachedProfilePictureBlobUrl(),this.currentImageUrl=await this.supabaseService.getCachedProfilePictureBlobUrl(t),this.previewUrl=this.currentImageUrl),this.formChanged=!1,this.selectedFile=null,this.originalFormValue=this.profileForm.getRawValue(),this.errorMessage=""}catch(i){this.errorMessage="Failed to save changes: "+(i.message||i.toString()),console.error("Error during profile update:",i)}finally{this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(D(xt),D(Yt),D(re))};static \u0275cmp=$({type:n,selectors:[["app-user-account-settings"]],decls:58,vars:6,consts:[[1,"container","mb-5"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"mb-2"],[1,"text-muted","mb-4"],[1,"row","g-3","mb-4"],[1,""],[1,"card","border-0","shadow-sm","p-3","h-100"],[1,"d-flex","align-items-center","mb-2"],["alt","Profile","class","rounded-circle me-2","style","width: 40px; height: 40px; object-fit: cover;",3,"src",4,"ngIf"],[1,"mb-0"],[1,"text-muted"],[1,"row","g-4",3,"ngSubmit","formGroup"],[1,"fw-bold"],[1,"col-md-6"],[1,"form-label"],["formControlName","firstname","placeholder","First name",1,"form-control"],["formControlName","lastname","placeholder","Last name",1,"form-control"],["formControlName","email","placeholder","Email","type","email",1,"form-control"],["formControlName","phone","placeholder","+1 (123) 456-7890",1,"form-control"],[1,"col-12"],[1,"fw-bold","mt-3"],[1,"card","p-3","shadow-sm","border-light","bg-light-subtle"],[1,"form-label","d-block"],["alt","Preview","class","img-thumbnail","style","width: 120px;",3,"src",4,"ngIf"],["class","text-muted",4,"ngIf"],["type","file",1,"form-control","mt-2",3,"change"],[1,"mt-2","d-flex","gap-2"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],["class","col-12",4,"ngIf"],[1,"col-12","text-end"],["type","submit","class","btn btn-tr",3,"disabled",4,"ngIf"],["alt","Profile",1,"rounded-circle","me-2",2,"width","40px","height","40px","object-fit","cover",3,"src"],["alt","Preview",1,"img-thumbnail",2,"width","120px",3,"src"],[1,"alert","alert-danger"],["type","submit",1,"btn","btn-tr",3,"disabled"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),c()(),u(6,"li",5),f(7,"Account Settings"),c()()(),u(8,"h2",6),f(9,"Account Settings"),c(),u(10,"p",7),f(11,"Manage your profile, subscription, and preferences"),c(),u(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11),C(16,yV,1,1,"img",12),u(17,"h5",13),f(18,"Profile Information"),c()(),u(19,"small",14),f(20,"Update your personal details and public profile"),c()()()(),u(21,"form",15),x("ngSubmit",function(){return r.saveChanges()}),u(22,"h5",16),f(23,"Personal Information"),c(),u(24,"div",17)(25,"label",18),f(26,"First Name"),c(),_(27,"input",19),c(),u(28,"div",17)(29,"label",18),f(30,"Last Name"),c(),_(31,"input",20),c(),u(32,"div",17)(33,"label",18),f(34,"Email Address"),c(),_(35,"input",21),c(),u(36,"div",17)(37,"label",18),f(38,"Phone"),c(),_(39,"input",22),c(),u(40,"div",23)(41,"h6",24),f(42,"Profile Picture"),c(),u(43,"div",25)(44,"div",6)(45,"label",26),f(46,"Preview New Photo"),c(),C(47,_V,1,1,"img",27)(48,bV,2,0,"div",28),c(),u(49,"input",29),x("change",function(o){return r.onFileChange(o)}),c(),u(50,"small",14),f(51,"JPG, PNG or GIF. Max 1MB."),c(),u(52,"div",30)(53,"button",31),x("click",function(){return r.removeProfilePicture()}),f(54,"Remove"),c()()()(),C(55,wV,3,1,"div",32),u(56,"div",33),C(57,EV,2,1,"button",34),c()()()),e&2&&(m(16),v("ngIf",r.currentImageUrl),m(5),v("formGroup",r.profileForm),m(26),v("ngIf",r.previewUrl),m(),v("ngIf",!r.previewUrl),m(7),v("ngIf",r.errorMessage),m(2),v("ngIf",r.formChanged))},dependencies:[be,Wt,he,ve,Ne,Me,Oe,q,ee,Ue],encapsulation:2})};var uf=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;ngOnInit(){}async adminLoadMeditationVideos(){let{data:t,error:e}=await this.supabase.from("adminmeditationvideos").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Error loading meditation videos: ",e),e;return t}async loadActiveMeditationVideos(){let{data:t,error:e}=await this.supabase.from("activemeditationvideos").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Error loading meditation videos: ",e),e;return t}async addMeditationVideo(t){let{error:e}=await this.supabase.from("adminmeditationvideos").insert([{title:t.title,url:t.url,category:t.category,description:t.description,isactive:t.isactive}]);return e&&console.error("Error adding meditation video: ",e),{error:e}}async updateMeditationVideo(t){let{error:e}=await this.supabase.from("adminmeditationvideos").update({title:t.title,url:t.url,category:t.category,description:t.description,isactive:t.isactive,updated_time:t.updated_time}).eq("id",t.id);return e&&console.error("Error updating meditation video: ",e),{error:e}}static \u0275fac=function(e){return new(e||n)(F(Ce))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var SV=(n,t)=>({"alert-success":n,"alert-danger":t});function DV(n,t){if(n&1&&(u(0,"div",7),f(1),c()),n&2){let e=w();v("ngClass",Dt(2,SV,e.messageType==="success",e.messageType==="error")),m(),O(" ",e.message," ")}}function xV(n,t){if(n&1){let e=Q();u(0,"tr")(1,"td")(2,"input",8),Ve("ngModelChange",function(i){let o=I(e).$implicit;return qe(o.title,i)||(o.title=i),T(i)}),x("ngModelChange",function(){let i=I(e).$implicit,o=w();return T(o.onFieldChange(i))}),c()(),u(3,"td")(4,"input",8),Ve("ngModelChange",function(i){let o=I(e).$implicit;return qe(o.url,i)||(o.url=i),T(i)}),x("ngModelChange",function(){let i=I(e).$implicit,o=w();return T(o.onFieldChange(i))}),c()(),u(5,"td")(6,"input",8),Ve("ngModelChange",function(i){let o=I(e).$implicit;return qe(o.category,i)||(o.category=i),T(i)}),x("ngModelChange",function(){let i=I(e).$implicit,o=w();return T(o.onFieldChange(i))}),c()(),u(7,"td")(8,"textarea",8),Ve("ngModelChange",function(i){let o=I(e).$implicit;return qe(o.description,i)||(o.description=i),T(i)}),x("ngModelChange",function(){let i=I(e).$implicit,o=w();return T(o.onFieldChange(i))}),c()(),u(9,"td")(10,"input",9),Ve("ngModelChange",function(i){let o=I(e).$implicit;return qe(o.isactive,i)||(o.isactive=i),T(i)}),x("change",function(){let i=I(e).$implicit,o=w();return T(o.onFieldChange(i))}),c()(),u(11,"td"),f(12),ut(13,"date"),c()()}if(n&2){let e=t.$implicit;m(2),Le("ngModel",e.title),m(2),Le("ngModel",e.url),m(2),Le("ngModel",e.category),m(2),Le("ngModel",e.description),m(2),Le("ngModel",e.isactive),m(2),U(dt(13,6,e.updated_time,"short"))}}var df=class n{constructor(t,e){this.cdr=t;this.supabaseMeditationTableService=e}videos=[];message="";messageType="success";async ngOnInit(){let t=await this.supabaseMeditationTableService.adminLoadMeditationVideos();this.videos=t.map(e=>z(N({},e),{isModified:!1})),this.cdr.markForCheck()}onFieldChange(t){t.isModified=!0}addVideo(){this.videos.push({title:"",url:"",category:"",description:"",isactive:!0,isModified:!0}),this.cdr.detectChanges()}async saveChanges(){let t=this.videos.filter(e=>e.isModified);for(let e of t){if(e.id){e.updated_time=new Date().toISOString();let{error:r}=await this.supabaseMeditationTableService.updateMeditationVideo(e);if(r)return this.showMessage("Error saving some videos","error")}else{let{error:r}=await this.supabaseMeditationTableService.addMeditationVideo(e);if(r)return this.showMessage("Error adding new video","error")}e.isModified=!1}this.showMessage("Videos saved successfully","success"),this.cdr.detectChanges()}hasChanges(){return this.videos.some(t=>t.isModified)}showMessage(t,e){this.message=t,this.messageType=e,this.cdr.markForCheck(),setTimeout(()=>{this.message="",this.cdr.markForCheck()},4e3)}static \u0275fac=function(e){return new(e||n)(D(re),D(uf))};static \u0275cmp=$({type:n,selectors:[["app-admin-meditation-dashboard"]],decls:26,vars:3,consts:[[1,"container","mt-4","p-4"],["class","alert",3,"ngClass",4,"ngIf"],[1,"table","mt-4"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mt-3"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-success",3,"click","disabled"],[1,"alert",3,"ngClass"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel"]],template:function(e,r){e&1&&(u(0,"div",0),C(1,DV,2,5,"div",1),u(2,"h2"),f(3,"Meditation Video Admin Dashboard"),c(),u(4,"table",2)(5,"thead")(6,"tr")(7,"th"),f(8,"Title"),c(),u(9,"th"),f(10,"URL"),c(),u(11,"th"),f(12,"Category"),c(),u(13,"th"),f(14,"Description"),c(),u(15,"th"),f(16,"Active"),c(),u(17,"th"),f(18,"Last Updated"),c()()(),u(19,"tbody"),C(20,xV,14,9,"tr",3),c()(),u(21,"div",4)(22,"button",5),x("click",function(){return r.addVideo()}),f(23,"Add Video"),c(),u(24,"button",6),x("click",function(){return r.saveChanges()}),f(25,"Save Changes"),c()()()),e&2&&(m(),v("ngIf",r.message),m(19),v("ngForOf",r.videos),m(4),v("disabled",!r.hasChanges()))},dependencies:[q,qt,Je,ee,er,sr,he,Hr,ve,zr],encapsulation:2})};var ne=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(ne||{}),lr="*";function ff(n,t){return{type:ne.Trigger,name:n,definitions:t,options:{}}}function cr(n,t=null){return{type:ne.Animate,styles:t,timings:n}}function v1(n,t=null){return{type:ne.Sequence,steps:n,options:t}}function Jt(n){return{type:ne.Style,styles:n,offset:null}}function _i(n,t,e){return{type:ne.State,name:n,styles:t,options:e}}function ur(n,t,e=null){return{type:ne.Transition,expr:n,animation:t,options:e}}var yi=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},gl=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){let t=this.players.reduce((e,r)=>e===null||r.totalTime>e.totalTime?r:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},pf="!";function IV(n,t){if(n&1&&(u(0,"div",16),_(1,"div",17),c()),n&2){let e=w(2);m(),Xn("width",e.progressBarWidth)}}function TV(n,t){if(n&1&&(it(0),u(1,"i",25),f(2),c(),ot()),n&2){let e=w(3);m(2),U(e.currentQuestion.question_data.question_icon)}}function MV(n,t){if(n&1&&(u(0,"h2"),f(1),c()),n&2){let e=w(3);m(),U(e.currentQuestion.question_data.question_title)}}function AV(n,t){if(n&1){let e=Q();u(0,"div",26)(1,"input",27),Ve("ngModelChange",function(i){I(e);let o=w(3);return qe(o.currentQuestion.answer,i)||(o.currentQuestion.answer=i),T(i)}),x("input",function(i){I(e);let o=w(3);return T(o.onAnswerChange(i))})("keydown.enter",function(){I(e);let i=w(3);return T(i.onEnterKey())}),c()()}if(n&2){let e=w(3);m(),Le("ngModel",e.currentQuestion.answer),v("placeholder",e.currentQuestion.question_data.placeholder||"Your answer here...")}}function kV(n,t){if(n&1){let e=Q();u(0,"div",30)(1,"input",31),Ve("ngModelChange",function(i){I(e);let o=w(4);return qe(o.currentQuestion.answer,i)||(o.currentQuestion.answer=i),T(i)}),x("ngModelChange",function(){I(e);let i=w(4);return T(i.onRadioAnswerChange())})("keydown.enter",function(){I(e);let i=w(4);return T(i.onEnterKey())}),c(),u(2,"label",32),f(3),c()()}if(n&2){let e=t.$implicit,r=w(4);m(),v("id",r.currentQuestion.question_id+"-"+e)("name",r.currentQuestion.question_id)("value",e),Le("ngModel",r.currentQuestion.answer),m(),v("for",r.currentQuestion.question_id+"-"+e),m(),U(e)}}function NV(n,t){if(n&1&&(u(0,"div",28),C(1,kV,4,6,"div",29),c()),n&2){let e=w(3);m(),v("ngForOf",e.currentQuestion.question_data.choices)}}function PV(n,t){if(n&1){let e=Q();u(0,"div",35)(1,"input",36),x("change",function(i){let o=I(e).$implicit,s=w(4);return T(s.onMultipleAnswerChange(o,i))})("keydown.enter",function(){I(e);let i=w(4);return T(i.onEnterKey())}),c(),u(2,"label",32),f(3),c()()}if(n&2){let e=t.$implicit,r=w(4);m(),v("id",r.currentQuestion.question_id+"-"+e)("value",e)("checked",r.currentQuestion.multipleAnswers==null?null:r.currentQuestion.multipleAnswers.includes(e)),m(),v("for",r.currentQuestion.question_id+"-"+e),m(),U(e)}}function OV(n,t){if(n&1&&(u(0,"div",33),C(1,PV,4,5,"div",34),c()),n&2){let e=w(3);m(),v("ngForOf",e.currentQuestion.question_data.choices)}}function RV(n,t){if(n&1&&(it(0),u(1,"div",18),C(2,TV,3,1,"ng-container",10)(3,MV,2,1,"h2",10),c(),u(4,"p",19),f(5),c(),u(6,"div",20),it(7,21),C(8,AV,2,2,"div",22)(9,NV,2,1,"div",23)(10,OV,2,1,"div",24),ot(),c(),ot()),n&2){let e=w(2);m(2),v("ngIf",e.currentQuestion.question_data.question_icon),m(),v("ngIf",e.currentQuestion.question_data.question_title),m(2),U(e.currentQuestion.question_data.question),m(2),v("ngSwitch",e.currentQuestion.question_data.question_type),m(),v("ngSwitchCase","fill"),m(),v("ngSwitchCase","select-one"),m(),v("ngSwitchCase","multiple")}}function FV(n,t){if(n&1){let e=Q();u(0,"button",37),x("click",function(){I(e);let i=w(2);return T(i.nextQuestion())}),f(1,"Next"),c()}}function LV(n,t){if(n&1){let e=Q();u(0,"button",12),x("click",function(){I(e);let i=w(2);return T(i.submitAnswers())}),f(1),c()}if(n&2){let e=w(2);v("disabled",e.loading),m(),O(" ",e.loading?"Submitting...":"Submit"," ")}}function VV(n,t){if(n&1&&(u(0,"div",38),f(1),c()),n&2){let e=w(2);v("@messageAnimation",void 0),m(),O(" ",e.errorMessage," ")}}function jV(n,t){if(n&1){let e=Q();it(0),C(1,IV,2,2,"div",8),u(2,"div",9),C(3,RV,11,7,"ng-container",10),c(),u(4,"div",11)(5,"button",12),x("click",function(){I(e);let i=w();return T(i.previousQuestion())}),f(6,"Previous"),c(),C(7,FV,2,0,"button",13)(8,LV,2,2,"button",14),c(),C(9,VV,2,2,"div",15),ot()}if(n&2){let e=w();m(),v("ngIf",!e.showCompleteScreen),m(),v("@questionAnimation",e.questionAnimationState),m(),v("ngIf",e.currentQuestion),m(2),v("disabled",e.currentQuestionIndex===0),m(2),v("ngIf",e.currentQuestionIndex<e.questions.length-1),m(),v("ngIf",e.currentQuestionIndex===e.questions.length-1),m(),v("ngIf",e.errorMessage)}}function UV(n,t){if(n&1&&(u(0,"div",43),f(1),c()),n&2){let e=w(2);v("@messageAnimation",void 0),m(),O(" ",e.errorMessage," ")}}function BV(n,t){if(n&1&&(u(0,"div",53)(1,"mat-icon"),f(2),c(),u(3,"div",54),f(4),c(),u(5,"div",55),_(6,"div",56),c(),u(7,"div",57),f(8),c()()),n&2){let e=t.$implicit;m(2),U(e.icon),m(2),U(e.emotion),m(2),Xn("width",e.percentage),m(2),U(e.percentage)}}function $V(n,t){if(n&1&&(u(0,"div",49)(1,"div",46)(2,"mat-icon"),f(3),c(),u(4,"h4"),f(5),c()(),u(6,"p"),f(7),c()()),n&2){let e=t.$implicit;m(),Xn("color",e.color),m(2),U(e.icon),m(2),U(e.category),m(2),O("Focus on ",e.category," related improvements.")}}function HV(n,t){if(n&1&&(u(0,"li"),f(1),c()),n&2){let e=t.$implicit;m(),U(e)}}function zV(n,t){if(n&1&&(u(0,"div",44)(1,"div",45)(2,"div",46)(3,"mat-icon"),f(4,"lightbulb"),c(),u(5,"h4"),f(6,"Emotional State Summary"),c()(),u(7,"div",47),C(8,BV,9,5,"div",48),c()(),u(9,"div",49)(10,"div",50)(11,"mat-icon"),f(12,"timer"),c(),u(13,"h4"),f(14,"Trade Readiness"),c()(),u(15,"article"),f(16),c()(),C(17,$V,8,5,"div",51),u(18,"div",49)(19,"div",50)(20,"mat-icon"),f(21,"lightbulb"),c(),u(22,"h4"),f(23,"Recommendations:"),c()(),u(24,"ul"),C(25,HV,2,1,"li",52),c()(),u(26,"div",49)(27,"div",50)(28,"mat-icon"),f(29,"directions_run"),c(),u(30,"h4"),f(31,"Recommened Actionable Item:"),c()(),u(32,"article"),f(33),c()()()),n&2){let e=w(2);m(8),v("ngForOf",e.analysisResult.emotion),m(8),U(e.analysisResult.readiness),m(),v("ngForOf",e.analysisResult.behaviorPattern),m(8),v("ngForOf",e.analysisResult.recommendation),m(8),U(e.analysisResult.actionableitem)}}function qV(n,t){if(n&1&&(u(0,"div",39)(1,"div",40)(2,"mat-icon"),f(3,"check"),c()(),C(4,UV,2,2,"div",41),u(5,"h3"),f(6,"Check-in Complete!"),c(),u(7,"p"),f(8,"Here are your AI insights for today"),c(),C(9,zV,34,5,"div",42),c()),n&2){let e=w();v("@checkInCompleteAnimation",void 0),m(4),v("ngIf",e.errorMessage),m(5),v("ngIf",e.analysisResult)}}var hf=class n{constructor(t,e,r,i){this.supabaseService=t;this.supabaseEmotionService=e;this.supabaseFunctionService=r;this.cdr=i}questions=[];currentQuestionIndex=0;currentQuestion;questionAnimationState="visible";showCompleteScreen=!1;analysisResult=null;loading=!1;errorMessage=null;todayCheckInCompleted=!1;userId="";async ngOnInit(){this.loading=!0;try{await this.supabaseEmotionService.canLoadCheckInQuestions()?(await this.loadQuestions(),this.showCompleteScreen=!1):(this.todayCheckInCompleted=!0,await this.loadLastCheckInResult(),this.showCompleteScreen=!0,this.errorMessage="You have already completed today's check-in.")}catch{this.errorMessage="Failed to initialize check-in. Please try again later."}finally{this.loading=!1,this.cdr.markForCheck()}}onEnterKey(){this.currentQuestionIndex<this.questions.length-1&&this.nextQuestion()}get progressBarWidth(){return this.questions.length===0?"0%":`${this.currentQuestionIndex/this.questions.length*100}%`}shuffleArray(t){let e=[...t];for(let r=e.length-1;r>0;r--){let i=Math.floor(Math.random()*(r+1));[e[r],e[i]]=[e[i],e[r]]}return e}async loadQuestions(){try{this.questions=await this.supabaseEmotionService.loadQuestions(),this.questions.length>0&&(this.currentQuestion=this.questions[this.currentQuestionIndex]),this.cdr.markForCheck()}catch(t){console.error("Error loading questions:",t),this.errorMessage="Failed to load questions. Please try again later.",this.cdr.markForCheck()}}nextQuestion(){this.currentQuestionIndex<this.questions.length-1&&(this.questionAnimationState="hidden-left",setTimeout(()=>{this.currentQuestionIndex++,this.currentQuestion=this.questions[this.currentQuestionIndex],this.questionAnimationState="visible",this.cdr.markForCheck()},300))}previousQuestion(){this.currentQuestionIndex>0&&(this.questionAnimationState="hidden-right",setTimeout(()=>{this.currentQuestionIndex--,this.currentQuestion=this.questions[this.currentQuestionIndex],this.questionAnimationState="visible",this.cdr.markForCheck()},300))}onAnswerChange(t){this.currentQuestion?.question_data.question_type==="fill"&&(this.currentQuestion.answer=t.target.value,this.cdr.markForCheck())}onRadioAnswerChange(){this.cdr.markForCheck()}onMultipleAnswerChange(t,e){if(this.currentQuestion?.question_data.question_type==="multiple"){this.currentQuestion.multipleAnswers||(this.currentQuestion.multipleAnswers=[]);let r=e.target.checked;r&&!this.currentQuestion.multipleAnswers.includes(t)?this.currentQuestion.multipleAnswers.push(t):!r&&this.currentQuestion.multipleAnswers.includes(t)&&(this.currentQuestion.multipleAnswers=this.currentQuestion.multipleAnswers.filter(i=>i!==t)),this.cdr.markForCheck()}}async submitAnswers(){this.loading=!0,this.errorMessage=null;try{let t=this.compileTraderInput(),e=await this.sendToSupabaseEdgeFunction(t);this.analysisResult=e,await this.saveAnswersToTable(e),this.showCompleteScreen=!0}catch(t){console.error("Error during submission:",t),this.errorMessage="An error occurred during submission. Please try again."}finally{this.cdr.markForCheck(),this.loading=!1}}compileTraderInput(){let t="";return this.questions.forEach((e,r)=>{let i="";e.question_data.question_type==="fill"||e.question_data.question_type==="select-one"?i=e.answer||"No answer provided.":e.question_data.question_type==="multiple"&&(i=e.multipleAnswers?.join(", ")||"No answer provided."),t+=`Q: ${e.question_data.question} A:${i}${r<this.questions.length-1?" ":""}`}),t}async sendToSupabaseEdgeFunction(t){let{data:e,error:r}=await this.supabaseFunctionService.callEdgeFunction("emotion-analyst-gemini",{prompt:t});if(r)throw new Error(`Failed to get analysis from Edge Function: ${r.message}`);if(!e||!Array.isArray(e)||e.length===0)throw new Error("Invalid or empty analysis response from Edge Function");let i={emotion:[],behaviorPattern:[],recommendation:[],readiness:"",actionableitem:""};return e.forEach(o=>{o.emotion&&Array.isArray(o.emotion)?i.emotion=o.emotion.map(s=>({emotion:s.emotion,percentage:String(s.percentage),icon:s.icon,color:s.color})):o.behaviorPattern&&Array.isArray(o.behaviorPattern)?i.behaviorPattern=o.behaviorPattern.map(s=>({category:s.category,icon:s.icon,color:s.color})):o.recommendation&&(Array.isArray(o.recommendation)||typeof o.recommendation=="string")?i.recommendation=Array.isArray(o.recommendation)?o.recommendation:[o.recommendation]:o.readiness&&typeof o.readiness=="string"?i.readiness=o.readiness:o.actionableitem&&typeof o.actionableitem=="string"&&(i.actionableitem=o.actionableitem)}),i}async saveAnswersToTable(t){let e=this.questions.map(o=>{let s="";return o.question_data.question_type==="fill"||o.question_data.question_type==="select-one"?s=o.answer||"":o.question_data.question_type==="multiple"&&(s=o.multipleAnswers||[]),{question_id:o.question_id,answer:s}}),r={user_id:this.supabaseService.user()?.id,answers:e,analysis:t},{error:i}=await this.supabaseEmotionService.submitUserAnswers(r);if(i)throw console.error("Error saving answers to database:",i),new Error(`Failed to save answers: ${i.message}`)}async loadLastCheckInResult(){try{let{data:t,error:e}=await this.supabaseEmotionService.getLastEmotionCheckInResult();if(e){this.errorMessage="Failed to load last check-in result.";return}if(Array.isArray(t)&&t.length>0&&t[0].analysis){let r=t[0].analysis;if(typeof r=="string")try{r=JSON.parse(r)}catch{}if(Array.isArray(r)){let i={emotion:[],behaviorPattern:[],recommendation:[],readiness:"",actionableitem:""};r.forEach(o=>{o.emotion&&Array.isArray(o.emotion)?i.emotion=o.emotion.map(s=>({emotion:s.emotion,percentage:String(s.percentage),icon:s.icon,color:s.color})):o.behaviorPattern&&Array.isArray(o.behaviorPattern)?i.behaviorPattern=o.behaviorPattern.map(s=>({category:s.category,icon:s.icon,color:s.color})):o.recommendation&&(Array.isArray(o.recommendation)||typeof o.recommendation=="string")?i.recommendation=Array.isArray(o.recommendation)?o.recommendation:[o.recommendation]:o.readiness&&typeof o.readiness=="string"?i.readiness=o.readiness:o.actionableitem&&typeof o.actionableitem=="string"&&(i.actionableitem=o.actionableitem)}),this.analysisResult=i}else this.analysisResult=r}}catch{this.errorMessage="Failed to load last check-in result."}}static \u0275fac=function(e){return new(e||n)(D(Ce),D(As),D(Ns),D(re))};static \u0275cmp=$({type:n,selectors:[["app-user-emotion-analysis"]],decls:11,vars:2,consts:[["completeScreen",""],[1,"container-fluid"],["aria-label","breadcrumb",2,"--bs-breadcrumb-divider",`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E")`],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/home",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[4,"ngIf","ngIfElse"],["class","progress-bar-container",4,"ngIf"],[1,"question-card"],[4,"ngIf"],[1,"navigation-buttons"],[1,"btn-tr",3,"click","disabled"],["class","btn-tr",3,"click",4,"ngIf"],["class","btn-tr",3,"disabled","click",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"progress-bar-container"],[1,"progress-bar"],[1,"question-header"],[1,"question-text"],[1,"answer-area"],[3,"ngSwitch"],["class","fill-input-container",4,"ngSwitchCase"],["class","select-one-options",4,"ngSwitchCase"],["class","multiple-options",4,"ngSwitchCase"],[1,"material-icons"],[1,"fill-input-container"],["type","text",3,"ngModelChange","input","keydown.enter","ngModel","placeholder"],[1,"select-one-options"],["class","radio-option",4,"ngFor","ngForOf"],[1,"radio-option"],["type","radio",3,"ngModelChange","keydown.enter","id","name","value","ngModel"],[3,"for"],[1,"multiple-options"],["class","checkbox-option",4,"ngFor","ngForOf"],[1,"checkbox-option"],["type","checkbox",3,"change","keydown.enter","id","value","checked"],[1,"btn-tr",3,"click"],[1,"error-message"],[1,"check-in-complete-screen"],[1,"complete-icon-circle"],["class","complete-message",4,"ngIf"],["class","analysis-results-new",4,"ngIf"],[1,"complete-message"],[1,"analysis-results-new"],[1,"analysis-card","emotional-summary-card"],[1,"analysis-card-header"],[1,"emotion-progress-list"],["class","emotion-item",4,"ngFor","ngForOf"],[1,"analysis-card"],[1,"analysis-card-header",2,"color","var(--primary-color)"],["class","analysis-card",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"emotion-item"],[1,"emotion-label"],[1,"emotion-bar-container"],[1,"emotion-bar"],[1,"emotion-percentage"]],template:function(e,r){if(e&1&&(u(0,"div",1)(1,"nav",2)(2,"ol",3)(3,"li",4)(4,"a",5),f(5,"Dashboard"),c()(),u(6,"li",6),f(7,"Emotion Questions"),c()()(),C(8,jV,10,7,"ng-container",7)(9,qV,10,3,"ng-template",null,0,fa),c()),e&2){let i=Gi(10);m(8),v("ngIf",!r.showCompleteScreen)("ngIfElse",i)}},dependencies:[q,Je,ee,jm,oE,sr,he,mn,ve,zr,rd,nd,Ue],styles:[".progress-bar-container[_ngcontent-%COMP%]{width:calc(100% - 40px);height:8px;background-color:#e0e0e0;border-radius:4px;margin-bottom:30px;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{height:100%;background-color:var(--primary-color);border-radius:4px;transition:width .3s ease-in-out}.question-card[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:10px;box-shadow:0 3px 12px #00000012;width:100%;box-sizing:border-box;text-align:center;position:relative;overflow:hidden}.question-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:20px}.question-header[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{font-size:40px;color:#3f51b5;margin-right:15px}.question-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:1.8em;margin:0}.question-text[_ngcontent-%COMP%]{font-size:1.2em;color:#555;margin-bottom:25px;line-height:1.5}.answer-area[_ngcontent-%COMP%]{margin-top:20px}.fill-input-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:calc(100% - 20px);padding:12px 10px;border:1px solid #ddd;border-radius:5px;font-size:1em;box-sizing:border-box}.fill-input-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{outline:none;border-color:#3f51b5;box-shadow:0 0 0 2px #3f51b533}.select-one-options[_ngcontent-%COMP%], .multiple-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;width:fit-content;margin:0 auto}.radio-option[_ngcontent-%COMP%], .checkbox-option[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px;cursor:pointer}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%], .checkbox-option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:10px;width:20px;height:20px;accent-color:#3f51b5}.radio-option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .checkbox-option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.1em;color:#444;cursor:pointer}.navigation-buttons[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:space-between;width:100%}.navigation-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 25px;border:none;border-radius:5px;color:#fff;font-size:1em;cursor:pointer;transition:background-color .3s ease,transform .2s ease;min-width:120px}.navigation-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px)}.navigation-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{color:#d32f2f;background-color:#ffebee;border:1px solid #ef9a9a;padding:10px 20px;border-radius:5px;margin-top:20px;text-align:center;font-weight:700}.complete-message[_ngcontent-%COMP%]{background-color:#c5f4d9;border:1px solid #2fd373;padding:10px 20px;border-radius:5px;margin-top:20px;margin-bottom:20px;text-align:center;font-weight:700}.check-in-complete-screen[_ngcontent-%COMP%]{background-color:#fff;padding:40px;border-radius:10px;box-shadow:0 4px 15px #0000001a;text-align:center;color:#333;width:100%;box-sizing:border-box}.complete-icon-circle[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%;background-color:#4caf50;display:flex;align-items:center;justify-content:center;margin:0 auto 25px;color:#fff}.complete-icon-circle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:40px;width:40px;font-size:40px}.check-in-complete-screen[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;font-size:2.2em;margin-bottom:10px}.check-in-complete-screen[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1em;color:#666;margin-bottom:30px}.analysis-results-new[_ngcontent-%COMP%]{margin-top:20px;text-align:left}.analysis-card[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:8px;padding:20px;margin-bottom:15px;box-shadow:0 2px 8px #0000000d}.analysis-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px;color:#3f51b5}.analysis-card-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;margin-right:10px}.analysis-card-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.3em;margin:0;color:inherit}.analysis-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;color:#555;line-height:1.5;margin-bottom:0}.analysis-results-new[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin-top:15px}.analysis-results-new[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#e3f2fd;padding:12px 18px;margin-bottom:10px;border-radius:8px;border-left:5px solid var(--primary-color);color:#333;line-height:1.4;font-size:.95em;box-shadow:0 1px 4px #0000000a}.emotional-summary-card[_ngcontent-%COMP%]{background-color:#fff;padding:25px;margin-bottom:20px}.emotional-summary-card[_ngcontent-%COMP%]   .analysis-card-header[_ngcontent-%COMP%]{justify-content:flex-start;margin-bottom:25px;color:#333}.emotion-progress-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.emotion-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.emotion-label[_ngcontent-%COMP%]{flex-basis:120px;min-width:120px;font-size:1em;color:#555;text-align:right}.emotion-bar-container[_ngcontent-%COMP%]{flex-grow:1;height:8px;background-color:#e0e0e0;border-radius:4px;overflow:hidden}.emotion-bar[_ngcontent-%COMP%]{height:100%;background-color:var(--primary-color);border-radius:4px;transition:width .5s ease-out}.emotion-percentage[_ngcontent-%COMP%]{flex-basis:40px;min-width:40px;font-size:.95em;color:#666;font-weight:500;text-align:right}"],data:{animation:[ff("questionAnimation",[_i("visible",Jt({opacity:1,transform:"translateX(0)",filter:"blur(0px)"})),_i("hidden-right",Jt({opacity:0,transform:"translateX(100%)",filter:"blur(5px)"})),_i("hidden-left",Jt({opacity:0,transform:"translateX(-100%)",filter:"blur(5px)"})),ur(":enter",[Jt({opacity:0,transform:"translateX(100%)",filter:"blur(5px)"}),cr("500ms ease-out",Jt({opacity:1,transform:"translateX(0)",filter:"blur(0px)"}))]),ur(":leave",[cr("500ms ease-out",Jt({opacity:0,transform:"translateX(-100%)",filter:"blur(5px)"}))]),ur("visible => hidden-left",cr("300ms ease-out")),ur("hidden-right => visible",cr("300ms ease-in")),ur("visible => hidden-right",cr("300ms ease-out")),ur("hidden-left => visible",cr("300ms ease-in"))]),ff("messageAnimation",[_i("void",Jt({opacity:0,transform:"scale(0.8)"})),_i("*",Jt({opacity:1,transform:"scale(1)"})),ur("void => *",cr("500ms ease-out")),ur("* => void",cr("500ms ease-in"))]),ff("checkInCompleteAnimation",[_i("void",Jt({opacity:0,transform:"translateY(20px)"})),_i("*",Jt({opacity:1,transform:"translateY(0)"})),ur("void => *",cr("600ms ease-out"))])]}})};function GV(n,t){if(n&1&&(u(0,"div",19),f(1),c()),n&2){let e=w();m(),O(" ",e.message," ")}}function WV(n,t){if(n&1&&(u(0,"div",20),f(1),c()),n&2){let e=w();m(),O(" ",e.errorMessage," ")}}function QV(n,t){n&1&&(u(0,"div",21),f(1," A valid email is required. "),c())}var mf=class n{constructor(t,e,r,i){this.fb=t;this.router=e;this.cdr=r;this.supabaseAuthService=i;this.forgotPasswordForm=this.fb.group({email:["",[R.required,R.email]]})}forgotPasswordForm;message=null;errorMessage=null;async onSubmit(){if(this.forgotPasswordForm.invalid){this.forgotPasswordForm.markAllAsTouched();return}let{email:t}=this.forgotPasswordForm.getRawValue();this.errorMessage=null,this.message=null;try{let{success:e,error:r}=await this.supabaseAuthService.requestPasswordReset(t);e?this.message="If an account with that email exists, you will receive a password reset link!":this.errorMessage=r?.message||"Failed to send reset link. Please try again.",this.cdr.markForCheck()}catch(e){this.errorMessage=e.message||"An unexpected error occurred.",this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(D(xt),D(gt),D(re),D(ar))};static \u0275cmp=$({type:n,selectors:[["app-forgot-password"]],decls:26,vars:5,consts:[[1,"auth-container"],[1,"auth-card"],[1,"text-center","mb-4"],[1,"logo-circle","mx-auto"],["src","/tr_logo.png","alt","Logo",1,"img-fluid"],[1,"brand-name","mt-3"],[1,"brand-tagline"],["class","alert alert-info mb-3",4,"ngIf"],["class","alert alert-danger mb-3",4,"ngIf"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-tr","btn-primary","btn-md",3,"disabled"],[1,"text-center","mt-4"],[1,"mb-0"],["routerLink","",1,"login-link"],[1,"alert","alert-info","mb-3"],[1,"alert","alert-danger","mb-3"],[1,"text-danger","small","mt-1"]],template:function(e,r){if(e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),_(4,"img",4),c()(),u(5,"div",2)(6,"h2",5),f(7,"Forgot Password"),c(),u(8,"p",6),f(9,"Enter your email to receive a password reset link."),c()(),C(10,GV,2,1,"div",7)(11,WV,2,1,"div",8),u(12,"form",9),x("ngSubmit",function(){return r.onSubmit()}),u(13,"div",10)(14,"label",11),f(15,"Email"),c(),_(16,"input",12),C(17,QV,2,0,"div",13),c(),u(18,"div",14)(19,"button",15),f(20,"Send Reset Link"),c()(),u(21,"div",16)(22,"p",17),f(23,"Remember your password? "),u(24,"a",18),f(25,"Login"),c()()()()()()),e&2){let i;m(10),v("ngIf",r.message),m(),v("ngIf",r.errorMessage),m(),v("formGroup",r.forgotPasswordForm),m(5),v("ngIf",((i=r.forgotPasswordForm.get("email"))==null?null:i.invalid)&&((i=r.forgotPasswordForm.get("email"))==null?null:i.touched)),m(2),v("disabled",r.forgotPasswordForm.invalid)}},dependencies:[q,ee,be,Wt,he,ve,Ne,Me,Oe,Ue],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100dvh;display:flex;align-items:center;justify-content:center}.auth-card[_ngcontent-%COMP%]{background-color:transparent;border-radius:12px;width:100%;max-width:450px;padding:30px}.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:transparent;position:relative;display:flex;align-items:center;justify-content:center;margin:0 auto}.dots-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;position:relative;background-image:radial-gradient(circle,#5046e5 3px,transparent 3px);background-size:15px 15px;transform:rotate(45deg)}.brand-name[_ngcontent-%COMP%]{font-weight:700;font-size:24px;margin-bottom:5px;letter-spacing:.5px}.brand-tagline[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.tabs-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-bottom:1px solid #eee;padding-bottom:5px}.tab[_ngcontent-%COMP%]{padding:8px 15px;cursor:pointer;color:#888;font-weight:500;font-size:16px;transition:color .2s}.tab.active[_ngcontent-%COMP%]{color:#5046e5;border-bottom:2px solid #5046e5}.tab-separator[_ngcontent-%COMP%]{color:#ccc}.auth-form[_ngcontent-%COMP%]{margin-top:10px}.form-control[_ngcontent-%COMP%]{height:auto;padding:12px 15px;border-radius:8px;border:1px solid #ddd;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{border-color:#5046e5;box-shadow:0 0 0 .2rem #5046e526}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555;margin-bottom:8px}.forgot-link[_ngcontent-%COMP%]{font-size:14px;color:#5046e5;text-decoration:none}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{color:#5046e5;font-weight:500;text-decoration:none}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-primary[_ngcontent-%COMP%]{background-color:#5046e5;border-color:#5046e5;padding:12px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus{background-color:#4238d0;border-color:#4238d0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#a8a4e0;border-color:#a8a4e0}.separator[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;color:#888;font-size:14px}.separator[_ngcontent-%COMP%]:before, .separator[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #ddd}.separator[_ngcontent-%COMP%]:before{margin-right:1em}.separator[_ngcontent-%COMP%]:after{margin-left:1em}.google-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;border:1px solid #ddd;color:#333;padding:12px;font-weight:500}.google-btn[_ngcontent-%COMP%]:hover{background-color:#f8f8f8;color:#333}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{padding:20px 15px}.brand-name[_ngcontent-%COMP%]{font-size:20px}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{padding:10px}}']})};function KV(n,t){if(n&1&&(u(0,"div",22),f(1),c()),n&2){let e=w();m(),O(" ",e.errorMessage," ")}}function ZV(n,t){if(n&1&&(u(0,"div",23),f(1),c()),n&2){let e=w();m(),O(" ",e.successMessage," ")}}function YV(n,t){n&1&&(u(0,"div",24),f(1," Password must be at least 6 characters. "),c())}function JV(n,t){n&1&&(u(0,"small",25),f(1," Passwords do not match "),c())}var gf=class n{constructor(t,e,r,i,o){this.fb=t;this.router=e;this.route=r;this.cdr=i;this.supabaseAuthService=o;this.updatePasswordForm=this.fb.group({newPassword:["",[R.required,R.minLength(6)]],confirmNewPassword:["",R.required]},{validators:this.passwordMatchValidator})}updatePasswordForm;errorMessage=null;successMessage=null;ngOnInit(){}passwordMatchValidator(t){let e=t.get("newPassword")?.value,r=t.get("confirmNewPassword")?.value;return e===r?null:{mismatch:!0}}async onSubmit(){if(this.updatePasswordForm.invalid){this.updatePasswordForm.markAllAsTouched();return}let{newPassword:t}=this.updatePasswordForm.getRawValue();this.errorMessage=null,this.successMessage=null;try{let{success:e,error:r}=await this.supabaseAuthService.updatePassword(t);e?(this.successMessage="Your password has been updated successfully! Redirecting to login...",this.updatePasswordForm.reset(),setTimeout(()=>{this.router.navigate(["/auth"])},3e3)):this.errorMessage=r?.message||"Failed to update password. Please try again.",this.cdr.markForCheck()}catch(e){this.errorMessage=e.message||"An unexpected error occurred.",this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(D(xt),D(gt),D(fn),D(re),D(ar))};static \u0275cmp=$({type:n,selectors:[["app-update-password"]],decls:31,vars:6,consts:[[1,"auth-container"],[1,"auth-card"],[1,"text-center","mb-4"],[1,"logo-circle","mx-auto"],["src","/tr_logo.png","alt","Logo",1,"img-fluid"],[1,"brand-name","mt-3"],[1,"brand-tagline"],["class","alert alert-danger mb-3",4,"ngIf"],["class","alert alert-success mb-3",4,"ngIf"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","newPassword",1,"form-label"],["type","password","id","newPassword","formControlName","newPassword","placeholder","Enter new password",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","confirmNewPassword",1,"form-label"],["type","password","id","confirmNewPassword","formControlName","confirmNewPassword","placeholder","Confirm new password",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-tr","btn-primary","btn-md",3,"disabled"],[1,"text-center","mt-4"],[1,"mb-0"],["routerLink","/auth",1,"login-link"],[1,"alert","alert-danger","mb-3"],[1,"alert","alert-success","mb-3"],[1,"text-danger","small","mt-1"],[1,"text-danger"]],template:function(e,r){if(e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),_(4,"img",4),c()(),u(5,"div",2)(6,"h2",5),f(7,"Set New Password"),c(),u(8,"p",6),f(9,"Please enter your new password."),c()(),C(10,KV,2,1,"div",7)(11,ZV,2,1,"div",8),u(12,"form",9),x("ngSubmit",function(){return r.onSubmit()}),u(13,"div",10)(14,"label",11),f(15,"New Password"),c(),_(16,"input",12),C(17,YV,2,0,"div",13),c(),u(18,"div",10)(19,"label",14),f(20,"Confirm New Password"),c(),_(21,"input",15),C(22,JV,2,0,"small",16),c(),u(23,"div",17)(24,"button",18),f(25,"Update Password"),c()(),u(26,"div",19)(27,"p",20),f(28,"Go back to "),u(29,"a",21),f(30,"Login"),c()()()()()()),e&2){let i,o;m(10),v("ngIf",r.errorMessage),m(),v("ngIf",r.successMessage),m(),v("formGroup",r.updatePasswordForm),m(5),v("ngIf",((i=r.updatePasswordForm.get("newPassword"))==null?null:i.invalid)&&((i=r.updatePasswordForm.get("newPassword"))==null?null:i.touched)),m(5),v("ngIf",r.updatePasswordForm.hasError("mismatch")&&((o=r.updatePasswordForm.get("confirmNewPassword"))==null?null:o.touched)),m(2),v("disabled",r.updatePasswordForm.invalid)}},dependencies:[q,ee,be,Wt,he,ve,Ne,Me,Oe],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100dvh;display:flex;align-items:center;justify-content:center}.auth-card[_ngcontent-%COMP%]{background-color:transparent;border-radius:12px;width:100%;max-width:450px;padding:30px}.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:transparent;position:relative;display:flex;align-items:center;justify-content:center;margin:0 auto}.dots-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;position:relative;background-image:radial-gradient(circle,#5046e5 3px,transparent 3px);background-size:15px 15px;transform:rotate(45deg)}.brand-name[_ngcontent-%COMP%]{font-weight:700;font-size:24px;margin-bottom:5px;letter-spacing:.5px}.brand-tagline[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.tabs-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-bottom:1px solid #eee;padding-bottom:5px}.tab[_ngcontent-%COMP%]{padding:8px 15px;cursor:pointer;color:#888;font-weight:500;font-size:16px;transition:color .2s}.tab.active[_ngcontent-%COMP%]{color:#5046e5;border-bottom:2px solid #5046e5}.tab-separator[_ngcontent-%COMP%]{color:#ccc}.auth-form[_ngcontent-%COMP%]{margin-top:10px}.form-control[_ngcontent-%COMP%]{height:auto;padding:12px 15px;border-radius:8px;border:1px solid #ddd;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{border-color:#5046e5;box-shadow:0 0 0 .2rem #5046e526}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555;margin-bottom:8px}.forgot-link[_ngcontent-%COMP%]{font-size:14px;color:#5046e5;text-decoration:none}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{color:#5046e5;font-weight:500;text-decoration:none}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-primary[_ngcontent-%COMP%]{background-color:#5046e5;border-color:#5046e5;padding:12px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus{background-color:#4238d0;border-color:#4238d0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#a8a4e0;border-color:#a8a4e0}.separator[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;color:#888;font-size:14px}.separator[_ngcontent-%COMP%]:before, .separator[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #ddd}.separator[_ngcontent-%COMP%]:before{margin-right:1em}.separator[_ngcontent-%COMP%]:after{margin-left:1em}.google-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;border:1px solid #ddd;color:#333;padding:12px;font-weight:500}.google-btn[_ngcontent-%COMP%]:hover{background-color:#f8f8f8;color:#333}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{padding:20px 15px}.brand-name[_ngcontent-%COMP%]{font-size:20px}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{padding:10px}}']})};var XV=()=>["Planned","Executing","Completed"],vf=(n,t)=>({"text-success":n,"text-danger":t}),e3=(n,t,e)=>({"bg-warning text-dark":n,"bg-info text-dark":t,"bg-success":e});function t3(n,t){if(n&1&&(u(0,"option",21),f(1),c()),n&2){let e=t.$implicit,r=w();v("value",e.account_id)("selected",e.account_id===r.tradeAccountId),m(),O(" ",e.account_name," ")}}function n3(n,t){if(n&1){let e=Q();u(0,"li",22)(1,"a",23),x("click",function(){let i=I(e).$implicit,o=w();return T(o.activeTab=i)}),f(2),c()()}if(n&2){let e=t.$implicit,r=w();m(),Pt("active",r.activeTab===e),m(),U(e==="Executing"?"Executing Trades":e==="Planned"?"Planned Trades":"Completed Trades")}}function r3(n,t){n&1&&(u(0,"div",24),f(1,"Loading trade logs..."),c())}function i3(n,t){if(n&1&&(u(0,"div",25),f(1),c()),n&2){let e=w();m(),U(e.errorMessage)}}function o3(n,t){n&1&&(u(0,"tr")(1,"th"),f(2,"Symbol"),c(),u(3,"th"),f(4,"Direction"),c(),u(5,"th"),f(6,"Entry Price"),c(),u(7,"th"),f(8,"Strategy"),c(),u(9,"th"),f(10,"Emotional State"),c(),u(11,"th"),f(12,"Date"),c(),u(13,"th"),f(14,"Status"),c(),u(15,"th"),f(16,"Actions"),c()())}function s3(n,t){n&1&&(u(0,"tr")(1,"th"),f(2,"Symbol"),c(),u(3,"th"),f(4,"Direction"),c(),u(5,"th"),f(6,"Entry Price"),c(),u(7,"th"),f(8,"Exit Price"),c(),u(9,"th"),f(10,"P&L"),c(),u(11,"th"),f(12,"Margin %"),c(),u(13,"th"),f(14,"RR Ratio"),c(),u(15,"th"),f(16,"Entry Date"),c(),u(17,"th"),f(18,"Exit Date"),c(),u(19,"th"),f(20,"Actions"),c()())}function a3(n,t){if(n&1){let e=Q();u(0,"button",39),x("click",function(i){I(e);let o=w().$implicit,s=w(3);return T(s.markAsExecuted(o,i))}),f(1,"Trade Executed"),c()}}function l3(n,t){if(n&1){let e=Q();u(0,"button",40),x("click",function(i){I(e);let o=w().$implicit,s=w(3);return T(s.openCompleteModal(o,i))}),f(1,"Complete Trade"),c()}}function c3(n,t){if(n&1){let e=Q();u(0,"tr")(1,"td",32),f(2),c(),u(3,"td",33),f(4),c(),u(5,"td"),f(6),c(),u(7,"td"),f(8),c(),u(9,"td"),f(10),c(),u(11,"td"),f(12),c(),u(13,"td")(14,"span",34),f(15),c()(),u(16,"td")(17,"button",35),x("click",function(){let i=I(e).$implicit,o=w(3);return T(o.openEditModal(i))}),f(18,"Edit"),c(),C(19,a3,2,0,"button",36)(20,l3,2,0,"button",37),u(21,"button",38),x("click",function(i){let o=I(e).$implicit,s=w(3);return T(s.onDeleteTradeLog(o,i))}),f(22,"Delete"),c()()()}if(n&2){let e=t.$implicit,r=w(3);m(2),U(e.trade_symbol),m(),v("ngClass",Dt(11,vf,r.getDirection(e)==="LONG",r.getDirection(e)==="SHORT")),m(),U(r.getDirection(e)),m(2),O("$",r.getEntryPrice(e),""),m(2),U(e.strategy_name),m(2),U(r.getEmotion(e)),m(2),U(r.getTradeDate(e)),m(2),v("ngClass",Wi(14,e3,e.trade_status==="Planned",e.trade_status==="Executing",e.trade_status==="Completed")),m(),U(e.trade_status.toLowerCase()),m(4),v("ngIf",e.trade_status==="Planned"),m(),v("ngIf",e.trade_status==="Executing")}}function u3(n,t){if(n&1&&(it(0),C(1,c3,23,18,"tr",31),ot()),n&2){let e=w(2);m(),v("ngForOf",e.filteredTrades)}}function d3(n,t){if(n&1){let e=Q();u(0,"tr")(1,"td",32),f(2),c(),u(3,"td",33),f(4),c(),u(5,"td"),f(6),c(),u(7,"td"),f(8),c(),u(9,"td",33),f(10),ut(11,"number"),c(),u(12,"td",33),f(13),ut(14,"number"),c(),u(15,"td"),f(16),c(),u(17,"td"),f(18),c(),u(19,"td"),f(20),c(),u(21,"td")(22,"button",41),x("click",function(){let i=I(e).$implicit,o=w(3);return T(o.viewAnalysis(i))}),f(23,"View Analysis"),c()()()}if(n&2){let e=t.$implicit,r=w(3);m(2),U(e.trade_symbol),m(),v("ngClass",Dt(18,vf,r.getDirection(e)==="LONG",r.getDirection(e)==="SHORT")),m(),U(r.getDirection(e)),m(2),O("$",r.getEntryPrice(e),""),m(2),O("$",r.getExitPrice(e),""),m(),v("ngClass",Dt(21,vf,r.getPL(e)>0,r.getPL(e)<0)),m(),O("$",dt(11,12,r.getPL(e),"1.2-2"),""),m(2),v("ngClass",Dt(24,vf,r.getMargin(e)>0,r.getMargin(e)<0)),m(),O("",dt(14,15,r.getMargin(e),"1.2-2"),"%"),m(3),U(r.getRR(e)),m(2),U(r.getEntryDate(e)),m(2),U(r.getExitDate(e))}}function f3(n,t){if(n&1&&(it(0),C(1,d3,24,27,"tr",31),ot()),n&2){let e=w(2);m(),v("ngForOf",e.filteredTrades)}}function p3(n,t){if(n&1&&(u(0,"div")(1,"div",26)(2,"div",27)(3,"h4",7),f(4),c(),u(5,"div",8),f(6),c()(),u(7,"div",28)(8,"table",29)(9,"thead"),C(10,o3,17,0,"tr",18)(11,s3,21,0,"tr",18),c(),u(12,"tbody"),C(13,u3,2,1,"ng-container",18)(14,f3,2,1,"ng-container",18),c()()(),u(15,"div",30),f(16),c()()()),n&2){let e=w();m(4),O(" ",e.activeTab==="Completed"?"Your Completed Trades":"Your Trade Plans"," "),m(2),O(" ",e.activeTab==="Completed"?"Review the performance of your completed trades":"Review and manage your "+e.activeTab.toLowerCase()+" trades"," "),m(4),v("ngIf",e.activeTab!=="Completed"),m(),v("ngIf",e.activeTab==="Completed"),m(2),v("ngIf",e.activeTab!=="Completed"),m(),v("ngIf",e.activeTab==="Completed"),m(2),O(" ",e.activeTab==="Completed"?"A list of your completed trades with performance metrics.":"A list of your recent trade plans."," ")}}function h3(n,t){n&1&&(u(0,"div",42),f(1," No trade logs found for this tab. "),c())}function m3(n,t){if(n&1){let e=Q();u(0,"div",43),x("click",function(i){I(e);let o=w();return T(o.closeModalOnOverlayClick(i))}),u(1,"div",44),x("click",function(i){return I(e),T(i.stopPropagation())}),u(2,"app-individual-trade",45),x("formSubmitted",function(){I(e);let i=w();return T(i.onFormSubmitted())})("cancel",function(){I(e);let i=w();return T(i.closeModal())}),c()()()}if(n&2){let e=w();m(2),v("tradeData",e.selectedTradeLog)("mode",e.modalMode)("tradeAccountId",e.tradeAccountId)}}var yf=class n{constructor(t,e,r){this.supabaseTradeTableService=t;this.supabaseAccountService=e;this.cdr=r}tableName="tradejournal";tradeLogs=[];tradeAccounts=[];loading=!1;errorMessage="";tradeAccountId="";activeTab="Planned";get filteredTrades(){return this.tradeLogs.filter(t=>(t.trade_status||"").toLowerCase()===this.activeTab.toLowerCase())}showModal=!1;selectedTradeLog=null;modalMode="create";tradeStatus=[{status:"Planned",title:"Planning Phase"},{status:"Executing",title:"Executing Phase"},{status:"Completed",title:"Completed Phase"}];async ngOnInit(){this.loading=!0;try{await this.fetchTradeAccounts(),await this.fetchTradeLogs(),this.loading=!1,this.cdr.markForCheck()}catch{this.loading=!1,this.cdr.markForCheck()}}async fetchTradeLogs(){try{let t=await this.supabaseTradeTableService.getTradeLogsOfSelectedAccount(this.tableName,this.tradeAccountId);this.tradeLogs=t.sort((e,r)=>new Date(r.updated_time).getTime()-new Date(e.updated_time).getTime()),this.cdr.markForCheck()}catch(t){console.error("Error fetching trade logs:",t),this.errorMessage="Error fetching trade logs."}}getDirection(t){let e="";return t.planned_trade&&Array.isArray(t.planned_trade)&&t.planned_trade[0]?.trade_direction?e=t.planned_trade[0].trade_direction:t.executing_trades&&Array.isArray(t.executing_trades)&&t.executing_trades[0]?.trade_direction?e=t.executing_trades[0].trade_direction:t.trade_direction&&(e=t.trade_direction),e?e.toUpperCase():""}getEntryPrice(t){let e="";return t.planned_trade&&Array.isArray(t.planned_trade)&&t.planned_trade[0]?.entry_price?e=t.planned_trade[0].entry_price:t.executing_trades&&Array.isArray(t.executing_trades)&&t.executing_trades[0]?.entry_price?e=t.executing_trades[0].entry_price:t.entry_price&&(e=t.entry_price),e!==void 0?e:""}getExitPrice(t){return t.executing_trades&&Array.isArray(t.executing_trades)&&t.executing_trades[0]?.exit_price?t.executing_trades[0].exit_price:t.exit_price?t.exit_price:""}getPL(t){let e=parseFloat(this.getEntryPrice(t)),r=parseFloat(this.getExitPrice(t));return!isNaN(e)&&!isNaN(r)?+(r-e).toFixed(2):0}getMargin(t){let e=parseFloat(this.getEntryPrice(t)),r=parseFloat(this.getExitPrice(t));return!isNaN(e)&&e!==0&&!isNaN(r)?+((r-e)/e*100).toFixed(2):0}getRR(t){return t.rr_ratio!==void 0?t.rr_ratio:t.executing_trades&&Array.isArray(t.executing_trades)&&t.executing_trades[0]?.rr_ratio!==void 0?t.executing_trades[0].rr_ratio:""}getEntryDate(t){return t.executing_trades&&Array.isArray(t.executing_trades)&&t.executing_trades[0]?.entry_time?new Date(t.executing_trades[0].entry_time).toLocaleDateString():t.created_at?new Date(t.created_at).toLocaleDateString():""}getExitDate(t){return t.executing_trades&&Array.isArray(t.executing_trades)&&t.executing_trades[0]?.exit_time?new Date(t.executing_trades[0].exit_time).toLocaleDateString():t.updated_time?new Date(t.updated_time).toLocaleDateString():""}getTradeDate(t){return t.created_at?new Date(t.created_at).toLocaleDateString():""}viewAnalysis(t){this.selectedTradeLog=t,this.showModal=!0,this.modalMode="view"}async markAsExecuted(t,e){e.stopPropagation();try{let r=z(N({},t),{trade_status:"Executing"});await this.supabaseTradeTableService.updateTradeLogOfSelectedAccount(r,this.tableName,this.tradeAccountId),await this.fetchTradeLogs(),this.cdr.markForCheck()}catch{this.errorMessage="Error updating trade status."}}async fetchTradeAccounts(){try{if(this.tradeAccounts=await this.supabaseAccountService.getUserTradeAccounts(),this.tradeAccounts.length===0)throw this.errorMessage="No trade accounts found. Create trade account before logging trades.",new Error("No trade accounts found.");!this.tradeAccountId&&this.tradeAccounts.length>0&&(this.tradeAccountId=this.tradeAccounts[0].account_id),this.cdr.markForCheck()}catch{throw this.errorMessage="No trade accounts found. Create trade account before logging trades.",this.cdr.markForCheck(),new Error("No trade accounts found.")}}onAccountChange(t){let e=t.target;this.tradeAccountId=e.value,this.fetchTradeLogs(),this.cdr.markForCheck()}openCompleteModal(t,e){e&&e.stopPropagation(),this.selectedTradeLog=t,this.showModal=!0,this.modalMode="complete"}openEditModal(t){this.selectedTradeLog=t,this.showModal=!0,this.modalMode="edit"}async openAddModal(){await this.supabaseTradeTableService.canLogTrade()?(this.selectedTradeLog=null,this.showModal=!0,this.modalMode="create",this.cdr.markForCheck()):(this.errorMessage="You have reached the limit for today's trades logging",this.cdr.markForCheck())}onFormSubmitted(){this.fetchTradeLogs(),this.closeModal(),this.cdr.markForCheck()}closeModal(){this.showModal=!1,this.selectedTradeLog=null,this.cdr.markForCheck()}closeModalOnOverlayClick(t){this.closeModal(),this.cdr.markForCheck()}getEmotion(t){var e="None";return t.trade_status!=="Completed"?e=t.emotion_before.emotional_state_before:e=t.emotion_after.emotional_state_after,e}async onDeleteTradeLog(t,e){e.stopPropagation();try{await this.supabaseTradeTableService.deleteTradeLogOfSelectedAccount(t.tradeid,this.tableName,this.tradeAccountId),await this.fetchTradeLogs(),this.cdr.markForCheck()}catch(r){console.error("Error deleting trade log:",r),this.errorMessage="Error deleting trade log."}}static \u0275fac=function(e){return new(e||n)(D(It),D(Yt),D(re))};static \u0275cmp=$({type:n,selectors:[["app-trade-journal"]],decls:29,vars:8,consts:[[1,"container","mt-3"],["aria-label","breadcrumb",2,"--bs-breadcrumb-divider",`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E")`],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/home",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold","mb-0"],[1,"text-muted"],[1,"btn","btn-primary",3,"click"],[1,"form-group","mt-4","mb-3"],["for","accountSelector"],["id","accountSelector",1,"form-control","w-auto","d-inline-block","ms-2","btn","btn-tr",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"nav","nav-tabs","mt-4","mb-3"],["class","nav-item",4,"ngFor","ngForOf"],["class","alert alert-info",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["class","alert alert-warning mt-4",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"value","selected"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"alert","alert-info"],[1,"alert","alert-danger"],[1,"card","p-4"],[1,"mb-2"],[1,"table-responsive"],[1,"table","align-middle"],[1,"text-muted","mt-2",2,"font-size","0.95em"],[4,"ngFor","ngForOf"],[1,"fw-bold"],[3,"ngClass"],[1,"badge",3,"ngClass"],[1,"btn","btn-outline-secondary","btn-sm","me-1",3,"click"],["class","btn btn-outline-warning btn-sm me-1",3,"click",4,"ngIf"],["class","btn btn-outline-success btn-sm me-1",3,"click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"btn","btn-outline-warning","btn-sm","me-1",3,"click"],[1,"btn","btn-outline-success","btn-sm","me-1",3,"click"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"alert","alert-warning","mt-4"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[3,"formSubmitted","cancel","tradeData","mode","tradeAccountId"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),c()(),u(6,"li",5),f(7,"Trade Journal"),c()()(),u(8,"div",6)(9,"div")(10,"h2",7),f(11,"Trading Dashboard"),c(),u(12,"div",8),f(13,"Manage your trades from planning to completion"),c()(),u(14,"button",9),x("click",function(){return r.openAddModal()}),f(15," New Trade Plan "),c()(),u(16,"div",10)(17,"label",11)(18,"strong"),f(19,"Trading Account:"),c()(),u(20,"select",12),x("change",function(o){return r.onAccountChange(o)}),C(21,t3,2,3,"option",13),c()(),u(22,"ul",14),C(23,n3,3,3,"li",15),c(),C(24,r3,2,0,"div",16)(25,i3,2,1,"div",17)(26,p3,17,7,"div",18)(27,h3,2,0,"div",19),c(),C(28,m3,3,3,"div",20)),e&2&&(m(21),v("ngForOf",r.tradeAccounts),m(2),v("ngForOf",hu(7,XV)),m(),v("ngIf",r.loading),m(),v("ngIf",r.errorMessage),m(),v("ngIf",r.filteredTrades.length>0),m(),v("ngIf",!r.loading&&r.filteredTrades.length===0),m(),v("ngIf",r.showModal))},dependencies:[be,Kt,Zt,q,qt,Je,ee,Tu,Ps,Ue],styles:[".card[_ngcontent-%COMP%]{transition:transform .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.trade-status-indicator[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;padding:5px 10px;border-radius:5px;color:#fff;font-size:.7rem}.status-planned[_ngcontent-%COMP%]{background-color:#007bff}.status-executing[_ngcontent-%COMP%]{background-color:#ffc107}.status-completed[_ngcontent-%COMP%]{background-color:#28a745}.status-planned-card[_ngcontent-%COMP%]{border-left:4px solid #007bff!important}.status-executing-card[_ngcontent-%COMP%]{border-left:4px solid #ffc107!important}.status-completed-card[_ngcontent-%COMP%]{border-left:4px solid #28a745!important}.delete-icon[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;display:none;color:red;cursor:pointer}.card[_ngcontent-%COMP%]:hover   .delete-icon[_ngcontent-%COMP%]{display:block}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100dvw;height:100dvh;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1050}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;max-width:90vw;position:relative;max-height:98dvh;overflow-y:auto}"]})};var y1=[{path:"",component:Wd,canActivate:[al]},{path:"home",component:Md,canActivate:[ft]},{path:"pretrades",component:$d,canActivate:[ft]},{path:"pretradelog",component:Ts,canActivate:[ft]},{path:"posttrades",component:Hd,canActivate:[ft]},{path:"posttradelog",component:Ms,canActivate:[ft]},{path:"emotions",component:hf,canActivate:[ft]},{path:"tradejournal",component:yf,canActivate:[ft]},{path:"individualTrade",component:Ps,canActivate:[ft]},{path:"meditationhub",component:Qd,canActivate:[ft]},{path:"analytics",component:Kd,canActivate:[ft]},{path:"tradeaccounts",component:lf,canActivate:[ft]},{path:"useraccount",component:cf,canActivate:[ft]},{path:"admin/emotionquestion",component:zd,canActivate:[ft]},{path:"admin/meditationvideo",component:df,canActivate:[ft]},{path:"auth/forgot-password",component:mf,canActivate:[al]},{path:"auth/update-password",component:gf,canActivate:[ft]},{path:"**",redirectTo:""}];function _1(n){return new k(3e3,!1)}function g3(){return new k(3100,!1)}function v3(){return new k(3101,!1)}function y3(n){return new k(3001,!1)}function _3(n){return new k(3003,!1)}function b3(n){return new k(3004,!1)}function w3(n,t){return new k(3005,!1)}function E3(){return new k(3006,!1)}function C3(){return new k(3007,!1)}function S3(n,t){return new k(3008,!1)}function D3(n){return new k(3002,!1)}function x3(n,t,e,r,i){return new k(3010,!1)}function I3(){return new k(3011,!1)}function T3(){return new k(3012,!1)}function M3(){return new k(3200,!1)}function A3(){return new k(3202,!1)}function k3(){return new k(3013,!1)}function N3(n){return new k(3014,!1)}function P3(n){return new k(3015,!1)}function O3(n){return new k(3016,!1)}function R3(n,t){return new k(3404,!1)}function F3(n){return new k(3502,!1)}function L3(n){return new k(3503,!1)}function V3(){return new k(3300,!1)}function j3(n){return new k(3504,!1)}function U3(n){return new k(3301,!1)}function B3(n,t){return new k(3302,!1)}function $3(n){return new k(3303,!1)}function H3(n,t){return new k(3400,!1)}function z3(n){return new k(3401,!1)}function q3(n){return new k(3402,!1)}function G3(n,t){return new k(3505,!1)}function bi(n){switch(n.length){case 0:return new yi;case 1:return n[0];default:return new gl(n)}}function P1(n,t,e=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(t.forEach(l=>{let d=l.get("offset"),p=d==s,h=p&&a||new Map;l.forEach((y,g)=>{let b=g,E=y;if(g!=="offset")switch(b=n.normalizePropertyName(b,i),E){case pf:E=e.get(g);break;case lr:E=r.get(g);break;default:E=n.normalizeStyleValue(g,b,E,i);break}h.set(b,E)}),p||o.push(h),a=h,s=d}),i.length)throw F3(i);return o}function cv(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&$0(e,"start",n)));break;case"done":n.onDone(()=>r(e&&$0(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&$0(e,"destroy",n)));break}}function $0(n,t,e){let r=e.totalTime,i=!!e.disabled,o=uv(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function uv(n,t,e,r,i="",o=0,s){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function vn(n,t,e){let r=n.get(t);return r||n.set(t,r=e),r}function b1(n){let t=n.indexOf(":"),e=n.substring(1,t),r=n.slice(t+1);return[e,r]}var W3=typeof document>"u"?null:document.documentElement;function dv(n){let t=n.parentNode||n.host||null;return t===W3?null:t}function Q3(n){return n.substring(1,6)=="ebkit"}var mo=null,w1=!1;function K3(n){mo||(mo=Z3()||{},w1=mo.style?"WebkitAppearance"in mo.style:!1);let t=!0;return mo.style&&!Q3(n)&&(t=n in mo.style,!t&&w1&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in mo.style)),t}function Z3(){return typeof document<"u"?document.body:null}function O1(n,t){for(;t;){if(t===n)return!0;t=dv(t)}return!1}function R1(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let r=n.querySelector(t);return r?[r]:[]}var fv=(()=>{class n{validateStyleProperty(e){return K3(e)}containsElement(e,r){return O1(e,r)}getParentElement(e){return dv(e)}query(e,r,i){return R1(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,o,s,a=[],l){return new yi(i,o)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),yo=class{static NOOP=new fv},_o=class{};var Y3=1e3,F1="{{",J3="}}",L1="ng-enter",Q0="ng-leave",_f="ng-trigger",Sf=".ng-trigger",E1="ng-animating",K0=".ng-animating";function qr(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Z0(parseFloat(t[1]),t[2])}function Z0(n,t){switch(t){case"s":return n*Y3;default:return n}}function Df(n,t,e){return n.hasOwnProperty("duration")?n:X3(n,t,e)}function X3(n,t,e){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,o=0,s="";if(typeof n=="string"){let a=n.match(r);if(a===null)return t.push(_1(n)),{duration:0,delay:0,easing:""};i=Z0(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=Z0(parseFloat(l),a[4]));let d=a[5];d&&(s=d)}else i=n;if(!e){let a=!1,l=t.length;i<0&&(t.push(g3()),a=!0),o<0&&(t.push(v3()),a=!0),a&&t.splice(l,0,_1(n))}return{duration:i,delay:o,easing:s}}function ej(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function dr(n,t,e){t.forEach((r,i)=>{let o=pv(i);e&&!e.has(i)&&e.set(i,n.style[o]),n.style[o]=r})}function vo(n,t){t.forEach((e,r)=>{let i=pv(r);n.style[i]=""})}function vl(n){return Array.isArray(n)?n.length==1?n[0]:v1(n):n}function tj(n,t,e){let r=t.params||{},i=V1(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||e.push(y3(o))})}var Y0=new RegExp(`${F1}\\s*(.+?)\\s*${J3}`,"g");function V1(n){let t=[];if(typeof n=="string"){let e;for(;e=Y0.exec(n);)t.push(e[1]);Y0.lastIndex=0}return t}function _l(n,t,e){let r=`${n}`,i=r.replace(Y0,(o,s)=>{let a=t[s];return a==null&&(e.push(_3(s)),a=""),a.toString()});return i==r?n:i}var nj=/-+([a-z0-9])/g;function pv(n){return n.replace(nj,(...t)=>t[1].toUpperCase())}function rj(n,t){return n===0||t===0}function ij(n,t,e){if(e.size&&t.length){let r=t[0],i=[];if(e.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<t.length;o++){let s=t[o];i.forEach(a=>s.set(a,hv(n,a)))}}return t}function gn(n,t,e){switch(t.type){case ne.Trigger:return n.visitTrigger(t,e);case ne.State:return n.visitState(t,e);case ne.Transition:return n.visitTransition(t,e);case ne.Sequence:return n.visitSequence(t,e);case ne.Group:return n.visitGroup(t,e);case ne.Animate:return n.visitAnimate(t,e);case ne.Keyframes:return n.visitKeyframes(t,e);case ne.Style:return n.visitStyle(t,e);case ne.Reference:return n.visitReference(t,e);case ne.AnimateChild:return n.visitAnimateChild(t,e);case ne.AnimateRef:return n.visitAnimateRef(t,e);case ne.Query:return n.visitQuery(t,e);case ne.Stagger:return n.visitStagger(t,e);default:throw b3(t.type)}}function hv(n,t){return window.getComputedStyle(n)[t]}var oj=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),xf=class extends _o{normalizePropertyName(t,e){return pv(t)}normalizeStyleValue(t,e,r,i){let o="",s=r.toString().trim();if(oj.has(e)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(w3(t,r))}return s+o}};var If="*";function sj(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>aj(r,e,t)):e.push(n),e}function aj(n,t,e){if(n[0]==":"){let l=lj(n,e);if(typeof l=="function"){t.push(l);return}n=l}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return e.push(P3(n)),t;let i=r[1],o=r[2],s=r[3];t.push(C1(i,s));let a=i==If&&s==If;o[0]=="<"&&!a&&t.push(C1(s,i))}function lj(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(O3(n)),"* => *"}}var bf=new Set(["true","1"]),wf=new Set(["false","0"]);function C1(n,t){let e=bf.has(n)||wf.has(n),r=bf.has(t)||wf.has(t);return(i,o)=>{let s=n==If||n==i,a=t==If||t==o;return!s&&e&&typeof i=="boolean"&&(s=i?bf.has(n):wf.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?bf.has(t):wf.has(t)),s&&a}}var j1=":self",cj=new RegExp(`s*${j1}s*,?`,"g");function U1(n,t,e,r){return new J0(n).build(t,e,r)}var S1="",J0=class{_driver;constructor(t){this._driver=t}build(t,e,r){let i=new X0(e);return this._resetContextStyleTimingState(i),gn(this,vl(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector=S1,t.collectedStyles=new Map,t.collectedStyles.set(S1,new Map),t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0,o=[],s=[];return t.name.charAt(0)=="@"&&e.errors.push(E3()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==ne.State){let l=a,d=l.name;d.toString().split(/\s*,\s*/).forEach(p=>{l.name=p,o.push(this.visitState(l,e))}),l.name=d}else if(a.type==ne.Transition){let l=this.visitTransition(a,e);r+=l.queryCount,i+=l.depCount,s.push(l)}else e.errors.push(C3())}),{type:ne.Trigger,name:t.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(t,e){let r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{V1(l).forEach(d=>{s.hasOwnProperty(d)||o.add(d)})})}),o.size&&e.errors.push(S3(t.name,[...o.values()]))}return{type:ne.State,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let r=gn(this,vl(t.animation),e),i=sj(t.expr,e.errors);return{type:ne.Transition,matchers:i,animation:r,queryCount:e.queryCount,depCount:e.depCount,options:go(t.options)}}visitSequence(t,e){return{type:ne.Sequence,steps:t.steps.map(r=>gn(this,r,e)),options:go(t.options)}}visitGroup(t,e){let r=e.currentTime,i=0,o=t.steps.map(s=>{e.currentTime=r;let a=gn(this,s,e);return i=Math.max(i,e.currentTime),a});return e.currentTime=i,{type:ne.Group,steps:o,options:go(t.options)}}visitAnimate(t,e){let r=pj(t.timings,e.errors);e.currentAnimateTimings=r;let i,o=t.styles?t.styles:Jt({});if(o.type==ne.Keyframes)i=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;let d={};r.easing&&(d.easing=r.easing),s=Jt(d)}e.currentTime+=r.duration+r.delay;let l=this.visitStyle(s,e);l.isEmptyStep=a,i=l}return e.currentAnimateTimings=null,{type:ne.Animate,timings:r,style:i,options:null}}visitStyle(t,e){let r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){let r=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of i)typeof a=="string"?a===lr?r.push(a):e.errors.push(D3(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(F1)>=0){o=!0;break}}}),{type:ne.Style,styles:r,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){let r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let d=e.collectedStyles.get(e.currentQuerySelector),p=d.get(l),h=!0;p&&(o!=i&&o>=p.startTime&&i<=p.endTime&&(e.errors.push(x3(l,p.startTime,p.endTime,o,i)),h=!1),o=p.startTime),h&&d.set(l,{startTime:o,endTime:i}),e.options&&tj(a,e.options,e.errors)})})}visitKeyframes(t,e){let r={type:ne.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(I3()),r;let i=1,o=0,s=[],a=!1,l=!1,d=0,p=t.steps.map(A=>{let L=this._makeStyleAst(A,e),V=L.offset!=null?L.offset:fj(L.styles),H=0;return V!=null&&(o++,H=L.offset=V),l=l||H<0||H>1,a=a||H<d,d=H,s.push(H),L});l&&e.errors.push(T3()),a&&e.errors.push(M3());let h=t.steps.length,y=0;o>0&&o<h?e.errors.push(A3()):o==0&&(y=i/(h-1));let g=h-1,b=e.currentTime,E=e.currentAnimateTimings,S=E.duration;return p.forEach((A,L)=>{let V=y>0?L==g?1:y*L:s[L],H=V*S;e.currentTime=b+E.delay+H,E.duration=H,this._validateStyleAst(A,e),A.offset=V,r.styles.push(A)}),r}visitReference(t,e){return{type:ne.Reference,animation:gn(this,vl(t.animation),e),options:go(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:ne.AnimateChild,options:go(t.options)}}visitAnimateRef(t,e){return{type:ne.AnimateRef,animation:this.visitReference(t.animation,e),options:go(t.options)}}visitQuery(t,e){let r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;let[o,s]=uj(t.selector);e.currentQuerySelector=r.length?r+" "+o:o,vn(e.collectedStyles,e.currentQuerySelector,new Map);let a=gn(this,vl(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:ne.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:go(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(k3());let r=t.timings==="full"?{duration:0,delay:0,easing:"full"}:Df(t.timings,e.errors,!0);return{type:ne.Stagger,animation:gn(this,vl(t.animation),e),timings:r,options:null}}};function uj(n){let t=!!n.split(/\s*,\s*/).find(e=>e==j1);return t&&(n=n.replace(cj,"")),n=n.replace(/@\*/g,Sf).replace(/@\w+/g,e=>Sf+"-"+e.slice(1)).replace(/:animating/g,K0),[n,t]}function dj(n){return n?N({},n):null}var X0=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function fj(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let r=e;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function pj(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=Df(n,t).duration;return H0(o,0,"")}let e=n;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=H0(0,0,"");return o.dynamic=!0,o.strValue=e,o}let i=Df(e,t);return H0(i.duration,i.delay,i.easing)}function go(n){return n?(n=N({},n),n.params&&(n.params=dj(n.params))):n={},n}function H0(n,t,e){return{duration:n,delay:t,easing:e}}function mv(n,t,e,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var bl=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},hj=1,mj=":enter",gj=new RegExp(mj,"g"),vj=":leave",yj=new RegExp(vj,"g");function B1(n,t,e,r,i,o=new Map,s=new Map,a,l,d=[]){return new ev().buildKeyframes(n,t,e,r,i,o,s,a,l,d)}var ev=class{buildKeyframes(t,e,r,i,o,s,a,l,d,p=[]){d=d||new bl;let h=new tv(t,e,d,i,o,p,[]);h.options=l;let y=l.delay?qr(l.delay):0;h.currentTimeline.delayNextStep(y),h.currentTimeline.setStyles([s],null,h.errors,l),gn(this,r,h);let g=h.timelines.filter(b=>b.containsAnimation());if(g.length&&a.size){let b;for(let E=g.length-1;E>=0;E--){let S=g[E];if(S.element===e){b=S;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([a],null,h.errors,l)}return g.length?g.map(b=>b.buildKeyframes()):[mv(e,[],[],[],0,y,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let r=e.subInstructions.get(e.element);if(r){let i=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){let r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,r),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,r){for(let i of t){let o=i?.delay;if(o){let s=typeof o=="number"?o:qr(_l(o,i?.params??{},e.errors));r.delayNextStep(s)}}}_visitSubInstructions(t,e,r){let o=e.currentTimeline.currentTime,s=r.duration!=null?qr(r.duration):null,a=r.delay!=null?qr(r.delay):null;return s!==0&&t.forEach(l=>{let d=e.appendInstructionToTimeline(l,s,a);o=Math.max(o,d.duration+d.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),gn(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==ne.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Tf);let s=qr(o.delay);i.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>gn(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?qr(t.options.delay):0;t.steps.forEach(s=>{let a=e.createSubContext(t.options);o&&a.delayNextStep(o),gn(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let r=t.strValue,i=e.params?_l(r,e.params,e.errors):r;return Df(i,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());let o=t.style;o.type==ne.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(r.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(o):r.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let r=e.currentAnimateTimings,i=e.currentTimeline.duration,o=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,t.styles.forEach(l=>{let d=l.offset||0;a.forwardTime(d*o),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(i+o),e.previousNode=t}visitQuery(t,e){let r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?qr(i.delay):0;o&&(e.previousNode.type===ne.Style||r==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Tf);let s=r,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((d,p)=>{e.currentQueryIndex=p;let h=e.createSubContext(t.options,d);o&&h.delayNextStep(o),d===e.element&&(l=h.currentTimeline),gn(this,t.animation,h),h.currentTimeline.applyStylesToKeyframe();let y=h.currentTimeline.currentTime;s=Math.max(s,y)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let r=e.parentContext,i=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1),l=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime;break}let p=e.currentTimeline;l&&p.delayNextStep(l);let h=p.currentTime;gn(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-h+(i.startTime-r.currentTimeline.startTime)}},Tf={},tv=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Tf;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,r,i,o,s,a,l){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new Mf(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let r=t,i=this.options;r.duration!=null&&(i.duration=qr(r.duration)),r.delay!=null&&(i.delay=qr(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=_l(o[a],s,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){let i=e||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=Tf,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){let i={duration:e??t.duration,delay:this.currentTimeline.currentTime+(r??0)+t.delay,easing:""},o=new nv(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,o,s){let a=[];if(i&&a.push(this.element),t.length>0){t=t.replace(gj,"."+this._enterClassName),t=t.replace(yj,"."+this._leaveClassName);let l=r!=1,d=this._driver.query(this.element,t,l);r!==0&&(d=r<0?d.slice(d.length+r,d.length):d.slice(0,r)),a.push(...d)}return!o&&a.length==0&&s.push(N3(e)),a}},Mf=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=hj,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||lr),this._currentKeyframe.set(e,lr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&this._previousKeyframe.set("easing",e);let o=i&&i.params||{},s=_j(t,this._globalTimelineStyles);for(let[a,l]of s){let d=_l(l,o,r);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??lr),this._updateStyle(a,d)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,r)=>{let i=this._styleSummary.get(r);(!i||e.time>i.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,l)=>{let d=new Map([...this._backFill,...a]);d.forEach((p,h)=>{p===pf?t.add(h):p===lr&&e.add(h)}),r||d.set("offset",l/this.duration),i.push(d)});let o=[...t.values()],s=[...e.values()];if(r){let a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return mv(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},nv=class extends Mf{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,r,i,o,s,a=!1){super(t,e,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],s=r+e,a=e/s,l=new Map(t[0]);l.set("offset",0),o.push(l);let d=new Map(t[0]);d.set("offset",D1(a)),o.push(d);let p=t.length-1;for(let h=1;h<=p;h++){let y=new Map(t[h]),g=y.get("offset"),b=e+g*r;y.set("offset",D1(b/s)),o.push(y)}r=s,e=0,i="",t=o}return mv(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}};function D1(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function _j(n,t){let e=new Map,r;return n.forEach(i=>{if(i==="*"){r??=t.keys();for(let o of r)e.set(o,lr)}else for(let[o,s]of i)e.set(o,s)}),e}function x1(n,t,e,r,i,o,s,a,l,d,p,h,y){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:d,postStyleProps:p,totalTime:h,errors:y}}var z0={},Af=class{_triggerName;ast;_stateStyles;constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return bj(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){let i=this._stateStyles.get("*");return t!==void 0&&(i=this._stateStyles.get(t?.toString())||i),i?i.buildStyles(e,r):new Map}build(t,e,r,i,o,s,a,l,d,p){let h=[],y=this.ast.options&&this.ast.options.params||z0,g=a&&a.params||z0,b=this.buildStyles(r,g,h),E=l&&l.params||z0,S=this.buildStyles(i,E,h),A=new Set,L=new Map,V=new Map,H=i==="void",W={params:$1(E,y),delay:this.ast.options?.delay},Ee=p?[]:B1(t,e,this.ast.animation,o,s,b,S,W,d,h),Se=0;return Ee.forEach(Be=>{Se=Math.max(Be.duration+Be.delay,Se)}),h.length?x1(e,this._triggerName,r,i,H,b,S,[],[],L,V,Se,h):(Ee.forEach(Be=>{let Rt=Be.element,bo=vn(L,Rt,new Set);Be.preStyleProps.forEach(wi=>bo.add(wi));let gv=vn(V,Rt,new Set);Be.postStyleProps.forEach(wi=>gv.add(wi)),Rt!==e&&A.add(Rt)}),x1(e,this._triggerName,r,i,H,b,S,Ee,[...A.values()],L,V,Se))}};function bj(n,t,e,r,i){return n.some(o=>o(t,e,r,i))}function $1(n,t){let e=N({},t);return Object.entries(n).forEach(([r,i])=>{i!=null&&(e[r]=i)}),e}var rv=class{styles;defaultParams;normalizer;constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){let r=new Map,i=$1(t,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=_l(s,i,e));let l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),r.set(a,s)})}),r}};function wj(n,t,e){return new iv(n,t,e)}var iv=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,e.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new rv(i.style,o,r))}),I1(this.states,"true","1"),I1(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new Af(t,i,this.states))}),this.fallbackTransition=Ej(t,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(s=>s.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}};function Ej(n,t,e){let r=[(s,a)=>!0],i={type:ne.Sequence,steps:[],options:null},o={type:ne.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new Af(n,o,t)}function I1(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var Cj=new bl,ov=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r}register(t,e){let r=[],i=[],o=U1(this._driver,e,r,i);if(r.length)throw L3(r);this._animations.set(t,o)}_buildPlayer(t,e,r){let i=t.element,o=P1(this._normalizer,t.keyframes,e,r);return this._driver.animate(i,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){let i=[],o=this._animations.get(t),s,a=new Map;if(o?(s=B1(this._driver,e,o,L1,Q0,new Map,new Map,r,Cj,i),s.forEach(p=>{let h=vn(a,p.element,new Map);p.postStyleProps.forEach(y=>h.set(y,null))})):(i.push(V3()),s=[]),i.length)throw j3(i);a.forEach((p,h)=>{p.forEach((y,g)=>{p.set(g,this._driver.computeStyle(h,g,lr))})});let l=s.map(p=>{let h=a.get(p.element);return this._buildPlayer(p,new Map,h)}),d=bi(l);return this._playersById.set(t,d),d.onDestroy(()=>this.destroy(t)),this.players.push(d),d}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw U3(t);return e}listen(t,e,r,i){let o=uv(e,"","","");return cv(this._getPlayer(t),r,o,i),()=>{}}command(t,e,r,i){if(r=="register"){this.register(t,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(t,e,s);return}let o=this._getPlayer(t);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t);break}}},T1="ng-animate-queued",Sj=".ng-animate-queued",q0="ng-animate-disabled",Dj=".ng-animate-disabled",xj="ng-star-inserted",Ij=".ng-star-inserted",Tj=[],H1={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Mj={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zn="__ng_removed",wl=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let r=t&&t.hasOwnProperty("value"),i=r?t.value:t;if(this.value=kj(i),r){let o=t,{value:s}=o,a=wo(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let r=this.options.params;Object.keys(e).forEach(i=>{r[i]==null&&(r[i]=e[i])})}}},yl="void",G0=new wl(yl),sv=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this._hostClassName="ng-tns-"+t,Tn(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.has(e))throw B3(r,e);if(r==null||r.length==0)throw $3(e);if(!Nj(r))throw H3(r,e);let o=vn(this._elementListeners,t,[]),s={name:e,phase:r,callback:i};o.push(s);let a=vn(this._engine.statesByElement,t,new Map);return a.has(e)||(Tn(t,_f),Tn(t,_f+"-"+e),a.set(e,G0)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw z3(t);return e}trigger(t,e,r,i=!0){let o=this._getTrigger(e),s=new El(this.id,e,t),a=this._engine.statesByElement.get(t);a||(Tn(t,_f),Tn(t,_f+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e),d=new wl(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&d.absorbOptions(l.options),a.set(e,d),l||(l=G0),!(d.value===yl)&&l.value===d.value){if(!Rj(l.params,d.params)){let E=[],S=o.matchStyles(l.value,l.params,E),A=o.matchStyles(d.value,d.params,E);E.length?this._engine.reportError(E):this._engine.afterFlush(()=>{vo(t,S),dr(t,A)})}return}let y=vn(this._engine.playersByElement,t,[]);y.forEach(E=>{E.namespaceId==this.id&&E.triggerName==e&&E.queued&&E.destroy()});let g=o.matchTransition(l.value,d.value,t,d.params),b=!1;if(!g){if(!i)return;g=o.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:g,fromState:l,toState:d,player:s,isFallbackTransition:b}),b||(Tn(t,T1),s.onStart(()=>{Os(t,T1)})),s.onDone(()=>{let E=this.players.indexOf(s);E>=0&&this.players.splice(E,1);let S=this._engine.playersByElement.get(t);if(S){let A=S.indexOf(s);A>=0&&S.splice(A,1)}}),this.players.push(s),y.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let r=this._engine.driver.query(t,Sf,!0);r.forEach(i=>{if(i[zn])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){let o=this._engine.statesByElement.get(t),s=new Map;if(o){let a=[];if(o.forEach((l,d)=>{if(s.set(d,l.value),this._triggers.has(d)){let p=this.trigger(t,d,yl,i);p&&a.push(p)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),r&&bi(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){let i=new Set;e.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let l=this._triggers.get(s).fallbackTransition,d=r.get(s)||G0,p=new wl(yl),h=new El(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:d,toState:p,player:h,isFallbackTransition:!0})})}}removeNode(t,e){let r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else{let s=t;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{let o=t[zn];(!o||o===H1)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){Tn(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let l=uv(o,r.triggerName,r.fromState.value,r.toState.value);l._data=t,cv(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},av=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){let r=new sv(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let l=i.get(a);if(l){let d=r.indexOf(l);r.splice(d+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(t);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,r=this.statesByElement.get(t);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&e.add(o)}}return e}trigger(t,e,r,i){if(Ef(e)){let o=this._fetchNamespace(t);if(o)return o.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!Ef(e))return;let o=e[zn];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){let s=this._fetchNamespace(t);s&&s.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Tn(t,q0)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Os(t,q0))}removeNode(t,e,r){if(Ef(e)){let i=t?this._fetchNamespace(t):null;i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r);let o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,r,i,o){this.collectedLeaveElements.push(e),e[zn]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,r,i,o){return Ef(e)?this._fetchNamespace(t).listen(e,r,i,o):()=>{}}_buildInstruction(t,e,r,i,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,Sf,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,K0,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return bi(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[zn];if(e&&e.setForRemoval){if(t[zn]=H1,e.namespaceId){this.destroyInnerAnimations(t);let r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(q0)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Dj,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Tn(i,xj)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],e.length?bi(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw q3(t)}_flushAnimations(t,e){let r=new bl,i=[],o=new Map,s=[],a=new Map,l=new Map,d=new Map,p=new Set;this.disabledNodes.forEach(B=>{p.add(B);let G=this.driver.query(B,Sj,!0);for(let J=0;J<G.length;J++)p.add(G[J])});let h=this.bodyNode,y=Array.from(this.statesByElement.keys()),g=k1(y,this.collectedEnterElements),b=new Map,E=0;g.forEach((B,G)=>{let J=L1+E++;b.set(G,J),B.forEach(ye=>Tn(ye,J))});let S=[],A=new Set,L=new Set;for(let B=0;B<this.collectedLeaveElements.length;B++){let G=this.collectedLeaveElements[B],J=G[zn];J&&J.setForRemoval&&(S.push(G),A.add(G),J.hasAnimation?this.driver.query(G,Ij,!0).forEach(ye=>A.add(ye)):L.add(G))}let V=new Map,H=k1(y,Array.from(A));H.forEach((B,G)=>{let J=Q0+E++;V.set(G,J),B.forEach(ye=>Tn(ye,J))}),t.push(()=>{g.forEach((B,G)=>{let J=b.get(G);B.forEach(ye=>Os(ye,J))}),H.forEach((B,G)=>{let J=V.get(G);B.forEach(ye=>Os(ye,J))}),S.forEach(B=>{this.processLeaveNode(B)})});let W=[],Ee=[];for(let B=this._namespaceList.length-1;B>=0;B--)this._namespaceList[B].drainQueuedTransitions(e).forEach(J=>{let ye=J.player,at=J.element;if(W.push(ye),this.collectedEnterElements.length){let _t=at[zn];if(_t&&_t.setForMove){if(_t.previousTriggersValues&&_t.previousTriggersValues.has(J.triggerName)){let Ei=_t.previousTriggersValues.get(J.triggerName),yn=this.statesByElement.get(J.element);if(yn&&yn.has(J.triggerName)){let Cl=yn.get(J.triggerName);Cl.value=Ei,yn.set(J.triggerName,Cl)}}ye.destroy();return}}let qn=!h||!this.driver.containsElement(h,at),Xt=V.get(at),Gr=b.get(at),$e=this._buildInstruction(J,r,Gr,Xt,qn);if($e.errors&&$e.errors.length){Ee.push($e);return}if(qn){ye.onStart(()=>vo(at,$e.fromStyles)),ye.onDestroy(()=>dr(at,$e.toStyles)),i.push(ye);return}if(J.isFallbackTransition){ye.onStart(()=>vo(at,$e.fromStyles)),ye.onDestroy(()=>dr(at,$e.toStyles)),i.push(ye);return}let _v=[];$e.timelines.forEach(_t=>{_t.stretchStartingKeyframe=!0,this.disabledNodes.has(_t.element)||_v.push(_t)}),$e.timelines=_v,r.append(at,$e.timelines);let K1={instruction:$e,player:ye,element:at};s.push(K1),$e.queriedElements.forEach(_t=>vn(a,_t,[]).push(ye)),$e.preStyleProps.forEach((_t,Ei)=>{if(_t.size){let yn=l.get(Ei);yn||l.set(Ei,yn=new Set),_t.forEach((Cl,Lf)=>yn.add(Lf))}}),$e.postStyleProps.forEach((_t,Ei)=>{let yn=d.get(Ei);yn||d.set(Ei,yn=new Set),_t.forEach((Cl,Lf)=>yn.add(Lf))})});if(Ee.length){let B=[];Ee.forEach(G=>{B.push(G3(G.triggerName,G.errors))}),W.forEach(G=>G.destroy()),this.reportError(B)}let Se=new Map,Be=new Map;s.forEach(B=>{let G=B.element;r.has(G)&&(Be.set(G,G),this._beforeAnimationBuild(B.player.namespaceId,B.instruction,Se))}),i.forEach(B=>{let G=B.element;this._getPreviousPlayers(G,!1,B.namespaceId,B.triggerName,null).forEach(ye=>{vn(Se,G,[]).push(ye),ye.destroy()})});let Rt=S.filter(B=>N1(B,l,d)),bo=new Map;A1(bo,this.driver,L,d,lr).forEach(B=>{N1(B,l,d)&&Rt.push(B)});let wi=new Map;g.forEach((B,G)=>{A1(wi,this.driver,new Set(B),l,pf)}),Rt.forEach(B=>{let G=bo.get(B),J=wi.get(B);bo.set(B,new Map([...G?.entries()??[],...J?.entries()??[]]))});let Ff=[],vv=[],yv={};s.forEach(B=>{let{element:G,player:J,instruction:ye}=B;if(r.has(G)){if(p.has(G)){J.onDestroy(()=>dr(G,ye.toStyles)),J.disabled=!0,J.overrideTotalTime(ye.totalTime),i.push(J);return}let at=yv;if(Be.size>1){let Xt=G,Gr=[];for(;Xt=Xt.parentNode;){let $e=Be.get(Xt);if($e){at=$e;break}Gr.push(Xt)}Gr.forEach($e=>Be.set($e,at))}let qn=this._buildAnimation(J.namespaceId,ye,Se,o,wi,bo);if(J.setRealPlayer(qn),at===yv)Ff.push(J);else{let Xt=this.playersByElement.get(at);Xt&&Xt.length&&(J.parentPlayer=bi(Xt)),i.push(J)}}else vo(G,ye.fromStyles),J.onDestroy(()=>dr(G,ye.toStyles)),vv.push(J),p.has(G)&&i.push(J)}),vv.forEach(B=>{let G=o.get(B.element);if(G&&G.length){let J=bi(G);B.setRealPlayer(J)}}),i.forEach(B=>{B.parentPlayer?B.syncPlayerEvents(B.parentPlayer):B.destroy()});for(let B=0;B<S.length;B++){let G=S[B],J=G[zn];if(Os(G,Q0),J&&J.hasAnimation)continue;let ye=[];if(a.size){let qn=a.get(G);qn&&qn.length&&ye.push(...qn);let Xt=this.driver.query(G,K0,!0);for(let Gr=0;Gr<Xt.length;Gr++){let $e=a.get(Xt[Gr]);$e&&$e.length&&ye.push(...$e)}}let at=ye.filter(qn=>!qn.destroyed);at.length?Pj(this,G,at):this.processLeaveNode(G)}return S.length=0,Ff.forEach(B=>{this.players.push(B),B.onDone(()=>{B.destroy();let G=this.players.indexOf(B);this.players.splice(G,1)}),B.play()}),Ff}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,o){let s=[];if(e){let a=this.playersByQueriedElement.get(t);a&&(s=a)}else{let a=this.playersByElement.get(t);if(a){let l=!o||o==yl;a.forEach(d=>{d.queued||!l&&d.triggerName!=i||s.push(d)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(t,e,r){let i=e.triggerName,o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:i;for(let l of e.timelines){let d=l.element,p=d!==o,h=vn(r,d,[]);this._getPreviousPlayers(d,p,s,a,e.toState).forEach(g=>{let b=g.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),g.destroy(),h.push(g)})}vo(o,e.fromStyles)}_buildAnimation(t,e,r,i,o,s){let a=e.triggerName,l=e.element,d=[],p=new Set,h=new Set,y=e.timelines.map(b=>{let E=b.element;p.add(E);let S=E[zn];if(S&&S.removedBeforeQueried)return new yi(b.duration,b.delay);let A=E!==l,L=Oj((r.get(E)||Tj).map(Se=>Se.getRealPlayer())).filter(Se=>{let Be=Se;return Be.element?Be.element===E:!1}),V=o.get(E),H=s.get(E),W=P1(this._normalizer,b.keyframes,V,H),Ee=this._buildPlayer(b,W,L);if(b.subTimeline&&i&&h.add(E),A){let Se=new El(t,a,E);Se.setRealPlayer(Ee),d.push(Se)}return Ee});d.forEach(b=>{vn(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>Aj(this.playersByQueriedElement,b.element,b))}),p.forEach(b=>Tn(b,E1));let g=bi(y);return g.onDestroy(()=>{p.forEach(b=>Os(b,E1)),dr(l,e.toStyles)}),h.forEach(b=>{vn(i,b,[]).push(g)}),g}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new yi(t.duration,t.delay)}},El=class{namespaceId;triggerName;element;_player=new yi;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,r)=>{e.forEach(i=>cv(t,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){vn(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function Aj(n,t,e){let r=n.get(t);if(r){if(r.length){let i=r.indexOf(e);r.splice(i,1)}r.length==0&&n.delete(t)}return r}function kj(n){return n??null}function Ef(n){return n&&n.nodeType===1}function Nj(n){return n=="start"||n=="done"}function M1(n,t){let e=n.style.display;return n.style.display=t??"none",e}function A1(n,t,e,r,i){let o=[];e.forEach(l=>o.push(M1(l)));let s=[];r.forEach((l,d)=>{let p=new Map;l.forEach(h=>{let y=t.computeStyle(d,h,i);p.set(h,y),(!y||y.length==0)&&(d[zn]=Mj,s.push(d))}),n.set(d,p)});let a=0;return e.forEach(l=>M1(l,o[a++])),s}function k1(n,t){let e=new Map;if(n.forEach(a=>e.set(a,[])),t.length==0)return e;let r=1,i=new Set(t),o=new Map;function s(a){if(!a)return r;let l=o.get(a);if(l)return l;let d=a.parentNode;return e.has(d)?l=d:i.has(d)?l=r:l=s(d),o.set(a,l),l}return t.forEach(a=>{let l=s(a);l!==r&&e.get(l).push(a)}),e}function Tn(n,t){n.classList?.add(t)}function Os(n,t){n.classList?.remove(t)}function Pj(n,t,e){bi(e).onDone(()=>n.processLeaveNode(t))}function Oj(n){let t=[];return z1(n,t),t}function z1(n,t){for(let e=0;e<n.length;e++){let r=n[e];r instanceof gl?z1(r.players,t):t.push(r)}}function Rj(n,t){let e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){let o=e[i];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}function N1(n,t,e){let r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(o=>i.add(o)):t.set(n,r),e.delete(n),!0}var Rs=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,r){this._driver=e,this._normalizer=r,this._transitionEngine=new av(t.body,e,r),this._timelineEngine=new ov(t.body,e,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(t,e,r,i,o){let s=t+"-"+i,a=this._triggerCache[s];if(!a){let l=[],d=[],p=U1(this._driver,o,l,d);if(l.length)throw R3(i,l);a=wj(i,p,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,i,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r){this._transitionEngine.removeNode(t,e,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if(r.charAt(0)=="@"){let[o,s]=b1(r),a=i;this._timelineEngine.command(o,e,s,a)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,o){if(r.charAt(0)=="@"){let[s,a]=b1(r);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,r,i,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function Fj(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=W0(t[0]),t.length>1&&(r=W0(t[t.length-1]))):t instanceof Map&&(e=W0(t)),e||r?new Lj(n,e,r):null}var Lj=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&dr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(dr(this._element,this._initialStyles),this._endStyles&&(dr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(vo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(vo(this._element,this._endStyles),this._endStyles=null),dr(this._element,this._initialStyles),this._state=3)}}return n})();function W0(n){let t=null;return n.forEach((e,r)=>{Vj(r)&&(t=t||new Map,t.set(r,e))}),t}function Vj(n){return n==="display"||n==="position"}var kf=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(t,e,r){return t.animate(this._convertKeyframesToObject(e),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&t.set(i,this._finished?r:hv(this.element,i))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},Nf=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return O1(t,e)}getParentElement(t){return dv(t)}query(t,e,r){return R1(t,e,r)}computeStyle(t,e,r){return hv(t,e)}animate(t,e,r,i,o,s=[]){let a=i==0?"both":"forwards",l={duration:r,delay:i,fill:a};o&&(l.easing=o);let d=new Map,p=s.filter(g=>g instanceof kf);rj(r,i)&&p.forEach(g=>{g.currentSnapshot.forEach((b,E)=>d.set(E,b))});let h=ej(e).map(g=>new Map(g));h=ij(t,h,d);let y=Fj(t,h);return new kf(t,h,l,y)}};var Cf="@",q1="@.disabled",Pf=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,r,i){this.namespaceId=t,this.delegate=e,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){e.charAt(0)==Cf&&e==q1?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r,i){return this.delegate.listen(t,e,r,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},lv=class extends Pf{factory;constructor(t,e,r,i,o){super(e,r,i,o),this.factory=t,this.namespaceId=e}setProperty(t,e,r){e.charAt(0)==Cf?e.charAt(1)=="."&&e==q1?(r=r===void 0?!0:!!r,this.disableAnimations(t,r)):this.engine.process(this.namespaceId,t,e.slice(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r,i){if(e.charAt(0)==Cf){let o=jj(t),s=e.slice(1),a="";return s.charAt(0)!=Cf&&([s,a]=Uj(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let d=l._data||-1;this.factory.scheduleListenerCallback(d,r,l)})}return this.delegate.listen(t,e,r,i)}};function jj(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Uj(n){let t=n.indexOf("."),e=n.substring(0,t),r=n.slice(t+1);return[e,r]}var Of=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,r){this.delegate=t,this.engine=e,this._zone=r,e.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(t,e){let r="",i=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let d=this._rendererCache,p=d.get(i);if(!p){let h=()=>d.delete(i);p=new Pf(r,i,this.engine,h),d.set(i,p)}return p}let o=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,t);let a=d=>{Array.isArray(d)?d.forEach(a):this.engine.registerTrigger(o,s,t,d.name,d)};return e.data.animation.forEach(a),new lv(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,r){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([e,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var $j=(()=>{class n extends Rs{constructor(e,r,i){super(e,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(F(je),F(yo),F(_o))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})();function Hj(){return new xf}function zj(n,t,e){return new Of(n,t,e)}var G1=[{provide:_o,useFactory:Hj},{provide:Rs,useClass:$j},{provide:ii,useFactory:zj,deps:[Ru,Rs,De]}],qj=[{provide:yo,useFactory:()=>new Nf},{provide:iu,useValue:"BrowserAnimations"},...G1],dZ=[{provide:yo,useClass:fv},{provide:iu,useValue:"NoopAnimations"},...G1];function W1(){return Rn("NgEagerAnimations"),[...qj]}var Q1={providers:[jw(),vC(y1,yC()),CE(SE()),W1()]};function Gj(n,t){n&1&&(it(0),u(1,"div",2),_(2,"router-outlet"),c(),ot())}function Wj(n,t){if(n&1){let e=Q();u(0,"div",21)(1,"a",22),x("click",function(){I(e);let i=w(2);return i.navigateToUrl("/home"),T(i.onNavLinkClick())}),_(2,"i",23),f(3,"Dashboard"),c(),u(4,"a",22),x("click",function(){I(e);let i=w(2);return i.navigateToUrl("/emotions"),T(i.onNavLinkClick())}),_(5,"i",24),f(6,"Morning Check-In"),c(),u(7,"a",22),x("click",function(){I(e);let i=w(2);return i.navigateToUrl("/tradejournal"),T(i.onNavLinkClick())}),_(8,"i",25),f(9,"Trade Journal"),c(),u(10,"a",22),x("click",function(){I(e);let i=w(2);return i.navigateToUrl("/meditationhub"),T(i.onNavLinkClick())}),_(11,"i",26),f(12,"Meditation Hub"),c(),u(13,"a",22),x("click",function(){I(e);let i=w(2);return i.navigateToUrl("/analytics"),T(i.onNavLinkClick())}),_(14,"i",27),f(15,"Analytics"),c(),u(16,"a",22),x("click",function(){I(e);let i=w(2);return i.navigateToUrl("/tradeaccounts"),T(i.onNavLinkClick())}),_(17,"i",28),f(18,"Trade Accounts"),c()()}}function Qj(n,t){if(n&1&&(u(0,"div"),_(1,"img",34),c()),n&2){let e=w(3);m(),v("src",e.profile_image_blob_url,Ln)}}function Kj(n,t){n&1&&(u(0,"div"),_(1,"i",35),c())}function Zj(n,t){if(n&1){let e=Q();u(0,"div",29)(1,"div",30),x("click",function(){I(e);let i=w(2);return T(i.onNavLinkClick())}),C(2,Qj,2,1,"div",0)(3,Kj,2,0,"div",0),f(4," \xA0\xA0 "),u(5,"p",31),f(6),c()(),u(7,"button",32),x("click",function(){I(e);let i=w(2);return T(i.logOut())}),f(8,"Logout\xA0\xA0\xA0"),_(9,"i",33),c()()}if(n&2){let e=w(2);m(2),v("ngIf",e.profile_image_blob_url),m(),v("ngIf",!e.profile_image_blob_url),m(3),O("Welcome, ",e.user_firstname,"!")}}function Yj(n,t){if(n&1){let e=Q();u(0,"div",36),x("click",function(){I(e);let i=w(2);return T(i.closeSidebar())}),c()}}function Jj(n,t){if(n&1){let e=Q();u(0,"button",37),x("click",function(){I(e);let i=w(2);return T(i.navigateToUrl("/home"))}),_(1,"img",38),c()}}function Xj(n,t){if(n&1){let e=Q();it(0),u(1,"div",3)(2,"nav",4)(3,"div",5)(4,"div",6)(5,"button",7),x("click",function(){I(e);let i=w();return i.navigateToUrl("/home"),T(i.onNavLinkClick())}),u(6,"img",8),x("click",function(){I(e);let i=w();return i.navigateToUrl("/home"),T(i.onNavLinkClick())}),c()(),u(7,"button",9),x("click",function(){I(e);let i=w();return T(i.closeSidebar())}),c()(),C(8,Wj,19,0,"div",10),c(),C(9,Zj,10,3,"div",11),c(),C(10,Yj,1,0,"div",12),u(11,"div",13)(12,"nav",14)(13,"div",15)(14,"div",16)(15,"button",17),x("click",function(){I(e);let i=w();return T(i.toggleSidebar())}),_(16,"span",18),c(),C(17,Jj,2,0,"button",19),c()()(),u(18,"div",20),_(19,"router-outlet"),c()()(),ot()}if(n&2){let e=w();m(2),Pt("collapsed",e.sidebarCollapsed()),m(6),v("ngIf",e.loginStatus()),m(),v("ngIf",e.loginStatus()),m(),v("ngIf",e.isMobile()&&!e.sidebarCollapsed()),m(),Pt("expanded",e.sidebarCollapsed()),m(6),v("ngIf",e.sidebarCollapsed())}}var Rf=class n{constructor(t,e,r,i,o,s,a){this.cdr=t;this.supabaseService=e;this.supabaseAuthService=r;this.supabaseAccountService=i;this.router=o;this.route=s;this.platformId=a;this.loginStatus=jn(()=>e.loginStatus()),Xo(()=>{this.loginStatus()&&(this.route.queryParams.subscribe(l=>{let d=l.returnUrl;d?this.router.navigate([d]):(this.router.url==="/"||this.router.url==="/login")&&this.router.navigate(["/home"])}),this.loginStatus()&&!this.userProfileLoaded&&(this.userProfileLoaded=!0,this.loadUserProfile()))}),Kh(()=>{})}title="TR-prototype";profile_image_blob_url="";loginStatus;sidebarCollapsed=lt(!1);isMobile=lt(!1);user_firstname="";resizeObserver;userProfileLoaded=!1;async ngOnInit(){this.checkScreenSize(),Dn(this.platformId)&&(this.sidebarCollapsed.set(this.isMobile()),this.resizeObserver=new ResizeObserver(()=>{this.checkScreenSize(),this.cdr.detectChanges()}),this.resizeObserver.observe(document.body))}ngOnDestroy(){Dn(this.platformId)&&this.resizeObserver&&this.resizeObserver.disconnect()}async loadUserProfile(){let{data:t}=await this.supabaseAccountService.getProfile();t&&(this.user_firstname=t.firstname,t.profile_picture_url&&(this.profile_image_blob_url=await this.supabaseAccountService.getCachedProfilePictureBlobUrl(t.profile_picture_url)),this.cdr.markForCheck())}async logOut(){await this.supabaseAuthService.logout(),this.router.navigateByUrl("/")}toggleSidebar(){this.sidebarCollapsed.update(t=>!t),this.cdr.detectChanges()}navigateToUrl(t){this.router.navigateByUrl(t)}closeSidebar(){this.sidebarCollapsed.set(!0),this.cdr.detectChanges()}onNavLinkClick(){this.isMobile()&&this.closeSidebar()}checkScreenSize(){Dn(this.platformId)&&this.isMobile.set(window.innerWidth<768)}static \u0275fac=function(e){return new(e||n)(D(re),D(Ce),D(ar),D(Yt),D(gt),D(fn),D(Et))};static \u0275cmp=$({type:n,selectors:[["app-root"]],decls:4,vars:2,consts:[[4,"ngIf"],["align","center",1,"m-5"],[1,"container-fluid","p-0"],[1,"sidebar-container"],["id","sidebar",1,"d-flex","flex-column","h-100"],[1,"p-3","flex-grow-1"],[1,"mb-3","d-flex","align-items-center"],[1,"text-decoration-none","me-auto","btn","btn-link","p-0","me-3",3,"click"],["src","/tr_logo.svg",1,"img-fluid",2,"height","90px",3,"click"],["type","button",1,"btn-close","d-md-none",3,"click"],["class","nav flex-column",4,"ngIf"],["class","p-3 border-top mt-auto",4,"ngIf"],["class","sidebar-overlay",3,"click",4,"ngIf"],[1,"content"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid"],[1,"d-flex","align-items-center"],[1,"btn","me-2",3,"click"],[1,"navbar-toggler-icon"],["class","btn navbar-branding text-decoration-none me-auto",3,"click",4,"ngIf"],[1,"container-fluid","ps-3"],[1,"nav","flex-column"],[1,"nav-link",3,"click"],[1,"bi","bi-columns-gap","me-3"],[1,"bi","bi-brightness-high","me-3"],[1,"bi","bi-bookmark-check","me-3"],[1,"bi","bi-person-arms-up","me-3"],[1,"bi","bi-clipboard-data","me-3"],[1,"bi","bi-journals","me-3"],[1,"p-3","border-top","mt-auto"],["routerLink","/useraccount",1,"d-flex","align-items-center","mb-2",2,"cursor","pointer",3,"click"],[1,"text-black","mb-0"],[1,"btn","btn-outline-secondary","btn-tr","w-100",3,"click"],[1,"bi","bi-box-arrow-right"],["alt","Profile",1,"rounded-circle","me-2",2,"width","40px","height","40px","object-fit","cover",3,"src"],[1,"bi","bi-person-circle","text-black",2,"font-size","30px"],[1,"sidebar-overlay",3,"click"],[1,"btn","navbar-branding","text-decoration-none","me-auto",3,"click"],["src","/tr_logo.svg","width","50px",1,"img-fluid"]],template:function(e,r){e&1&&(C(0,Gj,3,0,"ng-container",0)(1,Xj,20,8,"ng-container",0),u(2,"footer",1),f(3,"\xA9 2025 Trading Rehab AI. All rights reserved."),c()),e&2&&(v("ngIf",!r.supabaseService.loginStatus()),m(),v("ngIf",r.supabaseService.loginStatus()))},dependencies:[q,ee,Lg,Ue],styles:[".sidebar-container[_ngcontent-%COMP%]{display:flex;position:relative}#sidebar[_ngcontent-%COMP%]{width:250px;position:fixed;top:0;left:0;height:100dvh;z-index:999;background:#634aff0d;-webkit-backdrop-filter:blur(50px);backdrop-filter:blur(50px);transition:all .3s;box-shadow:0 0 10px #0000001a}#sidebar.collapsed[_ngcontent-%COMP%]{margin-left:-250px}.content[_ngcontent-%COMP%]{width:calc(100% - 250px);margin-left:250px;transition:all .3s;min-height:100dvh;background-color:transparent}.content.expanded[_ngcontent-%COMP%]{width:100%;margin-left:0}@media (max-width: 768px){#sidebar[_ngcontent-%COMP%]{margin-left:-250px}#sidebar[_ngcontent-%COMP%]:not(.collapsed){margin-left:0}.content[_ngcontent-%COMP%]{width:100%;margin-left:0}}.nav-link[_ngcontent-%COMP%]{padding:15px 20px;color:#333;border-bottom:1px solid #ddd;cursor:pointer}.nav-link[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.navbar[_ngcontent-%COMP%]{padding:15px 10px}.sidebar-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100dvw;height:100dvh;z-index:998;display:block}"]})};PE(Rf,Q1).catch(n=>console.error(n));
