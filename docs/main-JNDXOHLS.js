import{b as B_,c as $_,f as wD,g as H_}from"./chunk-65CJINC2.js";import{a as N,b as B,c as co,e as Xn,g as yD,h as bD}from"./chunk-VOSPIT4N.js";var Eg=Xn(Cg=>{"use strict";Object.defineProperty(Cg,"__esModule",{value:!0});var wg=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Cg.default=wg});var Dg=Xn(Pa=>{"use strict";var tE=Pa&&Pa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Pa,"__esModule",{value:!0});var EO=tE((H_(),bD(wD))),SO=tE(Eg()),Sg=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=EO.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var s,a,l;let c=null,h=null,p=null,_=o.status,g=o.statusText;if(o.ok){if(this.method!=="HEAD"){let P=await o.text();P===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=P:h=JSON.parse(P))}let w=(s=this.headers.Prefer)===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),D=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");w&&D&&D.length>1&&(p=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,_=406,g="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{let w=await o.text();try{c=JSON.parse(w),Array.isArray(c)&&o.status===404&&(h=[],c=null,_=200,g="OK")}catch{o.status===404&&w===""?(_=204,g="No Content"):c={message:w}}if(c&&this.isMaybeSingle&&(!((l=c?.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,_=200,g="OK"),c&&this.shouldThrowOnError)throw new SO.default(c)}return{error:c,data:h,count:p,status:_,statusText:g}});return this.shouldThrowOnError||(i=i.catch(o=>{var s,a,l;return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:`${(a=o?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}};Pa.default=Sg});var Ig=Xn(Oa=>{"use strict";var DO=Oa&&Oa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Oa,"__esModule",{value:!0});var xO=DO(Dg()),xg=class extends xO.default{select(t){let e=!1,r=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){let s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:i=r}={}){let o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var a;let l=[t?"analyze":null,e?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${c}"; options=${l};`,s==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Oa.default=xg});var qu=Xn(Ra=>{"use strict";var IO=Ra&&Ra.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ra,"__esModule",{value:!0});var TO=IO(Ig()),Tg=class extends TO.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");let s=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};Ra.default=Tg});var Ag=Xn(La=>{"use strict";var MO=La&&La.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(La,"__esModule",{value:!0});var Fa=MO(qu()),Mg=class{constructor(t,{headers:e={},schema:r,fetch:i}){this.url=t,this.headers=e,this.schema=r,this.fetch=i}select(t,{head:e=!1,count:r}={}){let i=e?"HEAD":"GET",o=!1,s=(t??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",s),r&&(this.headers.Prefer=`count=${r}`),new Fa.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:r=!0}={}){let i="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),e&&o.push(`count=${e}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){let s=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(s.length>0){let a=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Fa.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){let s="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){let l=t.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(l.length>0){let c=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new Fa.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),e&&i.push(`count=${e}`),this.headers.Prefer=i.join(","),new Fa.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Fa.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};La.default=Mg});var nE=Xn(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.version=void 0;Wu.version="0.0.0-automated"});var rE=Xn(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.DEFAULT_HEADERS=void 0;var AO=nE();Gu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${AO.version}`}});var oE=Xn(Va=>{"use strict";var iE=Va&&Va.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Va,"__esModule",{value:!0});var kO=iE(Ag()),NO=iE(qu()),PO=rE(),kg=class n{constructor(t,{headers:e={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},PO.DEFAULT_HEADERS),e),this.schemaName=r,this.fetch=i}from(t){let e=new URL(`${this.url}/${t}`);return new kO.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:i=!1,count:o}={}){let s,a=new URL(`${this.url}/rpc/${t}`),l;r||i?(s=r?"HEAD":"GET",Object.entries(e).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{a.searchParams.append(h,p)})):(s="POST",l=e);let c=Object.assign({},this.headers);return o&&(c.Prefer=`count=${o}`),new NO.default({method:s,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Va.default=kg});var fE=Xn(ot=>{"use strict";var ts=ot&&ot.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ot,"__esModule",{value:!0});ot.PostgrestError=ot.PostgrestBuilder=ot.PostgrestTransformBuilder=ot.PostgrestFilterBuilder=ot.PostgrestQueryBuilder=ot.PostgrestClient=void 0;var sE=ts(oE());ot.PostgrestClient=sE.default;var aE=ts(Ag());ot.PostgrestQueryBuilder=aE.default;var lE=ts(qu());ot.PostgrestFilterBuilder=lE.default;var cE=ts(Ig());ot.PostgrestTransformBuilder=cE.default;var uE=ts(Dg());ot.PostgrestBuilder=uE.default;var dE=ts(Eg());ot.PostgrestError=dE.default;ot.default={PostgrestClient:sE.default,PostgrestQueryBuilder:aE.default,PostgrestFilterBuilder:lE.default,PostgrestTransformBuilder:cE.default,PostgrestBuilder:uE.default,PostgrestError:dE.default}});function q_(n,t){return Object.is(n,t)}var Ke=null,Ds=!1,Cf=1,Et=Symbol("SIGNAL");function _e(n){let t=Ke;return Ke=n,t}function W_(){return Ke}function CD(){return Ds}var di={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ml(n){if(Ds)throw new Error("");if(Ke===null)return;Ke.consumerOnSignalRead(n);let t=Ke.nextProducerIndex++;if(_l(Ke),t<Ke.producerNode.length&&Ke.producerNode[t]!==n&&xs(Ke)){let e=Ke.producerNode[t];gl(e,Ke.producerIndexOfThis[t])}Ke.producerNode[t]!==n&&(Ke.producerNode[t]=n,Ke.producerIndexOfThis[t]=xs(Ke)?J_(n,Ke,t):0),Ke.producerLastReadVersion[t]=n.version}function ED(){Cf++}function G_(n){if(!(xs(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Cf)){if(!n.producerMustRecompute(n)&&!Ts(n)){z_(n);return}n.producerRecomputeValue(n),z_(n)}}function Q_(n){if(n.liveConsumerNode===void 0)return;let t=Ds;Ds=!0;try{for(let e of n.liveConsumerNode)e.dirty||Z_(e)}finally{Ds=t}}function K_(){return Ke?.consumerAllowSignalWrites!==!1}function Z_(n){n.dirty=!0,Q_(n),n.consumerMarkedDirty?.(n)}function z_(n){n.dirty=!1,n.lastCleanEpoch=Cf}function uo(n){return n&&(n.nextProducerIndex=0),_e(n)}function Is(n,t){if(_e(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(xs(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)gl(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ts(n){_l(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],r=n.producerLastReadVersion[t];if(r!==e.version||(G_(e),r!==e.version))return!0}return!1}function fo(n){if(_l(n),xs(n))for(let t=0;t<n.producerNode.length;t++)gl(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function J_(n,t,e){if(Y_(n),n.liveConsumerNode.length===0&&X_(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=J_(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function gl(n,t){if(Y_(n),n.liveConsumerNode.length===1&&X_(n))for(let r=0;r<n.producerNode.length;r++)gl(n.producerNode[r],n.producerIndexOfThis[r]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[t],i=n.liveConsumerNode[t];_l(i),i.producerIndexOfThis[r]=t}}function xs(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function _l(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Y_(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function X_(n){return n.producerNode!==void 0}function ev(n){let t=Object.create(SD);t.computation=n;let e=()=>{if(G_(t),ml(t),t.value===pl)throw t.error;return t.value};return e[Et]=t,e}var yf=Symbol("UNSET"),bf=Symbol("COMPUTING"),pl=Symbol("ERRORED"),SD=B(N({},di),{value:yf,dirty:!0,error:null,equal:q_,kind:"computed",producerMustRecompute(n){return n.value===yf||n.value===bf},producerRecomputeValue(n){if(n.value===bf)throw new Error("Detected cycle in computations.");let t=n.value;n.value=bf;let e=uo(n),r,i=!1;try{r=n.computation(),_e(null),i=t!==yf&&t!==pl&&r!==pl&&n.equal(t,r)}catch(o){r=pl,n.error=o}finally{Is(n,e)}if(i){n.value=t;return}n.value=r,n.version++}});function DD(){throw new Error}var tv=DD;function nv(){tv()}function rv(n){tv=n}var xD=null;function iv(n){let t=Object.create(Ef);t.value=n;let e=()=>(ml(t),t.value);return e[Et]=t,e}function vl(n,t){K_()||nv(),n.equal(n.value,t)||(n.value=t,ID(n))}function ov(n,t){K_()||nv(),vl(n,t(n.value))}var Ef=B(N({},di),{equal:q_,value:void 0,kind:"signal"});function ID(n){n.version++,ED(),Q_(n),xD?.()}function sv(n,t,e){let r=Object.create(TD);e&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=t;let i=l=>{r.cleanupFn=l};function o(l){return l.fn===null&&l.schedule===null}function s(l){o(l)||(fo(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=wf)}let a=()=>{if(r.fn===null)return;if(CD())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Ts(r))return;r.hasRun=!0;let l=uo(r);try{r.cleanupFn(),r.cleanupFn=wf,r.fn(i)}finally{Is(r,l)}};return r.ref={notify:()=>Z_(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[Et]:r},r.ref}var wf=()=>{},TD=B(N({},di),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:wf});function re(n){return typeof n=="function"}function ho(n){let e=n(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var yl=ho(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function fi(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Oe=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){t=o instanceof yl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{av(o)}catch(s){t=t??[],s instanceof yl?t=[...t,...s.errors]:t.push(s)}}if(t)throw new yl(t)}}add(t){var e;if(t&&t!==this)if(this.closed)av(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&fi(e,t)}remove(t){let{_finalizers:e}=this;e&&fi(e,t),t instanceof n&&t._removeParent(this)}};Oe.EMPTY=(()=>{let n=new Oe;return n.closed=!0,n})();var Sf=Oe.EMPTY;function bl(n){return n instanceof Oe||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function av(n){re(n)?n():n.unsubscribe()}var gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var po={setTimeout(n,t,...e){let{delegate:r}=po;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=po;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function wl(n){po.setTimeout(()=>{let{onUnhandledError:t}=gn;if(t)t(n);else throw n})}function Ms(){}var lv=Df("C",void 0,void 0);function cv(n){return Df("E",void 0,n)}function uv(n){return Df("N",n,void 0)}function Df(n,t,e){return{kind:n,value:t,error:e}}var hi=null;function mo(n){if(gn.useDeprecatedSynchronousErrorHandling){let t=!hi;if(t&&(hi={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:r}=hi;if(hi=null,e)throw r}}else n()}function dv(n){gn.useDeprecatedSynchronousErrorHandling&&hi&&(hi.errorThrown=!0,hi.error=n)}var pi=class extends Oe{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,bl(t)&&t.add(this)):this.destination=kD}static create(t,e,r){return new er(t,e,r)}next(t){this.isStopped?If(uv(t),this):this._next(t)}error(t){this.isStopped?If(cv(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?If(lv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},MD=Function.prototype.bind;function xf(n,t){return MD.call(n,t)}var Tf=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){Cl(r)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){Cl(r)}else Cl(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Cl(e)}}},er=class extends pi{constructor(t,e,r){super();let i;if(re(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&gn.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&xf(t.next,o),error:t.error&&xf(t.error,o),complete:t.complete&&xf(t.complete,o)}):i=t}this.destination=new Tf(i)}};function Cl(n){gn.useDeprecatedSynchronousErrorHandling?dv(n):wl(n)}function AD(n){throw n}function If(n,t){let{onStoppedNotification:e}=gn;e&&po.setTimeout(()=>e(n,t))}var kD={closed:!0,next:Ms,error:AD,complete:Ms};var go=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ft(n){return n}function Mf(...n){return Af(n)}function Af(n){return n.length===0?Ft:n.length===1?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}var pe=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){let o=PD(e)?e:new er(e,r,i);return mo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=fv(r),new r((i,o)=>{let s=new er({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[go](){return this}pipe(...e){return Af(e)(this)}toPromise(e){return e=fv(e),new e((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function fv(n){var t;return(t=n??gn.Promise)!==null&&t!==void 0?t:Promise}function ND(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function PD(n){return n&&n instanceof pi||ND(n)&&bl(n)}function kf(n){return re(n?.lift)}function ce(n){return t=>{if(kf(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(n,t,e,r,i){return new Nf(n,t,e,r,i)}var Nf=class extends pi{constructor(t,e,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function _o(){return ce((n,t)=>{let e=null;n._refCount++;let r=ue(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let i=n._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}var vo=class extends pe{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,kf(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Oe;let e=this.getSubject();t.add(this.source.subscribe(ue(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Oe.EMPTY)}return t}refCount(){return _o()(this)}};var hv=ho(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Re=(()=>{class n extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new El(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new hv}next(e){mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Sf:(this.currentObservers=null,o.push(e),new Oe(()=>{this.currentObservers=null,fi(o,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){let e=new pe;return e.source=this,e}}return n.create=(t,e)=>new El(t,e),n})(),El=class extends Re{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,t)}error(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&r!==void 0?r:Sf}};var rt=class extends Re{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Pf={now(){return(Pf.delegate||Date).now()},delegate:void 0};var Sl=class extends Oe{constructor(t,e){super()}schedule(t,e=0){return this}};var As={setInterval(n,t,...e){let{delegate:r}=As;return r?.setInterval?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=As;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var Dl=class extends Sl{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,r=0){return As.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return e;e!=null&&As.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,e);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,fi(r,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var yo=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}};yo.now=Pf.now;var xl=class extends yo{constructor(t,e=yo.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}};var pv=new xl(Dl);var St=new pe(n=>n.complete());function mv(n){return n&&re(n.schedule)}function gv(n){return n[n.length-1]}function Il(n){return re(gv(n))?n.pop():void 0}function kr(n){return mv(gv(n))?n.pop():void 0}function vv(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(h){try{c(r.next(h))}catch(p){s(p)}}function l(h){try{c(r.throw(h))}catch(p){s(p)}}function c(h){h.done?o(h.value):i(h.value).then(a,l)}c((r=r.apply(n,t||[])).next())})}function _v(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function mi(n){return this instanceof mi?(this.v=n,this):new mi(n)}function yv(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(b){return Promise.resolve(b).then(g,p)}}function a(g,b){r[g]&&(i[g]=function(w){return new Promise(function(D,P){o.push([g,w,D,P])>1||l(g,w)})},b&&(i[g]=b(i[g])))}function l(g,b){try{c(r[g](b))}catch(w){_(o[0][3],w)}}function c(g){g.value instanceof mi?Promise.resolve(g.value.v).then(h,p):_(o[0][2],g)}function h(g){l("next",g)}function p(g){l("throw",g)}function _(g,b){g(b),o.shift(),o.length&&l(o[0][0],o[0][1])}}function bv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof _v=="function"?_v(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var Tl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ml(n){return re(n?.then)}function Al(n){return re(n[go])}function kl(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function Nl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function OD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Pl=OD();function Ol(n){return re(n?.[Pl])}function Rl(n){return yv(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:r,done:i}=yield mi(e.read());if(i)return yield mi(void 0);yield yield mi(r)}}finally{e.releaseLock()}})}function Fl(n){return re(n?.getReader)}function Ve(n){if(n instanceof pe)return n;if(n!=null){if(Al(n))return RD(n);if(Tl(n))return FD(n);if(Ml(n))return LD(n);if(kl(n))return wv(n);if(Ol(n))return VD(n);if(Fl(n))return jD(n)}throw Nl(n)}function RD(n){return new pe(t=>{let e=n[go]();if(re(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function FD(n){return new pe(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function LD(n){return new pe(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,wl)})}function VD(n){return new pe(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function wv(n){return new pe(t=>{UD(n,t).catch(e=>t.error(e))})}function jD(n){return wv(Rl(n))}function UD(n,t){var e,r,i,o;return vv(this,void 0,void 0,function*(){try{for(e=bv(n);r=yield e.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})}function Dt(n,t,e,r=0,i=!1){let o=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ll(n,t=0){return ce((e,r)=>{e.subscribe(ue(r,i=>Dt(r,n,()=>r.next(i),t),()=>Dt(r,n,()=>r.complete(),t),i=>Dt(r,n,()=>r.error(i),t)))})}function Vl(n,t=0){return ce((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function Cv(n,t){return Ve(n).pipe(Vl(t),Ll(t))}function Ev(n,t){return Ve(n).pipe(Vl(t),Ll(t))}function Sv(n,t){return new pe(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function Dv(n,t){return new pe(e=>{let r;return Dt(e,t,()=>{r=n[Pl](),Dt(e,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){e.error(s);return}o?e.complete():e.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function jl(n,t){if(!n)throw new Error("Iterable cannot be null");return new pe(e=>{Dt(e,t,()=>{let r=n[Symbol.asyncIterator]();Dt(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function xv(n,t){return jl(Rl(n),t)}function Iv(n,t){if(n!=null){if(Al(n))return Cv(n,t);if(Tl(n))return Sv(n,t);if(Ml(n))return Ev(n,t);if(kl(n))return jl(n,t);if(Ol(n))return Dv(n,t);if(Fl(n))return xv(n,t)}throw Nl(n)}function je(n,t){return t?Iv(n,t):Ve(n)}function W(...n){let t=kr(n);return je(n,t)}function Nr(n,t){let e=re(n)?n:()=>n,r=i=>i.error(e());return new pe(t?i=>t.schedule(r,0,i):r)}function Of(n){return!!n&&(n instanceof pe||re(n.lift)&&re(n.subscribe))}var tr=ho(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function G(n,t){return ce((e,r)=>{let i=0;e.subscribe(ue(r,o=>{r.next(n.call(t,o,i++))}))})}var{isArray:BD}=Array;function $D(n,t){return BD(t)?n(...t):n(t)}function Ul(n){return G(t=>$D(n,t))}var{isArray:HD}=Array,{getPrototypeOf:zD,prototype:qD,keys:WD}=Object;function Bl(n){if(n.length===1){let t=n[0];if(HD(t))return{args:t,keys:null};if(GD(t)){let e=WD(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}function GD(n){return n&&typeof n=="object"&&zD(n)===qD}function $l(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function bo(...n){let t=kr(n),e=Il(n),{args:r,keys:i}=Bl(n);if(r.length===0)return je([],t);let o=new pe(QD(r,t,i?s=>$l(i,s):Ft));return e?o.pipe(Ul(e)):o}function QD(n,t,e=Ft){return r=>{Tv(t,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)Tv(t,()=>{let c=je(n[l],t),h=!1;c.subscribe(ue(r,p=>{o[l]=p,h||(h=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Tv(n,t,e){n?Dt(e,n,t):t()}function Mv(n,t,e,r,i,o,s,a){let l=[],c=0,h=0,p=!1,_=()=>{p&&!l.length&&!c&&t.complete()},g=w=>c<r?b(w):l.push(w),b=w=>{o&&t.next(w),c++;let D=!1;Ve(e(w,h++)).subscribe(ue(t,P=>{i?.(P),o?g(P):t.next(P)},()=>{D=!0},void 0,()=>{if(D)try{for(c--;l.length&&c<r;){let P=l.shift();s?Dt(t,s,()=>b(P)):b(P)}_()}catch(P){t.error(P)}}))};return n.subscribe(ue(t,g,()=>{p=!0,_()})),()=>{a?.()}}function Ze(n,t,e=1/0){return re(t)?Ze((r,i)=>G((o,s)=>t(r,o,i,s))(Ve(n(r,i))),e):(typeof t=="number"&&(e=t),ce((r,i)=>Mv(r,i,n,e)))}function Rf(n=1/0){return Ze(Ft,n)}function Av(){return Rf(1)}function Pr(...n){return Av()(je(n,kr(n)))}function Hl(n){return new pe(t=>{Ve(n()).subscribe(t)})}function ks(...n){let t=Il(n),{args:e,keys:r}=Bl(n),i=new pe(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let h=0;h<s;h++){let p=!1;Ve(e[h]).subscribe(ue(o,_=>{p||(p=!0,c--),a[h]=_},()=>l--,void 0,()=>{(!l||!p)&&(c||o.next(r?$l(r,a):a),o.complete())}))}});return t?i.pipe(Ul(t)):i}function mt(n,t){return ce((e,r)=>{let i=0;e.subscribe(ue(r,o=>n.call(t,o,i++)&&r.next(o)))})}function Nn(n){return ce((t,e)=>{let r=null,i=!1,o;r=t.subscribe(ue(e,void 0,void 0,s=>{o=Ve(n(s,Nn(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function kv(n,t,e,r,i){return(o,s)=>{let a=e,l=t,c=0;o.subscribe(ue(s,h=>{let p=c++;l=a?n(l,h,p):(a=!0,h),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function Or(n,t){return re(t)?Ze(n,t,1):Ze(n,1)}function Ff(n,t=pv){return ce((e,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let c=o;o=null,r.next(c)}};function l(){let c=s+n,h=t.now();if(h<c){i=this.schedule(void 0,c-h),r.add(i);return}a()}e.subscribe(ue(r,c=>{o=c,s=t.now(),i||(i=t.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Rr(n){return ce((t,e)=>{let r=!1;t.subscribe(ue(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function Lt(n){return n<=0?()=>St:ce((t,e)=>{let r=0;t.subscribe(ue(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function zl(n=KD){return ce((t,e)=>{let r=!1;t.subscribe(ue(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function KD(){return new tr}function nr(n){return ce((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function rr(n,t){let e=arguments.length>=2;return r=>r.pipe(n?mt((i,o)=>n(i,o,r)):Ft,Lt(1),e?Rr(t):zl(()=>new tr))}function wo(n){return n<=0?()=>St:ce((t,e)=>{let r=[];t.subscribe(ue(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function Lf(n,t){let e=arguments.length>=2;return r=>r.pipe(n?mt((i,o)=>n(i,o,r)):Ft,wo(1),e?Rr(t):zl(()=>new tr))}function Vf(n,t){return ce(kv(n,t,arguments.length>=2,!0))}function Uf(n={}){let{connector:t=()=>new Re,resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,l,c=0,h=!1,p=!1,_=()=>{a?.unsubscribe(),a=void 0},g=()=>{_(),s=l=void 0,h=p=!1},b=()=>{let w=s;g(),w?.unsubscribe()};return ce((w,D)=>{c++,!p&&!h&&_();let P=l=l??t();D.add(()=>{c--,c===0&&!p&&!h&&(a=jf(b,i))}),P.subscribe(D),!s&&c>0&&(s=new er({next:F=>P.next(F),error:F=>{p=!0,_(),a=jf(g,e,F),P.error(F)},complete:()=>{h=!0,_(),a=jf(g,r),P.complete()}}),Ve(w).subscribe(s))})(o)}}function jf(n,t,...e){if(t===!0){n();return}if(t===!1)return;let r=new er({next:()=>{r.unsubscribe(),n()}});return Ve(t(...e)).subscribe(r)}function Bf(n){return mt((t,e)=>n<=e)}function Ns(...n){let t=kr(n);return ce((e,r)=>{(t?Pr(n,e,t):Pr(n,e)).subscribe(r)})}function Vt(n,t){return ce((e,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();e.subscribe(ue(r,l=>{i?.unsubscribe();let c=0,h=o++;Ve(n(l,h)).subscribe(i=ue(r,p=>r.next(t?t(l,p,h,c++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ps(n){return ce((t,e)=>{Ve(n).subscribe(ue(e,()=>e.complete(),Ms)),!e.closed&&t.subscribe(e)})}function Be(n,t,e){let r=re(n)||t||e?{next:n,error:t,complete:e}:n;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Ft}var vy="https://g.co/ng/security#xss",A=class extends Error{code;constructor(t,e){super(kc(t,e)),this.code=t}};function kc(n,t){return`${`NG0${Math.abs(n)}`}${t?": "+t:""}`}var yy=Symbol("InputSignalNode#UNSET"),ZD=B(N({},Ef),{transformFn:void 0,applyValueToInputSignal(n,t){vl(n,t)}});function by(n,t){let e=Object.create(ZD);e.value=n,e.transformFn=t?.transform;function r(){if(ml(e),e.value===yy)throw new A(-950,!1);return e.value}return r[Et]=e,r}function Qs(n){return{toString:n}.toString()}var ql="__parameters__";function JD(n){return function(...e){if(n){let r=n(...e);for(let i in r)this[i]=r[i]}}}function wy(n,t,e){return Qs(()=>{let r=JD(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,c,h){let p=l.hasOwnProperty(ql)?l[ql]:Object.defineProperty(l,ql,{value:[]})[ql];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),l}}return e&&(i.prototype=Object.create(e.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var ir=globalThis;function xe(n){for(let t in n)if(n[t]===xe)return t;throw Error("Could not find renamed property on target object.")}function YD(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function _t(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(_t).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let t=n.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function eh(n,t){return n==null||n===""?t===null?"":t:t==null||t===""?n:n+" "+t}var XD=xe({__forward_ref__:xe});function on(n){return n.__forward_ref__=on,n.toString=function(){return _t(this())},n}function gt(n){return Cy(n)?n():n}function Cy(n){return typeof n=="function"&&n.hasOwnProperty(XD)&&n.__forward_ref__===on}function k(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Je(n){return{providers:n.providers||[],imports:n.imports||[]}}function Nc(n){return Nv(n,Sy)||Nv(n,Dy)}function Ey(n){return Nc(n)!==null}function Nv(n,t){return n.hasOwnProperty(t)?n[t]:null}function ex(n){let t=n&&(n[Sy]||n[Dy]);return t||null}function Pv(n){return n&&(n.hasOwnProperty(Ov)||n.hasOwnProperty(tx))?n[Ov]:null}var Sy=xe({\u0275prov:xe}),Ov=xe({\u0275inj:xe}),Dy=xe({ngInjectableDef:xe}),tx=xe({ngInjectorDef:xe}),V=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=k({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function xy(n){return n&&!!n.\u0275providers}var nx=xe({\u0275cmp:xe}),rx=xe({\u0275dir:xe}),ix=xe({\u0275pipe:xe}),ox=xe({\u0275mod:xe}),ic=xe({\u0275fac:xe}),Ls=xe({__NG_ELEMENT_ID__:xe}),Rv=xe({__NG_ENV_ID__:xe});function Io(n){return typeof n=="string"?n:n==null?"":String(n)}function sx(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Io(n)}function ax(n,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new A(-200,n)}function sp(n,t){throw new A(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),th;function Iy(){return th}function xt(n){let t=th;return th=n,t}function Ty(n,t,e){let r=Nc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&ae.Optional)return null;if(t!==void 0)return t;sp(n,"Injector")}var lx={},Vs=lx,nh="__NG_DI_FLAG__",oc="ngTempTokenPath",cx="ngTokenPath",ux=/\n/gm,dx="\u0275",Fv="__source",Do;function fx(){return Do}function Fr(n){let t=Do;return Do=n,t}function hx(n,t=ae.Default){if(Do===void 0)throw new A(-203,!1);return Do===null?Ty(n,void 0,t):Do.get(n,t&ae.Optional?null:void 0,t)}function O(n,t=ae.Default){return(Iy()||hx)(gt(n),t)}function I(n,t=ae.Default){return O(n,Pc(t))}function Pc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function rh(n){let t=[];for(let e=0;e<n.length;e++){let r=gt(n[e]);if(Array.isArray(r)){if(r.length===0)throw new A(900,!1);let i,o=ae.Default;for(let s=0;s<r.length;s++){let a=r[s],l=px(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}t.push(O(i,o))}else t.push(O(r))}return t}function My(n,t){return n[nh]=t,n.prototype[nh]=t,n}function px(n){return n[nh]}function mx(n,t,e,r){let i=n[oc];throw t[Fv]&&i.unshift(t[Fv]),n.message=gx(`
`+n.message,i,e,r),n[cx]=i,n[oc]=null,n}function gx(n,t,e,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==dx?n.slice(2):n;let i=_t(t);if(Array.isArray(t))i=t.map(_t).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):_t(a)))}i=`{${o.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${n.replace(ux,`
  `)}`}var Oc=My(wy("Optional"),8);var ap=My(wy("SkipSelf"),4);function vi(n,t){let e=n.hasOwnProperty(ic);return e?n[ic]:null}function _x(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}function vx(n){return n.flat(Number.POSITIVE_INFINITY)}function lp(n,t){n.forEach(e=>Array.isArray(e)?lp(e,t):t(e))}function Ay(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function sc(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function yx(n,t){let e=[];for(let r=0;r<n;r++)e.push(t);return e}function bx(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(i===1)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;){let o=i-2;n[i]=n[o],i--}n[t]=e,n[t+1]=r}}function cp(n,t,e){let r=Ks(n,t);return r>=0?n[r|1]=e:(r=~r,bx(n,r,t,e)),r}function $f(n,t){let e=Ks(n,t);if(e>=0)return n[e|1]}function Ks(n,t){return wx(n,t,1)}function wx(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}var To={},It=[],Mo=new V(""),ky=new V("",-1),Ny=new V(""),ac=class{get(t,e=Vs){if(e===Vs){let r=new Error(`NullInjectorError: No provider for ${_t(t)}!`);throw r.name="NullInjectorError",r}return e}};function Py(n,t){let e=n[ox]||null;if(!e&&t===!0)throw new Error(`Type ${_t(n)} does not have '\u0275mod' property.`);return e}function yi(n){return n[nx]||null}function Oy(n){return n[rx]||null}function Ry(n){return n[ix]||null}function Fy(n){let t=yi(n)||Oy(n)||Ry(n);return t!==null&&t.standalone}function Fo(n){return{\u0275providers:n}}function Cx(...n){return{\u0275providers:Ly(!0,n),\u0275fromNgModule:!0}}function Ly(n,...t){let e=[],r=new Set,i,o=s=>{e.push(s)};return lp(t,s=>{let a=s;ih(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Vy(i,o),e}function Vy(n,t){for(let e=0;e<n.length;e++){let{ngModule:r,providers:i}=n[e];up(i,o=>{t(o,r)})}}function ih(n,t,e,r){if(n=gt(n),!n)return!1;let i=null,o=Pv(n),s=!o&&yi(n);if(!o&&!s){let l=n.ngModule;if(o=Pv(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)ih(c,t,e,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{lp(o.imports,h=>{ih(h,t,e,r)&&(c||=[],c.push(h))})}finally{}c!==void 0&&Vy(c,t)}if(!a){let c=vi(i)||(()=>new i);t({provide:i,useFactory:c,deps:It},i),t({provide:Ny,useValue:i,multi:!0},i),t({provide:Mo,useValue:()=>O(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=n;up(l,h=>{t(h,c)})}}else return!1;return i!==n&&n.providers!==void 0}function up(n,t){for(let e of n)xy(e)&&(e=e.\u0275providers),Array.isArray(e)?up(e,t):t(e)}var Ex=xe({provide:String,useValue:xe});function jy(n){return n!==null&&typeof n=="object"&&Ex in n}function Sx(n){return!!(n&&n.useExisting)}function Dx(n){return!!(n&&n.useFactory)}function Ao(n){return typeof n=="function"}function xx(n){return!!n.useClass}var Rc=new V(""),Jl={},Ix={},Hf;function dp(){return Hf===void 0&&(Hf=new ac),Hf}var Tt=class{},js=class extends Tt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,sh(t,s=>this.processProvider(s)),this.records.set(ky,Co(void 0,this)),i.has("environment")&&this.records.set(Tt,Co(void 0,this));let o=this.records.get(Rc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ny,It,ae.Self))}destroy(){Rs(this),this._destroyed=!0;let t=_e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(t)}}onDestroy(t){return Rs(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Rs(this);let e=Fr(this),r=xt(void 0),i;try{return t()}finally{Fr(e),xt(r)}}get(t,e=Vs,r=ae.Default){if(Rs(this),t.hasOwnProperty(Rv))return t[Rv](this);r=Pc(r);let i,o=Fr(this),s=xt(void 0);try{if(!(r&ae.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=Nx(t)&&Nc(t);c&&this.injectableDefInScope(c)?l=Co(oh(t),Jl):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=r&ae.Self?dp():this.parent;return e=r&ae.Optional&&e===Vs?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[oc]=a[oc]||[]).unshift(_t(t)),o)throw a;return mx(a,t,"R3InjectorError",this.source)}else throw a}finally{xt(s),Fr(o)}}resolveInjectorInitializers(){let t=_e(null),e=Fr(this),r=xt(void 0),i;try{let o=this.get(Mo,It,ae.Self);for(let s of o)s()}finally{Fr(e),xt(r),_e(t)}}toString(){let t=[],e=this.records;for(let r of e.keys())t.push(_t(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=gt(t);let e=Ao(t)?t:gt(t&&t.provide),r=Mx(t);if(!Ao(t)&&t.multi===!0){let i=this.records.get(e);i||(i=Co(void 0,Jl,!0),i.factory=()=>rh(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e){let r=_e(null);try{return e.value===Jl&&(e.value=Ix,e.value=e.factory()),typeof e.value=="object"&&e.value&&kx(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{_e(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=gt(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function oh(n){let t=Nc(n),e=t!==null?t.factory:vi(n);if(e!==null)return e;if(n instanceof V)throw new A(204,!1);if(n instanceof Function)return Tx(n);throw new A(204,!1)}function Tx(n){if(n.length>0)throw new A(204,!1);let e=ex(n);return e!==null?()=>e.factory(n):()=>new n}function Mx(n){if(jy(n))return Co(void 0,n.useValue);{let t=Uy(n);return Co(t,Jl)}}function Uy(n,t,e){let r;if(Ao(n)){let i=gt(n);return vi(i)||oh(i)}else if(jy(n))r=()=>gt(n.useValue);else if(Dx(n))r=()=>n.useFactory(...rh(n.deps||[]));else if(Sx(n))r=()=>O(gt(n.useExisting));else{let i=gt(n&&(n.useClass||n.provide));if(Ax(n))r=()=>new i(...rh(n.deps));else return vi(i)||oh(i)}return r}function Rs(n){if(n.destroyed)throw new A(205,!1)}function Co(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function Ax(n){return!!n.deps}function kx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Nx(n){return typeof n=="function"||typeof n=="object"&&n instanceof V}function sh(n,t){for(let e of n)Array.isArray(e)?sh(e,t):e&&xy(e)?sh(e.\u0275providers,t):t(e)}function $t(n,t){n instanceof js&&Rs(n);let e,r=Fr(n),i=xt(void 0);try{return t()}finally{Fr(r),xt(i)}}function By(){return Iy()!==void 0||fx()!=null}function $y(n){if(!By())throw new A(-203,!1)}function Px(n){return typeof n=="function"}var dr=0,de=1,te=2,ct=3,yn=4,Mt=5,Us=6,lc=7,nn=8,Bs=9,or=10,$e=11,$s=12,Lv=13,Lo=14,rn=15,bi=16,Eo=17,sr=18,Fc=19,Hy=20,Lr=21,Yl=22,wi=23,jt=24,ut=25,zy=1;var Ci=7,cc=8,ko=9,Ut=10;function Vr(n){return Array.isArray(n)&&typeof n[zy]=="object"}function fr(n){return Array.isArray(n)&&n[zy]===!0}function fp(n){return(n.flags&4)!==0}function Mi(n){return n.componentOffset>-1}function Lc(n){return(n.flags&1)===1}function ar(n){return!!n.template}function uc(n){return(n[te]&512)!==0}function Zs(n){return(n[te]&256)===256}var ah=class{previousValue;currentValue;firstChange;constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function qy(n,t,e,r){t!==null?t.applyValueToInputSignal(t,r):n[e]=r}var hr=(()=>{let n=()=>Wy;return n.ngInherit=!0,n})();function Wy(n){return n.type.prototype.ngOnChanges&&(n.setInput=Rx),Ox}function Ox(){let n=Qy(this),t=n?.current;if(t){let e=n.previous;if(e===To)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function Rx(n,t,e,r,i){let o=this.declaredInputs[r],s=Qy(n)||Fx(n,{previous:To,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new ah(c&&c.currentValue,e,l===To),qy(n,t,i,e)}var Gy="__ngSimpleChanges__";function Qy(n){return n[Gy]||null}function Fx(n,t){return n[Gy]=t}var Vv=null;var tn=function(n,t,e){Vv?.(n,t,e)},Lx="svg",Vx="math";function On(n){for(;Array.isArray(n);)n=n[dr];return n}function Ky(n,t){return On(t[n])}function bn(n,t){return On(t[n.index])}function Zy(n,t){return n.data[t]}function hp(n,t){return n[t]}function Rn(n,t){let e=t[n];return Vr(e)?e:e[dr]}function jx(n){return(n[te]&4)===4}function pp(n){return(n[te]&128)===128}function Ux(n){return fr(n[ct])}function No(n,t){return t==null?null:n[t]}function Jy(n){n[Eo]=0}function mp(n){n[te]&1024||(n[te]|=1024,pp(n)&&Js(n))}function Bx(n,t){for(;n>0;)t=t[Lo],n--;return t}function Vc(n){return!!(n[te]&9216||n[jt]?.dirty)}function lh(n){n[or].changeDetectionScheduler?.notify(9),n[te]&64&&(n[te]|=1024),Vc(n)&&Js(n)}function Js(n){n[or].changeDetectionScheduler?.notify(0);let t=Ei(n);for(;t!==null&&!(t[te]&8192||(t[te]|=8192,!pp(t)));)t=Ei(t)}function Yy(n,t){if(Zs(n))throw new A(911,!1);n[Lr]===null&&(n[Lr]=[]),n[Lr].push(t)}function $x(n,t){if(n[Lr]===null)return;let e=n[Lr].indexOf(t);e!==-1&&n[Lr].splice(e,1)}function Ei(n){let t=n[ct];return fr(t)?t[ct]:t}function Xy(n){return n[lc]??=[]}function e0(n){return n.cleanup??=[]}function Hx(n,t,e,r){let i=Xy(t);i.push(e),n.firstCreatePass&&e0(n).push(r,i.length-1)}var se={lFrame:l0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ch=!1;function zx(){return se.lFrame.elementDepthCount}function qx(){se.lFrame.elementDepthCount++}function Wx(){se.lFrame.elementDepthCount--}function t0(){return se.bindingsEnabled}function n0(){return se.skipHydrationRootTNode!==null}function Gx(n){return se.skipHydrationRootTNode===n}function Qx(){se.skipHydrationRootTNode=null}function le(){return se.lFrame.lView}function ze(){return se.lFrame.tView}function E(n){return se.lFrame.contextLView=n,n[nn]}function S(n){return se.lFrame.contextLView=null,n}function yt(){let n=r0();for(;n!==null&&n.type===64;)n=n.parent;return n}function r0(){return se.lFrame.currentTNode}function Kx(){let n=se.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function Ai(n,t){let e=se.lFrame;e.currentTNode=n,e.isParent=t}function gp(){return se.lFrame.isParent}function _p(){se.lFrame.isParent=!1}function Zx(){return se.lFrame.contextLView}function i0(){return ch}function dc(n){let t=ch;return ch=n,t}function Ys(){let n=se.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function Jx(){return se.lFrame.bindingIndex}function Yx(n){return se.lFrame.bindingIndex=n}function jc(){return se.lFrame.bindingIndex++}function vp(n){let t=se.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function Xx(){return se.lFrame.inI18n}function eI(n,t){let e=se.lFrame;e.bindingIndex=e.bindingRootIndex=n,uh(t)}function tI(){return se.lFrame.currentDirectiveIndex}function uh(n){se.lFrame.currentDirectiveIndex=n}function nI(n){let t=se.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function o0(){return se.lFrame.currentQueryIndex}function yp(n){se.lFrame.currentQueryIndex=n}function rI(n){let t=n[de];return t.type===2?t.declTNode:t.type===1?n[Mt]:null}function s0(n,t,e){if(e&ae.SkipSelf){let i=t,o=n;for(;i=i.parent,i===null&&!(e&ae.Host);)if(i=rI(o),i===null||(o=o[Lo],i.type&10))break;if(i===null)return!1;t=i,n=o}let r=se.lFrame=a0();return r.currentTNode=t,r.lView=n,!0}function bp(n){let t=a0(),e=n[de];se.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function a0(){let n=se.lFrame,t=n===null?null:n.child;return t===null?l0(n):t}function l0(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function c0(){let n=se.lFrame;return se.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var u0=c0;function wp(){let n=c0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function iI(n){return(se.lFrame.contextLView=Bx(n,se.lFrame.contextLView))[nn]}function Hr(){return se.lFrame.selectedIndex}function Si(n){se.lFrame.selectedIndex=n}function Cp(){let n=se.lFrame;return Zy(n.tView,n.selectedIndex)}function oI(){return se.lFrame.currentNamespace}var d0=!0;function Uc(){return d0}function Bc(n){d0=n}function sI(n,t,e){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=Wy(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}i&&(e.preOrderHooks??=[]).push(0-n,i),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function $c(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),h!=null&&(n.destroyHooks??=[]).push(e,h)}}function Xl(n,t,e){f0(n,t,3,e)}function ec(n,t,e,r){(n[te]&3)===e&&f0(n,t,e,r)}function zf(n,t){let e=n[te];(e&3)===t&&(e&=16383,e+=1,n[te]=e)}function f0(n,t,e,r){let i=r!==void 0?n[Eo]&65535:0,o=r??-1,s=t.length-1,a=0;for(let l=i;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],r!=null&&a>=r)break}else t[l]<0&&(n[Eo]+=65536),(a<o||o==-1)&&(aI(n,e,t,l),n[Eo]=(n[Eo]&4294901760)+l+2),l++}function jv(n,t){tn(4,n,t);let e=_e(null);try{t.call(n)}finally{_e(e),tn(5,n,t)}}function aI(n,t,e,r){let i=e[r]<0,o=e[r+1],s=i?-e[r]:e[r],a=n[s];i?n[te]>>14<n[Eo]>>16&&(n[te]&3)===t&&(n[te]+=16384,jv(a,o)):jv(a,o)}var xo=-1,Di=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,r){this.factory=t,this.canSeeViewProviders=e,this.injectImpl=r}};function lI(n){return n instanceof Di}function cI(n){return(n.flags&8)!==0}function uI(n){return(n.flags&16)!==0}function dI(n,t,e){let r=0;for(;r<e.length;){let i=e[r];if(typeof i=="number"){if(i!==0)break;r++;let o=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,o)}else{let o=i,s=e[++r];fI(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),r++}}return r}function h0(n){return n===3||n===4||n===6}function fI(n){return n.charCodeAt(0)===64}function Po(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?e=i:e===0||(e===-1||e===2?Uv(n,e,i,null,t[++r]):Uv(n,e,i,null,null))}}return n}function Uv(n,t,e,r,i){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var qf={},dh=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=Pc(r);let i=this.injector.get(t,qf,r);return i!==qf||e===qf?i:this.parentInjector.get(t,e,r)}};function p0(n){return n!==xo}function fc(n){return n&32767}function hI(n){return n>>16}function hc(n,t){let e=hI(n),r=t;for(;e>0;)r=r[Lo],e--;return r}var fh=!0;function pc(n){let t=fh;return fh=n,t}var pI=256,m0=pI-1,g0=5,mI=0,Pn={};function gI(n,t,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(Ls)&&(r=e[Ls]),r==null&&(r=e[Ls]=mI++);let i=r&m0,o=1<<i;t.data[n+(i>>g0)]|=o}function mc(n,t){let e=_0(n,t);if(e!==-1)return e;let r=t[de];r.firstCreatePass&&(n.injectorIndex=t.length,Wf(r.data,n),Wf(t,null),Wf(r.blueprint,null));let i=Ep(n,t),o=n.injectorIndex;if(p0(i)){let s=fc(i),a=hc(i,t),l=a[de].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|l[s+c]}return t[o+8]=i,o}function Wf(n,t){n.push(0,0,0,0,0,0,0,0,t)}function _0(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function Ep(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;i!==null;){if(r=C0(i),r===null)return xo;if(e++,i=i[Lo],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return xo}function hh(n,t,e){gI(n,t,e)}function _I(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let r=e.length,i=0;for(;i<r;){let o=e[i];if(h0(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof e[i]=="string";)i++;else{if(o===t)return e[i+1];i=i+2}}}return null}function v0(n,t,e){if(e&ae.Optional||n!==void 0)return n;sp(t,"NodeInjector")}function y0(n,t,e,r){if(e&ae.Optional&&r===void 0&&(r=null),!(e&(ae.Self|ae.Host))){let i=n[Bs],o=xt(void 0);try{return i?i.get(t,r,e&ae.Optional):Ty(t,r,e&ae.Optional)}finally{xt(o)}}return v0(r,t,e)}function b0(n,t,e,r=ae.Default,i){if(n!==null){if(t[te]&2048&&!(r&ae.Self)){let s=wI(n,t,e,r,Pn);if(s!==Pn)return s}let o=w0(n,t,e,r,Pn);if(o!==Pn)return o}return y0(t,e,r,i)}function w0(n,t,e,r,i){let o=yI(e);if(typeof o=="function"){if(!s0(t,n,r))return r&ae.Host?v0(i,e,r):y0(t,e,r,i);try{let s;if(s=o(r),s==null&&!(r&ae.Optional))sp(e);else return s}finally{u0()}}else if(typeof o=="number"){let s=null,a=_0(n,t),l=xo,c=r&ae.Host?t[rn][Mt]:null;for((a===-1||r&ae.SkipSelf)&&(l=a===-1?Ep(n,t):t[a+8],l===xo||!$v(r,!1)?a=-1:(s=t[de],a=fc(l),t=hc(l,t)));a!==-1;){let h=t[de];if(Bv(o,a,h.data)){let p=vI(a,t,e,s,r,c);if(p!==Pn)return p}l=t[a+8],l!==xo&&$v(r,t[de].data[a+8]===c)&&Bv(o,a,t)?(s=h,a=fc(l),t=hc(l,t)):a=-1}}return i}function vI(n,t,e,r,i,o){let s=t[de],a=s.data[n+8],l=r==null?Mi(a)&&fh:r!=s&&(a.type&3)!==0,c=i&ae.Host&&o===a,h=tc(a,s,e,l,c);return h!==null?Hs(t,s,h,a):Pn}function tc(n,t,e,r,i){let o=n.providerIndexes,s=t.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,h=o>>20,p=r?a:a+h,_=i?a+h:c;for(let g=p;g<_;g++){let b=s[g];if(g<l&&e===b||g>=l&&b.type===e)return g}if(i){let g=s[l];if(g&&ar(g)&&g.type===e)return l}return null}function Hs(n,t,e,r){let i=n[e],o=t.data;if(lI(i)){let s=i;s.resolving&&ax(sx(o[e]));let a=pc(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?xt(s.injectImpl):null,h=s0(n,r,ae.Default);try{i=n[e]=s.factory(void 0,o,n,r),t.firstCreatePass&&e>=r.directiveStart&&sI(e,o[e],t)}finally{c!==null&&xt(c),pc(a),s.resolving=!1,u0()}}return i}function yI(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Ls)?n[Ls]:void 0;return typeof t=="number"?t>=0?t&m0:bI:t}function Bv(n,t,e){let r=1<<n;return!!(e[t+(n>>g0)]&r)}function $v(n,t){return!(n&ae.Self)&&!(n&ae.Host&&t)}var _i=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return b0(this._tNode,this._lView,t,Pc(r),e)}};function bI(){return new _i(yt(),le())}function Vn(n){return Qs(()=>{let t=n.prototype.constructor,e=t[ic]||ph(t),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ic]||ph(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ph(n){return Cy(n)?()=>{let t=ph(gt(n));return t&&t()}:vi(n)}function wI(n,t,e,r,i){let o=n,s=t;for(;o!==null&&s!==null&&s[te]&2048&&!uc(s);){let a=w0(o,s,e,r|ae.Self,Pn);if(a!==Pn)return a;let l=o.parent;if(!l){let c=s[Hy];if(c){let h=c.get(e,Pn,r);if(h!==Pn)return h}l=C0(s),s=s[Lo]}o=l}return i}function C0(n){let t=n[de],e=t.type;return e===2?t.declTNode:e===1?n[Mt]:null}function Hc(n){return _I(yt(),n)}function Hv(n,t=null,e=null,r){let i=E0(n,t,e,r);return i.resolveInjectorInitializers(),i}function E0(n,t=null,e=null,r,i=new Set){let o=[e||It,Cx(n)];return r=r||(typeof n=="object"?void 0:_t(n)),new js(o,t||dp(),r||null,i)}var vt=class n{static THROW_IF_NOT_FOUND=Vs;static NULL=new ac;static create(t,e){if(Array.isArray(t))return Hv({name:""},e,t,"");{let r=t.name??"";return Hv({name:r},t.parent,t.providers,r)}}static \u0275prov=k({token:n,providedIn:"any",factory:()=>O(ky)});static __NG_ELEMENT_ID__=-1};var gc=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Hc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},CI=new V("");CI.__NG_ELEMENT_ID__=n=>{let t=yt();if(t===null)throw new A(204,!1);if(t.type&2)return t.value;if(n&ae.Optional)return null;throw new A(204,!1)};var S0=!1,Vo=(()=>{class n{static __NG_ELEMENT_ID__=EI;static __NG_ENV_ID__=e=>e}return n})(),_c=class extends Vo{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return Yy(this._lView,t),()=>$x(this._lView,t)}};function EI(){return new _c(le())}var xi=class{},zc=new V("",{providedIn:"root",factory:()=>!1});var D0=new V(""),Sp=new V(""),pr=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new rt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=k({token:n,providedIn:"root",factory:()=>new n})}return n})();var mh=class extends Re{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,By()&&(this.destroyRef=I(Vo,{optional:!0})??void 0,this.pendingTasks=I(pr,{optional:!0})??void 0)}emit(t){let e=_e(null);try{super.next(t)}finally{_e(e)}}subscribe(t,e,r){let i=t,o=e||(()=>null),s=r;if(t&&typeof t=="object"){let l=t;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof Oe&&t.add(a),a}wrapInTimeout(t){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(e),r!==void 0&&this.pendingTasks?.remove(r)})}}},be=mh;function zs(...n){}function x0(n){let t,e;function r(){n=zs;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),r()})),()=>r()}function zv(n){return queueMicrotask(()=>n()),()=>{n=zs}}var Dp="isAngularZone",vc=Dp+"_ID",SI=0,Te=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new be(!1);onMicrotaskEmpty=new be(!1);onStable=new be(!1);onError=new be(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=S0}=t;if(typeof Zone>"u")throw new A(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,II(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Dp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new A(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new A(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,DI,zs,zs);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}},DI={};function xp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xI(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){x0(()=>{n.callbackScheduled=!1,gh(n),n.isCheckStableRunning=!0,xp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),gh(n)}function II(n){let t=()=>{xI(n)},e=SI++;n._inner=n._inner.fork({name:"angular",properties:{[Dp]:!0,[vc]:e,[vc+e]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(TI(l))return r.invokeTask(o,s,a,l);try{return qv(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),Wv(n)}},onInvoke:(r,i,o,s,a,l,c)=>{try{return qv(n),r.invoke(o,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!MI(l)&&t(),Wv(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,gh(n),xp(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function gh(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function qv(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Wv(n){n._nesting--,xp(n)}var yc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new be;onMicrotaskEmpty=new be;onStable=new be;onError=new be;run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}};function TI(n){return I0(n,"__ignore_ng_zone__")}function MI(n){return I0(n,"__scheduler_tick__")}function I0(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var Bt=class{_console=console;handleError(t){this._console.error("ERROR",t)}},AI=new V("",{providedIn:"root",factory:()=>{let n=I(Te),t=I(Bt);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function Gv(n,t){return by(n,t)}function kI(n){return by(yy,n)}var T0=(Gv.required=kI,Gv);function NI(){return jo(yt(),le())}function jo(n,t){return new Ye(bn(n,t))}var Ye=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=NI}return n})();function PI(n){return n instanceof Ye?n.nativeElement:n}var Qv=new Set;function jn(n){Qv.has(n)||(Qv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Ip(n){return typeof n=="function"&&n[Et]!==void 0}function j(n,t){jn("NgSignals");let e=iv(n),r=e[Et];return t?.equal&&(r.equal=t.equal),e.set=i=>vl(r,i),e.update=i=>ov(r,i),e.asReadonly=OI.bind(e),e}function OI(){let n=this[Et];if(n.readonlyFn===void 0){let t=()=>this();t[Et]=n,n.readonlyFn=t}return n.readonlyFn}function M0(n){return Ip(n)&&typeof n.set=="function"}function RI(){return this._results[Symbol.iterator]()}var bc=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Re}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let r=vx(t);(this._changesDetected=!_x(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=RI};function A0(n){return(n.flags&128)===128}var k0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(k0||{}),N0=new Map,FI=0;function LI(){return FI++}function VI(n){N0.set(n[Fc],n)}function _h(n){N0.delete(n[Fc])}var Kv="__ngContext__";function ki(n,t){Vr(t)?(n[Kv]=t[Fc],VI(t)):n[Kv]=t}function P0(n){return R0(n[$s])}function O0(n){return R0(n[yn])}function R0(n){for(;n!==null&&!fr(n);)n=n[yn];return n}var vh;function F0(n){vh=n}function jI(){if(vh!==void 0)return vh;if(typeof document<"u")return document;throw new A(210,!1)}var qc=new V("",{providedIn:"root",factory:()=>UI}),UI="ng",Tp=new V(""),dt=new V("",{providedIn:"platform",factory:()=>"unknown"});var Wc=new V(""),Xs=new V("",{providedIn:"root",factory:()=>jI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var BI="h",$I="b";var L0=!1,HI=new V("",{providedIn:"root",factory:()=>L0});var V0=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(V0||{}),Gc=new V("");var zI=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=k({token:n,providedIn:"root",factory:()=>new n})}return n})();var qI=()=>null;function j0(n,t,e=!1){return qI(n,t,e)}function U0(n,t){let e=n.contentQueries;if(e!==null){let r=_e(null);try{for(let i=0;i<e.length;i+=2){let o=e[i],s=e[i+1];if(s!==-1){let a=n.data[s];yp(o),a.contentQueries(2,t[s],s)}}}finally{_e(r)}}}function yh(n,t,e){yp(0);let r=_e(null);try{t(n,e)}finally{_e(r)}}function Mp(n,t,e){if(fp(t)){let r=_e(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{_e(r)}}}var Fn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Fn||{}),Wl;function WI(){if(Wl===void 0&&(Wl=null,ir.trustedTypes))try{Wl=ir.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Wl}function Qc(n){return WI()?.createHTML(n)||n}var Gl;function GI(){if(Gl===void 0&&(Gl=null,ir.trustedTypes))try{Gl=ir.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gl}function Zv(n){return GI()?.createScriptURL(n)||n}var lr=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vy})`}},bh=class extends lr{getTypeName(){return"HTML"}},wh=class extends lr{getTypeName(){return"Style"}},Ch=class extends lr{getTypeName(){return"Script"}},Eh=class extends lr{getTypeName(){return"URL"}},Sh=class extends lr{getTypeName(){return"ResourceURL"}};function wn(n){return n instanceof lr?n.changingThisBreaksApplicationSecurity:n}function zr(n,t){let e=QI(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${vy})`)}return e===t}function QI(n){return n instanceof lr&&n.getTypeName()||null}function B0(n){return new bh(n)}function $0(n){return new wh(n)}function H0(n){return new Ch(n)}function z0(n){return new Eh(n)}function q0(n){return new Sh(n)}function KI(n){let t=new xh(n);return ZI()?new Dh(t):t}var Dh=class{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(Qc(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},xh=class{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=Qc(t),e}};function ZI(){try{return!!new window.DOMParser().parseFromString(Qc(""),"text/html")}catch{return!1}}var JI=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Kc(n){return n=String(n),n.match(JI)?n:"unsafe:"+n}function mr(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function ea(...n){let t={};for(let e of n)for(let r in e)e.hasOwnProperty(r)&&(t[r]=!0);return t}var W0=mr("area,br,col,hr,img,wbr"),G0=mr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Q0=mr("rp,rt"),YI=ea(Q0,G0),XI=ea(G0,mr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),eT=ea(Q0,mr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jv=ea(W0,XI,eT,YI),K0=mr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),tT=mr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),nT=mr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),rT=ea(K0,tT,nT),iT=mr("script,style,template"),Ih=class{sanitizedSomething=!1;buf=[];sanitizeChildren(t){let e=t.firstChild,r=!0,i=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild){i.push(e),e=aT(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=sT(e);if(o){e=o;break}e=i.pop()}}return this.buf.join("")}startElement(t){let e=Yv(t).toLowerCase();if(!Jv.hasOwnProperty(e))return this.sanitizedSomething=!0,!iT.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let r=t.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!rT.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;K0[a]&&(l=Kc(l)),this.buf.push(" ",s,'="',Xv(l),'"')}return this.buf.push(">"),!0}endElement(t){let e=Yv(t).toLowerCase();Jv.hasOwnProperty(e)&&!W0.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Xv(t))}};function oT(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function sT(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw Z0(t);return t}function aT(n){let t=n.firstChild;if(t&&oT(n,t))throw Z0(t);return t}function Yv(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function Z0(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var lT=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,cT=/([^\#-~ |!])/g;function Xv(n){return n.replace(/&/g,"&amp;").replace(lT,function(t){let e=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((e-55296)*1024+(r-56320)+65536)+";"}).replace(cT,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ql;function J0(n,t){let e=null;try{Ql=Ql||KI(n);let r=t?String(t):"";e=Ql.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=e.innerHTML,e=Ql.getInertBodyElement(r)}while(r!==o);let a=new Ih().sanitizeChildren(ey(e)||e);return Qc(a)}finally{if(e){let r=ey(e)||e;for(;r.firstChild;)r.firstChild.remove()}}}function ey(n){return"content"in n&&uT(n)?n.content:null}function uT(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var ft=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ft||{});function Un(n){let t=X0();return t?t.sanitize(ft.URL,n)||"":zr(n,"URL")?wn(n):Kc(Io(n))}function Ap(n){let t=X0();if(t)return Zv(t.sanitize(ft.RESOURCE_URL,n)||"");if(zr(n,"ResourceURL"))return Zv(wn(n));throw new A(904,!1)}function dT(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?Ap:Un}function Y0(n,t,e){return dT(t,e)(n)}function X0(){let n=le();return n&&n[or].sanitizer}var fT=/^>|^->|<!--|-->|--!>|<!-$/g,hT=/(<|>)/g,pT="\u200B$1\u200B";function mT(n){return n.replace(fT,t=>t.replace(hT,pT))}function eb(n){return n.ownerDocument}function tb(n){return n instanceof Function?n():n}var jr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(jr||{});function gT(n,t,e){let r=n.length;for(;;){let i=n.indexOf(t,e);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}var nb="ng-template";function _T(n,t,e,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&gT(t[i+1].toLowerCase(),e,0)!==-1)return!0}else if(kp(n))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===e)return!0}return!1}function kp(n){return n.type===4&&n.value!==nb}function vT(n,t,e){let r=n.type===4&&!e?nb:n.value;return t===r}function yT(n,t,e){let r=4,i=n.attrs,o=i!==null?CT(i):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!_n(r)&&!_n(l))return!1;if(s&&_n(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!vT(n,l,e)||l===""&&t.length===1){if(_n(r))return!1;s=!0}}else if(r&8){if(i===null||!_T(n,i,l,e)){if(_n(r))return!1;s=!0}}else{let c=t[++a],h=bT(l,i,kp(n),e);if(h===-1){if(_n(r))return!1;s=!0;continue}if(c!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&c!==p){if(_n(r))return!1;s=!0}}}}return _n(r)||s}function _n(n){return(n&1)===0}function bT(n,t,e,r){if(t===null)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){let s=t[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return ET(t,n)}function rb(n,t,e=!1){for(let r=0;r<t.length;r++)if(yT(n,t[r],e))return!0;return!1}function wT(n){let t=n.attrs;if(t!=null){let e=t.indexOf(5);if(!(e&1))return t[e+1]}return null}function CT(n){for(let t=0;t<n.length;t++){let e=n[t];if(h0(e))return t}return n.length}function ET(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let r=n[e];if(typeof r=="number")return-1;if(r===t)return e;e++}return-1}function ST(n,t){e:for(let e=0;e<t.length;e++){let r=t[e];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function ty(n,t){return n?":not("+t.trim()+")":t}function DT(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(r&2){let a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!_n(s)&&(t+=ty(o,i),i=""),r=s,o=o||!_n(r);e++}return i!==""&&(t+=ty(o,i)),t}function xT(n){return n.map(DT).join(",")}function IT(n){let t=[],e=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&t.push(o,n[++r]):i===8&&e.push(o);else{if(!_n(i))break;i=o}r++}return e.length&&t.push(1,...e),t}var sn={};function TT(n,t){return n.createText(t)}function MT(n,t,e){n.setValue(t,e)}function AT(n,t){return n.createComment(mT(t))}function ib(n,t,e){return n.createElement(t,e)}function wc(n,t,e,r,i){n.insertBefore(t,e,r,i)}function ob(n,t,e){n.appendChild(t,e)}function ny(n,t,e,r,i){r!==null?wc(n,t,e,r,i):ob(n,t,e)}function kT(n,t,e){n.removeChild(null,t,e)}function NT(n,t,e){n.setAttribute(t,"style",e)}function PT(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function sb(n,t,e){let{mergedAttrs:r,classes:i,styles:o}=e;r!==null&&dI(n,t,r),i!==null&&PT(n,t,i),o!==null&&NT(n,t,o)}function m(n=1){ab(ze(),le(),Hr()+n,!1)}function ab(n,t,e,r){if(!r)if((t[te]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Xl(t,o,e)}else{let o=n.preOrderHooks;o!==null&&ec(t,o,0,e)}Si(e)}function T(n,t=ae.Default){let e=le();if(e===null)return O(n,t);let r=yt();return b0(r,e,gt(n),t)}function lb(n,t,e,r,i,o){let s=_e(null);try{let a=null;i&jr.SignalBased&&(a=t[r][Et]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&jr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(t,o)),n.setInput!==null?n.setInput(t,a,o,e,r):qy(t,a,r,o)}finally{_e(s)}}function Np(n,t,e,r,i,o,s,a,l,c,h){let p=t.blueprint.slice();return p[dr]=i,p[te]=r|4|128|8|64|1024,(c!==null||n&&n[te]&2048)&&(p[te]|=2048),Jy(p),p[ct]=p[Lo]=n,p[nn]=e,p[or]=s||n&&n[or],p[$e]=a||n&&n[$e],p[Bs]=l||n&&n[Bs]||null,p[Mt]=o,p[Fc]=LI(),p[Us]=h,p[Hy]=c,p[rn]=t.type==2?n[rn]:p,p}function cb(n,t,e,r){if(e===0)return-1;let i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function ub(n,t,e,r,i){let o=Hr(),s=r&2;try{Si(-1),s&&t.length>ut&&ab(n,t,ut,!1),tn(s?2:0,i),e(r,i)}finally{Si(o),tn(s?3:1,i)}}function Pp(n,t,e){t0()&&(ki(bn(e,t),t),db(n,t,e))}function db(n,t,e){zT(n,t,e),(e.flags&64)===64&&qT(n,t,e)}function Op(n,t,e=bn){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?e(t,n):n[s];n[i++]=a}}}function OT(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=Rp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function Rp(n,t,e,r,i,o,s,a,l,c,h){let p=ut+r,_=p+i,g=RT(p,_),b=typeof c=="function"?c():c;return g[de]={type:n,blueprint:g,template:e,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1,ssrId:h}}function RT(n,t){let e=[];for(let r=0;r<t;r++)e.push(r<n?null:sn);return e}function FT(n,t,e,r){let o=r.get(HI,L0)||e===Fn.ShadowDom,s=n.selectRootElement(t,o);return LT(s),s}function LT(n){VT(n)}var VT=()=>null;function ry(n,t,e,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;r??={};let a,l=jr.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}n===0?iy(r,e,c,a,l):iy(r,e,c,a)}return r}function iy(n,t,e,r,i){let o;n.hasOwnProperty(e)?(o=n[e]).push(t,r):o=n[e]=[t,r],i!==void 0&&o.push(i)}function jT(n,t,e){let r=t.directiveStart,i=t.directiveEnd,o=n.data,s=t.attrs,a=[],l=null,c=null;for(let h=r;h<i;h++){let p=o[h],_=e?e.get(p):null,g=_?_.inputs:null,b=_?_.outputs:null;l=ry(0,p.inputs,h,l,g),c=ry(1,p.outputs,h,c,b);let w=l!==null&&s!==null&&!kp(t)?i1(l,h,s):null;a.push(w)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}function UT(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function fb(n,t,e,r,i,o,s,a){let l=bn(t,e),c=t.inputs,h;!a&&c!=null&&(h=c[r])?(Vp(n,e,h,r,i),Mi(t)&&BT(e,t.index)):t.type&3?(r=UT(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(l,r,i)):t.type&12}function BT(n,t){let e=Rn(t,n);e[te]&16||(e[te]|=64)}function Fp(n,t,e,r){if(t0()){let i=r===null?null:{"":-1},o=GT(n,e);if(o!==null){let[s,a]=pb(n,e,o);hb(n,t,e,s,i,a)}i&&KT(e,r,i)}e.mergedAttrs=Po(e.mergedAttrs,e.attrs)}function hb(n,t,e,r,i,o){for(let c=0;c<r.length;c++)hh(mc(e,t),n,r[c].type);JT(e,n.data.length,r.length);for(let c=0;c<r.length;c++){let h=r[c];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,l=cb(n,t,r.length,null);for(let c=0;c<r.length;c++){let h=r[c];e.mergedAttrs=Po(e.mergedAttrs,h.hostAttrs),YT(n,e,t,l,h),ZT(l,h,i),h.contentQueries!==null&&(e.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(e.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}jT(n,e,o)}function $T(n,t,e,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;HT(s)!=a&&s.push(a),s.push(e,r,o)}}function HT(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function zT(n,t,e){let r=e.directiveStart,i=e.directiveEnd;Mi(e)&&e1(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||mc(e,t);let o=e.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=Hs(t,n,s,e);if(ki(l,t),o!==null&&r1(t,s-r,l,a,e,o),ar(a)){let c=Rn(e.index,t);c[nn]=Hs(t,n,s,e)}}}function qT(n,t,e){let r=e.directiveStart,i=e.directiveEnd,o=e.index,s=tI();try{Si(o);for(let a=r;a<i;a++){let l=n.data[a],c=t[a];uh(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&WT(l,c)}}finally{Si(-1),uh(s)}}function WT(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function GT(n,t){let e=n.directiveRegistry,r=null;if(e)for(let i=0;i<e.length;i++){let o=e[i];rb(t,o.selectors,!1)&&(r??=[],ar(o)?r.unshift(o):r.push(o))}return r}function pb(n,t,e){let r=[],i=null;for(let o of e)o.findHostDirectiveDefs!==null&&(i??=new Map,o.findHostDirectiveDefs(o,r,i)),ar(o)&&(r.push(o),QT(n,t,r.length-1));return Mi(t)?r.push(...e.slice(1)):r.push(...e),[r,i]}function QT(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function KT(n,t,e){if(t){let r=n.localNames=[];for(let i=0;i<t.length;i+=2){let o=e[t[i+1]];if(o==null)throw new A(-301,!1);r.push(t[i],o)}}}function ZT(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;ar(t)&&(e[""]=n)}}function JT(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function YT(n,t,e,r,i){n.data[r]=i;let o=i.factory||(i.factory=vi(i.type,!0)),s=new Di(o,ar(i),T);n.blueprint[r]=s,e[r]=s,$T(n,t,r,cb(n,e,i.hostVars,sn),i)}function XT(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function e1(n,t,e){let r=bn(t,n),i=OT(e),o=n[or].rendererFactory,s=Lp(n,Np(n,i,null,XT(e),r,t,null,o.createRenderer(r,e),null,null,null));return n[t.index]=s}function t1(n,t,e,r,i,o){let s=bn(n,t);n1(t[$e],s,o,n.value,e,r,i)}function n1(n,t,e,r,i,o,s){if(o==null)n.removeAttribute(t,i,e);else{let a=s==null?Io(o):s(o,r||"",i);n.setAttribute(t,i,a,e)}}function r1(n,t,e,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],h=s[a++],p=s[a++];lb(r,e,l,c,h,p)}}function i1(n,t,e){let r=null,i=0;for(;i<e.length;){let o=e[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(o,s[a+1],s[a+2],e[i+1]);break}}i+=2}return r}function mb(n,t,e,r){return[n,!0,0,t,null,r,null,e,null,null]}function Lp(n,t){return n[$s]?n[Lv][yn]=t:n[$s]=t,n[Lv]=t,t}function gb(n,t){let e=n[Bs],r=e?e.get(Bt,null):null;r&&r.handleError(t)}function Vp(n,t,e,r,i){for(let o=0;o<e.length;){let s=e[o++],a=e[o++],l=e[o++],c=t[s],h=n.data[s];lb(h,c,r,a,l,i)}}function o1(n,t){let e=Rn(t,n),r=e[de];s1(r,e);let i=e[dr];i!==null&&e[Us]===null&&(e[Us]=j0(i,e[Bs])),jp(r,e,e[nn])}function s1(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function jp(n,t,e){bp(t);try{let r=n.viewQuery;r!==null&&yh(1,r,e);let i=n.template;i!==null&&ub(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[sr]?.finishViewCreation(n),n.staticContentQueries&&U0(n,t),n.staticViewQueries&&yh(2,n.viewQuery,e);let o=n.components;o!==null&&a1(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[te]&=-5,wp()}}function a1(n,t){for(let e=0;e<t.length;e++)o1(n,t[e])}var Ln=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ln||{}),l1;function Up(n,t){return l1(n,t)}function Bp(n){return(n.flags&32)===32}function So(n,t,e,r,i){if(r!=null){let o,s=!1;fr(r)?o=r:Vr(r)&&(s=!0,r=r[dr]);let a=On(r);n===0&&e!==null?i==null?ob(t,e,a):wc(t,e,a,i||null,!0):n===1&&e!==null?wc(t,e,a,i||null,!0):n===2?kT(t,a,s):n===3&&t.destroyNode(a),o!=null&&y1(t,n,o,e,i)}}function c1(n,t){_b(n,t),t[dr]=null,t[Mt]=null}function u1(n,t,e,r,i,o){r[dr]=i,r[Mt]=t,Jc(n,r,e,1,i,o)}function _b(n,t){t[or].changeDetectionScheduler?.notify(10),Jc(n,t,t[$e],2,null,null)}function d1(n){let t=n[$s];if(!t)return Gf(n[de],n);for(;t;){let e=null;if(Vr(t))e=t[$s];else{let r=t[Ut];r&&(e=r)}if(!e){for(;t&&!t[yn]&&t!==n;)Vr(t)&&Gf(t[de],t),t=t[ct];t===null&&(t=n),Vr(t)&&Gf(t[de],t),e=t&&t[yn]}t=e}}function f1(n,t,e,r){let i=Ut+r,o=e.length;r>0&&(e[i-1][yn]=t),r<o-Ut?(t[yn]=e[i],Ay(e,Ut+r,t)):(e.push(t),t[yn]=null),t[ct]=e;let s=t[bi];s!==null&&e!==s&&vb(s,t);let a=t[sr];a!==null&&a.insertView(n),lh(t),t[te]|=128}function vb(n,t){let e=n[ko],r=t[ct];if(Vr(r))n[te]|=2;else{let i=r[ct][rn];t[rn]!==i&&(n[te]|=2)}e===null?n[ko]=[t]:e.push(t)}function $p(n,t){let e=n[ko],r=e.indexOf(t);e.splice(r,1)}function Th(n,t){if(n.length<=Ut)return;let e=Ut+t,r=n[e];if(r){let i=r[bi];i!==null&&i!==n&&$p(i,r),t>0&&(n[e-1][yn]=r[yn]);let o=sc(n,Ut+t);c1(r[de],r);let s=o[sr];s!==null&&s.detachView(o[de]),r[ct]=null,r[yn]=null,r[te]&=-129}return r}function yb(n,t){if(Zs(t))return;let e=t[$e];e.destroyNode&&Jc(n,t,e,3,null,null),d1(t)}function Gf(n,t){if(Zs(t))return;let e=_e(null);try{t[te]&=-129,t[te]|=256,t[jt]&&fo(t[jt]),p1(n,t),h1(n,t),t[de].type===1&&t[$e].destroy();let r=t[bi];if(r!==null&&fr(t[ct])){r!==t[ct]&&$p(r,t);let i=t[sr];i!==null&&i.detachView(n)}_h(t)}finally{_e(e)}}function h1(n,t){let e=n.cleanup,r=t[lc];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[e[s+1]];e[s].call(a)}r!==null&&(t[lc]=null);let i=t[Lr];if(i!==null){t[Lr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[wi];if(o!==null){t[wi]=null;for(let s of o)s.destroy()}}function p1(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let i=t[e[r]];if(!(i instanceof Di)){let o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];tn(4,a,l);try{l.call(a)}finally{tn(5,a,l)}}else{tn(4,i,o);try{o.call(i)}finally{tn(5,i,o)}}}}}function bb(n,t,e){return m1(n,t.parent,e)}function m1(n,t,e){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return e[dr];if(Mi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Fn.None||i===Fn.Emulated)return null}return bn(r,e)}function wb(n,t,e){return _1(n,t,e)}function g1(n,t,e){return n.type&40?bn(n,e):null}var _1=g1,oy;function Zc(n,t,e,r){let i=bb(n,r,t),o=t[$e],s=r.parent||t[Mt],a=wb(s,r,t);if(i!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)ny(o,i,e[l],a,!1);else ny(o,i,e,a,!1);oy!==void 0&&oy(o,r,t,e,i)}function Fs(n,t){if(t!==null){let e=t.type;if(e&3)return bn(t,n);if(e&4)return Mh(-1,n[t.index]);if(e&8){let r=t.child;if(r!==null)return Fs(n,r);{let i=n[t.index];return fr(i)?Mh(-1,i):On(i)}}else{if(e&128)return Fs(n,t.next);if(e&32)return Up(t,n)()||On(n[t.index]);{let r=Cb(n,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Ei(n[rn]);return Fs(i,r)}else return Fs(n,t.next)}}}return null}function Cb(n,t){if(t!==null){let r=n[rn][Mt],i=t.projection;return r.projection[i]}return null}function Mh(n,t){let e=Ut+n+1;if(e<t.length){let r=t[e],i=r[de].firstChild;if(i!==null)return Fs(r,i)}return t[Ci]}function Hp(n,t,e,r,i,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=r[e.index],l=e.type;if(s&&t===0&&(a&&ki(On(a),r),e.flags|=2),!Bp(e))if(l&8)Hp(n,t,e.child,r,i,o,!1),So(t,n,i,a,o);else if(l&32){let c=Up(e,r),h;for(;h=c();)So(t,n,i,h,o);So(t,n,i,a,o)}else l&16?Eb(n,t,r,e,i,o):So(t,n,i,a,o);e=s?e.projectionNext:e.next}}function Jc(n,t,e,r,i,o){Hp(e,r,n.firstChild,t,i,o,!1)}function v1(n,t,e){let r=t[$e],i=bb(n,e,t),o=e.parent||t[Mt],s=wb(o,e,t);Eb(r,0,t,e,i,s)}function Eb(n,t,e,r,i,o){let s=e[rn],l=s[Mt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let h=l[c];So(t,n,i,h,o)}else{let c=l,h=s[ct];A0(r)&&(c.flags|=128),Hp(n,t,c,h,i,o,!0)}}function y1(n,t,e,r,i){let o=e[Ci],s=On(e);o!==s&&So(t,n,r,o,i);for(let a=Ut;a<e.length;a++){let l=e[a];Jc(l[de],l,n,t,r,o)}}function b1(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let o=r.indexOf("-")===-1?void 0:Ln.DashCase;i==null?n.removeStyle(e,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ln.Important),n.setStyle(e,r,i,o))}}function Sb(n,t,e,r){let i=_e(null);try{let o=t.tView,a=n[te]&4096?4096:16,l=Np(n,o,e,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[t.index];l[bi]=c;let h=n[sr];return h!==null&&(l[sr]=h.createEmbeddedView(o)),jp(o,l,e),l}finally{_e(i)}}function Ah(n,t){return!t||t.firstChild===null||A0(n)}function Db(n,t,e,r=!0){let i=t[de];if(f1(i,t,n,e),r){let s=Mh(e,n),a=t[$e],l=a.parentNode(n[Ci]);l!==null&&u1(i,n[Mt],a,t,l,s)}let o=t[Us];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Cc(n,t,e,r,i=!1){for(;e!==null;){if(e.type===128){e=i?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&r.push(On(o)),fr(o)&&w1(o,r);let s=e.type;if(s&8)Cc(n,t,e.child,r);else if(s&32){let a=Up(e,t),l;for(;l=a();)r.push(l)}else if(s&16){let a=Cb(t,e);if(Array.isArray(a))r.push(...a);else{let l=Ei(t[rn]);Cc(l[de],l,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function w1(n,t){for(let e=Ut;e<n.length;e++){let r=n[e],i=r[de].firstChild;i!==null&&Cc(r[de],r,i,t)}n[Ci]!==n[dr]&&t.push(n[Ci])}var xb=[];function C1(n){return n[jt]??E1(n)}function E1(n){let t=xb.pop()??Object.create(D1);return t.lView=n,t}function S1(n){n.lView[jt]!==n&&(n.lView=null,xb.push(n))}var D1=B(N({},di),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Js(n.lView)},consumerOnSignalRead(){this.lView[jt]=this}});function x1(n){let t=n[jt]??Object.create(I1);return t.lView=n,t}var I1=B(N({},di),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=Ei(n.lView);for(;t&&!Ib(t[de]);)t=Ei(t);t&&mp(t)},consumerOnSignalRead(){this.lView[jt]=this}});function Ib(n){return n.type!==2}function Tb(n){if(n[wi]===null)return;let t=!0;for(;t;){let e=!1;for(let r of n[wi])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=e&&!!(n[te]&8192)}}var T1=100;function Mb(n,t=!0,e=0){let i=n[or].rendererFactory,o=!1;o||i.begin?.();try{M1(n,e)}catch(s){throw t&&gb(n,s),s}finally{o||i.end?.()}}function M1(n,t){let e=i0();try{dc(!0),kh(n,t);let r=0;for(;Vc(n);){if(r===T1)throw new A(103,!1);r++,kh(n,1)}}finally{dc(e)}}function A1(n,t,e,r){if(Zs(t))return;let i=t[te],o=!1,s=!1;bp(t);let a=!0,l=null,c=null;o||(Ib(n)?(c=C1(t),l=uo(c)):W_()===null?(a=!1,c=x1(t),l=uo(c)):t[jt]&&(fo(t[jt]),t[jt]=null));try{Jy(t),Yx(n.bindingStartIndex),e!==null&&ub(n,t,e,2,r);let h=(i&3)===3;if(!o)if(h){let g=n.preOrderCheckHooks;g!==null&&Xl(t,g,null)}else{let g=n.preOrderHooks;g!==null&&ec(t,g,0,null),zf(t,0)}if(s||k1(t),Tb(t),Ab(t,0),n.contentQueries!==null&&U0(n,t),!o)if(h){let g=n.contentCheckHooks;g!==null&&Xl(t,g)}else{let g=n.contentHooks;g!==null&&ec(t,g,1),zf(t,1)}P1(n,t);let p=n.components;p!==null&&Nb(t,p,0);let _=n.viewQuery;if(_!==null&&yh(2,_,r),!o)if(h){let g=n.viewCheckHooks;g!==null&&Xl(t,g)}else{let g=n.viewHooks;g!==null&&ec(t,g,2),zf(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[Yl]){for(let g of t[Yl])g();t[Yl]=null}o||(t[te]&=-73)}catch(h){throw o||Js(t),h}finally{c!==null&&(Is(c,l),a&&S1(c)),wp()}}function Ab(n,t){for(let e=P0(n);e!==null;e=O0(e))for(let r=Ut;r<e.length;r++){let i=e[r];kb(i,t)}}function k1(n){for(let t=P0(n);t!==null;t=O0(t)){if(!(t[te]&2))continue;let e=t[ko];for(let r=0;r<e.length;r++){let i=e[r];mp(i)}}}function N1(n,t,e){let r=Rn(t,n);kb(r,e)}function kb(n,t){pp(n)&&kh(n,t)}function kh(n,t){let r=n[de],i=n[te],o=n[jt],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ts(o)),s||=!1,o&&(o.dirty=!1),n[te]&=-9217,s)A1(r,n,r.template,n[nn]);else if(i&8192){Tb(n),Ab(n,1);let a=r.components;a!==null&&Nb(n,a,1)}}function Nb(n,t,e){for(let r=0;r<t.length;r++)N1(n,t[r],e)}function P1(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let i=e[r];if(i<0)Si(~i);else{let o=i,s=e[++r],a=e[++r];eI(s,o);let l=t[o];tn(24,l),a(2,l),tn(25,l)}}}finally{Si(-1)}}function zp(n,t){let e=i0()?64:1088;for(n[or].changeDetectionScheduler?.notify(t);n;){n[te]|=e;let r=Ei(n);if(uc(n)&&!r)return n;n=r}return null}var Ii=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,e=t[de];return Cc(e,t,e.firstChild,[])}constructor(t,e,r=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=r}get context(){return this._lView[nn]}get dirty(){return!!(this._lView[te]&9280)||!!this._lView[jt]?.dirty}set context(t){this._lView[nn]=t}get destroyed(){return Zs(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[ct];if(fr(t)){let e=t[cc],r=e?e.indexOf(this):-1;r>-1&&(Th(t,r),sc(e,r))}this._attachedToViewContainer=!1}yb(this._lView[de],this._lView)}onDestroy(t){Yy(this._lView,t)}markForCheck(){zp(this._cdRefInjectingView||this._lView,4)}markForRefresh(){mp(this._cdRefInjectingView||this._lView)}detach(){this._lView[te]&=-129}reattach(){lh(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,Mb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new A(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=uc(this._lView),e=this._lView[bi];e!==null&&!t&&$p(e,this._lView),_b(this._lView[de],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new A(902,!1);this._appRef=t;let e=uc(this._lView),r=this._lView[bi];r!==null&&!e&&vb(r,this._lView),lh(this._lView)}},Ur=(()=>{class n{static __NG_ELEMENT_ID__=F1}return n})(),O1=Ur,R1=class extends O1{_declarationLView;_declarationTContainer;elementRef;constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,r){let i=Sb(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:r});return new Ii(i)}};function F1(){return Yc(yt(),le())}function Yc(n,t){return n.type&4?new R1(t,n,jo(n,t)):null}function Uo(n,t,e,r,i){let o=n.data[t];if(o===null)o=L1(n,t,e,r,i),Xx()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=r,o.attrs=i;let s=Kx();o.injectorIndex=s===null?-1:s.injectorIndex}return Ai(o,!0),o}function L1(n,t,e,r,i){let o=r0(),s=gp(),a=s?o:o&&o.parent,l=n.data[t]=j1(n,a,e,t,r,i);return V1(n,l,o,s),l}function V1(n,t,e,r){n.firstChild===null&&(n.firstChild=t),e!==null&&(r?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function j1(n,t,e,r,i,o){let s=t?t.injectorIndex:-1,a=0;return n0()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var P5=new RegExp(`^(\\d+)*(${$I}|${BI})*(.*)`);var U1=()=>null;function Nh(n,t){return U1(n,t)}var Ph=class{},Ec=class{},Oh=class{resolveComponentFactory(t){throw Error(`No component factory found for ${_t(t)}.`)}},Oo=class{static NULL=new Oh},Br=class{},Cn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>B1()}return n})();function B1(){let n=le(),t=yt(),e=Rn(t.index,n);return(Vr(e)?e:n)[$e]}var $1=(()=>{class n{static \u0275prov=k({token:n,providedIn:"root",factory:()=>null})}return n})();function Sc(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=eh(i,a);else if(o==2){let l=a,c=t[++s];r=eh(r,l+": "+c+";")}}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}var Dc=class extends Oo{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=yi(t);return new qs(e,this.ngModule)}};function sy(n,t){let e=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:jr.None;t?e.push({propName:s,templateName:r,isSignal:(a&jr.SignalBased)!==0}):e.push({propName:s,templateName:r})}return e}function H1(n){let t=n.toLowerCase();return t==="svg"?Lx:t==="math"?Vx:null}var qs=class extends Ec{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let t=this.componentDef,e=t.inputTransforms,r=sy(t.inputs,!0);if(e!==null)for(let i of r)e.hasOwnProperty(i.propName)&&(i.transform=e[i.propName]);return r}get outputs(){return sy(this.componentDef.outputs,!1)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=xT(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,r,i){let o=_e(null);try{i=i||this.ngModule;let s=i instanceof Tt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new dh(t,s):t,l=a.get(Br,null);if(l===null)throw new A(407,!1);let c=a.get($1,null),h=a.get(xi,null),p={rendererFactory:l,sanitizer:c,changeDetectionScheduler:h},_=l.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",b=r?FT(_,r,this.componentDef.encapsulation,a):ib(_,g,H1(g)),w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let D=null;b!==null&&(D=j0(b,a,!0));let P=Rp(0,null,null,1,0,null,null,null,null,null,null),F=Np(null,P,null,w,null,null,p,_,a,null,D);F[ut]=b,bp(F);let R=null;try{let $=r?["ng-version","19.1.4"]:IT(this.componentDef.selectors[0]),q=Uo(P,ut,2,"#host",$),[Pe,De]=pb(P,q,[this.componentDef]);hb(P,F,q,Pe,{},De);for(let at of Pe)q.mergedAttrs=Po(q.mergedAttrs,at.hostAttrs);q.mergedAttrs=Po(q.mergedAttrs,$),Sc(q,q.mergedAttrs,!0),b&&(sb(_,b,q),ki(b,F)),e!==void 0&&z1(q,this.ngContentSelectors,e),db(P,F,q),Mp(P,q,F),$c(P,q),R=Rn(q.index,F),F[nn]=R[nn],jp(P,F,null)}catch($){throw R!==null&&_h(R),_h(F),$}finally{wp()}return new Rh(this.componentType,F)}finally{_e(o)}}},Rh=class extends Ph{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e){super(),this._rootLView=e,this._tNode=Zy(e[de],ut),this.location=jo(this._tNode,e),this.instance=Rn(this._tNode.index,e)[nn],this.hostView=this.changeDetectorRef=new Ii(e,void 0,!1),this.componentType=t}setInput(t,e){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let o=this._rootLView;Vp(o[de],o,i,t,e),this.previousInputValues.set(t,e);let s=Rn(this._tNode.index,o);zp(s,1)}}get injector(){return new _i(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function z1(n,t,e){let r=n.projection=[];for(let i=0;i<t.length;i++){let o=e[i];r.push(o!=null&&o.length?Array.from(o):null)}}var gr=(()=>{class n{static __NG_ELEMENT_ID__=q1}return n})();function q1(){let n=yt();return Ob(n,le())}var W1=gr,Pb=class extends W1{_lContainer;_hostTNode;_hostLView;constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return jo(this._hostTNode,this._hostLView)}get injector(){return new _i(this._hostTNode,this._hostLView)}get parentInjector(){let t=Ep(this._hostTNode,this._hostLView);if(p0(t)){let e=hc(t,this._hostLView),r=fc(t),i=e[de].data[r+8];return new _i(i,e)}else return new _i(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=ay(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Ut}createEmbeddedView(t,e,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Nh(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,i,Ah(this._hostTNode,s)),a}createComponent(t,e,r,i,o){let s=t&&!Px(t),a;if(s)a=e;else{let b=e||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let l=s?t:new qs(yi(t)),c=r||this.parentInjector;if(!o&&l.ngModule==null){let w=(s?c:this.parentInjector).get(Tt,null);w&&(o=w)}let h=yi(l.componentType??{}),p=Nh(this._lContainer,h?.id??null),_=p?.firstChild??null,g=l.create(c,i,_,o);return this.insertImpl(g.hostView,a,Ah(this._hostTNode,p)),g}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){let i=t._lView;if(Ux(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=i[ct],c=new Pb(l,l[Mt],l[ct]);c.detach(c.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return Db(s,i,o,r),t.attachToViewContainerRef(),Ay(Qf(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=ay(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),r=Th(this._lContainer,e);r&&(sc(Qf(this._lContainer),e),yb(r[de],r))}detach(t){let e=this._adjustIndex(t,-1),r=Th(this._lContainer,e);return r&&sc(Qf(this._lContainer),e)!=null?new Ii(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function ay(n){return n[cc]}function Qf(n){return n[cc]||(n[cc]=[])}function Ob(n,t){let e,r=t[n.index];return fr(r)?e=r:(e=mb(r,t,null,n),t[n.index]=e,Lp(t,e)),Q1(e,t,n,r),new Pb(e,n,t)}function G1(n,t){let e=n[$e],r=e.createComment(""),i=bn(t,n),o=e.parentNode(i);return wc(e,o,r,e.nextSibling(i),!1),r}var Q1=J1,K1=()=>!1;function Z1(n,t,e){return K1(n,t,e)}function J1(n,t,e,r){if(n[Ci])return;let i;e.type&8?i=On(r):i=G1(t,e),n[Ci]=i}var Fh=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Lh=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let r=t.contentQueries!==null?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)qp(t,e).matches!==null&&this.queries[e].setDirty()}},Vh=class{flags;read;predicate;constructor(t,e,r=null){this.flags=e,this.read=r,typeof t=="string"?this.predicate=oM(t):this.predicate=t}},jh=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){let i=e!==null?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Uh=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,e,Y1(e,o)),this.matchTNodeWithReadOption(t,e,tc(e,t,o,!1,!1))}else r===Ur?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,tc(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ye||i===gr||i===Ur&&e.type&4)this.addMatch(e.index,-2);else{let o=tc(e,t,i,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function Y1(n,t){let e=n.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1]}return null}function X1(n,t){return n.type&11?jo(n,t):n.type&4?Yc(n,t):null}function eM(n,t,e,r){return e===-1?X1(t,n):e===-2?tM(n,t,r):Hs(n,n[de],e,t)}function tM(n,t,e){if(e===Ye)return jo(t,n);if(e===Ur)return Yc(t,n);if(e===gr)return Ob(t,n)}function Rb(n,t,e,r){let i=t[sr].queries[r];if(i.matches===null){let o=n.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let h=o[c];a.push(eM(t,h,s[l+1],e.metadata.read))}}i.matches=a}return i.matches}function Bh(n,t,e,r){let i=n.queries.getByIndex(e),o=i.matches;if(o!==null){let s=Rb(n,t,i,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],h=t[-l];for(let p=Ut;p<h.length;p++){let _=h[p];_[bi]===_[ct]&&Bh(_[de],_,c,r)}if(h[ko]!==null){let p=h[ko];for(let _=0;_<p.length;_++){let g=p[_];Bh(g[de],g,c,r)}}}}}return r}function nM(n,t){return n[sr].queries[t].queryList}function rM(n,t,e){let r=new bc((e&4)===4);return Hx(n,t,r,r.destroy),(t[sr]??=new Lh).queries.push(new Fh(r))-1}function iM(n,t,e){let r=ze();return r.firstCreatePass&&(sM(r,new Vh(n,t,e),-1),(t&2)===2&&(r.staticViewQueries=!0)),rM(r,le(),t)}function oM(n){return n.split(",").map(t=>t.trim())}function sM(n,t,e){n.queries===null&&(n.queries=new jh),n.queries.track(new Uh(t,e))}function qp(n,t){return n.queries.getByIndex(t)}function aM(n,t){let e=n[de],r=qp(e,t);return r.crossesNgTemplate?Bh(e,n,t,[]):Rb(e,n,r,t)}var $r=class{},Ws=class{};var $h=class extends $r{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Dc(this);constructor(t,e,r,i=!0){super(),this.ngModuleType=t,this._parent=e;let o=Py(t);this._bootstrapComponents=tb(o.bootstrap),this._r3Injector=E0(t,e,[{provide:$r,useValue:this},{provide:Oo,useValue:this.componentFactoryResolver},...r],_t(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Hh=class extends Ws{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new $h(this.moduleType,t,[])}};var xc=class extends $r{injector;componentFactoryResolver=new Dc(this);instance=null;constructor(t){super();let e=new js([...t.providers,{provide:$r,useValue:this},{provide:Oo,useValue:this.componentFactoryResolver}],t.parent||dp(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Wp(n,t,e=null){return new xc({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var lM=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=Ly(!1,e.type),i=r.length>0?Wp([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=k({token:n,providedIn:"environment",factory:()=>new n(O(Tt))})}return n})();function X(n){return Qs(()=>{let t=Fb(n),e=B(N({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===k0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(lM).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Fn.Emulated,styles:n.styles||It,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&jn("NgStandalone"),Lb(e);let r=n.dependencies;return e.directiveDefs=cy(r,!1),e.pipeDefs=cy(r,!0),e.id=dM(e),e})}function cM(n){return yi(n)||Oy(n)}function uM(n){return n!==null}function Xe(n){return Qs(()=>({type:n.type,bootstrap:n.bootstrap||It,declarations:n.declarations||It,imports:n.imports||It,exports:n.exports||It,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ly(n,t){if(n==null)return To;let e={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=jr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),t?(e[o]=a!==jr.None?[r,a]:r,t[o]=s):e[o]=r}return e}function we(n){return Qs(()=>{let t=Fb(n);return Lb(t),t})}function Gp(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Fb(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||To,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||It,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ly(n.inputs,t),outputs:ly(n.outputs),debugInfo:null}}function Lb(n){n.features?.forEach(t=>t(n))}function cy(n,t){if(!n)return null;let e=t?Ry:cM;return()=>(typeof n=="function"?n():n).map(r=>e(r)).filter(uM)}function dM(n){let t=0,e=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function fM(n){return Object.getPrototypeOf(n.prototype).constructor}function At(n){let t=fM(n.type),e=!0,r=[n];for(;t;){let i;if(ar(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new A(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);let s=n;s.inputs=Kl(n.inputs),s.inputTransforms=Kl(n.inputTransforms),s.declaredInputs=Kl(n.declaredInputs),s.outputs=Kl(n.outputs);let a=i.hostBindings;a&&_M(n,a);let l=i.viewQuery,c=i.contentQueries;if(l&&mM(n,l),c&&gM(n,c),hM(n,i),YD(n.outputs,i.outputs),ar(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===At&&(e=!1)}}t=Object.getPrototypeOf(t)}pM(r)}function hM(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let r=t.inputs[e];if(r!==void 0&&(n.inputs[e]=r,n.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=t.inputTransforms[i]}}}function pM(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Po(i.hostAttrs,e=Po(e,i.hostAttrs))}}function Kl(n){return n===To?{}:n===It?[]:n}function mM(n,t){let e=n.viewQuery;e?n.viewQuery=(r,i)=>{t(r,i),e(r,i)}:n.viewQuery=t}function gM(n,t){let e=n.contentQueries;e?n.contentQueries=(r,i,o)=>{t(r,i,o),e(r,i,o)}:n.contentQueries=t}function _M(n,t){let e=n.hostBindings;e?n.hostBindings=(r,i)=>{t(r,i),e(r,i)}:n.hostBindings=t}function Ni(n){let t=n.inputConfig,e={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r];Array.isArray(i)&&i[3]&&(e[r]=i[3])}n.inputTransforms=e}function Vb(n){return Qp(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function vM(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),r;for(;!(r=e.next()).done;)t(r.value)}}function Qp(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Kp(n,t,e){return n[t]=e}function yM(n,t){return n[t]}function cr(n,t,e){let r=n[t];return Object.is(r,e)?!1:(n[t]=e,!0)}function jb(n,t,e,r){let i=cr(n,t,e);return cr(n,t+1,r)||i}function bM(n,t,e,r,i,o,s,a,l){let c=t.consts,h=Uo(t,n,4,s||null,a||null);Fp(t,e,h,No(c,l)),$c(t,h);let p=h.tView=Rp(2,h,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,h),p.queries=t.queries.embeddedTView(h)),h}function Ub(n,t,e,r,i,o,s,a,l,c){let h=e+ut,p=t.firstCreatePass?bM(h,t,n,r,i,o,s,a,l):t.data[h];Ai(p,!1);let _=wM(t,n,p,e);Uc()&&Zc(t,n,_,p),ki(_,n);let g=mb(_,n,_,p);return n[h]=g,Lp(n,g),Z1(g,p,n),Lc(p)&&Pp(t,n,p),l!=null&&Op(n,p,c),p}function M(n,t,e,r,i,o,s,a){let l=le(),c=ze(),h=No(c.consts,o);return Ub(l,c,n,t,e,r,i,h,s,a),M}var wM=CM;function CM(n,t,e,r){return Bc(!0),t[$e].createComment("")}var Zp=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Bb=new V("");function Pi(n){return!!n&&typeof n.then=="function"}function $b(n){return!!n&&typeof n.subscribe=="function"}var Xc=new V("");var Hb=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=I(Xc,{optional:!0})??[];injector=I(vt);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let o=$t(this.injector,i);if(Pi(o))e.push(o);else if($b(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zb=(()=>{class n{static \u0275prov=k({token:n,providedIn:"root",factory:()=>new Ic})}return n})(),Ic=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let e=t.zone,r=this.queues.get(e);r.has(t)&&(r.delete(t),this.queuedEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}},eu=new V("");function EM(){rv(()=>{throw new A(600,!1)})}function SM(n){return n.isBoundToModule}var DM=10;function xM(n,t,e){try{let r=e();return Pi(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}var ur=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=I(AI);afterRenderManager=I(zI);zonelessEnabled=I(zc);rootEffectScheduler=I(zb);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Re;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=I(pr).hasPendingTasks.pipe(G(e=>!e));constructor(){I(Gc,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=I(Tt);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){let i=e instanceof Ec;if(!this._injector.get(Hb).done){let _=!i&&Fy(e),g=!1;throw new A(405,g)}let s;i?s=e:s=this._injector.get(Oo).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=SM(s)?void 0:this._injector.get($r),l=r||s.selector,c=s.create(vt.NULL,[],l,a),h=c.location.nativeElement,p=c.injector.get(Bb,null);return p?.registerApplication(h),c.onDestroy(()=>{this.detachView(c.hostView),nc(this.components,c),p?.unregisterApplication(h)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(V0.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new A(101,!1);let e=_e(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,_e(e),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Br,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let e=0;for(;this.dirtyFlags!==0&&e++<DM;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)IM(r,i,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Vc(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;nc(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(eu,[]).forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>nc(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new A(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nc(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function IM(n,t,e,r){if(!e&&!Vc(n))return;Mb(n,t,e&&!r?0:1)}function qr(n,t,e,r){let i=le(),o=jc();if(cr(i,o,t)){let s=ze(),a=Cp();t1(a,i,n,t,e,r)}return qr}function TM(n,t,e,r){return cr(n,jc(),e)?t+Io(e)+r:sn}function MM(n,t,e,r,i,o){let s=Jx(),a=jb(n,s,e,i);return vp(2),a?t+Io(e)+r+Io(i)+o:sn}function Zl(n,t){return n<<17|t<<2}function Ti(n){return n>>17&32767}function AM(n){return(n&2)==2}function kM(n,t){return n&131071|t<<17}function zh(n){return n|2}function Ro(n){return(n&131068)>>2}function Kf(n,t){return n&-131069|t<<2}function NM(n){return(n&1)===1}function qh(n){return n|1}function PM(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Ti(s),l=Ro(s);n[r]=e;let c=!1,h;if(Array.isArray(e)){let p=e;h=p[1],(h===null||Ks(p,h)>0)&&(c=!0)}else h=e;if(i)if(l!==0){let _=Ti(n[a+1]);n[r+1]=Zl(_,a),_!==0&&(n[_+1]=Kf(n[_+1],r)),n[a+1]=kM(n[a+1],r)}else n[r+1]=Zl(a,0),a!==0&&(n[a+1]=Kf(n[a+1],r)),a=r;else n[r+1]=Zl(l,0),a===0?a=r:n[l+1]=Kf(n[l+1],r),l=r;c&&(n[r+1]=zh(n[r+1])),uy(n,h,r,!0),uy(n,h,r,!1),OM(t,h,n,r,o),s=Zl(a,l),o?t.classBindings=s:t.styleBindings=s}function OM(n,t,e,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&Ks(o,t)>=0&&(e[r+1]=qh(e[r+1]))}function uy(n,t,e,r){let i=n[e+1],o=t===null,s=r?Ti(i):Ro(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],c=n[s+1];RM(l,t)&&(a=!0,n[s+1]=r?qh(c):zh(c)),s=r?Ti(c):Ro(c)}a&&(n[e+1]=r?zh(i):qh(i))}function RM(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?Ks(n,t)>=0:!1}var vn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function FM(n){return n.substring(vn.key,vn.keyEnd)}function LM(n){return VM(n),qb(n,Wb(n,0,vn.textEnd))}function qb(n,t){let e=vn.textEnd;return e===t?-1:(t=vn.keyEnd=jM(n,vn.key=t,e),Wb(n,t,e))}function VM(n){vn.key=0,vn.keyEnd=0,vn.value=0,vn.valueEnd=0,vn.textEnd=n.length}function Wb(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function jM(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function y(n,t,e){let r=le(),i=jc();if(cr(r,i,t)){let o=ze(),s=Cp();fb(o,s,r,n,t,r[$e],e,!1)}return y}function Wh(n,t,e,r,i){let o=t.inputs,s=i?"class":"style";Vp(n,e,o[s],s,r)}function Bn(n,t,e){return Qb(n,t,e,!1),Bn}function ne(n,t){return Qb(n,t,null,!0),ne}function Gb(n){BM(GM,UM,n,!0)}function UM(n,t){for(let e=LM(t);e>=0;e=qb(t,e))cp(n,FM(t),!0)}function Qb(n,t,e,r){let i=le(),o=ze(),s=vp(2);if(o.firstUpdatePass&&Zb(o,n,s,r),t!==sn&&cr(i,s,t)){let a=o.data[Hr()];Jb(o,a,i,i[$e],n,i[s+1]=KM(t,e),r,s)}}function BM(n,t,e,r){let i=ze(),o=vp(2);i.firstUpdatePass&&Zb(i,null,o,r);let s=le();if(e!==sn&&cr(s,o,e)){let a=i.data[Hr()];if(Yb(a,r)&&!Kb(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=eh(l,e||"")),Wh(i,a,s,e,r)}else QM(i,a,s,s[$e],s[o+1],s[o+1]=WM(n,t,e),r,o)}}function Kb(n,t){return t>=n.expandoStartIndex}function Zb(n,t,e,r){let i=n.data;if(i[e+1]===null){let o=i[Hr()],s=Kb(n,e);Yb(o,r)&&t===null&&!s&&(t=!1),t=$M(i,o,t,r),PM(i,o,t,e,s,r)}}function $M(n,t,e,r){let i=nI(n),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(e=Zf(null,n,t,e,r),e=Gs(e,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==i)if(e=Zf(i,n,t,e,r),o===null){let l=HM(n,t,r);l!==void 0&&Array.isArray(l)&&(l=Zf(null,n,t,l[1],r),l=Gs(l,t.attrs,r),zM(n,t,r,l))}else o=qM(n,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),e}function HM(n,t,e){let r=e?t.classBindings:t.styleBindings;if(Ro(r)!==0)return n[Ti(r)]}function zM(n,t,e,r){let i=e?t.classBindings:t.styleBindings;n[Ti(i)]=r}function qM(n,t,e){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Gs(r,s,e)}return Gs(r,t.attrs,e)}function Zf(n,t,e,r,i){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],r=Gs(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),r}function Gs(n,t,e){let r=e?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),cp(n,s,e?!0:t[++o]))}return n===void 0?null:n}function WM(n,t,e){if(e==null||e==="")return It;let r=[],i=wn(e);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function GM(n,t,e){let r=String(t);r!==""&&!r.includes(" ")&&cp(n,r,e)}function QM(n,t,e,r,i,o,s,a){i===sn&&(i=It);let l=0,c=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let _=l<i.length?i[l+1]:void 0,g=c<o.length?o[c+1]:void 0,b=null,w;h===p?(l+=2,c+=2,_!==g&&(b=p,w=g)):p===null||h!==null&&h<p?(l+=2,b=h):(c+=2,b=p,w=g),b!==null&&Jb(n,t,e,r,b,w,s,a),h=l<i.length?i[l]:null,p=c<o.length?o[c]:null}}function Jb(n,t,e,r,i,o,s,a){if(!(t.type&3))return;let l=n.data,c=l[a+1],h=NM(c)?dy(l,t,e,i,Ro(c),s):void 0;if(!Tc(h)){Tc(o)||AM(c)&&(o=dy(l,null,e,i,a,s));let p=Ky(Hr(),e);b1(r,s,p,i,o)}}function dy(n,t,e,r,i,o){let s=t===null,a;for(;i>0;){let l=n[i],c=Array.isArray(l),h=c?l[1]:l,p=h===null,_=e[i+1];_===sn&&(_=p?It:void 0);let g=p?$f(_,r):h===r?_:void 0;if(c&&!Tc(g)&&(g=$f(l,r)),Tc(g)&&(a=g,s))return a;let b=n[i+1];i=s?Ti(b):Ro(b)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=$f(l,r))}return a}function Tc(n){return n!==void 0}function KM(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=_t(wn(n)))),n}function Yb(n,t){return(n.flags&(t?8:16))!==0}function ZM(n,t,e,r,i,o){let s=t.consts,a=No(s,i),l=Uo(t,n,2,r,a);return Fp(t,e,l,No(s,o)),l.attrs!==null&&Sc(l,l.attrs,!1),l.mergedAttrs!==null&&Sc(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function d(n,t,e,r){let i=le(),o=ze(),s=ut+n,a=i[$e],l=o.firstCreatePass?ZM(s,o,i,t,e,r):o.data[s],c=JM(o,i,l,a,t,n);i[s]=c;let h=Lc(l);return Ai(l,!0),sb(a,c,l),!Bp(l)&&Uc()&&Zc(o,i,c,l),zx()===0&&ki(c,i),qx(),h&&(Pp(o,i,l),Mp(o,l,i)),r!==null&&Op(i,l),d}function u(){let n=yt();gp()?_p():(n=n.parent,Ai(n,!1));let t=n;Gx(t)&&Qx(),Wx();let e=ze();return e.firstCreatePass&&($c(e,n),fp(n)&&e.queries.elementEnd(n)),t.classesWithoutHost!=null&&cI(t)&&Wh(e,t,le(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&uI(t)&&Wh(e,t,le(),t.stylesWithoutHost,!1),u}function L(n,t,e,r){return d(n,t,e,r),u(),L}var JM=(n,t,e,r,i,o)=>(Bc(!0),ib(r,i,oI()));function YM(n,t,e,r,i){let o=t.consts,s=No(o,r),a=Uo(t,n,8,"ng-container",s);s!==null&&Sc(a,s,!0);let l=No(o,i);return Fp(t,e,a,l),t.queries!==null&&t.queries.elementStart(t,a),a}function $n(n,t,e){let r=le(),i=ze(),o=n+ut,s=i.firstCreatePass?YM(o,i,r,t,e):i.data[o];Ai(s,!0);let a=XM(i,r,s,n);return r[o]=a,Uc()&&Zc(i,r,a,s),ki(a,r),Lc(s)&&(Pp(i,r,s),Mp(i,s,r)),e!=null&&Op(r,s),$n}function Hn(){let n=yt(),t=ze();return gp()?_p():(n=n.parent,Ai(n,!1)),t.firstCreatePass&&($c(t,n),fp(n)&&t.queries.elementEnd(n)),Hn}var XM=(n,t,e,r)=>(Bc(!0),AT(t[$e],""));function ee(){return le()}var gi=void 0;function eA(n){let t=n,e=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&r===0?1:5}var tA=["en",[["a","p"],["AM","PM"],gi],[["AM","PM"],gi,gi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],gi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],gi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",gi,"{1} 'at' {0}",gi],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",eA],Jf={};function Ht(n){let t=nA(n),e=fy(t);if(e)return e;let r=t.split("-")[0];if(e=fy(r),e)return e;if(r==="en")return tA;throw new A(701,!1)}function fy(n){return n in Jf||(Jf[n]=ir.ng&&ir.ng.common&&ir.ng.common.locales&&ir.ng.common.locales[n]),Jf[n]}var He=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(He||{});function nA(n){return n.toLowerCase().replace(/_/g,"-")}var Mc="en-US";var rA=Mc;function iA(n){typeof n=="string"&&(rA=n.toLowerCase().replace(/_/g,"-"))}var oA=(n,t,e)=>{};function C(n,t,e,r){let i=le(),o=ze(),s=yt();return Xb(o,i,i[$e],s,n,t,r),C}function sA(n,t,e,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===e&&i[o+1]===r){let a=t[lc],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function Xb(n,t,e,r,i,o,s){let a=Lc(r),c=n.firstCreatePass&&e0(n),h=t[nn],p=Xy(t),_=!0;if(r.type&3||s){let w=bn(r,t),D=s?s(w):w,P=p.length,F=s?$=>s(On($[r.index])):r.index,R=null;if(!s&&a&&(R=sA(n,t,i,r.index)),R!==null){let $=R.__ngLastListenerFn__||R;$.__ngNextListenerFn__=o,R.__ngLastListenerFn__=o,_=!1}else{o=py(r,t,h,o),oA(w,i,o);let $=e.listen(D,i,o);p.push(o,$),c&&c.push(i,F,P,P+1)}}else o=py(r,t,h,o);let g=r.outputs,b;if(_&&g!==null&&(b=g[i])){let w=b.length;if(w)for(let D=0;D<w;D+=2){let P=b[D],F=b[D+1],q=t[P][F].subscribe(o),Pe=p.length;p.push(o,q),c&&c.push(i,r.index,Pe,-(Pe+1))}}}function hy(n,t,e,r){let i=_e(null);try{return tn(6,t,e),e(r)!==!1}catch(o){return gb(n,o),!1}finally{tn(7,t,e),_e(i)}}function py(n,t,e,r){return function i(o){if(o===Function)return r;let s=Mi(n)?Rn(n.index,t):t;zp(s,5);let a=hy(t,e,r,o),l=i.__ngNextListenerFn__;for(;l;)a=hy(t,e,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function v(n=1){return iI(n)}function aA(n,t){let e=null,r=wT(n);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){e=i;continue}if(r===null?rb(n,o,!0):ST(r,o))return i}return e}function Jp(n){let t=le()[rn][Mt];if(!t.projection){let e=n?n.length:1,r=t.projection=yx(e,null),i=r.slice(),o=t.child;for(;o!==null;){if(o.type!==128){let s=n?aA(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function Yp(n,t=0,e,r,i,o){let s=le(),a=ze(),l=r?n+1:null;l!==null&&Ub(s,a,l,r,i,o,null,e);let c=Uo(a,ut+n,16,null,e||null);c.projection===null&&(c.projection=t),_p();let p=!s[Us]||n0();s[rn][Mt].projection[c.projection]===null&&l!==null?lA(s,a,l):p&&!Bp(c)&&v1(a,s,c)}function lA(n,t,e){let r=ut+e,i=t.data[r],o=n[r],s=Nh(o,i.tView.ssrId),a=Sb(n,i,void 0,{dehydratedView:s});Db(o,a,0,Ah(i,s))}function Bo(n,t,e){iM(n,t,e)}function Oi(n){let t=le(),e=ze(),r=o0();yp(r+1);let i=qp(e,r);if(n.dirty&&jx(t)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=aM(t,r);n.reset(o,PI),n.notifyOnChanges()}return!0}return!1}function Ri(){return nM(le(),o0())}function cA(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}function bt(n){let t=Zx();return hp(t,ut+n)}function f(n,t=""){let e=le(),r=ze(),i=n+ut,o=r.firstCreatePass?Uo(r,i,1,t,null):r.data[i],s=uA(r,e,o,t,n);e[i]=s,Uc()&&Zc(r,e,s,o),Ai(o,!1)}var uA=(n,t,e,r,i)=>(Bc(!0),TT(t[$e],r));function x(n){return z("",n,""),x}function z(n,t,e){let r=le(),i=TM(r,n,t,e);return i!==sn&&ew(r,Hr(),i),z}function Fi(n,t,e,r,i){let o=le(),s=MM(o,n,t,e,r,i);return s!==sn&&ew(o,Hr(),s),Fi}function ew(n,t,e){let r=Ky(t,n);MT(n[$e],r,e)}function Q(n,t,e){M0(t)&&(t=t());let r=le(),i=jc();if(cr(r,i,t)){let o=ze(),s=Cp();fb(o,s,r,n,t,r[$e],e,!1)}return Q}function Y(n,t){let e=M0(n);return e&&n.set(t),e}function K(n,t){let e=le(),r=ze(),i=yt();return Xb(r,e,e[$e],i,n,t),K}function dA(n,t,e){let r=ze();if(r.firstCreatePass){let i=ar(n);Gh(e,r.data,r.blueprint,i,!0),Gh(t,r.data,r.blueprint,i,!1)}}function Gh(n,t,e,r,i){if(n=gt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Gh(n[o],t,e,r,i);else{let o=ze(),s=le(),a=yt(),l=Ao(n)?n:gt(n.provide),c=Uy(n),h=a.providerIndexes&1048575,p=a.directiveStart,_=a.providerIndexes>>20;if(Ao(n)||!n.multi){let g=new Di(c,i,T),b=Xf(l,t,i?h:h+_,p);b===-1?(hh(mc(a,s),o,l),Yf(o,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(g),s.push(g)):(e[b]=g,s[b]=g)}else{let g=Xf(l,t,h+_,p),b=Xf(l,t,h,h+_),w=g>=0&&e[g],D=b>=0&&e[b];if(i&&!D||!i&&!w){hh(mc(a,s),o,l);let P=pA(i?hA:fA,e.length,i,r,c);!i&&D&&(e[b].providerFactory=P),Yf(o,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(P),s.push(P)}else{let P=tw(e[i?b:g],c,!i&&r);Yf(o,n,g>-1?g:b,P)}!i&&r&&D&&e[b].componentProviders++}}}function Yf(n,t,e,r){let i=Ao(t),o=xx(t);if(i||o){let l=(o?gt(t.useClass):t).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){let h=c.indexOf(e);h===-1?c.push(e,[r,l]):c[h+1].push(r,l)}else c.push(e,l)}}}function tw(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Xf(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function fA(n,t,e,r){return Qh(this.multi,[])}function hA(n,t,e,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Hs(e,e[de],this.providerFactory.index,r);o=a.slice(0,s),Qh(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Qh(i,o);return o}function Qh(n,t){for(let e=0;e<n.length;e++){let r=n[e];t.push(r())}return t}function pA(n,t,e,r,i){let o=new Di(n,e,T);return o.multi=[],o.index=t,o.componentProviders=0,tw(o,i,r&&!e),o}function an(n,t=[]){return e=>{e.providersResolver=(r,i)=>dA(r,i?i(n):n,t)}}function nw(n,t,e){let r=Ys()+n,i=le();return i[r]===sn?Kp(i,r,e?t.call(e):t()):yM(i,r)}function rw(n,t,e,r){return ow(le(),Ys(),n,t,e,r)}function En(n,t,e,r,i){return sw(le(),Ys(),n,t,e,r,i)}function iw(n,t){let e=n[t];return e===sn?void 0:e}function ow(n,t,e,r,i,o){let s=t+e;return cr(n,s,i)?Kp(n,s+1,o?r.call(o,i):r(i)):iw(n,s+1)}function sw(n,t,e,r,i,o,s){let a=t+e;return jb(n,a,i,o)?Kp(n,a+2,s?r.call(s,i,o):r(i,o)):iw(n,a+2)}function ht(n,t){let e=ze(),r,i=n+ut;e.firstCreatePass?(r=mA(t,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks??=[]).push(i,r.onDestroy)):r=e.data[i];let o=r.factory||(r.factory=vi(r.type,!0)),s,a=xt(T);try{let l=pc(!1),c=o();return pc(l),cA(e,le(),i,c),c}finally{xt(a)}}function mA(n,t){if(t)for(let e=t.length-1;e>=0;e--){let r=t[e];if(n===r.name)return r}}function aw(n,t,e){let r=n+ut,i=le(),o=hp(i,r);return lw(i,r)?ow(i,Ys(),t,o.transform,e,o):o.transform(e)}function kt(n,t,e,r){let i=n+ut,o=le(),s=hp(o,i);return lw(o,i)?sw(o,Ys(),t,s.transform,e,r,s):s.transform(e,r)}function lw(n,t){return n[de].data[t].pure}function zt(n,t){return Yc(n,t)}var Kh=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},Xp=(()=>{class n{compileModuleSync(e){return new Hh(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),i=Py(e),o=tb(i.declarations).reduce((s,a)=>{let l=yi(a);return l&&s.push(new qs(l)),s},[]);return new Kh(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gA=(()=>{class n{zone=I(Te);changeDetectionScheduler=I(xi);applicationRef=I(ur);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _A({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new Te(B(N({},vA()),{scheduleInRootZone:e})),[{provide:Te,useFactory:n},{provide:Mo,multi:!0,useFactory:()=>{let r=I(gA,{optional:!0});return()=>r.initialize()}},{provide:Mo,multi:!0,useFactory:()=>{let r=I(yA);return()=>{r.initialize()}}},t===!0?{provide:D0,useValue:!0}:[],{provide:Sp,useValue:e??S0}]}function vA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var yA=(()=>{class n{subscription=new Oe;initialized=!1;zone=I(Te);pendingTasks=I(pr);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Te.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Te.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var cw=(()=>{class n{appRef=I(ur);taskService=I(pr);ngZone=I(Te);zonelessEnabled=I(zc);tracing=I(Gc,{optional:!0});disableScheduling=I(D0,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Oe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(vc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(I(Sp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof yc||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let r=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?zv:x0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(vc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(e),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,zv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uw(){return jn("NgZoneless"),Fo([{provide:xi,useExisting:cw},{provide:Te,useClass:yc},{provide:zc,useValue:!0},{provide:Sp,useValue:!1},[]])}function bA(){return typeof $localize<"u"&&$localize.locale||Mc}var $o=new V("",{providedIn:"root",factory:()=>I($o,ae.Optional|ae.SkipSelf)||bA()});var Zh=new V(""),wA=new V("");function Os(n){return!n.moduleRef}function CA(n){let t=Os(n)?n.r3Injector:n.moduleRef.injector,e=t.get(Te);return e.run(()=>{Os(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=t.get(Bt,null),i;if(e.runOutsideAngular(()=>{i=e.onError.subscribe({next:o=>{r.handleError(o)}})}),Os(n)){let o=()=>t.destroy(),s=n.platformInjector.get(Zh);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Zh);s.add(o),n.moduleRef.onDestroy(()=>{nc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return xM(r,e,()=>{let o=t.get(Hb);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get($o,Mc);if(iA(s||Mc),!t.get(wA,!0))return Os(n)?t.get(ur):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Os(n)){let l=t.get(ur);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return EA(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function EA(n,t){let e=n.injector.get(ur);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>e.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new A(-403,!1);t.push(n)}var rc=null;function SA(n=[],t){return vt.create({name:t,providers:[{provide:Rc,useValue:"platform"},{provide:Zh,useValue:new Set([()=>rc=null])},...n]})}function DA(n=[]){if(rc)return rc;let t=SA(n);return rc=t,EM(),xA(t),t}function xA(n){let t=n.get(Tp,null);$t(n,()=>{t?.forEach(e=>e())})}var ke=(()=>{class n{static __NG_ELEMENT_ID__=IA}return n})();function IA(n){return TA(yt(),le(),(n&16)===16)}function TA(n,t,e){if(Mi(n)&&!e){let r=Rn(n.index,t);return new Ii(r,r)}else if(n.type&175){let r=t[rn];return new Ii(r,t)}return null}var Jh=class{constructor(){}supports(t){return Vb(t)}create(t){return new Yh(t)}},MA=(n,t)=>t,Yh=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||MA}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){let s=!r||e&&e.currentIndex<my(r,i,o)?e:r,a=my(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,s.previousIndex==null)i++;else{o||(o=[]);let c=a-i,h=l-i;if(c!=h){for(let _=0;_<c;_++){let g=_<o.length?o[_]:o[_]=0,b=g+_;h<=b&&b<c&&(o[_]=g+1)}let p=s.previousIndex;o[p]=h-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!Vb(t))throw new A(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),r=!0):(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else i=0,vM(t,a=>{s=this._trackByFn(i,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,i),r=!0):(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):t=this._addAfter(new Xh(e,r),o,i)),t}_verifyReinsertion(t,e,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){let i=e===null?this._itHead:e._next;return t._next=i,t._prev=e,i===null?this._itTail=t:i._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Ac),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,r=t._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ac),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Xh=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},ep=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let e=t._prevDup,r=t._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},Ac=class{map=new Map;put(t){let e=t.trackById,r=this.map.get(e);r||(r=new ep,this.map.set(e,r)),r.add(t)}get(t,e){let r=t,i=this.map.get(r);return i?i.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function my(n,t,e){let r=n.previousIndex;if(r===null)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}var tp=class{constructor(){}supports(t){return t instanceof Map||Qp(t)}create(){return new np}},np=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||Qp(t)))throw new A(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(i,r);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let i=this._records.get(t);this._maybeAddToChanges(i,e);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new rp(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}},rp=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(t){this.key=t}};function gy(){return new em([new Jh])}var em=(()=>{class n{factories;static \u0275prov=k({token:n,providedIn:"root",factory:gy});constructor(e){this.factories=e}static create(e,r){if(r!=null){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||gy()),deps:[[n,new ap,new Oc]]}}find(e){let r=this.factories.find(i=>i.supports(e));if(r!=null)return r;throw new A(901,!1)}}return n})();function _y(){return new tm([new tp])}var tm=(()=>{class n{static \u0275prov=k({token:n,providedIn:"root",factory:_y});factories;constructor(e){this.factories=e}static create(e,r){if(r){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||_y()),deps:[[n,new ap,new Oc]]}}find(e){let r=this.factories.find(i=>i.supports(e));if(r)return r;throw new A(901,!1)}}return n})();function dw(n){try{let{rootComponent:t,appProviders:e,platformProviders:r}=n,i=DA(r),o=[_A({}),{provide:xi,useExisting:cw},...e||[]],s=new xc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return CA({r3Injector:s.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}}function Sn(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function et(n,t){jn("NgSignals");let e=ev(n);return t?.equal&&(e[Et].equal=t.equal),e}function _r(n){let t=_e(null);try{return n()}finally{_e(t)}}var fw=(()=>{class n{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=AA}return n})();function AA(){return new fw(le(),yt())}var kA=!1,NA=(()=>{class n extends Ic{pendingTasks=I(pr);taskId=null;schedule(e){super.schedule(e),this.taskId===null&&(this.taskId=this.pendingTasks.add(),queueMicrotask(()=>this.flush()))}flush(){try{super.flush()}finally{this.taskId!==null&&(this.pendingTasks.remove(this.taskId),this.taskId=null)}}static \u0275prov=k({token:n,providedIn:"root",factory:()=>new n})}return n})(),ip=class{scheduler;effectFn;zone;injector;unregisterOnDestroy;watcher;constructor(t,e,r,i,o,s){this.scheduler=t,this.effectFn=e,this.zone=r,this.injector=o,this.watcher=sv(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(t){try{this.effectFn(t)}catch(e){this.injector.get(Bt,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.schedule(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function PA(){}function OA(n,t){jn("NgSignals"),!t?.injector&&$y(PA);let e=t?.injector??I(vt),r=t?.manualCleanup!==!0?e.get(Vo):null,i=new ip(e.get(NA),n,typeof Zone>"u"?null:Zone.current,r,e,t?.allowSignalWrites??!1),o=e.get(ke,null,{optional:!0});return!o||!(o._lView[te]&8)?i.watcher.notify():(o._lView[Yl]??=[]).push(i.watcher.notify),i}var RA=kA;var op=class{[Et];constructor(t){this[Et]=t}destroy(){this[Et].destroy()}};function Wr(n,t){if(RA)return OA(n,t);jn("NgSignals"),!t?.injector&&$y(Wr);let e=t?.injector??I(vt),r=t?.manualCleanup!==!0?e.get(Vo):null,i,o=e.get(fw,null,{optional:!0}),s=e.get(xi);return o!==null&&!t?.forceRoot?(i=VA(o.view,s,n),r instanceof _c&&r._lView===o.view&&(r=null)):i=jA(n,e.get(zb),s),i.injector=e,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new op(i)}var hw=B(N({},di),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:zs,run(){if(this.dirty=!1,this.hasRun&&!Ts(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),t=uo(this),e=dc(!1);try{this.maybeCleanup(),this.fn(n)}finally{dc(e),Is(this,t)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),FA=B(N({},hw),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(13)},destroy(){fo(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),LA=B(N({},hw),{consumerMarkedDirty(){this.view[te]|=8192,Js(this.view),this.notifier.notify(14)},destroy(){fo(this),this.onDestroyFn(),this.maybeCleanup(),this.view[wi]?.delete(this)}});function VA(n,t,e){let r=Object.create(LA);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=t,r.fn=e,n[wi]??=new Set,n[wi].add(r),r.consumerMarkedDirty(r),r}function jA(n,t,e){let r=Object.create(FA);return r.fn=n,r.scheduler=t,r.notifier=e,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(13),r}var ww=null;function br(){return ww}function Cw(n){ww??=n}var cu=class{};var Fe=new V(""),Ew=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(UA),providedIn:"platform"})}return n})();var UA=(()=>{class n extends Ew{_location;_history;_doc=I(Fe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return br().getBaseHref(this._doc)}onPopState(e){let r=br().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=br().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Sw(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function pw(n){let t=n.match(/#|\?|$/),e=t&&t.index||n.length,r=e-(n[e-1]==="/"?1:0);return n.slice(0,r)+n.slice(e)}function Li(n){return n&&n[0]!=="?"?"?"+n:n}var zo=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(Dw),providedIn:"root"})}return n})(),BA=new V(""),Dw=(()=>{class n extends zo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??I(Fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Sw(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+Li(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+Li(o));this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+Li(o));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(O(Ew),O(BA,8))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var na=(()=>{class n{_subject=new Re;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=zA(pw(mw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Li(r))}normalize(e){return n.stripTrailingSlash(HA(this._basePath,mw(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Li(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Li(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Li;static joinWithSlash=Sw;static stripTrailingSlash=pw;static \u0275fac=function(r){return new(r||n)(O(zo))};static \u0275prov=k({token:n,factory:()=>$A(),providedIn:"root"})}return n})();function $A(){return new na(O(zo))}function HA(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function mw(n){return n.replace(/\/index.html$/,"")}function zA(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var xw=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(xw||{});var wt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(wt||{}),Ie=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ie||{}),qt=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(qt||{}),Wt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function qA(n){return Ht(n)[He.LocaleId]}function WA(n,t,e){let r=Ht(n),i=[r[He.DayPeriodsFormat],r[He.DayPeriodsStandalone]],o=ln(i,t);return ln(o,e)}function GA(n,t,e){let r=Ht(n),i=[r[He.DaysFormat],r[He.DaysStandalone]],o=ln(i,t);return ln(o,e)}function QA(n,t,e){let r=Ht(n),i=[r[He.MonthsFormat],r[He.MonthsStandalone]],o=ln(i,t);return ln(o,e)}function KA(n,t){let r=Ht(n)[He.Eras];return ln(r,t)}function tu(n,t){let e=Ht(n);return ln(e[He.DateFormat],t)}function nu(n,t){let e=Ht(n);return ln(e[He.TimeFormat],t)}function ru(n,t){let r=Ht(n)[He.DateTimeFormat];return ln(r,t)}function yr(n,t){let e=Ht(n),r=e[He.NumberSymbols][t];if(typeof r>"u"){if(t===Wt.CurrencyDecimal)return e[He.NumberSymbols][Wt.Decimal];if(t===Wt.CurrencyGroup)return e[He.NumberSymbols][Wt.Group]}return r}function ZA(n,t){return Ht(n)[He.NumberFormats][t]}function Iw(n){if(!n[He.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[He.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function JA(n){let t=Ht(n);return Iw(t),(t[He.ExtraData][2]||[]).map(r=>typeof r=="string"?nm(r):[nm(r[0]),nm(r[1])])}function YA(n,t,e){let r=Ht(n);Iw(r);let i=[r[He.ExtraData][0],r[He.ExtraData][1]],o=ln(i,t)||[];return ln(o,e)||[]}function ln(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function nm(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var XA=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,iu={},ek=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function tk(n,t,e,r){let i=uk(n);t=vr(e,t)||t;let s=[],a;for(;t;)if(a=ek.exec(t),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;t=h}else{s.push(t);break}let l=i.getTimezoneOffset();r&&(l=Mw(r,l),i=ck(i,r,!0));let c="";return s.forEach(h=>{let p=ak(h);c+=p?p(i,e,l):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function uu(n,t,e){let r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function vr(n,t){let e=qA(n);if(iu[e]??={},iu[e][t])return iu[e][t];let r="";switch(t){case"shortDate":r=tu(n,qt.Short);break;case"mediumDate":r=tu(n,qt.Medium);break;case"longDate":r=tu(n,qt.Long);break;case"fullDate":r=tu(n,qt.Full);break;case"shortTime":r=nu(n,qt.Short);break;case"mediumTime":r=nu(n,qt.Medium);break;case"longTime":r=nu(n,qt.Long);break;case"fullTime":r=nu(n,qt.Full);break;case"short":let i=vr(n,"shortTime"),o=vr(n,"shortDate");r=ou(ru(n,qt.Short),[i,o]);break;case"medium":let s=vr(n,"mediumTime"),a=vr(n,"mediumDate");r=ou(ru(n,qt.Medium),[s,a]);break;case"long":let l=vr(n,"longTime"),c=vr(n,"longDate");r=ou(ru(n,qt.Long),[l,c]);break;case"full":let h=vr(n,"fullTime"),p=vr(n,"fullDate");r=ou(ru(n,qt.Full),[h,p]);break}return r&&(iu[e][t]=r),r}function ou(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return t!=null&&r in t?t[r]:e})),n}function Dn(n,t,e="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function nk(n,t){return Dn(n,3).substring(0,t)}function qe(n,t,e=0,r=!1,i=!1){return function(o,s){let a=rk(n,o);if((e>0||a>-e)&&(a+=e),n===3)a===0&&e===-12&&(a=12);else if(n===6)return nk(a,t);let l=yr(s,Wt.MinusSign);return Dn(a,t,l,r,i)}}function rk(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Me(n,t,e=wt.Format,r=!1){return function(i,o){return ik(i,o,n,t,e,r)}}function ik(n,t,e,r,i,o){switch(e){case 2:return QA(t,i,r)[n.getMonth()];case 1:return GA(t,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let c=JA(t),h=YA(t,i,r),p=c.findIndex(_=>{if(Array.isArray(_)){let[g,b]=_,w=s>=g.hours&&a>=g.minutes,D=s<b.hours||s===b.hours&&a<b.minutes;if(g.hours<b.hours){if(w&&D)return!0}else if(w||D)return!0}else if(_.hours===s&&_.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return WA(t,i,r)[s<12?0:1];case 3:return KA(t,r)[n.getFullYear()<=0?0:1];default:let l=e;throw new Error(`unexpected translation type ${l}`)}}function su(n){return function(t,e,r){let i=-1*r,o=yr(e,Wt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Dn(s,2,o)+Dn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Dn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Dn(s,2,o)+":"+Dn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Dn(s,2,o)+":"+Dn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var ok=0,lu=4;function sk(n){let t=uu(n,ok,1).getDay();return uu(n,0,1+(t<=lu?lu:lu+7)-t)}function Tw(n){let t=n.getDay(),e=t===0?-3:lu-t;return uu(n.getFullYear(),n.getMonth(),n.getDate()+e)}function rm(n,t=!1){return function(e,r){let i;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();i=1+Math.floor((s+o)/7)}else{let o=Tw(e),s=sk(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Dn(i,n,yr(r,Wt.MinusSign))}}function au(n,t=!1){return function(e,r){let o=Tw(e).getFullYear();return Dn(o,n,yr(r,Wt.MinusSign),t)}}var im={};function ak(n){if(im[n])return im[n];let t;switch(n){case"G":case"GG":case"GGG":t=Me(3,Ie.Abbreviated);break;case"GGGG":t=Me(3,Ie.Wide);break;case"GGGGG":t=Me(3,Ie.Narrow);break;case"y":t=qe(0,1,0,!1,!0);break;case"yy":t=qe(0,2,0,!0,!0);break;case"yyy":t=qe(0,3,0,!1,!0);break;case"yyyy":t=qe(0,4,0,!1,!0);break;case"Y":t=au(1);break;case"YY":t=au(2,!0);break;case"YYY":t=au(3);break;case"YYYY":t=au(4);break;case"M":case"L":t=qe(1,1,1);break;case"MM":case"LL":t=qe(1,2,1);break;case"MMM":t=Me(2,Ie.Abbreviated);break;case"MMMM":t=Me(2,Ie.Wide);break;case"MMMMM":t=Me(2,Ie.Narrow);break;case"LLL":t=Me(2,Ie.Abbreviated,wt.Standalone);break;case"LLLL":t=Me(2,Ie.Wide,wt.Standalone);break;case"LLLLL":t=Me(2,Ie.Narrow,wt.Standalone);break;case"w":t=rm(1);break;case"ww":t=rm(2);break;case"W":t=rm(1,!0);break;case"d":t=qe(2,1);break;case"dd":t=qe(2,2);break;case"c":case"cc":t=qe(7,1);break;case"ccc":t=Me(1,Ie.Abbreviated,wt.Standalone);break;case"cccc":t=Me(1,Ie.Wide,wt.Standalone);break;case"ccccc":t=Me(1,Ie.Narrow,wt.Standalone);break;case"cccccc":t=Me(1,Ie.Short,wt.Standalone);break;case"E":case"EE":case"EEE":t=Me(1,Ie.Abbreviated);break;case"EEEE":t=Me(1,Ie.Wide);break;case"EEEEE":t=Me(1,Ie.Narrow);break;case"EEEEEE":t=Me(1,Ie.Short);break;case"a":case"aa":case"aaa":t=Me(0,Ie.Abbreviated);break;case"aaaa":t=Me(0,Ie.Wide);break;case"aaaaa":t=Me(0,Ie.Narrow);break;case"b":case"bb":case"bbb":t=Me(0,Ie.Abbreviated,wt.Standalone,!0);break;case"bbbb":t=Me(0,Ie.Wide,wt.Standalone,!0);break;case"bbbbb":t=Me(0,Ie.Narrow,wt.Standalone,!0);break;case"B":case"BB":case"BBB":t=Me(0,Ie.Abbreviated,wt.Format,!0);break;case"BBBB":t=Me(0,Ie.Wide,wt.Format,!0);break;case"BBBBB":t=Me(0,Ie.Narrow,wt.Format,!0);break;case"h":t=qe(3,1,-12);break;case"hh":t=qe(3,2,-12);break;case"H":t=qe(3,1);break;case"HH":t=qe(3,2);break;case"m":t=qe(4,1);break;case"mm":t=qe(4,2);break;case"s":t=qe(5,1);break;case"ss":t=qe(5,2);break;case"S":t=qe(6,1);break;case"SS":t=qe(6,2);break;case"SSS":t=qe(6,3);break;case"Z":case"ZZ":case"ZZZ":t=su(0);break;case"ZZZZZ":t=su(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=su(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=su(2);break;default:return null}return im[n]=t,t}function Mw(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function lk(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function ck(n,t,e){let r=e?-1:1,i=n.getTimezoneOffset(),o=Mw(t,i);return lk(n,r*(o-i))}function uk(n){if(gw(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return uu(i,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(XA))return dk(r)}let t=new Date(n);if(!gw(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function dk(n){let t=new Date(0),e=0,r=0,i=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-r,l=Number(n[6]||0),c=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,l,c),t}function gw(n){return n instanceof Date&&!isNaN(n.valueOf())}var fk=/^(\d+)?\.((\d+)(-(\d+))?)?$/,_w=22,du=".",ta="0",hk=";",pk=",",om="#";function mk(n,t,e,r,i,o,s=!1){let a="",l=!1;if(!isFinite(n))a=yr(e,Wt.Infinity);else{let c=yk(n);s&&(c=vk(c));let h=t.minInt,p=t.minFrac,_=t.maxFrac;if(o){let F=o.match(fk);if(F===null)throw new Error(`${o} is not a valid digit info`);let R=F[1],$=F[3],q=F[5];R!=null&&(h=sm(R)),$!=null&&(p=sm($)),q!=null?_=sm(q):$!=null&&p>_&&(_=p)}bk(c,p,_);let g=c.digits,b=c.integerLen,w=c.exponent,D=[];for(l=g.every(F=>!F);b<h;b++)g.unshift(0);for(;b<0;b++)g.unshift(0);b>0?D=g.splice(b,g.length):(D=g,g=[0]);let P=[];for(g.length>=t.lgSize&&P.unshift(g.splice(-t.lgSize,g.length).join(""));g.length>t.gSize;)P.unshift(g.splice(-t.gSize,g.length).join(""));g.length&&P.unshift(g.join("")),a=P.join(yr(e,r)),D.length&&(a+=yr(e,i)+D.join("")),w&&(a+=yr(e,Wt.Exponential)+"+"+w)}return n<0&&!l?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function gk(n,t,e){let r=ZA(t,xw.Decimal),i=_k(r,yr(t,Wt.MinusSign));return mk(n,i,t,Wt.Group,Wt.Decimal,e)}function _k(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(hk),i=r[0],o=r[1],s=i.indexOf(du)!==-1?i.split(du):[i.substring(0,i.lastIndexOf(ta)+1),i.substring(i.lastIndexOf(ta)+1)],a=s[0],l=s[1]||"";e.posPre=a.substring(0,a.indexOf(om));for(let h=0;h<l.length;h++){let p=l.charAt(h);p===ta?e.minFrac=e.maxFrac=h+1:p===om?e.maxFrac=h+1:e.posSuf+=p}let c=a.split(pk);if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){let h=i.length-e.posPre.length-e.posSuf.length,p=o.indexOf(om);e.negPre=o.substring(0,p).replace(/'/g,""),e.negSuf=o.slice(p+h).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function vk(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function yk(n){let t=Math.abs(n)+"",e=0,r,i,o,s,a;for((i=t.indexOf(du))>-1&&(t=t.replace(du,"")),(o=t.search(/e/i))>0?(i<0&&(i=o),i+=+t.slice(o+1),t=t.substring(0,o)):i<0&&(i=t.length),o=0;t.charAt(o)===ta;o++);if(o===(a=t.length))r=[0],i=1;else{for(a--;t.charAt(a)===ta;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(t.charAt(o))}return i>_w&&(r=r.splice(0,_w-1),e=i-1,i=1),{digits:r,exponent:e,integerLen:i}}function bk(n,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(t,i),e),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=o!==0,c=t+n.integerLen,h=r.reduceRight(function(p,_,g,b){return _=_+p,b[g]=_<10?_:_-10,l&&(b[g]===0&&g>=c?b.pop():l=!1),_>=10?1:0},0);h&&(r.unshift(h),n.integerLen++)}function sm(n){let t=parseInt(n);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+n);return t}function hu(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let r=e.indexOf("="),[i,o]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var am=/\s+/,vw=[],cn=(()=>{class n{_ngEl;_renderer;initialClasses=vw;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(am):vw}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(am):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(am).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(T(Ye),T(Cn))};static \u0275dir=we({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var lm=class{$implicit;ngForOf;index;count;constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},nt=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new lm(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),yw(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);yw(o,i)})}static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(T(gr),T(Ur),T(em))};static \u0275dir=we({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function yw(n,t){n.context.$implicit=t.item}var ye=(()=>{class n{_viewContainer;_context=new cm;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,r){this._viewContainer=e,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){bw("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){bw("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(T(gr),T(Ur))};static \u0275dir=we({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),cm=class{$implicit=null;ngIf=null};function bw(n,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${_t(t)}'.`)}var um=class{_viewContainerRef;_templateRef;_created=!1;constructor(t,e){this._viewContainerRef=t,this._templateRef=e}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}},dm=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(e){this._ngSwitch=e,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){let r=e===this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(let r of this._defaultViews)r.enforceState(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275dir=we({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),Aw=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(e,r,i){this.ngSwitch=i,i._addCase(),this._view=new um(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(r){return new(r||n)(T(gr),T(Ur),T(dm,9))};static \u0275dir=we({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})();var kw=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,r,i){this._ngEl=e,this._differs=r,this._renderer=i}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){let[i,o]=e.split("."),s=i.indexOf("-")===-1?void 0:Ln.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||n)(T(Ye),T(tm),T(Cn))};static \u0275dir=we({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})();function Nw(n,t){return new A(2100,!1)}var wk="mediumDate",Ck=new V(""),Ek=new V(""),pu=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,r,i){this.locale=e,this.defaultTimezone=r,this.defaultOptions=i}transform(e,r,i,o){if(e==null||e===""||e!==e)return null;try{let s=r??this.defaultOptions?.dateFormat??wk,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return tk(e,s,o||this.locale,a)}catch(s){throw Nw(n,s.message)}}static \u0275fac=function(r){return new(r||n)(T($o,16),T(Ck,24),T(Ek,24))};static \u0275pipe=Gp({name:"date",type:n,pure:!0})}return n})();var qo=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,r,i){if(!Sk(e))return null;i||=this._locale;try{let o=Dk(e);return gk(o,i,r)}catch(o){throw Nw(n,o.message)}}static \u0275fac=function(r){return new(r||n)(T($o,16))};static \u0275pipe=Gp({name:"number",type:n,pure:!0})}return n})();function Sk(n){return!(n==null||n===""||n!==n)}function Dk(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var ie=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Je({})}return n})(),fm="browser",xk="server";function wr(n){return n===fm}function hm(n){return n===xk}var Ho=class{};var oa=class{},sa=class{},Cr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),o=e.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let i=(t.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(t,e){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var gm=class{encodeKey(t){return Pw(t)}encodeValue(t){return Pw(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function Ik(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var Tk=/%(\d[a-f0-9])/gi,Mk={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Pw(n){return encodeURIComponent(n).replace(Tk,(t,e)=>Mk[e]??t)}function mu(n){return`${n}`}var Qr=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new gm,t.fromString){if(t.fromObject)throw new A(2805,!1);this.map=Ik(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],i=Array.isArray(r)?r.map(mu):[mu(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(mu(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(mu(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var _m=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Ak(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Ow(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Rw(n){return typeof Blob<"u"&&n instanceof Blob}function Fw(n){return typeof FormData<"u"&&n instanceof FormData}function kk(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ra="Content-Type",gu="Accept",bm="X-Request-URL",Uw="text/plain",Bw="application/json",$w=`${Bw}, ${Uw}, */*`,ia=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,r,i){this.url=e,this.method=t.toUpperCase();let o;if(Ak(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Cr,this.context??=new _m,!this.params)this.params=new Qr,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Ow(this.body)||Rw(this.body)||Fw(this.body)||kk(this.body)?this.body:this.body instanceof Qr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Fw(this.body)?null:Rw(this.body)?this.body.type||null:Ow(this.body)?null:typeof this.body=="string"?Uw:this.body instanceof Qr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Bw:null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,c=t.headers||this.headers,h=t.params||this.params,p=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((_,g)=>_.set(g,t.setHeaders[g]),c)),t.setParams&&(h=Object.keys(t.setParams).reduce((_,g)=>_.set(g,t.setParams[g]),h)),new n(e,r,s,{params:h,headers:c,context:p,reportProgress:l,responseType:i,withCredentials:a,transferCache:o})}},Kr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Kr||{}),aa=class{headers;status;statusText;url;ok;type;constructor(t,e=200,r="OK"){this.headers=t.headers||new Cr,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},_u=class n extends aa{constructor(t={}){super(t)}type=Kr.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},la=class n extends aa{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Kr.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Gr=class extends aa{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},Hw=200,Nk=204;function pm(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var wm=(()=>{class n{handler;constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof ia)o=e;else{let l;i.headers instanceof Cr?l=i.headers:l=new Cr(i.headers);let c;i.params&&(i.params instanceof Qr?c=i.params:c=new Qr({fromObject:i.params})),o=new ia(e,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=W(o).pipe(Or(l=>this.handler.handle(l)));if(e instanceof ia||i.observe==="events")return s;let a=s.pipe(mt(l=>l instanceof la));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(G(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new A(2806,!1);return l.body}));case"blob":return a.pipe(G(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new A(2807,!1);return l.body}));case"text":return a.pipe(G(l=>{if(l.body!==null&&typeof l.body!="string")throw new A(2808,!1);return l.body}));case"json":default:return a.pipe(G(l=>l.body))}case"response":return a;default:throw new A(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new Qr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,pm(i,r))}post(e,r,i={}){return this.request("POST",e,pm(i,r))}put(e,r,i={}){return this.request("PUT",e,pm(i,r))}static \u0275fac=function(r){return new(r||n)(O(oa))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),Pk=/^\)\]\}',?\n/;function Lw(n){if(n.url)return n.url;let t=bm.toLocaleLowerCase();return n.headers.get(t)}var zw=new V(""),mm=(()=>{class n{fetchImpl=I(vm,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e));ngZone=I(Te);handle(e){return new pe(r=>{let i=new AbortController;return this.doRequest(e,i.signal,r).then(ym,o=>r.error(new Gr({error:o}))),()=>i.abort()})}async doRequest(e,r,i){let o=this.createRequestInit(e),s;try{let g=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,N({signal:r},o)));Ok(g),i.next({type:Kr.Sent}),s=await g}catch(g){i.error(new Gr({error:g,status:g.status??0,statusText:g.statusText,url:e.urlWithParams,headers:g.headers}));return}let a=new Cr(s.headers),l=s.statusText,c=Lw(s)??e.urlWithParams,h=s.status,p=null;if(e.reportProgress&&i.next(new _u({headers:a,status:h,statusText:l,url:c})),s.body){let g=s.headers.get("content-length"),b=[],w=s.body.getReader(),D=0,P,F,R=typeof Zone<"u"&&Zone.current;await this.ngZone.runOutsideAngular(async()=>{for(;;){let{done:q,value:Pe}=await w.read();if(q)break;if(b.push(Pe),D+=Pe.length,e.reportProgress){F=e.responseType==="text"?(F??"")+(P??=new TextDecoder).decode(Pe,{stream:!0}):void 0;let De=()=>i.next({type:Kr.DownloadProgress,total:g?+g:void 0,loaded:D,partialText:F});R?R.run(De):De()}}});let $=this.concatChunks(b,D);try{let q=s.headers.get(ra)??"";p=this.parseBody(e,$,q)}catch(q){i.error(new Gr({error:q,headers:new Cr(s.headers),status:s.status,statusText:s.statusText,url:Lw(s)??e.urlWithParams}));return}}h===0&&(h=p?Hw:0),h>=200&&h<300?(i.next(new la({body:p,headers:a,status:h,statusText:l,url:c})),i.complete()):i.error(new Gr({error:p,headers:a,status:h,statusText:l,url:c}))}parseBody(e,r,i){switch(e.responseType){case"json":let o=new TextDecoder().decode(r).replace(Pk,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(e){let r={},i=e.withCredentials?"include":void 0;if(e.headers.forEach((o,s)=>r[o]=s.join(",")),e.headers.has(gu)||(r[gu]=$w),!e.headers.has(ra)){let o=e.detectContentTypeHeader();o!==null&&(r[ra]=o)}return{body:e.serializeBody(),method:e.method,headers:r,credentials:i}}concatChunks(e,r){let i=new Uint8Array(r),o=0;for(let s of e)i.set(s,o),o+=s.length;return i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),vm=class{};function ym(){}function Ok(n){n.then(ym,ym)}function Rk(n,t){return t(n)}function Fk(n,t,e){return(r,i)=>$t(e,()=>t(r,o=>n(o,i)))}var qw=new V(""),Lk=new V(""),Vk=new V("",{providedIn:"root",factory:()=>!0});var Vw=(()=>{class n extends oa{backend;injector;chain=null;pendingTasks=I(pr);contributeToStability=I(Vk);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(qw),...this.injector.get(Lk,[])]));this.chain=r.reduceRight((i,o)=>Fk(i,o,this.injector),Rk)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(nr(()=>this.pendingTasks.remove(r)))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(O(sa),O(Tt))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();var jk=/^\)\]\}',?\n/,Uk=RegExp(`^${bm}:`,"m");function Bk(n){return"responseURL"in n&&n.responseURL?n.responseURL:Uk.test(n.getAllResponseHeaders())?n.getResponseHeader(bm):null}var jw=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new A(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?je(r.\u0275loadImpl()):W(null)).pipe(Vt(()=>new pe(o=>{let s=r.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((w,D)=>s.setRequestHeader(w,D.join(","))),e.headers.has(gu)||s.setRequestHeader(gu,$w),!e.headers.has(ra)){let w=e.detectContentTypeHeader();w!==null&&s.setRequestHeader(ra,w)}if(e.responseType){let w=e.responseType.toLowerCase();s.responseType=w!=="json"?w:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let w=s.statusText||"OK",D=new Cr(s.getAllResponseHeaders()),P=Bk(s)||e.url;return l=new _u({headers:D,status:s.status,statusText:w,url:P}),l},h=()=>{let{headers:w,status:D,statusText:P,url:F}=c(),R=null;D!==Nk&&(R=typeof s.response>"u"?s.responseText:s.response),D===0&&(D=R?Hw:0);let $=D>=200&&D<300;if(e.responseType==="json"&&typeof R=="string"){let q=R;R=R.replace(jk,"");try{R=R!==""?JSON.parse(R):null}catch(Pe){R=q,$&&($=!1,R={error:Pe,text:R})}}$?(o.next(new la({body:R,headers:w,status:D,statusText:P,url:F||void 0})),o.complete()):o.error(new Gr({error:R,headers:w,status:D,statusText:P,url:F||void 0}))},p=w=>{let{url:D}=c(),P=new Gr({error:w,status:s.status||0,statusText:s.statusText||"Unknown Error",url:D||void 0});o.error(P)},_=!1,g=w=>{_||(o.next(c()),_=!0);let D={type:Kr.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(D.total=w.total),e.responseType==="text"&&s.responseText&&(D.partialText=s.responseText),o.next(D)},b=w=>{let D={type:Kr.UploadProgress,loaded:w.loaded};w.lengthComputable&&(D.total=w.total),o.next(D)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),e.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",b)),s.send(a),o.next({type:Kr.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),e.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",b)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(O(Ho))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),Ww=new V(""),$k="XSRF-TOKEN",Hk=new V("",{providedIn:"root",factory:()=>$k}),zk="X-XSRF-TOKEN",qk=new V("",{providedIn:"root",factory:()=>zk}),vu=class{},Wk=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=hu(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||n)(O(Fe),O(dt),O(Hk))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();function Gk(n,t){let e=n.url.toLowerCase();if(!I(Ww)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let r=I(vu).getToken(),i=I(qk);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}var Gw=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Gw||{});function Qk(n,t){return{\u0275kind:n,\u0275providers:t}}function Qw(...n){let t=[wm,jw,Vw,{provide:oa,useExisting:Vw},{provide:sa,useFactory:()=>I(zw,{optional:!0})??I(jw)},{provide:qw,useValue:Gk,multi:!0},{provide:Ww,useValue:!0},{provide:vu,useClass:Wk}];for(let e of n)t.push(...e.\u0275providers);return Fo(t)}function Kw(){return Qk(Gw.Fetch,[mm,{provide:zw,useExisting:mm},{provide:sa,useExisting:mm}])}var Em=class extends cu{supportsDOMEvents=!0},Sm=class n extends Em{static makeCurrent(){Cw(new n)}onAndCancel(t,e,r,i){return t.addEventListener(e,r,i),()=>{t.removeEventListener(e,r,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=Zk();return e==null?null:Jk(e)}resetBaseElement(){ca=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return hu(document.cookie,t)}},ca=null;function Zk(){return ca=ca||document.querySelector("base"),ca?ca.getAttribute("href"):null}function Jk(n){return new URL(n,document.baseURI).pathname}var Yk=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),Dm=new V(""),eC=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i,o){return this._findPluginFor(r).addEventListener(e,r,i,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new A(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(O(Dm),O(Te))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),bu=class{_doc;constructor(t){this._doc=t}manager},yu="ng-app-id";function Zw(n){for(let t of n)t.remove()}function Jw(n,t){let e=t.createElement("style");return e.textContent=n,e}function Xk(n,t,e,r){let i=n.head?.querySelectorAll(`style[${yu}="${t}"],link[${yu}="${t}"]`);if(i)for(let o of i)o.removeAttribute(yu),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function xm(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var tC=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,this.isServer=hm(o),Xk(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,Jw);r?.forEach(i=>this.addUsage(i,this.external,xm))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let o=r.get(e);o?o.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(Zw(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])Zw(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,Jw(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,xm(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(yu,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(O(Fe),O(qc),O(Xs,8),O(dt))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),Cm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Tm=/%COMP%/g;var nC="%COMP%",eN=`_nghost-${nC}`,tN=`_ngcontent-${nC}`,nN=!0,rN=new V("",{providedIn:"root",factory:()=>nN});function iN(n){return tN.replace(Tm,n)}function oN(n){return eN.replace(Tm,n)}function rC(n,t){return t.map(e=>e.replace(Tm,n))}var wu=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,o,s,a,l,c=null,h=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=h,this.platformIsServer=hm(a),this.defaultRenderer=new ua(e,s,l,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Fn.ShadowDom&&(r=B(N({},r),{encapsulation:Fn.Emulated}));let i=this.getOrCreateRenderer(e,r);return i instanceof Cu?i.applyToHost(e):i instanceof da&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case Fn.Emulated:o=new Cu(l,c,r,this.appId,h,s,a,p,_);break;case Fn.ShadowDom:return new Im(l,c,e,r,s,a,this.nonce,p,_);default:o=new da(l,c,r,h,s,a,p,_);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(O(eC),O(tC),O(qc),O(rN),O(Fe),O(dt),O(Te),O(Xs),O(Gc,8))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),ua=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,i,o){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Cm[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Yw(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(Yw(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new A(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let o=Cm[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=Cm[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(Ln.DashCase|Ln.Important)?t.style.setProperty(e,r,i&Ln.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Ln.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,i){if(typeof t=="string"&&(t=br().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);let o=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,e,o)),this.eventManager.addEventListener(t,e,o,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function Yw(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Im=class extends ua{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,i,o,s,a,l,c){super(t,o,s,l,c),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=rC(i.id,h);for(let _ of h){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=_,this.shadowRoot.appendChild(g)}let p=i.getExternalStyles?.();if(p)for(let _ of p){let g=xm(_,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},da=class extends ua{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,i,o,s,a,l,c){super(t,o,s,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=c?rC(c,h):h,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Cu=class extends da{contentAttr;hostAttr;constructor(t,e,r,i,o,s,a,l,c){let h=i+"-"+r.id;super(t,e,r,o,s,a,l,c,h),this.contentAttr=iN(h),this.hostAttr=oN(h)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}},sN=(()=>{class n extends bu{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,o){return e.addEventListener(r,i,o),()=>this.removeEventListener(e,r,i,o)}removeEventListener(e,r,i,o){return e.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(O(Fe))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),Xw=["alt","control","meta","shift"],aN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},cN=(()=>{class n extends bu{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>br().onAndCancel(e,s.domEventName,a,o))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Xw.forEach(c=>{let h=r.indexOf(c);h>-1&&(r.splice(h,1),s+=c+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let i=aN[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Xw.forEach(s=>{if(s!==i){let a=lN[s];a(e)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(O(Fe))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();function iC(n,t){return dw(N({rootComponent:n},uN(t)))}function uN(n){return{appProviders:[...mN,...n?.providers??[]],platformProviders:pN}}function dN(){Sm.makeCurrent()}function fN(){return new Bt}function hN(){return F0(document),document}var pN=[{provide:dt,useValue:fm},{provide:Tp,useValue:dN,multi:!0},{provide:Fe,useFactory:hN,deps:[]}];var mN=[{provide:Rc,useValue:"root"},{provide:Bt,useFactory:fN,deps:[]},{provide:Dm,useClass:sN,multi:!0,deps:[Fe,Te,dt]},{provide:Dm,useClass:cN,multi:!0,deps:[Fe]},wu,tC,eC,{provide:Br,useExisting:wu},{provide:Ho,useClass:Yk,deps:[]},[]];var oC=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(O(Fe))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fa=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=O(gN),i},providedIn:"root"})}return n})(),gN=(()=>{class n extends fa{_doc;constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case ft.NONE:return r;case ft.HTML:return zr(r,"HTML")?wn(r):J0(this._doc,String(r)).toString();case ft.STYLE:return zr(r,"Style")?wn(r):r;case ft.SCRIPT:if(zr(r,"Script"))return wn(r);throw new A(5200,!1);case ft.URL:return zr(r,"URL")?wn(r):Kc(String(r));case ft.RESOURCE_URL:if(zr(r,"ResourceURL"))return wn(r);throw new A(5201,!1);default:throw new A(5202,!1)}}bypassSecurityTrustHtml(e){return B0(e)}bypassSecurityTrustStyle(e){return $0(e)}bypassSecurityTrustScript(e){return H0(e)}bypassSecurityTrustUrl(e){return z0(e)}bypassSecurityTrustResourceUrl(e){return q0(e)}static \u0275fac=function(r){return new(r||n)(O(Fe))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oe="primary",Ia=Symbol("RouteTitle"),Om=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Jo(n){return new Om(n)}function vN(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function yN(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!zn(n[e],t[e]))return!1;return!0}function zn(n,t){let e=n?Rm(n):void 0,r=t?Rm(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!hC(n[i],t[i]))return!1;return!0}function Rm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function hC(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}else return n===t}function pC(n){return n.length>0?n[n.length-1]:null}function Jr(n){return Of(n)?n:Pi(n)?je(Promise.resolve(n)):W(n)}var bN={exact:gC,subset:_C},mC={exact:wN,subset:CN,ignored:()=>!0};function sC(n,t,e){return bN[e.paths](n.root,t.root,e.matrixParams)&&mC[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function wN(n,t){return zn(n,t)}function gC(n,t,e){if(!ji(n.segments,t.segments)||!Du(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!gC(n.children[r],t.children[r],e))return!1;return!0}function CN(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>hC(n[e],t[e]))}function _C(n,t,e){return vC(n,t,t.segments,e)}function vC(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!ji(i,e)||t.hasChildren()||!Du(i,e,r))}else if(n.segments.length===e.length){if(!ji(n.segments,e)||!Du(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!_C(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!ji(n.segments,i)||!Du(n.segments,i,r)||!n.children[oe]?!1:vC(n.children[oe],t,o,r)}}function Du(n,t,e){return t.every((r,i)=>mC[e](n[i].parameters,r.parameters))}var Sr=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Ce([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Jo(this.queryParams),this._queryParamMap}toString(){return DN.serialize(this)}},Ce=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xu(this)}},Vi=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Jo(this.parameters),this._parameterMap}toString(){return bC(this)}};function EN(n,t){return ji(n,t)&&n.every((e,r)=>zn(e.parameters,t[r].parameters))}function ji(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function SN(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(e=e.concat(t(i,r)))}),e}var ag=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>new va,providedIn:"root"})}return n})(),va=class{parse(t){let e=new Lm(t);return new Sr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${ha(t.root,!0)}`,r=TN(t.queryParams),i=typeof t.fragment=="string"?`#${xN(t.fragment)}`:"";return`${e}${r}${i}`}},DN=new va;function xu(n){return n.segments.map(t=>bC(t)).join("/")}function ha(n,t){if(!n.hasChildren())return xu(n);if(t){let e=n.children[oe]?ha(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${ha(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=SN(n,(r,i)=>i===oe?[ha(n.children[oe],!1)]:[`${i}:${ha(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${xu(n)}/${e[0]}`:`${xu(n)}/(${e.join("//")})`}}function yC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Eu(n){return yC(n).replace(/%3B/gi,";")}function xN(n){return encodeURI(n)}function Fm(n){return yC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Iu(n){return decodeURIComponent(n)}function aC(n){return Iu(n.replace(/\+/g,"%20"))}function bC(n){return`${Fm(n.path)}${IN(n.parameters)}`}function IN(n){return Object.entries(n).map(([t,e])=>`;${Fm(t)}=${Fm(e)}`).join("")}function TN(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${Eu(e)}=${Eu(i)}`).join("&"):`${Eu(e)}=${Eu(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var MN=/^[^\/()?;#]+/;function Am(n){let t=n.match(MN);return t?t[0]:""}var AN=/^[^\/()?;=#]+/;function kN(n){let t=n.match(AN);return t?t[0]:""}var NN=/^[^=?&#]+/;function PN(n){let t=n.match(NN);return t?t[0]:""}var ON=/^[^&#]+/;function RN(n){let t=n.match(ON);return t?t[0]:""}var Lm=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[oe]=new Ce(t,e)),r}parseSegment(){let t=Am(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new A(4009,!1);return this.capture(t),new Vi(Iu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=kN(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=Am(this.remaining);i&&(r=i,this.capture(r))}t[Iu(e)]=Iu(r)}parseQueryParam(t){let e=PN(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=RN(this.remaining);s&&(r=s,this.capture(r))}let i=aC(e),o=aC(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Am(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new A(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=oe);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[oe]:new Ce([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new A(4011,!1)}};function wC(n){return n.segments.length>0?new Ce([],{[oe]:n}):n}function CC(n){let t={};for(let[r,i]of Object.entries(n.children)){let o=CC(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let e=new Ce(n.segments,t);return FN(e)}function FN(n){if(n.numberOfChildren===1&&n.children[oe]){let t=n.children[oe];return new Ce(n.segments.concat(t.segments),t.children)}return n}function Ui(n){return n instanceof Sr}function LN(n,t,e=null,r=null){let i=EC(n);return SC(i,t,e,r)}function EC(n){let t;function e(o){let s={};for(let l of o.children){let c=e(l);s[l.outlet]=c}let a=new Ce(o.url,s);return o===n&&(t=a),a}let r=e(n.root),i=wC(r);return t??i}function SC(n,t,e,r){let i=n;for(;i.parent;)i=i.parent;if(t.length===0)return km(i,i,i,e,r);let o=VN(t);if(o.toRoot())return km(i,i,new Ce([],{}),e,r);let s=jN(o,i,n),a=s.processChildren?ma(s.segmentGroup,s.index,o.commands):xC(s.segmentGroup,s.index,o.commands);return km(i,s.segmentGroup,a,e,r)}function Tu(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ya(n){return typeof n=="object"&&n!=null&&n.outlets}function km(n,t,e,r,i){let o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`});let s;n===t?s=e:s=DC(n,t,e);let a=wC(CC(s));return new Sr(a,o,i)}function DC(n,t,e){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===t?r[i]=e:r[i]=DC(o,t,e)}),new Ce(n.segments,r)}var Mu=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&Tu(r[0]))throw new A(4003,!1);let i=r.find(ya);if(i&&i!==pC(r))throw new A(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function VN(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Mu(!0,0,n);let t=0,e=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Mu(e,t,r)}var Qo=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function jN(n,t,e){if(n.isAbsolute)return new Qo(t,!0,0);if(!e)return new Qo(t,!1,NaN);if(e.parent===null)return new Qo(e,!0,0);let r=Tu(n.commands[0])?0:1,i=e.segments.length-1+r;return UN(e,i,n.numberOfDoubleDots)}function UN(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new A(4005,!1);i=r.segments.length}return new Qo(r,!1,i-o)}function BN(n){return ya(n[0])?n[0].outlets:{[oe]:n}}function xC(n,t,e){if(n??=new Ce([],{}),n.segments.length===0&&n.hasChildren())return ma(n,t,e);let r=$N(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ce(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new Ce(n.segments.slice(r.pathIndex),n.children),ma(o,0,i)}else return r.match&&i.length===0?new Ce(n.segments,{}):r.match&&!n.hasChildren()?Vm(n,t,e):r.match?ma(n,0,i):Vm(n,t,e)}function ma(n,t,e){if(e.length===0)return new Ce(n.segments,{});{let r=BN(e),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=ma(n.children[oe],t,e);return new Ce(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=xC(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ce(n.segments,i)}}function $N(n,t,e){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;let s=n.segments[i],a=e[r];if(ya(a))break;let l=`${a}`,c=r<e.length-1?e[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!cC(l,c,s))return o;r+=2}else{if(!cC(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Vm(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let o=e[i];if(ya(o)){let l=HN(o.outlets);return new Ce(r,l)}if(i===0&&Tu(e[0])){let l=n.segments[t];r.push(new Vi(l.path,lC(e[0]))),i++;continue}let s=ya(o)?o.outlets[oe]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&Tu(a)?(r.push(new Vi(s,lC(a))),i+=2):(r.push(new Vi(s,{})),i++)}return new Ce(r,{})}function HN(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=Vm(new Ce([],{}),0,r))}),t}function lC(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function cC(n,t,e){return n==e.path&&zn(t,e.parameters)}var ga="imperative",it=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(it||{}),un=class{id;url;constructor(t,e){this.id=t,this.url=e}},ba=class extends un{type=it.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Zr=class extends un{urlAfterRedirects;type=it.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qt||{}),jm=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(jm||{}),Er=class extends un{reason;code;type=it.NavigationCancel;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Bi=class extends un{reason;code;type=it.NavigationSkipped;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}},wa=class extends un{error;target;type=it.NavigationError;constructor(t,e,r,i){super(t,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Au=class extends un{urlAfterRedirects;state;type=it.RoutesRecognized;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Um=class extends un{urlAfterRedirects;state;type=it.GuardsCheckStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bm=class extends un{urlAfterRedirects;state;shouldActivate;type=it.GuardsCheckEnd;constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},$m=class extends un{urlAfterRedirects;state;type=it.ResolveStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hm=class extends un{urlAfterRedirects;state;type=it.ResolveEnd;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zm=class{route;type=it.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},qm=class{route;type=it.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Wm=class{snapshot;type=it.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gm=class{snapshot;type=it.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qm=class{snapshot;type=it.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Km=class{snapshot;type=it.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ca=class{},Yo=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function zN(n,t){return n.providers&&!n._injector&&(n._injector=Wp(n.providers,t,`Route: ${n.path}`)),n._injector??t}function xn(n){return n.outlet||oe}function qN(n,t){let e=n.filter(r=>xn(r)===t);return e.push(...n.filter(r=>xn(r)!==t)),e}function Ta(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Zm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ta(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Lu(this.rootInjector)}},Lu=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new Zm(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(O(Tt))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ku=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Jm(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=Jm(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Ym(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Ym(t,this._root).map(e=>e.value)}};function Jm(n,t){if(n===t.value)return t;for(let e of t.children){let r=Jm(n,e);if(r)return r}return null}function Ym(n,t){if(n===t.value)return[t];for(let e of t.children){let r=Ym(n,e);if(r.length)return r.unshift(t),r}return[]}var Gt=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Go(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Nu=class extends ku{snapshot;constructor(t,e){super(t),this.snapshot=e,lg(this,t)}toString(){return this.snapshot.toString()}};function IC(n){let t=WN(n),e=new rt([new Vi("",{})]),r=new rt({}),i=new rt({}),o=new rt({}),s=new rt(""),a=new Ct(e,r,o,s,i,oe,n,t.root);return a.snapshot=t.root,new Nu(new Gt(a,[]),t)}function WN(n){let t={},e={},r={},i="",o=new Ko([],t,r,i,e,oe,n,null,{});return new Ou("",new Gt(o,[]))}var Ct=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,i,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(G(c=>c[Ia]))??W(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(t=>Jo(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(t=>Jo(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Pu(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:N(N({},t.params),n.params),data:N(N({},t.data),n.data),resolve:N(N(N(N({},n.data),t.data),i?.data),n._resolvedData)}:r={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},i&&MC(i)&&(r.resolve[Ia]=i.title),r}var Ko=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ia]}constructor(t,e,r,i,o,s,a,l,c){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Jo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Jo(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Ou=class extends ku{url;constructor(t,e){super(e),this.url=t,lg(this,e)}toString(){return TC(this._root)}};function lg(n,t){t.value._routerState=n,t.children.forEach(e=>lg(n,e))}function TC(n){let t=n.children.length>0?` { ${n.children.map(TC).join(", ")} } `:"";return`${n.value}${t}`}function Nm(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,zn(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),zn(t.params,e.params)||n.paramsSubject.next(e.params),yN(t.url,e.url)||n.urlSubject.next(e.url),zn(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Xm(n,t){let e=zn(n.params,t.params)&&EN(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||Xm(n.parent,t.parent))}function MC(n){return typeof n.title=="string"||n.title===null}var GN=new V(""),cg=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=oe;activateEvents=new be;deactivateEvents=new be;attachEvents=new be;detachEvents=new be;routerOutletData=T0(void 0);parentContexts=I(Lu);location=I(gr);changeDetector=I(ke);inputBinder=I(ug,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new A(4013,!1);this._activatedRoute=e;let i=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new eg(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=we({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[hr]})}return n})(),eg=class n{route;childContexts;parent;outletData;__ngOutletInjector(t){return new n(this.route,this.childContexts,t,this.outletData)}constructor(t,e,r,i){this.route=t,this.childContexts=e,this.parent=r,this.outletData=i}get(t,e){return t===Ct?this.route:t===Lu?this.childContexts:t===GN?this.outletData:this.parent.get(t,e)}},ug=new V("");function QN(n,t,e){let r=Ea(n,t._root,e?e._root:void 0);return new Nu(r,t)}function Ea(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=KN(n,t,e);return new Gt(r,i)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Ea(n,a)),s}}let r=ZN(t.value),i=t.children.map(o=>Ea(n,o));return new Gt(r,i)}}function KN(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ea(n,r,i);return Ea(n,r)})}function ZN(n){return new Ct(new rt(n.url),new rt(n.params),new rt(n.queryParams),new rt(n.fragment),new rt(n.data),n.outlet,n.component,n)}var Sa=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},AC="ngNavigationCancelingError";function Ru(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=Ui(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=kC(!1,Qt.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function kC(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[AC]=!0,e.cancellationCode=t,e}function JN(n){return NC(n)&&Ui(n.url)}function NC(n){return!!n&&n[AC]}var YN=(n,t,e,r)=>G(i=>(new tg(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),tg=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,i,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Nm(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=Go(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Go(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Go(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=Go(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Km(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Gm(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(Nm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Nm(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},Fu=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Zo=class{component;route;constructor(t,e){this.component=t,this.route=e}};function XN(n,t,e){let r=n._root,i=t?t._root:null;return pa(r,i,e,[r.value])}function eP(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function es(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!Ey(n)?n:t.get(n):r}function pa(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Go(t);return n.children.forEach(s=>{tP(s,o[s.value.outlet],e,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>_a(a,e.getContext(s),i)),i}function tP(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=nP(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Fu(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?pa(n,t,a?a.children:null,r,i):pa(n,t,e,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Zo(a.outlet.component,s))}else s&&_a(t,a,i),i.canActivateChecks.push(new Fu(r)),o.component?pa(n,null,a?a.children:null,r,i):pa(n,null,e,r,i);return i}function nP(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!ji(n.url,t.url);case"pathParamsOrQueryParamsChange":return!ji(n.url,t.url)||!zn(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xm(n,t)||!zn(n.queryParams,t.queryParams);case"paramsChange":default:return!Xm(n,t)}}function _a(n,t,e){let r=Go(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?t?_a(s,t.children.getContext(o),e):_a(s,null,e):_a(s,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Zo(t.outlet.component,i)):e.canDeactivateChecks.push(new Zo(null,i)):e.canDeactivateChecks.push(new Zo(null,i))}function Ma(n){return typeof n=="function"}function rP(n){return typeof n=="boolean"}function iP(n){return n&&Ma(n.canLoad)}function oP(n){return n&&Ma(n.canActivate)}function sP(n){return n&&Ma(n.canActivateChild)}function aP(n){return n&&Ma(n.canDeactivate)}function lP(n){return n&&Ma(n.canMatch)}function PC(n){return n instanceof tr||n?.name==="EmptyError"}var Su=Symbol("INITIAL_VALUE");function Xo(){return Vt(n=>bo(n.map(t=>t.pipe(Lt(1),Ns(Su)))).pipe(G(t=>{for(let e of t)if(e!==!0){if(e===Su)return Su;if(e===!1||cP(e))return e}return!0}),mt(t=>t!==Su),Lt(1)))}function cP(n){return Ui(n)||n instanceof Sa}function uP(n,t){return Ze(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?W(B(N({},e),{guardsResult:!0})):dP(s,r,i,n).pipe(Ze(a=>a&&rP(a)?fP(r,o,n,t):W(a)),G(a=>B(N({},e),{guardsResult:a})))})}function dP(n,t,e,r){return je(n).pipe(Ze(i=>_P(i.component,i.route,e,t,r)),rr(i=>i!==!0,!0))}function fP(n,t,e,r){return je(t).pipe(Or(i=>Pr(pP(i.route.parent,r),hP(i.route,r),gP(n,i.path,e),mP(n,i.route,e))),rr(i=>i!==!0,!0))}function hP(n,t){return n!==null&&t&&t(new Qm(n)),W(!0)}function pP(n,t){return n!==null&&t&&t(new Wm(n)),W(!0)}function mP(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(o=>Hl(()=>{let s=Ta(t)??e,a=es(o,s),l=oP(a)?a.canActivate(t,n):$t(s,()=>a(t,n));return Jr(l).pipe(rr())}));return W(i).pipe(Xo())}function gP(n,t,e){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>eP(s)).filter(s=>s!==null).map(s=>Hl(()=>{let a=s.guards.map(l=>{let c=Ta(s.node)??e,h=es(l,c),p=sP(h)?h.canActivateChild(r,n):$t(c,()=>h(r,n));return Jr(p).pipe(rr())});return W(a).pipe(Xo())}));return W(o).pipe(Xo())}function _P(n,t,e,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return W(!0);let s=o.map(a=>{let l=Ta(t)??i,c=es(a,l),h=aP(c)?c.canDeactivate(n,t,e,r):$t(l,()=>c(n,t,e,r));return Jr(h).pipe(rr())});return W(s).pipe(Xo())}function vP(n,t,e,r){let i=t.canLoad;if(i===void 0||i.length===0)return W(!0);let o=i.map(s=>{let a=es(s,n),l=iP(a)?a.canLoad(t,e):$t(n,()=>a(t,e));return Jr(l)});return W(o).pipe(Xo(),OC(r))}function OC(n){return Mf(Be(t=>{if(typeof t!="boolean")throw Ru(n,t)}),G(t=>t===!0))}function yP(n,t,e,r){let i=t.canMatch;if(!i||i.length===0)return W(!0);let o=i.map(s=>{let a=es(s,n),l=lP(a)?a.canMatch(t,e):$t(n,()=>a(t,e));return Jr(l)});return W(o).pipe(Xo(),OC(r))}var Da=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},xa=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Wo(n){return Nr(new Da(n))}function bP(n){return Nr(new A(4e3,!1))}function wP(n){return Nr(kC(!1,Qt.GuardRejected))}var ng=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return W(r);if(i.numberOfChildren>1||!i.children[oe])return bP(`${t.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(t,e,r,i,o){if(typeof e!="string"){let a=e,{queryParams:l,fragment:c,routeConfig:h,url:p,outlet:_,params:g,data:b,title:w}=i,D=$t(o,()=>a({params:g,data:b,queryParams:l,fragment:c,routeConfig:h,url:p,outlet:_,title:w}));if(D instanceof Sr)throw new xa(D);e=D}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r);if(e[0]==="/")throw new xa(s);return s}applyRedirectCreateUrlTree(t,e,r,i){let o=this.createSegmentGroup(t,e.root,r,i);return new Sr(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(t,e,r,i){let o=this.createSegments(t,e.segments,r,i),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,r,i)}),new Ce(o,s)}createSegments(t,e,r,i){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new A(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}},rg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function CP(n,t,e,r,i){let o=RC(n,t,e);return o.matched?(r=zN(t,r),yP(r,t,e,i).pipe(G(s=>s===!0?o:N({},rg)))):W(o)}function RC(n,t,e){if(t.path==="**")return EP(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?N({},rg):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||vN)(e,n,t);if(!i)return N({},rg);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?N(N({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function EP(n){return{matched:!0,parameters:n.length>0?pC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function uC(n,t,e,r){return e.length>0&&xP(n,e,r)?{segmentGroup:new Ce(t,DP(r,new Ce(e,n.children))),slicedSegments:[]}:e.length===0&&IP(n,e,r)?{segmentGroup:new Ce(n.segments,SP(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new Ce(n.segments,n.children),slicedSegments:e}}function SP(n,t,e,r){let i={};for(let o of e)if(Vu(n,t,o)&&!r[xn(o)]){let s=new Ce([],{});i[xn(o)]=s}return N(N({},r),i)}function DP(n,t){let e={};e[oe]=t;for(let r of n)if(r.path===""&&xn(r)!==oe){let i=new Ce([],{});e[xn(r)]=i}return e}function xP(n,t,e){return e.some(r=>Vu(n,t,r)&&xn(r)!==oe)}function IP(n,t,e){return e.some(r=>Vu(n,t,r))}function Vu(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function TP(n,t,e){return t.length===0&&!n.children[e]}var ig=class{};function MP(n,t,e,r,i,o,s="emptyOnly"){return new og(n,t,e,r,i,s,o).recognize()}var AP=31,og=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,i,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ng(this.urlSerializer,this.urlTree)}noMatchError(t){return new A(4002,`'${t.segmentGroup}'`)}recognize(){let t=uC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(G(({children:e,rootSnapshot:r})=>{let i=new Gt(r,e),o=new Ou("",i),s=LN(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new Ko([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,oe,e).pipe(G(r=>({children:r,rootSnapshot:e})),Nn(r=>{if(r instanceof xa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Da?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,o):this.processSegment(t,e,r,r.segments,i,!0,o).pipe(G(s=>s instanceof Gt?[s]:[]))}processChildren(t,e,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return je(o).pipe(Or(s=>{let a=r.children[s],l=qN(e,s);return this.processSegmentGroup(t,l,a,s,i)}),Vf((s,a)=>(s.push(...a),s)),Rr(null),Lf(),Ze(s=>{if(s===null)return Wo(r);let a=FC(s);return kP(a),W(a)}))}processSegment(t,e,r,i,o,s,a){return je(e).pipe(Or(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,r,i,o,s,a).pipe(Nn(c=>{if(c instanceof Da)return W(null);throw c}))),rr(l=>!!l),Nn(l=>{if(PC(l))return TP(r,i,o)?W(new ig):Wo(r);throw l}))}processSegmentAgainstRoute(t,e,r,i,o,s,a,l){return xn(r)!==s&&(s===oe||!Vu(i,o,r))?Wo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,o,s,l):Wo(i)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s,a){let{matched:l,parameters:c,consumedSegments:h,positionalParamSegments:p,remainingSegments:_}=RC(e,i,o);if(!l)return Wo(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>AP&&(this.allowRedirects=!1));let g=new Ko(o,c,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,dC(i),xn(i),i.component??i._loadedComponent??null,i,fC(i)),b=Pu(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(b.params),g.data=Object.freeze(b.data);let w=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,g,t);return this.applyRedirects.lineralizeSegments(i,w).pipe(Ze(D=>this.processSegment(t,r,e,D.concat(_),s,!1,a)))}matchSegmentAgainstRoute(t,e,r,i,o,s){let a=CP(e,r,i,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(Vt(l=>l.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(Vt(({routes:c})=>{let h=r._loadedInjector??t,{parameters:p,consumedSegments:_,remainingSegments:g}=l,b=new Ko(_,p,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,dC(r),xn(r),r.component??r._loadedComponent??null,r,fC(r)),w=Pu(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(w.params),b.data=Object.freeze(w.data);let{segmentGroup:D,slicedSegments:P}=uC(e,_,g,c);if(P.length===0&&D.hasChildren())return this.processChildren(h,c,D,b).pipe(G(R=>new Gt(b,R)));if(c.length===0&&P.length===0)return W(new Gt(b,[]));let F=xn(r)===o;return this.processSegment(h,c,D,P,F?oe:o,!0,b).pipe(G(R=>new Gt(b,R instanceof Gt?[R]:[])))}))):Wo(e)))}getChildConfig(t,e,r){return e.children?W({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?W({routes:e._loadedRoutes,injector:e._loadedInjector}):vP(t,e,r,this.urlSerializer).pipe(Ze(i=>i?this.configLoader.loadChildren(t,e).pipe(Be(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):wP(e))):W({routes:[],injector:t})}};function kP(n){n.sort((t,e)=>t.value.outlet===oe?-1:e.value.outlet===oe?1:t.value.outlet.localeCompare(e.value.outlet))}function NP(n){let t=n.value.routeConfig;return t&&t.path===""}function FC(n){let t=[],e=new Set;for(let r of n){if(!NP(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=FC(r.children);t.push(new Gt(r.value,i))}return t.filter(r=>!e.has(r))}function dC(n){return n.data||{}}function fC(n){return n.resolve||{}}function PP(n,t,e,r,i,o){return Ze(s=>MP(n,t,e,r,s.extractedUrl,i,o).pipe(G(({state:a,tree:l})=>B(N({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function OP(n,t){return Ze(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return W(e);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of LC(l))s.add(c);let a=0;return je(s).pipe(Or(l=>o.has(l)?RP(l,r,n,t):(l.data=Pu(l,l.parent,n).resolve,W(void 0))),Be(()=>a++),wo(1),Ze(l=>a===s.size?W(e):St))})}function LC(n){let t=n.children.map(e=>LC(e)).flat();return[n,...t]}function RP(n,t,e,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!MC(i)&&(o[Ia]=i.title),FP(o,n,t,r).pipe(G(s=>(n._resolvedData=s,n.data=Pu(n,n.parent,e).resolve,null)))}function FP(n,t,e,r){let i=Rm(n);if(i.length===0)return W({});let o={};return je(i).pipe(Ze(s=>LP(n[s],t,e,r).pipe(rr(),Be(a=>{if(a instanceof Sa)throw Ru(new va,a);o[s]=a}))),wo(1),G(()=>o),Nn(s=>PC(s)?St:Nr(s)))}function LP(n,t,e,r){let i=Ta(t)??r,o=es(n,i),s=o.resolve?o.resolve(t,e):$t(i,()=>o(t,e));return Jr(s)}function Pm(n){return Vt(t=>{let e=n(t);return e?je(e).pipe(G(()=>t)):W(t)})}var VC=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(e){return e.data[Ia]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(VP),providedIn:"root"})}return n})(),VP=(()=>{class n extends VC{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(O(oC))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dg=new V("",{providedIn:"root",factory:()=>({})}),jP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=X({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&L(0,"router-outlet")},dependencies:[cg],encapsulation:2})}return n})();function fg(n){let t=n.children&&n.children.map(fg),e=t?B(N({},n),{children:t}):N({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==oe&&(e.component=jP),e}var hg=new V(""),UP=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=I(Xp);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return W(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=Jr(e.loadComponent()).pipe(G(jC),Be(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),nr(()=>{this.componentLoaders.delete(e)})),i=new vo(r,()=>new Re).pipe(_o());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=BP(r,this.compiler,e,this.onLoadEndListener).pipe(nr(()=>{this.childrenLoaders.delete(r)})),s=new vo(o,()=>new Re).pipe(_o());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function BP(n,t,e,r){return Jr(n.loadChildren()).pipe(G(jC),Ze(i=>i instanceof Ws||Array.isArray(i)?W(i):je(t.compileModuleAsync(i))),G(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(e).injector,s=o.get(hg,[],{optional:!0,self:!0}).flat()),{routes:s.map(fg),injector:o}}))}function $P(n){return n&&typeof n=="object"&&"default"in n}function jC(n){return $P(n)?n.default:n}var pg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(HP),providedIn:"root"})}return n})(),HP=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),zP=new V("");var qP=new V(""),WP=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Re;transitionAbortSubject=new Re;configLoader=I(UP);environmentInjector=I(Tt);destroyRef=I(Vo);urlSerializer=I(ag);rootContexts=I(Lu);location=I(na);inputBindingEnabled=I(ug,{optional:!0})!==null;titleStrategy=I(VC);options=I(dg,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=I(pg);createViewTransition=I(zP,{optional:!0});navigationErrorHandler=I(qP,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>W(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new zm(i)),r=i=>this.events.next(new qm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(B(N(N({},this.transitions.value),e),{id:r}))}setupNavigations(e,r,i){return this.transitions=new rt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ga,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mt(o=>o.id!==0),G(o=>B(N({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Vt(o=>{let s=!1,a=!1;return W(o).pipe(Vt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Qt.SupersededByNewNavigation),St;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?B(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&h!=="reload"){let p="";return this.events.next(new Bi(l.id,this.urlSerializer.serialize(l.rawUrl),p,jm.IgnoredSameUrlNavigation)),l.resolve(!1),St}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return W(l).pipe(Vt(p=>{let _=this.transitions?.getValue();return this.events.next(new ba(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),_!==this.transitions?.getValue()?St:Promise.resolve(p)}),PP(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Be(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=B(N({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let _=new Au(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:_,source:g,restoredState:b,extras:w}=l,D=new ba(p,this.urlSerializer.serialize(_),g,b);this.events.next(D);let P=IC(this.rootComponentType).snapshot;return this.currentTransition=o=B(N({},l),{targetSnapshot:P,urlAfterRedirects:_,extras:B(N({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,W(o)}else{let p="";return this.events.next(new Bi(l.id,this.urlSerializer.serialize(l.extractedUrl),p,jm.IgnoredByUrlHandlingStrategy)),l.resolve(!1),St}}),Be(l=>{let c=new Um(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),G(l=>(this.currentTransition=o=B(N({},l),{guards:XN(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),uP(this.environmentInjector,l=>this.events.next(l)),Be(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Ru(this.urlSerializer,l.guardsResult);let c=new Bm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),mt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Qt.GuardRejected),!1)),Pm(l=>{if(l.guards.canActivateChecks.length)return W(l).pipe(Be(c=>{let h=new $m(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),Vt(c=>{let h=!1;return W(c).pipe(OP(this.paramsInheritanceStrategy,this.environmentInjector),Be({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(c,"",Qt.NoDataFromResolver)}}))}),Be(c=>{let h=new Hm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}))}),Pm(l=>{let c=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Be(_=>{h.component=_}),G(()=>{})));for(let _ of h.children)p.push(...c(_));return p};return bo(c(l.targetSnapshot.root)).pipe(Rr(null),Lt(1))}),Pm(()=>this.afterPreactivation()),Vt(()=>{let{currentSnapshot:l,targetSnapshot:c}=o,h=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return h?je(h).pipe(G(()=>o)):W(o)}),G(l=>{let c=QN(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=B(N({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,o}),Be(()=>{this.events.next(new Ca)}),YN(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Lt(1),Be({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Ps(this.transitionAbortSubject.pipe(Be(l=>{throw l}))),nr(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Qt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Nn(l=>{if(this.destroyed)return o.resolve(!1),St;if(a=!0,NC(l))this.events.next(new Er(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),JN(l)?this.events.next(new Yo(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let c=new wa(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let h=$t(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(h instanceof Sa){let{message:p,cancellationCode:_}=Ru(this.urlSerializer,h);this.events.next(new Er(o.id,this.urlSerializer.serialize(o.extractedUrl),p,_)),this.events.next(new Yo(h.redirectTo,h.navigationBehaviorOptions))}else throw this.events.next(c),l}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return St}))}))}cancelNavigationTransition(e,r,i){let o=new Er(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GP(n){return n!==ga}var QP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(KP),providedIn:"root"})}return n})(),sg=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},KP=(()=>{class n extends sg{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Vn(n)))(i||n)}})();static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:()=>I(ZP),providedIn:"root"})}return n})(),ZP=(()=>{class n extends UC{location=I(na);urlSerializer=I(ag);options=I(dg,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=I(pg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Sr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=IC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&e(r.url,r.state)})}handleRouterEvent(e,r){if(e instanceof ba)this.stateMemento=this.createStateMemento();else if(e instanceof Bi)this.rawUrlTree=r.initialUrl;else if(e instanceof Au){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else e instanceof Ca?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):e instanceof Er&&(e.code===Qt.GuardRejected||e.code===Qt.NoDataFromResolver)?this.restoreHistory(r):e instanceof wa?this.restoreHistory(r,!0):e instanceof Zr&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,r){let i=e instanceof Sr?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=N(N({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=N(N({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Vn(n)))(i||n)}})();static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function JP(n,t){n.events.pipe(mt(e=>e instanceof Zr||e instanceof Er||e instanceof wa||e instanceof Bi),G(e=>e instanceof Zr||e instanceof Bi?0:(e instanceof Er?e.code===Qt.Redirect||e.code===Qt.SupersededByNewNavigation:!1)?2:1),mt(e=>e!==2),Lt(1)).subscribe(()=>{t()})}var YP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ue=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=I(Zp);stateManager=I(UC);options=I(dg,{optional:!0})||{};pendingTasks=I(pr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=I(WP);urlSerializer=I(ag);location=I(na);urlHandlingStrategy=I(pg);_events=new Re;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=I(QP);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=I(hg,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!I(ug,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Oe;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Er&&r.code!==Qt.Redirect&&r.code!==Qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Zr)this.navigated=!0;else if(r instanceof Yo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=N({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||GP(i.source)},s);this.scheduleNavigation(a,ga,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}tO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ga,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",r)},0)})}navigateToSyncWithBrowser(e,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=N({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(fg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let _=i?i.snapshot:this.routerState.snapshot.root;p=EC(_)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),p=this.currentUrlTree.root}return SC(p,e,h,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=Ui(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ga,null,r)}navigate(e,r={skipLocationChange:!1}){return eO(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=N({},YP):r===!1?i=N({},XP):i=r,Ui(e))return sC(this.currentUrlTree,e,i);let o=this.parseUrl(e);return sC(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(e,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((p,_)=>{a=p,l=_});let h=this.pendingTasks.add();return JP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eO(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new A(4008,!1)}function tO(n){return!(n instanceof Ca)&&!(n instanceof Yo)}var Nt=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Re;constructor(e,r,i,o,s,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof Zr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ui(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let r=this.href===null?null:Y0(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(e,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,e,r):i.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Ui(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(T(Ue),T(Ct),Hc("tabindex"),T(Cn),T(Ye),T(zo))};static \u0275dir=we({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&C("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&qr("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Sn],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Sn],replaceUrl:[2,"replaceUrl","replaceUrl",Sn],routerLink:"routerLink"},features:[Ni,hr]})}return n})();var nO=new V("");function BC(n,...t){return Fo([{provide:hg,multi:!0,useValue:n},[],{provide:Ct,useFactory:rO,deps:[Ue]},{provide:eu,multi:!0,useFactory:iO},t.map(e=>e.\u0275providers)])}function rO(n){return n.routerState.root}function iO(){let n=I(vt);return t=>{let e=n.get(ur);if(t!==e.components[0])return;let r=n.get(Ue),i=n.get(oO);n.get(sO)===1&&r.initialNavigation(),n.get(aO,null,ae.Optional)?.setUpPreloading(),n.get(nO,null,ae.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var oO=new V("",{factory:()=>new Re}),sO=new V("",{providedIn:"root",factory:()=>1});var aO=new V("");var mg;try{mg=typeof Intl<"u"&&Intl.v8BreakIterator}catch{mg=!1}var ju=(()=>{class n{_platformId=I(dt);isBrowser=this._platformId?wr(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||mg)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gg(n){return Array.isArray(n)?n:[n]}var $C=new Set,$i,lO=(()=>{class n{_platform=I(ju);_nonce=I(Xs,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):uO}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&cO(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cO(n,t){if(!$C.has(n))try{$i||($i=document.createElement("style"),t&&$i.setAttribute("nonce",t),$i.setAttribute("type","text/css"),document.head.appendChild($i)),$i.sheet&&($i.sheet.insertRule(`@media ${n} {body{ }}`,0),$C.add(n))}catch(e){console.error(e)}}function uO(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var zC=(()=>{class n{_mediaMatcher=I(lO);_zone=I(Te);_queries=new Map;_destroySubject=new Re;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return HC(gg(e)).some(i=>this._registerQuery(i).mql.matches)}observe(e){let i=HC(gg(e)).map(s=>this._registerQuery(s).observable),o=bo(i);return o=Pr(o.pipe(Lt(1)),o.pipe(Bf(1),Ff(0))),o.pipe(G(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let r=this._mediaMatcher.matchMedia(e),o={observable:new pe(s=>{let a=l=>this._zone.run(()=>s.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Ns(r),G(({matches:s})=>({query:e,matches:s})),Ps(this._destroySubject)),mql:r};return this._queries.set(e,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HC(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var Hi=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Hi||{}),qC="cdk-high-contrast-black-on-white",WC="cdk-high-contrast-white-on-black",_g="cdk-high-contrast-active",GC=(()=>{class n{_platform=I(ju);_hasCheckedHighContrastMode;_document=I(Fe);_breakpointSubscription;constructor(){this._breakpointSubscription=I(zC).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Hi.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(e):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Hi.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Hi.BLACK_ON_WHITE}return Hi.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(_g,qC,WC),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Hi.BLACK_ON_WHITE?e.add(_g,qC):r===Hi.WHITE_ON_BLACK&&e.add(_g,WC)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Je({})}return n})();var yg=(()=>{class n{constructor(){I(GC)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Je({imports:[vg,vg]})}return n})();var dO=["*"],Uu;function fO(){if(Uu===void 0&&(Uu=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(Uu=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Uu}function Aa(n){return fO()?.createHTML(n)||n}function QC(n){return Error(`Unable to find icon with the name "${n}"`)}function hO(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function KC(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function ZC(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var Dr=class{url;svgText;options;svgElement;constructor(t,e,r){this.url=t,this.svgText=e,this.options=r}},pO=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,r,i,o){this._httpClient=e,this._sanitizer=r,this._errorHandler=o,this._document=i}addSvgIcon(e,r,i){return this.addSvgIconInNamespace("",e,r,i)}addSvgIconLiteral(e,r,i){return this.addSvgIconLiteralInNamespace("",e,r,i)}addSvgIconInNamespace(e,r,i,o){return this._addSvgIconConfig(e,r,new Dr(i,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,i,o){let s=this._sanitizer.sanitize(ft.HTML,i);if(!s)throw ZC(i);let a=Aa(s);return this._addSvgIconConfig(e,r,new Dr("",a,o))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,i){return this._addSvgIconSetConfig(e,new Dr(r,null,i))}addSvgIconSetLiteralInNamespace(e,r,i){let o=this._sanitizer.sanitize(ft.HTML,r);if(!o)throw ZC(r);let s=Aa(o);return this._addSvgIconSetConfig(e,new Dr("",s,i))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let r=this._sanitizer.sanitize(ft.RESOURCE_URL,e);if(!r)throw KC(e);let i=this._cachedIconsByUrl.get(r);return i?W(Bu(i)):this._loadSvgIconFromConfig(new Dr(e,null)).pipe(Be(o=>this._cachedIconsByUrl.set(r,o)),G(o=>Bu(o)))}getNamedSvgIcon(e,r=""){let i=JC(r,e),o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,e),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(r);return s?this._getSvgFromIconSetConfigs(e,s):Nr(QC(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?W(Bu(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(G(r=>Bu(r)))}_getSvgFromIconSetConfigs(e,r){let i=this._extractIconWithNameFromAnySet(e,r);if(i)return W(i);let o=r.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Nn(a=>{let c=`Loading icon set URL: ${this._sanitizer.sanitize(ft.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),W(null)})));return ks(o).pipe(G(()=>{let s=this._extractIconWithNameFromAnySet(e,r);if(!s)throw QC(e);return s}))}_extractIconWithNameFromAnySet(e,r){for(let i=r.length-1;i>=0;i--){let o=r[i];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,e,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Be(r=>e.svgText=r),G(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?W(null):this._fetchIcon(e).pipe(Be(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,i){let o=e.querySelector(`[id="${r}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,i);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),i);let a=this._svgElementFromString(Aa("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,i)}_svgElementFromString(e){let r=this._document.createElement("DIV");r.innerHTML=e;let i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(e){let r=this._svgElementFromString(Aa("<svg></svg>")),i=e.attributes;for(let o=0;o<i.length;o++){let{name:s,value:a}=i[o];s!=="id"&&r.setAttribute(s,a)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){let{url:r,options:i}=e,o=i?.withCredentials??!1;if(!this._httpClient)throw hO();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let s=this._sanitizer.sanitize(ft.RESOURCE_URL,r);if(!s)throw KC(r);let a=this._inProgressUrlFetches.get(s);if(a)return a;let l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(G(c=>Aa(c)),nr(()=>this._inProgressUrlFetches.delete(s)),Uf());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(e,r,i){return this._svgIconConfigs.set(JC(e,r),i),this}_addSvgIconSetConfig(e,r){let i=this._iconSetConfigs.get(e);return i?i.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){let r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let i=0;i<this._resolvers.length;i++){let o=this._resolvers[i](r,e);if(o)return mO(o)?new Dr(o.url,null,o.options):new Dr(o,null)}}static \u0275fac=function(r){return new(r||n)(O(wm,8),O(fa),O(Fe,8),O(Bt))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bu(n){return n.cloneNode(!0)}function JC(n,t){return n+":"+t}function mO(n){return!!(n.url&&n.options)}var gO=new V("MAT_ICON_DEFAULT_OPTIONS"),_O=new V("mat-icon-location",{providedIn:"root",factory:vO});function vO(){let n=I(Fe),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var YC=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],yO=YC.map(n=>`[${n}]`).join(", "),bO=/^url\(['"]?#(.*?)['"]?\)$/,dn=(()=>{class n{_elementRef=I(Ye);_iconRegistry=I(pO);_location=I(_O);_errorHandler=I(Bt);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Oe.EMPTY;constructor(){let e=I(new gc("aria-hidden"),{optional:!0}),r=I(gO,{optional:!0});r&&(r.color&&(this.color=this._defaultColor=r.color),r.fontSet&&(this.fontSet=r.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let i=e.childNodes[r];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>e.classList.remove(i)),r.forEach(i=>e.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){let r=e.querySelectorAll(yO),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)YC.forEach(s=>{let a=r[o],l=a.getAttribute(s),c=l?l.match(bO):null;if(c){let h=i.get(a);h||(h=[],i.set(a,h)),h.push({name:s,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[r,i]=this._splitIconName(e);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Lt(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${r}:${i}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=X({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){r&2&&(qr("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Gb(i.color?"mat-"+i.color:""),ne("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Sn],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Ni],ngContentSelectors:dO,decls:1,vars:0,template:function(r,i){r&1&&(Jp(),Yp(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),XC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Je({imports:[yg,yg]})}return n})();var eE=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-MAQGHWLI.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var ka=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},$u=class extends ka{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Hu=class extends ka{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},zu=class extends ka{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},bg=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(bg||{});var CO=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(h){try{c(r.next(h))}catch(p){s(p)}}function l(h){try{c(r.throw(h))}catch(p){s(p)}}function c(h){h.done?o(h.value):i(h.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},Na=class{constructor(t,{headers:e={},customFetch:r,region:i=bg.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=eE(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return CO(this,void 0,void 0,function*(){try{let{headers:i,method:o,body:s}=e,a={},{region:l}=e;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=s):typeof s=="string"?(a["Content-Type"]="text/plain",c=s):typeof FormData<"u"&&s instanceof FormData?c=s:(a["Content-Type"]="application/json",c=JSON.stringify(s)));let h=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(b=>{throw new $u(b)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new Hu(h);if(!h.ok)throw new zu(h);let _=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return _==="application/json"?g=yield h.json():_==="application/octet-stream"?g=yield h.blob():_==="text/event-stream"?g=h:_==="multipart/form-data"?g=yield h.formData():g=yield h.text(),{data:g,error:null}}catch(i){return{data:null,error:i}}})}};var hE=yD(fE(),1),{PostgrestClient:pE,PostgrestQueryBuilder:kH,PostgrestFilterBuilder:NH,PostgrestTransformBuilder:PH,PostgrestBuilder:OH,PostgrestError:OO}=hE.default;var mE="2.11.2";var gE={"X-Client-Info":`realtime-js/${mE}`},_E="1.0.0",Qu=1e4,vE=1e3,ns=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(ns||{}),Kt=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(Kt||{}),fn=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(fn||{}),Ng=function(n){return n.websocket="websocket",n}(Ng||{}),zi=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(zi||{});var Ku=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){let i=e.getUint8(1),o=e.getUint8(2),s=this.HEADER_LENGTH+2,a=r.decode(t.slice(s,s+i));s=s+i;let l=r.decode(t.slice(s,s+o));s=s+o;let c=JSON.parse(r.decode(t.slice(s,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}};var rs=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Ne=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(Ne||{}),Og=(n,t,e={})=>{var r;let i=(r=e.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((o,s)=>(o[s]=RO(s,n,t,i),o),{})},RO=(n,t,e,r)=>{let i=t.find(a=>a.name===n),o=i?.type,s=e[n];return o&&!r.includes(o)?yE(o,s):Pg(s)},yE=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return jO(t,e)}switch(n){case Ne.bool:return FO(t);case Ne.float4:case Ne.float8:case Ne.int2:case Ne.int4:case Ne.int8:case Ne.numeric:case Ne.oid:return LO(t);case Ne.json:case Ne.jsonb:return VO(t);case Ne.timestamp:return UO(t);case Ne.abstime:case Ne.date:case Ne.daterange:case Ne.int4range:case Ne.int8range:case Ne.money:case Ne.reltime:case Ne.text:case Ne.time:case Ne.timestamptz:case Ne.timetz:case Ne.tsrange:case Ne.tstzrange:return Pg(t);default:return Pg(t)}},Pg=n=>n,FO=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},LO=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},VO=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},jO=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let o,s=n.slice(1,e);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>yE(t,a))}return n},UO=n=>typeof n=="string"?n.replace(" ","T"):n,Zu=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};var is=class{constructor(t,e,r={},i=Qu){this.channel=t,this.event=e,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var ja=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,o,s),this.pendingDiffs.forEach(l=>{this.state=n.syncDiff(this.state,l,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,i){let o=this.cloneDeep(t),s=this.transformState(e),a={},l={};return this.map(o,(c,h)=>{s[c]||(l[c]=h)}),this.map(s,(c,h)=>{let p=o[c];if(p){let _=h.map(D=>D.presence_ref),g=p.map(D=>D.presence_ref),b=h.filter(D=>g.indexOf(D.presence_ref)<0),w=p.filter(D=>_.indexOf(D.presence_ref)<0);b.length>0&&(a[c]=b),w.length>0&&(l[c]=w)}else a[c]=h}),this.syncDiff(o,{joins:a,leaves:l},r,i)}static syncDiff(t,e,r,i){let{joins:o,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var c;let h=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),h.length>0){let p=t[a].map(g=>g.presence_ref),_=h.filter(g=>p.indexOf(g.presence_ref)<0);t[a].unshift(..._)}r(a,h,l)}),this.map(s,(a,l)=>{let c=t[a];if(!c)return;let h=l.map(p=>p.presence_ref);c=c.filter(p=>h.indexOf(p.presence_ref)<0),t[a]=c,i(a,c,l),c.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let i=t[r];return"metas"in i?e[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):e[r]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var xr=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(xr||{});var Ua=class n{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=Kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new is(this,fn.join,this.params,this.timeout),this.rejoinTimer=new rs(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Kt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fn.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new ja(this),this.broadcastEndpointURL=Zu(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:o,presence:s,private:a}}=this.params;this._onError(h=>t?.(xr.CHANNEL_ERROR,h)),this._onClose(()=>t?.(xr.CLOSED));let l={},c={broadcast:o,presence:s,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket.setAuth(),h===void 0){t?.(xr.SUBSCRIBED);return}else{let _=this.bindings.postgres_changes,g=(p=_?.length)!==null&&p!==void 0?p:0,b=[];for(let w=0;w<g;w++){let D=_[w],{filter:{event:P,schema:F,table:R,filter:$}}=D,q=h&&h[w];if(q&&q.event===P&&q.schema===F&&q.table===R&&q.filter===$)b.push(Object.assign(Object.assign({},D),{id:q.id}));else{this.unsubscribe(),t?.(xr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(xr.SUBSCRIBED);return}}).receive("error",h=>{t?.(xr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t?.(xr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,r){return this._on(t,e,r)}async send(t,e={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){let{event:o,payload:s}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{let c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=e.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,l;let c=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Kt.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fn.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let i=new is(this,fn.leave,{},t);i.receive("ok",()=>{e(),r("ok")}).receive("timeout",()=>{e(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(t,e,r){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(o),s}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new is(this,t,e,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:h}=fn;if(r&&[a,l,c,h].indexOf(s)>=0&&r!==this._joinRef())return;let _=this._onMessage(s,e,r);if(e&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var b,w,D;return((b=g.filter)===null||b===void 0?void 0:b.event)==="*"||((D=(w=g.filter)===null||w===void 0?void 0:w.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===s}).map(g=>g.callback(_,r)):(o=this.bindings[s])===null||o===void 0||o.filter(g=>{var b,w,D,P,F,R;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in g){let $=g.id,q=(b=g.filter)===null||b===void 0?void 0:b.event;return $&&((w=e.ids)===null||w===void 0?void 0:w.includes($))&&(q==="*"||q?.toLocaleLowerCase()===((D=e.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{let $=(F=(P=g?.filter)===null||P===void 0?void 0:P.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return $==="*"||$===((R=e?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===s}).map(g=>{if(typeof _=="object"&&"ids"in _){let b=_.data,{schema:w,table:D,commit_timestamp:P,type:F,errors:R}=b;_=Object.assign(Object.assign({},{schema:w,table:D,commit_timestamp:P,eventType:F,new:{},old:{},errors:R}),this._getPayloadRecords(b))}g.callback(_,r)})}_isClosed(){return this.state===Kt.closed}_isJoined(){return this.state===Kt.joined}_isJoining(){return this.state===Kt.joining}_isLeaving(){return this.state===Kt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let i=t.toLocaleLowerCase(),o={type:i,filter:e,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&n.isEqual(i.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(fn.close,{},t)}_onError(t){this._on(fn.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Kt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=Og(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=Og(t.columns,t.old_record)),e}};var $O=()=>{},HO=typeof WebSocket<"u",zO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Ba=class{constructor(t,e){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=gE,this.params={},this.timeout=Qu,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=$O,this.conn=null,this.sendBuffer=[],this.serializer=new Ku,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...a)=>import("./chunk-MAQGHWLI.js").then(({default:l})=>l(...a)):s=fetch,(...a)=>s(...a)},this.endPoint=`${t}/${Ng.websocket}`,this.httpEndpoint=Zu(t),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let i=(r=e?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=e?.encode?e.encode:(o,s)=>s(JSON.stringify(o)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new rs(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(HO){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Rg(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-KYSFV2V4.js").then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:_E}))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){let e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){let t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),t}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ns.connecting:return zi.Connecting;case ns.open:return zi.Open;case ns.closing:return zi.Closing;default:return zi.Closed}}isConnected(){return this.connectionState()===zi.Open}channel(t,e={config:{}}){let r=new Ua(`realtime:${t}`,e,this);return this.channels.push(r),r}push(t){let{topic:e,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){let e=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(e){let r=null;try{r=JSON.parse(atob(e.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=e,this.channels.forEach(i=>{e&&i.updateJoinPayload({access_token:e}),i.joinedOnce&&i._isJoined()&&i._push(fn.access_token,{access_token:e})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(vE,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:r,event:i,payload:o,ref:s}=e;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${i} ${s&&"("+s+")"||""}`,o),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,o,s)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(fn.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${r}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([zO],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}};var Rg=class{constructor(t,e,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ns.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}};var os=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Ge(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Ju=class extends os{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},qi=class extends os{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var qO=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(h){try{c(r.next(h))}catch(p){s(p)}}function l(h){try{c(r.throw(h))}catch(p){s(p)}}function c(h){h.done?o(h.value):i(h.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},Xu=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-MAQGHWLI.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},bE=()=>qO(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-MAQGHWLI.js")).Response:Response}),Yu=n=>{if(Array.isArray(n))return n.map(e=>Yu(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let i=e.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=Yu(r)}),t};var Wi=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(h){try{c(r.next(h))}catch(p){s(p)}}function l(h){try{c(r.throw(h))}catch(p){s(p)}}function c(h){h.done?o(h.value):i(h.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},Fg=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),WO=(n,t,e)=>Wi(void 0,void 0,void 0,function*(){let r=yield bE();n instanceof r&&!e?.noResolveJson?n.json().then(i=>{t(new Ju(Fg(i),n.status||500))}).catch(i=>{t(new qi(Fg(i),i))}):t(new qi(Fg(n),n))}),GO=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),e))};function $a(n,t,e,r,i,o){return Wi(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,GO(t,r,i,o)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>WO(l,a,r))})})}function ss(n,t,e,r){return Wi(this,void 0,void 0,function*(){return $a(n,"GET",t,e,r)})}function Wn(n,t,e,r,i){return Wi(this,void 0,void 0,function*(){return $a(n,"POST",t,r,i,e)})}function wE(n,t,e,r,i){return Wi(this,void 0,void 0,function*(){return $a(n,"PUT",t,r,i,e)})}function CE(n,t,e,r){return Wi(this,void 0,void 0,function*(){return $a(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function ed(n,t,e,r,i){return Wi(this,void 0,void 0,function*(){return $a(n,"DELETE",t,r,i,e)})}var Pt=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(h){try{c(r.next(h))}catch(p){s(p)}}function l(h){try{c(r.throw(h))}catch(p){s(p)}}function c(h){h.done?o(h.value):i(h.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},QO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},EE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},td=class{constructor(t,e={},r,i){this.url=t,this.headers=e,this.bucketId=r,this.fetch=Xu(i)}uploadOrUpdate(t,e,r,i){return Pt(this,void 0,void 0,function*(){try{let o,s=Object.assign(Object.assign({},EE),i),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)}),l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let c=this._removeEmptyFolders(e),h=this._getFinalPath(c),p=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:t,body:o,headers:a},s?.duplex?{duplex:s.duplex}:{})),_=yield p.json();return p.ok?{data:{path:c,id:_.Id,fullPath:_.Key},error:null}:{data:null,error:_}}catch(o){if(Ge(o))return{data:null,error:o};throw o}})}upload(t,e,r){return Pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,i){return Pt(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(t),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let l,c=Object.assign({upsert:EE.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);let p=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:h}),_=yield p.json();return p.ok?{data:{path:o,fullPath:_.Key},error:null}:{data:null,error:_}}catch(l){if(Ge(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return Pt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");let o=yield Wn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new os("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}update(t,e,r){return Pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return Pt(this,void 0,void 0,function*(){try{return{data:yield Wn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}copy(t,e,r){return Pt(this,void 0,void 0,function*(){try{return{data:{path:(yield Wn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,r){return Pt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield Wn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,r){return Pt(this,void 0,void 0,function*(){try{let i=yield Wn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}download(t,e){return Pt(this,void 0,void 0,function*(){let i=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),s=o?`?${o}`:"";try{let a=this._getFinalPath(t);return{data:yield(yield ss(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ge(a))return{data:null,error:a};throw a}})}info(t){return Pt(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield ss(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Yu(r),error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}exists(t){return Pt(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield CE(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ge(r)&&r instanceof qi){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),i=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);let a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return Pt(this,void 0,void 0,function*(){try{return{data:yield ed(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(Ge(e))return{data:null,error:e};throw e}})}list(t,e,r){return Pt(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},QO),e),{prefix:t||""});return{data:yield Wn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var SE="2.7.1";var DE={"X-Client-Info":`storage-js/${SE}`};var as=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(h){try{c(r.next(h))}catch(p){s(p)}}function l(h){try{c(r.throw(h))}catch(p){s(p)}}function c(h){h.done?o(h.value):i(h.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},nd=class{constructor(t,e={},r){this.url=t,this.headers=Object.assign(Object.assign({},DE),e),this.fetch=Xu(r)}listBuckets(){return as(this,void 0,void 0,function*(){try{return{data:yield ss(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ge(t))return{data:null,error:t};throw t}})}getBucket(t){return as(this,void 0,void 0,function*(){try{return{data:yield ss(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(Ge(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return as(this,void 0,void 0,function*(){try{return{data:yield Wn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}updateBucket(t,e){return as(this,void 0,void 0,function*(){try{return{data:yield wE(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}emptyBucket(t){return as(this,void 0,void 0,function*(){try{return{data:yield Wn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(Ge(e))return{data:null,error:e};throw e}})}deleteBucket(t){return as(this,void 0,void 0,function*(){try{return{data:yield ed(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(Ge(e))return{data:null,error:e};throw e}})}};var Ha=class extends nd{constructor(t,e={},r){super(t,e,r)}from(t){return new td(this.url,this.headers,t,this.fetch)}};var xE="2.48.1";var za="";typeof Deno<"u"?za="deno":typeof document<"u"?za="web":typeof navigator<"u"&&navigator.product==="ReactNative"?za="react-native":za="node";var KO={"X-Client-Info":`supabase-js-${za}/${xE}`},IE={headers:KO},TE={schema:"public"},ME={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},AE={};H_();var ZO=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(h){try{c(r.next(h))}catch(p){s(p)}}function l(h){try{c(r.throw(h))}catch(p){s(p)}}function c(h){h.done?o(h.value):i(h.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},JO=n=>{let t;return n?t=n:typeof fetch>"u"?t=B_:t=fetch,(...e)=>t(...e)},YO=()=>typeof Headers>"u"?$_:Headers,kE=(n,t,e)=>{let r=JO(e),i=YO();return(o,s)=>ZO(void 0,void 0,void 0,function*(){var a;let l=(a=yield t())!==null&&a!==void 0?a:n,c=new i(s?.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},s),{headers:c}))})};var XO=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(h){try{c(r.next(h))}catch(p){s(p)}}function l(h){try{c(r.throw(h))}catch(p){s(p)}}function c(h){h.done?o(h.value):i(h.value).then(a,l)}c((r=r.apply(n,t||[])).next())})};function NE(n){return n.replace(/\/$/,"")}function PE(n,t){let{db:e,auth:r,realtime:i,global:o}=n,{db:s,auth:a,realtime:l,global:c}=t,h={db:Object.assign(Object.assign({},s),e),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),o),accessToken:()=>XO(this,void 0,void 0,function*(){return""})};return n.accessToken?h.accessToken=n.accessToken:delete h.accessToken,h}function OE(n){return Math.round(Date.now()/1e3)+n}function RE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var In=()=>typeof document<"u",Gi={tested:!1,writable:!1},Yr=()=>{if(!In())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gi.tested)return Gi.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Gi.tested=!0,Gi.writable=!0}catch{Gi.tested=!0,Gi.writable=!1}return Gi.writable};function rd(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return e.searchParams.forEach((r,i)=>{t[i]=r}),t}var id=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-MAQGHWLI.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},FE=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Xr=async(n,t,e)=>{await n.setItem(t,JSON.stringify(e))},Wa=async(n,t)=>{let e=await n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},od=async(n,t)=>{await n.removeItem(t)};function eR(n){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="",r,i,o,s,a,l,c,h=0;for(n=n.replace("-","+").replace("_","/");h<n.length;)s=t.indexOf(n.charAt(h++)),a=t.indexOf(n.charAt(h++)),l=t.indexOf(n.charAt(h++)),c=t.indexOf(n.charAt(h++)),r=s<<2|a>>4,i=(a&15)<<4|l>>2,o=(l&3)<<6|c,e=e+String.fromCharCode(r),l!=64&&i!=0&&(e=e+String.fromCharCode(i)),c!=64&&o!=0&&(e=e+String.fromCharCode(o));return e}var qa=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};qa.promiseConstructor=Promise;function Lg(n){let t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=n.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");let r=e[1];return JSON.parse(eR(r))}async function LE(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function VE(n,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{let s=await n(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})()})}function tR(n){return("0"+n.toString(16)).substr(-2)}function Qi(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,i="";for(let o=0;o<56;o++)i+=e.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,tR).join("")}async function nR(n){let e=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",e),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}function rR(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ki(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=await nR(n);return rR(e)}var Ga=class extends Error{constructor(t,e){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e}};function fe(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var sd=class extends Ga{constructor(t,e){super(t,e),this.name="AuthApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}};function jE(n){return fe(n)&&n.name==="AuthApiError"}var ls=class extends Ga{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},Ir=class extends Ga{constructor(t,e,r){super(t),this.name=e,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Tr=class extends Ir{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}},cs=class extends Ir{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}},Zi=class extends Ir{constructor(t){super(t,"AuthInvalidCredentialsError",400)}},Ji=class extends Ir{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Qa=class extends Ir{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},us=class extends Ir{constructor(t,e){super(t,"AuthRetryableFetchError",e)}};function ld(n){return fe(n)&&n.name==="AuthRetryableFetchError"}var ad=class extends Ir{constructor(t,e,r){super(t,"AuthWeakPasswordError",e),this.reasons=r}};var iR=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},ds=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),oR=[502,503,504];async function UE(n){if(!FE(n))throw new us(ds(n),0);if(oR.includes(n.status))throw new us(ds(n),n.status);let t;try{t=await n.json()}catch(e){throw new ls(ds(e),e)}throw typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)?new ad(ds(t),n.status,t.weak_password.reasons):new sd(ds(t),n.status||500)}var sR=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),e))};async function me(n,t,e,r){var i;let o=Object.assign({},r?.headers);r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await aR(n,t,e+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function aR(n,t,e,r,i,o){let s=sR(t,r,i,o),a;try{a=await n(e,s)}catch(l){throw console.error(l),new us(ds(l),0)}if(a.ok||await UE(a),r?.noResolveJson)return a;try{return await a.json()}catch(l){await UE(l)}}function ei(n){var t;let e=null;lR(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=OE(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function Vg(n){let t=ei(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function Gn(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function BE(n){return{data:n,error:null}}function $E(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o}=n,s=iR(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},s);return{data:{properties:a,user:l},error:null}}function HE(n){return n}function lR(n){return n.access_token&&n.refresh_token&&n.expires_in}var cR=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},fs=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=id(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,e="global"){try{return await me(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,e={}){try{return await me(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:Gn})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{let{options:e}=t,r=cR(t,["options"]),i=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:$E,redirectTo:e?.redirectTo})}catch(e){if(fe(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await me(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Gn})}catch(e){if(fe(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,r,i,o,s,a,l;try{let c={nextPage:null,lastPage:0,total:0},h=await me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:HE});if(h.error)throw h.error;let p=await h.json(),_=(s=h.headers.get("x-total-count"))!==null&&s!==void 0?s:0,g=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(b=>{let w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(b.split(";")[1].split("=")[1]);c[`${D}Page`]=w}),c.total=parseInt(_)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(fe(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){try{return await me(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Gn})}catch(e){if(fe(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){try{return await me(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:Gn})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,e=!1){try{return await me(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:Gn})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{let{data:e,error:r}=await me(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:r}}catch(e){if(fe(e))return{data:null,error:e};throw e}}async _deleteFactor(t){try{return{data:await me(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(fe(e))return{data:null,error:e};throw e}}};var cd="2.61.0";var zE="http://localhost:9999",qE="supabase.auth.token";var WE={"X-Client-Info":`gotrue-js/${cd}`},jg=10;var GE={getItem:n=>Yr()?globalThis.localStorage.getItem(n):null,setItem:(n,t)=>{Yr()&&globalThis.localStorage.setItem(n,t)},removeItem:n=>{Yr()&&globalThis.localStorage.removeItem(n)}};function Ug(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}function QE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var uR={debug:!!(globalThis&&Yr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},ud=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}};QE();var dR={url:zE,storageKey:qE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:WE,flowType:"implicit",debug:!1},Ka=30*1e3,KE=3;async function fR(n,t,e){return await e()}var Bg=(()=>{class n{constructor(e){var r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&In()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let i=Object.assign(Object.assign({},dR),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new fs({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=id(i.fetch),this.lock=i.lock||fR,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Yr()?this.storage=GE:(this.memoryStorage={},this.storage=Ug(this.memoryStorage)):(this.memoryStorage={},this.storage=Ug(this.memoryStorage)),In()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cd}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{let e=In()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:r,error:i}=await this._getSessionFromURL(e);if(i)return this._debug("#_initialize()","error detecting session from URL",i),i?.message==="Identity is already linked"||i?.message==="Identity is already linked to another user"?{error:i}:(await this._removeSession(),{error:i});let{session:o,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return fe(e)?{error:e}:{error:new ls("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var r,i,o;try{await this._removeSession();let s;if("email"in e){let{email:p,password:_,options:g}=e,b=null,w=null;if(this.flowType==="pkce"){let D=Qi();await Xr(this.storage,`${this.storageKey}-code-verifier`,D),b=await Ki(D),w=D===b?"plain":"s256"}s=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g?.emailRedirectTo,body:{email:p,password:_,data:(r=g?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:b,code_challenge_method:w},xform:ei})}else if("phone"in e){let{phone:p,password:_,options:g}=e;s=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:_,data:(i=g?.data)!==null&&i!==void 0?i:{},channel:(o=g?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:ei})}else throw new Zi("You must provide either an email or phone number and a password");let{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};let c=a.session,h=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let r;if("email"in e){let{email:s,password:a,options:l}=e;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Vg})}else if("phone"in e){let{phone:s,password:a,options:l}=e;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Vg})}else throw new Zi("You must provide either an email or phone number and a password");let{data:i,error:o}=r;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new cs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,i,o,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){let r=await Wa(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/"),{data:s,error:a}=await me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:ei});return await od(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new cs}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=e,l=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:ei}),{data:c,error:h}=l;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new cs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,i,o,s,a;try{if(await this._removeSession(),"email"in e){let{email:l,options:c}=e,h=null,p=null;if(this.flowType==="pkce"){let g=Qi();await Xr(this.storage,`${this.storageKey}-code-verifier`,g),h=await Ki(g),p=g===h?"plain":"s256"}let{error:_}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:_}}if("phone"in e){let{phone:l,options:c}=e,{data:h,error:p}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=c?.data)!==null&&o!==void 0?o:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:p}}throw new Zi("You must provide either an email or phone number.")}catch(l){if(fe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,i;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let o,s;"options"in e&&(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:l}=await me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:ei});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,h=a.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(o){if(fe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var r,i,o;try{await this._removeSession();let s=null,a=null;if(this.flowType==="pkce"){let l=Qi();await Xr(this.storage,`${this.storageKey}-code-verifier`,l),s=await Ki(l),a=l===s?"plain":"s256"}return await me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:BE})}catch(s){if(fe(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new Tr;let{error:o}=await me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(fe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();let r=`${this.url}/resend`;if("email"in e){let{email:i,type:o,options:s}=e,{error:a}=await me(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:i,type:o,options:s}=e,{data:a,error:l}=await me(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new Zi("You must provide either an email or phone number and a type")}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=await Wa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let i=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i)return{data:{session:e},error:null};let{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Gn}):await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Gn})})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async i=>{let{data:o,error:s}=i;if(s)throw s;if(!o.session)throw new Tr;let a=o.session,l=null,c=null;if(this.flowType==="pkce"&&e.email!=null){let _=Qi();await Xr(this.storage,`${this.storageKey}-code-verifier`,_),l=await Ki(_),c=_===l?"plain":"s256"}let{data:h,error:p}=await me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Gn});if(p)throw p;return a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(i){if(fe(i))return{data:{user:null},error:i};throw i}}_decodeJWT(e){return Lg(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Tr;let r=Date.now()/1e3,i=r,o=!0,s=null,a=Lg(e.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{let{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(fe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var i;if(!e){let{data:a,error:l}=r;if(l)throw l;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Tr;let{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e){try{if(!In())throw new Ji("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Ji("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Qa("Not a valid PKCE flow url.");let r=rd(window.location.href);if(e){if(!r.code)throw new Qa("No code detected.");let{data:R,error:$}=await this._exchangeCodeForSession(r.code);if($)throw $;let q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:R.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new Ji(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:l,expires_at:c,token_type:h}=r;if(!s||!l||!a||!h)throw new Ji("No session defined in URL");let p=Math.round(Date.now()/1e3),_=parseInt(l),g=p+_;c&&(g=parseInt(c));let b=g-p;b*1e3<=Ka&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${_}s`);let w=g-_;p-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,g,p):p-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",w,g,p);let{data:D,error:P}=await this._getUser(s);if(P)throw P;let F={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:_,expires_at:g,refresh_token:a,token_type:h,user:D.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:F,redirectType:r.type},error:null}}catch(r){if(fe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){let e=rd(window.location.href);return!!(In()&&(e.access_token||e.error_description))}async _isPKCEFlow(){let e=rd(window.location.href),r=await Wa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return{error:s};let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:l}=await this.admin.signOut(a,e);if(l&&!(jE(l)&&(l.status===404||l.status===401)))return{error:l}}return e!=="others"&&(await this._removeSession(),await od(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){let r=RE(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async r=>{var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let i=null,o=null;if(this.flowType==="pkce"){let s=Qi();await Xr(this.storage,`${this.storageKey}-code-verifier`,`${s}/PASSWORD_RECOVERY`),i=await Ki(s),o=s===i?"plain":"s256"}try{return await me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(fe(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{let{data:i,error:o}=await this._useSession(async s=>{var a,l,c,h,p;let{data:_,error:g}=s;if(g)throw g;let b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await me(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(h=_.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(o)throw o;return In()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(fe(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await VE(async o=>(await LE(o*200),this._debug(r,"refreshing attempt",o),await me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ei})),(o,s,a)=>a&&a.error&&ld(a.error)&&Date.now()+(o+1)*200-i<Ka)}catch(i){if(this._debug(r,"error",i),fe(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),In()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let i=await Wa(this.storage,this.storageKey);if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}let o=Math.round(Date.now()/1e3),s=((e=i.expires_at)!==null&&e!==void 0?e:1/0)<o+jg;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${jg}s`),s){if(this.autoRefreshToken&&i.refresh_token){let{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),ld(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,i;if(!e)throw new Tr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new qa;let{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Tr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(o,"error",s),fe(s)){let a={session:null,error:s};return ld(s)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,r,i=!0){let o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){s.push(c)}});if(await Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await Xr(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await od(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&In()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),Ka);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-e)/Ka);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Ka}ms, refresh threshold is ${KE} ticks`),o<=KE&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ud)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!In()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,i){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let s=Qi();await Xr(this.storage,`${this.storageKey}-code-verifier`,s);let a=await Ki(s),l=s===a?"plain":"s256";this._debug("PKCE","code verifier",`${s.substring(0,5)}...`,"code challenge",a,"method",l);let c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});o.push(c.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?{data:null,error:s}:await me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)return{data:null,error:a};let{data:l,error:c}=await me(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return c?{data:null,error:c}:(!((o=l?.totp)===null||o===void 0)&&o.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return{data:null,error:s};let{data:a,error:l}=await me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(fe(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?{data:null,error:s}:await me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(fe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){let{data:r,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){let{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};let i=e?.factors||[],o=i.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:i,totp:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,i;let{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let a=this._decodeJWT(o.access_token),l=null;a.aal&&(l=a.aal);let c=l;((i=(r=o.user.factors)===null||r===void 0?void 0:r.filter(_=>_.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(c="aal2");let p=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:p},error:null}}))}}return n.nextInstanceID=0,n})();var hR=Bg,$g=hR;var dd=class extends $g{constructor(t){super(t)}};var pR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(h){try{c(r.next(h))}catch(p){s(p)}}function l(h){try{c(r.throw(h))}catch(p){s(p)}}function c(h){h.done?o(h.value):i(h.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},Yi=class{constructor(t,e,r){var i,o,s;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let a=NE(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;let l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:TE,realtime:AE,auth:Object.assign(Object.assign({},ME),{storageKey:l}),global:IE},h=PE(r??{},c);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=h.auth)!==null&&s!==void 0?s:{},this.headers,h.global.fetch),this.fetch=kE(e,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new pE(`${a}/rest/v1`,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Na(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ha(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return pR(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,storageKey:o,flowType:s,lock:a,debug:l},c,h){let p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dd({url:this.authUrl,headers:Object.assign(Object.assign({},p),c),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,flowType:s,lock:a,debug:l,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Ba(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var ZE=(n,t,e)=>new Yi(n,t,e);var hs={API_URL:"https://hhlmyboggdvcltkzuysq.supabase.co",FUNC_URL:"https://hhlmyboggdvcltkzuysq.supabase.co",anon_key:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhobG15Ym9nZ2R2Y2x0a3p1eXNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1Nzc3NDAsImV4cCI6MjA3MTE1Mzc0MH0.ODG3PxopH89JtoN2mwxNTgq4NRXPdXpcA4VLipzW0hY",supabase_LocalStorage_key:"sb-hhlmyboggdvcltkzuysq-auth-token",url:"https://app.tradingrehab.io"};var ge=class n{constructor(t){this.platformId=t;this.supabase=ZE(hs.API_URL,hs.anon_key,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),this.loadSession(),this.supabase.auth.onAuthStateChange((e,r)=>{this.session.set(r),this.user.set(r?.user??null),this.updateSignalsFromSession(r)})}supabase;session=j(null);user=j(null);currentUsername=j(null);sessionLoading=j(!0);async loadSession(){try{let{data:t,error:e}=await this.supabase.auth.getSession();e&&console.error("Error getting session:",e.message),this.session.set(t.session),this.user.set(t.session?.user??null)}catch(t){console.error("Error loading Supabase session",t),this.session.set(null),this.user.set(null)}finally{this.sessionLoading.set(!1)}}updateSignalsFromSession(t){if(t&&t.user){this.user.set(t.user);let e=t.user?.identities?.[0]?.identity_data?.firstname||null;this.currentUsername.set(e)}else this.user.set(null),this.currentUsername.set(null)}loginStatus(){return!this.sessionLoading()&&!!this.session()}GetClient(){return this.supabase}static \u0275fac=function(e){return new(e||n)(O(dt))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var fd=class n{constructor(t){this.supabaseService=t;this.userFirstName=this.supabaseService.currentUsername()}userFirstName;static \u0275fac=function(e){return new(e||n)(T(ge))};static \u0275cmp=X({type:n,selectors:[["app-landing-page"]],decls:66,vars:4,consts:[[1,"container","mt-4"],[1,"mb-4","text-center"],[1,"row","g-4","mb-5"],[1,"col-md-6"],[1,"card","h-100","shadow-sm"],[1,"card-body","d-flex","align-items-center"],[1,"ms-4","me-4","step-icon",2,"--step-color","#2563eb"],[1,"flex-grow-1"],[1,"text-uppercase","fw-bold","text-secondary",2,"letter-spacing","2px"],[1,"fw-semibold","mb-1"],[1,"mb-3","text-secondary"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#2563eb","color","#fff",3,"routerLink"],[1,"ms-4","me-4","step-icon",2,"--step-color","#15803d"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#15803d","color","#fff",3,"routerLink"],[1,"ms-4","me-4","step-icon",2,"--step-color","#b45309"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#b45309","color","#fff",3,"routerLink"],[1,"ms-4","me-4","step-icon",2,"--step-color","#6d28d9"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#6d28d9","color","#fff",3,"routerLink"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"h2",1),f(2,"Begin Your Trading Transformation"),u(),d(3,"h2",1),f(4,"Your Professional Workflow"),u(),d(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"mat-icon"),f(11,"check_circle"),u()(),d(12,"div",7)(13,"div",8),f(14,"Step 1 "),u(),d(15,"h4",9),f(16,"Daily Emotional Check-in"),u(),d(17,"p",10),f(18,"Understand your emotional state before making trading decisions."),u(),d(19,"a",11),f(20,"Begin Assessment"),u()()()()(),d(21,"div",3)(22,"div",4)(23,"div",5)(24,"div",12)(25,"mat-icon"),f(26,"trending_up"),u()(),d(27,"div",7)(28,"div",8),f(29,"Step 2 "),u(),d(30,"h4",9),f(31,"Plan Your Trades"),u(),d(32,"p",10),f(33,"Document your trading plan before executing any trades."),u(),d(34,"a",13),f(35,"Create Trading Plan"),u()()()()(),d(36,"div",3)(37,"div",4)(38,"div",5)(39,"div",14)(40,"mat-icon"),f(41,"candlestick_chart"),u()(),d(42,"div",7)(43,"div",8),f(44,"Step 3 "),u(),d(45,"h4",9),f(46,"Update your Trades"),u(),d(47,"p",10),f(48,"Record results and analyze your trading performance."),u(),d(49,"a",15),f(50,"Manage Positions"),u()()()()(),d(51,"div",3)(52,"div",4)(53,"div",5)(54,"div",16)(55,"mat-icon"),f(56,"psychology"),u()(),d(57,"div",7)(58,"div",8),f(59,"Step 4 "),u(),d(60,"h4",9),f(61,"Reflection & Meditation"),u(),d(62,"p",10),f(63,"Clear your mind with mindfulness practices."),u(),d(64,"a",17),f(65,"Begin Session"),u()()()()()()()),e&2&&(m(19),y("routerLink","/emotions"),m(15),y("routerLink","/tradejournal"),m(15),y("routerLink","/tradejournal"),m(15),y("routerLink","/meditationhub"))},dependencies:[Nt,ie,XC,dn],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:8px}.card-body[_ngcontent-%COMP%]{padding-left:0}.card-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.75rem}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}.btn-custom[_ngcontent-%COMP%]{border-radius:20px;font-weight:600}.step-icon[_ngcontent-%COMP%]{width:64px;height:64px;background:var(--step-color, --primary-btn-color);border-radius:16px;display:flex;align-items:center;justify-content:center;flex-shrink:0;box-shadow:0 2px 8px #0000000a}.step-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:36px;width:36px;height:36px;line-height:36px;display:flex;align-items:center;justify-content:center}.card-body.d-flex.align-items-center[_ngcontent-%COMP%]{gap:1.5rem}@media (max-width: 576px){.card-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.btn-custom[_ngcontent-%COMP%]{padding:.5rem 1rem}}"]})};var Zt=class n{constructor(t,e){this.supabaseService=t;this.router=e}canActivate(t,e){return this.supabaseService.loginStatus()?!0:this.router.createUrlTree([""],{queryParams:{returnUrl:e.url}})}static \u0275fac=function(e){return new(e||n)(O(ge),O(Ue))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var Za=class n{constructor(t,e){this.supabaseService=t;this.router=e}canActivate(t,e){return this.supabaseService.loginStatus()?this.router.createUrlTree(["/home"]):!0}static \u0275fac=function(e){return new(e||n)(O(ge),O(Ue))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var sS=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||n)(T(Cn),T(Ye))};static \u0275dir=we({type:n})}return n})(),_s=(()=>{class n extends sS{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Vn(n)))(i||n)}})();static \u0275dir=we({type:n,features:[At]})}return n})(),ri=new V(""),mR={provide:ri,useExisting:on(()=>nl),multi:!0},nl=(()=>{class n extends _s{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Vn(n)))(i||n)}})();static \u0275dir=we({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&C("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[an([mR]),At]})}return n})(),gR={provide:ri,useExisting:on(()=>Se),multi:!0};function _R(){let n=br()?br().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var vR=new V(""),Se=(()=>{class n extends sS{_compositionMode;_composing=!1;constructor(e,r,i){super(e,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!_R())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||n)(T(Cn),T(Ye),T(vR,8))};static \u0275dir=we({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&C("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[an([gR]),At]})}return n})();function ti(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function aS(n){return n!=null&&typeof n.length=="number"}var Kg=new V(""),Zg=new V(""),yR=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ee=class{static min(t){return bR(t)}static max(t){return wR(t)}static required(t){return CR(t)}static requiredTrue(t){return ER(t)}static email(t){return SR(t)}static minLength(t){return DR(t)}static maxLength(t){return xR(t)}static pattern(t){return IR(t)}static nullValidator(t){return lS(t)}static compose(t){return pS(t)}static composeAsync(t){return gS(t)}};function bR(n){return t=>{if(ti(t.value)||ti(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function wR(n){return t=>{if(ti(t.value)||ti(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function CR(n){return ti(n.value)?{required:!0}:null}function ER(n){return n.value===!0?null:{required:!0}}function SR(n){return ti(n.value)||yR.test(n.value)?null:{email:!0}}function DR(n){return t=>ti(t.value)||!aS(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function xR(n){return t=>aS(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function IR(n){if(!n)return lS;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(ti(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function lS(n){return null}function cS(n){return n!=null}function uS(n){return Pi(n)?je(n):n}function dS(n){let t={};return n.forEach(e=>{t=e!=null?N(N({},t),e):t}),Object.keys(t).length===0?null:t}function fS(n,t){return t.map(e=>e(n))}function TR(n){return!n.validate}function hS(n){return n.map(t=>TR(t)?t:e=>t.validate(e))}function pS(n){if(!n)return null;let t=n.filter(cS);return t.length==0?null:function(e){return dS(fS(e,t))}}function mS(n){return n!=null?pS(hS(n)):null}function gS(n){if(!n)return null;let t=n.filter(cS);return t.length==0?null:function(e){let r=fS(e,t).map(uS);return ks(r).pipe(G(dS))}}function _S(n){return n!=null?gS(hS(n)):null}function JE(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function vS(n){return n._rawValidators}function yS(n){return n._rawAsyncValidators}function Hg(n){return n?Array.isArray(n)?n:[n]:[]}function pd(n,t){return Array.isArray(n)?n.includes(t):n===t}function YE(n,t){let e=Hg(t);return Hg(n).forEach(i=>{pd(e,i)||e.push(i)}),e}function XE(n,t){return Hg(t).filter(e=>!pd(n,e))}var md=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=mS(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=_S(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Xi=class extends md{name;get formDirective(){return null}get path(){return null}},eo=class extends md{_parent=null;name=null;valueAccessor=null},gd=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},MR={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},CW=B(N({},MR),{"[class.ng-submitted]":"isSubmitted"}),Ae=(()=>{class n extends gd{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(T(eo,2))};static \u0275dir=we({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ne("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[At]})}return n})(),Qn=(()=>{class n extends gd{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(T(Xi,10))};static \u0275dir=we({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ne("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[At]})}return n})();var Ja="VALID",hd="INVALID",ps="PENDING",Ya="DISABLED",ni=class{},_d=class extends ni{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Xa=class extends ni{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},el=class extends ni{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},ms=class extends ni{status;source;constructor(t,e){super(),this.status=t,this.source=e}},zg=class extends ni{source;constructor(t){super(),this.source=t}},qg=class extends ni{source;constructor(t){super(),this.source=t}};function Jg(n){return(wd(n)?n.validators:n)||null}function AR(n){return Array.isArray(n)?mS(n):n||null}function Yg(n,t){return(wd(t)?t.asyncValidators:n)||null}function kR(n){return Array.isArray(n)?_S(n):n||null}function wd(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function bS(n,t,e){let r=n.controls;if(!(t?Object.keys(r):r).length)throw new A(1e3,"");if(!r[e])throw new A(1001,"")}function wS(n,t,e){n._forEachChild((r,i)=>{if(e[i]===void 0)throw new A(1002,"")})}var gs=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return _r(this.statusReactive)}set status(t){_r(()=>this.statusReactive.set(t))}_status=et(()=>this.statusReactive());statusReactive=j(void 0);get valid(){return this.status===Ja}get invalid(){return this.status===hd}get pending(){return this.status==ps}get disabled(){return this.status===Ya}get enabled(){return this.status!==Ya}errors;get pristine(){return _r(this.pristineReactive)}set pristine(t){_r(()=>this.pristineReactive.set(t))}_pristine=et(()=>this.pristineReactive());pristineReactive=j(!0);get dirty(){return!this.pristine}get touched(){return _r(this.touchedReactive)}set touched(t){_r(()=>this.touchedReactive.set(t))}_touched=et(()=>this.touchedReactive());touchedReactive=j(!1);get untouched(){return!this.touched}_events=new Re;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(YE(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(YE(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(XE(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(XE(t,this._rawAsyncValidators))}hasValidator(t){return pd(this._rawValidators,t)}hasAsyncValidator(t){return pd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(B(N({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new el(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new el(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(B(N({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Xa(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new Xa(!0,r))}markAsPending(t={}){this.status=ps;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ms(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(B(N({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ya,this.errors=null,this._forEachChild(i=>{i.disable(B(N({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new _d(this.value,r)),this._events.next(new ms(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(B(N({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ja,this._forEachChild(r=>{r.enable(B(N({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(B(N({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ja||this.status===ps)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new _d(this.value,e)),this._events.next(new ms(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(B(N({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ya:Ja}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=ps,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let r=uS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new ms(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new be,this.statusChanges=new be}_calculateStatus(){return this._allControlsDisabled()?Ya:this.errors?hd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ps)?ps:this._anyControlsHaveStatus(hd)?hd:Ja}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new Xa(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new el(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){wd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=AR(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=kR(this._rawAsyncValidators)}},vd=class extends gs{constructor(t,e,r){super(Jg(e),Yg(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){wS(this,!0,t),Object.keys(t).forEach(r=>{bS(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Wg=class extends vd{};var Cd=new V("",{providedIn:"root",factory:()=>Ed}),Ed="always";function CS(n,t){return[...t.path,n]}function Gg(n,t,e=Ed){Xg(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),PR(n,t),RR(n,t),OR(n,t),NR(n,t)}function eS(n,t,e=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),bd(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function yd(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function NR(n,t){if(t.valueAccessor.setDisabledState){let e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Xg(n,t){let e=vS(n);t.validator!==null?n.setValidators(JE(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let r=yS(n);t.asyncValidator!==null?n.setAsyncValidators(JE(r,t.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();yd(t._rawValidators,i),yd(t._rawAsyncValidators,i)}function bd(n,t){let e=!1;if(n!==null){if(t.validator!==null){let i=vS(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let i=yS(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}let r=()=>{};return yd(t._rawValidators,r),yd(t._rawAsyncValidators,r),e}function PR(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&ES(n,t)})}function OR(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&ES(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function ES(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function RR(n,t){let e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function FR(n,t){n==null,Xg(n,t)}function LR(n,t){return bd(n,t)}function SS(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function VR(n){return Object.getPrototypeOf(n.constructor)===_s}function jR(n,t){n._syncPendingControls(),t.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function DS(n,t){if(!t)return null;Array.isArray(t);let e,r,i;return t.forEach(o=>{o.constructor===Se?e=o:VR(o)?r=o:i=o}),i||r||e||null}function UR(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function tS(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function nS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var tl=class extends gs{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,r){super(Jg(e),Yg(r,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wd(e)&&(e.nonNullable||e.initialValueIsDefault)&&(nS(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){tS(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){tS(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){nS(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var BR=n=>n instanceof tl;var $R={provide:eo,useExisting:on(()=>st)},rS=Promise.resolve(),st=(()=>{class n extends eo{_changeDetectorRef;callSetDisabledState;control=new tl;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new be;constructor(e,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=DS(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),SS(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Gg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){rS.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let r=e.isDisabled.currentValue,i=r!==0&&Sn(r);rS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?CS(e,this._parent):[e]}static \u0275fac=function(r){return new(r||n)(T(Xi,9),T(Kg,10),T(Zg,10),T(ri,10),T(ke,8),T(Cd,8))};static \u0275dir=we({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[an([$R]),At,hr]})}return n})(),Kn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=we({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),HR={provide:ri,useExisting:on(()=>to),multi:!0},to=(()=>{class n extends _s{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Vn(n)))(i||n)}})();static \u0275dir=we({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&C("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[an([HR]),At]})}return n})();var zR={provide:ri,useExisting:on(()=>rl),multi:!0},rl=(()=>{class n extends _s{writeValue(e){this.setProperty("value",parseFloat(e))}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Vn(n)))(i||n)}})();static \u0275dir=we({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,i){r&1&&C("change",function(s){return i.onChange(s.target.value)})("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[an([zR]),At]})}return n})(),xS=new V("");var qR={provide:Xi,useExisting:on(()=>Tn)},Tn=(()=>{class n extends Xi{callSetDisabledState;get submitted(){return _r(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=et(()=>this._submittedReactive());_submittedReactive=j(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new be;constructor(e,r,i){super(),this.callSetDisabledState=i,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(bd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let r=this.form.get(e.path);return Gg(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){eS(e.control||null,e,!1),UR(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this._submittedReactive.set(!0),jR(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new zg(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new qg(this.form))}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,i=this.form.get(e.path);r!==i&&(eS(r||null,e),BR(i)&&(Gg(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);FR(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&LR(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Xg(this.form,this),this._oldForm&&bd(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(T(Kg,10),T(Zg,10),T(Cd,8))};static \u0275dir=we({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&C("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[an([qR]),At,hr]})}return n})();var WR={provide:eo,useExisting:on(()=>Mn)},Mn=(()=>{class n extends eo{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new be;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=DS(this,o)}ngOnChanges(e){this._added||this._setUpControl(),SS(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return CS(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(T(Xi,13),T(Kg,10),T(Zg,10),T(ri,10),T(xS,8))};static \u0275dir=we({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[an([WR]),At,hr]})}return n})(),GR={provide:ri,useExisting:on(()=>ii),multi:!0};function IS(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function QR(n){return n.split(":")[0]}var ii=(()=>{class n extends _s{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let r=this._getOptionId(e),i=IS(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){let r=QR(e);return this._optionMap.has(r)?this._optionMap.get(r):e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Vn(n)))(i||n)}})();static \u0275dir=we({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&C("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[an([GR]),At]})}return n})(),vs=(()=>{class n{_element;_renderer;_select;id;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(IS(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(T(Ye),T(Cn),T(ii,9))};static \u0275dir=we({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),KR={provide:ri,useExisting:on(()=>TS),multi:!0};function iS(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function ZR(n){return n.split(":")[0]}var TS=(()=>{class n extends _s{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let r;if(Array.isArray(e)){let i=e.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],c=this._getOptionValue(l.value);i.push(c)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let c=this._getOptionValue(l.value);i.push(c)}}}this.value=i,e(i)}}_registerOption(e){let r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){let r=ZR(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Vn(n)))(i||n)}})();static \u0275dir=we({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&C("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[an([KR]),At]})}return n})(),ys=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(iS(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(iS(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(T(Ye),T(Cn),T(TS,9))};static \u0275dir=we({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var MS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Je({})}return n})(),Qg=class extends gs{constructor(t,e,r){super(Jg(e),Yg(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){wS(this,!1,t),t.forEach((r,i)=>{bS(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,r)=>r._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function oS(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Zn=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,r=null){let i=this._reduceControls(e),o={};return oS(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new vd(i,o)}record(e,r=null){let i=this._reduceControls(e);return new Wg(i,r)}control(e,r,i){let o={};return this.useNonNullable?(oS(r)?o=r:(o.validators=r,o.asyncValidators=i),new tl(e,B(N({},o),{nonNullable:!0}))):new tl(e,r,i)}array(e,r,i){let o=e.map(s=>this._createControl(s));return new Qg(o,r,i)}_reduceControls(e){let r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){if(e instanceof tl)return e;if(e instanceof gs)return e;if(Array.isArray(e)){let r=e[0],i=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(r,i,o)}else return this.control(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Cd,useValue:e.callSetDisabledState??Ed}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Je({imports:[MS]})}return n})(),hn=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:xS,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Cd,useValue:e.callSetDisabledState??Ed}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Je({imports:[MS]})}return n})();var bs=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;async loadQuestions(){let{data:t,error:e}=await this.supabase.rpc("get_random_activequestions");if(e)throw console.error("Error loading questions: ",e),e;return t}async canLoadCheckInQuestions(){let t=this.supabaseService.user()?.id;if(!t)return console.error("User not authenticated, cannot check check-in status."),!1;let{data:e,error:r}=await this.supabase.rpc("can_checkin",{user_id:t});return r?(console.error("Error in RPC can_checkin:",r),!1):e===!0}async getEmotionCheckInResultForDate(t){let e=this.supabaseService.user()?.id;if(!e)return console.error("User not authenticated"),null;let r=new Date(t.setHours(0,0,0,0)).toISOString(),i=new Date(t.setHours(23,59,59,999)).toISOString(),{data:o,error:s}=await this.supabase.from("answers").select("analysis").eq("user_id",e).gte("created_at",r).lte("created_at",i).order("created_at",{ascending:!1}).limit(1).single();return s?s.code==="PGRST116"?(console.log(`No check-in found for date: ${t.toDateString()}`),null):(console.error("Error fetching check-in result for date:",s),null):o?o.analysis:null}async submitUserCheckIn(t){let e=this.supabaseService.user()?.id;if(!e)return{error:new Error("User not authenticated")};let{error:r}=await this.supabase.rpc("perform_checkin",{in_user_id:e,in_answers:t.answers,in_analysis:t.analysis});return{error:r}}async adminLoadQuestions(){let{data:t,error:e}=await this.supabase.from("adminquestions").select("*");if(e)throw console.error("Error loading questions: ",e),e;return t}async adminSaveQuestions(t){let e=null;for(let r of t.filter(i=>i.isModified))if(r.question_id){let{data:i,error:o}=await this.supabase.from("adminquestions").update({question_data:r.question_data,active:r.active}).eq("question_id",r.question_id).select().single();if(o){console.error("Error updating question:",o),e=o;break}else r.updated_at=i.updated_at,r.isModified=!1}else{let{data:i,error:o}=await this.supabase.from("adminquestions").insert([{question_data:r.question_data,active:r.active}]).select().single();if(o){console.error("Error inserting question:",o),e=o;break}else r.question_id=i.question_id,r.created_at=i.created_at,r.updated_at=i.updated_at,r.isModified=!1}return{error:e}}async deleteQuestion(t){let{error:e}=await this.supabase.from("adminquestions").delete().eq("question_id",t.question_id);return{error:e}}static \u0275fac=function(e){return new(e||n)(O(ge))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var JR=(n,t)=>({"alert-success":n,"alert-danger":t});function YR(n,t){if(n&1&&(d(0,"div",18),f(1),u()),n&2){let e=v();y("ngClass",En(2,JR,e.messageType==="success",e.messageType==="error")),m(),z(" ",e.message," ")}}function XR(n,t){if(n&1){let e=ee();$n(0),d(1,"input",27),K("ngModelChange",function(i){E(e);let o=v().$implicit;return Y(o.choicesInput,i)||(o.choicesInput=i),S(i)}),C("change",function(){E(e);let i=v().$implicit,o=v();return S(o.updateChoices(i))}),u(),d(2,"div",28),f(3,'e.g., "Option A, Option B, Option C"'),u(),Hn()}if(n&2){let e=v().$implicit;m(),Q("ngModel",e.choicesInput)}}function eF(n,t){if(n&1){let e=ee();d(0,"tr")(1,"td")(2,"select",19),K("ngModelChange",function(i){let o=E(e).$implicit;return Y(o.question_data.question_type,i)||(o.question_data.question_type=i),S(i)}),C("change",function(){let i=E(e).$implicit,o=v();return S(o.onQuestionChange(i))}),d(3,"option",9),f(4,"Fill"),u(),d(5,"option",10),f(6,"Multiple"),u(),d(7,"option",11),f(8,"Select One"),u()()(),d(9,"td")(10,"input",20),K("ngModelChange",function(i){let o=E(e).$implicit;return Y(o.question_data.question_icon,i)||(o.question_data.question_icon=i),S(i)}),C("change",function(){let i=E(e).$implicit,o=v();return S(o.onQuestionChange(i))}),u()(),d(11,"td")(12,"input",21),K("ngModelChange",function(i){let o=E(e).$implicit;return Y(o.question_data.question_title,i)||(o.question_data.question_title=i),S(i)}),C("change",function(){let i=E(e).$implicit,o=v();return S(o.onQuestionChange(i))}),u()(),d(13,"td")(14,"textarea",22),K("ngModelChange",function(i){let o=E(e).$implicit;return Y(o.question_data.question,i)||(o.question_data.question=i),S(i)}),C("change",function(){let i=E(e).$implicit,o=v();return S(o.onQuestionChange(i))}),u()(),d(15,"td"),M(16,XR,4,1,"ng-container",23),u(),d(17,"td")(18,"input",24),K("ngModelChange",function(i){let o=E(e).$implicit;return Y(o.question_data.placeholder,i)||(o.question_data.placeholder=i),S(i)}),C("change",function(){let i=E(e).$implicit,o=v();return S(o.onQuestionChange(i))}),u()(),d(19,"td")(20,"div",25)(21,"input",26),K("ngModelChange",function(i){let o=E(e).$implicit;return Y(o.active,i)||(o.active=i),S(i)}),C("change",function(){let i=E(e).$implicit,o=v();return S(o.onQuestionChange(i))}),u()()(),d(22,"td"),f(23),ht(24,"date"),u()()}if(n&2){let e=t.$implicit;m(2),Q("ngModel",e.question_data.question_type),m(8),Q("ngModel",e.question_data.question_icon),m(2),Q("ngModel",e.question_data.question_title),m(2),Q("ngModel",e.question_data.question),m(2),y("ngIf",e.question_data.question_type!=="fill"),m(2),Q("ngModel",e.question_data.placeholder),m(3),Q("ngModel",e.active),m(2),x(kt(24,8,e.updated_at,"short"))}}function tF(n,t){if(n&1){let e=ee();d(0,"div",29)(1,"input",30),K("ngModelChange",function(i){E(e);let o=v();return Y(o.newQuestionChoices,i)||(o.newQuestionChoices=i),S(i)}),u()()}if(n&2){let e=v();m(),Q("ngModel",e.newQuestionChoices)}}var Sd=class n{constructor(t,e){this.cdr=t;this.supabaseService=e}questions=[];newQuestionText="";newQuestionType="fill";newQuestionChoices="";message="";messageType="success";async ngOnInit(){let t=await this.supabaseService.adminLoadQuestions();this.questions=t.map(e=>B(N({},e),{choicesInput:e.question_data.choices?.join(", ")||""})),this.cdr.markForCheck()}onQuestionChange(t){t.isModified=!0}updateChoices(t){let e=t.choicesInput??"";t.question_data.choices=e.split(",").map(r=>r.trim()).filter(r=>r),t.isModified=!0}addQuestion(){if(!this.newQuestionText.trim())return;let t={question_type:this.newQuestionType,question:this.newQuestionText.trim(),placeholder:this.newQuestionText.trim()};if(this.newQuestionType!=="fill"){let e=this.newQuestionChoices.split(",").map(r=>r.trim()).filter(r=>r);t.choices=e}this.questions.push({question_data:t,choicesInput:this.newQuestionChoices,active:!0,isModified:!0}),this.newQuestionText="",this.newQuestionChoices="",this.newQuestionType="fill",this.cdr.detectChanges()}async saveChanges(){let{error:t}=await this.supabaseService.adminSaveQuestions(this.questions);t?this.showMessage("Error saving questions","error"):this.showMessage("Questions saved successfully","success"),this.cdr.detectChanges()}async deleteQuestion(t){if(!t.question_id){this.questions=this.questions.filter(r=>r!==t),this.showMessage("Question removed locally","success"),this.cdr.markForCheck();return}let{error:e}=await this.supabaseService.deleteQuestion(t);e?this.showMessage("Error deleting question","error"):(this.questions=this.questions.filter(r=>r.question_id!==t.question_id),this.showMessage("Question deleted successfully","success")),this.cdr.markForCheck()}showMessage(t,e){this.message=t,this.messageType=e,this.cdr.markForCheck(),setTimeout(()=>{this.message="",this.cdr.markForCheck()},4e3)}hasChanges(){return this.questions.some(t=>t.isModified)}static \u0275fac=function(e){return new(e||n)(T(ke),T(bs))};static \u0275cmp=X({type:n,selectors:[["app-admin-emotion-dashboard"]],decls:53,vars:6,consts:[[1,"container-fluid","mt-4","p-5"],["class","alert",3,"ngClass",4,"ngIf"],[1,"table","mt-5"],[4,"ngFor","ngForOf"],["href","https://fonts.google.com/icons","target","_blank"],[1,"mt-4"],[1,"row","g-3","align-items-center","mb-3"],[1,"col-md-3"],[1,"form-select",3,"ngModelChange","ngModel"],["value","fill"],["value","multiple"],["value","select-one"],[1,"col-md-5"],["type","text","placeholder","Enter question text",1,"form-control",3,"ngModelChange","ngModel"],["class","col-md-4",4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click","disabled"],[1,"alert",3,"ngClass"],[1,"form-select",3,"ngModelChange","change","ngModel"],["type","text","placeholder","Enter icon URL or name",1,"form-control",3,"ngModelChange","change","ngModel"],["type","text","placeholder","Enter question title",1,"form-control",3,"ngModelChange","change","ngModel"],["type","text",1,"form-control",3,"ngModelChange","change","ngModel"],[4,"ngIf"],["type","text","placeholder","Enter placeholder text",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"form-check","form-switch"],["type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel"],["type","text","placeholder","Comma-separated choices",1,"form-control","mb-1",3,"ngModelChange","change","ngModel"],[1,"text-muted","small"],[1,"col-md-4"],["type","text","placeholder","Comma-separated choices",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,r){e&1&&(d(0,"div",0),M(1,YR,2,5,"div",1),d(2,"h1"),f(3,"Admin Emotion Question Dashboard"),u(),d(4,"table",2)(5,"thead")(6,"tr")(7,"th"),f(8,"Type"),u(),d(9,"th"),f(10,"Question Icon"),u(),d(11,"th"),f(12,"Question Title"),u(),d(13,"th"),f(14,"Question Text"),u(),d(15,"th"),f(16,"Choices"),u(),d(17,"th"),f(18,"Placeholder"),u(),d(19,"th"),f(20,"Active"),u(),d(21,"th"),f(22,"Last Updated"),u()()(),d(23,"tbody"),M(24,eF,25,11,"tr",3),u()(),d(25,"label"),f(26,"For icons, go to this website: "),d(27,"a",4),f(28,"https://fonts.google.com/icons"),u(),f(29,". "),L(30,"br"),f(31,"Search for favourite icon. When you click your icon, you will look for the name of the icon and "),L(32,"br"),f(33," put it into the space"),u(),d(34,"h4",5),f(35,"Add New Question"),u(),d(36,"div",6)(37,"div",7)(38,"select",8),K("ngModelChange",function(o){return Y(r.newQuestionType,o)||(r.newQuestionType=o),o}),d(39,"option",9),f(40,"Fill"),u(),d(41,"option",10),f(42,"Multiple"),u(),d(43,"option",11),f(44,"Select One"),u()()(),d(45,"div",12)(46,"input",13),K("ngModelChange",function(o){return Y(r.newQuestionText,o)||(r.newQuestionText=o),o}),u()(),M(47,tF,2,1,"div",14),u(),d(48,"div",15)(49,"button",16),C("click",function(){return r.addQuestion()}),f(50,"Add Question"),u(),d(51,"button",17),C("click",function(){return r.saveChanges()}),f(52,"Save Changes"),u()()()),e&2&&(m(),y("ngIf",r.message),m(23),y("ngForOf",r.questions),m(14),Q("ngModel",r.newQuestionType),m(8),Q("ngModel",r.newQuestionText),m(),y("ngIf",r.newQuestionType!=="fill"),m(4),y("disabled",!r.hasChanges()))},dependencies:[pt,vs,ys,Se,nl,ii,Ae,st,ie,cn,nt,ye,pu],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:auto}.question-row[_ngcontent-%COMP%]{position:relative}.delete-button[_ngcontent-%COMP%]{display:none;position:absolute;right:10px;top:50%;transform:translateY(-50%)}.question-row[_ngcontent-%COMP%]:hover   .delete-button[_ngcontent-%COMP%]{display:block}.alert[_ngcontent-%COMP%]{padding:10px 20px;margin-bottom:15px;border-radius:4px;text-align:center}.table[_ngcontent-%COMP%]{--bs-table-bg: transparent}"]})};var n_=(n,t)=>t.some(e=>n instanceof e),kS,NS;function nF(){return kS||(kS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rF(){return NS||(NS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var r_=new WeakMap,e_=new WeakMap,Dd=new WeakMap;function iF(n){let t=new Promise((e,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{e(no(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return Dd.set(t,n),t}function oF(n){if(r_.has(n))return;let t=new Promise((e,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{e(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});r_.set(n,t)}var i_={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return r_.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return no(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function FS(n){i_=n(i_)}function sF(n){return rF().includes(n)?function(...t){return n.apply(o_(this),t),no(this.request)}:function(...t){return no(n.apply(o_(this),t))}}function aF(n){return typeof n=="function"?sF(n):(n instanceof IDBTransaction&&oF(n),n_(n,nF())?new Proxy(n,i_):n)}function no(n){if(n instanceof IDBRequest)return iF(n);if(e_.has(n))return e_.get(n);let t=aF(n);return t!==n&&(e_.set(n,t),Dd.set(t,n)),t}var o_=n=>Dd.get(n);function il(n,t,{blocked:e,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,t),a=no(s);return r&&s.addEventListener("upgradeneeded",l=>{r(no(s.result),l.oldVersion,l.newVersion,no(s.transaction),l)}),e&&s.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var lF=["get","getKey","getAll","getAllKeys","count"],cF=["put","add","delete","clear"],t_=new Map;function PS(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(t_.get(t))return t_.get(t);let e=t.replace(/FromIndex$/,""),r=t!==e,i=cF.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lF.includes(e)))return;let o=async function(s,...a){let l=this.transaction(s,i?"readwrite":"readonly"),c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[e](...a),i&&l.done]))[0]};return t_.set(t,o),o}FS(n=>B(N({},n),{get:(t,e,r)=>PS(t,e)||n.get(t,e,r),has:(t,e)=>!!PS(t,e)||n.has(t,e)}));var uF=["continue","continuePrimaryKey","advance"],OS={},s_=new WeakMap,LS=new WeakMap,dF={get(n,t){if(!uF.includes(t))return n[t];let e=OS[t];return e||(e=OS[t]=function(...r){s_.set(this,LS.get(this)[t](...r))}),e}};async function*fF(...n){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...n)),!t)return;t=t;let e=new Proxy(t,dF);for(LS.set(e,t),Dd.set(e,o_(t));t;)yield e,t=await(s_.get(e)||t.continue()),s_.delete(e)}function RS(n,t){return t===Symbol.asyncIterator&&n_(n,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&n_(n,[IDBIndex,IDBObjectStore])}FS(n=>B(N({},n),{get(t,e,r){return RS(t,e)?fF:n.get(t,e,r)},has(t,e){return RS(t,e)||n.has(t,e)}}));var pn=class n{constructor(t,e){this.supabaseService=t;this.platformId=e;this.supabase=this.supabaseService.GetClient()}supabase;ngOnInit(){}async getUserTradeAccounts(){let t=this.supabaseService.user();if(!t)throw new Error("User not authenticated");let e="tradeaccount",r=!1,i=null;if(typeof window<"u"){r=sessionStorage.getItem(`${e}_refresh`)==="yes";let a=sessionStorage.getItem(e);if(a)try{i=JSON.parse(a)}catch(l){console.error("Error parsing cached trade accounts:",l),i=null}}if(!r&&i)return i;let{data:o,error:s}=await this.supabase.from(e).select("*").eq("user_id",t.id);if(s)throw console.error("Error fetching trade accounts:",s),s;return typeof window<"u"&&(sessionStorage.setItem(e,JSON.stringify(o)),sessionStorage.removeItem(`${e}_refresh`)),o||[]}async addTradeAccount(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let c=t,{track_pl:r,include_in_analytics:i,trading_instruments:o}=c,s=co(c,["track_pl","include_in_analytics","trading_instruments"]),a={track_pl:r,include_in_analytics:i,trading_instruments:o},{error:l}=await this.supabase.from("tradeaccount").insert([B(N({},s),{user_id:e.id,metadata:a})]);return l?(console.error("Failed to add trade account:",l),!1):(sessionStorage.setItem("tradeaccount_refresh","yes"),!0)}async editTradeAccount(t,e){let r=this.supabaseService.user();if(!r)throw new Error("User not authenticated");let h=e,{track_pl:i,include_in_analytics:o,trading_instruments:s}=h,a=co(h,["track_pl","include_in_analytics","trading_instruments"]),l={track_pl:i,include_in_analytics:o,trading_instruments:s},{error:c}=await this.supabase.from("tradeaccount").update(B(N({},a),{metadata:l})).eq("account_id",t).eq("user_id",r.id);return c?(console.error("Failed to update trade account:",c),!1):(sessionStorage.setItem("tradeaccount_refresh","yes"),!0)}async removeTradeAccount(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let{error:r}=await this.supabase.from("tradejournal").delete().eq("trade_account_id",t).eq("userid",e.id);if(r)return console.error("Failed to delete associated trade logs:",r),!1;let{error:i}=await this.supabase.from("tradeaccount").delete().eq("account_id",t).eq("user_id",e.id);return i?(console.error("Failed to remove trade account:",i),!1):(typeof window<"u"&&(sessionStorage.setItem("tradeaccount_refresh","yes"),sessionStorage.setItem(`tradejournal_${t}_refresh`,"yes")),!0)}async getProfile(){console.log("getting profile picture");let t=this.supabaseService.user();if(!t)throw new Error("User not authenticated");return this.supabase.from("usersaccount").select("*").eq("user_id",t.id).single()}async createProfile(t){if(!this.supabaseService.user())throw new Error("User not authenticated");return this.supabase.from("usersaccount").insert(t)}async updateProfile(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");return this.supabase.from("usersaccount").update(t).eq("user_id",e.id)}async uploadProfilePicture(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let r=t.name.split(".").pop(),i=`${e.id}/profile.${r}`;await(await il("profile-cache",1,{upgrade(a){a.createObjectStore("pictures")}})).delete("pictures",i);let{error:s}=await this.supabase.storage.from("user-profile-pictures").upload(i,t,{upsert:!0});return s?null:i}async cacheProfilePictureBlob(t,e){await(await il("profile-cache",1,{upgrade(i){i.createObjectStore("pictures")}})).put("pictures",e,t)}async getCachedProfilePictureBlobUrl(t){if(!t)return null;let e=await il("profile-cache",1,{upgrade(a){a.createObjectStore("pictures")}}),r=await e.get("pictures",t);if(r)return URL.createObjectURL(r);let i=await this.getPublicUrl(t);if(!i)return null;let o=await fetch(i);if(!o.ok)return null;let s=await o.blob();return await e.put("pictures",s,t),URL.createObjectURL(s)}clearCachedProfilePictureBlobUrl(){if(wr(this.platformId)){let t=sessionStorage.getItem("profile_picture_blob_url");t&&(URL.revokeObjectURL(t),sessionStorage.removeItem("profile_picture_blob_url"))}}async deleteProfilePicture(){let{data:{user:t}}=await this.supabase.auth.getUser();if(!t)return;let e=`${t.id}/profile.png`,r=`${t.id}/profile.jpg`,i=`${t.id}/profile.jpeg`,o=`${t.id}/profile.webp`;await this.supabase.storage.from("user-profile-pictures").remove([e,r,i,o]);let s=await il("profile-cache",1,{upgrade(a){a.createObjectStore("pictures")}});await s.delete("pictures",e),await s.delete("pictures",r),await s.delete("pictures",i),await s.delete("pictures",o)}async getPublicUrl(t){let{data:e}=await this.supabase.storage.from("user-profile-pictures").createSignedUrl(t,60);return e?.signedUrl??null}static \u0275fac=function(e){return new(e||n)(O(ge),O(dt))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var oi=class n{constructor(t,e,r,i){this.supabaseService=t;this.supabaseAccountService=e;this.router=r;this.document=i;this.supabase=this.supabaseService.GetClient(),this.rootDomainName="https://app.tradingrehab.io/auth/update-password"}supabase;rootDomainName;async signIn(t,e){try{let{error:r}=await this.supabase.auth.signInWithPassword({email:t,password:e});if(r)throw r;return{success:!0}}catch(r){return console.error("Sign in error:",r),{success:!1,error:r}}}async logout(t=!0){try{await this.supabase.auth.signOut()}catch(e){console.error("Sign out error:",e)}this.supabaseService.updateSignalsFromSession(null),this.supabaseAccountService.clearCachedProfilePictureBlobUrl(),wr(this.supabaseService.platformId)&&(sessionStorage.clear(),localStorage.clear()),t&&this.router.navigate(["/"])}async signUp(t,e,r,i){let{error:o}=await this.supabase.auth.signUp({email:t,password:e,options:{data:{firstname:r,lastname:i}}});return o?{success:!1,error:o}:{success:!0}}async requestPasswordReset(t){let{error:e}=await this.supabase.auth.resetPasswordForEmail(t,{redirectTo:"https://app.tradingrehab.io/auth/update-password"});return e?{success:!1,error:e}:{success:!0}}async updatePassword(t){let{error:e}=await this.supabase.auth.updateUser({password:t});return e?{success:!1,error:e}:{success:!0}}static \u0275fac=function(e){return new(e||n)(O(ge),O(pn),O(Ue),O(Fe))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};function hF(n,t){if(n&1&&(d(0,"div",13),f(1),u()),n&2){let e=v();m(),z(" ",e.errorMessage," ")}}function pF(n,t){n&1&&(d(0,"div",28),f(1," A valid email is required. "),u())}function mF(n,t){n&1&&(d(0,"div",28),f(1," Password must be at least 6 characters. "),u())}function gF(n,t){if(n&1){let e=ee();d(0,"form",14),C("ngSubmit",function(){E(e);let i=v();return S(i.onSubmit())}),d(1,"div",15)(2,"label",16),f(3,"Email"),u(),L(4,"input",17),M(5,pF,2,0,"div",18),u(),d(6,"div",15)(7,"label",19),f(8,"Password"),u(),L(9,"input",20),M(10,mF,2,0,"div",18),d(11,"div",21)(12,"a",22),f(13,"Forgot password?"),u()()(),d(14,"div",23)(15,"button",24),f(16,"Continue"),u()(),d(17,"div",25)(18,"p",26),f(19,"Don't have an account? "),d(20,"a",27),C("click",function(){E(e);let i=v();return S(i.setActiveTab("signup"))}),f(21,"Sign up"),u()()()()}if(n&2){let e,r,i=v();y("formGroup",i.signinForm),m(5),y("ngIf",((e=i.signinForm.get("email"))==null?null:e.invalid)&&((e=i.signinForm.get("email"))==null?null:e.touched)),m(5),y("ngIf",((r=i.signinForm.get("password"))==null?null:r.invalid)&&((r=i.signinForm.get("password"))==null?null:r.touched)),m(5),y("disabled",i.signinForm.invalid)}}function _F(n,t){n&1&&(d(0,"small",43),f(1," First name is required "),u())}function vF(n,t){n&1&&(d(0,"small",43),f(1," Last name is required "),u())}function yF(n,t){n&1&&(d(0,"small",43),f(1," Valid email is required "),u())}function bF(n,t){n&1&&(d(0,"small",43),f(1," Password must be at least 6 characters "),u())}function wF(n,t){n&1&&(d(0,"small",43),f(1," Passwords do not match "),u())}function CF(n,t){if(n&1){let e=ee();d(0,"form",14),C("ngSubmit",function(){E(e);let i=v();return S(i.onSignupSubmit())}),d(1,"div",29)(2,"div",30)(3,"label",31),f(4,"First Name"),u(),L(5,"input",32),M(6,_F,2,0,"small",33),u(),d(7,"div",30)(8,"label",34),f(9,"Last Name"),u(),L(10,"input",35),M(11,vF,2,0,"small",33),u()(),d(12,"div",15)(13,"label",36),f(14,"Email"),u(),L(15,"input",37),M(16,yF,2,0,"small",33),u(),d(17,"div",15)(18,"label",38),f(19,"Password"),u(),L(20,"input",39),M(21,bF,2,0,"small",33),u(),d(22,"div",15)(23,"label",40),f(24,"Confirm Password"),u(),L(25,"input",41),M(26,wF,2,0,"small",33),u(),d(27,"div",21)(28,"a",22),f(29,"Forgot password?"),u()(),d(30,"div",23)(31,"button",24),f(32,"Create Account"),u()(),d(33,"div",25)(34,"p",26),f(35,"Already have an account? "),d(36,"a",42),C("click",function(){E(e);let i=v();return S(i.setActiveTab("login"))}),f(37,"Login"),u()()()()}if(n&2){let e,r,i,o,s,a=v();y("formGroup",a.signupForm),m(6),y("ngIf",((e=a.signupForm.get("firstname"))==null?null:e.invalid)&&((e=a.signupForm.get("firstname"))==null?null:e.touched)),m(5),y("ngIf",((r=a.signupForm.get("lastname"))==null?null:r.invalid)&&((r=a.signupForm.get("lastname"))==null?null:r.touched)),m(5),y("ngIf",((i=a.signupForm.get("email"))==null?null:i.invalid)&&((i=a.signupForm.get("email"))==null?null:i.touched)),m(5),y("ngIf",((o=a.signupForm.get("password"))==null?null:o.invalid)&&((o=a.signupForm.get("password"))==null?null:o.touched)),m(5),y("ngIf",a.signupForm.hasError("mismatch")&&((s=a.signupForm.get("confirmPassword"))==null?null:s.touched)),m(5),y("disabled",a.signupForm.invalid)}}var xd=class n{constructor(t,e,r,i,o,s,a){this.fb=t;this.router=e;this.route=r;this.cdr=i;this.supabaseService=o;this.supabaseAuthService=s;this.supabaseAccountService=a;this.signinForm=this.fb.group({email:["",[Ee.required,Ee.email]],password:["",[Ee.required,Ee.minLength(6)]]}),this.signupForm=this.fb.group({firstname:["",Ee.required],lastname:["",Ee.required],email:["",[Ee.required,Ee.email]],password:["",[Ee.required,Ee.minLength(6)]],confirmPassword:["",Ee.required]},{validators:this.passwordMatchValidator})}activeTab="login";signinForm;signupForm;errorMessage=null;ngOnInit(){this.route.queryParams.subscribe(t=>{t.mode==="signup"&&(this.activeTab="signup")})}passwordMatchValidator(t){let e=t.get("password")?.value,r=t.get("confirmPassword")?.value;return e===r?null:{mismatch:!0}}setActiveTab(t){this.activeTab=t,this.errorMessage=null}async onSubmit(){if(this.signinForm.invalid){this.signinForm.markAllAsTouched();return}let{email:t,password:e}=this.signinForm.getRawValue();try{if(await this.supabaseAuthService.signIn(t,e),!this.supabaseService.currentUsername()){this.errorMessage="Login failed. Please try again.",this.cdr.markForCheck();return}this.signinForm.reset();let r=this.route.snapshot.queryParams.returnUrl||"/home";this.router.navigateByUrl(r),this.cdr.markForCheck()}catch(r){this.errorMessage=r.message||"An unexpected error occurred.",this.cdr.markForCheck()}}async onSignupSubmit(){if(this.signupForm.invalid){this.errorMessage="Please fill them correctly.",this.signupForm.markAllAsTouched(),this.cdr.markForCheck();return}let{email:t,password:e,firstname:r,lastname:i}=this.signupForm.getRawValue();try{let{success:o,error:s}=await this.supabaseAuthService.signUp(t,e,r,i);if(!o){this.errorMessage=s?.message||"Signup failed.",this.cdr.markForCheck();return}let a=this.supabaseService.user();if(!a){this.errorMessage="User not found after signup.",this.cdr.markForCheck();return}await this.supabaseAccountService.createProfile({user_id:a.id,firstname:r,lastname:i,email:t,phone:null,profile_picture_url:null,updated_at:new Date().toISOString(),preferences:{},metadata:{}}),this.signupForm.reset(),this.router.navigateByUrl("/home"),this.cdr.markForCheck()}catch(o){this.errorMessage=o.message||"An unexpected error occurred.",this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(T(Zn),T(Ue),T(Ct),T(ke),T(ge),T(oi),T(pn))};static \u0275cmp=X({type:n,selectors:[["app-login-signup"]],decls:20,vars:7,consts:[[1,"auth-container"],[1,"auth-card"],[1,"text-center","mb-4"],[1,"logo-circle","mx-auto"],["src","/tr_logo.svg","alt","Logo",1,"img-fluid"],[1,"brand-name","mt-3"],[1,"brand-tagline"],[1,"auth-tabs","d-flex","justify-content-center","mb-4"],[1,"tabs-container"],[1,"tab",3,"click"],[1,"mx-2","tab-separator"],["class","alert alert-danger mb-3",4,"ngIf"],["class","auth-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert","alert-danger","mb-3"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"form-control"],[1,"d-flex","justify-content-end","mt-2"],["routerLink","/auth/forgot-password",1,"forgot-link"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-tr","btn-primary","btn-md",3,"disabled"],[1,"text-center","mt-4"],[1,"mb-0"],["href","javascript:void(0)",1,"signup-link",3,"click"],[1,"text-danger","small","mt-1"],[1,"row"],[1,"col-md-6","mb-3"],["for","firstname",1,"form-label"],["type","text","id","firstname","formControlName","firstname","placeholder","First name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","lastname",1,"form-label"],["type","text","id","lastname","formControlName","lastname","placeholder","Last name",1,"form-control"],["for","signup-email",1,"form-label"],["type","email","id","signup-email","formControlName","email","placeholder","Enter your email",1,"form-control"],["for","signup-password",1,"form-label"],["type","password","id","signup-password","formControlName","password","placeholder","Create a password",1,"form-control"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password",1,"form-control"],["href","javascript:void(0)",1,"login-link",3,"click"],[1,"text-danger"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),L(4,"img",4),u(),d(5,"h2",5),f(6,"TRADING REHAB"),u(),d(7,"p",6),f(8,"Where Disciplined Trading Begins"),u()(),d(9,"div",7)(10,"div",8)(11,"span",9),C("click",function(){return r.setActiveTab("login")}),f(12,"Login"),u(),d(13,"span",10),f(14,"\u2022"),u(),d(15,"span",9),C("click",function(){return r.setActiveTab("signup")}),f(16,"Sign Up"),u()()(),M(17,hF,2,1,"div",11)(18,gF,22,4,"form",12)(19,CF,38,7,"form",12),u()()),e&2&&(m(11),ne("active",r.activeTab==="login"),m(4),ne("active",r.activeTab==="signup"),m(2),y("ngIf",r.errorMessage),m(),y("ngIf",r.activeTab==="login"),m(),y("ngIf",r.activeTab==="signup"))},dependencies:[ie,ye,hn,Kn,Se,Ae,Qn,Tn,Mn,Nt],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100dvh;display:flex;align-items:center;justify-content:center}.auth-card[_ngcontent-%COMP%]{background-color:transparent;border-radius:12px;width:100%;max-width:450px;padding:30px}.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:transparent;position:relative;display:flex;align-items:center;justify-content:center;margin:0 auto}.dots-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;position:relative;background-image:radial-gradient(circle,#5046e5 3px,transparent 3px);background-size:15px 15px;transform:rotate(45deg)}.brand-name[_ngcontent-%COMP%]{font-weight:700;font-size:24px;margin-bottom:5px;letter-spacing:.5px}.brand-tagline[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.tabs-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-bottom:1px solid #eee;padding-bottom:5px}.tab[_ngcontent-%COMP%]{padding:8px 15px;cursor:pointer;color:#888;font-weight:500;font-size:16px;transition:color .2s}.tab.active[_ngcontent-%COMP%]{color:#5046e5;border-bottom:2px solid #5046e5}.tab-separator[_ngcontent-%COMP%]{color:#ccc}.auth-form[_ngcontent-%COMP%]{margin-top:10px}.form-control[_ngcontent-%COMP%]{height:auto;padding:12px 15px;border-radius:8px;border:1px solid #ddd;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{border-color:#5046e5;box-shadow:0 0 0 .2rem #5046e526}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555;margin-bottom:8px}.forgot-link[_ngcontent-%COMP%]{font-size:14px;color:#5046e5;text-decoration:none}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{color:#5046e5;font-weight:500;text-decoration:none}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-primary[_ngcontent-%COMP%]{background-color:#5046e5;border-color:#5046e5;padding:12px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus{background-color:#4238d0;border-color:#4238d0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#a8a4e0;border-color:#a8a4e0}.separator[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;color:#888;font-size:14px}.separator[_ngcontent-%COMP%]:before, .separator[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #ddd}.separator[_ngcontent-%COMP%]:before{margin-right:1em}.separator[_ngcontent-%COMP%]:after{margin-left:1em}.google-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;border:1px solid #ddd;color:#333;padding:12px;font-weight:500}.google-btn[_ngcontent-%COMP%]:hover{background-color:#f8f8f8;color:#333}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{padding:20px 15px}.brand-name[_ngcontent-%COMP%]{font-size:20px}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{padding:10px}}']})};var Id=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=X({type:n,selectors:[["app-welcome-message"]],decls:5,vars:0,consts:[[1,"text-center","p-3","bg-light","rounded-3","shadow-sm","mb-4"],[1,"fs-2","fw-bold","text-dark"],[1,"text-secondary","mb-0"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"h1",1),f(2,"Welcome to Your Meditation Hub!"),u(),d(3,"p",2),f(4,"Find your calm, track your journey."),u()())},encapsulation:2})};var EF=(n,t)=>({"btn-danger":n,"btn-success":t}),Td=class n{meditationDuration=j(10);timeLeft=j(10*60);isRunning=!1;timerInterval;timerCompleted=new be;ngOnInit(){this.resetTimer()}ngOnDestroy(){this.clearTimerInterval()}formatTime(){let t=this.timeLeft(),e=Math.floor(t/60),r=t%60;return`${e.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}onDurationChange(t){this.meditationDuration.set(t),this.resetTimer()}toggleTimer(){this.isRunning=!this.isRunning,this.isRunning?this.startTimer():this.clearTimerInterval()}resetTimer(){this.isRunning=!1,this.clearTimerInterval(),this.timeLeft.set(this.meditationDuration()*60)}startTimer(){this.clearTimerInterval(),this.timerInterval=setInterval(()=>{this.timeLeft.update(t=>t-1),this.timeLeft()<=0&&(this.resetTimer(),this.timerCompleted.emit())},1e3)}clearTimerInterval(){this.timerInterval&&clearInterval(this.timerInterval)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=X({type:n,selectors:[["app-meditation-timer"]],outputs:{timerCompleted:"timerCompleted"},decls:22,vars:10,consts:[[1,"card","p-4","rounded-3","h-100","d-flex","flex-column","text-center"],[1,"fs-3","fw-bold","text-dark","mb-4"],[1,"display-4","fw-light","text-success","mb-4","p-3","bg-light","rounded-3","shadow-inset","mx-auto",2,"min-width","180px"],[1,"mb-4","w-100"],["for","duration",1,"form-label","text-dark","fs-6","fw-semibold","mb-2"],["type","range","id","duration","min","1","max","60",1,"form-range",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-center","gap-3"],[1,"btn","btn-lg","rounded-pill","text-white","fw-bold","shadow-sm","d-flex","align-items-center",3,"click","ngClass"],[1,"ms-2"],[1,"btn","btn-lg","btn-secondary","rounded-pill","text-white","fw-bold","shadow-sm","d-flex","align-items-center",3,"click"],[1,"mt-3","text-secondary","mb-0"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"h2",1),f(2,"Meditation Timer"),u(),d(3,"div",2),f(4),u(),d(5,"div",3)(6,"label",4),f(7),u(),d(8,"input",5),C("ngModelChange",function(o){return r.onDurationChange(o)}),u()(),d(9,"div",6)(10,"button",7),C("click",function(){return r.toggleTimer()}),d(11,"mat-icon"),f(12),u(),d(13,"span",8),f(14),u()(),d(15,"button",9),C("click",function(){return r.resetTimer()}),d(16,"mat-icon"),f(17,"restart_alt"),u(),d(18,"span",8),f(19,"Reset"),u()()(),d(20,"p",10),f(21),u()()),e&2&&(m(4),z(" ",r.formatTime()," "),m(3),z(" Duration (",r.meditationDuration()," min): "),m(),y("ngModel",r.meditationDuration()),m(2),y("ngClass",En(7,EF,r.isRunning,!r.isRunning)),m(2),x(r.isRunning?"pause":"play_arrow"),m(2),x(r.isRunning?"Pause":"Start"),m(7),z(" ",r.isRunning?"Focus on your breath...":"Ready to begin?"," "))},dependencies:[ie,cn,pt,Se,rl,Ae,st,dn],styles:[".shadow-inset[_ngcontent-%COMP%]{box-shadow:inset 0 2px 4px #0000000f}"]})};function SF(n,t){if(n&1){let e=ee();d(0,"div",4)(1,"div",5),C("click",function(){let i=E(e).$implicit,o=v();return S(o.selectMedia(i))}),d(2,"img",6),C("error",function(i){let o=E(e).$implicit,s=v();return S(s.onImageError(i,o.type))}),u(),d(3,"div",7)(4,"h3",8),f(5),u(),d(6,"p",9),f(7),u()()()()}if(n&2){let e=t.$implicit;m(2),y("src",e.thumbnail,Un)("alt",e.title),m(3),x(e.title),m(2),x(e.type)}}var Md=class n{mediaLibrary=[];mediaSelected=new be;selectMedia(t){this.mediaSelected.emit(t)}onImageError(t,e){let r=t.target;r.src=`https://placehold.co/300x180/E0F2F1/004D40?text=${e==="video"?"Video":"Audio"}`}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=X({type:n,selectors:[["app-media-catalog"]],inputs:{mediaLibrary:"mediaLibrary"},outputs:{mediaSelected:"mediaSelected"},decls:5,vars:1,consts:[[1,"card","bg-white","bg-opacity-90","p-4","rounded-3","shadow-sm","h-100","d-flex","flex-column"],[1,"fs-3","fw-bold","text-dark","mb-4","text-center"],[1,"row","row-cols-1","row-cols-sm-2","g-3","overflow-auto","flex-grow-1","pe-2"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"card","bg-light","bg-opacity-75","rounded-3","shadow-sm","overflow-hidden","cursor-pointer","hover-shadow-lg",3,"click"],[1,"card-img-top","object-fit-cover",2,"height","120px",3,"error","src","alt"],[1,"card-body","p-3"],[1,"card-title","fs-6","fw-semibold","text-dark","text-truncate","mb-1"],[1,"card-text","text-secondary","text-capitalize","small","mb-0"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"h2",1),f(2,"Video & Audio Catalog"),u(),d(3,"div",2),M(4,SF,8,4,"div",3),u()()),e&2&&(m(4),y("ngForOf",r.mediaLibrary))},dependencies:[ie,nt],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.hover-shadow-lg[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #00000026!important;transition:box-shadow .2s}"]})};function DF(n,t){if(n&1){let e=ee();d(0,"div",3)(1,"h3",4),f(2),u(),d(3,"div",5),L(4,"iframe",6),u(),d(5,"div",7)(6,"button",8),C("click",function(){E(e);let i=v();return S(i.stop())}),d(7,"mat-icon"),f(8,"stop"),u(),d(9,"span",9),f(10,"Stop Playing"),u()()()()}if(n&2){let e=v();m(2),z("Now Playing: ",e.media.title,""),m(2),y("src",e.safeUrl,Ap)("title",e.media.title)}}function xF(n,t){n&1&&(d(0,"p",10),f(1,"Select a video or audio from the catalog to play."),u())}var Ad=class n{constructor(t){this.sanitizer=t}_media=null;safeUrl=null;set media(t){this._media=t,this.safeUrl=t?this.sanitizer.bypassSecurityTrustResourceUrl(t.url):null}get media(){return this._media}playbackStopped=new be;stop(){this.playbackStopped.emit()}static \u0275fac=function(e){return new(e||n)(T(fa))};static \u0275cmp=X({type:n,selectors:[["app-media-player"]],inputs:{media:"media"},outputs:{playbackStopped:"playbackStopped"},decls:4,vars:2,consts:[["noMediaSelected",""],[1,"card","bg-white","bg-opacity-90","p-4","rounded-3","shadow-sm","min-h-150px","d-flex","align-items-center","justify-content-center"],["class","w-100 h-100",4,"ngIf","ngIfElse"],[1,"w-100","h-100"],[1,"fs-4","fw-semibold","text-dark","mb-3","text-center"],[1,"ratio","ratio-16x9","rounded-3","overflow-hidden","mb-3"],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src","title"],[1,"text-center"],[1,"btn","btn-danger","rounded-pill","d-inline-flex","align-items-center",3,"click"],[1,"ms-2"],[1,"text-secondary","fs-5"]],template:function(e,r){if(e&1&&(d(0,"div",1),M(1,DF,11,3,"div",2)(2,xF,2,0,"ng-template",null,0,zt),u()),e&2){let i=bt(3);m(),y("ngIf",r.media)("ngIfElse",i)}},dependencies:[ie,ye,dn],styles:[".min-h-150px[_ngcontent-%COMP%]{min-height:250px}"],changeDetection:0})};var kd=class n{entrySaved=new be;journalEntry="";save(){let t=this.journalEntry.trim();t&&(this.entrySaved.emit(t),this.journalEntry="")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=X({type:n,selectors:[["app-journal-writer"]],outputs:{entrySaved:"entrySaved"},decls:9,vars:1,consts:[[1,"card","bg-white","bg-opacity-90","p-4","rounded-3","shadow-sm","h-100","d-flex","flex-column"],[1,"fs-3","fw-bold","text-dark","mb-4","text-center"],["placeholder","Write about your meditation experience...","rows","5",1,"form-control","p-3","rounded-3","border","border-secondary","flex-grow-1","mb-3",3,"ngModelChange","ngModel"],[1,"btn","btn-success","rounded-pill","fw-bold","shadow-sm","d-inline-flex","align-items-center","justify-content-center",3,"click"],[1,"ms-2"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"h2",1),f(2,"Meditation Journal"),u(),d(3,"textarea",2),K("ngModelChange",function(o){return Y(r.journalEntry,o)||(r.journalEntry=o),o}),u(),d(4,"button",3),C("click",function(){return r.save()}),d(5,"mat-icon"),f(6,"save"),u(),d(7,"span",4),f(8,"Save Entry"),u()()()),e&2&&(m(3),Q("ngModel",r.journalEntry))},dependencies:[ie,pt,Se,Ae,st,dn],encapsulation:2})};function IF(n,t){if(n&1&&(d(0,"div",6)(1,"p",7),f(2),u(),d(3,"p",8),f(4),u()()),n&2){let e=t.$implicit;m(2),x(e.date),m(2),x(e.content)}}function TF(n,t){if(n&1&&(d(0,"div",4),M(1,IF,5,2,"div",5),u()),n&2){let e=v();m(),y("ngForOf",e.entries)}}function MF(n,t){n&1&&(d(0,"div",9)(1,"p"),f(2,"No journal entries yet."),u()())}var Nd=class n{entries=[];static \u0275fac=function(e){return new(e||n)};static \u0275cmp=X({type:n,selectors:[["app-journal-history"]],inputs:{entries:"entries"},decls:6,vars:2,consts:[["noEntries",""],[1,"card","bg-white","bg-opacity-90","p-4","rounded-3","shadow-sm","h-100","d-flex","flex-column"],[1,"fs-3","fw-bold","text-dark","mb-4","text-center"],["class","overflow-auto flex-grow-1 pe-2",4,"ngIf","ngIfElse"],[1,"overflow-auto","flex-grow-1","pe-2"],["class","card bg-light bg-opacity-75 p-3 rounded shadow-sm mb-3",4,"ngFor","ngForOf"],[1,"card","bg-light","bg-opacity-75","p-3","rounded","shadow-sm","mb-3"],[1,"text-secondary","small","mb-1"],[1,"text-dark","small","mb-0",2,"white-space","pre-wrap"],[1,"text-secondary","text-center","flex-grow-1","d-flex","align-items-center","justify-content-center","mb-0"]],template:function(e,r){if(e&1&&(d(0,"div",1)(1,"h2",2),f(2,"Journal History"),u(),M(3,TF,2,1,"div",3)(4,MF,3,0,"ng-template",null,0,zt),u()),e&2){let i=bt(5);m(3),y("ngIf",r.entries.length>0)("ngIfElse",i)}},dependencies:[ie,nt,ye],encapsulation:2,changeDetection:0})};var VS=(n,t)=>({"btn-success":n,"btn-light":t});function AF(n,t){if(n&1){let e=ee();d(0,"div",16)(1,"label",17),f(2,"Choose a color:"),u(),d(3,"input",18),K("ngModelChange",function(i){E(e);let o=v(2);return Y(o.color,i)||(o.color=i),S(i)}),C("change",function(){E(e);let i=v(2);return S(i.updateBackground())}),u()()}if(n&2){let e=v(2);m(3),Q("ngModel",e.color)}}function kF(n,t){if(n&1&&(d(0,"div",23),L(1,"img",24),u()),n&2){let e=v(3);m(),y("src",e.image,Un)}}function NF(n,t){if(n&1){let e=ee();d(0,"div",16)(1,"input",19,0),C("change",function(i){E(e);let o=v(2);return S(o.handleImageUpload(i))}),u(),d(3,"button",20),C("click",function(){E(e);let i=bt(2);return S(i.click())}),d(4,"mat-icon"),f(5,"upload"),u(),d(6,"span",21),f(7,"Select Image"),u()(),M(8,kF,2,1,"div",22),u()}if(n&2){let e=v(2);m(8),y("ngIf",e.image)}}function PF(n,t){if(n&1){let e=ee();d(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"button",8),C("click",function(){E(e);let i=v();return S(i.showModal=!1)}),u()(),d(5,"div",9)(6,"h2",10),f(7,"Customize Background"),u(),d(8,"div",11)(9,"button",12),C("click",function(){E(e);let i=v();return S(i.backgroundType="color")}),f(10,"Solid Color"),u(),d(11,"button",12),C("click",function(){E(e);let i=v();return S(i.backgroundType="image")}),f(12,"Image"),u()(),M(13,AF,4,1,"div",13)(14,NF,9,1,"div",13),d(15,"div",14)(16,"button",15),C("click",function(){E(e);let i=v();return S(i.showModal=!1)}),f(17,"Done"),u()()()()()()}if(n&2){let e=v();m(9),y("ngClass",En(4,VS,e.backgroundType==="color",e.backgroundType!=="color")),m(2),y("ngClass",En(7,VS,e.backgroundType==="image",e.backgroundType!=="image")),m(2),y("ngIf",e.backgroundType==="color"),m(),y("ngIf",e.backgroundType==="image")}}function OF(n,t){n&1&&L(0,"div",25)}var Pd=class n{backgroundChanged=new be;showModal=!1;backgroundType="color";color="#ffffff";image=null;handleImageUpload(t){let e=t.target;if(e.files?.[0]){let r=new FileReader;r.onload=()=>{this.image=r.result,this.backgroundType="image",this.updateBackground()},r.readAsDataURL(e.files[0])}}updateBackground(){let t=this.backgroundType==="color"?{"background-color":this.color}:{"background-image":`url(${this.image})`,"background-size":"cover","background-position":"center"};this.backgroundChanged.emit(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=X({type:n,selectors:[["app-settings"]],outputs:{backgroundChanged:"backgroundChanged"},decls:5,vars:2,consts:[["fileInput",""],["title","Customize Background",1,"btn","btn-lg","bg-light","rounded-circle","shadow-lg","hover-rotate-45","d-flex","align-items-center","justify-content-center",2,"width","58px","height","58px",3,"click"],["class","modal d-block","tabindex","-1",4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],["tabindex","-1",1,"modal","d-block"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-3","shadow-lg"],[1,"modal-header","border-0","pb-0"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","p-4","pt-0","text-center"],[1,"fs-2","fw-bold","text-dark","mb-4"],[1,"d-flex","justify-content-center","gap-3","mb-4"],[1,"btn","rounded-pill","fw-semibold",3,"click","ngClass"],["class","text-center",4,"ngIf"],[1,"mt-4","text-center"],[1,"btn","btn-success","rounded-pill","fw-bold",3,"click"],[1,"text-center"],["for","colorPicker",1,"form-label","fs-5","fw-semibold","mb-3"],["type","color","id","colorPicker",1,"form-control","form-control-color","mx-auto",2,"width","96px","height","96px",3,"ngModelChange","change","ngModel"],["type","file","accept","image/*",1,"d-none",3,"change"],[1,"btn","btn-primary","rounded-pill","fw-bold","d-inline-flex","align-items-center",3,"click"],[1,"ms-2"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["alt","Preview",1,"img-fluid","rounded-3","shadow-sm","mx-auto",2,"max-height","192px","object-fit","cover",3,"src"],[1,"modal-backdrop","fade","show"]],template:function(e,r){e&1&&(d(0,"button",1),C("click",function(){return r.showModal=!0}),d(1,"mat-icon"),f(2,"settings"),u()(),M(3,PF,18,10,"div",2)(4,OF,1,0,"div",3)),e&2&&(m(3),y("ngIf",r.showModal),m(),y("ngIf",r.showModal))},dependencies:[ie,cn,ye,pt,Se,Ae,st,dn],styles:[".modal.d-block[_ngcontent-%COMP%]{display:block}.hover-rotate-45[_ngcontent-%COMP%]:hover{transform:rotate(45deg);transition:transform .3s ease-in-out}"]})};function RF(n,t){if(n&1&&(d(0,"div",13),f(1),u()),n&2){let e=v();m(),z(" ",e.message," ")}}var Od=class n{selectedMedia=null;savedEntries=[];backgroundStyle={"background-color":"#f8f9fa"};message="";mediaLibrary=[{id:1,type:"video",title:"Calm Forest Walk",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Forest+Walk",url:"https://www.youtube.com/embed/dQw4w9WgXcQ"},{id:2,type:"audio",title:"Ocean Waves",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Ocean+Waves",url:"https://www.youtube.com/embed/V-_O7nl0Ii0"},{id:3,type:"video",title:"Zen Garden",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Zen+Garden",url:"https://www.youtube.com/embed/z63o1jJ4h_4"},{id:4,type:"audio",title:"Gentle Rain",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Gentle+Rain",url:"https://www.youtube.com/embed/q76bMs-mupk"}];onMediaSelected(t){this.selectedMedia=t,this.setMessage(`Now playing: ${t.title}`)}onPlaybackStopped(){this.selectedMedia=null}onMeditationComplete(){this.setMessage("Meditation complete! \u{1F64F}")}onJournalEntrySaved(t){let e={id:Date.now(),date:new Date().toLocaleString(),content:t};this.savedEntries=[e,...this.savedEntries],this.setMessage("Journal entry saved!")}onBackgroundChanged(t){this.backgroundStyle=t,this.setMessage("Background updated!")}setMessage(t){this.message=t,setTimeout(()=>{this.message=""},3e3)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=X({type:n,selectors:[["app-meditation-hub"]],decls:18,vars:5,consts:[[1,"d-flex","flex-column","align-items-center","justify-content-center","p-3","font-inter","min-vh-100",3,"ngStyle"],["class","position-absolute top-0 mt-5 bg-white bg-opacity-90 text-dark px-4 py-2 rounded shadow-lg z-index-1000 animate-fade-in-down",4,"ngIf"],[1,"p-4","w-100"],[1,"row","g-4"],[1,"col-12"],[1,"col-12","col-lg-6"],[3,"timerCompleted"],[3,"mediaSelected","mediaLibrary"],[3,"playbackStopped","media"],[3,"entrySaved"],[3,"entries"],[1,"col-12","text-center","py-3"],[3,"backgroundChanged"],[1,"position-absolute","top-0","mt-5","bg-white","bg-opacity-90","text-dark","px-4","py-2","rounded","shadow-lg","z-index-1000","animate-fade-in-down"]],template:function(e,r){e&1&&(d(0,"div",0),M(1,RF,2,1,"div",1),d(2,"div",2)(3,"div",3)(4,"div",4),L(5,"app-welcome-message"),u(),d(6,"section",5)(7,"app-meditation-timer",6),C("timerCompleted",function(){return r.onMeditationComplete()}),u()(),d(8,"section",5)(9,"app-media-catalog",7),C("mediaSelected",function(o){return r.onMediaSelected(o)}),u()(),d(10,"section",4)(11,"app-media-player",8),C("playbackStopped",function(){return r.onPlaybackStopped()}),u()(),d(12,"section",5)(13,"app-journal-writer",9),C("entrySaved",function(o){return r.onJournalEntrySaved(o)}),u()(),d(14,"section",5),L(15,"app-journal-history",10),u(),d(16,"div",11)(17,"app-settings",12),C("backgroundChanged",function(o){return r.onBackgroundChanged(o)}),u()()()()()),e&2&&(y("ngStyle",r.backgroundStyle),m(),y("ngIf",r.message),m(8),y("mediaLibrary",r.mediaLibrary),m(2),y("media",r.selectedMedia),m(4),y("entries",r.savedEntries))},dependencies:[ie,ye,kw,Id,Td,Md,Ad,kd,Nd,Pd],styles:["[_nghost-%COMP%]{--animate-duration: .5s}.font-inter[_ngcontent-%COMP%]{font-family:Inter,sans-serif}.z-index-1000[_ngcontent-%COMP%]{z-index:1000}.animate-fade-in-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInDown var(--animate-duration) ease-out forwards}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"]})};var Rd=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;ngOnInit(){}async addTradeLog(t,e){let r=this.supabaseService.user();if(!r)throw new Error("User not authenticated");t.userid=r.id;let{data:i,error:o}=await this.supabase.from(e).insert([t]);if(o)throw console.error("Error inserting trade log: ",o),o;return typeof window<"u"&&sessionStorage.setItem(`${e}_refresh`,"yes"),i}async getTradeLogs(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let r=!1,i=null;if(typeof window<"u"){r=sessionStorage.getItem(`${t}_refresh`)==="yes";let a=sessionStorage.getItem(t);if(a)try{i=JSON.parse(a)}catch(l){console.error("Error parsing cached trade logs:",l),i=null}}if(!r&&i)return i;let{data:o,error:s}=await this.supabase.from(t).select("*").eq("userid",e.id);if(s)throw console.error("Error fetching trade logs:",s),s;return typeof window<"u"&&(sessionStorage.setItem(t,JSON.stringify(o)),sessionStorage.removeItem(`${t}_refresh`)),o}async getTradeLogsOfSelectedAccount(t,e){let r=this.supabaseService.user();if(!r)throw new Error("User not authenticated");let i=`${t}_${e}`,o=`${i}_refresh`,s=!1,a=null;if(typeof window<"u"){s=sessionStorage.getItem(o)==="yes";let h=sessionStorage.getItem(i);if(h)try{a=JSON.parse(h)}catch(p){console.error("Error parsing cached trade logs:",p),a=null}}if(!s&&a)return a;let{data:l,error:c}=await this.supabase.from(t).select("*").eq("userid",r.id).eq("trade_account_id",e);if(c)throw console.error("Error fetching trade logs:",c),c;return typeof window<"u"&&(sessionStorage.setItem(i,JSON.stringify(l)),sessionStorage.removeItem(o)),l}async addTradeLogOfSelectedAccount(t,e,r){let i=this.supabaseService.user();if(!i)throw new Error("User not authenticated");t.userid=i.id;let{data:o,error:s}=await this.supabase.from(e).insert([t]);if(s)throw console.error("Error inserting trade log: ",s),s;return typeof window<"u"&&sessionStorage.setItem(`${e}_${r}_refresh`,"yes"),o}async updateTradeLogOfSelectedAccount(t,e,r){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:o,error:s}=await this.supabase.from(e).update(t).eq("tradeid",t.tradeid);if(s)throw console.error("Error updating trade log: ",s),s;return typeof window<"u"&&sessionStorage.setItem(`${e}_${r}_refresh`,"yes"),o}async deleteTradeLogOfSelectedAccount(t,e,r){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:o,error:s}=await this.supabase.from(e).delete().eq("tradeid",t);if(s)throw console.error("Error deleting trade log: ",s),s;return typeof window<"u"&&sessionStorage.setItem(`${e}_${r}_refresh`,"yes"),o}async updateTradeLog(t,e){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:i,error:o}=await this.supabase.from(e).update(t).eq("tradeid",t.tradeid);if(o)throw console.error("Error updating trade log: ",o),o;return typeof window<"u"&&sessionStorage.setItem(`${e}_refresh`,"yes"),i}async deleteTradeLog(t,e){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:i,error:o}=await this.supabase.from(e).delete().eq("tradeid",t);if(o)throw console.error("Error deleting trade log: ",o),o;return typeof window<"u"&&sessionStorage.setItem(`${e}_refresh`,"yes"),i}async canLogTrade(){if(this.supabaseService.user()?.id===null)throw new Error("User not authenticated");let{data:e,error:r}=await this.supabase.rpc("can_log_trade");return!r&&e===!0}static \u0275fac=function(e){return new(e||n)(O(ge))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var LF=n=>({"active-border":n});function VF(n,t){if(n&1&&(d(0,"div",11),f(1),u()),n&2){let e=v();m(),x(e.actionSuccess)}}function jF(n,t){if(n&1&&(d(0,"div",12),f(1),u()),n&2){let e=v();m(),x(e.actionError)}}function UF(n,t){n&1&&(d(0,"span",25),f(1,"Active"),u())}function BF(n,t){if(n&1){let e=ee();d(0,"div",13)(1,"div",14)(2,"div",15)(3,"div")(4,"h5",16),f(5),M(6,UF,2,0,"span",17),u(),d(7,"p",18),f(8),u(),d(9,"p",19),f(10),ht(11,"number"),u()(),d(12,"div",20)(13,"button",21),C("click",function(){let i=E(e).$implicit,o=v();return S(o.onRowClick(i))}),L(14,"i",22),u(),d(15,"button",23),C("click",function(){let i=E(e).$implicit,o=v();return S(o.deleteAccount(i.account_id))}),L(16,"i",24),u()()()()()}if(n&2){let e=t.$implicit,r=v();m(),y("ngClass",rw(8,LF,e.account_id===r.selectedAccountId)),m(4),z(" ",e.account_name," "),m(),y("ngIf",e.account_id===r.selectedAccountId),m(2),Fi("",e.broker_name||"Unknown Broker"," \u2022 ",e.account_type||"\u2014",""),m(2),z("USD ",aw(11,6,e.balance),"")}}function $F(n,t){if(n&1&&(d(0,"div",44),f(1),u()),n&2){let e=v(2);m(),x(e.formError)}}function HF(n,t){if(n&1){let e=ee();d(0,"div",26),C("click",function(i){E(e);let o=v();return S(o.closeFormOnOutside(i))}),d(1,"div",27),C("click",function(i){return E(e),S(i.stopPropagation())}),d(2,"h5",16),f(3),u(),d(4,"p",28),f(5,"Add a new trading account to track your performance and journal entries."),u(),d(6,"form",29),C("ngSubmit",function(){E(e);let i=v();return S(i.submitForm())}),d(7,"div",30)(8,"label",31),f(9,"Account Name *"),u(),L(10,"input",32),u(),d(11,"div",30)(12,"label",31),f(13,"Broker *"),u(),d(14,"select",33)(15,"option",34),f(16,"Select broker"),u(),d(17,"option"),f(18,"Interactive Brokers"),u(),d(19,"option"),f(20,"MetaTrader 5"),u(),d(21,"option"),f(22,"NinjaTrader"),u(),d(23,"option"),f(24,"ThinkOrSwim"),u()()(),d(25,"div",30)(26,"label",31),f(27,"Account Type *"),u(),d(28,"select",35)(29,"option",34),f(30,"Select account type"),u(),d(31,"option"),f(32,"Live"),u(),d(33,"option"),f(34,"Demo"),u(),d(35,"option"),f(36,"Margin"),u(),d(37,"option"),f(38,"Cash"),u()()(),d(39,"div",36)(40,"div",37)(41,"label",31),f(42,"Starting Balance *"),u(),L(43,"input",38),u(),d(44,"div",37)(45,"label",31),f(46,"Currency"),u(),d(47,"select",39)(48,"option"),f(49,"USD"),u(),d(50,"option"),f(51,"EUR"),u(),d(52,"option"),f(53,"GBP"),u(),d(54,"option"),f(55,"SGD"),u()()()(),M(56,$F,2,1,"div",40),d(57,"div",41)(58,"button",42),C("click",function(){E(e);let i=v();return S(i.toggleForm())}),f(59,"Cancel"),u(),d(60,"button",43),f(61),u()()()()()}if(n&2){let e=v();m(3),x(e.selectedAccountId?"Edit Trading Account":"Add New Trading Account"),m(3),y("formGroup",e.tradeAccountForm),m(50),y("ngIf",e.formError),m(5),x(e.selectedAccountId?"Save Changes":"Add Account")}}var Fd=class n{constructor(t,e,r,i){this.fb=t;this.supabaseService=e;this.supabaseAccountService=r;this.cdr=i;this.tradeAccountForm=this.fb.group({account_name:["",Ee.required],broker_name:[""],account_type:[""],currency:["USD"],balance:[0,Ee.min(0)],track_pl:[!1],include_in_analytics:[!1]})}tradeAccounts=[];showForm=!1;tradeAccountForm;formError=null;actionError=null;actionSuccess=null;selectedAccountId=null;showDeleteConfirm=!1;pendingDeleteAccountId=null;funMaterialIcons=["movie","music_note","videogame_asset","theater_comedy","sports_esports","fastfood","local_cafe","restaurant_menu","icecream","emoji_food_beverage","flight_takeoff","directions_car","hiking","beach_access","camping","smartphone","computer","memory","developer_mode","settings","mood","sentiment_satisfied","sentiment_very_dissatisfied","celebration","favorite","auto_awesome","nightlight","stars","magic_wand","castle"];ngOnInit(){this.loadAccounts()}async loadAccounts(){try{this.tradeAccounts=await this.supabaseAccountService.getUserTradeAccounts()}catch{this.actionError="Failed to load accounts. Please try again."}finally{this.cdr.markForCheck()}}async onRowClick(t){this.selectedAccountId=t.account_id,this.tradeAccountForm.patchValue({account_name:t.account_name,broker_name:t.broker_name,account_type:t.account_type,currency:t.currency,balance:t.balance,track_pl:t.metadata?.track_pl||!1,include_in_analytics:t.metadata?.include_in_analytics||!1}),this.showForm=!0}setActive(t){this.selectedAccountId=t,this.actionSuccess="Account set as active.",this.cdr.markForCheck()}toggleForm(){this.showForm=!this.showForm,this.formError=null,this.actionSuccess=null,this.actionError=null,this.selectedAccountId=null,this.showForm||this.tradeAccountForm.reset({currency:"USD",balance:0})}async submitForm(){if(this.formError="",this.tradeAccountForm.valid){let t=this.tradeAccountForm.value;this.selectedAccountId?await this.supabaseAccountService.editTradeAccount(this.selectedAccountId,t)?(this.actionSuccess="Account updated successfully",this.loadAccounts(),this.toggleForm()):this.formError="Failed to update account":await this.supabaseAccountService.addTradeAccount(t)?(this.actionSuccess="Account added successfully",this.loadAccounts(),this.toggleForm()):this.formError="Failed to add account"}this.cdr.markForCheck()}async deleteAccount(t){this.showDeleteConfirm=!0,this.pendingDeleteAccountId=t}confirmDelete(){this.pendingDeleteAccountId&&this.performAccountDeletion(this.pendingDeleteAccountId),this.showDeleteConfirm=!1,this.pendingDeleteAccountId=null}cancelDelete(){this.showDeleteConfirm=!1,this.pendingDeleteAccountId=null}async performAccountDeletion(t){this.actionError=null,this.actionSuccess=null;try{await this.supabaseAccountService.removeTradeAccount(t)?(this.loadAccounts(),this.actionSuccess="Account deleted successfully."):this.actionError="Failed to delete account."}catch{this.actionError="An unexpected error occurred while deleting."}finally{this.cdr.markForCheck(),setTimeout(()=>{this.actionSuccess="",this.cdr.markForCheck()},5e3)}}handleEscape(t){this.showForm&&this.toggleForm()}closeFormOnOutside(t){t.target===t.currentTarget&&this.toggleForm()}static \u0275fac=function(e){return new(e||n)(T(Zn),T(Rd),T(pn),T(ke))};static \u0275cmp=X({type:n,selectors:[["app-tradeaccountmanage"]],hostBindings:function(e,r){e&1&&C("keydown.escape",function(o){return r.handleEscape(o)},!1,eb)},decls:15,vars:4,consts:[[1,"container","py-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fw-semibold"],[1,"text-muted","mb-0"],[1,"btn","btn-primary","d-flex","align-items-center","gap-2",3,"click"],[1,"bi","bi-plus-lg"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"row","gy-3"],["class","col-12",4,"ngFor","ngForOf"],["class","overlay",3,"click",4,"ngIf"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[1,"col-12"],[1,"account-card",3,"ngClass"],[1,"d-flex","justify-content-between","align-items-start"],[1,"fw-semibold","mb-1"],["class","badge bg-primary ms-2",4,"ngIf"],[1,"text-muted","small","mb-1"],[1,"fw-bold","fs-5","mb-0"],[1,"d-flex","gap-2"],[1,"btn","btn-light","btn-sm",3,"click"],[1,"bi","bi-gear"],[1,"btn","btn-light","btn-sm","text-danger",3,"click"],[1,"bi","bi-trash"],[1,"badge","bg-primary","ms-2"],[1,"overlay",3,"click"],[1,"modal-card",3,"click"],[1,"text-muted","small","mb-3"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","text","placeholder","e.g., Main Trading Account","formControlName","account_name",1,"form-control"],["formControlName","broker_name",1,"form-select"],["value","","disabled",""],["formControlName","account_type",1,"form-select"],[1,"row","g-2"],[1,"col-6"],["type","number","formControlName","balance",1,"form-control"],["formControlName","currency",1,"form-select"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"d-flex","justify-content-end","gap-2","mt-4"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"alert","alert-danger","mt-3"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),f(4,"Trading Accounts"),u(),d(5,"p",3),f(6,"Manage your trading accounts and select which account to use for journaling and analytics."),u()(),d(7,"button",4),C("click",function(){return r.toggleForm()}),L(8,"i",5),f(9," Add Trading Account "),u()(),M(10,VF,2,1,"div",6)(11,jF,2,1,"div",7),d(12,"div",8),M(13,BF,17,10,"div",9),u(),M(14,HF,62,4,"div",10),u()),e&2&&(m(10),y("ngIf",r.actionSuccess),m(),y("ngIf",r.actionError),m(2),y("ngForOf",r.tradeAccounts),m(),y("ngIf",r.showForm))},dependencies:[hn,Kn,vs,ys,Se,to,ii,Ae,Qn,Tn,Mn,ie,cn,nt,ye,qo],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;z-index:1050}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1050}.modal-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;width:100%;max-width:600px;max-height:90dvh;overflow-y:auto;box-shadow:0 10px 25px #00000026}.list-group-item[_ngcontent-%COMP%]{cursor:pointer}.delete-button[_ngcontent-%COMP%]{color:red;display:none;margin-left:auto}.list-group-item[_ngcontent-%COMP%]:hover   .delete-button[_ngcontent-%COMP%]{color:red;display:block}.account-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:12px;padding:1.25rem;background:#fff;transition:all .2s ease-in-out}.account-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000000d}.active-border[_ngcontent-%COMP%]{border:2px solid #4a6cf7}.overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#0000008c;display:flex;align-items:center;justify-content:center;z-index:1050}.modal-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;width:100%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 25px #00000026}"]})};function zF(n,t){if(n&1&&L(0,"img",35),n&2){let e=v();y("src",e.currentImageUrl,Un)}}function qF(n,t){if(n&1&&L(0,"img",36),n&2){let e=v();y("src",e.previewUrl,Un)}}function WF(n,t){n&1&&(d(0,"div",14),f(1,"No new image selected"),u())}function GF(n,t){if(n&1&&(d(0,"div",23)(1,"div",37),f(2),u()()),n&2){let e=v();m(2),x(e.errorMessage)}}function QF(n,t){if(n&1&&(d(0,"button",38),f(1," Save Changes "),u()),n&2){let e=v();y("disabled",e.profileForm.invalid)}}var Ld=class n{constructor(t,e,r){this.fb=t;this.supabaseService=e;this.cdr=r;this.profileForm=this.fb.group({firstname:["",Ee.required],lastname:[""],email:["",[Ee.required,Ee.email]],phone:[""]})}profileForm;currentImageUrl=null;previewUrl=null;selectedFile=null;userId="";originalFormValue;formChanged=!1;errorMessage="";async ngOnInit(){await this.loadProfile(),this.trackFormChanges()}async loadProfile(){try{let{data:t,error:e}=await this.supabaseService.getProfile();if(e){this.errorMessage="Failed to load profile: "+e.message,console.error("Supabase profile load error:",e);return}t?(this.profileForm.patchValue({firstname:t.firstname,lastname:t.lastname,email:t.email,phone:t.phone}),this.originalFormValue=this.profileForm.getRawValue(),t.profile_picture_url?(this.currentImageUrl=await this.supabaseService.getCachedProfilePictureBlobUrl(t.profile_picture_url),this.previewUrl=this.currentImageUrl):(this.currentImageUrl=null,this.previewUrl=null)):(this.errorMessage="No profile data found. Please complete your profile.",console.warn("No profile data received from Supabase."))}catch(t){this.errorMessage="An unexpected error occurred while loading profile.",console.error("Error in loadProfile:",t)}finally{this.cdr.markForCheck()}}async removeProfilePicture(){try{this.errorMessage="",await this.supabaseService.deleteProfilePicture(),this.supabaseService.clearCachedProfilePictureBlobUrl(),await this.supabaseService.updateProfile({profile_picture_url:null}),this.currentImageUrl=null,this.previewUrl=null,this.selectedFile=null,this.formChanged=!0}catch(t){this.errorMessage="Failed to remove profile picture: "+(t.message||t.toString()),console.error("Error removing profile picture:",t)}finally{this.cdr.markForCheck()}}trackFormChanges(){this.profileForm.valueChanges.subscribe(()=>{this.formChanged=this.profileForm.dirty||!!this.selectedFile,this.cdr.markForCheck()})}onFileChange(t){this.errorMessage="";let e=t.target,r=e?.files?.[0];if(!r){this.selectedFile=null;return}if(!["image/jpeg","image/png","image/webp"].includes(r.type)){this.errorMessage="Only JPG, PNG, or WEBP images are allowed.",this.selectedFile=null,e.value="";return}if(r.size>1024*1024){this.errorMessage="File size must be less than 1MB.",this.selectedFile=null,e.value="";return}this.selectedFile=r,this.previewUrl&&URL.revokeObjectURL(this.previewUrl),this.previewUrl=URL.createObjectURL(r),this.formChanged=!0,this.cdr.markForCheck()}async saveChanges(){if(this.errorMessage="",!this.formChanged){this.errorMessage="No changes detected.";return}if(this.profileForm.invalid){this.errorMessage="Please correct the highlighted form errors.",this.profileForm.markAllAsTouched(),this.cdr.markForCheck();return}let t=this.originalFormValue.profile_picture_url??null;if(this.selectedFile)try{if(t=await this.supabaseService.uploadProfilePicture(this.selectedFile),!t){this.errorMessage="Failed to upload profile picture. Please try again.",console.error("Supabase uploadProfilePicture returned null filePath");return}}catch(i){this.errorMessage="Error uploading profile picture: "+(i.message||i.toString()),console.error("Error during profile picture upload:",i);return}let e=this.profileForm.getRawValue(),r={firstname:e.firstname,lastname:e.lastname,email:e.email,phone:e.phone,profile_picture_url:t,updated_at:new Date().toISOString(),preferences:{},metadata:{}};try{await this.supabaseService.updateProfile(r),t&&(this.supabaseService.clearCachedProfilePictureBlobUrl(),this.currentImageUrl=await this.supabaseService.getCachedProfilePictureBlobUrl(t),this.previewUrl=this.currentImageUrl),this.formChanged=!1,this.selectedFile=null,this.originalFormValue=this.profileForm.getRawValue(),this.errorMessage=""}catch(i){this.errorMessage="Failed to save changes: "+(i.message||i.toString()),console.error("Error during profile update:",i)}finally{this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(T(Zn),T(pn),T(ke))};static \u0275cmp=X({type:n,selectors:[["app-user-account-settings"]],decls:58,vars:6,consts:[[1,"container","mb-5"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"mb-2"],[1,"text-muted","mb-4"],[1,"row","g-3","mb-4"],[1,""],[1,"card","border-0","shadow-sm","p-3","h-100"],[1,"d-flex","align-items-center","mb-2"],["alt","Profile","class","rounded-circle me-2","style","width: 40px; height: 40px; object-fit: cover;",3,"src",4,"ngIf"],[1,"mb-0"],[1,"text-muted"],[1,"row","g-4",3,"ngSubmit","formGroup"],[1,"fw-bold"],[1,"col-md-6"],[1,"form-label"],["formControlName","firstname","placeholder","First name",1,"form-control"],["formControlName","lastname","placeholder","Last name",1,"form-control"],["formControlName","email","placeholder","Email","type","email",1,"form-control"],["formControlName","phone","placeholder","+1 (123) 456-7890",1,"form-control"],[1,"col-12"],[1,"fw-bold","mt-3"],[1,"card","p-3","shadow-sm","border-light","bg-light-subtle"],[1,"form-label","d-block"],["alt","Preview","class","img-thumbnail","style","width: 120px;",3,"src",4,"ngIf"],["class","text-muted",4,"ngIf"],["type","file",1,"form-control","mt-2",3,"change"],[1,"mt-2","d-flex","gap-2"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],["class","col-12",4,"ngIf"],[1,"col-12","text-end"],["type","submit","class","btn btn-tr",3,"disabled",4,"ngIf"],["alt","Profile",1,"rounded-circle","me-2",2,"width","40px","height","40px","object-fit","cover",3,"src"],["alt","Preview",1,"img-thumbnail",2,"width","120px",3,"src"],[1,"alert","alert-danger"],["type","submit",1,"btn","btn-tr",3,"disabled"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),u()(),d(6,"li",5),f(7,"Account Settings"),u()()(),d(8,"h2",6),f(9,"Account Settings"),u(),d(10,"p",7),f(11,"Manage your profile, subscription, and preferences"),u(),d(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11),M(16,zF,1,1,"img",12),d(17,"h5",13),f(18,"Profile Information"),u()(),d(19,"small",14),f(20,"Update your personal details and public profile"),u()()()(),d(21,"form",15),C("ngSubmit",function(){return r.saveChanges()}),d(22,"h5",16),f(23,"Personal Information"),u(),d(24,"div",17)(25,"label",18),f(26,"First Name"),u(),L(27,"input",19),u(),d(28,"div",17)(29,"label",18),f(30,"Last Name"),u(),L(31,"input",20),u(),d(32,"div",17)(33,"label",18),f(34,"Email Address"),u(),L(35,"input",21),u(),d(36,"div",17)(37,"label",18),f(38,"Phone"),u(),L(39,"input",22),u(),d(40,"div",23)(41,"h6",24),f(42,"Profile Picture"),u(),d(43,"div",25)(44,"div",6)(45,"label",26),f(46,"Preview New Photo"),u(),M(47,qF,1,1,"img",27)(48,WF,2,0,"div",28),u(),d(49,"input",29),C("change",function(o){return r.onFileChange(o)}),u(),d(50,"small",14),f(51,"JPG, PNG or GIF. Max 1MB."),u(),d(52,"div",30)(53,"button",31),C("click",function(){return r.removeProfilePicture()}),f(54,"Remove"),u()()()(),M(55,GF,3,1,"div",32),d(56,"div",33),M(57,QF,2,1,"button",34),u()()()),e&2&&(m(16),y("ngIf",r.currentImageUrl),m(5),y("formGroup",r.profileForm),m(26),y("ngIf",r.previewUrl),m(),y("ngIf",!r.previewUrl),m(7),y("ngIf",r.errorMessage),m(2),y("ngIf",r.formChanged))},dependencies:[hn,Kn,Se,Ae,Qn,Tn,Mn,ie,ye,Nt],encapsulation:2})};var Vd=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;ngOnInit(){}async adminLoadMeditationVideos(){let{data:t,error:e}=await this.supabase.from("adminmeditationvideos").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Error loading meditation videos: ",e),e;return t}async loadActiveMeditationVideos(){let{data:t,error:e}=await this.supabase.from("activemeditationvideos").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Error loading meditation videos: ",e),e;return t}async addMeditationVideo(t){let{error:e}=await this.supabase.from("adminmeditationvideos").insert([{title:t.title,url:t.url,category:t.category,description:t.description,isactive:t.isactive}]);return e&&console.error("Error adding meditation video: ",e),{error:e}}async updateMeditationVideo(t){let{error:e}=await this.supabase.from("adminmeditationvideos").update({title:t.title,url:t.url,category:t.category,description:t.description,isactive:t.isactive,updated_time:t.updated_time}).eq("id",t.id);return e&&console.error("Error updating meditation video: ",e),{error:e}}static \u0275fac=function(e){return new(e||n)(O(ge))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var ZF=(n,t)=>({"alert-success":n,"alert-danger":t});function JF(n,t){if(n&1&&(d(0,"div",7),f(1),u()),n&2){let e=v();y("ngClass",En(2,ZF,e.messageType==="success",e.messageType==="error")),m(),z(" ",e.message," ")}}function YF(n,t){if(n&1){let e=ee();d(0,"tr")(1,"td")(2,"input",8),K("ngModelChange",function(i){let o=E(e).$implicit;return Y(o.title,i)||(o.title=i),S(i)}),C("ngModelChange",function(){let i=E(e).$implicit,o=v();return S(o.onFieldChange(i))}),u()(),d(3,"td")(4,"input",8),K("ngModelChange",function(i){let o=E(e).$implicit;return Y(o.url,i)||(o.url=i),S(i)}),C("ngModelChange",function(){let i=E(e).$implicit,o=v();return S(o.onFieldChange(i))}),u()(),d(5,"td")(6,"input",8),K("ngModelChange",function(i){let o=E(e).$implicit;return Y(o.category,i)||(o.category=i),S(i)}),C("ngModelChange",function(){let i=E(e).$implicit,o=v();return S(o.onFieldChange(i))}),u()(),d(7,"td")(8,"textarea",8),K("ngModelChange",function(i){let o=E(e).$implicit;return Y(o.description,i)||(o.description=i),S(i)}),C("ngModelChange",function(){let i=E(e).$implicit,o=v();return S(o.onFieldChange(i))}),u()(),d(9,"td")(10,"input",9),K("ngModelChange",function(i){let o=E(e).$implicit;return Y(o.isactive,i)||(o.isactive=i),S(i)}),C("change",function(){let i=E(e).$implicit,o=v();return S(o.onFieldChange(i))}),u()(),d(11,"td"),f(12),ht(13,"date"),u()()}if(n&2){let e=t.$implicit;m(2),Q("ngModel",e.title),m(2),Q("ngModel",e.url),m(2),Q("ngModel",e.category),m(2),Q("ngModel",e.description),m(2),Q("ngModel",e.isactive),m(2),x(kt(13,6,e.updated_time,"short"))}}var jd=class n{constructor(t,e){this.cdr=t;this.supabaseMeditationTableService=e}videos=[];message="";messageType="success";async ngOnInit(){let t=await this.supabaseMeditationTableService.adminLoadMeditationVideos();this.videos=t.map(e=>B(N({},e),{isModified:!1})),this.cdr.markForCheck()}onFieldChange(t){t.isModified=!0}addVideo(){this.videos.push({title:"",url:"",category:"",description:"",isactive:!0,isModified:!0}),this.cdr.detectChanges()}async saveChanges(){let t=this.videos.filter(e=>e.isModified);for(let e of t){if(e.id){e.updated_time=new Date().toISOString();let{error:r}=await this.supabaseMeditationTableService.updateMeditationVideo(e);if(r)return this.showMessage("Error saving some videos","error")}else{let{error:r}=await this.supabaseMeditationTableService.addMeditationVideo(e);if(r)return this.showMessage("Error adding new video","error")}e.isModified=!1}this.showMessage("Videos saved successfully","success"),this.cdr.detectChanges()}hasChanges(){return this.videos.some(t=>t.isModified)}showMessage(t,e){this.message=t,this.messageType=e,this.cdr.markForCheck(),setTimeout(()=>{this.message="",this.cdr.markForCheck()},4e3)}static \u0275fac=function(e){return new(e||n)(T(ke),T(Vd))};static \u0275cmp=X({type:n,selectors:[["app-admin-meditation-dashboard"]],decls:26,vars:3,consts:[[1,"container","mt-4","p-4"],["class","alert",3,"ngClass",4,"ngIf"],[1,"table","mt-4"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mt-3"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-success",3,"click","disabled"],[1,"alert",3,"ngClass"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel"]],template:function(e,r){e&1&&(d(0,"div",0),M(1,JF,2,5,"div",1),d(2,"h2"),f(3,"Meditation Video Admin Dashboard"),u(),d(4,"table",2)(5,"thead")(6,"tr")(7,"th"),f(8,"Title"),u(),d(9,"th"),f(10,"URL"),u(),d(11,"th"),f(12,"Category"),u(),d(13,"th"),f(14,"Description"),u(),d(15,"th"),f(16,"Active"),u(),d(17,"th"),f(18,"Last Updated"),u()()(),d(19,"tbody"),M(20,YF,14,9,"tr",3),u()(),d(21,"div",4)(22,"button",5),C("click",function(){return r.addVideo()}),f(23,"Add Video"),u(),d(24,"button",6),C("click",function(){return r.saveChanges()}),f(25,"Save Changes"),u()()()),e&2&&(m(),y("ngIf",r.message),m(19),y("ngForOf",r.videos),m(4),y("disabled",!r.hasChanges()))},dependencies:[ie,cn,nt,ye,pu,pt,Se,nl,Ae,st],encapsulation:2})};var ws=class n{supabaseFunctionClient;constructor(){this.supabaseFunctionClient=new Yi(hs.FUNC_URL,hs.anon_key,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})}async callEdgeFunction(t,e){let{data:r,error:i}=await this.supabaseFunctionClient.functions.invoke(t,{body:e});return{data:r,error:i}}static \u0275fac=function(e){return new(e||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var e2=["conversationContainer"],t2=["userInput"],n2=(n,t)=>({"bot-message":n,"user-message":t});function r2(n,t){if(n&1){let e=ee();d(0,"div",15),C("click",function(){let i=E(e).$implicit,o=v();return S(o.selectDate(i.date))}),d(1,"div",16),f(2),u(),d(3,"div",17),f(4),u()()}if(n&2){let e=t.$implicit,r=v();ne("active",r.isDateSelected(e.date))("today",r.isToday(e.date)),m(2),x(e.dayName),m(2),x(e.dayNumber)}}function i2(n,t){n&1&&(d(0,"div",18)(1,"div",19)(2,"span",20),f(3,"Loading..."),u()()())}function o2(n,t){if(n&1&&(d(0,"div",28),f(1),u()),n&2){let e=t.$implicit;y("ngClass",En(2,n2,e.sender==="bot",e.sender==="user")),m(),z(" ",e.text," ")}}function s2(n,t){if(n&1){let e=ee();d(0,"div")(1,"div",21),L(2,"div",22),u(),d(3,"div",23,0),M(5,o2,2,5,"div",24),u(),d(6,"div",25)(7,"textarea",26,1),K("ngModelChange",function(i){E(e);let o=v();return Y(o.currentInput,i)||(o.currentInput=i),S(i)}),C("keydown",function(i){E(e);let o=v();return S(o.onKeyDown(i))}),u(),d(9,"button",27),C("click",function(){E(e);let i=v();return S(i.submitAnswer())}),f(10," Continue "),u()()()}if(n&2){let e=v();m(2),Bn("width",e.progressPercentage()),m(3),y("ngForOf",e.conversation()),m(2),Q("ngModel",e.currentInput),y("disabled",e.isLoading()),m(2),y("disabled",e.isLoading()||!e.currentInput.trim())}}function a2(n,t){if(n&1&&(d(0,"section",35)(1,"div",45)(2,"div",46)(3,"h5",38)(4,"mat-icon",47),f(5,"fact_check"),u(),f(6," Emotional State "),u(),d(7,"ul",48)(8,"li",49)(9,"strong"),f(10,"Patience:"),u(),f(11),u(),d(12,"li",49)(13,"strong"),f(14,"Confidence:"),u(),f(15),u(),d(16,"li")(17,"strong"),f(18,"Doubt:"),u(),f(19),u()()()()()),n&2){let e=v().ngIf;m(11),z(" ",e.emotionalState.Patience,""),m(4),z(" ",e.emotionalState.Confidence,""),m(4),z(" ",e.emotionalState.Doubt,"")}}function l2(n,t){if(n&1&&(d(0,"li"),f(1),u()),n&2){let e=t.$implicit;m(),z(" \u2022 ",e.category," ")}}function c2(n,t){if(n&1&&(d(0,"li"),f(1),u()),n&2){let e=t.$implicit;m(),z(" \u2022 ",e.category," ")}}function u2(n,t){if(n&1&&(d(0,"section",35)(1,"div",45)(2,"div",46)(3,"h5",38)(4,"mat-icon",50),f(5,"tips_and_updates"),u(),f(6," Behavior Patterns "),u(),d(7,"div",51)(8,"div",52)(9,"ul",53),M(10,l2,2,1,"li",54),u()(),d(11,"div",52)(12,"ul",53),M(13,c2,2,1,"li",54),u()()()()()()),n&2){let e=v().ngIf,r=v(2);m(10),y("ngForOf",e.behaviorPattern.slice(0,r.Math.ceil(e.behaviorPattern.length/2))),m(3),y("ngForOf",e.behaviorPattern.slice(r.Math.ceil(e.behaviorPattern.length/2)))}}function d2(n,t){if(n&1&&(d(0,"section",35)(1,"div",55)(2,"div",46)(3,"h5",56)(4,"mat-icon",57),f(5,"warning_amber"),u(),f(6," Immediate Action "),u(),d(7,"p",58),f(8),u()()()()),n&2){let e=v().ngIf;m(8),x(e.actionableitem)}}function f2(n,t){if(n&1&&(d(0,"div",61)(1,"div",62)(2,"span"),f(3),u(),d(4,"span",33),f(5),u()(),d(6,"div",63),L(7,"div",64),u()()),n&2){let e=t.$implicit;m(3),x(e.emotion),m(2),x(e.percentage),m(2),Bn("width",e.percentage)("background-color",e.color||"#748ffc")}}function h2(n,t){if(n&1&&(d(0,"section",35)(1,"div",45)(2,"div",46)(3,"h5",38)(4,"mat-icon",59),f(5,"bar_chart"),u(),f(6," Emotional State Summary "),u(),M(7,f2,8,6,"div",60),u()()()),n&2){let e=v().ngIf;m(7),y("ngForOf",e.emotion)}}function p2(n,t){if(n&1&&(d(0,"li"),f(1),u()),n&2){let e=t.$implicit;m(),x(e)}}function m2(n,t){if(n&1&&(d(0,"li"),f(1),u()),n&2){let e=t.$implicit;m(),x(e)}}function g2(n,t){if(n&1&&(d(0,"section",65)(1,"div",45)(2,"div",46)(3,"h5",66)(4,"mat-icon",39),f(5,"psychology"),u(),f(6," AI Recommendations "),u(),d(7,"div",51)(8,"div",67)(9,"ul",68),M(10,p2,2,1,"li",54),u()(),d(11,"div",67)(12,"ul",68),M(13,m2,2,1,"li",54),u()()()()()()),n&2){let e=v().ngIf,r=v(2);m(10),y("ngForOf",e.recommendation.slice(0,r.Math.ceil(e.recommendation.length/2))),m(3),y("ngForOf",e.recommendation.slice(r.Math.ceil(e.recommendation.length/2)))}}function _2(n,t){if(n&1){let e=ee();d(0,"button",69),C("click",function(){E(e);let i=v(3);return S(i.startNewCheckIn())}),f(1,"New Check-In"),u()}}function v2(n,t){if(n&1&&($n(0),d(1,"header",31)(2,"div",32)(3,"div",32)(4,"mat-icon"),f(5,"task_alt"),u()()(),d(6,"h2",33),f(7,"Thank you for sharing!"),u(),d(8,"p",6),f(9,"Here are your personalized insights based on today\u2019s check-in"),u()(),d(10,"div",34)(11,"section",35)(12,"div",36)(13,"div",37)(14,"h5",38)(15,"mat-icon",39),f(16,"track_changes"),u(),f(17," Trading Readiness "),u(),d(18,"div",40),f(19),u()()()(),M(20,a2,20,3,"section",41)(21,u2,14,2,"section",41)(22,d2,9,1,"section",41)(23,h2,8,1,"section",41)(24,g2,14,2,"section",42),u(),d(25,"footer",43),M(26,_2,2,0,"button",44),u(),Hn()),n&2){let e=t.ngIf,r=v(2);m(19),z(" ",e.readiness," "),m(),y("ngIf",e.emotionalState),m(),y("ngIf",e.behaviorPattern==null?null:e.behaviorPattern.length),m(),y("ngIf",e.actionableitem),m(),y("ngIf",e.emotion==null?null:e.emotion.length),m(),y("ngIf",e.recommendation==null?null:e.recommendation.length),m(2),y("ngIf",r.canRepeatCheckIn)}}function y2(n,t){n&1&&(d(0,"div",70)(1,"h3"),f(2,"No Check-in Data"),u(),d(3,"p",6),f(4,"There is no analysis available for the selected date."),u()())}function b2(n,t){if(n&1&&(d(0,"div",29),M(1,v2,27,7,"ng-container",30)(2,y2,5,0,"ng-template",null,2,zt),u()),n&2){let e=bt(3),r=v();m(),y("ngIf",r.analysisResult())("ngIfElse",e)}}function w2(n,t){if(n&1&&(d(0,"div",70)(1,"h3"),f(2,"Check-in Not Available Yet"),u(),d(3,"p"),f(4),u()()),n&2){let e=v();m(4),z("Please come back on this date to complete your check-in. ",e.futureMessage(),"")}}var Ud=class n{constructor(t,e,r){this.supabaseEmotionService=t;this.supabaseFunctionService=e;this.supabaseService=r}conversationContainer;userInputRef;viewMode=j("loading");weekDates=j([]);selectedDate=j(new Date);futureMessage=j("");isLoading=j(!1);Math=Math;questions=j([]);currentQuestionIndex=j(0);conversation=j([]);userAnswers=[];currentInput="";analysisResult=j(null);canRepeatCheckIn=!1;progressPercentage=et(()=>{let t=this.questions().length;return t===0?"0%":`${this.currentQuestionIndex()/t*100}%`});ngOnInit(){this.generateWeekDays(),this.selectDate(new Date)}ngAfterViewInit(){this.userInputRef.nativeElement.addEventListener("input",this.autoResize.bind(this))}autoResize(){let t=this.userInputRef.nativeElement;t.style.height="auto",t.style.height=`${t.scrollHeight}px`}scrollToBottom(){setTimeout(()=>{try{this.conversationContainer?.nativeElement&&(this.conversationContainer.nativeElement.scrollTop=this.conversationContainer.nativeElement.scrollHeight)}catch(t){console.error("Could not scroll to bottom:",t)}},0)}generateWeekDays(){let t=new Date,e=new Date(t.setDate(t.getDate()-t.getDay())),r=[];for(let i=0;i<7;i++){let o=new Date(e);o.setDate(o.getDate()+i),r.push({date:o,dayName:o.toLocaleDateString("en-US",{weekday:"short"}),dayNumber:o.getDate().toString()})}this.weekDates.set(r)}async selectDate(t){this.selectedDate.set(t),this.viewMode.set("loading"),this.analysisResult.set(null),this.canRepeatCheckIn=!1;let e=new Date;e.setHours(0,0,0,0);let r=new Date(t);r.setHours(0,0,0,0),r>e?this.handleFutureDate(r):r.getTime()===e.getTime()?await this.handleToday():await this.handlePastDate(r)}isToday(t){return new Date(t).toDateString()===new Date().toDateString()}isDateSelected(t){return new Date(t).toDateString()===new Date(this.selectedDate()).toDateString()}handleFutureDate(t){let e=new Date,r=t.getTime()-e.getTime(),i=Math.floor(r/(1e3*60*60*24)),o=Math.floor(r%(1e3*60*60*24)/(1e3*60*60));this.futureMessage.set(`Check-in will open in ${i} days and ${o} hours.`),this.viewMode.set("future")}async handleToday(){try{this.isLoading.set(!0);let t=await this.supabaseEmotionService.canLoadCheckInQuestions(),e=await this.supabaseEmotionService.getEmotionCheckInResultForDate(new Date);e?(this.analysisResult.set(e),this.viewMode.set("analysis"),this.canRepeatCheckIn=t):t?await this.startCheckIn():(this.analysisResult.set(null),this.viewMode.set("analysis"),this.canRepeatCheckIn=!1)}catch{this.viewMode.set("analysis")}finally{this.isLoading.set(!1)}}async handlePastDate(t){this.isLoading.set(!0);let e=await this.supabaseEmotionService.getEmotionCheckInResultForDate(t);this.analysisResult.set(e),this.viewMode.set("analysis"),this.isLoading.set(!1)}async startCheckIn(){this.isLoading.set(!0),this.conversation.set([]),this.userAnswers=[],this.currentQuestionIndex.set(0);try{let t=await this.supabaseEmotionService.loadQuestions();this.questions.set(t||[]),t?.length>0?(this.conversation.update(e=>[...e,{sender:"bot",text:t[0].question_data.question}]),this.viewMode.set("checkin"),this.scrollToBottom(),setTimeout(()=>{this.userInputRef?.nativeElement.focus()},0)):this.viewMode.set("analysis")}catch(t){console.error("Error loading questions:",t),this.viewMode.set("analysis")}finally{this.isLoading.set(!1)}}onKeyDown(t){t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),this.submitAnswer())}async submitAnswer(){if(!this.currentInput.trim()||this.isLoading())return;this.isLoading.set(!0);let t=this.questions()[this.currentQuestionIndex()],e=this.currentInput.trim();this.conversation.update(r=>[...r,{sender:"user",text:e}]),this.scrollToBottom(),this.userAnswers.push({question_id:t.question_id,answer:e}),this.currentInput="",setTimeout(()=>{this.userInputRef.nativeElement.style.height="40px",this.userInputRef.nativeElement.focus()},0),setTimeout(async()=>{let r=this.currentQuestionIndex()+1;if(r<this.questions().length){this.currentQuestionIndex.set(r);let i=this.questions()[r];this.conversation.update(o=>[...o,{sender:"bot",text:i.question_data.question}]),this.scrollToBottom(),this.isLoading.set(!1)}else await this.finalizeCheckIn()},300)}processAnalysisResponse(t){let e={};for(let r of t){let i=Object.keys(r)[0];if(!i)continue;let o=r[i];switch(i){case"emotion":e.emotion=o;break;case"behaviorPattern":e.behaviorPattern=o.map(s=>({category:s.category,icon:s.icon,color:s.Color||s.color}));break;case"recommendation":e.recommendation=o;break;case"readiness":e.readiness=o;break;case"actionableitem":e.actionableitem=o;break;case"emotionalState":e.emotionalState=o;break}}return{emotion:e.emotion||[],behaviorPattern:e.behaviorPattern||[],recommendation:e.recommendation||[],readiness:e.readiness||"N/A",actionableitem:e.actionableitem||"No specific action item.",emotionalState:e.emotionalState}}async finalizeCheckIn(){this.viewMode.set("loading");try{let t=this.userAnswers.map(a=>`Q: ${this.questions().find(c=>c.question_id===a.question_id)?.question_data.question} A:${a.answer}`).join(" "),{data:e,error:r}=await this.supabaseFunctionService.callEdgeFunction("emotion-analyst-gemini",{prompt:t});if(r)throw r;if(!e||!Array.isArray(e))throw new Error("Invalid analysis data format received from function.");let i=this.processAnalysisResponse(e),o={user_id:this.supabaseService.user()?.id,answers:this.userAnswers,analysis:i},{error:s}=await this.supabaseEmotionService.submitUserCheckIn(o);if(s)throw s;this.analysisResult.set(i),this.viewMode.set("analysis"),this.canRepeatCheckIn=!0}catch(t){console.error("Error finalizing check-in:",t),this.viewMode.set("analysis")}finally{this.isLoading.set(!1)}}startNewCheckIn(){this.selectDate(new Date)}static \u0275fac=function(e){return new(e||n)(T(bs),T(ws),T(ge))};static \u0275cmp=X({type:n,selectors:[["app-user-emotion-analysis"]],viewQuery:function(e,r){if(e&1&&(Bo(e2,5),Bo(t2,5)),e&2){let i;Oi(i=Ri())&&(r.conversationContainer=i.first),Oi(i=Ri())&&(r.userInputRef=i.first)}},decls:14,vars:6,consts:[["conversationContainer",""],["userInput",""],["noAnalysis",""],[1,"container-fluid","analysis-container"],[1,"mb-4"],[1,"h4","fw-bold"],[1,"text-muted"],[1,"date-bar"],["class","date-item",3,"active","today","click",4,"ngFor","ngForOf"],[1,"main-card"],[3,"ngSwitch"],["class","text-center p-5",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","analysis-view",4,"ngSwitchCase"],["class","message-view",4,"ngSwitchCase"],[1,"date-item",3,"click"],[1,"day-name"],[1,"day-number"],[1,"text-center","p-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"progress-bar-container","mb-3"],[1,"progress-bar"],[1,"conversation-container"],["class","message",3,"ngClass",4,"ngFor","ngForOf"],[1,"input-area","mt-3"],["rows","1","placeholder","Type your response here...",1,"form-control","chat-input",3,"ngModelChange","keydown","ngModel","disabled"],[1,"btn","btn-tr",3,"click","disabled"],[1,"message",3,"ngClass"],[1,"analysis-view"],[4,"ngIf","ngIfElse"],[1,"text-center","mb-5"],[1,"icon-wrapper","mb-3"],[1,"fw-bold"],[1,"row","g-4"],[1,"col-md-6","col-lg-4"],[1,"card","h-100","shadow-sm","border-0","bg-light"],[1,"card-body","d-flex","flex-column","justify-content-between"],[1,"card-title","d-flex","align-items-center","mb-3"],[1,"me-2","text-primary"],[1,"display-5","fw-bold","text-primary","text-center"],["class","col-md-6 col-lg-4",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"text-center","mt-5"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"card","h-100","shadow-sm","border-0"],[1,"card-body"],[1,"me-2","text-success"],[1,"list-unstyled","mb-0"],[1,"mb-2"],[1,"me-2","text-info"],[1,"row"],[1,"col-6"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"card","h-100","shadow-sm","border-warning","border-start","border-4"],[1,"card-title","d-flex","align-items-center","text-warning","mb-3"],[1,"me-2"],[1,"mb-0"],[1,"me-2","text-secondary"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[1,"d-flex","justify-content-between","mb-1"],[1,"progress",2,"height","8px"],["role","progressbar",1,"progress-bar"],[1,"col-12"],[1,"card-title","d-flex","align-items-center","mb-4"],[1,"col-md-6"],[1,"recommendation-list"],[1,"btn","btn-primary",3,"click"],[1,"message-view"]],template:function(e,r){e&1&&(d(0,"div",3)(1,"div",4)(2,"h1",5),f(3,"Daily Emotional Check-in"),u(),d(4,"p",6),f(5," Share how you\u2019re feeling today. This helps us provide personalized insights for your trading journey. "),u()(),d(6,"div",7),M(7,r2,5,6,"div",8),u(),d(8,"div",9)(9,"div",10),M(10,i2,4,0,"div",11)(11,s2,11,6,"div",12)(12,b2,4,2,"div",13)(13,w2,5,1,"div",14),u()()()),e&2&&(m(7),y("ngForOf",r.weekDates()),m(2),y("ngSwitch",r.viewMode()),m(),y("ngSwitchCase","loading"),m(),y("ngSwitchCase","checkin"),m(),y("ngSwitchCase","analysis"),m(),y("ngSwitchCase","future"))},dependencies:[ie,cn,nt,ye,dm,Aw,pt,Se,Ae,st,dn],styles:[".analysis-container[_ngcontent-%COMP%]{max-width:1200px;padding:0 1rem;font-family:Inter,sans-serif}.date-bar[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:.5rem;background-color:#f8f9fa;border-radius:12px;padding:.5rem;margin-bottom:2rem}.date-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:.5rem;border-radius:8px;cursor:pointer;border:2px solid transparent;transition:all .3s ease}.date-item[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.date-item.active[_ngcontent-%COMP%]{background-color:#0d6efd;color:#fff;font-weight:700}.day-name[_ngcontent-%COMP%]{font-size:.8rem;font-weight:500}.day-number[_ngcontent-%COMP%]{font-size:1.25rem}.main-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.5rem;box-shadow:0 8px 32px #0000000f;width:100%}.analysis-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.analysis-header[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%;background-color:#e6f7ff;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem;color:#1890ff;line-height:1}.analysis-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:36px;line-height:1}.analysis-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;color:#343a40}.analysis-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1.5rem}@media (min-width: 768px){.analysis-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 1200px){.analysis-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.analysis-card[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #e9ecef;padding:1.25rem;border-radius:12px;transition:all .3s ease}.analysis-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 20px #00000014}.analysis-card.readiness[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e7f5ff,#d0ebff);border:none;display:flex;justify-content:space-between;align-items:center}.readiness[_ngcontent-%COMP%]   .readiness-value[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;color:#0d6efd}.warning-card[_ngcontent-%COMP%]{background:#fff3cd;border-color:#ffeeba}.emotion-summary[_ngcontent-%COMP%]   .emotion-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.75rem}.emotion-label[_ngcontent-%COMP%]{width:100px;font-weight:500}.emotion-bar-container[_ngcontent-%COMP%]{flex-grow:1;height:8px;background-color:#e9ecef;border-radius:4px}.emotion-bar[_ngcontent-%COMP%]{height:100%;border-radius:4px;background:linear-gradient(90deg,#748ffc,#4dabf7);transition:width .4s ease}.recommendation-list[_ngcontent-%COMP%]{list-style-type:none;padding-left:0;margin:0}.recommendation-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0;border-bottom:1px solid #e9ecef}.recommendation-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.analysis-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:2rem}.conversation-container[_ngcontent-%COMP%]{height:400px;overflow-y:auto;padding:1rem;margin-bottom:1rem;display:flex;flex-direction:column;gap:1rem;scroll-behavior:smooth}.message[_ngcontent-%COMP%]{padding:.75rem 1.25rem;border-radius:1.25rem;max-width:75%;line-height:1.5}.bot-message[_ngcontent-%COMP%]{background-color:#f1f3f5;color:#343a40;border-bottom-left-radius:.25rem;align-self:flex-start}.user-message[_ngcontent-%COMP%]{background-color:#e7f5ff;color:#1971c2;border-bottom-right-radius:.25rem;align-self:flex-end}.input-area[_ngcontent-%COMP%]{display:flex;gap:.5rem;border-top:1px solid #e9ecef;padding-top:1rem}.input-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;border-radius:20px;border:1px solid #ced4da;padding:.5rem 1rem}.input-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0d6efd;box-shadow:0 0 0 2px #0d6efd40}textarea.form-control[_ngcontent-%COMP%]{resize:none;overflow:hidden}.chat-input[_ngcontent-%COMP%]{flex-grow:1;border-radius:20px;border:1px solid #ced4da;padding:.5rem 1rem;resize:none;overflow:hidden;line-height:1.5}.chat-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0d6efd;box-shadow:0 0 0 2px #0d6efd40}.progress-bar-container[_ngcontent-%COMP%]{height:8px;background-color:#e9ecef;border-radius:4px;margin-bottom:1rem}.progress-bar[_ngcontent-%COMP%]{height:100%;background-color:#0d6efd;border-radius:4px;transition:width .4s ease}.message-view[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem}.message-view[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057}.message-view[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d}"],changeDetection:0})};function C2(n,t){if(n&1&&(d(0,"div",19),f(1),u()),n&2){let e=v();m(),z(" ",e.message," ")}}function E2(n,t){if(n&1&&(d(0,"div",20),f(1),u()),n&2){let e=v();m(),z(" ",e.errorMessage," ")}}function S2(n,t){n&1&&(d(0,"div",21),f(1," A valid email is required. "),u())}var Bd=class n{constructor(t,e,r,i){this.fb=t;this.router=e;this.cdr=r;this.supabaseAuthService=i;this.forgotPasswordForm=this.fb.group({email:["",[Ee.required,Ee.email]]})}forgotPasswordForm;message=null;errorMessage=null;async onSubmit(){if(this.forgotPasswordForm.invalid){this.forgotPasswordForm.markAllAsTouched();return}let{email:t}=this.forgotPasswordForm.getRawValue();this.errorMessage=null,this.message=null;try{let{success:e,error:r}=await this.supabaseAuthService.requestPasswordReset(t);e?this.message="If an account with that email exists, you will receive a password reset link!":this.errorMessage=r?.message||"Failed to send reset link. Please try again.",this.cdr.markForCheck(),this.router.navigate([""])}catch(e){this.errorMessage=e.message||"An unexpected error occurred.",this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(T(Zn),T(Ue),T(ke),T(oi))};static \u0275cmp=X({type:n,selectors:[["app-forgot-password"]],decls:26,vars:5,consts:[[1,"auth-container"],[1,"auth-card"],[1,"text-center","mb-4"],[1,"logo-circle","mx-auto"],["src","/tr_logo.svg","alt","Logo",1,"img-fluid"],[1,"brand-name","mt-3"],[1,"brand-tagline"],["class","alert alert-info mb-3",4,"ngIf"],["class","alert alert-danger mb-3",4,"ngIf"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-tr","btn-primary","btn-md",3,"disabled"],[1,"text-center","mt-4"],[1,"mb-0"],["routerLink","",1,"login-link"],[1,"alert","alert-info","mb-3"],[1,"alert","alert-danger","mb-3"],[1,"text-danger","small","mt-1"]],template:function(e,r){if(e&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),L(4,"img",4),u()(),d(5,"div",2)(6,"h2",5),f(7,"Forgot Password"),u(),d(8,"p",6),f(9,"Enter your email to receive a password reset link."),u()(),M(10,C2,2,1,"div",7)(11,E2,2,1,"div",8),d(12,"form",9),C("ngSubmit",function(){return r.onSubmit()}),d(13,"div",10)(14,"label",11),f(15,"Email"),u(),L(16,"input",12),M(17,S2,2,0,"div",13),u(),d(18,"div",14)(19,"button",15),f(20,"Send Reset Link"),u()(),d(21,"div",16)(22,"p",17),f(23,"Remember your password? "),d(24,"a",18),f(25,"Login"),u()()()()()()),e&2){let i;m(10),y("ngIf",r.message),m(),y("ngIf",r.errorMessage),m(),y("formGroup",r.forgotPasswordForm),m(5),y("ngIf",((i=r.forgotPasswordForm.get("email"))==null?null:i.invalid)&&((i=r.forgotPasswordForm.get("email"))==null?null:i.touched)),m(2),y("disabled",r.forgotPasswordForm.invalid)}},dependencies:[ie,ye,hn,Kn,Se,Ae,Qn,Tn,Mn,Nt],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100dvh;display:flex;align-items:center;justify-content:center}.auth-card[_ngcontent-%COMP%]{background-color:transparent;border-radius:12px;width:100%;max-width:450px;padding:30px}.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:transparent;position:relative;display:flex;align-items:center;justify-content:center;margin:0 auto}.dots-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;position:relative;background-image:radial-gradient(circle,#5046e5 3px,transparent 3px);background-size:15px 15px;transform:rotate(45deg)}.brand-name[_ngcontent-%COMP%]{font-weight:700;font-size:24px;margin-bottom:5px;letter-spacing:.5px}.brand-tagline[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.tabs-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-bottom:1px solid #eee;padding-bottom:5px}.tab[_ngcontent-%COMP%]{padding:8px 15px;cursor:pointer;color:#888;font-weight:500;font-size:16px;transition:color .2s}.tab.active[_ngcontent-%COMP%]{color:#5046e5;border-bottom:2px solid #5046e5}.tab-separator[_ngcontent-%COMP%]{color:#ccc}.auth-form[_ngcontent-%COMP%]{margin-top:10px}.form-control[_ngcontent-%COMP%]{height:auto;padding:12px 15px;border-radius:8px;border:1px solid #ddd;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{border-color:#5046e5;box-shadow:0 0 0 .2rem #5046e526}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555;margin-bottom:8px}.forgot-link[_ngcontent-%COMP%]{font-size:14px;color:#5046e5;text-decoration:none}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{color:#5046e5;font-weight:500;text-decoration:none}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-primary[_ngcontent-%COMP%]{background-color:#5046e5;border-color:#5046e5;padding:12px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus{background-color:#4238d0;border-color:#4238d0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#a8a4e0;border-color:#a8a4e0}.separator[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;color:#888;font-size:14px}.separator[_ngcontent-%COMP%]:before, .separator[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #ddd}.separator[_ngcontent-%COMP%]:before{margin-right:1em}.separator[_ngcontent-%COMP%]:after{margin-left:1em}.google-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;border:1px solid #ddd;color:#333;padding:12px;font-weight:500}.google-btn[_ngcontent-%COMP%]:hover{background-color:#f8f8f8;color:#333}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{padding:20px 15px}.brand-name[_ngcontent-%COMP%]{font-size:20px}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{padding:10px}}']})};function D2(n,t){if(n&1&&(d(0,"div",10),f(1),u()),n&2){let e=v();m(),z(" ",e.errorMessage," ")}}function x2(n,t){if(n&1&&(d(0,"div",11),f(1),u()),n&2){let e=v();m(),z(" ",e.successMessage," ")}}function I2(n,t){n&1&&(d(0,"div",25),f(1," Password must be at least 6 characters. "),u())}function T2(n,t){n&1&&(d(0,"small",26),f(1," Passwords do not match "),u())}function M2(n,t){if(n&1){let e=ee();d(0,"form",12),C("ngSubmit",function(){E(e);let i=v();return S(i.onSubmit())}),d(1,"div",13)(2,"label",14),f(3,"New Password"),u(),L(4,"input",15),M(5,I2,2,0,"div",16),u(),d(6,"div",13)(7,"label",17),f(8,"Confirm New Password"),u(),L(9,"input",18),M(10,T2,2,0,"small",19),u(),d(11,"div",20)(12,"button",21),f(13,"Update Password"),u()(),d(14,"div",22)(15,"p",23),f(16,"Go back to "),d(17,"a",24),f(18,"Login"),u()()()()}if(n&2){let e,r,i=v();y("formGroup",i.updatePasswordForm),m(5),y("ngIf",((e=i.updatePasswordForm.get("newPassword"))==null?null:e.invalid)&&((e=i.updatePasswordForm.get("newPassword"))==null?null:e.touched)),m(5),y("ngIf",i.updatePasswordForm.hasError("mismatch")&&((r=i.updatePasswordForm.get("confirmNewPassword"))==null?null:r.touched)),m(2),y("disabled",i.updatePasswordForm.invalid)}}var $d=class n{constructor(t,e,r,i,o){this.fb=t;this.router=e;this.route=r;this.cdr=i;this.supabase=o;this.updatePasswordForm=this.fb.group({newPassword:["",[Ee.required,Ee.minLength(6)]],confirmNewPassword:["",Ee.required]},{validators:this.passwordMatchValidator})}updatePasswordForm;errorMessage=null;successMessage=null;async ngOnInit(){try{let{data:t,error:e}=await this.supabase.GetClient().auth.getSession();if(e||!t.session){this.errorMessage="Invalid or expired reset link. Please request a new one.",this.cdr.markForCheck();return}this.router.navigate([],{queryParams:{returnUrl:this.route.snapshot.queryParamMap.get("returnUrl")},replaceUrl:!0})}catch{this.errorMessage="Something went wrong while verifying your reset link.",this.cdr.markForCheck()}}passwordMatchValidator(t){let e=t.get("newPassword")?.value,r=t.get("confirmNewPassword")?.value;return e===r?null:{mismatch:!0}}async onSubmit(){if(this.updatePasswordForm.invalid){this.updatePasswordForm.markAllAsTouched();return}let{newPassword:t}=this.updatePasswordForm.getRawValue();this.errorMessage=null,this.successMessage=null;try{let{error:e}=await this.supabase.GetClient().auth.updateUser({password:t});e?this.errorMessage=e.message:(this.successMessage="Your password has been updated successfully! Redirecting to login...",await this.supabase.GetClient().auth.signOut(),localStorage.clear(),sessionStorage.clear(),setTimeout(()=>this.router.navigate(["/auth"]),2500)),this.cdr.markForCheck()}catch(e){this.errorMessage=e.message||"An unexpected error occurred.",this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(T(Zn),T(Ue),T(Ct),T(ke),T(ge))};static \u0275cmp=X({type:n,selectors:[["app-update-password"]],decls:13,vars:3,consts:[[1,"auth-container"],[1,"auth-card"],[1,"text-center","mb-4"],[1,"logo-circle","mx-auto"],["src","/tr_logo.svg","alt","Logo",1,"img-fluid"],[1,"brand-name","mt-3"],[1,"brand-tagline"],["class","alert alert-danger mb-3",4,"ngIf"],["class","alert alert-success mb-3",4,"ngIf"],["class","auth-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert","alert-danger","mb-3"],[1,"alert","alert-success","mb-3"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","newPassword",1,"form-label"],["type","password","id","newPassword","formControlName","newPassword","placeholder","Enter new password",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","confirmNewPassword",1,"form-label"],["type","password","id","confirmNewPassword","formControlName","confirmNewPassword","placeholder","Confirm new password",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-tr","btn-primary","btn-md",3,"disabled"],[1,"text-center","mt-4"],[1,"mb-0"],["routerLink","/auth",1,"login-link"],[1,"text-danger","small","mt-1"],[1,"text-danger"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),L(4,"img",4),u()(),d(5,"div",2)(6,"h2",5),f(7,"Set New Password"),u(),d(8,"p",6),f(9,"Please enter your new password."),u()(),M(10,D2,2,1,"div",7)(11,x2,2,1,"div",8)(12,M2,19,4,"form",9),u()()),e&2&&(m(10),y("ngIf",r.errorMessage),m(),y("ngIf",r.successMessage),m(),y("ngIf",!r.errorMessage))},dependencies:[ie,ye,hn,Kn,Se,Ae,Qn,Tn,Mn],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100dvh;display:flex;align-items:center;justify-content:center}.auth-card[_ngcontent-%COMP%]{background-color:transparent;border-radius:12px;width:100%;max-width:450px;padding:30px}.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:transparent;position:relative;display:flex;align-items:center;justify-content:center;margin:0 auto}.dots-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;position:relative;background-image:radial-gradient(circle,#5046e5 3px,transparent 3px);background-size:15px 15px;transform:rotate(45deg)}.brand-name[_ngcontent-%COMP%]{font-weight:700;font-size:24px;margin-bottom:5px;letter-spacing:.5px}.brand-tagline[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.tabs-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-bottom:1px solid #eee;padding-bottom:5px}.tab[_ngcontent-%COMP%]{padding:8px 15px;cursor:pointer;color:#888;font-weight:500;font-size:16px;transition:color .2s}.tab.active[_ngcontent-%COMP%]{color:#5046e5;border-bottom:2px solid #5046e5}.tab-separator[_ngcontent-%COMP%]{color:#ccc}.auth-form[_ngcontent-%COMP%]{margin-top:10px}.form-control[_ngcontent-%COMP%]{height:auto;padding:12px 15px;border-radius:8px;border:1px solid #ddd;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{border-color:#5046e5;box-shadow:0 0 0 .2rem #5046e526}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555;margin-bottom:8px}.forgot-link[_ngcontent-%COMP%]{font-size:14px;color:#5046e5;text-decoration:none}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{color:#5046e5;font-weight:500;text-decoration:none}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-primary[_ngcontent-%COMP%]{background-color:#5046e5;border-color:#5046e5;padding:12px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus{background-color:#4238d0;border-color:#4238d0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#a8a4e0;border-color:#a8a4e0}.separator[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;color:#888;font-size:14px}.separator[_ngcontent-%COMP%]:before, .separator[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #ddd}.separator[_ngcontent-%COMP%]:before{margin-right:1em}.separator[_ngcontent-%COMP%]:after{margin-left:1em}.google-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;border:1px solid #ddd;color:#333;padding:12px;font-weight:500}.google-btn[_ngcontent-%COMP%]:hover{background-color:#f8f8f8;color:#333}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{padding:20px 15px}.brand-name[_ngcontent-%COMP%]{font-size:20px}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{padding:10px}}']})};var Hd=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;async getTradeAnalytics(){let t=this.supabaseService.user();if(!t)throw new Error("User not authenticated");let{data:e,error:r}=await this.supabase.rpc("get_user_trade_analytics",{user_id:t.id});if(r)throw console.error("Error fetching trade analytics:",r),r;return e}static \u0275fac=function(e){return new(e||n)(O(ge))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};function k2(n,t){if(n&1&&(d(0,"div",18)(1,"div",19)(2,"div",7)(3,"div",20),f(4),u(),d(5,"h6",16),f(6),u(),d(7,"p",21),f(8),ht(9,"number"),u()()()()),n&2){let e=t.$implicit;m(4),x(e.icon),m(2),x(e.label),m(2),x(e.format?kt(9,3,e.value,e.format):e.value)}}function N2(n,t){if(n&1&&(d(0,"div",22)(1,"div",19)(2,"div",7)(3,"div",23),f(4),u(),d(5,"h6",16),f(6),u(),d(7,"p",24),f(8),ht(9,"number"),u()()()()),n&2){let e=t.$implicit;m(4),x(e.icon),m(2),x(e.label),m(2),x(kt(9,3,e.value,e.format))}}function P2(n,t){if(n&1&&(d(0,"div",1)(1,"h3",2),f(2,"\u{1F4CA} Trade Analytics Overview"),u(),d(3,"div",3),M(4,k2,10,6,"div",4),u(),d(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h6",8),f(10,"\u{1F3C6} Win Rate"),u(),d(11,"div",9)(12,"div",10),f(13),ht(14,"number"),u()()()()(),d(15,"div",5)(16,"div",6)(17,"div",7)(18,"h6",8),f(19,"\u{1F4C9} Loss Rate"),u(),d(20,"div",9)(21,"div",11),f(22),ht(23,"number"),u()()()()()(),d(24,"div",12),M(25,N2,10,6,"div",13),u(),d(26,"div",14)(27,"div",5)(28,"div",15)(29,"div",7)(30,"h6",16),f(31,"\u23F1\uFE0F Avg Trade Duration (Seconds)"),u(),d(32,"p",17),f(33),ht(34,"number"),u()()()(),d(35,"div",5)(36,"div",15)(37,"div",7)(38,"h6",16),f(39,"\u{1F3AF} Avg Entry Slippage"),u(),d(40,"p",17),f(41),ht(42,"number"),u()()()()()()),n&2){let e=v();m(4),y("ngForOf",e.kpiList),m(8),Bn("width",e.analytics.win_rate*100,"%"),m(),z(" ",kt(14,10,e.analytics.win_rate*100,"1.0-0"),"% "),m(8),Bn("width",e.analytics.loss_rate*100,"%"),m(),z(" ",kt(23,13,e.analytics.loss_rate*100,"1.0-0"),"% "),m(3),y("ngForOf",e.extraStats),m(8),x(kt(34,16,e.analytics.average_trade_duration_seconds,"1.0-0")),m(8),x(kt(42,19,e.analytics.average_entry_slippage,"1.2-2"))}}var zd=class n{constructor(t){this.supabaseAnalytic=t}analytics=null;kpiList=[];extraStats=[];async ngOnInit(){this.analytics=await this.supabaseAnalytic.getTradeAnalytics(),this.analytics&&this.initializeCards(),console.log(this.analytics)}initializeCards(){this.kpiList=[{label:"Discipline Score",value:this.analytics.discipline_score,icon:"\u{1F3AF}",format:"1.1-1"},{label:"Profit Factor",value:this.analytics.profit_factor,icon:"\u{1F4B0}",format:"1.2-2"},{label:"Total P/L ($)",value:this.analytics.total_realized_profit,icon:"\u{1F4B5}",format:"1.2-2"},{label:"Avg P/L ($)",value:this.analytics.average_profit_per_trade,icon:"\u2696\uFE0F",format:"1.2-2"}],this.extraStats=[{label:"Avg. Confidence Drift (During)",value:this.analytics.avg_confidence_drift_before_during,icon:"\u{1F9E0}",format:"1.1-1"},{label:"Avg. Confidence Drift (After)",value:this.analytics.avg_confidence_drift_before_after,icon:"\u{1F9D8}",format:"1.1-1"},{label:"Avg. Risk/Reward Ratio",value:this.analytics.average_risk_reward_ratio,icon:"\u{1F3B2}",format:"1.2-2"}]}static \u0275fac=function(e){return new(e||n)(T(Hd))};static \u0275cmp=X({type:n,selectors:[["app-trade-analytic"]],decls:1,vars:1,consts:[["class","container mt-4",4,"ngIf"],[1,"container","mt-4"],[1,"text-center","mb-4","fw-bold"],[1,"row","g-3","mb-4"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"card","shadow","border-0"],[1,"card-body"],[1,"mb-2","fw-bold"],[1,"progress",2,"height","20px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-danger"],[1,"row","g-3"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"row","g-3","mt-4"],[1,"card","text-center","shadow","border-0"],[1,"text-muted"],[1,"h4","fw-bold","text-info","mt-2"],[1,"col-md-3"],[1,"card","text-center","shadow","border-0","h-100"],[1,"display-6","mb-2"],[1,"h5","fw-bold","mt-2","text-primary"],[1,"col-md-4"],[1,"mb-1"],[1,"h5","fw-bold","mt-2","text-dark"]],template:function(e,r){e&1&&M(0,P2,43,22,"div",0),e&2&&y("ngIf",r.analytics)},dependencies:[ie,nt,ye,qo],styles:[".card[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 4px 16px #00000026}.progress-bar[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600}"]})};var qd=class n{rows=j([]);setRows(t){this.rows.set(t)}upsert(t){let e=this.rows(),r=e.findIndex(i=>i.trade_id===t.trade_id);r>=0?e[r]=t:e.unshift(t),this.rows.set([...e])}remove(t){this.rows.set(this.rows().filter(e=>e.trade_id!==t))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wd=class n{accounts=j([]);upsert(t){let e=this.accounts(),r=e.findIndex(i=>i.account_id===t.account_id);r>=0?e[r]=t:e.unshift(t),this.accounts.set([...e])}setAll(t){this.accounts.set(t)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var Gd=class n{table="tradesjournal";sb=I(ge).GetClient();async listByState(t){let{data:e,error:r}=await this.sb.from(this.table).select("*").eq("trade_state",t).order("created_at",{ascending:!1}).order("trade_id",{ascending:!1}).limit(50);if(r)throw r;return e??[]}async insertPlanned(t){let{data:e,error:r}=await this.sb.from(this.table).insert(t).select("*").single();if(r)throw r;return e}async markExecuted(t,e){let r={actual_entry_price:e.actual_entry_price,actual_stop_loss:e.actual_stop_loss,actual_take_profit:e.actual_take_profit,actual_lot_size:e.actual_lot_size,actual_entry_date:new Date().toISOString(),trade_state:"EXECUTING",updated_at:new Date().toISOString()},{data:i,error:o}=await this.sb.from(this.table).update(r).eq("trade_id",t).select("*").single();if(o)throw o;return i}async completeAndApply(t,e){let r={exit_price:e.exit_price,broker_fees:e.broker_fees,trade_outcome:e.outcome,emotional_after_state:e.emotion_after,confidence_after_level:e.conf_after,trade_notes:e.notes??null,lesson_learned:e.lessons??null,points_to_improve:e.improve??null,exit_date:new Date().toISOString(),trade_state:"COMPLETED",updated_at:new Date().toISOString()},{data:i,error:o}=await this.sb.from(this.table).update(r).eq("trade_id",t).select("*").single();if(o)throw o;return{updated_trade:i}}async remove(t){let{error:e}=await this.sb.from(this.table).delete().eq("trade_id",t);if(e)throw e}async updatePlanned(t,e){let{data:r,error:i}=await this.sb.from(this.table).update(B(N({},e),{updated_at:new Date().toISOString()})).eq("trade_id",t).select("*").single();if(i)throw i;return r}async updateExecuting(t,e){let{data:r,error:i}=await this.sb.from(this.table).update(B(N({},e),{updated_at:new Date().toISOString()})).eq("trade_id",t).select("*").single();if(i)throw i;return r}async getById(t){let{data:e,error:r}=await this.sb.from(this.table).select("*").eq("trade_id",t).single();if(r)throw r;return e}async listByStatePaged(t,e,r){let i=this.sb.from(this.table).select("*").eq("trade_state",t).order("created_at",{ascending:!1}).order("trade_id",{ascending:!1}).limit(e);if(r){let a=encodeURIComponent(r.created_at),l=encodeURIComponent(r.trade_id);i=i.or(`and(created_at.lt.${a}),and(created_at.eq.${a},trade_id.lt.${l})`)}let{data:o,error:s}=await i;if(s)throw s;return o??[]}async listByDateRange(t,e,r){let i=t==="COMPLETED"?"exit_date":"created_at",o=new Date(r),s=new Date(o.getTime()+24*60*60*1e3-1).toISOString(),{data:a,error:l}=await this.sb.from(this.table).select("*").eq("trade_state",t).gte(i,new Date(e).toISOString()).lte(i,s).order(i,{ascending:!1}).order("trade_id",{ascending:!1});if(l)throw l;return a??[]}static \u0275fac=function(e){return new(e||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qd=class n{sb=I(ge).GetClient();async listMine(){let{data:t,error:e}=await this.sb.from("tradeaccount").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}static \u0275fac=function(e){return new(e||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var Cs=class n{tradesStore=I(qd);accountsStore=I(Wd);tradeApi=I(Gd);tradeAccountsApi=I(Qd);supabaseFunction=I(ws);loading=j(!1);error=j(null);get tradesSig(){return this.tradesStore.rows}get trades(){return this.tradesStore.rows()}get accounts(){return this.accountsStore.accounts}async wrap(t){this.loading.set(!0),this.error.set(null);try{return await t()}catch(e){let r=e?.message??JSON.stringify(e);console.error("[TradesFacade]",r,e),this.error.set(r);return}finally{this.loading.set(!1)}}async loadTab(t){await this.wrap(async()=>{let e=await this.tradeApi.listByState(t);this.tradesStore.setRows(e)})}async loadAccounts(){await this.wrap(async()=>{let t=await this.tradeAccountsApi.listMine();this.accountsStore.setAll(t)})}async createPlanned(t){await this.wrap(async()=>{let e=await this.tradeApi.insertPlanned(t);this.tradesStore.upsert(e)})}async markExecuted(t,e){await this.wrap(async()=>{let r=await this.tradeApi.markExecuted(t,e);this.tradesStore.upsert(r),this.resetCacheForState(r.trade_state)})}async completeAndApply(t,e){await this.wrap(async()=>{let r=await this.tradeApi.completeAndApply(t,e);this.tradesStore.upsert(r.updated_trade),r.updated_account&&this.accountsStore.upsert(r.updated_account),this.resetCacheForState("EXECUTING"),this.resetCacheForState("COMPLETED")})}async remove(t){await this.wrap(async()=>{await this.tradeApi.remove(t),this.tradesStore.remove(t),this.resetAllCaches()})}async updatePlanned(t,e){await this.wrap(async()=>{let r=await this.tradeApi.updatePlanned(t,e);this.tradesStore.upsert(r),this.resetCacheForState("PLANNED")})}async updateExecuting(t,e){await this.wrap(async()=>{let r=await this.tradeApi.updateExecuting(t,e);this.tradesStore.upsert(r),this.resetCacheForState("EXECUTING")})}async getTradeById(t){return await this.wrap(async()=>await this.tradeApi.getById(t))}async analyzeChart(t){return await this.wrap(async()=>{let r={image_base64:await this.fileToBase64(t),filename:t.name,mimetype:t.type,expected_schema:"pretrade.v1"},{data:i,error:o}=await this.supabaseFunction.callEdgeFunction("trade-chart-extraction-gemini",r);if(o)throw new Error(o?.message??"Edge function failed");let s=typeof i=="string"?JSON.parse(i):i;return this.normalizeAi(s)})??null}async fileToBase64(t){let e=await t.arrayBuffer(),r=new Uint8Array(e),i="";for(let o=0;o<r.length;o++)i+=String.fromCharCode(r[o]);return`data:${t.type};base64,${btoa(i)}`}normalizeAi(t){if(typeof t=="string")try{t=JSON.parse(t)}catch{t={}}let e=a=>a==null?null:Number.isFinite(Number(a))?Number(a):null,r=a=>a==null?null:String(a),i=a=>a==="LONG"||a==="SHORT"?a:null,o=Array.isArray(t?.tags)?t.tags.map(a=>String(a).toLowerCase().trim()).filter(Boolean).slice(0,8):[],s={is_relevant:!!t?.is_relevant,confidence:Math.max(0,Math.min(1,Number(t?.confidence??0))),symbol:r(t?.symbol),direction:i(t?.direction),planned_entry_price:e(t?.planned_entry_price),planned_stop_loss:e(t?.planned_stop_loss),planned_take_profit:e(t?.planned_take_profit),planned_lot_size:e(t?.planned_lot_size),planned_risk_percentage:e(t?.planned_risk_percentage),planned_risk_amount:e(t?.planned_risk_amount),strategy_name:r(t?.strategy_name),tags:o,entry_criteria:String(t?.entry_criteria??"")};return s.is_relevant?s:{is_relevant:!1,confidence:s.confidence??0,symbol:null,direction:null,planned_entry_price:null,planned_stop_loss:null,planned_take_profit:null,planned_lot_size:null,planned_risk_percentage:null,planned_risk_amount:null,strategy_name:null,tags:[],entry_criteria:""}}PAGE_SIZE=20;pageCache={PLANNED:[],EXECUTING:[],COMPLETED:[]};resetCacheForState(t){this.pageCache[t]=[]}resetAllCaches(){this.pageCache={PLANNED:[],EXECUTING:[],COMPLETED:[]}}async loadTabPage(t,e=!1){if(e&&this.resetCacheForState(t),this.pageCache[t][0]){this.tradesStore.setRows(this.pageCache[t][0].rows);return}await this.wrap(async()=>{let r=await this.tradeApi.listByStatePaged(t,this.PAGE_SIZE+1,null),{page:i,nextCursor:o}=this.splitToPage(r);this.pageCache[t][0]={rows:i,nextCursor:o},this.tradesStore.setRows(i)})}async ensurePageLoaded(t,e){if(this.pageCache[t][e])return!0;let r=this.pageCache[t][e-1];if(!r||!r.nextCursor)return!1;let i=await this.wrap(async()=>await this.tradeApi.listByStatePaged(t,this.PAGE_SIZE+1,r.nextCursor));if(!i)return!1;let{page:o,nextCursor:s}=this.splitToPage(i);return this.pageCache[t][e]={rows:o,nextCursor:s},!0}pagedRows(t,e){return this.pageCache[t][e]?.rows??[]}reflectPageToStore(t,e){let r=this.pageCache[t][e]?.rows??[];this.tradesStore.setRows(r)}hasNextPage(t,e){return!!this.pageCache[t][e]?.nextCursor}splitToPage(t){let e=t.length>this.PAGE_SIZE,r=t.slice(0,this.PAGE_SIZE),i=e?t[this.PAGE_SIZE-1]:t[t.length-1],o=e&&i?{created_at:String(i.created_at),trade_id:String(i.trade_id)}:null;return{page:r,nextCursor:o}}async fetchRangeForExport(t,e,r){return await this.wrap(async()=>await this.tradeApi.listByDateRange(t,e,r))??[]}static \u0275fac=function(e){return new(e||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};function O2(n,t){if(n&1&&(d(0,"option",14),f(1),u()),n&2){let e=t.$implicit;y("ngValue",e.id),m(),x(e.name)}}function R2(n,t){if(n&1&&(d(0,"div",38)(1,"div",39),f(2),u(),d(3,"div",40),f(4),ht(5,"number"),u()()),n&2){let e=t.ngIf;m(2),x(e.name),m(2),z("Balance \u2022 ",kt(5,2,e.balance,"1.0-2"),"")}}function F2(n,t){if(n&1){let e=ee();d(0,"div",41)(1,"label",42),f(2,"Manual Balance (fallback)"),u(),d(3,"input",43),C("ngModelChange",function(i){E(e);let o=v();return o.manualBalance.set(i),S(o.resyncRiskFromPercentOrDollar())}),u(),d(4,"div",44),f(5,"Used only when selected account has no balance."),u()()}if(n&2){let e=v();m(3),y("ngModel",e.manualBalance())}}function L2(n,t){if(n&1&&(d(0,"div",45),f(1),u()),n&2){let e=v();m(),x(e.aiMessage())}}function V2(n,t){if(n&1&&(d(0,"div",46),f(1),u()),n&2){let e=v();m(),x(e.aiWarn())}}function j2(n,t){if(n&1&&(d(0,"div",47),f(1),u()),n&2){let e=v();m(),x(e.aiErr())}}function U2(n,t){n&1&&(d(0,"div",65),f(1,"Required for auto risk from SL."),u())}function B2(n,t){n&1&&(d(0,"div",44),f(1,"1.00 = standard lot"),u())}function $2(n,t){n&1&&(d(0,"div",65),f(1,"Required for auto risk from SL."),u())}function H2(n,t){if(n&1){let e=ee();d(0,"div",10)(1,"div",48)(2,"div",49)(3,"label",42),f(4,"Instrument Type"),u(),d(5,"select",13),C("ngModelChange",function(i){E(e);let o=v();return o.instrumentType.set(i),S(o.recalcRiskFromSL())}),d(6,"option",50),f(7,"Forex"),u(),d(8,"option",51),f(9,"Metals"),u(),d(10,"option",52),f(11,"Indices"),u(),d(12,"option",53),f(13,"Stocks"),u(),d(14,"option",54),f(15,"Crypto"),u(),d(16,"option",55),f(17,"Other"),u()()(),d(18,"div",49)(19,"label",42),f(20,"Symbol"),u(),d(21,"input",56),K("ngModelChange",function(i){E(e);let o=v();return Y(o.form.symbol,i)||(o.form.symbol=i),S(i)}),C("input",function(){E(e);let i=v();return S(i.recalcRiskFromSL())}),u()(),d(22,"div",49)(23,"label",42),f(24,"Direction"),u(),d(25,"select",13),K("ngModelChange",function(i){E(e);let o=v();return Y(o.form.direction,i)||(o.form.direction=i),S(i)}),d(26,"option",57),f(27,"Long"),u(),d(28,"option",58),f(29,"Short"),u()()(),d(30,"div",49)(31,"label",42),f(32,"Entry Price"),u(),d(33,"input",59),K("ngModelChange",function(i){E(e);let o=v();return Y(o.form.planned_entry_price,i)||(o.form.planned_entry_price=i),S(i)}),C("input",function(){E(e);let i=v();return S(i.recalcRiskFromSL())}),u(),M(34,U2,2,0,"div",60),u(),d(35,"div",49)(36,"label",42),f(37),u(),d(38,"input",61),K("ngModelChange",function(i){E(e);let o=v();return Y(o.form.planned_lot_size,i)||(o.form.planned_lot_size=i),S(i)}),C("input",function(){E(e);let i=v();return S(i.recalcRiskFromSL())}),u(),M(39,B2,2,0,"div",62)(40,$2,2,0,"div",60),u(),d(41,"div",49)(42,"label",42),f(43,"Strategy Name"),u(),d(44,"input",63),K("ngModelChange",function(i){E(e);let o=v();return Y(o.form.strategy_name,i)||(o.form.strategy_name=i),S(i)}),u()(),d(45,"div",41)(46,"label",42),f(47,"Tags (comma separated)"),u(),d(48,"input",64),K("ngModelChange",function(i){E(e);let o=v();return Y(o.tagsStr,i)||(o.tagsStr=i),S(i)}),u()()()()}if(n&2){let e=v();m(5),y("ngModel",e.instrumentType()),m(16),Q("ngModel",e.form.symbol),m(4),Q("ngModel",e.form.direction),m(8),Q("ngModel",e.form.planned_entry_price),m(),y("ngIf",!e.form.planned_entry_price),m(3),x(e.isForex()?"Lot Size (lots)":"Quantity / Contracts"),m(),Q("ngModel",e.form.planned_lot_size),m(),y("ngIf",e.isForex()),m(),y("ngIf",!e.form.planned_lot_size),m(4),Q("ngModel",e.form.strategy_name),m(4),Q("ngModel",e.tagsStr)}}function z2(n,t){n&1&&(d(0,"div",65),f(1,"Required for auto risk from SL."),u())}function q2(n,t){if(n&1){let e=ee();d(0,"div",49)(1,"label",42),f(2,"$ per pip (per 1.00 lot)"),u(),d(3,"input",75),C("ngModelChange",function(i){E(e);let o=v(3);return o.pipValuePerStdLot.set(i),S(o.recalcRiskFromSL())}),u(),d(4,"div",44),f(5,"Default 10 for most FX; JPY pairs pip size 0.01."),u()()}if(n&2){let e=v(3);m(3),y("ngModel",e.pipValuePerStdLot())}}function W2(n,t){if(n&1&&($n(0),M(1,q2,6,1,"div",74),Hn()),n&2){let e=v(2);m(),y("ngIf",e.autoRiskFromSL())}}function G2(n,t){if(n&1){let e=ee();d(0,"div",49)(1,"label",42),f(2,"Point Size"),u(),d(3,"input",76),C("ngModelChange",function(i){E(e);let o=v(3);return o.pointSize.set(i),S(o.recalcRiskFromSL())}),u(),d(4,"div",44),f(5,"e.g., 0.01; adjust per instrument."),u()()}if(n&2){let e=v(3);m(3),y("ngModel",e.pointSize())}}function Q2(n,t){if(n&1){let e=ee();d(0,"div",49)(1,"label",42),f(2,"$ per point (per 1 unit)"),u(),d(3,"input",77),C("ngModelChange",function(i){E(e);let o=v(3);return o.valuePerPointPerUnit.set(i),S(o.recalcRiskFromSL())}),u()()}if(n&2){let e=v(3);m(3),y("ngModel",e.valuePerPointPerUnit())}}function K2(n,t){if(n&1){let e=ee();d(0,"div",49)(1,"label",42),f(2,"Contract Multiplier"),u(),d(3,"input",75),C("ngModelChange",function(i){E(e);let o=v(3);return o.contractMultiplier.set(i),S(o.recalcRiskFromSL())}),u(),d(4,"div",44),f(5,"1 for shares. Use broker spec for CFDs/indices."),u()()}if(n&2){let e=v(3);m(3),y("ngModel",e.contractMultiplier())}}function Z2(n,t){if(n&1&&M(0,G2,6,1,"div",74)(1,Q2,4,1,"div",74)(2,K2,6,1,"div",74),n&2){let e=v(2);y("ngIf",e.autoRiskFromSL()),m(),y("ngIf",e.autoRiskFromSL()),m(),y("ngIf",e.autoRiskFromSL())}}function J2(n,t){if(n&1){let e=ee();d(0,"div",10)(1,"div",48)(2,"div",66)(3,"label",42),f(4,"Stop Loss Price"),u(),d(5,"input",67),K("ngModelChange",function(i){E(e);let o=v();return Y(o.form.planned_stop_loss,i)||(o.form.planned_stop_loss=i),S(i)}),C("input",function(){E(e);let i=v();return S(i.recalcRiskFromSL())}),u(),M(6,z2,2,0,"div",60),u(),d(7,"div",66)(8,"label",42),f(9,"Take Profit Price"),u(),d(10,"input",68),K("ngModelChange",function(i){E(e);let o=v();return Y(o.form.planned_take_profit,i)||(o.form.planned_take_profit=i),S(i)}),u()(),M(11,W2,2,1,"ng-container",69)(12,Z2,3,3,"ng-template",null,0,zt),d(14,"div",49)(15,"label",42),f(16,"Risk % per Trade"),u(),d(17,"input",70),K("ngModelChange",function(i){E(e);let o=v();return Y(o.form.planned_risk_percentage,i)||(o.form.planned_risk_percentage=i),S(i)}),C("input",function(){E(e);let i=v();return S(i.onRiskPercentChange())}),u(),d(18,"div",44),f(19),ht(20,"number"),u()(),d(21,"div",49)(22,"label",42),f(23,"Risk $ per Trade"),u(),d(24,"input",70),K("ngModelChange",function(i){E(e);let o=v();return Y(o.form.planned_risk_amount,i)||(o.form.planned_risk_amount=i),S(i)}),C("input",function(){E(e);let i=v();return S(i.onRiskDollarChange())}),u(),d(25,"div",44),f(26),u()(),d(27,"div",49)(28,"div",71)(29,"div",72),f(30,"Reward:Risk Ratio"),u(),d(31,"div",73),f(32),u(),d(33,"div",4),f(34,"Auto-calculated"),u()()()()()}if(n&2){let e=bt(13),r=v();m(5),Q("ngModel",r.form.planned_stop_loss),m(),y("ngIf",!r.form.planned_stop_loss),m(4),Q("ngModel",r.form.planned_take_profit),m(),y("ngIf",r.isForex())("ngIfElse",e),m(6),Q("ngModel",r.form.planned_risk_percentage),m(2),Fi("\u2248 ",r.riskDollarPreview()," (from ",kt(20,11,r.baseBalance(),"1.0-2")," balance)"),m(5),Q("ngModel",r.form.planned_risk_amount),m(2),z("\u2248 ",r.riskPercentPreview()," of balance"),m(6),x(r.rrRatio())}}function Y2(n,t){if(n&1){let e=ee();d(0,"div",10)(1,"label",42),f(2,"Entry Criteria (Why are you taking this trade?) *"),u(),d(3,"textarea",78),K("ngModelChange",function(i){E(e);let o=v();return Y(o.form.entry_criteria,i)||(o.form.entry_criteria=i),S(i)}),u(),d(4,"div",79),f(5),u()()}if(n&2){let e=v();m(3),Q("ngModel",e.form.entry_criteria),m(),ne("text-danger",e.wordCount()<50),m(),z(" Current: ",e.wordCount()," words (minimum 50 required) ")}}function X2(n,t){if(n&1){let e=ee();d(0,"div",10)(1,"div",48)(2,"div",49)(3,"label",42),f(4,"Current Emotional State"),u(),d(5,"select",13),K("ngModelChange",function(i){E(e);let o=v();return Y(o.form.emotional_before_state,i)||(o.form.emotional_before_state=i),S(i)}),d(6,"option",14),f(7,"Select emotional state"),u(),d(8,"option"),f(9,"calm"),u(),d(10,"option"),f(11,"confident"),u(),d(12,"option"),f(13,"anxious"),u(),d(14,"option"),f(15,"fearful"),u(),d(16,"option"),f(17,"euphoric"),u()()(),d(18,"div",49)(19,"label",42),f(20,"Potential Bias"),u(),d(21,"select",13),K("ngModelChange",function(i){E(e);let o=v();return Y(o.form.emotional_before_potential_bias,i)||(o.form.emotional_before_potential_bias=i),S(i)}),d(22,"option"),f(23,"None - Clear Mindset"),u(),d(24,"option"),f(25,"FOMO"),u(),d(26,"option"),f(27,"Revenge"),u(),d(28,"option"),f(29,"Confirmation"),u(),d(30,"option"),f(31,"Overconfidence"),u()()(),d(32,"div",49)(33,"label",80),f(34,"Trade Confidence (1-5)"),u(),d(35,"input",81),K("ngModelChange",function(i){E(e);let o=v();return Y(o.form.confidence_before_level,i)||(o.form.confidence_before_level=i),S(i)}),u(),d(36,"div",82)(37,"span"),f(38,"Low"),u(),d(39,"span"),f(40,"Medium"),u(),d(41,"span"),f(42,"High"),u()(),d(43,"div"),f(44),u()(),d(45,"div",41)(46,"label",42),f(47,"Additional Notes"),u(),d(48,"textarea",83),K("ngModelChange",function(i){E(e);let o=v();return Y(o.form.additional_notes,i)||(o.form.additional_notes=i),S(i)}),u()()()()}if(n&2){let e,r=v();m(5),Q("ngModel",r.form.emotional_before_state),m(),y("ngValue",null),m(15),Q("ngModel",r.form.emotional_before_potential_bias),m(14),Q("ngModel",r.form.confidence_before_level),m(9),z("Confidence Level: ",(e=r.form.confidence_before_level)!==null&&e!==void 0?e:3,""),m(4),Q("ngModel",r.form.additional_notes)}}function eL(n,t){if(n&1&&(d(0,"div",84),f(1),u()),n&2){let e=v();m(),x(e.uc.error())}}function tL(n,t){if(n&1&&(d(0,"div",85),f(1),u()),n&2){let e=v();m(),z(" ",e.isEditing()?"Updated!":"Saved!"," You can move to \u201CPlanned Trades\u201D. ")}}var Kd=class n{constructor(t,e,r){this.uc=t;this.route=e;this.router=r}ngOnInit(){this.uc.loadAccounts(),this.loadEditIfAny(),Wr(()=>{let t=this.accounts();!this.accountId()&&t.length===1&&this.accountId.set(t[0].id)})}multiOpen=j(!1);basicOpen=j(!0);riskOpen=j(!0);analysisOpen=j(!1);emotionOpen=j(!1);setAll(t){this.basicOpen.set(t),this.riskOpen.set(t),this.analysisOpen.set(t),this.emotionOpen.set(t)}toggle(t){if(this.multiOpen()){let e=this.getState(t);e.set(!e())}else{let e=this.getState(t)();this.setAll(!1),this.getState(t).set(!e)}}getState(t){return t==="basic"?this.basicOpen:t==="risk"?this.riskOpen:t==="analysis"?this.analysisOpen:this.emotionOpen}dzDrag=!1;onDzDrag(t){t.preventDefault(),this.dzDrag=!0}onDzDrop(t){t.preventDefault(),this.dzDrag=!1;let e=t.dataTransfer?.files?.[0];e&&this.handleChart(e)}accounts=et(()=>this.uc.accounts().map(t=>({id:t.account_id,name:t.account_name,balance:Number(t.balance??0)})));accountId=j(null);selectedAccount=et(()=>this.accounts().find(t=>t.id===this.accountId())??null);manualBalance=j(0);baseBalance=et(()=>{let t=Number(this.selectedAccount()?.balance??0);return t>0?t:Number(this.manualBalance()||0)});instrumentType=j("forex");isForex=()=>this.instrumentType()==="forex";autoRiskFromSL=j(!0);pipValuePerStdLot=j(10);pointSize=j(.01);valuePerPointPerUnit=j(1);contractMultiplier=j(1);editingTradeId=j(null);isEditing=et(()=>this.editingTradeId()!==null);form={symbol:"",direction:"LONG",planned_entry_price:null,planned_stop_loss:null,planned_take_profit:null,planned_lot_size:null,planned_risk_percentage:null,planned_risk_amount:null,strategy_name:"",entry_criteria:"",emotional_before_state:null,emotional_before_potential_bias:"None - Clear Mindset",confidence_before_level:3,additional_notes:null};tagsStr="";success=j(!1);aiMessage=j(null);aiWarn=j(null);aiErr=j(null);wordCount(){let t=(this.form.entry_criteria??"").toString().trim();return t?t.split(/\s+/).length:0}syncOnBalanceChange=Wr(()=>{let t=this.baseBalance(),e=Number(this.form.planned_risk_percentage??0),r=Number(this.form.planned_risk_amount??0);t&&(e>0?this.form.planned_risk_amount=+(e/100*t).toFixed(2):r>0&&(this.form.planned_risk_percentage=+(r/t*100).toFixed(2)))});riskPercentPreview=et(()=>{let t=this.baseBalance(),e=Number(this.form.planned_risk_amount??0),r=t?e/t*100:Number(this.form.planned_risk_percentage??0);return`${(isFinite(r)?r:0).toFixed(2)}%`});riskDollarPreview=et(()=>{let t=this.baseBalance(),r=Number(this.form.planned_risk_percentage??0)/100*t,i=Number(this.form.planned_risk_amount??0)||r;return`$${(isFinite(i)?i:0).toFixed(2)}`});rrRatio=et(()=>{let t=Number(this.form.planned_entry_price??0),e=Number(this.form.planned_stop_loss??0),r=Number(this.form.planned_take_profit??0);if(!t||!e||!r)return"\u2014";let i=Math.abs(t-e),o=Math.abs(r-t);return i?`1:${(o/i).toFixed(2)}`:"\u2014"});pipSizeFor(t){let e=(t||"").toUpperCase().trim();return e&&/JPY$/.test(e)?.01:1e-4}applyRiskAmount(t){let e=this.baseBalance(),r=+Number(t||0).toFixed(2);this.form.planned_risk_amount=r,this.form.planned_risk_percentage=e?+(r/e*100).toFixed(2):this.form.planned_risk_percentage}recalcRiskFromSL_FX(){let t=Number(this.form.planned_entry_price??0),e=Number(this.form.planned_stop_loss??0),r=Number(this.form.planned_lot_size??0);if(!t||!e||!r)return;let i=this.pipSizeFor(this.form.symbol),s=Math.abs(t-e)/i*this.pipValuePerStdLot()*r;this.applyRiskAmount(s)}recalcRiskFromSL_NonFX(){let t=Number(this.form.planned_entry_price??0),e=Number(this.form.planned_stop_loss??0),r=Number(this.form.planned_lot_size??0);if(!t||!e||!r)return;let i=Number(this.pointSize()||0),o=Number(this.valuePerPointPerUnit()||0),s=Number(this.contractMultiplier()||1);if(!i||!o)return;let l=Math.abs(t-e)/i*o*r*s;this.applyRiskAmount(l)}recalcRiskFromSL(){this.autoRiskFromSL()&&(this.isForex()?this.recalcRiskFromSL_FX():this.recalcRiskFromSL_NonFX())}recomputeOnInputs=Wr(()=>{let t=this.autoRiskFromSL(),e=this.instrumentType(),r=this.form.symbol,i=this.form.planned_entry_price,o=this.form.planned_stop_loss,s=this.form.planned_lot_size,a=this.pipValuePerStdLot(),l=this.pointSize(),c=this.valuePerPointPerUnit(),h=this.contractMultiplier();this.recalcRiskFromSL()});onRiskPercentChange(){let t=this.baseBalance(),e=Number(this.form.planned_risk_percentage??0);this.form.planned_risk_amount=t&&e>0?+(e/100*t).toFixed(2):null}onRiskDollarChange(){let t=this.baseBalance(),e=Number(this.form.planned_risk_amount??0);this.form.planned_risk_percentage=t&&e>0?+(e/t*100).toFixed(2):null}resyncRiskFromPercentOrDollar(){this.form.planned_risk_percentage?this.onRiskPercentChange():this.form.planned_risk_amount&&this.onRiskDollarChange()}canSubmit(){return!0}async onChartFile(t){let e=t.target.files?.[0];e&&await this.handleChart(e)}async handleChart(t){this.aiErr.set(null),this.aiWarn.set(null),this.aiMessage.set("Analyzing chart\u2026");let e=await this.uc.analyzeChart(t);if(!e){this.aiMessage.set(null),this.aiErr.set(this.uc.error()||"Could not analyze the image.");return}if(!e.is_relevant){this.aiMessage.set(null),this.aiWarn.set("Image does not look like a trading/chart screenshot. Nothing applied.");return}this.applyAiPrefill(e),this.aiMessage.set(`Fields prefilled (confidence ${Math.round((e.confidence??0)*100)}%). Review before saving.`)}applyAiPrefill(t){let e=r=>Number.isFinite(Number(r))?Number(r):null;t.symbol!=null&&(this.form.symbol=t.symbol||""),t.direction!=null&&(this.form.direction=t.direction||"LONG"),this.form.planned_entry_price=e(t.planned_entry_price)??this.form.planned_entry_price??null,this.form.planned_stop_loss=e(t.planned_stop_loss)??this.form.planned_stop_loss??null,this.form.planned_take_profit=e(t.planned_take_profit)??this.form.planned_take_profit??null,this.form.planned_lot_size=e(t.planned_lot_size)??this.form.planned_lot_size??null,this.form.planned_risk_percentage=e(t.planned_risk_percentage)??this.form.planned_risk_percentage??null,this.form.planned_risk_amount=e(t.planned_risk_amount)??this.form.planned_risk_amount??null,t.strategy_name!=null&&(this.form.strategy_name=t.strategy_name||""),t.entry_criteria&&(this.form.entry_criteria=t.entry_criteria),Array.isArray(t.tags)&&(this.tagsStr=t.tags.map(r=>String(r).trim().toLowerCase()).filter(Boolean).join(", ")),this.recalcRiskFromSL()}async save(){this.success.set(!1);let t=B(N({},this.form),{account_id:this.accountId(),tags:this.tagsStr.split(",").map(r=>r.trim()).filter(Boolean)}),e=this.editingTradeId();e?await this.uc.updatePlanned(e,t):await this.uc.createPlanned(t),this.uc.error()||(this.success.set(!0),this.router.navigate(["/tradejournal"],{queryParams:{tab:"PLANNED"}}))}cancelEdit(){this.router.navigate([],{queryParams:{}}),this.editingTradeId.set(null),this.success.set(!1)}async loadEditIfAny(){let t=this.route.snapshot.queryParamMap.get("edit")||null;if(!t)return;this.editingTradeId.set(t);let e=this.uc.trades.find(r=>r.trade_id===t);!e&&this.uc.getTradeById&&(e=await this.uc.getTradeById(t)),e&&(this.accounts().length||await this.uc.loadAccounts(),this.prefillFromTrade(e))}prefillFromTrade(t){this.accountId.set(t.account_id??null),this.form={symbol:t.symbol??"",direction:t.direction??"LONG",planned_entry_price:t.planned_entry_price??null,planned_stop_loss:t.planned_stop_loss??null,planned_take_profit:t.planned_take_profit??null,planned_lot_size:t.planned_lot_size??null,planned_risk_percentage:t.planned_risk_percentage??null,planned_risk_amount:t.planned_risk_amount??null,strategy_name:t.strategy_name??"",entry_criteria:t.entry_criteria??"",emotional_before_state:t.emotional_before_state??null,emotional_before_potential_bias:t.emotional_before_potential_bias??"None - Clear Mindset",confidence_before_level:t.confidence_before_level??3,additional_notes:t.additional_notes??null},this.tagsStr=Array.isArray(t.tags)?t.tags.join(", "):"",this.recalcRiskFromSL()}static \u0275fac=function(e){return new(e||n)(T(Cs),T(Ct),T(Ue))};static \u0275cmp=X({type:n,selectors:[["app-pretradeform"]],decls:84,vars:28,consts:[["nonForexBlock",""],[1,"container","my-4","page-shell"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],[1,"muted"],[1,"d-flex","align-items-center","gap-2"],["routerLink","/tradeaccounts",1,"btn","btn-light","border","ms-2"],[1,"me-2"],[1,"section-card","mb-3"],[1,"section-head"],[1,"p-3"],[1,"row","g-3","align-items-center"],[1,"col-md-8"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-4","d-flex"],["class","acct-pill w-100",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"muted","mb-2"],[1,"dropzone",3,"dragover","dragleave","drop"],[1,"dz-icon"],[1,"fw-semibold"],[1,"btn","btn-outline-primary","mt-2"],["type","file","accept","image/png,image/jpeg",1,"d-none",3,"change"],["class","alert alert-info mt-2 py-2 px-3",4,"ngIf"],["class","alert alert-warning mt-2 py-2 px-3",4,"ngIf"],["class","alert alert-danger mt-2 py-2 px-3",4,"ngIf"],["role","button",1,"section-head",3,"click"],[1,"badge-req","ms-2"],[1,"chev","ms-2"],["class","p-3",4,"ngIf"],[1,"text-danger"],[1,"badge-opt","ms-2"],[1,"mt-3"],[1,"btn","btn-primary","w-100",3,"click","disabled"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],[1,"acct-pill","w-100"],[1,"fw-semibold","small"],[1,"small"],[1,"col-12"],[1,"form-label"],["type","number","step","0.01","placeholder","Enter your account balance to enable Risk % \u2192 $",1,"form-control",3,"ngModelChange","ngModel"],[1,"hint"],[1,"alert","alert-info","mt-2","py-2","px-3"],[1,"alert","alert-warning","mt-2","py-2","px-3"],[1,"alert","alert-danger","mt-2","py-2","px-3"],[1,"row","g-3"],[1,"col-md-4"],["value","forex"],["value","metal"],["value","index"],["value","stock"],["value","crypto"],["value","other"],["placeholder","e.g., AUDNZD / XAUUSD / SPX",1,"form-control",3,"ngModelChange","input","ngModel"],["value","LONG"],["value","SHORT"],["type","number","step","0.000001","placeholder","1.0875",1,"form-control",3,"ngModelChange","input","ngModel"],["class","warn",4,"ngIf"],["type","number","step","0.0001","placeholder","0.01",1,"form-control",3,"ngModelChange","input","ngModel"],["class","hint",4,"ngIf"],["placeholder","e.g., FVG Retracement",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","e.g., fvg, retracement, support",1,"form-control",3,"ngModelChange","ngModel"],[1,"warn"],[1,"col-md-6"],["type","number","step","0.000001","placeholder","1.0850",1,"form-control",3,"ngModelChange","input","ngModel"],["type","number","step","0.000001","placeholder","1.0925",1,"form-control",3,"ngModelChange","ngModel"],[4,"ngIf","ngIfElse"],["type","number","step","0.01",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"metric","good"],[1,"label"],[1,"value"],["class","col-md-4",4,"ngIf"],["type","number","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.000001",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.0001",1,"form-control",3,"ngModelChange","ngModel"],["rows","6","placeholder","Explain your technicals, fundamentals, market conditions, setup confirmation, etc.",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-1","small"],[1,"form-label","d-block"],["type","range","min","1","max","5",1,"form-range",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between","small","muted"],["rows","3","placeholder","Document any important notes for this trade",1,"form-control",3,"ngModelChange","ngModel"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-success","mt-3"]],template:function(e,r){e&1&&(d(0,"div",1)(1,"div",2)(2,"div")(3,"h4",3),f(4),u(),d(5,"small",4),f(6),u()(),d(7,"div",5)(8,"a",6)(9,"span",7),f(10,"\u2699\uFE0F"),u(),f(11,"Manage Accounts"),u()()(),d(12,"div",8)(13,"div",9),f(14,"Trading Account"),u(),d(15,"div",10)(16,"div",11)(17,"div",12)(18,"select",13),C("ngModelChange",function(o){return r.accountId.set(o)}),d(19,"option",14),f(20,"Select an account"),u(),M(21,O2,2,2,"option",15),u()(),d(22,"div",16),M(23,R2,6,5,"div",17),u(),M(24,F2,6,1,"div",18),u()()(),d(25,"div",8)(26,"div",9)(27,"span"),f(28,"\u{1F4C8}"),u(),f(29," Chart Image Analysis"),u(),d(30,"div",10)(31,"div",19),f(32,"Upload your analyzed chart image and let AI automatically fill your trade fields"),u(),d(33,"div",20),C("dragover",function(o){return r.onDzDrag(o)})("dragleave",function(){return r.dzDrag=!1})("drop",function(o){return r.onDzDrop(o)}),d(34,"div",21),f(35,"\u2B06\uFE0E"),u(),d(36,"div",22),f(37,"Upload Chart Image"),u(),d(38,"small",4),f(39,"PNG/JPG up to 10MB"),u(),d(40,"label",23),f(41,"Choose File "),d(42,"input",24),C("change",function(o){return r.onChartFile(o)}),u()()(),M(43,L2,2,1,"div",25)(44,V2,2,1,"div",26)(45,j2,2,1,"div",27),u()(),d(46,"div",8)(47,"div",28),C("click",function(){return r.toggle("basic")}),f(48," Basic Trade Information "),d(49,"span",29),f(50,"Required"),u(),d(51,"span",30),f(52,"\u25BE"),u()(),M(53,H2,49,11,"div",31),u(),d(54,"div",8)(55,"div",28),C("click",function(){return r.toggle("risk")}),d(56,"span",32),f(57,"Risk Management"),u(),d(58,"span",29),f(59,"Critical"),u(),d(60,"span",30),f(61,"\u25BE"),u()(),M(62,J2,35,14,"div",31),u(),d(63,"div",8)(64,"div",28),C("click",function(){return r.toggle("analysis")}),f(65," Trade Analysis "),d(66,"span",29),f(67,"Required \u2013 Min 100 words"),u(),d(68,"span",30),f(69,"\u25BE"),u()(),M(70,Y2,6,4,"div",31),u(),d(71,"div",8)(72,"div",28),C("click",function(){return r.toggle("emotion")}),f(73," Emotional Check-In "),d(74,"span",33),f(75,"Optional but Recommended"),u(),d(76,"span",30),f(77,"\u25BE"),u()(),M(78,X2,49,6,"div",31),u(),d(79,"div",34)(80,"button",35),C("click",function(){return r.save()}),f(81),u()(),M(82,eL,2,1,"div",36)(83,tL,2,1,"div",37),u()),e&2&&(m(4),x(r.isEditing()?"Edit Trade Plan \u2022 "+(r.form.symbol||"-"):"Pre-Trade Plan"),m(2),x(r.isEditing()?"Editing existing planned trade":"Complete your trading plan step by step"),m(12),y("ngModel",r.accountId()),m(),y("ngValue",null),m(2),y("ngForOf",r.accounts()),m(2),y("ngIf",r.selectedAccount()),m(),y("ngIf",r.baseBalance()===0),m(9),ne("drag",r.dzDrag),m(10),y("ngIf",r.aiMessage()),m(),y("ngIf",r.aiWarn()),m(),y("ngIf",r.aiErr()),m(6),ne("rot",r.basicOpen()),m(2),y("ngIf",r.basicOpen()),m(7),ne("rot",r.riskOpen()),m(2),y("ngIf",r.riskOpen()),m(6),ne("rot",r.analysisOpen()),m(2),y("ngIf",r.analysisOpen()),m(6),ne("rot",r.emotionOpen()),m(2),y("ngIf",r.emotionOpen()),m(2),y("disabled",!r.canSubmit()),m(),z(" ",r.isEditing()?"Update Trade Plan":"Submit Trade Plan"," "),m(),y("ngIf",r.uc.error()),m(),y("ngIf",r.success()))},dependencies:[ie,nt,ye,qo,pt,vs,ys,Se,to,rl,ii,Ae,st,hn,Nt],styles:[".page-shell[_ngcontent-%COMP%]{max-width:980px}.section-card[_ngcontent-%COMP%]{border:1px solid #e9eef5;border-radius:14px;overflow:hidden}.section-head[_ngcontent-%COMP%]{background:#f7f9fc;border-bottom:1px solid #eef2f7;padding:.85rem 1rem;font-weight:600;display:flex;align-items:center;gap:.5rem;cursor:pointer}.badge-req[_ngcontent-%COMP%]{color:#b30000;background:#ffecec;font-weight:600}.badge-opt[_ngcontent-%COMP%]{color:#7a5b00;background:#fff6d6;font-weight:600}.chev[_ngcontent-%COMP%]{margin-left:auto;opacity:.6;transition:transform .15s ease}.chev.rot[_ngcontent-%COMP%]{transform:rotate(180deg)}.acct-pill[_ngcontent-%COMP%]{background:#f1f5ff;border:1px solid #dfebff;color:#2c5cff;border-radius:10px;padding:.5rem .75rem}.dropzone[_ngcontent-%COMP%]{border:2px dashed #b8cdfa;border-radius:12px;background:#fbfdff;min-height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;gap:.5rem}.dropzone.drag[_ngcontent-%COMP%]{background:#f0f6ff}.dz-icon[_ngcontent-%COMP%]{font-size:34px;width:34px;height:34px;border-radius:50%;background:#eaf1ff;display:grid;place-items:center}.metric[_ngcontent-%COMP%]{border:1px solid #eef2f7;border-radius:12px;padding:.75rem;background:#fff;height:100%}.metric[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.78rem;color:#6b7280}.metric[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:700}.metric.good[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#0a8a00}.metric.warn[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#b30000}.muted[_ngcontent-%COMP%]{color:#8a94a6}.hint[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280;margin-top:.25rem}.warn[_ngcontent-%COMP%]{font-size:.85rem;color:#b30000;margin-top:.25rem}"]})};var nL=["miniChart"],rL=()=>[];function iL(n,t){if(n&1){let e=ee();d(0,"tr")(1,"td",35),f(2),u(),d(3,"td",8),f(4),u(),d(5,"td"),f(6),u(),d(7,"td"),f(8),u(),d(9,"td"),f(10),u(),d(11,"td"),f(12),u(),d(13,"td")(14,"span",36),f(15,"planned"),u()(),d(16,"td",24)(17,"div",37)(18,"button",38),C("click",function(){let i=E(e).$implicit,o=v(2);return S(o.edit(i))}),f(19,"Edit"),u(),d(20,"button",39),C("click",function(){let i=E(e).$implicit,o=v(2);return S(o.openExecute(i))}),f(21,"Trade Executed"),u(),d(22,"button",40),C("click",function(){let i=E(e).$implicit,o=v(2);return S(o.remove(i))}),f(23,"Delete"),u()()()()}if(n&2){let e=t.$implicit,r=v(2);m(2),x(e.symbol),m(),ne("dir-long",e.direction==="LONG")("dir-short",e.direction==="SHORT"),m(),x(e.direction),m(2),x(r.asMoney(e.planned_entry_price)),m(2),x(e.strategy_name||"\u2014"),m(2),x(e.emotional_before_state||"\u2014"),m(2),x(r.dateOnly(e.planned_at||e.created_at))}}function oL(n,t){if(n&1&&(d(0,"tbody"),M(1,iL,24,10,"tr",34),u()),n&2){let e=v();m(),y("ngForOf",e.viewRows())("ngForTrackBy",e.trackById)}}function sL(n,t){if(n&1){let e=ee();d(0,"tr")(1,"td",35),f(2),u(),d(3,"td",8),f(4),u(),d(5,"td"),f(6),u(),d(7,"td"),f(8),u(),d(9,"td"),f(10),u(),d(11,"td"),f(12),u(),d(13,"td")(14,"span",36),f(15,"executing"),u()(),d(16,"td",24)(17,"div",37)(18,"button",38),C("click",function(){let i=E(e).$implicit,o=v(2);return S(o.editExecuting(i))}),f(19,"Edit"),u(),d(20,"button",41),C("click",function(){let i=E(e).$implicit,o=v(2);return S(o.openComplete(i))}),f(21,"Complete"),u()()()()}if(n&2){let e,r=t.$implicit,i=v(2);m(2),x(r.symbol),m(),ne("dir-long",r.direction==="LONG")("dir-short",r.direction==="SHORT"),m(),x(r.direction),m(2),x(i.asMoney((e=r.actual_entry_price)!==null&&e!==void 0?e:r.planned_entry_price)),m(2),x(r.strategy_name||"\u2014"),m(2),x(r.emotional_before_state||"\u2014"),m(2),x(i.dateOnly(r.actual_entry_date))}}function aL(n,t){if(n&1&&(d(0,"tbody"),M(1,sL,22,10,"tr",34),u()),n&2){let e=v();m(),y("ngForOf",e.viewRows())("ngForTrackBy",e.trackById)}}function lL(n,t){if(n&1){let e=ee();d(0,"tr")(1,"td",35),f(2),u(),d(3,"td",8),f(4),u(),d(5,"td"),f(6),u(),d(7,"td"),f(8),u(),d(9,"td"),f(10),u(),d(11,"td"),f(12),u(),d(13,"td")(14,"span",42),f(15,"completed"),u()(),d(16,"td",24)(17,"button",38),C("click",function(){let i=E(e).$implicit,o=v(2);return S(o.openView(i))}),f(18,"View"),u()()()}if(n&2){let e=t.$implicit,r=v(2);m(2),x(e.symbol),m(),ne("dir-long",e.direction==="LONG")("dir-short",e.direction==="SHORT"),m(),x(e.direction),m(2),x(r.asMoney(e.exit_price)),m(2),x(e.strategy_name||"\u2014"),m(2),x(e.emotional_after_state||e.emotional_before_state||"\u2014"),m(2),x(r.dateOnly(e.exit_date))}}function cL(n,t){if(n&1&&(d(0,"tbody"),M(1,lL,19,10,"tr",34),u()),n&2){let e=v();m(),y("ngForOf",e.viewRows())("ngForTrackBy",e.trackById)}}function uL(n,t){n&1&&(d(0,"div",43),f(1,"No trades yet."),u())}function dL(n,t){if(n&1&&(d(0,"div",44),f(1),u()),n&2){let e=v();m(),x(e.uc.error())}}function fL(n,t){n&1&&L(0,"div",45)}function hL(n,t){if(n&1){let e=ee();d(0,"div",46)(1,"div",47)(2,"div",48)(3,"div")(4,"h5",49),f(5),u(),d(6,"div",50),f(7," Enter the actual execution details for "),d(8,"strong"),f(9),u(),f(10),u()(),d(11,"button",51),C("click",function(){E(e);let i=v();return S(i.closeExec())}),u()(),d(12,"div",52)(13,"div",53)(14,"label",54),f(15,"Entry Price"),u(),d(16,"input",55),K("ngModelChange",function(i){E(e);let o=v();return Y(o.execForm.actual_entry_price,i)||(o.execForm.actual_entry_price=i),S(i)}),u()(),d(17,"div",53)(18,"label",54),f(19,"Stop Loss"),u(),d(20,"input",56),K("ngModelChange",function(i){E(e);let o=v();return Y(o.execForm.actual_stop_loss,i)||(o.execForm.actual_stop_loss=i),S(i)}),u()(),d(21,"div",53)(22,"label",54),f(23,"Take Profit"),u(),d(24,"input",57),K("ngModelChange",function(i){E(e);let o=v();return Y(o.execForm.actual_take_profit,i)||(o.execForm.actual_take_profit=i),S(i)}),u()(),d(25,"div",3)(26,"label",54),f(27,"Lot Size"),u(),d(28,"input",58),K("ngModelChange",function(i){E(e);let o=v();return Y(o.execForm.actual_lot_size,i)||(o.execForm.actual_lot_size=i),S(i)}),u()()(),d(29,"div",59)(30,"button",60),C("click",function(){E(e);let i=v();return S(i.closeExec())}),f(31,"Cancel"),u(),d(32,"button",61),C("click",function(){E(e);let i=v();return S(i.confirmExec())}),f(33),u()()()()}if(n&2){let e=v();m(5),z(" ",e.execMode()==="mark"?"Trade Execution Details":"Update Execution Details"," "),m(4),x(e.execTarget==null?null:e.execTarget.symbol),m(),z(" (",e.execTarget==null?null:e.execTarget.direction,") "),m(6),Q("ngModel",e.execForm.actual_entry_price),m(4),Q("ngModel",e.execForm.actual_stop_loss),m(4),Q("ngModel",e.execForm.actual_take_profit),m(4),Q("ngModel",e.execForm.actual_lot_size),m(5),z(" ",e.execMode()==="mark"?"Confirm Execution":"Update Execution"," ")}}function pL(n,t){if(n&1){let e=ee();d(0,"div",46)(1,"div",47)(2,"div",62)(3,"div",63)(4,"a",64),C("click",function(){E(e);let i=v();return S(i.closeComplete())}),f(5,"Back to Trades"),u(),d(6,"h5",65),f(7,"Complete Trade: "),d(8,"strong"),f(9),u()()(),d(10,"button",51),C("click",function(){E(e);let i=v();return S(i.closeComplete())}),u()(),d(11,"div",52)(12,"div",66)(13,"div",67)(14,"div",68)(15,"div",69),f(16,"Executed Trade Details"),u(),d(17,"div",70),f(18,"Original execution details"),u(),d(19,"div",71)(20,"div",72)(21,"span",73),f(22,"Symbol:"),u(),d(23,"span",8),f(24),u()(),d(25,"div",72)(26,"span",73),f(27,"Direction:"),u(),d(28,"span",8),f(29),u()(),d(30,"div",72)(31,"span",73),f(32,"Entry Price:"),u(),d(33,"span",8),f(34),u()(),d(35,"div",72)(36,"span",73),f(37,"Stop Loss:"),u(),d(38,"span",8),f(39),u()(),d(40,"div",72)(41,"span",73),f(42,"Take Profit:"),u(),d(43,"span",8),f(44),u()(),d(45,"div",72)(46,"span",73),f(47,"Lot Size:"),u(),d(48,"span",8),f(49),u()(),d(50,"div",72)(51,"span",73),f(52,"Strategy:"),u(),d(53,"span",8),f(54),u()()()()(),d(55,"div",74)(56,"div",68)(57,"div",69),f(58,"Trade Results"),u(),d(59,"div",70),f(60,"Automatically calculated metrics"),u(),d(61,"div",75)(62,"div",76)(63,"div",77)(64,"div",78),f(65,"P&L"),u(),d(66,"div",79),f(67),u()()(),d(68,"div",76)(69,"div",80)(70,"div",78),f(71,"Margin %"),u(),d(72,"div",79),f(73),u()()(),d(74,"div",76)(75,"div",81)(76,"div",78),f(77,"R:R Ratio"),u(),d(78,"div",79),f(79),u()()()()()()(),d(80,"div",82)(81,"div",69),f(82,"Trade Completion Details"),u(),d(83,"div",70),f(84,"Enter the details of how your trade was closed"),u(),d(85,"div",83)(86,"div",84)(87,"label",54),f(88,"Exit Price"),u(),d(89,"div",85)(90,"input",86),K("ngModelChange",function(i){E(e);let o=v();return Y(o.completeForm.exit_price,i)||(o.completeForm.exit_price=i),S(i)}),u()()(),d(91,"div",84)(92,"label",54),f(93,"Exit Date"),u(),d(94,"input",87),K("ngModelChange",function(i){E(e);let o=v();return Y(o.completeForm.exit_date,i)||(o.completeForm.exit_date=i),S(i)}),u()(),d(95,"div",84)(96,"label",54),f(97,"Broker Fees"),u(),d(98,"div",85)(99,"input",88),K("ngModelChange",function(i){E(e);let o=v();return Y(o.completeForm.broker_fees,i)||(o.completeForm.broker_fees=i),S(i)}),u()(),d(100,"div",89),f(101,"Include all commissions and fees"),u()(),d(102,"div",90)(103,"label",91),f(104,"Trade Outcome"),u(),d(105,"div",92)(106,"button",93),C("click",function(){E(e);let i=v();return S(i.completeForm.trade_outcome="Win")}),f(107,"Win"),u(),d(108,"button",93),C("click",function(){E(e);let i=v();return S(i.completeForm.trade_outcome="Loss")}),f(109,"Loss"),u(),d(110,"button",93),C("click",function(){E(e);let i=v();return S(i.completeForm.trade_outcome="Breakeven")}),f(111,"Breakeven"),u()()()()()(),d(112,"div",59)(113,"button",60),C("click",function(){E(e);let i=v();return S(i.closeComplete())}),f(114,"Cancel"),u(),d(115,"button",94),C("click",function(){E(e);let i=v();return S(i.confirmComplete())}),f(116,"Mark Completed"),u()()()()}if(n&2){let e,r,i,o,s=v();m(9),x(s.completeTarget==null?null:s.completeTarget.symbol),m(15),x(s.completeTarget==null?null:s.completeTarget.symbol),m(4),ne("dir-long",(s.completeTarget==null?null:s.completeTarget.direction)==="LONG")("dir-short",(s.completeTarget==null?null:s.completeTarget.direction)==="SHORT"),m(),z(" ",s.completeTarget==null?null:s.completeTarget.direction," "),m(5),x(s.asMoney((e=s.completeTarget==null?null:s.completeTarget.actual_entry_price)!==null&&e!==void 0?e:s.completeTarget==null?null:s.completeTarget.planned_entry_price)),m(5),x(s.asMoney((r=s.completeTarget==null?null:s.completeTarget.actual_stop_loss)!==null&&r!==void 0?r:s.completeTarget==null?null:s.completeTarget.planned_stop_loss)),m(5),x(s.asMoney((i=s.completeTarget==null?null:s.completeTarget.actual_take_profit)!==null&&i!==void 0?i:s.completeTarget==null?null:s.completeTarget.planned_take_profit)),m(5),x((o=(o=s.completeTarget==null?null:s.completeTarget.actual_lot_size)!==null&&o!==void 0?o:s.completeTarget==null?null:s.completeTarget.planned_lot_size)!==null&&o!==void 0?o:"\u2014"),m(5),x((s.completeTarget==null?null:s.completeTarget.strategy_name)||"\u2014"),m(13),x(s.asMoney(s.pnlPreview())),m(6),x(s.marginPreview()),m(6),x(s.rrPreview()),m(11),Q("ngModel",s.completeForm.exit_price),m(4),Q("ngModel",s.completeForm.exit_date),m(5),Q("ngModel",s.completeForm.broker_fees),m(7),ne("active",s.completeForm.trade_outcome==="Win"),m(2),ne("active",s.completeForm.trade_outcome==="Loss"),m(2),ne("active",s.completeForm.trade_outcome==="Breakeven")}}function mL(n,t){n&1&&(d(0,"div",104),f(1,"Please choose a valid range of 1\u201314 days."),u())}function gL(n,t){if(n&1){let e=ee();d(0,"div",46)(1,"div",47)(2,"div",95)(3,"h5",49),f(4,"Export Trades"),u(),d(5,"button",51),C("click",function(){E(e);let i=v();return S(i.closeExport())}),u()(),d(6,"div",52)(7,"div",66)(8,"div",96)(9,"label",97),f(10,"From"),u(),d(11,"input",98),K("ngModelChange",function(i){E(e);let o=v();return Y(o.fromDate,i)||(o.fromDate=i),S(i)}),u()(),d(12,"div",96)(13,"label",97),f(14,"To"),u(),d(15,"input",98),K("ngModelChange",function(i){E(e);let o=v();return Y(o.toDate,i)||(o.toDate=i),S(i)}),u()(),d(16,"div",90)(17,"div",99),f(18,"Range must be \u2264 14 days. Preset to last 3 days (inclusive)."),u(),M(19,mL,2,0,"div",100),u()()(),d(20,"div",59)(21,"button",101),C("click",function(){E(e);let i=v();return S(i.closeExport())}),f(22,"Cancel"),u(),d(23,"div",28)(24,"button",102),C("click",function(){E(e);let i=v();return S(i.exportRangeCsv())}),f(25,"Export CSV"),u(),d(26,"button",103),C("click",function(){E(e);let i=v();return S(i.exportRangePdf())}),f(27,"Export PDF"),u()()()()()}if(n&2){let e=v();m(11),Q("ngModel",e.fromDate),m(4),Q("ngModel",e.toDate),m(4),y("ngIf",!e.canExportRange()),m(5),y("disabled",!e.canExportRange()),m(2),y("disabled",!e.canExportRange())}}function _L(n,t){if(n&1&&(d(0,"span",124),f(1," SL: "),d(2,"strong"),f(3),u()()),n&2){let e,r=v(3);m(3),x(r.asMoney((e=r.viewTarget.actual_stop_loss)!==null&&e!==void 0?e:r.viewTarget.planned_stop_loss))}}function vL(n,t){if(n&1&&(d(0,"span",124),f(1," TP: "),d(2,"strong"),f(3),u()()),n&2){let e,r=v(3);m(3),x(r.asMoney((e=r.viewTarget.actual_take_profit)!==null&&e!==void 0?e:r.viewTarget.planned_take_profit))}}function yL(n,t){if(n&1&&(d(0,"div",119)(1,"div",120),L(2,"div",121,0),d(4,"div",122),f(5," Entry: "),d(6,"strong"),f(7),u(),M(8,_L,4,1,"span",123)(9,vL,4,1,"span",123),d(10,"span",124),f(11,"Exit: "),d(12,"strong"),f(13),u()()()()()),n&2){let e,r=v(2);m(7),x(r.asMoney((e=r.viewTarget.actual_entry_price)!==null&&e!==void 0?e:r.viewTarget.planned_entry_price)),m(),y("ngIf",r.viewTarget.actual_stop_loss||r.viewTarget.planned_stop_loss),m(),y("ngIf",r.viewTarget.actual_take_profit||r.viewTarget.planned_take_profit),m(4),x(r.asMoney(r.viewTarget.exit_price))}}function bL(n,t){if(n&1){let e=ee();d(0,"div",46)(1,"div",105)(2,"div",95)(3,"div")(4,"h5",49),f(5,"Trade Details"),u(),d(6,"div",50),f(7,"Read-only view of all recorded fields"),u()(),d(8,"button",51),C("click",function(){E(e);let i=v();return S(i.closeView())}),u()(),d(9,"div",52)(10,"div",106)(11,"div",8),f(12,"Trade Replay"),u(),d(13,"div",99),f(14),u()(),M(15,yL,14,4,"div",107),d(16,"div",108)(17,"div",69),f(18,"Overview"),u(),d(19,"div",109)(20,"div",110)(21,"span",111),f(22,"Symbol"),u(),d(23,"span",112),f(24),u()(),d(25,"div",110)(26,"span",111),f(27,"Direction"),u(),d(28,"span",112),f(29),u()(),d(30,"div",110)(31,"span",111),f(32,"Strategy"),u(),d(33,"span",112),f(34),u()(),d(35,"div",110)(36,"span",111),f(37,"Tags"),u(),d(38,"span",112),f(39),u()(),d(40,"div",110)(41,"span",111),f(42,"State"),u(),d(43,"span",113),f(44),u()()()(),d(45,"div",66)(46,"div",114)(47,"div",68)(48,"div",69),f(49,"Planned"),u(),d(50,"div",109)(51,"div",110)(52,"span",111),f(53,"Planned Entry"),u(),d(54,"span",112),f(55),u()(),d(56,"div",110)(57,"span",111),f(58,"Planned SL"),u(),d(59,"span",112),f(60),u()(),d(61,"div",110)(62,"span",111),f(63,"Planned TP"),u(),d(64,"span",112),f(65),u()(),d(66,"div",110)(67,"span",111),f(68,"Planned Lots"),u(),d(69,"span",112),f(70),u()(),d(71,"div",110)(72,"span",111),f(73,"Planned Risk $"),u(),d(74,"span",112),f(75),u()(),d(76,"div",110)(77,"span",111),f(78,"Planned Risk %"),u(),d(79,"span",112),f(80),u()(),d(81,"div",110)(82,"span",111),f(83,"Planned At"),u(),d(84,"span",112),f(85),u()()()()(),d(86,"div",114)(87,"div",68)(88,"div",69),f(89,"Executed"),u(),d(90,"div",109)(91,"div",110)(92,"span",111),f(93,"Entry Price"),u(),d(94,"span",112),f(95),u()(),d(96,"div",110)(97,"span",111),f(98,"Stop Loss"),u(),d(99,"span",112),f(100),u()(),d(101,"div",110)(102,"span",111),f(103,"Take Profit"),u(),d(104,"span",112),f(105),u()(),d(106,"div",110)(107,"span",111),f(108,"Lot Size"),u(),d(109,"span",112),f(110),u()(),d(111,"div",110)(112,"span",111),f(113,"Exec Date"),u(),d(114,"span",112),f(115),u()()()()(),d(116,"div",114)(117,"div",68)(118,"div",69),f(119,"Completed"),u(),d(120,"div",109)(121,"div",110)(122,"span",111),f(123,"Exit Price"),u(),d(124,"span",112),f(125),u()(),d(126,"div",110)(127,"span",111),f(128,"Exit Date"),u(),d(129,"span",112),f(130),u()(),d(131,"div",110)(132,"span",111),f(133,"Broker Fees"),u(),d(134,"span",112),f(135),u()(),d(136,"div",110)(137,"span",111),f(138,"Realized P&L"),u(),d(139,"span",112),f(140),u()(),d(141,"div",110)(142,"span",111),f(143,"Outcome"),u(),d(144,"span",112),f(145),u()()()()(),d(146,"div",114)(147,"div",68)(148,"div",69),f(149,"Emotion (Before / After)"),u(),d(150,"div",109)(151,"div",110)(152,"span",111),f(153,"Before State"),u(),d(154,"span",112),f(155),u()(),d(156,"div",110)(157,"span",111),f(158,"Before Confidence"),u(),d(159,"span",112),f(160),u()(),d(161,"div",110)(162,"span",111),f(163,"Before Bias"),u(),d(164,"span",112),f(165),u()(),d(166,"div",110)(167,"span",111),f(168,"After State"),u(),d(169,"span",112),f(170),u()(),d(171,"div",110)(172,"span",111),f(173,"After Confidence"),u(),d(174,"span",112),f(175),u()(),d(176,"div",110)(177,"span",111),f(178,"After Bias"),u(),d(179,"span",112),f(180),u()()()()(),d(181,"div",90)(182,"div",115)(183,"div",69),f(184,"Notes & Analysis"),u(),d(185,"div",109)(186,"div",110)(187,"span",111),f(188,"Entry Criteria"),u(),d(189,"span",112),f(190),u()(),d(191,"div",110)(192,"span",111),f(193,"Trade Notes"),u(),d(194,"span",112),f(195),u()(),d(196,"div",110)(197,"span",111),f(198,"Lesson Learned"),u(),d(199,"span",112),f(200),u()(),d(201,"div",110)(202,"span",111),f(203,"Points to Improve"),u(),d(204,"span",112),f(205),u()(),d(206,"div",110)(207,"span",111),f(208,"Additional Notes"),u(),d(209,"span",112),f(210),u()(),d(211,"div",110)(212,"span",111),f(213,"Chart Analysis"),u(),d(214,"span",112),f(215),u()()()()()()(),d(216,"div",116)(217,"div",28)(218,"button",117),C("click",function(){E(e);let i=v();return S(i.exportCsvSingle())}),f(219,"Export CSV"),u(),d(220,"button",118),C("click",function(){E(e);let i=v();return S(i.exportPdfViaPrint())}),f(221,"Export PDF"),u(),d(222,"button",60),C("click",function(){E(e);let i=v();return S(i.closeView())}),f(223,"Close"),u()()()()()}if(n&2){let e,r,i,o,s,a,l,c=v();m(14),Fi("",c.viewTarget==null?null:c.viewTarget.symbol," \u2022 ",c.replayWindowLabel(),""),m(),y("ngIf",c.viewTarget&&!c.chartError()),m(9),x(c.viewTarget==null?null:c.viewTarget.symbol),m(4),ne("dir-long",(c.viewTarget==null?null:c.viewTarget.direction)==="LONG")("dir-short",(c.viewTarget==null?null:c.viewTarget.direction)==="SHORT"),m(),x(c.viewTarget==null?null:c.viewTarget.direction),m(5),x((c.viewTarget==null?null:c.viewTarget.strategy_name)||"\u2014"),m(5),x(((c.viewTarget==null?null:c.viewTarget.tags)||nw(41,rL)).join(", ")||"\u2014"),m(5),x(c.viewTarget==null||c.viewTarget.trade_state==null?null:c.viewTarget.trade_state.toLowerCase()),m(11),x(c.asMoney(c.viewTarget==null?null:c.viewTarget.planned_entry_price)),m(5),x(c.asMoney(c.viewTarget==null?null:c.viewTarget.planned_stop_loss)),m(5),x(c.asMoney(c.viewTarget==null?null:c.viewTarget.planned_take_profit)),m(5),x((e=c.viewTarget==null?null:c.viewTarget.planned_lot_size)!==null&&e!==void 0?e:"\u2014"),m(5),x(c.asMoney(c.viewTarget==null?null:c.viewTarget.planned_risk_amount)),m(5),x(c.asPercent(c.viewTarget==null?null:c.viewTarget.planned_risk_percentage)),m(5),x(c.dateOnly(c.viewTarget==null?null:c.viewTarget.planned_at)),m(10),x(c.asMoney((r=c.viewTarget==null?null:c.viewTarget.actual_entry_price)!==null&&r!==void 0?r:c.viewTarget==null?null:c.viewTarget.planned_entry_price)),m(5),x(c.asMoney((i=c.viewTarget==null?null:c.viewTarget.actual_stop_loss)!==null&&i!==void 0?i:c.viewTarget==null?null:c.viewTarget.planned_stop_loss)),m(5),x(c.asMoney((o=c.viewTarget==null?null:c.viewTarget.actual_take_profit)!==null&&o!==void 0?o:c.viewTarget==null?null:c.viewTarget.planned_take_profit)),m(5),x((s=(s=c.viewTarget==null?null:c.viewTarget.actual_lot_size)!==null&&s!==void 0?s:c.viewTarget==null?null:c.viewTarget.planned_lot_size)!==null&&s!==void 0?s:"\u2014"),m(5),x(c.dateOnly(c.viewTarget==null?null:c.viewTarget.actual_entry_date)),m(10),x(c.asMoney(c.viewTarget==null?null:c.viewTarget.exit_price)),m(5),x(c.dateOnly(c.viewTarget==null?null:c.viewTarget.exit_date)),m(5),x(c.asMoney(c.viewTarget==null?null:c.viewTarget.broker_fees)),m(5),x(c.asMoney(c.viewTarget==null?null:c.viewTarget.realized_pnl)),m(5),x((c.viewTarget==null?null:c.viewTarget.trade_outcome)||"\u2014"),m(10),x((c.viewTarget==null?null:c.viewTarget.emotional_before_state)||"\u2014"),m(5),x((a=c.viewTarget==null?null:c.viewTarget.confidence_before_level)!==null&&a!==void 0?a:"\u2014"),m(5),x((c.viewTarget==null?null:c.viewTarget.emotional_before_potential_bias)||"\u2014"),m(5),x((c.viewTarget==null?null:c.viewTarget.emotional_after_state)||"\u2014"),m(5),x((l=c.viewTarget==null?null:c.viewTarget.confidence_after_level)!==null&&l!==void 0?l:"\u2014"),m(5),x((c.viewTarget==null?null:c.viewTarget.emotional_after_potential_bias)||"\u2014"),m(10),x((c.viewTarget==null?null:c.viewTarget.entry_criteria)||"\u2014"),m(5),x((c.viewTarget==null?null:c.viewTarget.trade_notes)||"\u2014"),m(5),x((c.viewTarget==null?null:c.viewTarget.lesson_learned)||"\u2014"),m(5),x((c.viewTarget==null?null:c.viewTarget.points_to_improve)||"\u2014"),m(5),x((c.viewTarget==null?null:c.viewTarget.additional_notes)||"\u2014"),m(5),x(c.asJsonOneLine(c.viewTarget==null?null:c.viewTarget.chart_analysis))}}var Zd=class n{constructor(t,e){this.uc=t;this.router=e;this.refresh(),this.rows=this.uc.tradesSig}rows;tab=j("PLANNED");pageIndex=j(0);hasNext=j(!1);hasPrev=j(!1);exportModalOpen=j(!1);fromDate=null;toDate=null;viewRows=et(()=>this.rows());trackById=(t,e)=>e.trade_id;async refresh(){await this.uc.loadTabPage(this.tab(),!0),this.pageIndex.set(0),this.uc.reflectPageToStore(this.tab(),0),this.syncPagerFlags()}switchTab(t){this.tab.set(t),this.refresh()}syncPagerFlags(){let t=this.pageIndex();this.hasPrev.set(t>0),this.hasNext.set(this.uc.hasNextPage(this.tab(),t))}async nextPage(){let t=this.pageIndex();if(await this.uc.ensurePageLoaded(this.tab(),t+1)){let r=t+1;this.pageIndex.set(r),this.uc.reflectPageToStore(this.tab(),r),this.syncPagerFlags()}}async prevPage(){let t=this.pageIndex();if(t<=0)return;let e=t-1;this.pageIndex.set(e),this.uc.reflectPageToStore(this.tab(),e),this.syncPagerFlags()}execModalOpen=j(!1);execTarget=null;execForm={actual_entry_price:null,actual_stop_loss:null,actual_take_profit:null,actual_lot_size:null};execMode=j("mark");openExecute(t){this.completeModalOpen.set(!1),this.viewModalOpen.set(!1),this.execTarget=t,this.execForm={actual_entry_price:t.planned_entry_price??null,actual_stop_loss:t.planned_stop_loss??null,actual_take_profit:t.planned_take_profit??null,actual_lot_size:t.planned_lot_size??null},this.execMode.set("mark"),this.execModalOpen.set(!0)}editExecuting(t){this.completeModalOpen.set(!1),this.viewModalOpen.set(!1),this.execTarget=t,this.execForm={actual_entry_price:t.actual_entry_price??t.planned_entry_price??null,actual_stop_loss:t.actual_stop_loss??t.planned_stop_loss??null,actual_take_profit:t.actual_take_profit??t.planned_take_profit??null,actual_lot_size:t.actual_lot_size??t.planned_lot_size??null},this.execMode.set("update"),this.execModalOpen.set(!0)}async confirmExec(){if(!this.execTarget)return;let t={actual_entry_price:Number(this.execForm.actual_entry_price??0),actual_stop_loss:Number(this.execForm.actual_stop_loss??0),actual_take_profit:Number(this.execForm.actual_take_profit??0),actual_lot_size:Number(this.execForm.actual_lot_size??0)};this.execMode()==="mark"?await this.uc.markExecuted(this.execTarget.trade_id,t):await this.uc.updateExecuting(this.execTarget.trade_id,t),this.execModalOpen.set(!1),this.execTarget=null,this.switchTab("EXECUTING")}closeExec(){this.execModalOpen.set(!1),this.execTarget=null}completeModalOpen=j(!1);completeTarget=null;completeForm={};openComplete(t){this.execModalOpen.set(!1),this.viewModalOpen.set(!1),this.completeTarget=t,this.completeForm={exit_price:null,exit_date:new Date().toISOString().slice(0,10),broker_fees:0,trade_outcome:"Win",emotional_after_state:"neutral",confidence_after_level:5,trade_notes:""},this.completeModalOpen.set(!0)}isoDate(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()).toISOString().slice(0,10)}presetExportDates(){let t=new Date,e=new Date(t);e.setDate(t.getDate()-2),this.fromDate=this.isoDate(e),this.toDate=this.isoDate(t)}openExport(){this.presetExportDates(),this.exportModalOpen.set(!0)}closeExport(){this.exportModalOpen.set(!1)}closeComplete(){this.completeModalOpen.set(!1),this.completeTarget=null}pnlPreview(){let t=this.completeTarget?.actual_entry_price??this.completeTarget?.planned_entry_price,e=this.completeForm.exit_price,r=Number(t),i=Number(e);if(!Number.isFinite(r)||!Number.isFinite(i))return 0;let o=Number(this.completeTarget?.actual_lot_size??this.completeTarget?.planned_lot_size??1)||1,s=Number(this.completeForm.broker_fees)||0,l=String(this.completeTarget?.direction||"LONG").toUpperCase()==="SHORT"?(r-i)*o:(i-r)*o;return Number((l-s).toFixed(2))}marginPreview(){let t=+(this.completeTarget?.actual_entry_price??this.completeTarget?.planned_entry_price??0),e=+(this.completeForm.exit_price??0);return!t||!e?"0.00%":((e-t)/t*100).toFixed(2)+"%"}rrPreview(){let t=+(this.completeTarget?.actual_entry_price??this.completeTarget?.planned_entry_price??0),e=+(this.completeTarget?.actual_stop_loss??this.completeTarget?.planned_stop_loss??0),r=+(this.completeTarget?.actual_take_profit??this.completeTarget?.planned_take_profit??0);if(!t||!e||!r)return"0.00";let i=Math.abs(t-e),o=Math.abs(r-t);return i?(o/i).toFixed(2):"0.00"}async confirmComplete(){this.completeTarget&&(await this.uc.completeAndApply(this.completeTarget.trade_id,{exit_price:Number(this.completeForm.exit_price),broker_fees:Number(this.completeForm.broker_fees||0),outcome:String(this.completeForm.trade_outcome||"Win"),emotion_after:String(this.completeForm.emotional_after_state||"neutral"),conf_after:Number(this.completeForm.confidence_after_level||5),notes:this.completeForm.trade_notes??"",lessons:this.completeForm.lesson_learned??"",improve:this.completeForm.points_to_improve??""}),this.completeModalOpen.set(!1),this.completeTarget=null,this.switchTab("COMPLETED"))}viewModalOpen=j(!1);viewTarget=null;miniChartRef;lwcLoaded=!1;chart=null;series=null;ro=null;canShowChart=j(!1);replayWindowLabel=j("");chartError=j("");openView(t){this.execModalOpen.set(!1),this.completeModalOpen.set(!1),this.viewTarget=t,this.viewModalOpen.set(!0),this.canShowChart.set(!1),this.chartError.set(""),requestAnimationFrame(()=>this.renderCompletedMiniChart().catch(()=>this.canShowChart.set(!1)))}teardownChart(){if(this.ro&&this.miniChartRef?.nativeElement&&(this.ro.unobserve(this.miniChartRef.nativeElement),this.ro=null),this.chart)try{this.chart.remove()}catch{}this.chart=null,this.series=null,this.canShowChart.set(!1),this.chartError.set("")}closeView(){this.viewModalOpen.set(!1),this.viewTarget=null,this.teardownChart()}edit(t){this.router.navigate(["/pretrade"],{queryParams:{edit:t.trade_id}})}asMoney(t){return t==null||isNaN(+t)?"\u2014":`$${Number(t).toFixed(2)}`}asPercent(t){return t==null||isNaN(+t)?"\u2014":`${Number(t).toFixed(2)}%`}dateOnly(t){return t?new Date(t).toLocaleDateString():"\u2014"}dateTime(t){if(!t)return"\u2014";let e=new Date(t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()}asJsonOneLine(t){if(!t)return"\u2014";try{return JSON.stringify(t)}catch{return"\u2014"}}async remove(t){await this.uc.remove(t.trade_id)}downloadFile(t,e,r){let i=r instanceof Blob?r:new Blob([r],{type:e}),o=URL.createObjectURL(i),s=document.createElement("a");s.href=o,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(o)}buildViewPairs(){let t=this.viewTarget,e=r=>r==null||typeof r=="number"&&!Number.isFinite(r)?"\u2014":String(r);return[["Symbol",e(t?.symbol)],["Direction",e(t?.direction)],["Strategy",e(t?.strategy_name)],["Tags",(t?.tags||[]).join(", ")||"\u2014"],["Trade State",t?.trade_state??"\u2014"],["Account ID",e(t?.account_id)],["Planned Entry",this.asMoney(t?.planned_entry_price)],["Planned SL",this.asMoney(t?.planned_stop_loss)],["Planned TP",this.asMoney(t?.planned_take_profit)],["Planned Lots",e(t?.planned_lot_size)],["Planned Risk $",this.asMoney(t?.planned_risk_amount)],["Planned Risk %",this.asPercent(t?.planned_risk_percentage)],["Planned At",this.dateTime(t?.planned_at)],["Actual Entry",this.asMoney(t?.actual_entry_price)],["Actual SL",this.asMoney(t?.actual_stop_loss)],["Actual TP",this.asMoney(t?.actual_take_profit)],["Actual Lots",e(t?.actual_lot_size)],["Actual Entry Date",this.dateTime(t?.actual_entry_date)],["Exit Price",this.asMoney(t?.exit_price)],["Exit Date",this.dateTime(t?.exit_date)],["Broker Fees",this.asMoney(t?.broker_fees)],["Realized P&L",this.asMoney(t?.realized_pnl)],["Outcome",e(t?.trade_outcome)],["Before Emotion",e(t?.emotional_before_state)],["Before Confidence",e(t?.confidence_before_level)],["Before Bias",e(t?.emotional_before_potential_bias)],["After Emotion",e(t?.emotional_after_state)],["After Confidence",e(t?.confidence_after_level)],["After Bias",e(t?.emotional_after_potential_bias)],["Entry Criteria",e(t?.entry_criteria)],["Trade Notes",e(t?.trade_notes)],["Lesson Learned",e(t?.lesson_learned)],["Points to Improve",e(t?.points_to_improve)],["Additional Notes",e(t?.additional_notes)],["Chart Analysis (JSON)",t?.chart_analysis?JSON.stringify(t.chart_analysis):"\u2014"],["Trade ID",e(t?.trade_id)],["Created At",this.dateTime(t?.created_at)],["Updated At",this.dateTime(t?.updated_at)]]}toCsv(t){let e=i=>`"${String(i??"").replace(/"/g,'""')}"`;return[["Field","Value"],...t.map(([i,o])=>[i,o])].map(i=>i.map(e).join(",")).join(`
`)}exportCsvSingle(){if(!this.viewTarget)return;let t=this.toCsv(this.buildViewPairs()),e=(this.viewTarget.symbol||"trade").replace(/[^\w-]+/g,"_"),r=new Date().toISOString().slice(0,10);this.downloadFile(`${e}_details_${r}.csv`,"text/csv;charset=utf-8",t)}exportPdfViaPrint(){let t=document.getElementById("viewModalCard");if(!t)return;let e=`
<!doctype html><html><head><meta charset="utf-8"/>
<title>Trade Details</title>
<style>
  body{font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; margin:24px;background:#fff}
  h1,h2,h3,h4,h5{margin:.25rem 0}
  .soft-card{border:1px solid #e9ecef;border-radius:1rem;box-shadow:none}
  .kv-grid{display:grid;grid-template-columns:1fr 1fr;gap:.5rem .75rem}
  .kv-item{display:flex;justify-content:space-between;gap:.75rem;padding:.5rem .75rem;border:1px solid #eef2f7;border-radius:.5rem}
  .kv-k{color:#6c757d}
  .kv-v{font-weight:600}
  .metric{border-radius:.75rem;border:1px solid #eef2f7;padding:1rem;text-align:center}
  .metric .k{font-size:.85rem;color:#6c757d}
  .metric .v{font-weight:700;font-size:1.1rem}
  @media print { body{margin:0} }
</style></head><body>
  ${t.outerHTML}
  <script>window.addEventListener('afterprint',()=>setTimeout(()=>window.close(),50));setTimeout(()=>window.print(),150);<\/script>
</body></html>`,r=window.open("","_blank","noopener,noreferrer,width=980");r&&(r.document.open(),r.document.write(e),r.document.close())}canExportRange(){if(!this.fromDate||!this.toDate)return!1;let t=new Date(this.fromDate),e=new Date(this.toDate);if(isNaN(+t)||isNaN(+e)||e<t)return!1;let r=Math.floor((+e-+t)/864e5)+1;return r>0&&r<=14}val(t){return t==null?"":String(t)}csvFromRows(t){let e=o=>`"${String(o??"").replace(/"/g,'""')}"`,i=[["trade_id","symbol","direction","strategy_name","tags","trade_state","planned_entry_price","planned_stop_loss","planned_take_profit","planned_lot_size","planned_risk_amount","planned_risk_percentage","planned_at","actual_entry_price","actual_stop_loss","actual_take_profit","actual_lot_size","actual_entry_date","exit_price","exit_date","broker_fees","realized_pnl","trade_outcome","emotional_before_state","confidence_before_level","emotional_before_potential_bias","emotional_after_state","confidence_after_level","emotional_after_potential_bias","entry_criteria","trade_notes","lesson_learned","points_to_improve","additional_notes","created_at","updated_at","account_id"]];for(let o of t)i.push([this.val(o.trade_id),this.val(o.symbol),this.val(o.direction),this.val(o.strategy_name),(o.tags??[]).join("|"),this.val(o.trade_state),this.val(o.planned_entry_price),this.val(o.planned_stop_loss),this.val(o.planned_take_profit),this.val(o.planned_lot_size),this.val(o.planned_risk_amount),this.val(o.planned_risk_percentage),this.val(o.planned_at),this.val(o.actual_entry_price),this.val(o.actual_stop_loss),this.val(o.actual_take_profit),this.val(o.actual_lot_size),this.val(o.actual_entry_date),this.val(o.exit_price),this.val(o.exit_date),this.val(o.broker_fees),this.val(o.realized_pnl),this.val(o.trade_outcome),this.val(o.emotional_before_state),this.val(o.confidence_before_level),this.val(o.emotional_before_potential_bias),this.val(o.emotional_after_state),this.val(o.confidence_after_level),this.val(o.emotional_after_potential_bias),this.val(o.entry_criteria),this.val(o.trade_notes),this.val(o.lesson_learned),this.val(o.points_to_improve),this.val(o.additional_notes),this.val(o.created_at),this.val(o.updated_at),this.val(o.account_id)]);return i.map(o=>o.map(e).join(",")).join(`
`)}async exportRangeCsv(){if(!this.canExportRange())return;let t=await this.uc.fetchRangeForExport(this.tab(),this.fromDate,this.toDate),e=this.csvFromRows(t),r=this.tab().toLowerCase();this.downloadFile(`trades_${r}_${this.fromDate}_${this.toDate}.csv`,"text/csv;charset=utf-8",e)}async exportRangePdf(){if(!this.canExportRange())return;let t=await this.uc.fetchRangeForExport(this.tab(),this.fromDate,this.toDate),e=`
      <table border="1" cellspacing="0" cellpadding="6" style="border-collapse:collapse;width:100%;font-size:12px">
        <thead><tr>
          <th>Symbol</th><th>Dir</th><th>State</th>
          <th>Planned Entry</th><th>Actual Entry</th><th>Exit</th>
          <th>Outcome</th><th>Realized P&L</th>
          <th>Created</th><th>Exit Date</th>
        </tr></thead>
        <tbody>
          ${t.map(a=>`
            <tr>
              <td>${a.symbol??""}</td>
              <td>${a.direction??""}</td>
              <td>${a.trade_state??""}</td>
              <td>${this.asMoney(a.planned_entry_price)}</td>
              <td>${this.asMoney(a.actual_entry_price)}</td>
              <td>${this.asMoney(a.exit_price)}</td>
              <td>${a.trade_outcome??""}</td>
              <td>${this.asMoney(a.realized_pnl)}</td>
              <td>${this.dateTime(a.created_at)}</td>
              <td>${this.dateTime(a.exit_date)}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>
    `,r=`
    <!doctype html><html><head><meta charset="utf-8"/>
    <title>Trades ${this.fromDate} - ${this.toDate}</title>
    <style>
      body{font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; margin:24px}
      h3{margin:0 0 12px}
      .muted{color:#666}
      @media print { body{margin:0} }
    </style>
    </head><body>
      <h3>Trades (${this.tab()}) \u2014 ${this.fromDate} to ${this.toDate}</h3>
      <div class="muted">Exported ${t.length} trades</div>
      ${e}
      <script>
        window.onload = () => { setTimeout(() => { window.print(); }, 50); };
        window.onafterprint = () => { setTimeout(() => { window.close(); }, 50); };
      <\/script>
    </body></html>`.trim(),i=new Blob([r],{type:"text/html"}),o=URL.createObjectURL(i);if(!window.open(o,"_blank","noopener,noreferrer,width=1024")){URL.revokeObjectURL(o),alert("Popup blocked. Please allow popups for this site to export.");return}setTimeout(()=>URL.revokeObjectURL(o),3e4)}async ensureLightweightChartsLoaded(){this.lwcLoaded||await new Promise((t,e)=>{let r="tv-lightweight-charts";if(document.getElementById(r)){this.lwcLoaded=!0,t();return}let i=document.createElement("script");i.id=r,i.src="https://unpkg.com/lightweight-charts@4.1.1/dist/lightweight-charts.standalone.production.js",i.async=!0,i.onload=()=>{this.lwcLoaded=!0,t()},i.onerror=()=>e(new Error("Failed to load Lightweight Charts")),document.head.appendChild(i)})}normalizeToYahooSymbol(t){if(!t)return null;let e=t.trim().toUpperCase().replace(/\s+/g,"");return/^[A-Z]{3}\/?[A-Z]{3}$/.test(e)?`${e.replace("/","")}=X`:/^[A-Z]{2,6}USDT$/.test(e)?`${e.replace("USDT","")}-USD`:/^[A-Z]{2,6}-USD$/.test(e)?e:e==="XBTUSD"?"BTC-USD":e==="SPX"||e==="^SPX"?"^GSPC":e==="NDX"||e==="^NDX"?"^NDX":e}buildWindowForTrade(t){let r=t.actual_entry_date?new Date(t.actual_entry_date).getTime():t.planned_at?new Date(t.planned_at).getTime():Date.now(),i=t.exit_date?new Date(t.exit_date).getTime():r+4*60*60*1e3,o=r-864e5,s=i+864e5,a=l=>new Date(l).toLocaleString();return this.replayWindowLabel.set(`${a(o)} \u2192 ${a(s)}`),{from:o,to:s,entryMs:r,exitMs:i}}pickYahooInterval(t,e){let r=e-t,i=24*60*60*1e3;return r<=i?"5m":r<=3*i?"15m":r<=14*i?"1h":"1d"}async fetchMarketCandlesYahoo(t,e,r){let i=this.normalizeToYahooSymbol(t);if(!i)throw new Error("Unknown symbol");let o=Math.floor(e/1e3),s=Math.floor(r/1e3),a=this.pickYahooInterval(e,r),l=`/marketcandles/${encodeURIComponent(i)}?period1=${o}&period2=${s}&interval=${a}&includePrePost=false`;var c=await fetch(l);if(!c.ok)return[];let p=(await c.json())?.chart?.result?.[0];if(!p||!p.timestamp||!p.indicators?.quote?.[0])throw new Error("No data");let _=p.timestamp,g=p.indicators.quote[0],b=g.open,w=g.high,D=g.low,P=g.close,F=[];for(let R=0;R<_.length;R++){let $=b[R]??P[R],q=w[R]??P[R],Pe=D[R]??P[R],De=P[R];De!=null&&isFinite(De)&&F.push({time:Number(_[R]),open:$??De,high:q??De,low:Pe??De,close:De})}if(!F.length)throw new Error("Empty candles");return F}async renderCompletedMiniChart(){if(this.teardownChart(),this.canShowChart.set(!1),this.chartError.set(""),!this.viewTarget||!this.miniChartRef?.nativeElement)return;let t=+(this.viewTarget.actual_entry_price??this.viewTarget.planned_entry_price??0),e=+(this.viewTarget.exit_price??0);if(!this.viewTarget.symbol||!Number.isFinite(t)||t<=0){this.chartError.set("Missing entry/exit price"),this.canShowChart.set(!1);return}try{await this.ensureLightweightChartsLoaded();let r=window.LightweightCharts;if(!r?.createChart)throw new Error("Chart library unavailable");let{from:i,to:o,entryMs:s,exitMs:a}=this.buildWindowForTrade(this.viewTarget),l=[];try{l=await this.fetchMarketCandlesYahoo(this.viewTarget.symbol,i,o)}catch{this.chartError.set("Chart unavailable (data/CORS)"),this.canShowChart.set(!1);return}if(!l.length){this.chartError.set("No chart data available"),this.canShowChart.set(!1);return}let c=this.miniChartRef.nativeElement;this.chart=r.createChart(c,{width:c.clientWidth||600,height:c.clientHeight||300,layout:{background:{color:"#fff"},textColor:"#333"},rightPriceScale:{borderVisible:!1},timeScale:{borderVisible:!1},grid:{horzLines:{color:"rgba(128,128,128,0.1)"},vertLines:{color:"rgba(128,128,128,0.1)"}}}),this.series&&this.chart.removeSeries(this.series),this.series=this.chart.addCandlestickSeries(),this.series.setData(l),this.chart.timeScale().fitContent(),this.series.createPriceLine({price:t,color:"#0d6efd",lineWidth:2,title:"Entry"}),e&&this.series.createPriceLine({price:e,color:"#28a745",lineWidth:2,title:"Exit"});let h=+(this.viewTarget.actual_stop_loss??this.viewTarget.planned_stop_loss??0),p=+(this.viewTarget.actual_take_profit??this.viewTarget.planned_take_profit??0);h&&this.series.createPriceLine({price:h,color:"#dc3545",lineWidth:2,lineStyle:2,title:"SL"}),p&&this.series.createPriceLine({price:p,color:"#17a2b8",lineWidth:2,lineStyle:2,title:"TP"});let _=l.find(b=>b.time>=Math.floor(s/1e3))?.time??l[0].time,g=l.find(b=>b.time>=Math.floor(a/1e3))?.time??l[l.length-1].time;this.series.setMarkers([{time:_,position:"belowBar",color:"#0d6efd",shape:"arrowUp",text:`Entry ${this.asMoney(t)}`},{time:g,position:"aboveBar",color:"#28a745",shape:"arrowDown",text:`Exit ${this.asMoney(e)}`}]),this.ro=new ResizeObserver(()=>this.chart?.applyOptions({width:c.clientWidth,height:c.clientHeight})),this.ro.observe(c),this.canShowChart.set(!0)}catch(r){console.error("Mini chart error:",r),this.chartError.set(r?.message||"Chart unavailable"),this.canShowChart.set(!1)}}static \u0275fac=function(e){return new(e||n)(T(Cs),T(Ue))};static \u0275cmp=X({type:n,selectors:[["app-tradejournal"]],viewQuery:function(e,r){if(e&1&&Bo(nL,5),e&2){let i;Oi(i=Ri())&&(r.miniChartRef=i.first)}},decls:74,vars:19,consts:[["miniChart",""],[1,"container","my-4"],[1,"page-head"],[1,"mb-1"],[1,"subtle"],[1,"card","soft-card","my-3"],[1,"card-body","d-flex","flex-wrap","align-items-center","gap-3"],[1,"me-auto"],[1,"fw-semibold"],[1,"subtle","small"],["routerLink","/pretrade",1,"btn","btn-outline-primary","btn-rounded","d-flex","align-items-center","gap-2"],[1,"bi","bi-gear"],[1,"d-flex","justify-content-between","align-items-center","my-3"],[1,"segmented"],[1,"seg-btn",3,"click"],[1,"soft-card","bg-white"],[1,"card-head","d-flex","flex-column","flex-md-row","align-items-start","align-items-md-center","justify-content-between"],[1,"mb-3","mb-md-0"],[1,"d-flex","flex-column","flex-sm-row","gap-2"],["routerLink","/pretrade",1,"btn","btn-primary","btn-rounded","px-3"],[1,"btn","btn-outline-primary","btn-rounded",3,"click"],[1,"table-responsive"],[1,"table","clean","align-middle","mb-0"],[1,"ps-4"],[1,"pe-4","text-end"],[4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","p-3"],[1,"small","subtle"],[1,"d-flex","gap-2"],[1,"btn","btn-light","btn-sm","btn-rounded","px-3",3,"click","disabled"],["class","p-4 text-center subtle",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],["class","modal-backdrop-custom",4,"ngIf"],["class","modal-shell",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"ps-4","fw-semibold"],[1,"badge-pill","badge-soft-warning","text-capitalize"],[1,"d-inline-flex","gap-2"],["type","button",1,"btn","btn-light","btn-sm","btn-rounded","px-3",3,"click"],["type","button",1,"btn","btn-outline-warning","btn-sm","btn-rounded","px-3",3,"click"],["type","button",1,"btn","btn-danger","btn-sm","btn-rounded","px-3",3,"click"],["type","button",1,"btn","btn-success","btn-sm","btn-rounded","px-3",3,"click"],[1,"badge-pill","badge-soft-success","text-capitalize"],[1,"p-4","text-center","subtle"],[1,"alert","alert-danger","mt-3"],[1,"modal-backdrop-custom"],[1,"modal-shell"],[1,"modal-card"],[1,"modal-header","d-flex","align-items-start","justify-content-between"],[1,"m-0","fw-semibold"],[1,"muted","small"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"form-label"],["type","number","step","0.000001","placeholder","Entry price",1,"form-control","form-lg",3,"ngModelChange","ngModel"],["type","number","step","0.000001","placeholder","Stop loss price",1,"form-control","form-lg",3,"ngModelChange","ngModel"],["type","number","step","0.000001","placeholder","Take profit price",1,"form-control","form-lg",3,"ngModelChange","ngModel"],["type","number","step","0.0001","placeholder","0.10",1,"form-control","form-lg",3,"ngModelChange","ngModel"],[1,"modal-footer","d-flex","justify-content-between"],["type","button",1,"btn","btn-light","btn-rounded","px-3",3,"click"],["type","button",1,"btn","btn-primary","btn-rounded","px-3",3,"click"],[1,"modal-header"],[1,"d-flex","align-items-center","gap-2"],[1,"btn","btn-sm","btn-light",3,"click"],[1,"m-0"],[1,"row","g-3"],[1,"col-lg-7"],[1,"soft-card","p-3","h-100"],[1,"fw-semibold","mb-1"],[1,"muted","small","mb-3"],[1,"row","gy-2"],[1,"col-6"],[1,"muted"],[1,"col-lg-5"],[1,"row","g-2"],[1,"col-12","col-sm-4"],[1,"metric","g"],[1,"k"],[1,"v"],[1,"metric","o"],[1,"metric","b"],[1,"soft-card","p-3","mt-3"],[1,"row","g-3","align-items-end"],[1,"col-md-4"],[1,"position-relative","input-dollar"],["type","number","step","0.000001","placeholder","Exit Price",1,"form-control","form-lg",3,"ngModelChange","ngModel"],["type","date",1,"form-control","form-lg",3,"ngModelChange","ngModel"],["type","number","step","0.01","placeholder","0",1,"form-control","form-lg",3,"ngModelChange","ngModel"],[1,"field-help","mt-1"],[1,"col-12"],[1,"form-label","d-block","mb-2"],[1,"pill-toggle"],["type","button",1,"px-3",3,"click"],["type","button",1,"btn","btn-success","btn-rounded","px-3",3,"click"],[1,"modal-header","d-flex","align-items-center","justify-content-between"],[1,"col-md-6"],[1,"form-label","mb-1"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"small","muted"],["class","text-danger small mt-2",4,"ngIf"],[1,"btn","btn-light","btn-rounded","px-3",3,"click"],[1,"btn","btn-outline-secondary","btn-rounded",3,"click","disabled"],[1,"btn","btn-outline-primary","btn-rounded",3,"click","disabled"],[1,"text-danger","small","mt-2"],["id","viewModalCard",1,"modal-card"],[1,"soft-card","d-flex","align-items-center","justify-content-between","px-3","py-2","mb-3"],["class","soft-card p-0 mb-3",4,"ngIf"],[1,"soft-card","p-3","mb-3"],[1,"kv-grid"],[1,"kv-item"],[1,"kv-k"],[1,"kv-v"],[1,"kv-v","text-capitalize"],[1,"col-lg-6"],[1,"soft-card","p-3"],[1,"modal-footer","d-flex","flex-wrap","gap-2","justify-content-between"],["type","button",1,"btn","btn-outline-secondary","btn-rounded","px-3",3,"click"],["type","button",1,"btn","btn-outline-primary","btn-rounded","px-3",3,"click"],[1,"soft-card","p-0","mb-3"],[1,"p-3"],[1,"mini-chart"],[1,"small","mt-2","subtle"],["class","ms-3",4,"ngIf"],[1,"ms-3"]],template:function(e,r){e&1&&(d(0,"div",1)(1,"div",2)(2,"h2",3),f(3,"Trading Dashboard"),u(),d(4,"div",4),f(5,"Manage your trades from planning to completion"),u()(),d(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),f(10,"Trade Entry Mode"),u(),d(11,"div",9),f(12,"Manually enter and manage trades"),u()(),d(13,"a",10),L(14,"span",11),f(15," Manual Entry "),u()()(),d(16,"div",12)(17,"div",13)(18,"button",14),C("click",function(){return r.switchTab("PLANNED")}),f(19,"Planned Trades"),u(),d(20,"button",14),C("click",function(){return r.switchTab("EXECUTING")}),f(21,"Executed Trades"),u(),d(22,"button",14),C("click",function(){return r.switchTab("COMPLETED")}),f(23,"Completed Trades"),u()()(),d(24,"div",15)(25,"div",16)(26,"div",17)(27,"div",8),f(28,"Your Trade Plans"),u(),d(29,"div",9),f(30,"Review and manage your planned trades"),u()(),d(31,"div",18)(32,"a",19),f(33,"New Trade Plan"),u(),d(34,"button",20),C("click",function(){return r.openExport()}),f(35,"Export"),u()()(),d(36,"div",21)(37,"table",22)(38,"thead")(39,"tr")(40,"th",23),f(41,"Symbol"),u(),d(42,"th"),f(43,"Direction"),u(),d(44,"th"),f(45,"Entry/Exit"),u(),d(46,"th"),f(47,"Strategy"),u(),d(48,"th"),f(49,"Emotional State"),u(),d(50,"th"),f(51,"Date"),u(),d(52,"th"),f(53,"Status"),u(),d(54,"th",24),f(55,"Actions"),u()()(),M(56,oL,2,2,"tbody",25)(57,aL,2,2,"tbody",25)(58,cL,2,2,"tbody",25),u()(),d(59,"div",26)(60,"div",27),f(61),u(),d(62,"div",28)(63,"button",29),C("click",function(){return r.prevPage()}),f(64,"Prev"),u(),d(65,"button",29),C("click",function(){return r.nextPage()}),f(66,"Next"),u()()(),M(67,uL,2,0,"div",30),u(),M(68,dL,2,1,"div",31),u(),M(69,fL,1,0,"div",32)(70,hL,34,8,"div",33)(71,pL,117,24,"div",33)(72,gL,28,5,"div",33)(73,bL,224,42,"div",33)),e&2&&(m(18),ne("active",r.tab()==="PLANNED"),m(2),ne("active",r.tab()==="EXECUTING"),m(2),ne("active",r.tab()==="COMPLETED"),m(34),y("ngIf",r.tab()==="PLANNED"),m(),y("ngIf",r.tab()==="EXECUTING"),m(),y("ngIf",r.tab()==="COMPLETED"),m(3),z("Page ",r.pageIndex()+1,""),m(2),y("disabled",!r.hasPrev()),m(2),y("disabled",!r.hasNext()),m(2),y("ngIf",r.viewRows().length===0),m(),y("ngIf",r.uc.error()),m(),y("ngIf",r.execModalOpen()||r.completeModalOpen()||r.viewModalOpen()||r.exportModalOpen()),m(),y("ngIf",r.execModalOpen()),m(),y("ngIf",r.completeModalOpen()),m(),y("ngIf",r.exportModalOpen()),m(),y("ngIf",r.viewModalOpen()))},dependencies:[ie,nt,ye,pt,Se,to,Ae,st,Nt],styles:['.page-head[_ngcontent-%COMP%]{padding:1.25rem 0 .25rem}.subtle[_ngcontent-%COMP%], .muted[_ngcontent-%COMP%]{color:#6c757d}.soft-card[_ngcontent-%COMP%]{border-radius:1rem;border:1px solid #e9ecef;box-shadow:0 1px 2px #10182805}.card-head[_ngcontent-%COMP%]{padding:1rem 1.25rem;border-bottom:1px solid #eef2f7}.segmented[_ngcontent-%COMP%]{display:inline-flex;gap:.25rem;padding:.25rem;border-radius:9999px;background:#f1f3f5}.segmented[_ngcontent-%COMP%]   .seg-btn[_ngcontent-%COMP%]{border:0;border-radius:9999px;background:transparent;padding:.5rem 1.25rem;font-weight:600;color:#495057}.segmented[_ngcontent-%COMP%]   .seg-btn.active[_ngcontent-%COMP%]{background:#fff;box-shadow:0 1px 2px #0000000f;color:#0d6efd}.table.clean[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(caption) > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{border-bottom-width:0}.table.clean[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] + tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:1px solid #eef2f7}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#6c757d;font-weight:600}.badge-pill[_ngcontent-%COMP%]{border-radius:9999px;padding:.35rem .75rem;font-weight:600}.badge-soft-warning[_ngcontent-%COMP%]{background:#fff8e1;color:#946200}.badge-soft-success[_ngcontent-%COMP%]{background:#eafff2;color:#117c36}.btn-rounded[_ngcontent-%COMP%]{border-radius:.75rem}.btn-danger[_ngcontent-%COMP%]{background:#ffe8e6;color:#c2271c;border:0}.btn-danger[_ngcontent-%COMP%]:hover{background:#ffd8d5;color:#a61f16}.modal-backdrop-custom[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000073;opacity:1;transition:opacity .15s;z-index:1050}.modal-shell[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:flex-start;justify-content:center;padding:3rem 1rem;overflow:auto;z-index:1060}.modal-card[_ngcontent-%COMP%]{width:min(980px,calc(100vw - 2rem));background:#fff;border-radius:1rem;box-shadow:0 10px 30px #1018282e;animation:_ngcontent-%COMP%_pop .12s ease-out}@keyframes _ngcontent-%COMP%_pop{0%{transform:scale(.98);opacity:.6}to{transform:scale(1);opacity:1}}.modal-header[_ngcontent-%COMP%]{padding:1rem 1.25rem;border-bottom:1px solid #eef2f7}.modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:1rem 1.25rem}.form-control.form-lg[_ngcontent-%COMP%]{border-radius:.75rem;padding:.75rem 1rem;font-size:1rem}.metric[_ngcontent-%COMP%]{border-radius:.75rem;border:1px solid #eef2f7;padding:1rem;text-align:center}.metric[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d}.metric[_ngcontent-%COMP%]   .v[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem}.metric.g[_ngcontent-%COMP%]{color:#117c36}.metric.b[_ngcontent-%COMP%]{color:#0d6efd}.metric.o[_ngcontent-%COMP%]{color:#0a7}.pill-toggle[_ngcontent-%COMP%]{display:inline-flex;border-radius:.75rem;background:#f1f3f5;overflow:hidden}.pill-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;background:transparent;padding:.5rem 1rem;font-weight:600}.pill-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#dbeafe;color:#0d6efd}.label-strong[_ngcontent-%COMP%]{font-weight:600}.dir-long[_ngcontent-%COMP%]{color:#198754}.dir-short[_ngcontent-%COMP%]{color:#dc3545}.field-help[_ngcontent-%COMP%]{color:#6c757d;font-size:.85rem}.input-dollar[_ngcontent-%COMP%]:before{content:"$";position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:#6c757d}.input-dollar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:1.6rem}.kv-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.5rem .75rem}.kv-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:.75rem;padding:.5rem .75rem;border:1px solid #eef2f7;border-radius:.5rem}.kv-k[_ngcontent-%COMP%]{color:#6c757d}.kv-v[_ngcontent-%COMP%]{font-weight:600}@media (max-width: 768px){.kv-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.mini-chart[_ngcontent-%COMP%]{height:320px;width:100%}@media (max-width: 576px){.mini-chart[_ngcontent-%COMP%]{height:260px}}']})};var Jd=class n{constructor(t,e){this.supabase=t;this.router=e}async canActivate(){let{data:t}=await this.supabase.GetClient().auth.getSession();return t.session?!0:this.router.createUrlTree(["/auth/forgot-password"],{queryParams:{reason:"invalid_or_expired"}})}static \u0275fac=function(e){return new(e||n)(O(ge),O(Ue))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var US=[{path:"",component:xd,canActivate:[Za]},{path:"home",component:fd,canActivate:[Zt]},{path:"emotions",component:Ud,canActivate:[Zt]},{path:"pretrade",component:Kd,canActivate:[Zt]},{path:"tradejournal",component:Zd,canActivate:[Zt]},{path:"meditationhub",component:Od,canActivate:[Zt]},{path:"analytics",component:zd,canActivate:[Zt]},{path:"tradeaccounts",component:Fd,canActivate:[Zt]},{path:"useraccount",component:Ld,canActivate:[Zt]},{path:"admin/emotionquestion",component:Sd,canActivate:[Zt]},{path:"admin/meditationvideo",component:jd,canActivate:[Zt]},{path:"auth/forgot-password",component:Bd,canActivate:[Za]},{path:"auth/update-password",component:$d,canActivate:[Jd]},{path:"**",redirectTo:""}];var he=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(he||{}),Jn="*";function BS(n,t=null){return{type:he.Sequence,steps:n,options:t}}function l_(n){return{type:he.Style,styles:n,offset:null}}var si=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},sl=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){let t=this.players.reduce((e,r)=>e===null||r.totalTime>e.totalTime?r:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},Yd="!";function $S(n){return new A(3e3,!1)}function wL(){return new A(3100,!1)}function CL(){return new A(3101,!1)}function EL(n){return new A(3001,!1)}function SL(n){return new A(3003,!1)}function DL(n){return new A(3004,!1)}function xL(n,t){return new A(3005,!1)}function IL(){return new A(3006,!1)}function TL(){return new A(3007,!1)}function ML(n,t){return new A(3008,!1)}function AL(n){return new A(3002,!1)}function kL(n,t,e,r,i){return new A(3010,!1)}function NL(){return new A(3011,!1)}function PL(){return new A(3012,!1)}function OL(){return new A(3200,!1)}function RL(){return new A(3202,!1)}function FL(){return new A(3013,!1)}function LL(n){return new A(3014,!1)}function VL(n){return new A(3015,!1)}function jL(n){return new A(3016,!1)}function UL(n,t){return new A(3404,!1)}function BL(n){return new A(3502,!1)}function $L(n){return new A(3503,!1)}function HL(){return new A(3300,!1)}function zL(n){return new A(3504,!1)}function qL(n){return new A(3301,!1)}function WL(n,t){return new A(3302,!1)}function GL(n){return new A(3303,!1)}function QL(n,t){return new A(3400,!1)}function KL(n){return new A(3401,!1)}function ZL(n){return new A(3402,!1)}function JL(n,t){return new A(3505,!1)}function ai(n){switch(n.length){case 0:return new si;case 1:return n[0];default:return new sl(n)}}function nD(n,t,e=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(t.forEach(l=>{let c=l.get("offset"),h=c==s,p=h&&a||new Map;l.forEach((_,g)=>{let b=g,w=_;if(g!=="offset")switch(b=n.normalizePropertyName(b,i),w){case Yd:w=e.get(g);break;case Jn:w=r.get(g);break;default:w=n.normalizeStyleValue(g,b,w,i);break}p.set(b,w)}),h||o.push(p),a=p,s=c}),i.length)throw BL(i);return o}function A_(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&c_(e,"start",n)));break;case"done":n.onDone(()=>r(e&&c_(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&c_(e,"destroy",n)));break}}function c_(n,t,e){let r=e.totalTime,i=!!e.disabled,o=k_(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function k_(n,t,e,r,i="",o=0,s){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Xt(n,t,e){let r=n.get(t);return r||n.set(t,r=e),r}function HS(n){let t=n.indexOf(":"),e=n.substring(1,t),r=n.slice(t+1);return[e,r]}var YL=typeof document>"u"?null:document.documentElement;function N_(n){let t=n.parentNode||n.host||null;return t===YL?null:t}function XL(n){return n.substring(1,6)=="ebkit"}var ro=null,zS=!1;function eV(n){ro||(ro=tV()||{},zS=ro.style?"WebkitAppearance"in ro.style:!1);let t=!0;return ro.style&&!XL(n)&&(t=n in ro.style,!t&&zS&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in ro.style)),t}function tV(){return typeof document<"u"?document.body:null}function rD(n,t){for(;t;){if(t===n)return!0;t=N_(t)}return!1}function iD(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let r=n.querySelector(t);return r?[r]:[]}var P_=(()=>{class n{validateStyleProperty(e){return eV(e)}containsElement(e,r){return rD(e,r)}getParentElement(e){return N_(e)}query(e,r,i){return iD(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,o,s,a=[],l){return new si(i,o)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})(),so=class{static NOOP=new P_},ao=class{};var nV=1e3,oD="{{",rV="}}",sD="ng-enter",m_="ng-leave",Xd="ng-trigger",of=".ng-trigger",qS="ng-animating",g_=".ng-animating";function Mr(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:__(parseFloat(t[1]),t[2])}function __(n,t){switch(t){case"s":return n*nV;default:return n}}function sf(n,t,e){return n.hasOwnProperty("duration")?n:iV(n,t,e)}function iV(n,t,e){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,o=0,s="";if(typeof n=="string"){let a=n.match(r);if(a===null)return t.push($S(n)),{duration:0,delay:0,easing:""};i=__(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=__(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else i=n;if(!e){let a=!1,l=t.length;i<0&&(t.push(wL()),a=!0),o<0&&(t.push(CL()),a=!0),a&&t.splice(l,0,$S(n))}return{duration:i,delay:o,easing:s}}function oV(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function Yn(n,t,e){t.forEach((r,i)=>{let o=O_(i);e&&!e.has(i)&&e.set(i,n.style[o]),n.style[o]=r})}function oo(n,t){t.forEach((e,r)=>{let i=O_(r);n.style[i]=""})}function al(n){return Array.isArray(n)?n.length==1?n[0]:BS(n):n}function sV(n,t,e){let r=t.params||{},i=aD(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||e.push(EL(o))})}var v_=new RegExp(`${oD}\\s*(.+?)\\s*${rV}`,"g");function aD(n){let t=[];if(typeof n=="string"){let e;for(;e=v_.exec(n);)t.push(e[1]);v_.lastIndex=0}return t}function cl(n,t,e){let r=`${n}`,i=r.replace(v_,(o,s)=>{let a=t[s];return a==null&&(e.push(SL(s)),a=""),a.toString()});return i==r?n:i}var aV=/-+([a-z0-9])/g;function O_(n){return n.replace(aV,(...t)=>t[1].toUpperCase())}function lV(n,t){return n===0||t===0}function cV(n,t,e){if(e.size&&t.length){let r=t[0],i=[];if(e.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<t.length;o++){let s=t[o];i.forEach(a=>s.set(a,R_(n,a)))}}return t}function Yt(n,t,e){switch(t.type){case he.Trigger:return n.visitTrigger(t,e);case he.State:return n.visitState(t,e);case he.Transition:return n.visitTransition(t,e);case he.Sequence:return n.visitSequence(t,e);case he.Group:return n.visitGroup(t,e);case he.Animate:return n.visitAnimate(t,e);case he.Keyframes:return n.visitKeyframes(t,e);case he.Style:return n.visitStyle(t,e);case he.Reference:return n.visitReference(t,e);case he.AnimateChild:return n.visitAnimateChild(t,e);case he.AnimateRef:return n.visitAnimateRef(t,e);case he.Query:return n.visitQuery(t,e);case he.Stagger:return n.visitStagger(t,e);default:throw DL(t.type)}}function R_(n,t){return window.getComputedStyle(n)[t]}var uV=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),af=class extends ao{normalizePropertyName(t,e){return O_(t)}normalizeStyleValue(t,e,r,i){let o="",s=r.toString().trim();if(uV.has(e)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(xL(t,r))}return s+o}};var lf="*";function dV(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>fV(r,e,t)):e.push(n),e}function fV(n,t,e){if(n[0]==":"){let l=hV(n,e);if(typeof l=="function"){t.push(l);return}n=l}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return e.push(VL(n)),t;let i=r[1],o=r[2],s=r[3];t.push(WS(i,s));let a=i==lf&&s==lf;o[0]=="<"&&!a&&t.push(WS(s,i))}function hV(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(jL(n)),"* => *"}}var ef=new Set(["true","1"]),tf=new Set(["false","0"]);function WS(n,t){let e=ef.has(n)||tf.has(n),r=ef.has(t)||tf.has(t);return(i,o)=>{let s=n==lf||n==i,a=t==lf||t==o;return!s&&e&&typeof i=="boolean"&&(s=i?ef.has(n):tf.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?ef.has(t):tf.has(t)),s&&a}}var lD=":self",pV=new RegExp(`s*${lD}s*,?`,"g");function cD(n,t,e,r){return new y_(n).build(t,e,r)}var GS="",y_=class{_driver;constructor(t){this._driver=t}build(t,e,r){let i=new b_(e);return this._resetContextStyleTimingState(i),Yt(this,al(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector=GS,t.collectedStyles=new Map,t.collectedStyles.set(GS,new Map),t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0,o=[],s=[];return t.name.charAt(0)=="@"&&e.errors.push(IL()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==he.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,o.push(this.visitState(l,e))}),l.name=c}else if(a.type==he.Transition){let l=this.visitTransition(a,e);r+=l.queryCount,i+=l.depCount,s.push(l)}else e.errors.push(TL())}),{type:he.Trigger,name:t.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(t,e){let r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{aD(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&e.errors.push(ML(t.name,[...o.values()]))}return{type:he.State,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let r=Yt(this,al(t.animation),e),i=dV(t.expr,e.errors);return{type:he.Transition,matchers:i,animation:r,queryCount:e.queryCount,depCount:e.depCount,options:io(t.options)}}visitSequence(t,e){return{type:he.Sequence,steps:t.steps.map(r=>Yt(this,r,e)),options:io(t.options)}}visitGroup(t,e){let r=e.currentTime,i=0,o=t.steps.map(s=>{e.currentTime=r;let a=Yt(this,s,e);return i=Math.max(i,e.currentTime),a});return e.currentTime=i,{type:he.Group,steps:o,options:io(t.options)}}visitAnimate(t,e){let r=vV(t.timings,e.errors);e.currentAnimateTimings=r;let i,o=t.styles?t.styles:l_({});if(o.type==he.Keyframes)i=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;let c={};r.easing&&(c.easing=r.easing),s=l_(c)}e.currentTime+=r.duration+r.delay;let l=this.visitStyle(s,e);l.isEmptyStep=a,i=l}return e.currentAnimateTimings=null,{type:he.Animate,timings:r,style:i,options:null}}visitStyle(t,e){let r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){let r=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of i)typeof a=="string"?a===Jn?r.push(a):e.errors.push(AL(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(oD)>=0){o=!0;break}}}),{type:he.Style,styles:r,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){let r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=e.collectedStyles.get(e.currentQuerySelector),h=c.get(l),p=!0;h&&(o!=i&&o>=h.startTime&&i<=h.endTime&&(e.errors.push(kL(l,h.startTime,h.endTime,o,i)),p=!1),o=h.startTime),p&&c.set(l,{startTime:o,endTime:i}),e.options&&sV(a,e.options,e.errors)})})}visitKeyframes(t,e){let r={type:he.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(NL()),r;let i=1,o=0,s=[],a=!1,l=!1,c=0,h=t.steps.map(P=>{let F=this._makeStyleAst(P,e),R=F.offset!=null?F.offset:_V(F.styles),$=0;return R!=null&&(o++,$=F.offset=R),l=l||$<0||$>1,a=a||$<c,c=$,s.push($),F});l&&e.errors.push(PL()),a&&e.errors.push(OL());let p=t.steps.length,_=0;o>0&&o<p?e.errors.push(RL()):o==0&&(_=i/(p-1));let g=p-1,b=e.currentTime,w=e.currentAnimateTimings,D=w.duration;return h.forEach((P,F)=>{let R=_>0?F==g?1:_*F:s[F],$=R*D;e.currentTime=b+w.delay+$,w.duration=$,this._validateStyleAst(P,e),P.offset=R,r.styles.push(P)}),r}visitReference(t,e){return{type:he.Reference,animation:Yt(this,al(t.animation),e),options:io(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:he.AnimateChild,options:io(t.options)}}visitAnimateRef(t,e){return{type:he.AnimateRef,animation:this.visitReference(t.animation,e),options:io(t.options)}}visitQuery(t,e){let r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;let[o,s]=mV(t.selector);e.currentQuerySelector=r.length?r+" "+o:o,Xt(e.collectedStyles,e.currentQuerySelector,new Map);let a=Yt(this,al(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:he.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:io(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(FL());let r=t.timings==="full"?{duration:0,delay:0,easing:"full"}:sf(t.timings,e.errors,!0);return{type:he.Stagger,animation:Yt(this,al(t.animation),e),timings:r,options:null}}};function mV(n){let t=!!n.split(/\s*,\s*/).find(e=>e==lD);return t&&(n=n.replace(pV,"")),n=n.replace(/@\*/g,of).replace(/@\w+/g,e=>of+"-"+e.slice(1)).replace(/:animating/g,g_),[n,t]}function gV(n){return n?N({},n):null}var b_=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function _V(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let r=e;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function vV(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=sf(n,t).duration;return u_(o,0,"")}let e=n;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=u_(0,0,"");return o.dynamic=!0,o.strValue=e,o}let i=sf(e,t);return u_(i.duration,i.delay,i.easing)}function io(n){return n?(n=N({},n),n.params&&(n.params=gV(n.params))):n={},n}function u_(n,t,e){return{duration:n,delay:t,easing:e}}function F_(n,t,e,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var ul=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},yV=1,bV=":enter",wV=new RegExp(bV,"g"),CV=":leave",EV=new RegExp(CV,"g");function uD(n,t,e,r,i,o=new Map,s=new Map,a,l,c=[]){return new w_().buildKeyframes(n,t,e,r,i,o,s,a,l,c)}var w_=class{buildKeyframes(t,e,r,i,o,s,a,l,c,h=[]){c=c||new ul;let p=new C_(t,e,c,i,o,h,[]);p.options=l;let _=l.delay?Mr(l.delay):0;p.currentTimeline.delayNextStep(_),p.currentTimeline.setStyles([s],null,p.errors,l),Yt(this,r,p);let g=p.timelines.filter(b=>b.containsAnimation());if(g.length&&a.size){let b;for(let w=g.length-1;w>=0;w--){let D=g[w];if(D.element===e){b=D;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([a],null,p.errors,l)}return g.length?g.map(b=>b.buildKeyframes()):[F_(e,[],[],[],0,_,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let r=e.subInstructions.get(e.element);if(r){let i=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){let r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,r),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,r){for(let i of t){let o=i?.delay;if(o){let s=typeof o=="number"?o:Mr(cl(o,i?.params??{},e.errors));r.delayNextStep(s)}}}_visitSubInstructions(t,e,r){let o=e.currentTimeline.currentTime,s=r.duration!=null?Mr(r.duration):null,a=r.delay!=null?Mr(r.delay):null;return s!==0&&t.forEach(l=>{let c=e.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),Yt(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==he.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=cf);let s=Mr(o.delay);i.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>Yt(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?Mr(t.options.delay):0;t.steps.forEach(s=>{let a=e.createSubContext(t.options);o&&a.delayNextStep(o),Yt(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let r=t.strValue,i=e.params?cl(r,e.params,e.errors):r;return sf(i,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());let o=t.style;o.type==he.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(r.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(o):r.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let r=e.currentAnimateTimings,i=e.currentTimeline.duration,o=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,t.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(i+o),e.previousNode=t}visitQuery(t,e){let r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?Mr(i.delay):0;o&&(e.previousNode.type===he.Style||r==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=cf);let s=r,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,h)=>{e.currentQueryIndex=h;let p=e.createSubContext(t.options,c);o&&p.delayNextStep(o),c===e.element&&(l=p.currentTimeline),Yt(this,t.animation,p),p.currentTimeline.applyStylesToKeyframe();let _=p.currentTimeline.currentTime;s=Math.max(s,_)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let r=e.parentContext,i=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1),l=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime;break}let h=e.currentTimeline;l&&h.delayNextStep(l);let p=h.currentTime;Yt(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-p+(i.startTime-r.currentTimeline.startTime)}},cf={},C_=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=cf;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,r,i,o,s,a,l){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new uf(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let r=t,i=this.options;r.duration!=null&&(i.duration=Mr(r.duration)),r.delay!=null&&(i.delay=Mr(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=cl(o[a],s,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){let i=e||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=cf,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){let i={duration:e??t.duration,delay:this.currentTimeline.currentTime+(r??0)+t.delay,easing:""},o=new E_(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,o,s){let a=[];if(i&&a.push(this.element),t.length>0){t=t.replace(wV,"."+this._enterClassName),t=t.replace(EV,"."+this._leaveClassName);let l=r!=1,c=this._driver.query(this.element,t,l);r!==0&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!o&&a.length==0&&s.push(LL(e)),a}},uf=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=yV,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||Jn),this._currentKeyframe.set(e,Jn);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&this._previousKeyframe.set("easing",e);let o=i&&i.params||{},s=SV(t,this._globalTimelineStyles);for(let[a,l]of s){let c=cl(l,o,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Jn),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,r)=>{let i=this._styleSummary.get(r);(!i||e.time>i.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((h,p)=>{h===Yd?t.add(p):h===Jn&&e.add(p)}),r||c.set("offset",l/this.duration),i.push(c)});let o=[...t.values()],s=[...e.values()];if(r){let a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return F_(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},E_=class extends uf{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,r,i,o,s,a=!1){super(t,e,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],s=r+e,a=e/s,l=new Map(t[0]);l.set("offset",0),o.push(l);let c=new Map(t[0]);c.set("offset",QS(a)),o.push(c);let h=t.length-1;for(let p=1;p<=h;p++){let _=new Map(t[p]),g=_.get("offset"),b=e+g*r;_.set("offset",QS(b/s)),o.push(_)}r=s,e=0,i="",t=o}return F_(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}};function QS(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function SV(n,t){let e=new Map,r;return n.forEach(i=>{if(i==="*"){r??=t.keys();for(let o of r)e.set(o,Jn)}else for(let[o,s]of i)e.set(o,s)}),e}function KS(n,t,e,r,i,o,s,a,l,c,h,p,_){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:p,errors:_}}var d_={},df=class{_triggerName;ast;_stateStyles;constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return DV(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){let i=this._stateStyles.get("*");return t!==void 0&&(i=this._stateStyles.get(t?.toString())||i),i?i.buildStyles(e,r):new Map}build(t,e,r,i,o,s,a,l,c,h){let p=[],_=this.ast.options&&this.ast.options.params||d_,g=a&&a.params||d_,b=this.buildStyles(r,g,p),w=l&&l.params||d_,D=this.buildStyles(i,w,p),P=new Set,F=new Map,R=new Map,$=i==="void",q={params:dD(w,_),delay:this.ast.options?.delay},Pe=h?[]:uD(t,e,this.ast.animation,o,s,b,D,q,c,p),De=0;return Pe.forEach(at=>{De=Math.max(at.duration+at.delay,De)}),p.length?KS(e,this._triggerName,r,i,$,b,D,[],[],F,R,De,p):(Pe.forEach(at=>{let li=at.element,lo=Xt(F,li,new Set);at.preStyleProps.forEach(ci=>lo.add(ci));let L_=Xt(R,li,new Set);at.postStyleProps.forEach(ci=>L_.add(ci)),li!==e&&P.add(li)}),KS(e,this._triggerName,r,i,$,b,D,Pe,[...P.values()],F,R,De))}};function DV(n,t,e,r,i){return n.some(o=>o(t,e,r,i))}function dD(n,t){let e=N({},t);return Object.entries(n).forEach(([r,i])=>{i!=null&&(e[r]=i)}),e}var S_=class{styles;defaultParams;normalizer;constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){let r=new Map,i=dD(t,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=cl(s,i,e));let l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),r.set(a,s)})}),r}};function xV(n,t,e){return new D_(n,t,e)}var D_=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,e.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new S_(i.style,o,r))}),ZS(this.states,"true","1"),ZS(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new df(t,i,this.states))}),this.fallbackTransition=IV(t,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(s=>s.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}};function IV(n,t,e){let r=[(s,a)=>!0],i={type:he.Sequence,steps:[],options:null},o={type:he.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new df(n,o,t)}function ZS(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var TV=new ul,x_=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r}register(t,e){let r=[],i=[],o=cD(this._driver,e,r,i);if(r.length)throw $L(r);this._animations.set(t,o)}_buildPlayer(t,e,r){let i=t.element,o=nD(this._normalizer,t.keyframes,e,r);return this._driver.animate(i,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){let i=[],o=this._animations.get(t),s,a=new Map;if(o?(s=uD(this._driver,e,o,sD,m_,new Map,new Map,r,TV,i),s.forEach(h=>{let p=Xt(a,h.element,new Map);h.postStyleProps.forEach(_=>p.set(_,null))})):(i.push(HL()),s=[]),i.length)throw zL(i);a.forEach((h,p)=>{h.forEach((_,g)=>{h.set(g,this._driver.computeStyle(p,g,Jn))})});let l=s.map(h=>{let p=a.get(h.element);return this._buildPlayer(h,new Map,p)}),c=ai(l);return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw qL(t);return e}listen(t,e,r,i){let o=k_(e,"","","");return A_(this._getPlayer(t),r,o,i),()=>{}}command(t,e,r,i){if(r=="register"){this.register(t,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(t,e,s);return}let o=this._getPlayer(t);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t);break}}},JS="ng-animate-queued",MV=".ng-animate-queued",f_="ng-animate-disabled",AV=".ng-animate-disabled",kV="ng-star-inserted",NV=".ng-star-inserted",PV=[],fD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},OV={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},An="__ng_removed",dl=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let r=t&&t.hasOwnProperty("value"),i=r?t.value:t;if(this.value=FV(i),r){let o=t,{value:s}=o,a=co(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let r=this.options.params;Object.keys(e).forEach(i=>{r[i]==null&&(r[i]=e[i])})}}},ll="void",h_=new dl(ll),I_=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this._hostClassName="ng-tns-"+t,mn(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.has(e))throw WL(r,e);if(r==null||r.length==0)throw GL(e);if(!LV(r))throw QL(r,e);let o=Xt(this._elementListeners,t,[]),s={name:e,phase:r,callback:i};o.push(s);let a=Xt(this._engine.statesByElement,t,new Map);return a.has(e)||(mn(t,Xd),mn(t,Xd+"-"+e),a.set(e,h_)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw KL(t);return e}trigger(t,e,r,i=!0){let o=this._getTrigger(e),s=new fl(this.id,e,t),a=this._engine.statesByElement.get(t);a||(mn(t,Xd),mn(t,Xd+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e),c=new dl(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=h_),!(c.value===ll)&&l.value===c.value){if(!UV(l.params,c.params)){let w=[],D=o.matchStyles(l.value,l.params,w),P=o.matchStyles(c.value,c.params,w);w.length?this._engine.reportError(w):this._engine.afterFlush(()=>{oo(t,D),Yn(t,P)})}return}let _=Xt(this._engine.playersByElement,t,[]);_.forEach(w=>{w.namespaceId==this.id&&w.triggerName==e&&w.queued&&w.destroy()});let g=o.matchTransition(l.value,c.value,t,c.params),b=!1;if(!g){if(!i)return;g=o.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:g,fromState:l,toState:c,player:s,isFallbackTransition:b}),b||(mn(t,JS),s.onStart(()=>{Es(t,JS)})),s.onDone(()=>{let w=this.players.indexOf(s);w>=0&&this.players.splice(w,1);let D=this._engine.playersByElement.get(t);if(D){let P=D.indexOf(s);P>=0&&D.splice(P,1)}}),this.players.push(s),_.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let r=this._engine.driver.query(t,of,!0);r.forEach(i=>{if(i[An])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){let o=this._engine.statesByElement.get(t),s=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let h=this.trigger(t,c,ll,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),r&&ai(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){let i=new Set;e.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let l=this._triggers.get(s).fallbackTransition,c=r.get(s)||h_,h=new dl(ll),p=new fl(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:c,toState:h,player:p,isFallbackTransition:!0})})}}removeNode(t,e){let r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else{let s=t;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{let o=t[An];(!o||o===fD)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){mn(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let l=k_(o,r.triggerName,r.fromState.value,r.toState.value);l._data=t,A_(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},T_=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){let r=new I_(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let l=i.get(a);if(l){let c=r.indexOf(l);r.splice(c+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(t);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,r=this.statesByElement.get(t);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&e.add(o)}}return e}trigger(t,e,r,i){if(nf(e)){let o=this._fetchNamespace(t);if(o)return o.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!nf(e))return;let o=e[An];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){let s=this._fetchNamespace(t);s&&s.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),mn(t,f_)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Es(t,f_))}removeNode(t,e,r){if(nf(e)){let i=t?this._fetchNamespace(t):null;i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r);let o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,r,i,o){this.collectedLeaveElements.push(e),e[An]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,r,i,o){return nf(e)?this._fetchNamespace(t).listen(e,r,i,o):()=>{}}_buildInstruction(t,e,r,i,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,of,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,g_,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ai(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[An];if(e&&e.setForRemoval){if(t[An]=fD,e.namespaceId){this.destroyInnerAnimations(t);let r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(f_)&&this.markElementAsDisabled(t,!1),this.driver.query(t,AV,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];mn(i,kV)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],e.length?ai(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw ZL(t)}_flushAnimations(t,e){let r=new ul,i=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(U=>{h.add(U);let H=this.driver.query(U,MV,!0);for(let J=0;J<H.length;J++)h.add(H[J])});let p=this.bodyNode,_=Array.from(this.statesByElement.keys()),g=eD(_,this.collectedEnterElements),b=new Map,w=0;g.forEach((U,H)=>{let J=sD+w++;b.set(H,J),U.forEach(ve=>mn(ve,J))});let D=[],P=new Set,F=new Set;for(let U=0;U<this.collectedLeaveElements.length;U++){let H=this.collectedLeaveElements[U],J=H[An];J&&J.setForRemoval&&(D.push(H),P.add(H),J.hasAnimation?this.driver.query(H,NV,!0).forEach(ve=>P.add(ve)):F.add(H))}let R=new Map,$=eD(_,Array.from(P));$.forEach((U,H)=>{let J=m_+w++;R.set(H,J),U.forEach(ve=>mn(ve,J))}),t.push(()=>{g.forEach((U,H)=>{let J=b.get(H);U.forEach(ve=>Es(ve,J))}),$.forEach((U,H)=>{let J=R.get(H);U.forEach(ve=>Es(ve,J))}),D.forEach(U=>{this.processLeaveNode(U)})});let q=[],Pe=[];for(let U=this._namespaceList.length-1;U>=0;U--)this._namespaceList[U].drainQueuedTransitions(e).forEach(J=>{let ve=J.player,tt=J.element;if(q.push(ve),this.collectedEnterElements.length){let lt=tt[An];if(lt&&lt.setForMove){if(lt.previousTriggersValues&&lt.previousTriggersValues.has(J.triggerName)){let ui=lt.previousTriggersValues.get(J.triggerName),en=this.statesByElement.get(J.element);if(en&&en.has(J.triggerName)){let hl=en.get(J.triggerName);hl.value=ui,en.set(J.triggerName,hl)}}ve.destroy();return}}let kn=!p||!this.driver.containsElement(p,tt),Rt=R.get(tt),Ar=b.get(tt),Le=this._buildInstruction(J,r,Ar,Rt,kn);if(Le.errors&&Le.errors.length){Pe.push(Le);return}if(kn){ve.onStart(()=>oo(tt,Le.fromStyles)),ve.onDestroy(()=>Yn(tt,Le.toStyles)),i.push(ve);return}if(J.isFallbackTransition){ve.onStart(()=>oo(tt,Le.fromStyles)),ve.onDestroy(()=>Yn(tt,Le.toStyles)),i.push(ve);return}let U_=[];Le.timelines.forEach(lt=>{lt.stretchStartingKeyframe=!0,this.disabledNodes.has(lt.element)||U_.push(lt)}),Le.timelines=U_,r.append(tt,Le.timelines);let vD={instruction:Le,player:ve,element:tt};s.push(vD),Le.queriedElements.forEach(lt=>Xt(a,lt,[]).push(ve)),Le.preStyleProps.forEach((lt,ui)=>{if(lt.size){let en=l.get(ui);en||l.set(ui,en=new Set),lt.forEach((hl,vf)=>en.add(vf))}}),Le.postStyleProps.forEach((lt,ui)=>{let en=c.get(ui);en||c.set(ui,en=new Set),lt.forEach((hl,vf)=>en.add(vf))})});if(Pe.length){let U=[];Pe.forEach(H=>{U.push(JL(H.triggerName,H.errors))}),q.forEach(H=>H.destroy()),this.reportError(U)}let De=new Map,at=new Map;s.forEach(U=>{let H=U.element;r.has(H)&&(at.set(H,H),this._beforeAnimationBuild(U.player.namespaceId,U.instruction,De))}),i.forEach(U=>{let H=U.element;this._getPreviousPlayers(H,!1,U.namespaceId,U.triggerName,null).forEach(ve=>{Xt(De,H,[]).push(ve),ve.destroy()})});let li=D.filter(U=>tD(U,l,c)),lo=new Map;XS(lo,this.driver,F,c,Jn).forEach(U=>{tD(U,l,c)&&li.push(U)});let ci=new Map;g.forEach((U,H)=>{XS(ci,this.driver,new Set(U),l,Yd)}),li.forEach(U=>{let H=lo.get(U),J=ci.get(U);lo.set(U,new Map([...H?.entries()??[],...J?.entries()??[]]))});let _f=[],V_=[],j_={};s.forEach(U=>{let{element:H,player:J,instruction:ve}=U;if(r.has(H)){if(h.has(H)){J.onDestroy(()=>Yn(H,ve.toStyles)),J.disabled=!0,J.overrideTotalTime(ve.totalTime),i.push(J);return}let tt=j_;if(at.size>1){let Rt=H,Ar=[];for(;Rt=Rt.parentNode;){let Le=at.get(Rt);if(Le){tt=Le;break}Ar.push(Rt)}Ar.forEach(Le=>at.set(Le,tt))}let kn=this._buildAnimation(J.namespaceId,ve,De,o,ci,lo);if(J.setRealPlayer(kn),tt===j_)_f.push(J);else{let Rt=this.playersByElement.get(tt);Rt&&Rt.length&&(J.parentPlayer=ai(Rt)),i.push(J)}}else oo(H,ve.fromStyles),J.onDestroy(()=>Yn(H,ve.toStyles)),V_.push(J),h.has(H)&&i.push(J)}),V_.forEach(U=>{let H=o.get(U.element);if(H&&H.length){let J=ai(H);U.setRealPlayer(J)}}),i.forEach(U=>{U.parentPlayer?U.syncPlayerEvents(U.parentPlayer):U.destroy()});for(let U=0;U<D.length;U++){let H=D[U],J=H[An];if(Es(H,m_),J&&J.hasAnimation)continue;let ve=[];if(a.size){let kn=a.get(H);kn&&kn.length&&ve.push(...kn);let Rt=this.driver.query(H,g_,!0);for(let Ar=0;Ar<Rt.length;Ar++){let Le=a.get(Rt[Ar]);Le&&Le.length&&ve.push(...Le)}}let tt=ve.filter(kn=>!kn.destroyed);tt.length?VV(this,H,tt):this.processLeaveNode(H)}return D.length=0,_f.forEach(U=>{this.players.push(U),U.onDone(()=>{U.destroy();let H=this.players.indexOf(U);this.players.splice(H,1)}),U.play()}),_f}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,o){let s=[];if(e){let a=this.playersByQueriedElement.get(t);a&&(s=a)}else{let a=this.playersByElement.get(t);if(a){let l=!o||o==ll;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||s.push(c)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(t,e,r){let i=e.triggerName,o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:i;for(let l of e.timelines){let c=l.element,h=c!==o,p=Xt(r,c,[]);this._getPreviousPlayers(c,h,s,a,e.toState).forEach(g=>{let b=g.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),g.destroy(),p.push(g)})}oo(o,e.fromStyles)}_buildAnimation(t,e,r,i,o,s){let a=e.triggerName,l=e.element,c=[],h=new Set,p=new Set,_=e.timelines.map(b=>{let w=b.element;h.add(w);let D=w[An];if(D&&D.removedBeforeQueried)return new si(b.duration,b.delay);let P=w!==l,F=jV((r.get(w)||PV).map(De=>De.getRealPlayer())).filter(De=>{let at=De;return at.element?at.element===w:!1}),R=o.get(w),$=s.get(w),q=nD(this._normalizer,b.keyframes,R,$),Pe=this._buildPlayer(b,q,F);if(b.subTimeline&&i&&p.add(w),P){let De=new fl(t,a,w);De.setRealPlayer(Pe),c.push(De)}return Pe});c.forEach(b=>{Xt(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>RV(this.playersByQueriedElement,b.element,b))}),h.forEach(b=>mn(b,qS));let g=ai(_);return g.onDestroy(()=>{h.forEach(b=>Es(b,qS)),Yn(l,e.toStyles)}),p.forEach(b=>{Xt(i,b,[]).push(g)}),g}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new si(t.duration,t.delay)}},fl=class{namespaceId;triggerName;element;_player=new si;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,r)=>{e.forEach(i=>A_(t,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Xt(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function RV(n,t,e){let r=n.get(t);if(r){if(r.length){let i=r.indexOf(e);r.splice(i,1)}r.length==0&&n.delete(t)}return r}function FV(n){return n??null}function nf(n){return n&&n.nodeType===1}function LV(n){return n=="start"||n=="done"}function YS(n,t){let e=n.style.display;return n.style.display=t??"none",e}function XS(n,t,e,r,i){let o=[];e.forEach(l=>o.push(YS(l)));let s=[];r.forEach((l,c)=>{let h=new Map;l.forEach(p=>{let _=t.computeStyle(c,p,i);h.set(p,_),(!_||_.length==0)&&(c[An]=OV,s.push(c))}),n.set(c,h)});let a=0;return e.forEach(l=>YS(l,o[a++])),s}function eD(n,t){let e=new Map;if(n.forEach(a=>e.set(a,[])),t.length==0)return e;let r=1,i=new Set(t),o=new Map;function s(a){if(!a)return r;let l=o.get(a);if(l)return l;let c=a.parentNode;return e.has(c)?l=c:i.has(c)?l=r:l=s(c),o.set(a,l),l}return t.forEach(a=>{let l=s(a);l!==r&&e.get(l).push(a)}),e}function mn(n,t){n.classList?.add(t)}function Es(n,t){n.classList?.remove(t)}function VV(n,t,e){ai(e).onDone(()=>n.processLeaveNode(t))}function jV(n){let t=[];return hD(n,t),t}function hD(n,t){for(let e=0;e<n.length;e++){let r=n[e];r instanceof sl?hD(r.players,t):t.push(r)}}function UV(n,t){let e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){let o=e[i];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}function tD(n,t,e){let r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(o=>i.add(o)):t.set(n,r),e.delete(n),!0}var Ss=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,r){this._driver=e,this._normalizer=r,this._transitionEngine=new T_(t.body,e,r),this._timelineEngine=new x_(t.body,e,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(t,e,r,i,o){let s=t+"-"+i,a=this._triggerCache[s];if(!a){let l=[],c=[],h=cD(this._driver,o,l,c);if(l.length)throw UL(i,l);a=xV(i,h,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,i,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r){this._transitionEngine.removeNode(t,e,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if(r.charAt(0)=="@"){let[o,s]=HS(r),a=i;this._timelineEngine.command(o,e,s,a)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,o){if(r.charAt(0)=="@"){let[s,a]=HS(r);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,r,i,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function BV(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=p_(t[0]),t.length>1&&(r=p_(t[t.length-1]))):t instanceof Map&&(e=p_(t)),e||r?new $V(n,e,r):null}var $V=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Yn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Yn(this._element,this._initialStyles),this._endStyles&&(Yn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(oo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(oo(this._element,this._endStyles),this._endStyles=null),Yn(this._element,this._initialStyles),this._state=3)}}return n})();function p_(n){let t=null;return n.forEach((e,r)=>{HV(r)&&(t=t||new Map,t.set(r,e))}),t}function HV(n){return n==="display"||n==="position"}var ff=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(t,e,r){return t.animate(this._convertKeyframesToObject(e),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&t.set(i,this._finished?r:R_(this.element,i))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},hf=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return rD(t,e)}getParentElement(t){return N_(t)}query(t,e,r){return iD(t,e,r)}computeStyle(t,e,r){return R_(t,e)}animate(t,e,r,i,o,s=[]){let a=i==0?"both":"forwards",l={duration:r,delay:i,fill:a};o&&(l.easing=o);let c=new Map,h=s.filter(g=>g instanceof ff);lV(r,i)&&h.forEach(g=>{g.currentSnapshot.forEach((b,w)=>c.set(w,b))});let p=oV(e).map(g=>new Map(g));p=cV(t,p,c);let _=BV(t,p);return new ff(t,p,l,_)}};var rf="@",pD="@.disabled",pf=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,r,i){this.namespaceId=t,this.delegate=e,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){e.charAt(0)==rf&&e==pD?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r,i){return this.delegate.listen(t,e,r,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},M_=class extends pf{factory;constructor(t,e,r,i,o){super(e,r,i,o),this.factory=t,this.namespaceId=e}setProperty(t,e,r){e.charAt(0)==rf?e.charAt(1)=="."&&e==pD?(r=r===void 0?!0:!!r,this.disableAnimations(t,r)):this.engine.process(this.namespaceId,t,e.slice(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r,i){if(e.charAt(0)==rf){let o=zV(t),s=e.slice(1),a="";return s.charAt(0)!=rf&&([s,a]=qV(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,r,l)})}return this.delegate.listen(t,e,r,i)}};function zV(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function qV(n){let t=n.indexOf("."),e=n.substring(0,t),r=n.slice(t+1);return[e,r]}var mf=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,r){this.delegate=t,this.engine=e,this._zone=r,e.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(t,e){let r="",i=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let c=this._rendererCache,h=c.get(i);if(!h){let p=()=>c.delete(i);h=new pf(r,i,this.engine,p),c.set(i,h)}return h}let o=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,t);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,t,c.name,c)};return e.data.animation.forEach(a),new M_(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,r){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([e,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var GV=(()=>{class n extends Ss{constructor(e,r,i){super(e,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(O(Fe),O(so),O(ao))};static \u0275prov=k({token:n,factory:n.\u0275fac})}return n})();function QV(){return new af}function KV(n,t,e){return new mf(n,t,e)}var mD=[{provide:ao,useFactory:QV},{provide:Ss,useClass:GV},{provide:Br,useFactory:KV,deps:[wu,Ss,Te]}],ZV=[{provide:so,useFactory:()=>new hf},{provide:Wc,useValue:"BrowserAnimations"},...mD],ZG=[{provide:so,useClass:P_},{provide:Wc,useValue:"NoopAnimations"},...mD];function gD(){return jn("NgEagerAnimations"),[...ZV]}var _D={providers:[uw(),BC(US),Qw(Kw()),gD(),{provide:Xc,useFactory:n=>()=>n.loadSession(),deps:[ge],multi:!0}]};function JV(n,t){n&1&&(d(0,"div",5),L(1,"div",6),u())}function YV(n,t){n&1&&($n(0),L(1,"router-outlet"),Hn())}function XV(n,t){n&1&&(d(0,"span"),f(1,"Dashboard"),u())}function ej(n,t){n&1&&(d(0,"span"),f(1,"Morning Check-In"),u())}function tj(n,t){n&1&&(d(0,"span"),f(1,"Trades"),u())}function nj(n,t){n&1&&(d(0,"span"),f(1,"Meditation Hub"),u())}function rj(n,t){n&1&&(d(0,"span"),f(1,"Trade Accounts"),u())}function ij(n,t){n&1&&L(0,"div",39)}function oj(n,t){if(n&1&&($n(0),L(1,"div",37),M(2,ij,1,0,"div",38),Hn()),n&2){let e=v(4);m(2),y("ngIf",!e.sidebarCollapsed())}}function sj(n,t){if(n&1&&(d(0,"div"),L(1,"img",40),u()),n&2){let e=v(5);m(),ne("me-2",!e.sidebarCollapsed()),y("src",e.profile_image_blob_url,Un)}}function aj(n,t){n&1&&(d(0,"div"),L(1,"i",41),u())}function lj(n,t){if(n&1&&(d(0,"div"),f(1," \xA0\xA0 "),d(2,"p",42),f(3),u()()),n&2){let e=v(5);m(3),z("Welcome, ",e.user_firstname,"!")}}function cj(n,t){if(n&1&&M(0,sj,2,3,"div",20)(1,aj,2,0,"div",20)(2,lj,4,1,"div",20),n&2){let e=v(4);y("ngIf",e.profile_image_blob_url),m(),y("ngIf",!e.profile_image_blob_url),m(),y("ngIf",!e.sidebarCollapsed())}}function uj(n,t){n&1&&(d(0,"span"),f(1,"Logout\xA0\xA0\xA0"),u())}function dj(n,t){if(n&1){let e=ee();d(0,"div",43),C("click",function(){E(e);let i=v(4);return S(i.closeSidebar())}),u()}}function fj(n,t){if(n&1){let e=ee();d(0,"div",10)(1,"nav",11)(2,"div",12)(3,"div",13)(4,"button",14),C("click",function(){E(e);let i=v(3);return i.navigateToUrl("/home"),S(i.onNavLinkClick())}),L(5,"img",15),u(),d(6,"button",16),C("click",function(){E(e);let i=v(3);return S(i.closeSidebar())}),u()(),d(7,"div",17)(8,"a",18),C("click",function(){E(e);let i=v(3);return i.navigateToUrl("/home"),S(i.onNavLinkClick())}),L(9,"i",19),M(10,XV,2,0,"span",20),u(),d(11,"a",18),C("click",function(){E(e);let i=v(3);return i.navigateToUrl("/emotions"),S(i.onNavLinkClick())}),L(12,"i",21),M(13,ej,2,0,"span",20),u(),d(14,"a",18),C("click",function(){E(e);let i=v(3);return i.navigateToUrl("/tradejournal"),S(i.onNavLinkClick())}),L(15,"i",22),M(16,tj,2,0,"span",20),u(),d(17,"a",18),C("click",function(){E(e);let i=v(3);return i.navigateToUrl("/meditationhub"),S(i.onNavLinkClick())}),L(18,"i",23),M(19,nj,2,0,"span",20),u(),d(20,"a",18),C("click",function(){E(e);let i=v(3);return i.navigateToUrl("/tradeaccounts"),S(i.onNavLinkClick())}),L(21,"i",24),M(22,rj,2,0,"span",20),u()()(),d(23,"div",25)(24,"div",26),C("click",function(){E(e);let i=v(3);return S(i.onNavLinkClick())}),M(25,oj,3,1,"ng-container",7)(26,cj,3,3,"ng-template",null,3,zt),u(),d(28,"button",27),C("click",function(){E(e);let i=v(3);return S(i.logOut())}),M(29,uj,2,0,"span",20),L(30,"i",28),u()()(),M(31,dj,1,0,"div",29),d(32,"div",30)(33,"nav",31)(34,"div",32)(35,"div",33)(36,"button",34),C("click",function(){E(e);let i=v(3);return S(i.toggleSidebar())}),L(37,"span",35),u()()()(),d(38,"div",36),L(39,"router-outlet"),u()()()}if(n&2){let e=bt(27),r=v(3);m(),ne("collapsed",r.sidebarCollapsed()),m(4),Bn("height",r.sidebarCollapsed()?"40px":"90px"),m(3),ne("active",r.isActiveRoute("/home")),y("title",r.sidebarCollapsed()?"Dashboard":""),m(),ne("me-3",!r.sidebarCollapsed()),m(),y("ngIf",!r.sidebarCollapsed()),m(),ne("active",r.isActiveRoute("/emotions")),y("title",r.sidebarCollapsed()?"Morning Check-In":""),m(),ne("me-3",!r.sidebarCollapsed()),m(),y("ngIf",!r.sidebarCollapsed()),m(),ne("active",r.isActiveRoute("/tradejournal")),y("title",r.sidebarCollapsed()?"Trades":""),m(),ne("me-3",!r.sidebarCollapsed()),m(),y("ngIf",!r.sidebarCollapsed()),m(),ne("active",r.isActiveRoute("/meditationhub")),y("title",r.sidebarCollapsed()?"Meditation Hub":""),m(),ne("me-3",!r.sidebarCollapsed()),m(),y("ngIf",!r.sidebarCollapsed()),m(),ne("active",r.isActiveRoute("/tradeaccounts")),y("title",r.sidebarCollapsed()?"Trade Accounts":""),m(),ne("me-3",!r.sidebarCollapsed()),m(),y("ngIf",!r.sidebarCollapsed()),m(2),ne("justify-content-center",r.sidebarCollapsed()),m(),y("ngIf",r.loadingProfile)("ngIfElse",e),m(3),y("title",r.sidebarCollapsed()?"Logout":""),m(),y("ngIf",!r.sidebarCollapsed()),m(2),y("ngIf",r.isMobile()&&!r.sidebarCollapsed()),m(),ne("expanded",r.sidebarCollapsed())}}function hj(n,t){n&1&&L(0,"router-outlet")}function pj(n,t){if(n&1&&M(0,fj,40,43,"div",9)(1,hj,1,0,"ng-template",null,2,zt),n&2){let e=bt(2),r=v(2);y("ngIf",r.loginStatus())("ngIfElse",e)}}function mj(n,t){if(n&1&&(M(0,YV,2,0,"ng-container",7)(1,pj,3,2,"ng-template",null,1,zt),d(3,"footer",8),f(4,"\xA9 2025 Trading Rehab AI. All rights reserved."),u()),n&2){let e=bt(2),r=v();y("ngIf",r.isAuthRoute())("ngIfElse",e)}}var gf=class n{constructor(t,e,r,i,o,s,a){this.cdr=t;this.supabaseService=e;this.supabaseAuthService=r;this.supabaseAccountService=i;this.router=o;this.route=s;this.platformId=a;Wr(()=>{this.loginStatus()&&(this.route.queryParams.subscribe(l=>{let c=l.returnUrl;c?this.router.navigate([c]):(this.router.url==="/auth/login"||this.router.url==="/auth/signup")&&this.router.navigate(["/home"])}),this.loadUserProfile())})}loginStatus=et(()=>this.supabaseService.loginStatus());sidebarCollapsed=j(!1);profile_image_blob_url=null;user_firstname="";loadingProfile=!0;resizeObserver;async ngOnInit(){wr(this.platformId)&&(this.resizeObserver=new ResizeObserver(()=>this.cdr.detectChanges()),this.resizeObserver.observe(document.body))}ngOnDestroy(){this.resizeObserver&&this.resizeObserver.disconnect()}async loadUserProfile(){try{this.loadingProfile=!0;let{data:t}=await this.supabaseAccountService.getProfile();t&&(this.user_firstname=t.firstname,t.profile_picture_url&&(this.profile_image_blob_url=await this.supabaseAccountService.getCachedProfilePictureBlobUrl(t.profile_picture_url)))}finally{this.loadingProfile=!1,this.cdr.markForCheck()}}isAuthRoute(){return["/auth/forgot-password","/auth/update-password","/auth/login","/auth/signup"].some(e=>this.router.url.startsWith(e))}async logOut(){await this.supabaseAuthService.logout(),this.router.navigateByUrl("/auth/login")}toggleSidebar(){this.sidebarCollapsed.update(t=>!t),this.cdr.detectChanges()}navigateToUrl(t){this.router.navigateByUrl(t)}onNavLinkClick(){this.isMobile()&&this.closeSidebar()}isActiveRoute(t){return this.router.url===t||this.router.url.startsWith(t+"/")}isMobile(){return wr(this.platformId)&&window.innerWidth<768}closeSidebar(){this.sidebarCollapsed.set(!0),this.cdr.detectChanges()}static \u0275fac=function(e){return new(e||n)(T(ke),T(ge),T(oi),T(pn),T(Ue),T(Ct),T(dt))};static \u0275cmp=X({type:n,selectors:[["app-root"]],decls:3,vars:2,consts:[["appContent",""],["appLayout",""],["publicLayout",""],["profileLoaded",""],["class","d-flex justify-content-center align-items-center vh-100",4,"ngIf","ngIfElse"],[1,"d-flex","justify-content-center","align-items-center","vh-100"],[1,"spinner-border","text-primary"],[4,"ngIf","ngIfElse"],["align","center",1,"m-5"],["class","sidebar-container",4,"ngIf","ngIfElse"],[1,"sidebar-container"],["id","sidebar",1,"d-flex","flex-column","h-100"],[1,"p-3","flex-grow-1"],[1,"mb-3","d-flex","align-items-center"],[1,"text-decoration-none","me-auto","btn","btn-link","p-0","me-3",3,"click"],["src","/tr_logo.svg",1,"img-fluid"],["type","button",1,"btn-close","d-md-none",3,"click"],[1,"nav","flex-column"],[1,"nav-link",3,"click","title"],[1,"bi","bi-columns-gap"],[4,"ngIf"],[1,"bi","bi-brightness-high"],[1,"bi","bi-bookmark-check"],[1,"bi","bi-person-arms-up"],[1,"bi","bi-journals"],[1,"p-3","border-top","mt-auto"],["routerLink","/useraccount",1,"d-flex","align-items-center","mb-2",2,"cursor","pointer",3,"click"],[1,"btn","btn-outline-secondary","btn-tr","w-100",3,"click","title"],[1,"bi","bi-box-arrow-right"],["class","sidebar-overlay",3,"click",4,"ngIf"],[1,"content"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid"],[1,"d-flex","align-items-center"],[1,"btn","me-2",3,"click"],[1,"navbar-toggler-icon"],[1,"container-fluid","ps-3"],[1,"skeleton-avatar","me-2"],["class","skeleton-text",4,"ngIf"],[1,"skeleton-text"],["alt","Profile",1,"rounded-circle",2,"width","40px","height","40px","object-fit","cover",3,"src"],[1,"bi","bi-person-circle","text-black",2,"font-size","30px"],[1,"text-black","mb-0"],[1,"sidebar-overlay",3,"click"]],template:function(e,r){if(e&1&&M(0,JV,2,0,"div",4)(1,mj,5,2,"ng-template",null,0,zt),e&2){let i=bt(2);y("ngIf",r.supabaseService.sessionLoading())("ngIfElse",i)}},dependencies:[ie,ye,cg,Nt],styles:[".sidebar-container[_ngcontent-%COMP%]{display:flex;position:relative}#sidebar[_ngcontent-%COMP%]{width:250px;position:fixed;top:0;left:0;height:100dvh;z-index:999;background:#f8f9facc;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease-in-out;box-shadow:0 0 15px #0000001a;border-right:1px solid rgba(0,0,0,.05)}#sidebar.collapsed[_ngcontent-%COMP%]{width:88px}.content[_ngcontent-%COMP%]{width:calc(100% - 250px);margin-left:250px;transition:all .3s ease-in-out;min-height:100dvh;background-color:transparent}.content.expanded[_ngcontent-%COMP%]{width:calc(100% - 88px);margin-left:88px}@media (max-width: 768px){#sidebar[_ngcontent-%COMP%]{margin-left:-250px}#sidebar[_ngcontent-%COMP%]:not(.collapsed){margin-left:0}#sidebar.collapsed[_ngcontent-%COMP%]{margin-left:-250px}.content[_ngcontent-%COMP%], .content.expanded[_ngcontent-%COMP%]{width:100%;margin-left:0}}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 20px;color:#343a40;cursor:pointer;text-decoration:none;border-radius:12px;margin:4px 12px;font-weight:500;transition:background-color .2s ease,color .2s ease}.nav-link[_ngcontent-%COMP%]:hover{background-color:#e9ecef;color:#000}.nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,#634aff,#9932ff);color:#fff!important;font-weight:600;box-shadow:0 4px 12px #634aff4d}.nav-link.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff!important}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:center;padding:0;margin:8px auto;width:52px;height:52px;border-radius:14px}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0!important;font-size:1.4em}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,#634aff,#9932ff);color:#fff;box-shadow:0 2px 8px #0003}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background-color:#dee2e6}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:hover{background:#495057}.navbar[_ngcontent-%COMP%]{padding:15px 10px}.sidebar-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:998}.btn-tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.skeleton-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(90deg,#e0e0e0 25%,#f0f0f0,#e0e0e0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.2s infinite}.skeleton-text[_ngcontent-%COMP%]{width:120px;height:16px;border-radius:4px;background:linear-gradient(90deg,#e0e0e0 25%,#f0f0f0,#e0e0e0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.2s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}"]})};iC(gf,_D).catch(n=>console.error(n));
