import{b as Hv,c as zv,f as bD,g as qv}from"./chunk-65CJINC2.js";import{a as k,b as B,c as ao,e as Xn,g as _D,h as yD}from"./chunk-VOSPIT4N.js";var Ig=Xn(Dg=>{"use strict";Object.defineProperty(Dg,"__esModule",{value:!0});var Sg=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Dg.default=Sg});var Tg=Xn(Ma=>{"use strict";var eE=Ma&&Ma.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ma,"__esModule",{value:!0});var TO=eE((qv(),yD(bD))),MO=eE(Ig()),xg=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=TO.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var s,a,l;let c=null,f=null,p=null,v=o.status,g=o.statusText;if(o.ok){if(this.method!=="HEAD"){let N=await o.text();N===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=N:f=JSON.parse(N))}let w=(s=this.headers.Prefer)===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),E=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");w&&E&&E.length>1&&(p=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(c={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,v=406,g="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{let w=await o.text();try{c=JSON.parse(w),Array.isArray(c)&&o.status===404&&(f=[],c=null,v=200,g="OK")}catch{o.status===404&&w===""?(v=204,g="No Content"):c={message:w}}if(c&&this.isMaybeSingle&&(!((l=c?.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,v=200,g="OK"),c&&this.shouldThrowOnError)throw new MO.default(c)}return{error:c,data:f,count:p,status:v,statusText:g}});return this.shouldThrowOnError||(i=i.catch(o=>{var s,a,l;return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:`${(a=o?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}};Ma.default=xg});var Ag=Xn(Aa=>{"use strict";var AO=Aa&&Aa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Aa,"__esModule",{value:!0});var kO=AO(Tg()),Mg=class extends kO.default{select(t){let e=!1,r=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){let s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:i=r}={}){let o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var a;let l=[t?"analyze":null,e?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${c}"; options=${l};`,s==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Aa.default=Mg});var Bu=Xn(ka=>{"use strict";var NO=ka&&ka.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ka,"__esModule",{value:!0});var PO=NO(Ag()),kg=class extends PO.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");let s=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};ka.default=kg});var Pg=Xn(Pa=>{"use strict";var OO=Pa&&Pa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Pa,"__esModule",{value:!0});var Na=OO(Bu()),Ng=class{constructor(t,{headers:e={},schema:r,fetch:i}){this.url=t,this.headers=e,this.schema=r,this.fetch=i}select(t,{head:e=!1,count:r}={}){let i=e?"HEAD":"GET",o=!1,s=(t??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",s),r&&(this.headers.Prefer=`count=${r}`),new Na.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:r=!0}={}){let i="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),e&&o.push(`count=${e}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){let s=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(s.length>0){let a=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Na.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){let s="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){let l=t.reduce((c,f)=>c.concat(Object.keys(f)),[]);if(l.length>0){let c=[...new Set(l)].map(f=>`"${f}"`);this.url.searchParams.set("columns",c.join(","))}}return new Na.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),e&&i.push(`count=${e}`),this.headers.Prefer=i.join(","),new Na.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Na.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Pa.default=Ng});var tE=Xn($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.version=void 0;$u.version="0.0.0-automated"});var nE=Xn(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.DEFAULT_HEADERS=void 0;var RO=tE();Hu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${RO.version}`}});var iE=Xn(Oa=>{"use strict";var rE=Oa&&Oa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Oa,"__esModule",{value:!0});var FO=rE(Pg()),LO=rE(Bu()),VO=nE(),Og=class n{constructor(t,{headers:e={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},VO.DEFAULT_HEADERS),e),this.schemaName=r,this.fetch=i}from(t){let e=new URL(`${this.url}/${t}`);return new FO.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:i=!1,count:o}={}){let s,a=new URL(`${this.url}/rpc/${t}`),l;r||i?(s=r?"HEAD":"GET",Object.entries(e).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{a.searchParams.append(f,p)})):(s="POST",l=e);let c=Object.assign({},this.headers);return o&&(c.Prefer=`count=${o}`),new LO.default({method:s,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Oa.default=Og});var dE=Xn(ot=>{"use strict";var Jo=ot&&ot.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ot,"__esModule",{value:!0});ot.PostgrestError=ot.PostgrestBuilder=ot.PostgrestTransformBuilder=ot.PostgrestFilterBuilder=ot.PostgrestQueryBuilder=ot.PostgrestClient=void 0;var oE=Jo(iE());ot.PostgrestClient=oE.default;var sE=Jo(Pg());ot.PostgrestQueryBuilder=sE.default;var aE=Jo(Bu());ot.PostgrestFilterBuilder=aE.default;var lE=Jo(Ag());ot.PostgrestTransformBuilder=lE.default;var cE=Jo(Tg());ot.PostgrestBuilder=cE.default;var uE=Jo(Ig());ot.PostgrestError=uE.default;ot.default={PostgrestClient:oE.default,PostgrestQueryBuilder:sE.default,PostgrestFilterBuilder:aE.default,PostgrestTransformBuilder:lE.default,PostgrestBuilder:cE.default,PostgrestError:uE.default}});function Gv(n,t){return Object.is(n,t)}var Ke=null,ws=!1,bf=1,St=Symbol("SIGNAL");function ge(n){let t=Ke;return Ke=n,t}function Qv(){return Ke}function wD(){return ws}var hi={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function dl(n){if(ws)throw new Error("");if(Ke===null)return;Ke.consumerOnSignalRead(n);let t=Ke.nextProducerIndex++;if(hl(Ke),t<Ke.producerNode.length&&Ke.producerNode[t]!==n&&Cs(Ke)){let e=Ke.producerNode[t];fl(e,Ke.producerIndexOfThis[t])}Ke.producerNode[t]!==n&&(Ke.producerNode[t]=n,Ke.producerIndexOfThis[t]=Cs(Ke)?Xv(n,Ke,t):0),Ke.producerLastReadVersion[t]=n.version}function CD(){bf++}function Kv(n){if(!(Cs(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===bf)){if(!n.producerMustRecompute(n)&&!Ss(n)){Wv(n);return}n.producerRecomputeValue(n),Wv(n)}}function Zv(n){if(n.liveConsumerNode===void 0)return;let t=ws;ws=!0;try{for(let e of n.liveConsumerNode)e.dirty||Jv(e)}finally{ws=t}}function Yv(){return Ke?.consumerAllowSignalWrites!==!1}function Jv(n){n.dirty=!0,Zv(n),n.consumerMarkedDirty?.(n)}function Wv(n){n.dirty=!1,n.lastCleanEpoch=bf}function lo(n){return n&&(n.nextProducerIndex=0),ge(n)}function Es(n,t){if(ge(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Cs(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)fl(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ss(n){hl(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],r=n.producerLastReadVersion[t];if(r!==e.version||(Kv(e),r!==e.version))return!0}return!1}function co(n){if(hl(n),Cs(n))for(let t=0;t<n.producerNode.length;t++)fl(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Xv(n,t,e){if(e_(n),n.liveConsumerNode.length===0&&t_(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Xv(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function fl(n,t){if(e_(n),n.liveConsumerNode.length===1&&t_(n))for(let r=0;r<n.producerNode.length;r++)fl(n.producerNode[r],n.producerIndexOfThis[r]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[t],i=n.liveConsumerNode[t];hl(i),i.producerIndexOfThis[r]=t}}function Cs(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function hl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function e_(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function t_(n){return n.producerNode!==void 0}function n_(n){let t=Object.create(ED);t.computation=n;let e=()=>{if(Kv(t),dl(t),t.value===ul)throw t.error;return t.value};return e[St]=t,e}var vf=Symbol("UNSET"),_f=Symbol("COMPUTING"),ul=Symbol("ERRORED"),ED=B(k({},hi),{value:vf,dirty:!0,error:null,equal:Gv,kind:"computed",producerMustRecompute(n){return n.value===vf||n.value===_f},producerRecomputeValue(n){if(n.value===_f)throw new Error("Detected cycle in computations.");let t=n.value;n.value=_f;let e=lo(n),r,i=!1;try{r=n.computation(),ge(null),i=t!==vf&&t!==ul&&r!==ul&&n.equal(t,r)}catch(o){r=ul,n.error=o}finally{Es(n,e)}if(i){n.value=t;return}n.value=r,n.version++}});function SD(){throw new Error}var r_=SD;function i_(){r_()}function o_(n){r_=n}var DD=null;function s_(n){let t=Object.create(wf);t.value=n;let e=()=>(dl(t),t.value);return e[St]=t,e}function pl(n,t){Yv()||i_(),n.equal(n.value,t)||(n.value=t,ID(n))}function a_(n,t){Yv()||i_(),pl(n,t(n.value))}var wf=B(k({},hi),{equal:Gv,value:void 0,kind:"signal"});function ID(n){n.version++,CD(),Zv(n),DD?.()}function l_(n,t,e){let r=Object.create(xD);e&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=t;let i=l=>{r.cleanupFn=l};function o(l){return l.fn===null&&l.schedule===null}function s(l){o(l)||(co(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=yf)}let a=()=>{if(r.fn===null)return;if(wD())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Ss(r))return;r.hasRun=!0;let l=lo(r);try{r.cleanupFn(),r.cleanupFn=yf,r.fn(i)}finally{Es(r,l)}};return r.ref={notify:()=>Jv(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[St]:r},r.ref}var yf=()=>{},xD=B(k({},hi),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:yf});function X(n){return typeof n=="function"}function uo(n){let e=n(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var ml=uo(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function pi(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Ne=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){t=o instanceof ml?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{c_(o)}catch(s){t=t??[],s instanceof ml?t=[...t,...s.errors]:t.push(s)}}if(t)throw new ml(t)}}add(t){var e;if(t&&t!==this)if(this.closed)c_(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&pi(e,t)}remove(t){let{_finalizers:e}=this;e&&pi(e,t),t instanceof n&&t._removeParent(this)}};Ne.EMPTY=(()=>{let n=new Ne;return n.closed=!0,n})();var Cf=Ne.EMPTY;function gl(n){return n instanceof Ne||n&&"closed"in n&&X(n.remove)&&X(n.add)&&X(n.unsubscribe)}function c_(n){X(n)?n():n.unsubscribe()}var hn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fo={setTimeout(n,t,...e){let{delegate:r}=fo;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=fo;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function vl(n){fo.setTimeout(()=>{let{onUnhandledError:t}=hn;if(t)t(n);else throw n})}function Ds(){}var u_=Ef("C",void 0,void 0);function d_(n){return Ef("E",void 0,n)}function f_(n){return Ef("N",n,void 0)}function Ef(n,t,e){return{kind:n,value:t,error:e}}var mi=null;function ho(n){if(hn.useDeprecatedSynchronousErrorHandling){let t=!mi;if(t&&(mi={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:r}=mi;if(mi=null,e)throw r}}else n()}function h_(n){hn.useDeprecatedSynchronousErrorHandling&&mi&&(mi.errorThrown=!0,mi.error=n)}var gi=class extends Ne{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,gl(t)&&t.add(this)):this.destination=AD}static create(t,e,r){return new er(t,e,r)}next(t){this.isStopped?Df(f_(t),this):this._next(t)}error(t){this.isStopped?Df(d_(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Df(u_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},TD=Function.prototype.bind;function Sf(n,t){return TD.call(n,t)}var If=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){_l(r)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){_l(r)}else _l(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){_l(e)}}},er=class extends gi{constructor(t,e,r){super();let i;if(X(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&hn.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Sf(t.next,o),error:t.error&&Sf(t.error,o),complete:t.complete&&Sf(t.complete,o)}):i=t}this.destination=new If(i)}};function _l(n){hn.useDeprecatedSynchronousErrorHandling?h_(n):vl(n)}function MD(n){throw n}function Df(n,t){let{onStoppedNotification:e}=hn;e&&fo.setTimeout(()=>e(n,t))}var AD={closed:!0,next:Ds,error:MD,complete:Ds};var po=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ft(n){return n}function xf(...n){return Tf(n)}function Tf(n){return n.length===0?Ft:n.length===1?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}var he=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){let o=ND(e)?e:new er(e,r,i);return ho(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=p_(r),new r((i,o)=>{let s=new er({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[po](){return this}pipe(...e){return Tf(e)(this)}toPromise(e){return e=p_(e),new e((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function p_(n){var t;return(t=n??hn.Promise)!==null&&t!==void 0?t:Promise}function kD(n){return n&&X(n.next)&&X(n.error)&&X(n.complete)}function ND(n){return n&&n instanceof gi||kD(n)&&gl(n)}function Mf(n){return X(n?.lift)}function le(n){return t=>{if(Mf(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(n,t,e,r,i){return new Af(n,t,e,r,i)}var Af=class extends gi{constructor(t,e,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function mo(){return le((n,t)=>{let e=null;n._refCount++;let r=ce(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let i=n._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}var go=class extends he{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Mf(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ne;let e=this.getSubject();t.add(this.source.subscribe(ce(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ne.EMPTY)}return t}refCount(){return mo()(this)}};var m_=uo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new yl(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new m_}next(e){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Cf:(this.currentObservers=null,o.push(e),new Ne(()=>{this.currentObservers=null,pi(o,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){let e=new he;return e.source=this,e}}return n.create=(t,e)=>new yl(t,e),n})(),yl=class extends Pe{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,t)}error(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&r!==void 0?r:Cf}};var rt=class extends Pe{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var kf={now(){return(kf.delegate||Date).now()},delegate:void 0};var bl=class extends Ne{constructor(t,e){super()}schedule(t,e=0){return this}};var Is={setInterval(n,t,...e){let{delegate:r}=Is;return r?.setInterval?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=Is;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var wl=class extends bl{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,r=0){return Is.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return e;e!=null&&Is.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,e);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,pi(r,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var vo=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}};vo.now=kf.now;var Cl=class extends vo{constructor(t,e=vo.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}};var g_=new Cl(wl);var Dt=new he(n=>n.complete());function v_(n){return n&&X(n.schedule)}function __(n){return n[n.length-1]}function El(n){return X(__(n))?n.pop():void 0}function kr(n){return v_(__(n))?n.pop():void 0}function b_(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{c(r.next(f))}catch(p){s(p)}}function l(f){try{c(r.throw(f))}catch(p){s(p)}}function c(f){f.done?o(f.value):i(f.value).then(a,l)}c((r=r.apply(n,t||[])).next())})}function y_(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vi(n){return this instanceof vi?(this.v=n,this):new vi(n)}function w_(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(y){return Promise.resolve(y).then(g,p)}}function a(g,y){r[g]&&(i[g]=function(w){return new Promise(function(E,N){o.push([g,w,E,N])>1||l(g,w)})},y&&(i[g]=y(i[g])))}function l(g,y){try{c(r[g](y))}catch(w){v(o[0][3],w)}}function c(g){g.value instanceof vi?Promise.resolve(g.value.v).then(f,p):v(o[0][2],g)}function f(g){l("next",g)}function p(g){l("throw",g)}function v(g,y){g(y),o.shift(),o.length&&l(o[0][0],o[0][1])}}function C_(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof y_=="function"?y_(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var Sl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Dl(n){return X(n?.then)}function Il(n){return X(n[po])}function xl(n){return Symbol.asyncIterator&&X(n?.[Symbol.asyncIterator])}function Tl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function PD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ml=PD();function Al(n){return X(n?.[Ml])}function kl(n){return w_(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:r,done:i}=yield vi(e.read());if(i)return yield vi(void 0);yield yield vi(r)}}finally{e.releaseLock()}})}function Nl(n){return X(n?.getReader)}function Fe(n){if(n instanceof he)return n;if(n!=null){if(Il(n))return OD(n);if(Sl(n))return RD(n);if(Dl(n))return FD(n);if(xl(n))return E_(n);if(Al(n))return LD(n);if(Nl(n))return VD(n)}throw Tl(n)}function OD(n){return new he(t=>{let e=n[po]();if(X(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function RD(n){return new he(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function FD(n){return new he(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,vl)})}function LD(n){return new he(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function E_(n){return new he(t=>{jD(n,t).catch(e=>t.error(e))})}function VD(n){return E_(kl(n))}function jD(n,t){var e,r,i,o;return b_(this,void 0,void 0,function*(){try{for(e=C_(n);r=yield e.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})}function It(n,t,e,r=0,i=!1){let o=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Pl(n,t=0){return le((e,r)=>{e.subscribe(ce(r,i=>It(r,n,()=>r.next(i),t),()=>It(r,n,()=>r.complete(),t),i=>It(r,n,()=>r.error(i),t)))})}function Ol(n,t=0){return le((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function S_(n,t){return Fe(n).pipe(Ol(t),Pl(t))}function D_(n,t){return Fe(n).pipe(Ol(t),Pl(t))}function I_(n,t){return new he(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function x_(n,t){return new he(e=>{let r;return It(e,t,()=>{r=n[Ml](),It(e,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){e.error(s);return}o?e.complete():e.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function Rl(n,t){if(!n)throw new Error("Iterable cannot be null");return new he(e=>{It(e,t,()=>{let r=n[Symbol.asyncIterator]();It(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function T_(n,t){return Rl(kl(n),t)}function M_(n,t){if(n!=null){if(Il(n))return S_(n,t);if(Sl(n))return I_(n,t);if(Dl(n))return D_(n,t);if(xl(n))return Rl(n,t);if(Al(n))return x_(n,t);if(Nl(n))return T_(n,t)}throw Tl(n)}function Le(n,t){return t?M_(n,t):Fe(n)}function z(...n){let t=kr(n);return Le(n,t)}function Nr(n,t){let e=X(n)?n:()=>n,r=i=>i.error(e());return new he(t?i=>t.schedule(r,0,i):r)}function Nf(n){return!!n&&(n instanceof he||X(n.lift)&&X(n.subscribe))}var tr=uo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function q(n,t){return le((e,r)=>{let i=0;e.subscribe(ce(r,o=>{r.next(n.call(t,o,i++))}))})}var{isArray:UD}=Array;function BD(n,t){return UD(t)?n(...t):n(t)}function Fl(n){return q(t=>BD(n,t))}var{isArray:$D}=Array,{getPrototypeOf:HD,prototype:zD,keys:qD}=Object;function Ll(n){if(n.length===1){let t=n[0];if($D(t))return{args:t,keys:null};if(WD(t)){let e=qD(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}function WD(n){return n&&typeof n=="object"&&HD(n)===zD}function Vl(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function _o(...n){let t=kr(n),e=El(n),{args:r,keys:i}=Ll(n);if(r.length===0)return Le([],t);let o=new he(GD(r,t,i?s=>Vl(i,s):Ft));return e?o.pipe(Fl(e)):o}function GD(n,t,e=Ft){return r=>{A_(t,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)A_(t,()=>{let c=Le(n[l],t),f=!1;c.subscribe(ce(r,p=>{o[l]=p,f||(f=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function A_(n,t,e){n?It(e,n,t):t()}function k_(n,t,e,r,i,o,s,a){let l=[],c=0,f=0,p=!1,v=()=>{p&&!l.length&&!c&&t.complete()},g=w=>c<r?y(w):l.push(w),y=w=>{o&&t.next(w),c++;let E=!1;Fe(e(w,f++)).subscribe(ce(t,N=>{i?.(N),o?g(N):t.next(N)},()=>{E=!0},void 0,()=>{if(E)try{for(c--;l.length&&c<r;){let N=l.shift();s?It(t,s,()=>y(N)):y(N)}v()}catch(N){t.error(N)}}))};return n.subscribe(ce(t,g,()=>{p=!0,v()})),()=>{a?.()}}function Ze(n,t,e=1/0){return X(t)?Ze((r,i)=>q((o,s)=>t(r,o,i,s))(Fe(n(r,i))),e):(typeof t=="number"&&(e=t),le((r,i)=>k_(r,i,n,e)))}function Pf(n=1/0){return Ze(Ft,n)}function N_(){return Pf(1)}function Pr(...n){return N_()(Le(n,kr(n)))}function jl(n){return new he(t=>{Fe(n()).subscribe(t)})}function xs(...n){let t=El(n),{args:e,keys:r}=Ll(n),i=new he(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let f=0;f<s;f++){let p=!1;Fe(e[f]).subscribe(ce(o,v=>{p||(p=!0,c--),a[f]=v},()=>l--,void 0,()=>{(!l||!p)&&(c||o.next(r?Vl(r,a):a),o.complete())}))}});return t?i.pipe(Fl(t)):i}function vt(n,t){return le((e,r)=>{let i=0;e.subscribe(ce(r,o=>n.call(t,o,i++)&&r.next(o)))})}function kn(n){return le((t,e)=>{let r=null,i=!1,o;r=t.subscribe(ce(e,void 0,void 0,s=>{o=Fe(n(s,kn(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function P_(n,t,e,r,i){return(o,s)=>{let a=e,l=t,c=0;o.subscribe(ce(s,f=>{let p=c++;l=a?n(l,f,p):(a=!0,f),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function Or(n,t){return X(t)?Ze(n,t,1):Ze(n,1)}function Of(n,t=g_){return le((e,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let c=o;o=null,r.next(c)}};function l(){let c=s+n,f=t.now();if(f<c){i=this.schedule(void 0,c-f),r.add(i);return}a()}e.subscribe(ce(r,c=>{o=c,s=t.now(),i||(i=t.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Rr(n){return le((t,e)=>{let r=!1;t.subscribe(ce(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function Lt(n){return n<=0?()=>Dt:le((t,e)=>{let r=0;t.subscribe(ce(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function Ul(n=QD){return le((t,e)=>{let r=!1;t.subscribe(ce(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function QD(){return new tr}function nr(n){return le((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function rr(n,t){let e=arguments.length>=2;return r=>r.pipe(n?vt((i,o)=>n(i,o,r)):Ft,Lt(1),e?Rr(t):Ul(()=>new tr))}function yo(n){return n<=0?()=>Dt:le((t,e)=>{let r=[];t.subscribe(ce(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function Rf(n,t){let e=arguments.length>=2;return r=>r.pipe(n?vt((i,o)=>n(i,o,r)):Ft,yo(1),e?Rr(t):Ul(()=>new tr))}function Ff(n,t){return le(P_(n,t,arguments.length>=2,!0))}function Vf(n={}){let{connector:t=()=>new Pe,resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,l,c=0,f=!1,p=!1,v=()=>{a?.unsubscribe(),a=void 0},g=()=>{v(),s=l=void 0,f=p=!1},y=()=>{let w=s;g(),w?.unsubscribe()};return le((w,E)=>{c++,!p&&!f&&v();let N=l=l??t();E.add(()=>{c--,c===0&&!p&&!f&&(a=Lf(y,i))}),N.subscribe(E),!s&&c>0&&(s=new er({next:F=>N.next(F),error:F=>{p=!0,v(),a=Lf(g,e,F),N.error(F)},complete:()=>{f=!0,v(),a=Lf(g,r),N.complete()}}),Fe(w).subscribe(s))})(o)}}function Lf(n,t,...e){if(t===!0){n();return}if(t===!1)return;let r=new er({next:()=>{r.unsubscribe(),n()}});return Fe(t(...e)).subscribe(r)}function jf(n){return vt((t,e)=>n<=e)}function Ts(...n){let t=kr(n);return le((e,r)=>{(t?Pr(n,e,t):Pr(n,e)).subscribe(r)})}function Vt(n,t){return le((e,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();e.subscribe(ce(r,l=>{i?.unsubscribe();let c=0,f=o++;Fe(n(l,f)).subscribe(i=ce(r,p=>r.next(t?t(l,p,f,c++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ms(n){return le((t,e)=>{Fe(n).subscribe(ce(e,()=>e.complete(),Ds)),!e.closed&&t.subscribe(e)})}function je(n,t,e){let r=X(n)||t||e?{next:n,error:t,complete:e}:n;return r?le((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ce(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Ft}var by="https://g.co/ng/security#xss",T=class extends Error{code;constructor(t,e){super(xc(t,e)),this.code=t}};function xc(n,t){return`${`NG0${Math.abs(n)}`}${t?": "+t:""}`}var wy=Symbol("InputSignalNode#UNSET"),KD=B(k({},wf),{transformFn:void 0,applyValueToInputSignal(n,t){pl(n,t)}});function Cy(n,t){let e=Object.create(KD);e.value=n,e.transformFn=t?.transform;function r(){if(dl(e),e.value===wy)throw new T(-950,!1);return e.value}return r[St]=e,r}function zs(n){return{toString:n}.toString()}var Bl="__parameters__";function ZD(n){return function(...e){if(n){let r=n(...e);for(let i in r)this[i]=r[i]}}}function Ey(n,t,e){return zs(()=>{let r=ZD(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,c,f){let p=l.hasOwnProperty(Bl)?l[Bl]:Object.defineProperty(l,Bl,{value:[]})[Bl];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),l}}return e&&(i.prototype=Object.create(e.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var ir=globalThis;function Ie(n){for(let t in n)if(n[t]===Ie)return t;throw Error("Could not find renamed property on target object.")}function YD(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function yt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(yt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let t=n.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function Jf(n,t){return n==null||n===""?t===null?"":t:t==null||t===""?n:n+" "+t}var JD=Ie({__forward_ref__:Ie});function tn(n){return n.__forward_ref__=tn,n.toString=function(){return yt(this())},n}function _t(n){return Sy(n)?n():n}function Sy(n){return typeof n=="function"&&n.hasOwnProperty(JD)&&n.__forward_ref__===tn}function M(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ye(n){return{providers:n.providers||[],imports:n.imports||[]}}function Tc(n){return O_(n,Iy)||O_(n,xy)}function Dy(n){return Tc(n)!==null}function O_(n,t){return n.hasOwnProperty(t)?n[t]:null}function XD(n){let t=n&&(n[Iy]||n[xy]);return t||null}function R_(n){return n&&(n.hasOwnProperty(F_)||n.hasOwnProperty(eI))?n[F_]:null}var Iy=Ie({\u0275prov:Ie}),F_=Ie({\u0275inj:Ie}),xy=Ie({ngInjectableDef:Ie}),eI=Ie({ngInjectorDef:Ie}),L=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=M({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ty(n){return n&&!!n.\u0275providers}var tI=Ie({\u0275cmp:Ie}),nI=Ie({\u0275dir:Ie}),rI=Ie({\u0275pipe:Ie}),iI=Ie({\u0275mod:Ie}),ec=Ie({\u0275fac:Ie}),Ps=Ie({__NG_ELEMENT_ID__:Ie}),L_=Ie({__NG_ENV_ID__:Ie});function Io(n){return typeof n=="string"?n:n==null?"":String(n)}function oI(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Io(n)}function sI(n,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new T(-200,n)}function op(n,t){throw new T(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),Xf;function My(){return Xf}function xt(n){let t=Xf;return Xf=n,t}function Ay(n,t,e){let r=Tc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&ae.Optional)return null;if(t!==void 0)return t;op(n,"Injector")}var aI={},Os=aI,eh="__NG_DI_FLAG__",tc="ngTempTokenPath",lI="ngTokenPath",cI=/\n/gm,uI="\u0275",V_="__source",So;function dI(){return So}function Fr(n){let t=So;return So=n,t}function fI(n,t=ae.Default){if(So===void 0)throw new T(-203,!1);return So===null?Ay(n,void 0,t):So.get(n,t&ae.Optional?null:void 0,t)}function P(n,t=ae.Default){return(My()||fI)(_t(n),t)}function I(n,t=ae.Default){return P(n,Mc(t))}function Mc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function th(n){let t=[];for(let e=0;e<n.length;e++){let r=_t(n[e]);if(Array.isArray(r)){if(r.length===0)throw new T(900,!1);let i,o=ae.Default;for(let s=0;s<r.length;s++){let a=r[s],l=hI(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}t.push(P(i,o))}else t.push(P(r))}return t}function ky(n,t){return n[eh]=t,n.prototype[eh]=t,n}function hI(n){return n[eh]}function pI(n,t,e,r){let i=n[tc];throw t[V_]&&i.unshift(t[V_]),n.message=mI(`
`+n.message,i,e,r),n[lI]=i,n[tc]=null,n}function mI(n,t,e,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==uI?n.slice(2):n;let i=yt(t);if(Array.isArray(t))i=t.map(yt).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):yt(a)))}i=`{${o.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${n.replace(cI,`
  `)}`}var Ac=ky(Ey("Optional"),8);var sp=ky(Ey("SkipSelf"),4);function bi(n,t){let e=n.hasOwnProperty(ec);return e?n[ec]:null}function gI(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}function vI(n){return n.flat(Number.POSITIVE_INFINITY)}function ap(n,t){n.forEach(e=>Array.isArray(e)?ap(e,t):t(e))}function Ny(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function nc(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function _I(n,t){let e=[];for(let r=0;r<n;r++)e.push(t);return e}function yI(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(i===1)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;){let o=i-2;n[i]=n[o],i--}n[t]=e,n[t+1]=r}}function lp(n,t,e){let r=qs(n,t);return r>=0?n[r|1]=e:(r=~r,yI(n,r,t,e)),r}function Uf(n,t){let e=qs(n,t);if(e>=0)return n[e|1]}function qs(n,t){return bI(n,t,1)}function bI(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}var xo={},Tt=[],To=new L(""),Py=new L("",-1),Oy=new L(""),rc=class{get(t,e=Os){if(e===Os){let r=new Error(`NullInjectorError: No provider for ${yt(t)}!`);throw r.name="NullInjectorError",r}return e}};function Ry(n,t){let e=n[iI]||null;if(!e&&t===!0)throw new Error(`Type ${yt(n)} does not have '\u0275mod' property.`);return e}function wi(n){return n[tI]||null}function Fy(n){return n[nI]||null}function Ly(n){return n[rI]||null}function Vy(n){let t=wi(n)||Fy(n)||Ly(n);return t!==null&&t.standalone}function Ro(n){return{\u0275providers:n}}function wI(...n){return{\u0275providers:jy(!0,n),\u0275fromNgModule:!0}}function jy(n,...t){let e=[],r=new Set,i,o=s=>{e.push(s)};return ap(t,s=>{let a=s;nh(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Uy(i,o),e}function Uy(n,t){for(let e=0;e<n.length;e++){let{ngModule:r,providers:i}=n[e];cp(i,o=>{t(o,r)})}}function nh(n,t,e,r){if(n=_t(n),!n)return!1;let i=null,o=R_(n),s=!o&&wi(n);if(!o&&!s){let l=n.ngModule;if(o=R_(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)nh(c,t,e,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{ap(o.imports,f=>{nh(f,t,e,r)&&(c||=[],c.push(f))})}finally{}c!==void 0&&Uy(c,t)}if(!a){let c=bi(i)||(()=>new i);t({provide:i,useFactory:c,deps:Tt},i),t({provide:Oy,useValue:i,multi:!0},i),t({provide:To,useValue:()=>P(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=n;cp(l,f=>{t(f,c)})}}else return!1;return i!==n&&n.providers!==void 0}function cp(n,t){for(let e of n)Ty(e)&&(e=e.\u0275providers),Array.isArray(e)?cp(e,t):t(e)}var CI=Ie({provide:String,useValue:Ie});function By(n){return n!==null&&typeof n=="object"&&CI in n}function EI(n){return!!(n&&n.useExisting)}function SI(n){return!!(n&&n.useFactory)}function Mo(n){return typeof n=="function"}function DI(n){return!!n.useClass}var kc=new L(""),Gl={},II={},Bf;function up(){return Bf===void 0&&(Bf=new rc),Bf}var Mt=class{},Rs=class extends Mt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,ih(t,s=>this.processProvider(s)),this.records.set(Py,bo(void 0,this)),i.has("environment")&&this.records.set(Mt,bo(void 0,this));let o=this.records.get(kc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Oy,Tt,ae.Self))}destroy(){ks(this),this._destroyed=!0;let t=ge(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(t)}}onDestroy(t){return ks(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){ks(this);let e=Fr(this),r=xt(void 0),i;try{return t()}finally{Fr(e),xt(r)}}get(t,e=Os,r=ae.Default){if(ks(this),t.hasOwnProperty(L_))return t[L_](this);r=Mc(r);let i,o=Fr(this),s=xt(void 0);try{if(!(r&ae.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=kI(t)&&Tc(t);c&&this.injectableDefInScope(c)?l=bo(rh(t),Gl):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=r&ae.Self?up():this.parent;return e=r&ae.Optional&&e===Os?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[tc]=a[tc]||[]).unshift(yt(t)),o)throw a;return pI(a,t,"R3InjectorError",this.source)}else throw a}finally{xt(s),Fr(o)}}resolveInjectorInitializers(){let t=ge(null),e=Fr(this),r=xt(void 0),i;try{let o=this.get(To,Tt,ae.Self);for(let s of o)s()}finally{Fr(e),xt(r),ge(t)}}toString(){let t=[],e=this.records;for(let r of e.keys())t.push(yt(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=_t(t);let e=Mo(t)?t:_t(t&&t.provide),r=TI(t);if(!Mo(t)&&t.multi===!0){let i=this.records.get(e);i||(i=bo(void 0,Gl,!0),i.factory=()=>th(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e){let r=ge(null);try{return e.value===Gl&&(e.value=II,e.value=e.factory()),typeof e.value=="object"&&e.value&&AI(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{ge(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=_t(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function rh(n){let t=Tc(n),e=t!==null?t.factory:bi(n);if(e!==null)return e;if(n instanceof L)throw new T(204,!1);if(n instanceof Function)return xI(n);throw new T(204,!1)}function xI(n){if(n.length>0)throw new T(204,!1);let e=XD(n);return e!==null?()=>e.factory(n):()=>new n}function TI(n){if(By(n))return bo(void 0,n.useValue);{let t=$y(n);return bo(t,Gl)}}function $y(n,t,e){let r;if(Mo(n)){let i=_t(n);return bi(i)||rh(i)}else if(By(n))r=()=>_t(n.useValue);else if(SI(n))r=()=>n.useFactory(...th(n.deps||[]));else if(EI(n))r=()=>P(_t(n.useExisting));else{let i=_t(n&&(n.useClass||n.provide));if(MI(n))r=()=>new i(...th(n.deps));else return bi(i)||rh(i)}return r}function ks(n){if(n.destroyed)throw new T(205,!1)}function bo(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function MI(n){return!!n.deps}function AI(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function kI(n){return typeof n=="function"||typeof n=="object"&&n instanceof L}function ih(n,t){for(let e of n)Array.isArray(e)?ih(e,t):e&&Ty(e)?ih(e.\u0275providers,t):t(e)}function Bt(n,t){n instanceof Rs&&ks(n);let e,r=Fr(n),i=xt(void 0);try{return t()}finally{Fr(r),xt(i)}}function Hy(){return My()!==void 0||dI()!=null}function dp(n){if(!Hy())throw new T(-203,!1)}function NI(n){return typeof n=="function"}var ur=0,ue=1,Z=2,ct=3,gn=4,kt=5,Fs=6,ic=7,Xt=8,Ls=9,or=10,Ue=11,Vs=12,j_=13,Fo=14,en=15,Ci=16,wo=17,sr=18,Nc=19,zy=20,Lr=21,Ql=22,Ei=23,jt=24,bt=25,qy=1;var Si=7,oc=8,Ao=9,Ut=10;function Vr(n){return Array.isArray(n)&&typeof n[qy]=="object"}function dr(n){return Array.isArray(n)&&n[qy]===!0}function fp(n){return(n.flags&4)!==0}function Ai(n){return n.componentOffset>-1}function Pc(n){return(n.flags&1)===1}function ar(n){return!!n.template}function sc(n){return(n[Z]&512)!==0}function Ws(n){return(n[Z]&256)===256}var oh=class{previousValue;currentValue;firstChange;constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function Wy(n,t,e,r){t!==null?t.applyValueToInputSignal(t,r):n[e]=r}var fr=(()=>{let n=()=>Gy;return n.ngInherit=!0,n})();function Gy(n){return n.type.prototype.ngOnChanges&&(n.setInput=OI),PI}function PI(){let n=Ky(this),t=n?.current;if(t){let e=n.previous;if(e===xo)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function OI(n,t,e,r,i){let o=this.declaredInputs[r],s=Ky(n)||RI(n,{previous:xo,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new oh(c&&c.currentValue,e,l===xo),Wy(n,t,i,e)}var Qy="__ngSimpleChanges__";function Ky(n){return n[Qy]||null}function RI(n,t){return n[Qy]=t}var U_=null;var Jt=function(n,t,e){U_?.(n,t,e)},FI="svg",LI="math";function Pn(n){for(;Array.isArray(n);)n=n[ur];return n}function Zy(n,t){return Pn(t[n])}function vn(n,t){return Pn(t[n.index])}function Yy(n,t){return n.data[t]}function Jy(n,t){return n[t]}function On(n,t){let e=t[n];return Vr(e)?e:e[ur]}function VI(n){return(n[Z]&4)===4}function hp(n){return(n[Z]&128)===128}function jI(n){return dr(n[ct])}function ko(n,t){return t==null?null:n[t]}function Xy(n){n[wo]=0}function pp(n){n[Z]&1024||(n[Z]|=1024,hp(n)&&Gs(n))}function UI(n,t){for(;n>0;)t=t[Fo],n--;return t}function Oc(n){return!!(n[Z]&9216||n[jt]?.dirty)}function sh(n){n[or].changeDetectionScheduler?.notify(9),n[Z]&64&&(n[Z]|=1024),Oc(n)&&Gs(n)}function Gs(n){n[or].changeDetectionScheduler?.notify(0);let t=Di(n);for(;t!==null&&!(t[Z]&8192||(t[Z]|=8192,!hp(t)));)t=Di(t)}function e0(n,t){if(Ws(n))throw new T(911,!1);n[Lr]===null&&(n[Lr]=[]),n[Lr].push(t)}function BI(n,t){if(n[Lr]===null)return;let e=n[Lr].indexOf(t);e!==-1&&n[Lr].splice(e,1)}function Di(n){let t=n[ct];return dr(t)?t[ct]:t}function t0(n){return n[ic]??=[]}function n0(n){return n.cleanup??=[]}function $I(n,t,e,r){let i=t0(t);i.push(e),n.firstCreatePass&&n0(n).push(r,i.length-1)}var se={lFrame:d0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ah=!1;function HI(){return se.lFrame.elementDepthCount}function zI(){se.lFrame.elementDepthCount++}function qI(){se.lFrame.elementDepthCount--}function r0(){return se.bindingsEnabled}function i0(){return se.skipHydrationRootTNode!==null}function WI(n){return se.skipHydrationRootTNode===n}function GI(){se.skipHydrationRootTNode=null}function pe(){return se.lFrame.lView}function ze(){return se.lFrame.tView}function S(n){return se.lFrame.contextLView=n,n[Xt]}function D(n){return se.lFrame.contextLView=null,n}function wt(){let n=o0();for(;n!==null&&n.type===64;)n=n.parent;return n}function o0(){return se.lFrame.currentTNode}function QI(){let n=se.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function ki(n,t){let e=se.lFrame;e.currentTNode=n,e.isParent=t}function mp(){return se.lFrame.isParent}function gp(){se.lFrame.isParent=!1}function KI(){return se.lFrame.contextLView}function s0(){return ah}function ac(n){let t=ah;return ah=n,t}function a0(){let n=se.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function ZI(){return se.lFrame.bindingIndex}function YI(n){return se.lFrame.bindingIndex=n}function Rc(){return se.lFrame.bindingIndex++}function vp(n){let t=se.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function JI(){return se.lFrame.inI18n}function XI(n,t){let e=se.lFrame;e.bindingIndex=e.bindingRootIndex=n,lh(t)}function ex(){return se.lFrame.currentDirectiveIndex}function lh(n){se.lFrame.currentDirectiveIndex=n}function tx(n){let t=se.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function l0(){return se.lFrame.currentQueryIndex}function _p(n){se.lFrame.currentQueryIndex=n}function nx(n){let t=n[ue];return t.type===2?t.declTNode:t.type===1?n[kt]:null}function c0(n,t,e){if(e&ae.SkipSelf){let i=t,o=n;for(;i=i.parent,i===null&&!(e&ae.Host);)if(i=nx(o),i===null||(o=o[Fo],i.type&10))break;if(i===null)return!1;t=i,n=o}let r=se.lFrame=u0();return r.currentTNode=t,r.lView=n,!0}function yp(n){let t=u0(),e=n[ue];se.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function u0(){let n=se.lFrame,t=n===null?null:n.child;return t===null?d0(n):t}function d0(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function f0(){let n=se.lFrame;return se.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var h0=f0;function bp(){let n=f0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function rx(n){return(se.lFrame.contextLView=UI(n,se.lFrame.contextLView))[Xt]}function qr(){return se.lFrame.selectedIndex}function Ii(n){se.lFrame.selectedIndex=n}function wp(){let n=se.lFrame;return Yy(n.tView,n.selectedIndex)}function ix(){return se.lFrame.currentNamespace}var p0=!0;function Fc(){return p0}function Lc(n){p0=n}function ox(n,t,e){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=Gy(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}i&&(e.preOrderHooks??=[]).push(0-n,i),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function Vc(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),f!=null&&(n.destroyHooks??=[]).push(e,f)}}function Kl(n,t,e){m0(n,t,3,e)}function Zl(n,t,e,r){(n[Z]&3)===e&&m0(n,t,e,r)}function $f(n,t){let e=n[Z];(e&3)===t&&(e&=16383,e+=1,n[Z]=e)}function m0(n,t,e,r){let i=r!==void 0?n[wo]&65535:0,o=r??-1,s=t.length-1,a=0;for(let l=i;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],r!=null&&a>=r)break}else t[l]<0&&(n[wo]+=65536),(a<o||o==-1)&&(sx(n,e,t,l),n[wo]=(n[wo]&4294901760)+l+2),l++}function B_(n,t){Jt(4,n,t);let e=ge(null);try{t.call(n)}finally{ge(e),Jt(5,n,t)}}function sx(n,t,e,r){let i=e[r]<0,o=e[r+1],s=i?-e[r]:e[r],a=n[s];i?n[Z]>>14<n[wo]>>16&&(n[Z]&3)===t&&(n[Z]+=16384,B_(a,o)):B_(a,o)}var Do=-1,xi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,r){this.factory=t,this.canSeeViewProviders=e,this.injectImpl=r}};function ax(n){return n instanceof xi}function lx(n){return(n.flags&8)!==0}function cx(n){return(n.flags&16)!==0}function ux(n,t,e){let r=0;for(;r<e.length;){let i=e[r];if(typeof i=="number"){if(i!==0)break;r++;let o=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,o)}else{let o=i,s=e[++r];dx(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),r++}}return r}function g0(n){return n===3||n===4||n===6}function dx(n){return n.charCodeAt(0)===64}function No(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?e=i:e===0||(e===-1||e===2?$_(n,e,i,null,t[++r]):$_(n,e,i,null,null))}}return n}function $_(n,t,e,r,i){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var Hf={},ch=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=Mc(r);let i=this.injector.get(t,Hf,r);return i!==Hf||e===Hf?i:this.parentInjector.get(t,e,r)}};function v0(n){return n!==Do}function lc(n){return n&32767}function fx(n){return n>>16}function cc(n,t){let e=fx(n),r=t;for(;e>0;)r=r[Fo],e--;return r}var uh=!0;function uc(n){let t=uh;return uh=n,t}var hx=256,_0=hx-1,y0=5,px=0,Nn={};function mx(n,t,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(Ps)&&(r=e[Ps]),r==null&&(r=e[Ps]=px++);let i=r&_0,o=1<<i;t.data[n+(i>>y0)]|=o}function dc(n,t){let e=b0(n,t);if(e!==-1)return e;let r=t[ue];r.firstCreatePass&&(n.injectorIndex=t.length,zf(r.data,n),zf(t,null),zf(r.blueprint,null));let i=Cp(n,t),o=n.injectorIndex;if(v0(i)){let s=lc(i),a=cc(i,t),l=a[ue].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|l[s+c]}return t[o+8]=i,o}function zf(n,t){n.push(0,0,0,0,0,0,0,0,t)}function b0(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function Cp(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;i!==null;){if(r=D0(i),r===null)return Do;if(e++,i=i[Fo],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return Do}function dh(n,t,e){mx(n,t,e)}function gx(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let r=e.length,i=0;for(;i<r;){let o=e[i];if(g0(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof e[i]=="string";)i++;else{if(o===t)return e[i+1];i=i+2}}}return null}function w0(n,t,e){if(e&ae.Optional||n!==void 0)return n;op(t,"NodeInjector")}function C0(n,t,e,r){if(e&ae.Optional&&r===void 0&&(r=null),!(e&(ae.Self|ae.Host))){let i=n[Ls],o=xt(void 0);try{return i?i.get(t,r,e&ae.Optional):Ay(t,r,e&ae.Optional)}finally{xt(o)}}return w0(r,t,e)}function E0(n,t,e,r=ae.Default,i){if(n!==null){if(t[Z]&2048&&!(r&ae.Self)){let s=bx(n,t,e,r,Nn);if(s!==Nn)return s}let o=S0(n,t,e,r,Nn);if(o!==Nn)return o}return C0(t,e,r,i)}function S0(n,t,e,r,i){let o=_x(e);if(typeof o=="function"){if(!c0(t,n,r))return r&ae.Host?w0(i,e,r):C0(t,e,r,i);try{let s;if(s=o(r),s==null&&!(r&ae.Optional))op(e);else return s}finally{h0()}}else if(typeof o=="number"){let s=null,a=b0(n,t),l=Do,c=r&ae.Host?t[en][kt]:null;for((a===-1||r&ae.SkipSelf)&&(l=a===-1?Cp(n,t):t[a+8],l===Do||!z_(r,!1)?a=-1:(s=t[ue],a=lc(l),t=cc(l,t)));a!==-1;){let f=t[ue];if(H_(o,a,f.data)){let p=vx(a,t,e,s,r,c);if(p!==Nn)return p}l=t[a+8],l!==Do&&z_(r,t[ue].data[a+8]===c)&&H_(o,a,t)?(s=f,a=lc(l),t=cc(l,t)):a=-1}}return i}function vx(n,t,e,r,i,o){let s=t[ue],a=s.data[n+8],l=r==null?Ai(a)&&uh:r!=s&&(a.type&3)!==0,c=i&ae.Host&&o===a,f=Yl(a,s,e,l,c);return f!==null?js(t,s,f,a):Nn}function Yl(n,t,e,r,i){let o=n.providerIndexes,s=t.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,f=o>>20,p=r?a:a+f,v=i?a+f:c;for(let g=p;g<v;g++){let y=s[g];if(g<l&&e===y||g>=l&&y.type===e)return g}if(i){let g=s[l];if(g&&ar(g)&&g.type===e)return l}return null}function js(n,t,e,r){let i=n[e],o=t.data;if(ax(i)){let s=i;s.resolving&&sI(oI(o[e]));let a=uc(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?xt(s.injectImpl):null,f=c0(n,r,ae.Default);try{i=n[e]=s.factory(void 0,o,n,r),t.firstCreatePass&&e>=r.directiveStart&&ox(e,o[e],t)}finally{c!==null&&xt(c),uc(a),s.resolving=!1,h0()}}return i}function _x(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Ps)?n[Ps]:void 0;return typeof t=="number"?t>=0?t&_0:yx:t}function H_(n,t,e){let r=1<<n;return!!(e[t+(n>>y0)]&r)}function z_(n,t){return!(n&ae.Self)&&!(n&ae.Host&&t)}var yi=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return E0(this._tNode,this._lView,t,Mc(r),e)}};function yx(){return new yi(wt(),pe())}function Ln(n){return zs(()=>{let t=n.prototype.constructor,e=t[ec]||fh(t),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ec]||fh(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function fh(n){return Sy(n)?()=>{let t=fh(_t(n));return t&&t()}:bi(n)}function bx(n,t,e,r,i){let o=n,s=t;for(;o!==null&&s!==null&&s[Z]&2048&&!sc(s);){let a=S0(o,s,e,r|ae.Self,Nn);if(a!==Nn)return a;let l=o.parent;if(!l){let c=s[zy];if(c){let f=c.get(e,Nn,r);if(f!==Nn)return f}l=D0(s),s=s[Fo]}o=l}return i}function D0(n){let t=n[ue],e=t.type;return e===2?t.declTNode:e===1?n[kt]:null}function jc(n){return gx(wt(),n)}function q_(n,t=null,e=null,r){let i=I0(n,t,e,r);return i.resolveInjectorInitializers(),i}function I0(n,t=null,e=null,r,i=new Set){let o=[e||Tt,wI(n)];return r=r||(typeof n=="object"?void 0:yt(n)),new Rs(o,t||up(),r||null,i)}var ut=class n{static THROW_IF_NOT_FOUND=Os;static NULL=new rc;static create(t,e){if(Array.isArray(t))return q_({name:""},e,t,"");{let r=t.name??"";return q_({name:r},t.parent,t.providers,r)}}static \u0275prov=M({token:n,providedIn:"any",factory:()=>P(Py)});static __NG_ELEMENT_ID__=-1};var fc=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>jc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},wx=new L("");wx.__NG_ELEMENT_ID__=n=>{let t=wt();if(t===null)throw new T(204,!1);if(t.type&2)return t.value;if(n&ae.Optional)return null;throw new T(204,!1)};var x0=!1,Ni=(()=>{class n{static __NG_ELEMENT_ID__=Cx;static __NG_ENV_ID__=e=>e}return n})(),hc=class extends Ni{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return e0(this._lView,t),()=>BI(this._lView,t)}};function Cx(){return new hc(pe())}var jr=class{},Uc=new L("",{providedIn:"root",factory:()=>!1});var T0=new L(""),Ep=new L(""),hr=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new rt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=M({token:n,providedIn:"root",factory:()=>new n})}return n})();var hh=class extends Pe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,Hy()&&(this.destroyRef=I(Ni,{optional:!0})??void 0,this.pendingTasks=I(hr,{optional:!0})??void 0)}emit(t){let e=ge(null);try{super.next(t)}finally{ge(e)}}subscribe(t,e,r){let i=t,o=e||(()=>null),s=r;if(t&&typeof t=="object"){let l=t;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof Ne&&t.add(a),a}wrapInTimeout(t){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(e),r!==void 0&&this.pendingTasks?.remove(r)})}}},ye=hh;function Us(...n){}function M0(n){let t,e;function r(){n=Us;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),r()})),()=>r()}function W_(n){return queueMicrotask(()=>n()),()=>{n=Us}}var Sp="isAngularZone",pc=Sp+"_ID",Ex=0,De=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ye(!1);onMicrotaskEmpty=new ye(!1);onStable=new ye(!1);onError=new ye(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=x0}=t;if(typeof Zone>"u")throw new T(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Ix(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Sp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new T(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new T(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,Sx,Us,Us);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}},Sx={};function Dp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Dx(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){M0(()=>{n.callbackScheduled=!1,ph(n),n.isCheckStableRunning=!0,Dp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),ph(n)}function Ix(n){let t=()=>{Dx(n)},e=Ex++;n._inner=n._inner.fork({name:"angular",properties:{[Sp]:!0,[pc]:e,[pc+e]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(xx(l))return r.invokeTask(o,s,a,l);try{return G_(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),Q_(n)}},onInvoke:(r,i,o,s,a,l,c)=>{try{return G_(n),r.invoke(o,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Tx(l)&&t(),Q_(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,ph(n),Dp(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function ph(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function G_(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Q_(n){n._nesting--,Dp(n)}var mc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ye;onMicrotaskEmpty=new ye;onStable=new ye;onError=new ye;run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}};function xx(n){return A0(n,"__ignore_ng_zone__")}function Tx(n){return A0(n,"__scheduler_tick__")}function A0(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var At=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Mx=new L("",{providedIn:"root",factory:()=>{let n=I(De),t=I(At);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function K_(n,t){return Cy(n,t)}function Ax(n){return Cy(wy,n)}var k0=(K_.required=Ax,K_);function kx(){return Lo(wt(),pe())}function Lo(n,t){return new Je(vn(n,t))}var Je=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=kx}return n})();function Nx(n){return n instanceof Je?n.nativeElement:n}var Z_=new Set;function _n(n){Z_.has(n)||(Z_.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Ip(n){return typeof n=="function"&&n[St]!==void 0}function U(n,t){_n("NgSignals");let e=s_(n),r=e[St];return t?.equal&&(r.equal=t.equal),e.set=i=>pl(r,i),e.update=i=>a_(r,i),e.asReadonly=Px.bind(e),e}function Px(){let n=this[St];if(n.readonlyFn===void 0){let t=()=>this();t[St]=n,n.readonlyFn=t}return n.readonlyFn}function N0(n){return Ip(n)&&typeof n.set=="function"}function Ox(){return this._results[Symbol.iterator]()}var gc=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Pe}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let r=vI(t);(this._changesDetected=!gI(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Ox};function P0(n){return(n.flags&128)===128}var O0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(O0||{}),R0=new Map,Rx=0;function Fx(){return Rx++}function Lx(n){R0.set(n[Nc],n)}function mh(n){R0.delete(n[Nc])}var Y_="__ngContext__";function Pi(n,t){Vr(t)?(n[Y_]=t[Nc],Lx(t)):n[Y_]=t}function F0(n){return V0(n[Vs])}function L0(n){return V0(n[gn])}function V0(n){for(;n!==null&&!dr(n);)n=n[gn];return n}var gh;function j0(n){gh=n}function Vx(){if(gh!==void 0)return gh;if(typeof document<"u")return document;throw new T(210,!1)}var Bc=new L("",{providedIn:"root",factory:()=>jx}),jx="ng",xp=new L(""),dt=new L("",{providedIn:"platform",factory:()=>"unknown"});var $c=new L(""),Qs=new L("",{providedIn:"root",factory:()=>Vx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ux="h",Bx="b";var U0=!1,$x=new L("",{providedIn:"root",factory:()=>U0});var Tp=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Tp||{}),Vo=new L("");var Co=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Co||{}),B0=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=M({token:n,providedIn:"root",factory:()=>new n})}return n})(),Hx=[Co.EarlyRead,Co.Write,Co.MixedReadWrite,Co.Read],zx=(()=>{class n{ngZone=I(De);scheduler=I(jr);errorHandler=I(At,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){I(Vo,{optional:!0})}execute(){this.executing=!0;for(let e of Hx)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[e]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>r.hooks[e](r.pipelinedValue),r.snapshot))}catch(i){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(7))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,r){return r?r.run(Tp.AFTER_NEXT_RENDER,e):e()}static \u0275prov=M({token:n,providedIn:"root",factory:()=>new n})}return n})(),vh=class{impl;hooks;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,r,i,o=null){this.impl=t,this.hooks=e,this.once=r,this.snapshot=o,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Mp(n,t){!t?.injector&&dp(Mp);let e=t?.injector??I(ut);return _n("NgAfterRender"),Wx(n,e,t,!1)}function qx(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Wx(n,t,e,r){let i=t.get(B0);i.impl??=t.get(zx);let o=t.get(Vo,null,{optional:!0}),s=e?.phase??Co.MixedReadWrite,a=e?.manualCleanup!==!0?t.get(Ni):null,l=new vh(i.impl,qx(n,s),r,a,o?.snapshot(null));return i.impl.register(l),l}var Gx=()=>null;function $0(n,t,e=!1){return Gx(n,t,e)}function H0(n,t){let e=n.contentQueries;if(e!==null){let r=ge(null);try{for(let i=0;i<e.length;i+=2){let o=e[i],s=e[i+1];if(s!==-1){let a=n.data[s];_p(o),a.contentQueries(2,t[s],s)}}}finally{ge(r)}}}function _h(n,t,e){_p(0);let r=ge(null);try{t(n,e)}finally{ge(r)}}function Ap(n,t,e){if(fp(t)){let r=ge(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{ge(r)}}}var Rn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Rn||{}),$l;function Qx(){if($l===void 0&&($l=null,ir.trustedTypes))try{$l=ir.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return $l}function Hc(n){return Qx()?.createHTML(n)||n}var Hl;function Kx(){if(Hl===void 0&&(Hl=null,ir.trustedTypes))try{Hl=ir.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Hl}function J_(n){return Kx()?.createScriptURL(n)||n}var lr=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${by})`}},yh=class extends lr{getTypeName(){return"HTML"}},bh=class extends lr{getTypeName(){return"Style"}},wh=class extends lr{getTypeName(){return"Script"}},Ch=class extends lr{getTypeName(){return"URL"}},Eh=class extends lr{getTypeName(){return"ResourceURL"}};function yn(n){return n instanceof lr?n.changingThisBreaksApplicationSecurity:n}function Wr(n,t){let e=Zx(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${by})`)}return e===t}function Zx(n){return n instanceof lr&&n.getTypeName()||null}function z0(n){return new yh(n)}function q0(n){return new bh(n)}function W0(n){return new wh(n)}function G0(n){return new Ch(n)}function Q0(n){return new Eh(n)}function Yx(n){let t=new Dh(n);return Jx()?new Sh(t):t}var Sh=class{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(Hc(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},Dh=class{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=Hc(t),e}};function Jx(){try{return!!new window.DOMParser().parseFromString(Hc(""),"text/html")}catch{return!1}}var Xx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zc(n){return n=String(n),n.match(Xx)?n:"unsafe:"+n}function pr(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function Ks(...n){let t={};for(let e of n)for(let r in e)e.hasOwnProperty(r)&&(t[r]=!0);return t}var K0=pr("area,br,col,hr,img,wbr"),Z0=pr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Y0=pr("rp,rt"),eT=Ks(Y0,Z0),tT=Ks(Z0,pr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),nT=Ks(Y0,pr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),X_=Ks(K0,tT,nT,eT),J0=pr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rT=pr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),iT=pr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),oT=Ks(J0,rT,iT),sT=pr("script,style,template"),Ih=class{sanitizedSomething=!1;buf=[];sanitizeChildren(t){let e=t.firstChild,r=!0,i=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild){i.push(e),e=cT(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=lT(e);if(o){e=o;break}e=i.pop()}}return this.buf.join("")}startElement(t){let e=ey(t).toLowerCase();if(!X_.hasOwnProperty(e))return this.sanitizedSomething=!0,!sT.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let r=t.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!oT.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;J0[a]&&(l=zc(l)),this.buf.push(" ",s,'="',ty(l),'"')}return this.buf.push(">"),!0}endElement(t){let e=ey(t).toLowerCase();X_.hasOwnProperty(e)&&!K0.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ty(t))}};function aT(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function lT(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw X0(t);return t}function cT(n){let t=n.firstChild;if(t&&aT(n,t))throw X0(t);return t}function ey(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function X0(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var uT=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dT=/([^\#-~ |!])/g;function ty(n){return n.replace(/&/g,"&amp;").replace(uT,function(t){let e=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((e-55296)*1024+(r-56320)+65536)+";"}).replace(dT,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var zl;function eb(n,t){let e=null;try{zl=zl||Yx(n);let r=t?String(t):"";e=zl.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=e.innerHTML,e=zl.getInertBodyElement(r)}while(r!==o);let a=new Ih().sanitizeChildren(ny(e)||e);return Hc(a)}finally{if(e){let r=ny(e)||e;for(;r.firstChild;)r.firstChild.remove()}}}function ny(n){return"content"in n&&fT(n)?n.content:null}function fT(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var ft=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ft||{});function Vn(n){let t=nb();return t?t.sanitize(ft.URL,n)||"":Wr(n,"URL")?yn(n):zc(Io(n))}function kp(n){let t=nb();if(t)return J_(t.sanitize(ft.RESOURCE_URL,n)||"");if(Wr(n,"ResourceURL"))return J_(yn(n));throw new T(904,!1)}function hT(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?kp:Vn}function tb(n,t,e){return hT(t,e)(n)}function nb(){let n=pe();return n&&n[or].sanitizer}var pT=/^>|^->|<!--|-->|--!>|<!-$/g,mT=/(<|>)/g,gT="\u200B$1\u200B";function vT(n){return n.replace(pT,t=>t.replace(mT,gT))}function rb(n){return n.ownerDocument}function ib(n){return n instanceof Function?n():n}var Ur=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Ur||{});function _T(n,t,e){let r=n.length;for(;;){let i=n.indexOf(t,e);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}var ob="ng-template";function yT(n,t,e,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&_T(t[i+1].toLowerCase(),e,0)!==-1)return!0}else if(Np(n))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===e)return!0}return!1}function Np(n){return n.type===4&&n.value!==ob}function bT(n,t,e){let r=n.type===4&&!e?ob:n.value;return t===r}function wT(n,t,e){let r=4,i=n.attrs,o=i!==null?ST(i):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!pn(r)&&!pn(l))return!1;if(s&&pn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!bT(n,l,e)||l===""&&t.length===1){if(pn(r))return!1;s=!0}}else if(r&8){if(i===null||!yT(n,i,l,e)){if(pn(r))return!1;s=!0}}else{let c=t[++a],f=CT(l,i,Np(n),e);if(f===-1){if(pn(r))return!1;s=!0;continue}if(c!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&c!==p){if(pn(r))return!1;s=!0}}}}return pn(r)||s}function pn(n){return(n&1)===0}function CT(n,t,e,r){if(t===null)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){let s=t[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return DT(t,n)}function sb(n,t,e=!1){for(let r=0;r<t.length;r++)if(wT(n,t[r],e))return!0;return!1}function ET(n){let t=n.attrs;if(t!=null){let e=t.indexOf(5);if(!(e&1))return t[e+1]}return null}function ST(n){for(let t=0;t<n.length;t++){let e=n[t];if(g0(e))return t}return n.length}function DT(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let r=n[e];if(typeof r=="number")return-1;if(r===t)return e;e++}return-1}function IT(n,t){e:for(let e=0;e<t.length;e++){let r=t[e];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function ry(n,t){return n?":not("+t.trim()+")":t}function xT(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(r&2){let a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!pn(s)&&(t+=ry(o,i),i=""),r=s,o=o||!pn(r);e++}return i!==""&&(t+=ry(o,i)),t}function TT(n){return n.map(xT).join(",")}function MT(n){let t=[],e=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&t.push(o,n[++r]):i===8&&e.push(o);else{if(!pn(i))break;i=o}r++}return e.length&&t.push(1,...e),t}var bn={};function AT(n,t){return n.createText(t)}function kT(n,t,e){n.setValue(t,e)}function NT(n,t){return n.createComment(vT(t))}function ab(n,t,e){return n.createElement(t,e)}function vc(n,t,e,r,i){n.insertBefore(t,e,r,i)}function lb(n,t,e){n.appendChild(t,e)}function iy(n,t,e,r,i){r!==null?vc(n,t,e,r,i):lb(n,t,e)}function PT(n,t,e){n.removeChild(null,t,e)}function OT(n,t,e){n.setAttribute(t,"style",e)}function RT(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function cb(n,t,e){let{mergedAttrs:r,classes:i,styles:o}=e;r!==null&&ux(n,t,r),i!==null&&RT(n,t,i),o!==null&&OT(n,t,o)}function m(n=1){ub(ze(),pe(),qr()+n,!1)}function ub(n,t,e,r){if(!r)if((t[Z]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Kl(t,o,e)}else{let o=n.preOrderHooks;o!==null&&Zl(t,o,0,e)}Ii(e)}function x(n,t=ae.Default){let e=pe();if(e===null)return P(n,t);let r=wt();return E0(r,e,_t(n),t)}function db(n,t,e,r,i,o){let s=ge(null);try{let a=null;i&Ur.SignalBased&&(a=t[r][St]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Ur.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(t,o)),n.setInput!==null?n.setInput(t,a,o,e,r):Wy(t,a,r,o)}finally{ge(s)}}function Pp(n,t,e,r,i,o,s,a,l,c,f){let p=t.blueprint.slice();return p[ur]=i,p[Z]=r|4|128|8|64|1024,(c!==null||n&&n[Z]&2048)&&(p[Z]|=2048),Xy(p),p[ct]=p[Fo]=n,p[Xt]=e,p[or]=s||n&&n[or],p[Ue]=a||n&&n[Ue],p[Ls]=l||n&&n[Ls]||null,p[kt]=o,p[Nc]=Fx(),p[Fs]=f,p[zy]=c,p[en]=t.type==2?n[en]:p,p}function fb(n,t,e,r){if(e===0)return-1;let i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function hb(n,t,e,r,i){let o=qr(),s=r&2;try{Ii(-1),s&&t.length>bt&&ub(n,t,bt,!1),Jt(s?2:0,i),e(r,i)}finally{Ii(o),Jt(s?3:1,i)}}function Op(n,t,e){r0()&&(Pi(vn(e,t),t),pb(n,t,e))}function pb(n,t,e){WT(n,t,e),(e.flags&64)===64&&GT(n,t,e)}function Rp(n,t,e=vn){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?e(t,n):n[s];n[i++]=a}}}function FT(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=Fp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function Fp(n,t,e,r,i,o,s,a,l,c,f){let p=bt+r,v=p+i,g=LT(p,v),y=typeof c=="function"?c():c;return g[ue]={type:n,blueprint:g,template:e,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:y,incompleteFirstPass:!1,ssrId:f}}function LT(n,t){let e=[];for(let r=0;r<t;r++)e.push(r<n?null:bn);return e}function VT(n,t,e,r){let o=r.get($x,U0)||e===Rn.ShadowDom,s=n.selectRootElement(t,o);return jT(s),s}function jT(n){UT(n)}var UT=()=>null;function oy(n,t,e,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;r??={};let a,l=Ur.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}n===0?sy(r,e,c,a,l):sy(r,e,c,a)}return r}function sy(n,t,e,r,i){let o;n.hasOwnProperty(e)?(o=n[e]).push(t,r):o=n[e]=[t,r],i!==void 0&&o.push(i)}function BT(n,t,e){let r=t.directiveStart,i=t.directiveEnd,o=n.data,s=t.attrs,a=[],l=null,c=null;for(let f=r;f<i;f++){let p=o[f],v=e?e.get(p):null,g=v?v.inputs:null,y=v?v.outputs:null;l=oy(0,p.inputs,f,l,g),c=oy(1,p.outputs,f,c,y);let w=l!==null&&s!==null&&!Np(t)?sM(l,f,s):null;a.push(w)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}function $T(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function mb(n,t,e,r,i,o,s,a){let l=vn(t,e),c=t.inputs,f;!a&&c!=null&&(f=c[r])?(jp(n,e,f,r,i),Ai(t)&&HT(e,t.index)):t.type&3?(r=$T(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(l,r,i)):t.type&12}function HT(n,t){let e=On(t,n);e[Z]&16||(e[Z]|=64)}function Lp(n,t,e,r){if(r0()){let i=r===null?null:{"":-1},o=KT(n,e);if(o!==null){let[s,a]=vb(n,e,o);gb(n,t,e,s,i,a)}i&&YT(e,r,i)}e.mergedAttrs=No(e.mergedAttrs,e.attrs)}function gb(n,t,e,r,i,o){for(let c=0;c<r.length;c++)dh(dc(e,t),n,r[c].type);XT(e,n.data.length,r.length);for(let c=0;c<r.length;c++){let f=r[c];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,l=fb(n,t,r.length,null);for(let c=0;c<r.length;c++){let f=r[c];e.mergedAttrs=No(e.mergedAttrs,f.hostAttrs),eM(n,e,t,l,f),JT(l,f,i),f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let p=f.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}BT(n,e,o)}function zT(n,t,e,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;qT(s)!=a&&s.push(a),s.push(e,r,o)}}function qT(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function WT(n,t,e){let r=e.directiveStart,i=e.directiveEnd;Ai(e)&&nM(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||dc(e,t);let o=e.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=js(t,n,s,e);if(Pi(l,t),o!==null&&oM(t,s-r,l,a,e,o),ar(a)){let c=On(e.index,t);c[Xt]=js(t,n,s,e)}}}function GT(n,t,e){let r=e.directiveStart,i=e.directiveEnd,o=e.index,s=ex();try{Ii(o);for(let a=r;a<i;a++){let l=n.data[a],c=t[a];lh(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&QT(l,c)}}finally{Ii(-1),lh(s)}}function QT(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function KT(n,t){let e=n.directiveRegistry,r=null;if(e)for(let i=0;i<e.length;i++){let o=e[i];sb(t,o.selectors,!1)&&(r??=[],ar(o)?r.unshift(o):r.push(o))}return r}function vb(n,t,e){let r=[],i=null;for(let o of e)o.findHostDirectiveDefs!==null&&(i??=new Map,o.findHostDirectiveDefs(o,r,i)),ar(o)&&(r.push(o),ZT(n,t,r.length-1));return Ai(t)?r.push(...e.slice(1)):r.push(...e),[r,i]}function ZT(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function YT(n,t,e){if(t){let r=n.localNames=[];for(let i=0;i<t.length;i+=2){let o=e[t[i+1]];if(o==null)throw new T(-301,!1);r.push(t[i],o)}}}function JT(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;ar(t)&&(e[""]=n)}}function XT(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function eM(n,t,e,r,i){n.data[r]=i;let o=i.factory||(i.factory=bi(i.type,!0)),s=new xi(o,ar(i),x);n.blueprint[r]=s,e[r]=s,zT(n,t,r,fb(n,e,i.hostVars,bn),i)}function tM(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function nM(n,t,e){let r=vn(t,n),i=FT(e),o=n[or].rendererFactory,s=Vp(n,Pp(n,i,null,tM(e),r,t,null,o.createRenderer(r,e),null,null,null));return n[t.index]=s}function rM(n,t,e,r,i,o){let s=vn(n,t);iM(t[Ue],s,o,n.value,e,r,i)}function iM(n,t,e,r,i,o,s){if(o==null)n.removeAttribute(t,i,e);else{let a=s==null?Io(o):s(o,r||"",i);n.setAttribute(t,i,a,e)}}function oM(n,t,e,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],f=s[a++],p=s[a++];db(r,e,l,c,f,p)}}function sM(n,t,e){let r=null,i=0;for(;i<e.length;){let o=e[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(o,s[a+1],s[a+2],e[i+1]);break}}i+=2}return r}function _b(n,t,e,r){return[n,!0,0,t,null,r,null,e,null,null]}function Vp(n,t){return n[Vs]?n[j_][gn]=t:n[Vs]=t,n[j_]=t,t}function yb(n,t){let e=n[Ls],r=e?e.get(At,null):null;r&&r.handleError(t)}function jp(n,t,e,r,i){for(let o=0;o<e.length;){let s=e[o++],a=e[o++],l=e[o++],c=t[s],f=n.data[s];db(f,c,r,a,l,i)}}function aM(n,t){let e=On(t,n),r=e[ue];lM(r,e);let i=e[ur];i!==null&&e[Fs]===null&&(e[Fs]=$0(i,e[Ls])),Up(r,e,e[Xt])}function lM(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function Up(n,t,e){yp(t);try{let r=n.viewQuery;r!==null&&_h(1,r,e);let i=n.template;i!==null&&hb(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[sr]?.finishViewCreation(n),n.staticContentQueries&&H0(n,t),n.staticViewQueries&&_h(2,n.viewQuery,e);let o=n.components;o!==null&&cM(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[Z]&=-5,bp()}}function cM(n,t){for(let e=0;e<t.length;e++)aM(n,t[e])}var Fn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Fn||{}),uM;function Bp(n,t){return uM(n,t)}function $p(n){return(n.flags&32)===32}function Eo(n,t,e,r,i){if(r!=null){let o,s=!1;dr(r)?o=r:Vr(r)&&(s=!0,r=r[ur]);let a=Pn(r);n===0&&e!==null?i==null?lb(t,e,a):vc(t,e,a,i||null,!0):n===1&&e!==null?vc(t,e,a,i||null,!0):n===2?PT(t,a,s):n===3&&t.destroyNode(a),o!=null&&wM(t,n,o,e,i)}}function dM(n,t){bb(n,t),t[ur]=null,t[kt]=null}function fM(n,t,e,r,i,o){r[ur]=i,r[kt]=t,Wc(n,r,e,1,i,o)}function bb(n,t){t[or].changeDetectionScheduler?.notify(10),Wc(n,t,t[Ue],2,null,null)}function hM(n){let t=n[Vs];if(!t)return qf(n[ue],n);for(;t;){let e=null;if(Vr(t))e=t[Vs];else{let r=t[Ut];r&&(e=r)}if(!e){for(;t&&!t[gn]&&t!==n;)Vr(t)&&qf(t[ue],t),t=t[ct];t===null&&(t=n),Vr(t)&&qf(t[ue],t),e=t&&t[gn]}t=e}}function pM(n,t,e,r){let i=Ut+r,o=e.length;r>0&&(e[i-1][gn]=t),r<o-Ut?(t[gn]=e[i],Ny(e,Ut+r,t)):(e.push(t),t[gn]=null),t[ct]=e;let s=t[Ci];s!==null&&e!==s&&wb(s,t);let a=t[sr];a!==null&&a.insertView(n),sh(t),t[Z]|=128}function wb(n,t){let e=n[Ao],r=t[ct];if(Vr(r))n[Z]|=2;else{let i=r[ct][en];t[en]!==i&&(n[Z]|=2)}e===null?n[Ao]=[t]:e.push(t)}function Hp(n,t){let e=n[Ao],r=e.indexOf(t);e.splice(r,1)}function xh(n,t){if(n.length<=Ut)return;let e=Ut+t,r=n[e];if(r){let i=r[Ci];i!==null&&i!==n&&Hp(i,r),t>0&&(n[e-1][gn]=r[gn]);let o=nc(n,Ut+t);dM(r[ue],r);let s=o[sr];s!==null&&s.detachView(o[ue]),r[ct]=null,r[gn]=null,r[Z]&=-129}return r}function Cb(n,t){if(Ws(t))return;let e=t[Ue];e.destroyNode&&Wc(n,t,e,3,null,null),hM(t)}function qf(n,t){if(Ws(t))return;let e=ge(null);try{t[Z]&=-129,t[Z]|=256,t[jt]&&co(t[jt]),gM(n,t),mM(n,t),t[ue].type===1&&t[Ue].destroy();let r=t[Ci];if(r!==null&&dr(t[ct])){r!==t[ct]&&Hp(r,t);let i=t[sr];i!==null&&i.detachView(n)}mh(t)}finally{ge(e)}}function mM(n,t){let e=n.cleanup,r=t[ic];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[e[s+1]];e[s].call(a)}r!==null&&(t[ic]=null);let i=t[Lr];if(i!==null){t[Lr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[Ei];if(o!==null){t[Ei]=null;for(let s of o)s.destroy()}}function gM(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let i=t[e[r]];if(!(i instanceof xi)){let o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Jt(4,a,l);try{l.call(a)}finally{Jt(5,a,l)}}else{Jt(4,i,o);try{o.call(i)}finally{Jt(5,i,o)}}}}}function Eb(n,t,e){return vM(n,t.parent,e)}function vM(n,t,e){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return e[ur];if(Ai(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Rn.None||i===Rn.Emulated)return null}return vn(r,e)}function Sb(n,t,e){return yM(n,t,e)}function _M(n,t,e){return n.type&40?vn(n,e):null}var yM=_M,ay;function qc(n,t,e,r){let i=Eb(n,r,t),o=t[Ue],s=r.parent||t[kt],a=Sb(s,r,t);if(i!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)iy(o,i,e[l],a,!1);else iy(o,i,e,a,!1);ay!==void 0&&ay(o,r,t,e,i)}function Ns(n,t){if(t!==null){let e=t.type;if(e&3)return vn(t,n);if(e&4)return Th(-1,n[t.index]);if(e&8){let r=t.child;if(r!==null)return Ns(n,r);{let i=n[t.index];return dr(i)?Th(-1,i):Pn(i)}}else{if(e&128)return Ns(n,t.next);if(e&32)return Bp(t,n)()||Pn(n[t.index]);{let r=Db(n,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Di(n[en]);return Ns(i,r)}else return Ns(n,t.next)}}}return null}function Db(n,t){if(t!==null){let r=n[en][kt],i=t.projection;return r.projection[i]}return null}function Th(n,t){let e=Ut+n+1;if(e<t.length){let r=t[e],i=r[ue].firstChild;if(i!==null)return Ns(r,i)}return t[Si]}function zp(n,t,e,r,i,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=r[e.index],l=e.type;if(s&&t===0&&(a&&Pi(Pn(a),r),e.flags|=2),!$p(e))if(l&8)zp(n,t,e.child,r,i,o,!1),Eo(t,n,i,a,o);else if(l&32){let c=Bp(e,r),f;for(;f=c();)Eo(t,n,i,f,o);Eo(t,n,i,a,o)}else l&16?Ib(n,t,r,e,i,o):Eo(t,n,i,a,o);e=s?e.projectionNext:e.next}}function Wc(n,t,e,r,i,o){zp(e,r,n.firstChild,t,i,o,!1)}function bM(n,t,e){let r=t[Ue],i=Eb(n,e,t),o=e.parent||t[kt],s=Sb(o,e,t);Ib(r,0,t,e,i,s)}function Ib(n,t,e,r,i,o){let s=e[en],l=s[kt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let f=l[c];Eo(t,n,i,f,o)}else{let c=l,f=s[ct];P0(r)&&(c.flags|=128),zp(n,t,c,f,i,o,!0)}}function wM(n,t,e,r,i){let o=e[Si],s=Pn(e);o!==s&&Eo(t,n,r,o,i);for(let a=Ut;a<e.length;a++){let l=e[a];Wc(l[ue],l,n,t,r,o)}}function CM(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let o=r.indexOf("-")===-1?void 0:Fn.DashCase;i==null?n.removeStyle(e,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Fn.Important),n.setStyle(e,r,i,o))}}function xb(n,t,e,r){let i=ge(null);try{let o=t.tView,a=n[Z]&4096?4096:16,l=Pp(n,o,e,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[t.index];l[Ci]=c;let f=n[sr];return f!==null&&(l[sr]=f.createEmbeddedView(o)),Up(o,l,e),l}finally{ge(i)}}function Mh(n,t){return!t||t.firstChild===null||P0(n)}function Tb(n,t,e,r=!0){let i=t[ue];if(pM(i,t,n,e),r){let s=Th(e,n),a=t[Ue],l=a.parentNode(n[Si]);l!==null&&fM(i,n[kt],a,t,l,s)}let o=t[Fs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function _c(n,t,e,r,i=!1){for(;e!==null;){if(e.type===128){e=i?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&r.push(Pn(o)),dr(o)&&EM(o,r);let s=e.type;if(s&8)_c(n,t,e.child,r);else if(s&32){let a=Bp(e,t),l;for(;l=a();)r.push(l)}else if(s&16){let a=Db(t,e);if(Array.isArray(a))r.push(...a);else{let l=Di(t[en]);_c(l[ue],l,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function EM(n,t){for(let e=Ut;e<n.length;e++){let r=n[e],i=r[ue].firstChild;i!==null&&_c(r[ue],r,i,t)}n[Si]!==n[ur]&&t.push(n[Si])}var Mb=[];function SM(n){return n[jt]??DM(n)}function DM(n){let t=Mb.pop()??Object.create(xM);return t.lView=n,t}function IM(n){n.lView[jt]!==n&&(n.lView=null,Mb.push(n))}var xM=B(k({},hi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Gs(n.lView)},consumerOnSignalRead(){this.lView[jt]=this}});function TM(n){let t=n[jt]??Object.create(MM);return t.lView=n,t}var MM=B(k({},hi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=Di(n.lView);for(;t&&!Ab(t[ue]);)t=Di(t);t&&pp(t)},consumerOnSignalRead(){this.lView[jt]=this}});function Ab(n){return n.type!==2}function kb(n){if(n[Ei]===null)return;let t=!0;for(;t;){let e=!1;for(let r of n[Ei])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=e&&!!(n[Z]&8192)}}var AM=100;function Nb(n,t=!0,e=0){let i=n[or].rendererFactory,o=!1;o||i.begin?.();try{kM(n,e)}catch(s){throw t&&yb(n,s),s}finally{o||i.end?.()}}function kM(n,t){let e=s0();try{ac(!0),Ah(n,t);let r=0;for(;Oc(n);){if(r===AM)throw new T(103,!1);r++,Ah(n,1)}}finally{ac(e)}}function NM(n,t,e,r){if(Ws(t))return;let i=t[Z],o=!1,s=!1;yp(t);let a=!0,l=null,c=null;o||(Ab(n)?(c=SM(t),l=lo(c)):Qv()===null?(a=!1,c=TM(t),l=lo(c)):t[jt]&&(co(t[jt]),t[jt]=null));try{Xy(t),YI(n.bindingStartIndex),e!==null&&hb(n,t,e,2,r);let f=(i&3)===3;if(!o)if(f){let g=n.preOrderCheckHooks;g!==null&&Kl(t,g,null)}else{let g=n.preOrderHooks;g!==null&&Zl(t,g,0,null),$f(t,0)}if(s||PM(t),kb(t),Pb(t,0),n.contentQueries!==null&&H0(n,t),!o)if(f){let g=n.contentCheckHooks;g!==null&&Kl(t,g)}else{let g=n.contentHooks;g!==null&&Zl(t,g,1),$f(t,1)}RM(n,t);let p=n.components;p!==null&&Rb(t,p,0);let v=n.viewQuery;if(v!==null&&_h(2,v,r),!o)if(f){let g=n.viewCheckHooks;g!==null&&Kl(t,g)}else{let g=n.viewHooks;g!==null&&Zl(t,g,2),$f(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[Ql]){for(let g of t[Ql])g();t[Ql]=null}o||(t[Z]&=-73)}catch(f){throw o||Gs(t),f}finally{c!==null&&(Es(c,l),a&&IM(c)),bp()}}function Pb(n,t){for(let e=F0(n);e!==null;e=L0(e))for(let r=Ut;r<e.length;r++){let i=e[r];Ob(i,t)}}function PM(n){for(let t=F0(n);t!==null;t=L0(t)){if(!(t[Z]&2))continue;let e=t[Ao];for(let r=0;r<e.length;r++){let i=e[r];pp(i)}}}function OM(n,t,e){let r=On(t,n);Ob(r,e)}function Ob(n,t){hp(n)&&Ah(n,t)}function Ah(n,t){let r=n[ue],i=n[Z],o=n[jt],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ss(o)),s||=!1,o&&(o.dirty=!1),n[Z]&=-9217,s)NM(r,n,r.template,n[Xt]);else if(i&8192){kb(n),Pb(n,1);let a=r.components;a!==null&&Rb(n,a,1)}}function Rb(n,t,e){for(let r=0;r<t.length;r++)OM(n,t[r],e)}function RM(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let i=e[r];if(i<0)Ii(~i);else{let o=i,s=e[++r],a=e[++r];XI(s,o);let l=t[o];Jt(24,l),a(2,l),Jt(25,l)}}}finally{Ii(-1)}}function qp(n,t){let e=s0()?64:1088;for(n[or].changeDetectionScheduler?.notify(t);n;){n[Z]|=e;let r=Di(n);if(sc(n)&&!r)return n;n=r}return null}var Ti=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,e=t[ue];return _c(e,t,e.firstChild,[])}constructor(t,e,r=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=r}get context(){return this._lView[Xt]}get dirty(){return!!(this._lView[Z]&9280)||!!this._lView[jt]?.dirty}set context(t){this._lView[Xt]=t}get destroyed(){return Ws(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[ct];if(dr(t)){let e=t[oc],r=e?e.indexOf(this):-1;r>-1&&(xh(t,r),nc(e,r))}this._attachedToViewContainer=!1}Cb(this._lView[ue],this._lView)}onDestroy(t){e0(this._lView,t)}markForCheck(){qp(this._cdRefInjectingView||this._lView,4)}markForRefresh(){pp(this._cdRefInjectingView||this._lView)}detach(){this._lView[Z]&=-129}reattach(){sh(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,Nb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new T(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=sc(this._lView),e=this._lView[Ci];e!==null&&!t&&Hp(e,this._lView),bb(this._lView[ue],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new T(902,!1);this._appRef=t;let e=sc(this._lView),r=this._lView[Ci];r!==null&&!e&&wb(r,this._lView),sh(this._lView)}},Br=(()=>{class n{static __NG_ELEMENT_ID__=VM}return n})(),FM=Br,LM=class extends FM{_declarationLView;_declarationTContainer;elementRef;constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,r){let i=xb(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:r});return new Ti(i)}};function VM(){return Gc(wt(),pe())}function Gc(n,t){return n.type&4?new LM(t,n,Lo(n,t)):null}function jo(n,t,e,r,i){let o=n.data[t];if(o===null)o=jM(n,t,e,r,i),JI()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=r,o.attrs=i;let s=QI();o.injectorIndex=s===null?-1:s.injectorIndex}return ki(o,!0),o}function jM(n,t,e,r,i){let o=o0(),s=mp(),a=s?o:o&&o.parent,l=n.data[t]=BM(n,a,e,t,r,i);return UM(n,l,o,s),l}function UM(n,t,e,r){n.firstChild===null&&(n.firstChild=t),e!==null&&(r?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function BM(n,t,e,r,i,o){let s=t?t.injectorIndex:-1,a=0;return i0()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var I5=new RegExp(`^(\\d+)*(${Bx}|${Ux})*(.*)`);var $M=()=>null;function kh(n,t){return $M(n,t)}var Nh=class{},yc=class{},Ph=class{resolveComponentFactory(t){throw Error(`No component factory found for ${yt(t)}.`)}},Po=class{static NULL=new Ph},$r=class{},wn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>HM()}return n})();function HM(){let n=pe(),t=wt(),e=On(t.index,n);return(Vr(e)?e:n)[Ue]}var zM=(()=>{class n{static \u0275prov=M({token:n,providedIn:"root",factory:()=>null})}return n})();function bc(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=Jf(i,a);else if(o==2){let l=a,c=t[++s];r=Jf(r,l+": "+c+";")}}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}var wc=class extends Po{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=wi(t);return new Bs(e,this.ngModule)}};function ly(n,t){let e=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Ur.None;t?e.push({propName:s,templateName:r,isSignal:(a&Ur.SignalBased)!==0}):e.push({propName:s,templateName:r})}return e}function qM(n){let t=n.toLowerCase();return t==="svg"?FI:t==="math"?LI:null}var Bs=class extends yc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let t=this.componentDef,e=t.inputTransforms,r=ly(t.inputs,!0);if(e!==null)for(let i of r)e.hasOwnProperty(i.propName)&&(i.transform=e[i.propName]);return r}get outputs(){return ly(this.componentDef.outputs,!1)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=TT(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,r,i){let o=ge(null);try{i=i||this.ngModule;let s=i instanceof Mt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new ch(t,s):t,l=a.get($r,null);if(l===null)throw new T(407,!1);let c=a.get(zM,null),f=a.get(jr,null),p={rendererFactory:l,sanitizer:c,changeDetectionScheduler:f},v=l.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",y=r?VT(v,r,this.componentDef.encapsulation,a):ab(v,g,qM(g)),w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let E=null;y!==null&&(E=$0(y,a,!0));let N=Fp(0,null,null,1,0,null,null,null,null,null,null),F=Pp(null,N,null,w,null,null,p,v,a,null,E);F[bt]=y,yp(F);let V=null;try{let H=r?["ng-version","19.1.4"]:MT(this.componentDef.selectors[0]),W=jo(N,bt,2,"#host",H),[Ve,He]=vb(N,W,[this.componentDef]);gb(N,F,W,Ve,{},He);for(let at of Ve)W.mergedAttrs=No(W.mergedAttrs,at.hostAttrs);W.mergedAttrs=No(W.mergedAttrs,H),bc(W,W.mergedAttrs,!0),y&&(cb(v,y,W),Pi(y,F)),e!==void 0&&WM(W,this.ngContentSelectors,e),pb(N,F,W),Ap(N,W,F),Vc(N,W),V=On(W.index,F),F[Xt]=V[Xt],Up(N,F,null)}catch(H){throw V!==null&&mh(V),mh(F),H}finally{bp()}return new Oh(this.componentType,F)}finally{ge(o)}}},Oh=class extends Nh{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e){super(),this._rootLView=e,this._tNode=Yy(e[ue],bt),this.location=Lo(this._tNode,e),this.instance=On(this._tNode.index,e)[Xt],this.hostView=this.changeDetectorRef=new Ti(e,void 0,!1),this.componentType=t}setInput(t,e){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let o=this._rootLView;jp(o[ue],o,i,t,e),this.previousInputValues.set(t,e);let s=On(this._tNode.index,o);qp(s,1)}}get injector(){return new yi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function WM(n,t,e){let r=n.projection=[];for(let i=0;i<t.length;i++){let o=e[i];r.push(o!=null&&o.length?Array.from(o):null)}}var mr=(()=>{class n{static __NG_ELEMENT_ID__=GM}return n})();function GM(){let n=wt();return Lb(n,pe())}var QM=mr,Fb=class extends QM{_lContainer;_hostTNode;_hostLView;constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return Lo(this._hostTNode,this._hostLView)}get injector(){return new yi(this._hostTNode,this._hostLView)}get parentInjector(){let t=Cp(this._hostTNode,this._hostLView);if(v0(t)){let e=cc(t,this._hostLView),r=lc(t),i=e[ue].data[r+8];return new yi(i,e)}else return new yi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=cy(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Ut}createEmbeddedView(t,e,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=kh(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,i,Mh(this._hostTNode,s)),a}createComponent(t,e,r,i,o){let s=t&&!NI(t),a;if(s)a=e;else{let y=e||{};a=y.index,r=y.injector,i=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef}let l=s?t:new Bs(wi(t)),c=r||this.parentInjector;if(!o&&l.ngModule==null){let w=(s?c:this.parentInjector).get(Mt,null);w&&(o=w)}let f=wi(l.componentType??{}),p=kh(this._lContainer,f?.id??null),v=p?.firstChild??null,g=l.create(c,i,v,o);return this.insertImpl(g.hostView,a,Mh(this._hostTNode,p)),g}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){let i=t._lView;if(jI(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=i[ct],c=new Fb(l,l[kt],l[ct]);c.detach(c.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return Tb(s,i,o,r),t.attachToViewContainerRef(),Ny(Wf(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=cy(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),r=xh(this._lContainer,e);r&&(nc(Wf(this._lContainer),e),Cb(r[ue],r))}detach(t){let e=this._adjustIndex(t,-1),r=xh(this._lContainer,e);return r&&nc(Wf(this._lContainer),e)!=null?new Ti(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function cy(n){return n[oc]}function Wf(n){return n[oc]||(n[oc]=[])}function Lb(n,t){let e,r=t[n.index];return dr(r)?e=r:(e=_b(r,t,null,n),t[n.index]=e,Vp(t,e)),ZM(e,t,n,r),new Fb(e,n,t)}function KM(n,t){let e=n[Ue],r=e.createComment(""),i=vn(t,n),o=e.parentNode(i);return vc(e,o,r,e.nextSibling(i),!1),r}var ZM=XM,YM=()=>!1;function JM(n,t,e){return YM(n,t,e)}function XM(n,t,e,r){if(n[Si])return;let i;e.type&8?i=Pn(r):i=KM(t,e),n[Si]=i}var Rh=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Fh=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let r=t.contentQueries!==null?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)Wp(t,e).matches!==null&&this.queries[e].setDirty()}},Lh=class{flags;read;predicate;constructor(t,e,r=null){this.flags=e,this.read=r,typeof t=="string"?this.predicate=a1(t):this.predicate=t}},Vh=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){let i=e!==null?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},jh=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,e,e1(e,o)),this.matchTNodeWithReadOption(t,e,Yl(e,t,o,!1,!1))}else r===Br?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Yl(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Je||i===mr||i===Br&&e.type&4)this.addMatch(e.index,-2);else{let o=Yl(e,t,i,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function e1(n,t){let e=n.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1]}return null}function t1(n,t){return n.type&11?Lo(n,t):n.type&4?Gc(n,t):null}function n1(n,t,e,r){return e===-1?t1(t,n):e===-2?r1(n,t,r):js(n,n[ue],e,t)}function r1(n,t,e){if(e===Je)return Lo(t,n);if(e===Br)return Gc(t,n);if(e===mr)return Lb(t,n)}function Vb(n,t,e,r){let i=t[sr].queries[r];if(i.matches===null){let o=n.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let f=o[c];a.push(n1(t,f,s[l+1],e.metadata.read))}}i.matches=a}return i.matches}function Uh(n,t,e,r){let i=n.queries.getByIndex(e),o=i.matches;if(o!==null){let s=Vb(n,t,i,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],f=t[-l];for(let p=Ut;p<f.length;p++){let v=f[p];v[Ci]===v[ct]&&Uh(v[ue],v,c,r)}if(f[Ao]!==null){let p=f[Ao];for(let v=0;v<p.length;v++){let g=p[v];Uh(g[ue],g,c,r)}}}}}return r}function i1(n,t){return n[sr].queries[t].queryList}function o1(n,t,e){let r=new gc((e&4)===4);return $I(n,t,r,r.destroy),(t[sr]??=new Fh).queries.push(new Rh(r))-1}function s1(n,t,e){let r=ze();return r.firstCreatePass&&(l1(r,new Lh(n,t,e),-1),(t&2)===2&&(r.staticViewQueries=!0)),o1(r,pe(),t)}function a1(n){return n.split(",").map(t=>t.trim())}function l1(n,t,e){n.queries===null&&(n.queries=new Vh),n.queries.track(new jh(t,e))}function Wp(n,t){return n.queries.getByIndex(t)}function c1(n,t){let e=n[ue],r=Wp(e,t);return r.crossesNgTemplate?Uh(e,n,t,[]):Vb(e,n,r,t)}var Hr=class{},$s=class{};var Bh=class extends Hr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new wc(this);constructor(t,e,r,i=!0){super(),this.ngModuleType=t,this._parent=e;let o=Ry(t);this._bootstrapComponents=ib(o.bootstrap),this._r3Injector=I0(t,e,[{provide:Hr,useValue:this},{provide:Po,useValue:this.componentFactoryResolver},...r],yt(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},$h=class extends $s{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Bh(this.moduleType,t,[])}};var Cc=class extends Hr{injector;componentFactoryResolver=new wc(this);instance=null;constructor(t){super();let e=new Rs([...t.providers,{provide:Hr,useValue:this},{provide:Po,useValue:this.componentFactoryResolver}],t.parent||up(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Gp(n,t,e=null){return new Cc({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var u1=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=jy(!1,e.type),i=r.length>0?Gp([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=M({token:n,providedIn:"environment",factory:()=>new n(P(Mt))})}return n})();function K(n){return zs(()=>{let t=jb(n),e=B(k({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===O0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(u1).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Rn.Emulated,styles:n.styles||Tt,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&_n("NgStandalone"),Ub(e);let r=n.dependencies;return e.directiveDefs=dy(r,!1),e.pipeDefs=dy(r,!0),e.id=h1(e),e})}function d1(n){return wi(n)||Fy(n)}function f1(n){return n!==null}function Xe(n){return zs(()=>({type:n.type,bootstrap:n.bootstrap||Tt,declarations:n.declarations||Tt,imports:n.imports||Tt,exports:n.exports||Tt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function uy(n,t){if(n==null)return xo;let e={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Ur.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),t?(e[o]=a!==Ur.None?[r,a]:r,t[o]=s):e[o]=r}return e}function be(n){return zs(()=>{let t=jb(n);return Ub(t),t})}function Qp(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function jb(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||xo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Tt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uy(n.inputs,t),outputs:uy(n.outputs),debugInfo:null}}function Ub(n){n.features?.forEach(t=>t(n))}function dy(n,t){if(!n)return null;let e=t?Ly:d1;return()=>(typeof n=="function"?n():n).map(r=>e(r)).filter(f1)}function h1(n){let t=0,e=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function p1(n){return Object.getPrototypeOf(n.prototype).constructor}function Nt(n){let t=p1(n.type),e=!0,r=[n];for(;t;){let i;if(ar(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new T(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);let s=n;s.inputs=ql(n.inputs),s.inputTransforms=ql(n.inputTransforms),s.declaredInputs=ql(n.declaredInputs),s.outputs=ql(n.outputs);let a=i.hostBindings;a&&y1(n,a);let l=i.viewQuery,c=i.contentQueries;if(l&&v1(n,l),c&&_1(n,c),m1(n,i),YD(n.outputs,i.outputs),ar(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Nt&&(e=!1)}}t=Object.getPrototypeOf(t)}g1(r)}function m1(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let r=t.inputs[e];if(r!==void 0&&(n.inputs[e]=r,n.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=t.inputTransforms[i]}}}function g1(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=No(i.hostAttrs,e=No(e,i.hostAttrs))}}function ql(n){return n===xo?{}:n===Tt?[]:n}function v1(n,t){let e=n.viewQuery;e?n.viewQuery=(r,i)=>{t(r,i),e(r,i)}:n.viewQuery=t}function _1(n,t){let e=n.contentQueries;e?n.contentQueries=(r,i,o)=>{t(r,i,o),e(r,i,o)}:n.contentQueries=t}function y1(n,t){let e=n.hostBindings;e?n.hostBindings=(r,i)=>{t(r,i),e(r,i)}:n.hostBindings=t}function Oi(n){let t=n.inputConfig,e={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r];Array.isArray(i)&&i[3]&&(e[r]=i[3])}n.inputTransforms=e}function Bb(n){return Kp(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function b1(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),r;for(;!(r=e.next()).done;)t(r.value)}}function Kp(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function w1(n,t,e){return n[t]=e}function zr(n,t,e){let r=n[t];return Object.is(r,e)?!1:(n[t]=e,!0)}function $b(n,t,e,r){let i=zr(n,t,e);return zr(n,t+1,r)||i}function C1(n,t,e,r,i,o,s,a,l){let c=t.consts,f=jo(t,n,4,s||null,a||null);Lp(t,e,f,ko(c,l)),Vc(t,f);let p=f.tView=Fp(2,f,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,f),p.queries=t.queries.embeddedTView(f)),f}function Hb(n,t,e,r,i,o,s,a,l,c){let f=e+bt,p=t.firstCreatePass?C1(f,t,n,r,i,o,s,a,l):t.data[f];ki(p,!1);let v=E1(t,n,p,e);Fc()&&qc(t,n,v,p),Pi(v,n);let g=_b(v,n,v,p);return n[f]=g,Vp(n,g),JM(g,p,n),Pc(p)&&Op(t,n,p),l!=null&&Rp(n,p,c),p}function A(n,t,e,r,i,o,s,a){let l=pe(),c=ze(),f=ko(c.consts,o);return Hb(l,c,n,t,e,r,i,f,s,a),A}var E1=S1;function S1(n,t,e,r){return Lc(!0),t[Ue].createComment("")}var Zp=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var zb=new L("");function Ri(n){return!!n&&typeof n.then=="function"}function qb(n){return!!n&&typeof n.subscribe=="function"}var Wb=new L("");var Gb=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=I(Wb,{optional:!0})??[];injector=I(ut);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let o=Bt(this.injector,i);if(Ri(o))e.push(o);else if(qb(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qb=(()=>{class n{static \u0275prov=M({token:n,providedIn:"root",factory:()=>new Ec})}return n})(),Ec=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let e=t.zone,r=this.queues.get(e);r.has(t)&&(r.delete(t),this.queuedEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}},Qc=new L("");function D1(){o_(()=>{throw new T(600,!1)})}function I1(n){return n.isBoundToModule}var x1=10;function T1(n,t,e){try{let r=e();return Ri(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}var cr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=I(Mx);afterRenderManager=I(B0);zonelessEnabled=I(Uc);rootEffectScheduler=I(Qb);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Pe;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=I(hr).hasPendingTasks.pipe(q(e=>!e));constructor(){I(Vo,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=I(Mt);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){let i=e instanceof yc;if(!this._injector.get(Gb).done){let v=!i&&Vy(e),g=!1;throw new T(405,g)}let s;i?s=e:s=this._injector.get(Po).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=I1(s)?void 0:this._injector.get(Hr),l=r||s.selector,c=s.create(ut.NULL,[],l,a),f=c.location.nativeElement,p=c.injector.get(zb,null);return p?.registerApplication(f),c.onDestroy(()=>{this.detachView(c.hostView),Jl(this.components,c),p?.unregisterApplication(f)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(Tp.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new T(101,!1);let e=ge(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ge(e),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get($r,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let e=0;for(;this.dirtyFlags!==0&&e++<x1;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)M1(r,i,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Oc(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;Jl(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Qc,[]).forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Jl(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new T(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jl(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function M1(n,t,e,r){if(!e&&!Oc(n))return;Nb(n,t,e&&!r?0:1)}function Gr(n,t,e,r){let i=pe(),o=Rc();if(zr(i,o,t)){let s=ze(),a=wp();rM(a,i,n,t,e,r)}return Gr}function A1(n,t,e,r){return zr(n,Rc(),e)?t+Io(e)+r:bn}function k1(n,t,e,r,i,o){let s=ZI(),a=$b(n,s,e,i);return vp(2),a?t+Io(e)+r+Io(i)+o:bn}function Wl(n,t){return n<<17|t<<2}function Mi(n){return n>>17&32767}function N1(n){return(n&2)==2}function P1(n,t){return n&131071|t<<17}function Hh(n){return n|2}function Oo(n){return(n&131068)>>2}function Gf(n,t){return n&-131069|t<<2}function O1(n){return(n&1)===1}function zh(n){return n|1}function R1(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Mi(s),l=Oo(s);n[r]=e;let c=!1,f;if(Array.isArray(e)){let p=e;f=p[1],(f===null||qs(p,f)>0)&&(c=!0)}else f=e;if(i)if(l!==0){let v=Mi(n[a+1]);n[r+1]=Wl(v,a),v!==0&&(n[v+1]=Gf(n[v+1],r)),n[a+1]=P1(n[a+1],r)}else n[r+1]=Wl(a,0),a!==0&&(n[a+1]=Gf(n[a+1],r)),a=r;else n[r+1]=Wl(l,0),a===0?a=r:n[l+1]=Gf(n[l+1],r),l=r;c&&(n[r+1]=Hh(n[r+1])),fy(n,f,r,!0),fy(n,f,r,!1),F1(t,f,n,r,o),s=Wl(a,l),o?t.classBindings=s:t.styleBindings=s}function F1(n,t,e,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&qs(o,t)>=0&&(e[r+1]=zh(e[r+1]))}function fy(n,t,e,r){let i=n[e+1],o=t===null,s=r?Mi(i):Oo(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],c=n[s+1];L1(l,t)&&(a=!0,n[s+1]=r?zh(c):Hh(c)),s=r?Mi(c):Oo(c)}a&&(n[e+1]=r?Hh(i):zh(i))}function L1(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?qs(n,t)>=0:!1}var mn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function V1(n){return n.substring(mn.key,mn.keyEnd)}function j1(n){return U1(n),Kb(n,Zb(n,0,mn.textEnd))}function Kb(n,t){let e=mn.textEnd;return e===t?-1:(t=mn.keyEnd=B1(n,mn.key=t,e),Zb(n,t,e))}function U1(n){mn.key=0,mn.keyEnd=0,mn.value=0,mn.valueEnd=0,mn.textEnd=n.length}function Zb(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function B1(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function _(n,t,e){let r=pe(),i=Rc();if(zr(r,i,t)){let o=ze(),s=wp();mb(o,s,r,n,t,r[Ue],e,!1)}return _}function qh(n,t,e,r,i){let o=t.inputs,s=i?"class":"style";jp(n,e,o[s],s,r)}function jn(n,t,e){return Jb(n,t,e,!1),jn}function Y(n,t){return Jb(n,t,null,!0),Y}function Yb(n){H1(K1,$1,n,!0)}function $1(n,t){for(let e=j1(t);e>=0;e=Kb(t,e))lp(n,V1(t),!0)}function Jb(n,t,e,r){let i=pe(),o=ze(),s=vp(2);if(o.firstUpdatePass&&ew(o,n,s,r),t!==bn&&zr(i,s,t)){let a=o.data[qr()];tw(o,a,i,i[Ue],n,i[s+1]=Y1(t,e),r,s)}}function H1(n,t,e,r){let i=ze(),o=vp(2);i.firstUpdatePass&&ew(i,null,o,r);let s=pe();if(e!==bn&&zr(s,o,e)){let a=i.data[qr()];if(nw(a,r)&&!Xb(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=Jf(l,e||"")),qh(i,a,s,e,r)}else Z1(i,a,s,s[Ue],s[o+1],s[o+1]=Q1(n,t,e),r,o)}}function Xb(n,t){return t>=n.expandoStartIndex}function ew(n,t,e,r){let i=n.data;if(i[e+1]===null){let o=i[qr()],s=Xb(n,e);nw(o,r)&&t===null&&!s&&(t=!1),t=z1(i,o,t,r),R1(i,o,t,e,s,r)}}function z1(n,t,e,r){let i=tx(n),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(e=Qf(null,n,t,e,r),e=Hs(e,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==i)if(e=Qf(i,n,t,e,r),o===null){let l=q1(n,t,r);l!==void 0&&Array.isArray(l)&&(l=Qf(null,n,t,l[1],r),l=Hs(l,t.attrs,r),W1(n,t,r,l))}else o=G1(n,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),e}function q1(n,t,e){let r=e?t.classBindings:t.styleBindings;if(Oo(r)!==0)return n[Mi(r)]}function W1(n,t,e,r){let i=e?t.classBindings:t.styleBindings;n[Mi(i)]=r}function G1(n,t,e){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Hs(r,s,e)}return Hs(r,t.attrs,e)}function Qf(n,t,e,r,i){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],r=Hs(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),r}function Hs(n,t,e){let r=e?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),lp(n,s,e?!0:t[++o]))}return n===void 0?null:n}function Q1(n,t,e){if(e==null||e==="")return Tt;let r=[],i=yn(e);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function K1(n,t,e){let r=String(t);r!==""&&!r.includes(" ")&&lp(n,r,e)}function Z1(n,t,e,r,i,o,s,a){i===bn&&(i=Tt);let l=0,c=0,f=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;f!==null||p!==null;){let v=l<i.length?i[l+1]:void 0,g=c<o.length?o[c+1]:void 0,y=null,w;f===p?(l+=2,c+=2,v!==g&&(y=p,w=g)):p===null||f!==null&&f<p?(l+=2,y=f):(c+=2,y=p,w=g),y!==null&&tw(n,t,e,r,y,w,s,a),f=l<i.length?i[l]:null,p=c<o.length?o[c]:null}}function tw(n,t,e,r,i,o,s,a){if(!(t.type&3))return;let l=n.data,c=l[a+1],f=O1(c)?hy(l,t,e,i,Oo(c),s):void 0;if(!Sc(f)){Sc(o)||N1(c)&&(o=hy(l,null,e,i,a,s));let p=Zy(qr(),e);CM(r,s,p,i,o)}}function hy(n,t,e,r,i,o){let s=t===null,a;for(;i>0;){let l=n[i],c=Array.isArray(l),f=c?l[1]:l,p=f===null,v=e[i+1];v===bn&&(v=p?Tt:void 0);let g=p?Uf(v,r):f===r?v:void 0;if(c&&!Sc(g)&&(g=Uf(l,r)),Sc(g)&&(a=g,s))return a;let y=n[i+1];i=s?Mi(y):Oo(y)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=Uf(l,r))}return a}function Sc(n){return n!==void 0}function Y1(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=yt(yn(n)))),n}function nw(n,t){return(n.flags&(t?8:16))!==0}function J1(n,t,e,r,i,o){let s=t.consts,a=ko(s,i),l=jo(t,n,2,r,a);return Lp(t,e,l,ko(s,o)),l.attrs!==null&&bc(l,l.attrs,!1),l.mergedAttrs!==null&&bc(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function d(n,t,e,r){let i=pe(),o=ze(),s=bt+n,a=i[Ue],l=o.firstCreatePass?J1(s,o,i,t,e,r):o.data[s],c=X1(o,i,l,a,t,n);i[s]=c;let f=Pc(l);return ki(l,!0),cb(a,c,l),!$p(l)&&Fc()&&qc(o,i,c,l),HI()===0&&Pi(c,i),zI(),f&&(Op(o,i,l),Ap(o,l,i)),r!==null&&Rp(i,l),d}function u(){let n=wt();mp()?gp():(n=n.parent,ki(n,!1));let t=n;WI(t)&&GI(),qI();let e=ze();return e.firstCreatePass&&(Vc(e,n),fp(n)&&e.queries.elementEnd(n)),t.classesWithoutHost!=null&&lx(t)&&qh(e,t,pe(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&cx(t)&&qh(e,t,pe(),t.stylesWithoutHost,!1),u}function R(n,t,e,r){return d(n,t,e,r),u(),R}var X1=(n,t,e,r,i,o)=>(Lc(!0),ab(r,i,ix()));function eA(n,t,e,r,i){let o=t.consts,s=ko(o,r),a=jo(t,n,8,"ng-container",s);s!==null&&bc(a,s,!0);let l=ko(o,i);return Lp(t,e,a,l),t.queries!==null&&t.queries.elementStart(t,a),a}function Un(n,t,e){let r=pe(),i=ze(),o=n+bt,s=i.firstCreatePass?eA(o,i,r,t,e):i.data[o];ki(s,!0);let a=tA(i,r,s,n);return r[o]=a,Fc()&&qc(i,r,a,s),Pi(a,r),Pc(s)&&(Op(i,r,s),Ap(i,s,r)),e!=null&&Rp(r,s),Un}function Bn(){let n=wt(),t=ze();return mp()?gp():(n=n.parent,ki(n,!1)),t.firstCreatePass&&(Vc(t,n),fp(n)&&t.queries.elementEnd(n)),Bn}var tA=(n,t,e,r)=>(Lc(!0),NT(t[Ue],""));function J(){return pe()}var _i=void 0;function nA(n){let t=n,e=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&r===0?1:5}var rA=["en",[["a","p"],["AM","PM"],_i],[["AM","PM"],_i,_i],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_i,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_i,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_i,"{1} 'at' {0}",_i],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",nA],Kf={};function $t(n){let t=iA(n),e=py(t);if(e)return e;let r=t.split("-")[0];if(e=py(r),e)return e;if(r==="en")return rA;throw new T(701,!1)}function py(n){return n in Kf||(Kf[n]=ir.ng&&ir.ng.common&&ir.ng.common.locales&&ir.ng.common.locales[n]),Kf[n]}var Be=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Be||{});function iA(n){return n.toLowerCase().replace(/_/g,"-")}var Dc="en-US";var oA=Dc;function sA(n){typeof n=="string"&&(oA=n.toLowerCase().replace(/_/g,"-"))}var aA=(n,t,e)=>{};function C(n,t,e,r){let i=pe(),o=ze(),s=wt();return rw(o,i,i[Ue],s,n,t,r),C}function lA(n,t,e,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===e&&i[o+1]===r){let a=t[ic],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function rw(n,t,e,r,i,o,s){let a=Pc(r),c=n.firstCreatePass&&n0(n),f=t[Xt],p=t0(t),v=!0;if(r.type&3||s){let w=vn(r,t),E=s?s(w):w,N=p.length,F=s?H=>s(Pn(H[r.index])):r.index,V=null;if(!s&&a&&(V=lA(n,t,i,r.index)),V!==null){let H=V.__ngLastListenerFn__||V;H.__ngNextListenerFn__=o,V.__ngLastListenerFn__=o,v=!1}else{o=gy(r,t,f,o),aA(w,i,o);let H=e.listen(E,i,o);p.push(o,H),c&&c.push(i,F,N,N+1)}}else o=gy(r,t,f,o);let g=r.outputs,y;if(v&&g!==null&&(y=g[i])){let w=y.length;if(w)for(let E=0;E<w;E+=2){let N=y[E],F=y[E+1],W=t[N][F].subscribe(o),Ve=p.length;p.push(o,W),c&&c.push(i,r.index,Ve,-(Ve+1))}}}function my(n,t,e,r){let i=ge(null);try{return Jt(6,t,e),e(r)!==!1}catch(o){return yb(n,o),!1}finally{Jt(7,t,e),ge(i)}}function gy(n,t,e,r){return function i(o){if(o===Function)return r;let s=Ai(n)?On(n.index,t):t;qp(s,5);let a=my(t,e,r,o),l=i.__ngNextListenerFn__;for(;l;)a=my(t,e,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function b(n=1){return rx(n)}function cA(n,t){let e=null,r=ET(n);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){e=i;continue}if(r===null?sb(n,o,!0):IT(r,o))return i}return e}function Yp(n){let t=pe()[en][kt];if(!t.projection){let e=n?n.length:1,r=t.projection=_I(e,null),i=r.slice(),o=t.child;for(;o!==null;){if(o.type!==128){let s=n?cA(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function Jp(n,t=0,e,r,i,o){let s=pe(),a=ze(),l=r?n+1:null;l!==null&&Hb(s,a,l,r,i,o,null,e);let c=jo(a,bt+n,16,null,e||null);c.projection===null&&(c.projection=t),gp();let p=!s[Fs]||i0();s[en][kt].projection[c.projection]===null&&l!==null?uA(s,a,l):p&&!$p(c)&&bM(a,s,c)}function uA(n,t,e){let r=bt+e,i=t.data[r],o=n[r],s=kh(o,i.tView.ssrId),a=xb(n,i,void 0,{dehydratedView:s});Tb(o,a,0,Mh(i,s))}function Xp(n,t,e){s1(n,t,e)}function Kc(n){let t=pe(),e=ze(),r=l0();_p(r+1);let i=Wp(e,r);if(n.dirty&&VI(t)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=c1(t,r);n.reset(o,Nx),n.notifyOnChanges()}return!0}return!1}function Zc(){return i1(pe(),l0())}function dA(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}function $n(n){let t=KI();return Jy(t,bt+n)}function h(n,t=""){let e=pe(),r=ze(),i=n+bt,o=r.firstCreatePass?jo(r,i,1,t,null):r.data[i],s=fA(r,e,o,t,n);e[i]=s,Fc()&&qc(r,e,s,o),ki(o,!1)}var fA=(n,t,e,r,i)=>(Lc(!0),AT(t[Ue],r));function O(n){return ee("",n,""),O}function ee(n,t,e){let r=pe(),i=A1(r,n,t,e);return i!==bn&&iw(r,qr(),i),ee}function Zs(n,t,e,r,i){let o=pe(),s=k1(o,n,t,e,r,i);return s!==bn&&iw(o,qr(),s),Zs}function iw(n,t,e){let r=Zy(t,n);kT(n[Ue],r,e)}function te(n,t,e){N0(t)&&(t=t());let r=pe(),i=Rc();if(zr(r,i,t)){let o=ze(),s=wp();mb(o,s,r,n,t,r[Ue],e,!1)}return te}function re(n,t){let e=N0(n);return e&&n.set(t),e}function ne(n,t){let e=pe(),r=ze(),i=wt();return rw(r,e,e[Ue],i,n,t),ne}function hA(n,t,e){let r=ze();if(r.firstCreatePass){let i=ar(n);Wh(e,r.data,r.blueprint,i,!0),Wh(t,r.data,r.blueprint,i,!1)}}function Wh(n,t,e,r,i){if(n=_t(n),Array.isArray(n))for(let o=0;o<n.length;o++)Wh(n[o],t,e,r,i);else{let o=ze(),s=pe(),a=wt(),l=Mo(n)?n:_t(n.provide),c=$y(n),f=a.providerIndexes&1048575,p=a.directiveStart,v=a.providerIndexes>>20;if(Mo(n)||!n.multi){let g=new xi(c,i,x),y=Yf(l,t,i?f:f+v,p);y===-1?(dh(dc(a,s),o,l),Zf(o,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(g),s.push(g)):(e[y]=g,s[y]=g)}else{let g=Yf(l,t,f+v,p),y=Yf(l,t,f,f+v),w=g>=0&&e[g],E=y>=0&&e[y];if(i&&!E||!i&&!w){dh(dc(a,s),o,l);let N=gA(i?mA:pA,e.length,i,r,c);!i&&E&&(e[y].providerFactory=N),Zf(o,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(N),s.push(N)}else{let N=ow(e[i?y:g],c,!i&&r);Zf(o,n,g>-1?g:y,N)}!i&&r&&E&&e[y].componentProviders++}}}function Zf(n,t,e,r){let i=Mo(t),o=DI(t);if(i||o){let l=(o?_t(t.useClass):t).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){let f=c.indexOf(e);f===-1?c.push(e,[r,l]):c[f+1].push(r,l)}else c.push(e,l)}}}function ow(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Yf(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function pA(n,t,e,r){return Gh(this.multi,[])}function mA(n,t,e,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=js(e,e[ue],this.providerFactory.index,r);o=a.slice(0,s),Gh(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Gh(i,o);return o}function Gh(n,t){for(let e=0;e<n.length;e++){let r=n[e];t.push(r())}return t}function gA(n,t,e,r,i){let o=new xi(n,e,x);return o.multi=[],o.index=t,o.componentProviders=0,ow(o,i,r&&!e),o}function nn(n,t=[]){return e=>{e.providersResolver=(r,i)=>hA(r,i?i(n):n,t)}}function Cn(n,t,e,r,i){return sw(pe(),a0(),n,t,e,r,i)}function vA(n,t){let e=n[t];return e===bn?void 0:e}function sw(n,t,e,r,i,o,s){let a=t+e;return $b(n,a,i,o)?w1(n,a+2,s?r.call(s,i,o):r(i,o)):vA(n,a+2)}function ht(n,t){let e=ze(),r,i=n+bt;e.firstCreatePass?(r=_A(t,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks??=[]).push(i,r.onDestroy)):r=e.data[i];let o=r.factory||(r.factory=bi(r.type,!0)),s,a=xt(x);try{let l=uc(!1),c=o();return uc(l),dA(e,pe(),i,c),c}finally{xt(a)}}function _A(n,t){if(t)for(let e=t.length-1;e>=0;e--){let r=t[e];if(n===r.name)return r}}function pt(n,t,e,r){let i=n+bt,o=pe(),s=Jy(o,i);return yA(o,i)?sw(o,a0(),t,s.transform,e,r,s):s.transform(e,r)}function yA(n,t){return n[ue].data[t].pure}function Qr(n,t){return Gc(n,t)}var Qh=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},em=(()=>{class n{compileModuleSync(e){return new $h(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),i=Ry(e),o=ib(i.declarations).reduce((s,a)=>{let l=wi(a);return l&&s.push(new Bs(l)),s},[]);return new Qh(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bA=(()=>{class n{zone=I(De);changeDetectionScheduler=I(jr);applicationRef=I(cr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wA({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new De(B(k({},CA()),{scheduleInRootZone:e})),[{provide:De,useFactory:n},{provide:To,multi:!0,useFactory:()=>{let r=I(bA,{optional:!0});return()=>r.initialize()}},{provide:To,multi:!0,useFactory:()=>{let r=I(EA);return()=>{r.initialize()}}},t===!0?{provide:T0,useValue:!0}:[],{provide:Ep,useValue:e??x0}]}function CA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var EA=(()=>{class n{subscription=new Ne;initialized=!1;zone=I(De);pendingTasks=I(hr);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var aw=(()=>{class n{appRef=I(cr);taskService=I(hr);ngZone=I(De);zonelessEnabled=I(Uc);tracing=I(Vo,{optional:!0});disableScheduling=I(T0,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ne;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(pc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(I(Ep,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof mc||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let r=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?W_:M0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(pc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(e),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,W_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lw(){return _n("NgZoneless"),Ro([{provide:jr,useExisting:aw},{provide:De,useClass:mc},{provide:Uc,useValue:!0},{provide:Ep,useValue:!1},[]])}function SA(){return typeof $localize<"u"&&$localize.locale||Dc}var Uo=new L("",{providedIn:"root",factory:()=>I(Uo,ae.Optional|ae.SkipSelf)||SA()});var Kh=new L(""),DA=new L("");function As(n){return!n.moduleRef}function IA(n){let t=As(n)?n.r3Injector:n.moduleRef.injector,e=t.get(De);return e.run(()=>{As(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=t.get(At,null),i;if(e.runOutsideAngular(()=>{i=e.onError.subscribe({next:o=>{r.handleError(o)}})}),As(n)){let o=()=>t.destroy(),s=n.platformInjector.get(Kh);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Kh);s.add(o),n.moduleRef.onDestroy(()=>{Jl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return T1(r,e,()=>{let o=t.get(Gb);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(Uo,Dc);if(sA(s||Dc),!t.get(DA,!0))return As(n)?t.get(cr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(As(n)){let l=t.get(cr);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return xA(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function xA(n,t){let e=n.injector.get(cr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>e.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new T(-403,!1);t.push(n)}var Xl=null;function TA(n=[],t){return ut.create({name:t,providers:[{provide:kc,useValue:"platform"},{provide:Kh,useValue:new Set([()=>Xl=null])},...n]})}function MA(n=[]){if(Xl)return Xl;let t=TA(n);return Xl=t,D1(),AA(t),t}function AA(n){let t=n.get(xp,null);Bt(n,()=>{t?.forEach(e=>e())})}var Ae=(()=>{class n{static __NG_ELEMENT_ID__=kA}return n})();function kA(n){return NA(wt(),pe(),(n&16)===16)}function NA(n,t,e){if(Ai(n)&&!e){let r=On(n.index,t);return new Ti(r,r)}else if(n.type&175){let r=t[en];return new Ti(r,t)}return null}var Zh=class{constructor(){}supports(t){return Bb(t)}create(t){return new Yh(t)}},PA=(n,t)=>t,Yh=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||PA}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){let s=!r||e&&e.currentIndex<vy(r,i,o)?e:r,a=vy(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,s.previousIndex==null)i++;else{o||(o=[]);let c=a-i,f=l-i;if(c!=f){for(let v=0;v<c;v++){let g=v<o.length?o[v]:o[v]=0,y=g+v;f<=y&&y<c&&(o[v]=g+1)}let p=s.previousIndex;o[p]=f-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!Bb(t))throw new T(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),r=!0):(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else i=0,b1(t,a=>{s=this._trackByFn(i,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,i),r=!0):(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):t=this._addAfter(new Jh(e,r),o,i)),t}_verifyReinsertion(t,e,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){let i=e===null?this._itHead:e._next;return t._next=i,t._prev=e,i===null?this._itTail=t:i._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Ic),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,r=t._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ic),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Jh=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},Xh=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let e=t._prevDup,r=t._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},Ic=class{map=new Map;put(t){let e=t.trackById,r=this.map.get(e);r||(r=new Xh,this.map.set(e,r)),r.add(t)}get(t,e){let r=t,i=this.map.get(r);return i?i.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function vy(n,t,e){let r=n.previousIndex;if(r===null)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}var ep=class{constructor(){}supports(t){return t instanceof Map||Kp(t)}create(){return new tp}},tp=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||Kp(t)))throw new T(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(i,r);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let i=this._records.get(t);this._maybeAddToChanges(i,e);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new np(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}},np=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(t){this.key=t}};function _y(){return new tm([new Zh])}var tm=(()=>{class n{factories;static \u0275prov=M({token:n,providedIn:"root",factory:_y});constructor(e){this.factories=e}static create(e,r){if(r!=null){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||_y()),deps:[[n,new sp,new Ac]]}}find(e){let r=this.factories.find(i=>i.supports(e));if(r!=null)return r;throw new T(901,!1)}}return n})();function yy(){return new nm([new ep])}var nm=(()=>{class n{static \u0275prov=M({token:n,providedIn:"root",factory:yy});factories;constructor(e){this.factories=e}static create(e,r){if(r){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||yy()),deps:[[n,new sp,new Ac]]}}find(e){let r=this.factories.find(i=>i.supports(e));if(r)return r;throw new T(901,!1)}}return n})();function cw(n){try{let{rootComponent:t,appProviders:e,platformProviders:r}=n,i=MA(r),o=[wA({}),{provide:jr,useExisting:aw},...e||[]],s=new Cc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return IA({r3Injector:s.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}}function En(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function et(n,t){_n("NgSignals");let e=n_(n);return t?.equal&&(e[St].equal=t.equal),e}function gr(n){let t=ge(null);try{return n()}finally{ge(t)}}var uw=(()=>{class n{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=OA}return n})();function OA(){return new uw(pe(),wt())}var RA=!1,FA=(()=>{class n extends Ec{pendingTasks=I(hr);taskId=null;schedule(e){super.schedule(e),this.taskId===null&&(this.taskId=this.pendingTasks.add(),queueMicrotask(()=>this.flush()))}flush(){try{super.flush()}finally{this.taskId!==null&&(this.pendingTasks.remove(this.taskId),this.taskId=null)}}static \u0275prov=M({token:n,providedIn:"root",factory:()=>new n})}return n})(),rp=class{scheduler;effectFn;zone;injector;unregisterOnDestroy;watcher;constructor(t,e,r,i,o,s){this.scheduler=t,this.effectFn=e,this.zone=r,this.injector=o,this.watcher=l_(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(t){try{this.effectFn(t)}catch(e){this.injector.get(At,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.schedule(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function LA(){}function VA(n,t){_n("NgSignals"),!t?.injector&&dp(LA);let e=t?.injector??I(ut),r=t?.manualCleanup!==!0?e.get(Ni):null,i=new rp(e.get(FA),n,typeof Zone>"u"?null:Zone.current,r,e,t?.allowSignalWrites??!1),o=e.get(Ae,null,{optional:!0});return!o||!(o._lView[Z]&8)?i.watcher.notify():(o._lView[Ql]??=[]).push(i.watcher.notify),i}var jA=RA;var ip=class{[St];constructor(t){this[St]=t}destroy(){this[St].destroy()}};function Kr(n,t){if(jA)return VA(n,t);_n("NgSignals"),!t?.injector&&dp(Kr);let e=t?.injector??I(ut),r=t?.manualCleanup!==!0?e.get(Ni):null,i,o=e.get(uw,null,{optional:!0}),s=e.get(jr);return o!==null&&!t?.forceRoot?(i=$A(o.view,s,n),r instanceof hc&&r._lView===o.view&&(r=null)):i=HA(n,e.get(Qb),s),i.injector=e,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new ip(i)}var dw=B(k({},hi),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Us,run(){if(this.dirty=!1,this.hasRun&&!Ss(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),t=lo(this),e=ac(!1);try{this.maybeCleanup(),this.fn(n)}finally{ac(e),Es(this,t)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),UA=B(k({},dw),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(13)},destroy(){co(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),BA=B(k({},dw),{consumerMarkedDirty(){this.view[Z]|=8192,Gs(this.view),this.notifier.notify(14)},destroy(){co(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Ei]?.delete(this)}});function $A(n,t,e){let r=Object.create(BA);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=t,r.fn=e,n[Ei]??=new Set,n[Ei].add(r),r.consumerMarkedDirty(r),r}function HA(n,t,e){let r=Object.create(UA);return r.fn=n,r.scheduler=t,r.notifier=e,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(13),r}var yw=null;function br(){return yw}function bw(n){yw??=n}var ou=class{};var Oe=new L(""),fm=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>I(zA),providedIn:"platform"})}return n})();var zA=(()=>{class n extends fm{_location;_history;_doc=I(Oe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return br().getBaseHref(this._doc)}onPopState(e){let r=br().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=br().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function hm(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function fw(n){let t=n.match(/#|\?|$/),e=t&&t.index||n.length,r=e-(n[e-1]==="/"?1:0);return n.slice(0,r)+n.slice(e)}function _r(n){return n&&n[0]!=="?"?"?"+n:n}var Zr=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>I(Cw),providedIn:"root"})}return n})(),ww=new L(""),Cw=(()=>{class n extends Zr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??I(Oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return hm(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+_r(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+_r(o));this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+_r(o));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(P(fm),P(ww,8))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ew=(()=>{class n extends Zr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(e){let r=hm(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+_r(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+_r(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(P(fm),P(ww,8))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),Js=(()=>{class n{_subject=new Pe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=GA(fw(hw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+_r(r))}normalize(e){return n.stripTrailingSlash(WA(this._basePath,hw(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+_r(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+_r(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=_r;static joinWithSlash=hm;static stripTrailingSlash=fw;static \u0275fac=function(r){return new(r||n)(P(Zr))};static \u0275prov=M({token:n,factory:()=>qA(),providedIn:"root"})}return n})();function qA(){return new Js(P(Zr))}function WA(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function hw(n){return n.replace(/\/index.html$/,"")}function GA(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var Sw=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Sw||{});var Ct=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Ct||{}),xe=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(xe||{}),Ht=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ht||{}),zt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function QA(n){return $t(n)[Be.LocaleId]}function KA(n,t,e){let r=$t(n),i=[r[Be.DayPeriodsFormat],r[Be.DayPeriodsStandalone]],o=rn(i,t);return rn(o,e)}function ZA(n,t,e){let r=$t(n),i=[r[Be.DaysFormat],r[Be.DaysStandalone]],o=rn(i,t);return rn(o,e)}function YA(n,t,e){let r=$t(n),i=[r[Be.MonthsFormat],r[Be.MonthsStandalone]],o=rn(i,t);return rn(o,e)}function JA(n,t){let r=$t(n)[Be.Eras];return rn(r,t)}function Yc(n,t){let e=$t(n);return rn(e[Be.DateFormat],t)}function Jc(n,t){let e=$t(n);return rn(e[Be.TimeFormat],t)}function Xc(n,t){let r=$t(n)[Be.DateTimeFormat];return rn(r,t)}function yr(n,t){let e=$t(n),r=e[Be.NumberSymbols][t];if(typeof r>"u"){if(t===zt.CurrencyDecimal)return e[Be.NumberSymbols][zt.Decimal];if(t===zt.CurrencyGroup)return e[Be.NumberSymbols][zt.Group]}return r}function XA(n,t){return $t(n)[Be.NumberFormats][t]}function Dw(n){if(!n[Be.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Be.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ek(n){let t=$t(n);return Dw(t),(t[Be.ExtraData][2]||[]).map(r=>typeof r=="string"?rm(r):[rm(r[0]),rm(r[1])])}function tk(n,t,e){let r=$t(n);Dw(r);let i=[r[Be.ExtraData][0],r[Be.ExtraData][1]],o=rn(i,t)||[];return rn(o,e)||[]}function rn(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function rm(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var nk=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,eu={},rk=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function ik(n,t,e,r){let i=hk(n);t=vr(e,t)||t;let s=[],a;for(;t;)if(a=rk.exec(t),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;t=f}else{s.push(t);break}let l=i.getTimezoneOffset();r&&(l=xw(r,l),i=fk(i,r,!0));let c="";return s.forEach(f=>{let p=uk(f);c+=p?p(i,e,l):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function su(n,t,e){let r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function vr(n,t){let e=QA(n);if(eu[e]??={},eu[e][t])return eu[e][t];let r="";switch(t){case"shortDate":r=Yc(n,Ht.Short);break;case"mediumDate":r=Yc(n,Ht.Medium);break;case"longDate":r=Yc(n,Ht.Long);break;case"fullDate":r=Yc(n,Ht.Full);break;case"shortTime":r=Jc(n,Ht.Short);break;case"mediumTime":r=Jc(n,Ht.Medium);break;case"longTime":r=Jc(n,Ht.Long);break;case"fullTime":r=Jc(n,Ht.Full);break;case"short":let i=vr(n,"shortTime"),o=vr(n,"shortDate");r=tu(Xc(n,Ht.Short),[i,o]);break;case"medium":let s=vr(n,"mediumTime"),a=vr(n,"mediumDate");r=tu(Xc(n,Ht.Medium),[s,a]);break;case"long":let l=vr(n,"longTime"),c=vr(n,"longDate");r=tu(Xc(n,Ht.Long),[l,c]);break;case"full":let f=vr(n,"fullTime"),p=vr(n,"fullDate");r=tu(Xc(n,Ht.Full),[f,p]);break}return r&&(eu[e][t]=r),r}function tu(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return t!=null&&r in t?t[r]:e})),n}function Sn(n,t,e="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function ok(n,t){return Sn(n,3).substring(0,t)}function qe(n,t,e=0,r=!1,i=!1){return function(o,s){let a=sk(n,o);if((e>0||a>-e)&&(a+=e),n===3)a===0&&e===-12&&(a=12);else if(n===6)return ok(a,t);let l=yr(s,zt.MinusSign);return Sn(a,t,l,r,i)}}function sk(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Te(n,t,e=Ct.Format,r=!1){return function(i,o){return ak(i,o,n,t,e,r)}}function ak(n,t,e,r,i,o){switch(e){case 2:return YA(t,i,r)[n.getMonth()];case 1:return ZA(t,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let c=ek(t),f=tk(t,i,r),p=c.findIndex(v=>{if(Array.isArray(v)){let[g,y]=v,w=s>=g.hours&&a>=g.minutes,E=s<y.hours||s===y.hours&&a<y.minutes;if(g.hours<y.hours){if(w&&E)return!0}else if(w||E)return!0}else if(v.hours===s&&v.minutes===a)return!0;return!1});if(p!==-1)return f[p]}return KA(t,i,r)[s<12?0:1];case 3:return JA(t,r)[n.getFullYear()<=0?0:1];default:let l=e;throw new Error(`unexpected translation type ${l}`)}}function nu(n){return function(t,e,r){let i=-1*r,o=yr(e,zt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Sn(s,2,o)+Sn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Sn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Sn(s,2,o)+":"+Sn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Sn(s,2,o)+":"+Sn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var lk=0,iu=4;function ck(n){let t=su(n,lk,1).getDay();return su(n,0,1+(t<=iu?iu:iu+7)-t)}function Iw(n){let t=n.getDay(),e=t===0?-3:iu-t;return su(n.getFullYear(),n.getMonth(),n.getDate()+e)}function im(n,t=!1){return function(e,r){let i;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();i=1+Math.floor((s+o)/7)}else{let o=Iw(e),s=ck(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Sn(i,n,yr(r,zt.MinusSign))}}function ru(n,t=!1){return function(e,r){let o=Iw(e).getFullYear();return Sn(o,n,yr(r,zt.MinusSign),t)}}var om={};function uk(n){if(om[n])return om[n];let t;switch(n){case"G":case"GG":case"GGG":t=Te(3,xe.Abbreviated);break;case"GGGG":t=Te(3,xe.Wide);break;case"GGGGG":t=Te(3,xe.Narrow);break;case"y":t=qe(0,1,0,!1,!0);break;case"yy":t=qe(0,2,0,!0,!0);break;case"yyy":t=qe(0,3,0,!1,!0);break;case"yyyy":t=qe(0,4,0,!1,!0);break;case"Y":t=ru(1);break;case"YY":t=ru(2,!0);break;case"YYY":t=ru(3);break;case"YYYY":t=ru(4);break;case"M":case"L":t=qe(1,1,1);break;case"MM":case"LL":t=qe(1,2,1);break;case"MMM":t=Te(2,xe.Abbreviated);break;case"MMMM":t=Te(2,xe.Wide);break;case"MMMMM":t=Te(2,xe.Narrow);break;case"LLL":t=Te(2,xe.Abbreviated,Ct.Standalone);break;case"LLLL":t=Te(2,xe.Wide,Ct.Standalone);break;case"LLLLL":t=Te(2,xe.Narrow,Ct.Standalone);break;case"w":t=im(1);break;case"ww":t=im(2);break;case"W":t=im(1,!0);break;case"d":t=qe(2,1);break;case"dd":t=qe(2,2);break;case"c":case"cc":t=qe(7,1);break;case"ccc":t=Te(1,xe.Abbreviated,Ct.Standalone);break;case"cccc":t=Te(1,xe.Wide,Ct.Standalone);break;case"ccccc":t=Te(1,xe.Narrow,Ct.Standalone);break;case"cccccc":t=Te(1,xe.Short,Ct.Standalone);break;case"E":case"EE":case"EEE":t=Te(1,xe.Abbreviated);break;case"EEEE":t=Te(1,xe.Wide);break;case"EEEEE":t=Te(1,xe.Narrow);break;case"EEEEEE":t=Te(1,xe.Short);break;case"a":case"aa":case"aaa":t=Te(0,xe.Abbreviated);break;case"aaaa":t=Te(0,xe.Wide);break;case"aaaaa":t=Te(0,xe.Narrow);break;case"b":case"bb":case"bbb":t=Te(0,xe.Abbreviated,Ct.Standalone,!0);break;case"bbbb":t=Te(0,xe.Wide,Ct.Standalone,!0);break;case"bbbbb":t=Te(0,xe.Narrow,Ct.Standalone,!0);break;case"B":case"BB":case"BBB":t=Te(0,xe.Abbreviated,Ct.Format,!0);break;case"BBBB":t=Te(0,xe.Wide,Ct.Format,!0);break;case"BBBBB":t=Te(0,xe.Narrow,Ct.Format,!0);break;case"h":t=qe(3,1,-12);break;case"hh":t=qe(3,2,-12);break;case"H":t=qe(3,1);break;case"HH":t=qe(3,2);break;case"m":t=qe(4,1);break;case"mm":t=qe(4,2);break;case"s":t=qe(5,1);break;case"ss":t=qe(5,2);break;case"S":t=qe(6,1);break;case"SS":t=qe(6,2);break;case"SSS":t=qe(6,3);break;case"Z":case"ZZ":case"ZZZ":t=nu(0);break;case"ZZZZZ":t=nu(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=nu(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=nu(2);break;default:return null}return om[n]=t,t}function xw(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function dk(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function fk(n,t,e){let r=e?-1:1,i=n.getTimezoneOffset(),o=xw(t,i);return dk(n,r*(o-i))}function hk(n){if(pw(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return su(i,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(nk))return pk(r)}let t=new Date(n);if(!pw(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function pk(n){let t=new Date(0),e=0,r=0,i=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-r,l=Number(n[6]||0),c=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,l,c),t}function pw(n){return n instanceof Date&&!isNaN(n.valueOf())}var mk=/^(\d+)?\.((\d+)(-(\d+))?)?$/,mw=22,au=".",Ys="0",gk=";",vk=",",sm="#";function _k(n,t,e,r,i,o,s=!1){let a="",l=!1;if(!isFinite(n))a=yr(e,zt.Infinity);else{let c=Ck(n);s&&(c=wk(c));let f=t.minInt,p=t.minFrac,v=t.maxFrac;if(o){let F=o.match(mk);if(F===null)throw new Error(`${o} is not a valid digit info`);let V=F[1],H=F[3],W=F[5];V!=null&&(f=am(V)),H!=null&&(p=am(H)),W!=null?v=am(W):H!=null&&p>v&&(v=p)}Ek(c,p,v);let g=c.digits,y=c.integerLen,w=c.exponent,E=[];for(l=g.every(F=>!F);y<f;y++)g.unshift(0);for(;y<0;y++)g.unshift(0);y>0?E=g.splice(y,g.length):(E=g,g=[0]);let N=[];for(g.length>=t.lgSize&&N.unshift(g.splice(-t.lgSize,g.length).join(""));g.length>t.gSize;)N.unshift(g.splice(-t.gSize,g.length).join(""));g.length&&N.unshift(g.join("")),a=N.join(yr(e,r)),E.length&&(a+=yr(e,i)+E.join("")),w&&(a+=yr(e,zt.Exponential)+"+"+w)}return n<0&&!l?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function yk(n,t,e){let r=XA(t,Sw.Decimal),i=bk(r,yr(t,zt.MinusSign));return _k(n,i,t,zt.Group,zt.Decimal,e)}function bk(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(gk),i=r[0],o=r[1],s=i.indexOf(au)!==-1?i.split(au):[i.substring(0,i.lastIndexOf(Ys)+1),i.substring(i.lastIndexOf(Ys)+1)],a=s[0],l=s[1]||"";e.posPre=a.substring(0,a.indexOf(sm));for(let f=0;f<l.length;f++){let p=l.charAt(f);p===Ys?e.minFrac=e.maxFrac=f+1:p===sm?e.maxFrac=f+1:e.posSuf+=p}let c=a.split(vk);if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){let f=i.length-e.posPre.length-e.posSuf.length,p=o.indexOf(sm);e.negPre=o.substring(0,p).replace(/'/g,""),e.negSuf=o.slice(p+f).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function wk(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function Ck(n){let t=Math.abs(n)+"",e=0,r,i,o,s,a;for((i=t.indexOf(au))>-1&&(t=t.replace(au,"")),(o=t.search(/e/i))>0?(i<0&&(i=o),i+=+t.slice(o+1),t=t.substring(0,o)):i<0&&(i=t.length),o=0;t.charAt(o)===Ys;o++);if(o===(a=t.length))r=[0],i=1;else{for(a--;t.charAt(a)===Ys;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(t.charAt(o))}return i>mw&&(r=r.splice(0,mw-1),e=i-1,i=1),{digits:r,exponent:e,integerLen:i}}function Ek(n,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(t,i),e),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=o!==0,c=t+n.integerLen,f=r.reduceRight(function(p,v,g,y){return v=v+p,y[g]=v<10?v:v-10,l&&(y[g]===0&&g>=c?y.pop():l=!1),v>=10?1:0},0);f&&(r.unshift(f),n.integerLen++)}function am(n){let t=parseInt(n);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+n);return t}function cu(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let r=e.indexOf("="),[i,o]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var lm=/\s+/,gw=[],Hn=(()=>{class n{_ngEl;_renderer;initialClasses=gw;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(lm):gw}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(lm):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(lm).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(x(Je),x(wn))};static \u0275dir=be({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var cm=class{$implicit;ngForOf;index;count;constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},nt=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new cm(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),vw(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);vw(o,i)})}static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(x(mr),x(Br),x(tm))};static \u0275dir=be({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function vw(n,t){n.context.$implicit=t.item}var _e=(()=>{class n{_viewContainer;_context=new um;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,r){this._viewContainer=e,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){_w("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){_w("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(x(mr),x(Br))};static \u0275dir=be({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),um=class{$implicit=null;ngIf=null};function _w(n,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${yt(t)}'.`)}var dm=class{_viewContainerRef;_templateRef;_created=!1;constructor(t,e){this._viewContainerRef=t,this._templateRef=e}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}},pm=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(e){this._ngSwitch=e,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){let r=e===this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(let r of this._defaultViews)r.enforceState(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275dir=be({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),Tw=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(e,r,i){this.ngSwitch=i,i._addCase(),this._view=new dm(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(r){return new(r||n)(x(mr),x(Br),x(pm,9))};static \u0275dir=be({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})();var Mw=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,r,i){this._ngEl=e,this._differs=r,this._renderer=i}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){let[i,o]=e.split("."),s=i.indexOf("-")===-1?void 0:Fn.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||n)(x(Je),x(nm),x(wn))};static \u0275dir=be({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})();function Aw(n,t){return new T(2100,!1)}var Sk="mediumDate",Dk=new L(""),Ik=new L(""),$o=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,r,i){this.locale=e,this.defaultTimezone=r,this.defaultOptions=i}transform(e,r,i,o){if(e==null||e===""||e!==e)return null;try{let s=r??this.defaultOptions?.dateFormat??Sk,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return ik(e,s,o||this.locale,a)}catch(s){throw Aw(n,s.message)}}static \u0275fac=function(r){return new(r||n)(x(Uo,16),x(Dk,24),x(Ik,24))};static \u0275pipe=Qp({name:"date",type:n,pure:!0})}return n})();var uu=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,r,i){if(!xk(e))return null;i||=this._locale;try{let o=Tk(e);return yk(o,i,r)}catch(o){throw Aw(n,o.message)}}static \u0275fac=function(r){return new(r||n)(x(Uo,16))};static \u0275pipe=Qp({name:"number",type:n,pure:!0})}return n})();function xk(n){return!(n==null||n===""||n!==n)}function Tk(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var ie=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Ye({})}return n})(),mm="browser",Mk="server";function on(n){return n===mm}function gm(n){return n===Mk}var Bo=class{};var ta=class{},na=class{},wr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),o=e.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let i=(t.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(t,e){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var ym=class{encodeKey(t){return kw(t)}encodeValue(t){return kw(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function kk(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var Nk=/%(\d[a-f0-9])/gi,Pk={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kw(n){return encodeURIComponent(n).replace(Nk,(t,e)=>Pk[e]??t)}function du(n){return`${n}`}var Jr=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new ym,t.fromString){if(t.fromObject)throw new T(2805,!1);this.map=kk(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],i=Array.isArray(r)?r.map(du):[du(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(du(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(du(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var bm=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Ok(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Nw(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Pw(n){return typeof Blob<"u"&&n instanceof Blob}function Ow(n){return typeof FormData<"u"&&n instanceof FormData}function Rk(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Xs="Content-Type",fu="Accept",Em="X-Request-URL",Vw="text/plain",jw="application/json",Uw=`${jw}, ${Vw}, */*`,ea=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,r,i){this.url=e,this.method=t.toUpperCase();let o;if(Ok(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new wr,this.context??=new bm,!this.params)this.params=new Jr,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Nw(this.body)||Pw(this.body)||Ow(this.body)||Rk(this.body)?this.body:this.body instanceof Jr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Ow(this.body)?null:Pw(this.body)?this.body.type||null:Nw(this.body)?null:typeof this.body=="string"?Vw:this.body instanceof Jr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?jw:null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,c=t.headers||this.headers,f=t.params||this.params,p=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((v,g)=>v.set(g,t.setHeaders[g]),c)),t.setParams&&(f=Object.keys(t.setParams).reduce((v,g)=>v.set(g,t.setParams[g]),f)),new n(e,r,s,{params:f,headers:c,context:p,reportProgress:l,responseType:i,withCredentials:a,transferCache:o})}},Xr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Xr||{}),ra=class{headers;status;statusText;url;ok;type;constructor(t,e=200,r="OK"){this.headers=t.headers||new wr,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},hu=class n extends ra{constructor(t={}){super(t)}type=Xr.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},ia=class n extends ra{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Xr.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Yr=class extends ra{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},Bw=200,Fk=204;function vm(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Sm=(()=>{class n{handler;constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof ea)o=e;else{let l;i.headers instanceof wr?l=i.headers:l=new wr(i.headers);let c;i.params&&(i.params instanceof Jr?c=i.params:c=new Jr({fromObject:i.params})),o=new ea(e,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=z(o).pipe(Or(l=>this.handler.handle(l)));if(e instanceof ea||i.observe==="events")return s;let a=s.pipe(vt(l=>l instanceof ia));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(q(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new T(2806,!1);return l.body}));case"blob":return a.pipe(q(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new T(2807,!1);return l.body}));case"text":return a.pipe(q(l=>{if(l.body!==null&&typeof l.body!="string")throw new T(2808,!1);return l.body}));case"json":default:return a.pipe(q(l=>l.body))}case"response":return a;default:throw new T(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new Jr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,vm(i,r))}post(e,r,i={}){return this.request("POST",e,vm(i,r))}put(e,r,i={}){return this.request("PUT",e,vm(i,r))}static \u0275fac=function(r){return new(r||n)(P(ta))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),Lk=/^\)\]\}',?\n/;function Rw(n){if(n.url)return n.url;let t=Em.toLocaleLowerCase();return n.headers.get(t)}var $w=new L(""),_m=(()=>{class n{fetchImpl=I(wm,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e));ngZone=I(De);handle(e){return new he(r=>{let i=new AbortController;return this.doRequest(e,i.signal,r).then(Cm,o=>r.error(new Yr({error:o}))),()=>i.abort()})}async doRequest(e,r,i){let o=this.createRequestInit(e),s;try{let g=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,k({signal:r},o)));Vk(g),i.next({type:Xr.Sent}),s=await g}catch(g){i.error(new Yr({error:g,status:g.status??0,statusText:g.statusText,url:e.urlWithParams,headers:g.headers}));return}let a=new wr(s.headers),l=s.statusText,c=Rw(s)??e.urlWithParams,f=s.status,p=null;if(e.reportProgress&&i.next(new hu({headers:a,status:f,statusText:l,url:c})),s.body){let g=s.headers.get("content-length"),y=[],w=s.body.getReader(),E=0,N,F,V=typeof Zone<"u"&&Zone.current;await this.ngZone.runOutsideAngular(async()=>{for(;;){let{done:W,value:Ve}=await w.read();if(W)break;if(y.push(Ve),E+=Ve.length,e.reportProgress){F=e.responseType==="text"?(F??"")+(N??=new TextDecoder).decode(Ve,{stream:!0}):void 0;let He=()=>i.next({type:Xr.DownloadProgress,total:g?+g:void 0,loaded:E,partialText:F});V?V.run(He):He()}}});let H=this.concatChunks(y,E);try{let W=s.headers.get(Xs)??"";p=this.parseBody(e,H,W)}catch(W){i.error(new Yr({error:W,headers:new wr(s.headers),status:s.status,statusText:s.statusText,url:Rw(s)??e.urlWithParams}));return}}f===0&&(f=p?Bw:0),f>=200&&f<300?(i.next(new ia({body:p,headers:a,status:f,statusText:l,url:c})),i.complete()):i.error(new Yr({error:p,headers:a,status:f,statusText:l,url:c}))}parseBody(e,r,i){switch(e.responseType){case"json":let o=new TextDecoder().decode(r).replace(Lk,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(e){let r={},i=e.withCredentials?"include":void 0;if(e.headers.forEach((o,s)=>r[o]=s.join(",")),e.headers.has(fu)||(r[fu]=Uw),!e.headers.has(Xs)){let o=e.detectContentTypeHeader();o!==null&&(r[Xs]=o)}return{body:e.serializeBody(),method:e.method,headers:r,credentials:i}}concatChunks(e,r){let i=new Uint8Array(r),o=0;for(let s of e)i.set(s,o),o+=s.length;return i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),wm=class{};function Cm(){}function Vk(n){n.then(Cm,Cm)}function jk(n,t){return t(n)}function Uk(n,t,e){return(r,i)=>Bt(e,()=>t(r,o=>n(o,i)))}var Hw=new L(""),Bk=new L(""),$k=new L("",{providedIn:"root",factory:()=>!0});var Fw=(()=>{class n extends ta{backend;injector;chain=null;pendingTasks=I(hr);contributeToStability=I($k);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Hw),...this.injector.get(Bk,[])]));this.chain=r.reduceRight((i,o)=>Uk(i,o,this.injector),jk)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(nr(()=>this.pendingTasks.remove(r)))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(P(na),P(Mt))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();var Hk=/^\)\]\}',?\n/,zk=RegExp(`^${Em}:`,"m");function qk(n){return"responseURL"in n&&n.responseURL?n.responseURL:zk.test(n.getAllResponseHeaders())?n.getResponseHeader(Em):null}var Lw=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new T(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Le(r.\u0275loadImpl()):z(null)).pipe(Vt(()=>new he(o=>{let s=r.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((w,E)=>s.setRequestHeader(w,E.join(","))),e.headers.has(fu)||s.setRequestHeader(fu,Uw),!e.headers.has(Xs)){let w=e.detectContentTypeHeader();w!==null&&s.setRequestHeader(Xs,w)}if(e.responseType){let w=e.responseType.toLowerCase();s.responseType=w!=="json"?w:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let w=s.statusText||"OK",E=new wr(s.getAllResponseHeaders()),N=qk(s)||e.url;return l=new hu({headers:E,status:s.status,statusText:w,url:N}),l},f=()=>{let{headers:w,status:E,statusText:N,url:F}=c(),V=null;E!==Fk&&(V=typeof s.response>"u"?s.responseText:s.response),E===0&&(E=V?Bw:0);let H=E>=200&&E<300;if(e.responseType==="json"&&typeof V=="string"){let W=V;V=V.replace(Hk,"");try{V=V!==""?JSON.parse(V):null}catch(Ve){V=W,H&&(H=!1,V={error:Ve,text:V})}}H?(o.next(new ia({body:V,headers:w,status:E,statusText:N,url:F||void 0})),o.complete()):o.error(new Yr({error:V,headers:w,status:E,statusText:N,url:F||void 0}))},p=w=>{let{url:E}=c(),N=new Yr({error:w,status:s.status||0,statusText:s.statusText||"Unknown Error",url:E||void 0});o.error(N)},v=!1,g=w=>{v||(o.next(c()),v=!0);let E={type:Xr.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(E.total=w.total),e.responseType==="text"&&s.responseText&&(E.partialText=s.responseText),o.next(E)},y=w=>{let E={type:Xr.UploadProgress,loaded:w.loaded};w.lengthComputable&&(E.total=w.total),o.next(E)};return s.addEventListener("load",f),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),e.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(a),o.next({type:Xr.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",f),s.removeEventListener("timeout",p),e.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(P(Bo))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),zw=new L(""),Wk="XSRF-TOKEN",Gk=new L("",{providedIn:"root",factory:()=>Wk}),Qk="X-XSRF-TOKEN",Kk=new L("",{providedIn:"root",factory:()=>Qk}),pu=class{},Zk=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=cu(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||n)(P(Oe),P(dt),P(Gk))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();function Yk(n,t){let e=n.url.toLowerCase();if(!I(zw)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let r=I(pu).getToken(),i=I(Kk);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}var qw=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(qw||{});function Jk(n,t){return{\u0275kind:n,\u0275providers:t}}function Ww(...n){let t=[Sm,Lw,Fw,{provide:ta,useExisting:Fw},{provide:na,useFactory:()=>I($w,{optional:!0})??I(Lw)},{provide:Hw,useValue:Yk,multi:!0},{provide:zw,useValue:!0},{provide:pu,useClass:Zk}];for(let e of n)t.push(...e.\u0275providers);return Ro(t)}function Gw(){return Jk(qw.Fetch,[_m,{provide:$w,useExisting:_m},{provide:na,useExisting:_m}])}var Im=class extends ou{supportsDOMEvents=!0},xm=class n extends Im{static makeCurrent(){bw(new n)}onAndCancel(t,e,r,i){return t.addEventListener(e,r,i),()=>{t.removeEventListener(e,r,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=eN();return e==null?null:tN(e)}resetBaseElement(){oa=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return cu(document.cookie,t)}},oa=null;function eN(){return oa=oa||document.querySelector("base"),oa?oa.getAttribute("href"):null}function tN(n){return new URL(n,document.baseURI).pathname}var nN=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),Tm=new L(""),Jw=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i,o){return this._findPluginFor(r).addEventListener(e,r,i,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new T(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(P(Tm),P(De))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),gu=class{_doc;constructor(t){this._doc=t}manager},mu="ng-app-id";function Qw(n){for(let t of n)t.remove()}function Kw(n,t){let e=t.createElement("style");return e.textContent=n,e}function rN(n,t,e,r){let i=n.head?.querySelectorAll(`style[${mu}="${t}"],link[${mu}="${t}"]`);if(i)for(let o of i)o.removeAttribute(mu),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function Mm(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Xw=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,this.isServer=gm(o),rN(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,Kw);r?.forEach(i=>this.addUsage(i,this.external,Mm))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let o=r.get(e);o?o.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(Qw(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])Qw(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,Kw(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,Mm(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(mu,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(P(Oe),P(Bc),P(Qs,8),P(dt))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),Dm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},km=/%COMP%/g;var eC="%COMP%",iN=`_nghost-${eC}`,oN=`_ngcontent-${eC}`,sN=!0,aN=new L("",{providedIn:"root",factory:()=>sN});function lN(n){return oN.replace(km,n)}function cN(n){return iN.replace(km,n)}function tC(n,t){return t.map(e=>e.replace(km,n))}var vu=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,o,s,a,l,c=null,f=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=f,this.platformIsServer=gm(a),this.defaultRenderer=new sa(e,s,l,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Rn.ShadowDom&&(r=B(k({},r),{encapsulation:Rn.Emulated}));let i=this.getOrCreateRenderer(e,r);return i instanceof _u?i.applyToHost(e):i instanceof aa&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,v=this.tracingService;switch(r.encapsulation){case Rn.Emulated:o=new _u(l,c,r,this.appId,f,s,a,p,v);break;case Rn.ShadowDom:return new Am(l,c,e,r,s,a,this.nonce,p,v);default:o=new aa(l,c,r,f,s,a,p,v);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(P(Jw),P(Xw),P(Bc),P(aN),P(Oe),P(dt),P(De),P(Qs),P(Vo,8))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),sa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,i,o){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Dm[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Zw(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(Zw(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new T(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let o=Dm[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=Dm[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(Fn.DashCase|Fn.Important)?t.style.setProperty(e,r,i&Fn.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Fn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,i){if(typeof t=="string"&&(t=br().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);let o=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,e,o)),this.eventManager.addEventListener(t,e,o,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function Zw(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Am=class extends sa{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,i,o,s,a,l,c){super(t,o,s,l,c),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=tC(i.id,f);for(let v of f){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=v,this.shadowRoot.appendChild(g)}let p=i.getExternalStyles?.();if(p)for(let v of p){let g=Mm(v,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},aa=class extends sa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,i,o,s,a,l,c){super(t,o,s,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=c?tC(c,f):f,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},_u=class extends aa{contentAttr;hostAttr;constructor(t,e,r,i,o,s,a,l,c){let f=i+"-"+r.id;super(t,e,r,o,s,a,l,c,f),this.contentAttr=lN(f),this.hostAttr=cN(f)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}},uN=(()=>{class n extends gu{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,o){return e.addEventListener(r,i,o),()=>this.removeEventListener(e,r,i,o)}removeEventListener(e,r,i,o){return e.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(P(Oe))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),Yw=["alt","control","meta","shift"],dN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},hN=(()=>{class n extends gu{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>br().onAndCancel(e,s.domEventName,a,o))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Yw.forEach(c=>{let f=r.indexOf(c);f>-1&&(r.splice(f,1),s+=c+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let i=dN[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Yw.forEach(s=>{if(s!==i){let a=fN[s];a(e)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(P(Oe))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();function nC(n,t){return cw(k({rootComponent:n},pN(t)))}function pN(n){return{appProviders:[...yN,...n?.providers??[]],platformProviders:_N}}function mN(){xm.makeCurrent()}function gN(){return new At}function vN(){return j0(document),document}var _N=[{provide:dt,useValue:mm},{provide:xp,useValue:mN,multi:!0},{provide:Oe,useFactory:vN,deps:[]}];var yN=[{provide:kc,useValue:"root"},{provide:At,useFactory:gN,deps:[]},{provide:Tm,useClass:uN,multi:!0,deps:[Oe,De,dt]},{provide:Tm,useClass:hN,multi:!0,deps:[Oe]},vu,Xw,Jw,{provide:$r,useExisting:vu},{provide:Bo,useClass:nN,deps:[]},[]];var rC=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(P(Oe))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var la=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=P(bN),i},providedIn:"root"})}return n})(),bN=(()=>{class n extends la{_doc;constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case ft.NONE:return r;case ft.HTML:return Wr(r,"HTML")?yn(r):eb(this._doc,String(r)).toString();case ft.STYLE:return Wr(r,"Style")?yn(r):r;case ft.SCRIPT:if(Wr(r,"Script"))return yn(r);throw new T(5200,!1);case ft.URL:return Wr(r,"URL")?yn(r):zc(String(r));case ft.RESOURCE_URL:if(Wr(r,"ResourceURL"))return yn(r);throw new T(5201,!1);default:throw new T(5202,!1)}}bypassSecurityTrustHtml(e){return z0(e)}bypassSecurityTrustStyle(e){return q0(e)}bypassSecurityTrustScript(e){return W0(e)}bypassSecurityTrustUrl(e){return G0(e)}bypassSecurityTrustResourceUrl(e){return Q0(e)}static \u0275fac=function(r){return new(r||n)(P(Oe))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oe="primary",Ea=Symbol("RouteTitle"),Lm=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Qo(n){return new Lm(n)}function CN(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function EN(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!zn(n[e],t[e]))return!1;return!0}function zn(n,t){let e=n?Vm(n):void 0,r=t?Vm(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!dC(n[i],t[i]))return!1;return!0}function Vm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function dC(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}else return n===t}function fC(n){return n.length>0?n[n.length-1]:null}function ti(n){return Nf(n)?n:Ri(n)?Le(Promise.resolve(n)):z(n)}var SN={exact:pC,subset:mC},hC={exact:DN,subset:IN,ignored:()=>!0};function iC(n,t,e){return SN[e.paths](n.root,t.root,e.matrixParams)&&hC[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function DN(n,t){return zn(n,t)}function pC(n,t,e){if(!Li(n.segments,t.segments)||!wu(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!pC(n.children[r],t.children[r],e))return!1;return!0}function IN(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>dC(n[e],t[e]))}function mC(n,t,e){return gC(n,t,t.segments,e)}function gC(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!Li(i,e)||t.hasChildren()||!wu(i,e,r))}else if(n.segments.length===e.length){if(!Li(n.segments,e)||!wu(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!mC(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!Li(n.segments,i)||!wu(n.segments,i,r)||!n.children[oe]?!1:gC(n.children[oe],t,o,r)}}function wu(n,t,e){return t.every((r,i)=>hC[e](n[i].parameters,r.parameters))}var Er=class{root;queryParams;fragment;_queryParamMap;constructor(t=new we([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){return MN.serialize(this)}},we=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cu(this)}},Fi=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Qo(this.parameters),this._parameterMap}toString(){return _C(this)}};function xN(n,t){return Li(n,t)&&n.every((e,r)=>zn(e.parameters,t[r].parameters))}function Li(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function TN(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(e=e.concat(t(i,r)))}),e}var ug=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>new pa,providedIn:"root"})}return n})(),pa=class{parse(t){let e=new Um(t);return new Er(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${ca(t.root,!0)}`,r=NN(t.queryParams),i=typeof t.fragment=="string"?`#${AN(t.fragment)}`:"";return`${e}${r}${i}`}},MN=new pa;function Cu(n){return n.segments.map(t=>_C(t)).join("/")}function ca(n,t){if(!n.hasChildren())return Cu(n);if(t){let e=n.children[oe]?ca(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${ca(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=TN(n,(r,i)=>i===oe?[ca(n.children[oe],!1)]:[`${i}:${ca(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${Cu(n)}/${e[0]}`:`${Cu(n)}/(${e.join("//")})`}}function vC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yu(n){return vC(n).replace(/%3B/gi,";")}function AN(n){return encodeURI(n)}function jm(n){return vC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Eu(n){return decodeURIComponent(n)}function oC(n){return Eu(n.replace(/\+/g,"%20"))}function _C(n){return`${jm(n.path)}${kN(n.parameters)}`}function kN(n){return Object.entries(n).map(([t,e])=>`;${jm(t)}=${jm(e)}`).join("")}function NN(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${yu(e)}=${yu(i)}`).join("&"):`${yu(e)}=${yu(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var PN=/^[^\/()?;#]+/;function Pm(n){let t=n.match(PN);return t?t[0]:""}var ON=/^[^\/()?;=#]+/;function RN(n){let t=n.match(ON);return t?t[0]:""}var FN=/^[^=?&#]+/;function LN(n){let t=n.match(FN);return t?t[0]:""}var VN=/^[^&#]+/;function jN(n){let t=n.match(VN);return t?t[0]:""}var Um=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[oe]=new we(t,e)),r}parseSegment(){let t=Pm(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new T(4009,!1);return this.capture(t),new Fi(Eu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=RN(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=Pm(this.remaining);i&&(r=i,this.capture(r))}t[Eu(e)]=Eu(r)}parseQueryParam(t){let e=LN(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=jN(this.remaining);s&&(r=s,this.capture(r))}let i=oC(e),o=oC(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Pm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new T(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=oe);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[oe]:new we([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new T(4011,!1)}};function yC(n){return n.segments.length>0?new we([],{[oe]:n}):n}function bC(n){let t={};for(let[r,i]of Object.entries(n.children)){let o=bC(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let e=new we(n.segments,t);return UN(e)}function UN(n){if(n.numberOfChildren===1&&n.children[oe]){let t=n.children[oe];return new we(n.segments.concat(t.segments),t.children)}return n}function Vi(n){return n instanceof Er}function BN(n,t,e=null,r=null){let i=wC(n);return CC(i,t,e,r)}function wC(n){let t;function e(o){let s={};for(let l of o.children){let c=e(l);s[l.outlet]=c}let a=new we(o.url,s);return o===n&&(t=a),a}let r=e(n.root),i=yC(r);return t??i}function CC(n,t,e,r){let i=n;for(;i.parent;)i=i.parent;if(t.length===0)return Om(i,i,i,e,r);let o=$N(t);if(o.toRoot())return Om(i,i,new we([],{}),e,r);let s=HN(o,i,n),a=s.processChildren?da(s.segmentGroup,s.index,o.commands):SC(s.segmentGroup,s.index,o.commands);return Om(i,s.segmentGroup,a,e,r)}function Su(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ma(n){return typeof n=="object"&&n!=null&&n.outlets}function Om(n,t,e,r,i){let o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(f=>`${f}`):`${c}`});let s;n===t?s=e:s=EC(n,t,e);let a=yC(bC(s));return new Er(a,o,i)}function EC(n,t,e){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===t?r[i]=e:r[i]=EC(o,t,e)}),new we(n.segments,r)}var Du=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&Su(r[0]))throw new T(4003,!1);let i=r.find(ma);if(i&&i!==fC(r))throw new T(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function $N(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Du(!0,0,n);let t=0,e=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Du(e,t,r)}var qo=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function HN(n,t,e){if(n.isAbsolute)return new qo(t,!0,0);if(!e)return new qo(t,!1,NaN);if(e.parent===null)return new qo(e,!0,0);let r=Su(n.commands[0])?0:1,i=e.segments.length-1+r;return zN(e,i,n.numberOfDoubleDots)}function zN(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new T(4005,!1);i=r.segments.length}return new qo(r,!1,i-o)}function qN(n){return ma(n[0])?n[0].outlets:{[oe]:n}}function SC(n,t,e){if(n??=new we([],{}),n.segments.length===0&&n.hasChildren())return da(n,t,e);let r=WN(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new we(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new we(n.segments.slice(r.pathIndex),n.children),da(o,0,i)}else return r.match&&i.length===0?new we(n.segments,{}):r.match&&!n.hasChildren()?Bm(n,t,e):r.match?da(n,0,i):Bm(n,t,e)}function da(n,t,e){if(e.length===0)return new we(n.segments,{});{let r=qN(e),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=da(n.children[oe],t,e);return new we(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=SC(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new we(n.segments,i)}}function WN(n,t,e){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;let s=n.segments[i],a=e[r];if(ma(a))break;let l=`${a}`,c=r<e.length-1?e[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!aC(l,c,s))return o;r+=2}else{if(!aC(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Bm(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let o=e[i];if(ma(o)){let l=GN(o.outlets);return new we(r,l)}if(i===0&&Su(e[0])){let l=n.segments[t];r.push(new Fi(l.path,sC(e[0]))),i++;continue}let s=ma(o)?o.outlets[oe]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&Su(a)?(r.push(new Fi(s,sC(a))),i+=2):(r.push(new Fi(s,{})),i++)}return new we(r,{})}function GN(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=Bm(new we([],{}),0,r))}),t}function sC(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function aC(n,t,e){return n==e.path&&zn(t,e.parameters)}var fa="imperative",it=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(it||{}),sn=class{id;url;constructor(t,e){this.id=t,this.url=e}},ga=class extends sn{type=it.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ei=class extends sn{urlAfterRedirects;type=it.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Wt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Wt||{}),$m=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}($m||{}),Cr=class extends sn{reason;code;type=it.NavigationCancel;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ji=class extends sn{reason;code;type=it.NavigationSkipped;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}},va=class extends sn{error;target;type=it.NavigationError;constructor(t,e,r,i){super(t,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Iu=class extends sn{urlAfterRedirects;state;type=it.RoutesRecognized;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hm=class extends sn{urlAfterRedirects;state;type=it.GuardsCheckStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zm=class extends sn{urlAfterRedirects;state;shouldActivate;type=it.GuardsCheckEnd;constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},qm=class extends sn{urlAfterRedirects;state;type=it.ResolveStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wm=class extends sn{urlAfterRedirects;state;type=it.ResolveEnd;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gm=class{route;type=it.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Qm=class{route;type=it.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Km=class{snapshot;type=it.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zm=class{snapshot;type=it.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ym=class{snapshot;type=it.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jm=class{snapshot;type=it.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var _a=class{},Ko=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function QN(n,t){return n.providers&&!n._injector&&(n._injector=Gp(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Dn(n){return n.outlet||oe}function KN(n,t){let e=n.filter(r=>Dn(r)===t);return e.push(...n.filter(r=>Dn(r)!==t)),e}function Sa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Xm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Sa(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Pu(this.rootInjector)}},Pu=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new Xm(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(P(Mt))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xu=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=eg(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=eg(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=tg(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return tg(t,this._root).map(e=>e.value)}};function eg(n,t){if(n===t.value)return t;for(let e of t.children){let r=eg(n,e);if(r)return r}return null}function tg(n,t){if(n===t.value)return[t];for(let e of t.children){let r=tg(n,e);if(r.length)return r.unshift(t),r}return[]}var qt=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function zo(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Tu=class extends xu{snapshot;constructor(t,e){super(t),this.snapshot=e,dg(this,t)}toString(){return this.snapshot.toString()}};function DC(n){let t=ZN(n),e=new rt([new Fi("",{})]),r=new rt({}),i=new rt({}),o=new rt({}),s=new rt(""),a=new Et(e,r,o,s,i,oe,n,t.root);return a.snapshot=t.root,new Tu(new qt(a,[]),t)}function ZN(n){let t={},e={},r={},i="",o=new Wo([],t,r,i,e,oe,n,null,{});return new Au("",new qt(o,[]))}var Et=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,i,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(q(c=>c[Ea]))??z(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(q(t=>Qo(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(q(t=>Qo(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Mu(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:k(k({},t.params),n.params),data:k(k({},t.data),n.data),resolve:k(k(k(k({},n.data),t.data),i?.data),n._resolvedData)}:r={params:k({},n.params),data:k({},n.data),resolve:k(k({},n.data),n._resolvedData??{})},i&&xC(i)&&(r.resolve[Ea]=i.title),r}var Wo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ea]}constructor(t,e,r,i,o,s,a,l,c){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Au=class extends xu{url;constructor(t,e){super(e),this.url=t,dg(this,e)}toString(){return IC(this._root)}};function dg(n,t){t.value._routerState=n,t.children.forEach(e=>dg(n,e))}function IC(n){let t=n.children.length>0?` { ${n.children.map(IC).join(", ")} } `:"";return`${n.value}${t}`}function Rm(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,zn(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),zn(t.params,e.params)||n.paramsSubject.next(e.params),EN(t.url,e.url)||n.urlSubject.next(e.url),zn(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ng(n,t){let e=zn(n.params,t.params)&&xN(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||ng(n.parent,t.parent))}function xC(n){return typeof n.title=="string"||n.title===null}var YN=new L(""),fg=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=oe;activateEvents=new ye;deactivateEvents=new ye;attachEvents=new ye;detachEvents=new ye;routerOutletData=k0(void 0);parentContexts=I(Pu);location=I(mr);changeDetector=I(Ae);inputBinder=I(hg,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new T(4013,!1);this._activatedRoute=e;let i=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new rg(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=be({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[fr]})}return n})(),rg=class n{route;childContexts;parent;outletData;__ngOutletInjector(t){return new n(this.route,this.childContexts,t,this.outletData)}constructor(t,e,r,i){this.route=t,this.childContexts=e,this.parent=r,this.outletData=i}get(t,e){return t===Et?this.route:t===Pu?this.childContexts:t===YN?this.outletData:this.parent.get(t,e)}},hg=new L("");function JN(n,t,e){let r=ya(n,t._root,e?e._root:void 0);return new Tu(r,t)}function ya(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=XN(n,t,e);return new qt(r,i)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>ya(n,a)),s}}let r=eP(t.value),i=t.children.map(o=>ya(n,o));return new qt(r,i)}}function XN(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ya(n,r,i);return ya(n,r)})}function eP(n){return new Et(new rt(n.url),new rt(n.params),new rt(n.queryParams),new rt(n.fragment),new rt(n.data),n.outlet,n.component,n)}var ba=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},TC="ngNavigationCancelingError";function ku(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=Vi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=MC(!1,Wt.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function MC(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[TC]=!0,e.cancellationCode=t,e}function tP(n){return AC(n)&&Vi(n.url)}function AC(n){return!!n&&n[TC]}var nP=(n,t,e,r)=>q(i=>(new ig(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),ig=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,i,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Rm(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=zo(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=zo(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=zo(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=zo(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Jm(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Zm(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(Rm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Rm(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},Nu=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Go=class{component;route;constructor(t,e){this.component=t,this.route=e}};function rP(n,t,e){let r=n._root,i=t?t._root:null;return ua(r,i,e,[r.value])}function iP(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Yo(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!Dy(n)?n:t.get(n):r}function ua(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=zo(t);return n.children.forEach(s=>{oP(s,o[s.value.outlet],e,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ha(a,e.getContext(s),i)),i}function oP(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=sP(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Nu(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ua(n,t,a?a.children:null,r,i):ua(n,t,e,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Go(a.outlet.component,s))}else s&&ha(t,a,i),i.canActivateChecks.push(new Nu(r)),o.component?ua(n,null,a?a.children:null,r,i):ua(n,null,e,r,i);return i}function sP(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Li(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Li(n.url,t.url)||!zn(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ng(n,t)||!zn(n.queryParams,t.queryParams);case"paramsChange":default:return!ng(n,t)}}function ha(n,t,e){let r=zo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?t?ha(s,t.children.getContext(o),e):ha(s,null,e):ha(s,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Go(t.outlet.component,i)):e.canDeactivateChecks.push(new Go(null,i)):e.canDeactivateChecks.push(new Go(null,i))}function Da(n){return typeof n=="function"}function aP(n){return typeof n=="boolean"}function lP(n){return n&&Da(n.canLoad)}function cP(n){return n&&Da(n.canActivate)}function uP(n){return n&&Da(n.canActivateChild)}function dP(n){return n&&Da(n.canDeactivate)}function fP(n){return n&&Da(n.canMatch)}function kC(n){return n instanceof tr||n?.name==="EmptyError"}var bu=Symbol("INITIAL_VALUE");function Zo(){return Vt(n=>_o(n.map(t=>t.pipe(Lt(1),Ts(bu)))).pipe(q(t=>{for(let e of t)if(e!==!0){if(e===bu)return bu;if(e===!1||hP(e))return e}return!0}),vt(t=>t!==bu),Lt(1)))}function hP(n){return Vi(n)||n instanceof ba}function pP(n,t){return Ze(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?z(B(k({},e),{guardsResult:!0})):mP(s,r,i,n).pipe(Ze(a=>a&&aP(a)?gP(r,o,n,t):z(a)),q(a=>B(k({},e),{guardsResult:a})))})}function mP(n,t,e,r){return Le(n).pipe(Ze(i=>wP(i.component,i.route,e,t,r)),rr(i=>i!==!0,!0))}function gP(n,t,e,r){return Le(t).pipe(Or(i=>Pr(_P(i.route.parent,r),vP(i.route,r),bP(n,i.path,e),yP(n,i.route,e))),rr(i=>i!==!0,!0))}function vP(n,t){return n!==null&&t&&t(new Ym(n)),z(!0)}function _P(n,t){return n!==null&&t&&t(new Km(n)),z(!0)}function yP(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return z(!0);let i=r.map(o=>jl(()=>{let s=Sa(t)??e,a=Yo(o,s),l=cP(a)?a.canActivate(t,n):Bt(s,()=>a(t,n));return ti(l).pipe(rr())}));return z(i).pipe(Zo())}function bP(n,t,e){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>iP(s)).filter(s=>s!==null).map(s=>jl(()=>{let a=s.guards.map(l=>{let c=Sa(s.node)??e,f=Yo(l,c),p=uP(f)?f.canActivateChild(r,n):Bt(c,()=>f(r,n));return ti(p).pipe(rr())});return z(a).pipe(Zo())}));return z(o).pipe(Zo())}function wP(n,t,e,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return z(!0);let s=o.map(a=>{let l=Sa(t)??i,c=Yo(a,l),f=dP(c)?c.canDeactivate(n,t,e,r):Bt(l,()=>c(n,t,e,r));return ti(f).pipe(rr())});return z(s).pipe(Zo())}function CP(n,t,e,r){let i=t.canLoad;if(i===void 0||i.length===0)return z(!0);let o=i.map(s=>{let a=Yo(s,n),l=lP(a)?a.canLoad(t,e):Bt(n,()=>a(t,e));return ti(l)});return z(o).pipe(Zo(),NC(r))}function NC(n){return xf(je(t=>{if(typeof t!="boolean")throw ku(n,t)}),q(t=>t===!0))}function EP(n,t,e,r){let i=t.canMatch;if(!i||i.length===0)return z(!0);let o=i.map(s=>{let a=Yo(s,n),l=fP(a)?a.canMatch(t,e):Bt(n,()=>a(t,e));return ti(l)});return z(o).pipe(Zo(),NC(r))}var wa=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Ca=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Ho(n){return Nr(new wa(n))}function SP(n){return Nr(new T(4e3,!1))}function DP(n){return Nr(MC(!1,Wt.GuardRejected))}var og=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return z(r);if(i.numberOfChildren>1||!i.children[oe])return SP(`${t.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(t,e,r,i,o){if(typeof e!="string"){let a=e,{queryParams:l,fragment:c,routeConfig:f,url:p,outlet:v,params:g,data:y,title:w}=i,E=Bt(o,()=>a({params:g,data:y,queryParams:l,fragment:c,routeConfig:f,url:p,outlet:v,title:w}));if(E instanceof Er)throw new Ca(E);e=E}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r);if(e[0]==="/")throw new Ca(s);return s}applyRedirectCreateUrlTree(t,e,r,i){let o=this.createSegmentGroup(t,e.root,r,i);return new Er(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(t,e,r,i){let o=this.createSegments(t,e.segments,r,i),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,r,i)}),new we(o,s)}createSegments(t,e,r,i){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new T(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}},sg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function IP(n,t,e,r,i){let o=PC(n,t,e);return o.matched?(r=QN(t,r),EP(r,t,e,i).pipe(q(s=>s===!0?o:k({},sg)))):z(o)}function PC(n,t,e){if(t.path==="**")return xP(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?k({},sg):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||CN)(e,n,t);if(!i)return k({},sg);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?k(k({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function xP(n){return{matched:!0,parameters:n.length>0?fC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function lC(n,t,e,r){return e.length>0&&AP(n,e,r)?{segmentGroup:new we(t,MP(r,new we(e,n.children))),slicedSegments:[]}:e.length===0&&kP(n,e,r)?{segmentGroup:new we(n.segments,TP(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new we(n.segments,n.children),slicedSegments:e}}function TP(n,t,e,r){let i={};for(let o of e)if(Ou(n,t,o)&&!r[Dn(o)]){let s=new we([],{});i[Dn(o)]=s}return k(k({},r),i)}function MP(n,t){let e={};e[oe]=t;for(let r of n)if(r.path===""&&Dn(r)!==oe){let i=new we([],{});e[Dn(r)]=i}return e}function AP(n,t,e){return e.some(r=>Ou(n,t,r)&&Dn(r)!==oe)}function kP(n,t,e){return e.some(r=>Ou(n,t,r))}function Ou(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function NP(n,t,e){return t.length===0&&!n.children[e]}var ag=class{};function PP(n,t,e,r,i,o,s="emptyOnly"){return new lg(n,t,e,r,i,s,o).recognize()}var OP=31,lg=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,i,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new og(this.urlSerializer,this.urlTree)}noMatchError(t){return new T(4002,`'${t.segmentGroup}'`)}recognize(){let t=lC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(q(({children:e,rootSnapshot:r})=>{let i=new qt(r,e),o=new Au("",i),s=BN(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new Wo([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,oe,e).pipe(q(r=>({children:r,rootSnapshot:e})),kn(r=>{if(r instanceof Ca)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof wa?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,o):this.processSegment(t,e,r,r.segments,i,!0,o).pipe(q(s=>s instanceof qt?[s]:[]))}processChildren(t,e,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Le(o).pipe(Or(s=>{let a=r.children[s],l=KN(e,s);return this.processSegmentGroup(t,l,a,s,i)}),Ff((s,a)=>(s.push(...a),s)),Rr(null),Rf(),Ze(s=>{if(s===null)return Ho(r);let a=OC(s);return RP(a),z(a)}))}processSegment(t,e,r,i,o,s,a){return Le(e).pipe(Or(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,r,i,o,s,a).pipe(kn(c=>{if(c instanceof wa)return z(null);throw c}))),rr(l=>!!l),kn(l=>{if(kC(l))return NP(r,i,o)?z(new ag):Ho(r);throw l}))}processSegmentAgainstRoute(t,e,r,i,o,s,a,l){return Dn(r)!==s&&(s===oe||!Ou(i,o,r))?Ho(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,o,s,l):Ho(i)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s,a){let{matched:l,parameters:c,consumedSegments:f,positionalParamSegments:p,remainingSegments:v}=PC(e,i,o);if(!l)return Ho(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>OP&&(this.allowRedirects=!1));let g=new Wo(o,c,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,cC(i),Dn(i),i.component??i._loadedComponent??null,i,uC(i)),y=Mu(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(y.params),g.data=Object.freeze(y.data);let w=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,g,t);return this.applyRedirects.lineralizeSegments(i,w).pipe(Ze(E=>this.processSegment(t,r,e,E.concat(v),s,!1,a)))}matchSegmentAgainstRoute(t,e,r,i,o,s){let a=IP(e,r,i,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(Vt(l=>l.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(Vt(({routes:c})=>{let f=r._loadedInjector??t,{parameters:p,consumedSegments:v,remainingSegments:g}=l,y=new Wo(v,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,cC(r),Dn(r),r.component??r._loadedComponent??null,r,uC(r)),w=Mu(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(w.params),y.data=Object.freeze(w.data);let{segmentGroup:E,slicedSegments:N}=lC(e,v,g,c);if(N.length===0&&E.hasChildren())return this.processChildren(f,c,E,y).pipe(q(V=>new qt(y,V)));if(c.length===0&&N.length===0)return z(new qt(y,[]));let F=Dn(r)===o;return this.processSegment(f,c,E,N,F?oe:o,!0,y).pipe(q(V=>new qt(y,V instanceof qt?[V]:[])))}))):Ho(e)))}getChildConfig(t,e,r){return e.children?z({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?z({routes:e._loadedRoutes,injector:e._loadedInjector}):CP(t,e,r,this.urlSerializer).pipe(Ze(i=>i?this.configLoader.loadChildren(t,e).pipe(je(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):DP(e))):z({routes:[],injector:t})}};function RP(n){n.sort((t,e)=>t.value.outlet===oe?-1:e.value.outlet===oe?1:t.value.outlet.localeCompare(e.value.outlet))}function FP(n){let t=n.value.routeConfig;return t&&t.path===""}function OC(n){let t=[],e=new Set;for(let r of n){if(!FP(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=OC(r.children);t.push(new qt(r.value,i))}return t.filter(r=>!e.has(r))}function cC(n){return n.data||{}}function uC(n){return n.resolve||{}}function LP(n,t,e,r,i,o){return Ze(s=>PP(n,t,e,r,s.extractedUrl,i,o).pipe(q(({state:a,tree:l})=>B(k({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function VP(n,t){return Ze(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return z(e);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of RC(l))s.add(c);let a=0;return Le(s).pipe(Or(l=>o.has(l)?jP(l,r,n,t):(l.data=Mu(l,l.parent,n).resolve,z(void 0))),je(()=>a++),yo(1),Ze(l=>a===s.size?z(e):Dt))})}function RC(n){let t=n.children.map(e=>RC(e)).flat();return[n,...t]}function jP(n,t,e,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!xC(i)&&(o[Ea]=i.title),UP(o,n,t,r).pipe(q(s=>(n._resolvedData=s,n.data=Mu(n,n.parent,e).resolve,null)))}function UP(n,t,e,r){let i=Vm(n);if(i.length===0)return z({});let o={};return Le(i).pipe(Ze(s=>BP(n[s],t,e,r).pipe(rr(),je(a=>{if(a instanceof ba)throw ku(new pa,a);o[s]=a}))),yo(1),q(()=>o),kn(s=>kC(s)?Dt:Nr(s)))}function BP(n,t,e,r){let i=Sa(t)??r,o=Yo(n,i),s=o.resolve?o.resolve(t,e):Bt(i,()=>o(t,e));return ti(s)}function Fm(n){return Vt(t=>{let e=n(t);return e?Le(e).pipe(q(()=>t)):z(t)})}var FC=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(e){return e.data[Ea]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>I($P),providedIn:"root"})}return n})(),$P=(()=>{class n extends FC{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(P(rC))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pg=new L("",{providedIn:"root",factory:()=>({})}),HP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=K({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&R(0,"router-outlet")},dependencies:[fg],encapsulation:2})}return n})();function mg(n){let t=n.children&&n.children.map(mg),e=t?B(k({},n),{children:t}):k({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==oe&&(e.component=HP),e}var gg=new L(""),zP=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=I(em);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return z(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=ti(e.loadComponent()).pipe(q(LC),je(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),nr(()=>{this.componentLoaders.delete(e)})),i=new go(r,()=>new Pe).pipe(mo());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=qP(r,this.compiler,e,this.onLoadEndListener).pipe(nr(()=>{this.childrenLoaders.delete(r)})),s=new go(o,()=>new Pe).pipe(mo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qP(n,t,e,r){return ti(n.loadChildren()).pipe(q(LC),Ze(i=>i instanceof $s||Array.isArray(i)?z(i):Le(t.compileModuleAsync(i))),q(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(e).injector,s=o.get(gg,[],{optional:!0,self:!0}).flat()),{routes:s.map(mg),injector:o}}))}function WP(n){return n&&typeof n=="object"&&"default"in n}function LC(n){return WP(n)?n.default:n}var vg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>I(GP),providedIn:"root"})}return n})(),GP=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QP=new L("");var KP=new L(""),ZP=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Pe;transitionAbortSubject=new Pe;configLoader=I(zP);environmentInjector=I(Mt);destroyRef=I(Ni);urlSerializer=I(ug);rootContexts=I(Pu);location=I(Js);inputBindingEnabled=I(hg,{optional:!0})!==null;titleStrategy=I(FC);options=I(pg,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=I(vg);createViewTransition=I(QP,{optional:!0});navigationErrorHandler=I(KP,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>z(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new Gm(i)),r=i=>this.events.next(new Qm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(B(k(k({},this.transitions.value),e),{id:r}))}setupNavigations(e,r,i){return this.transitions=new rt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:fa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vt(o=>o.id!==0),q(o=>B(k({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Vt(o=>{let s=!1,a=!1;return z(o).pipe(Vt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Wt.SupersededByNewNavigation),Dt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?B(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&f!=="reload"){let p="";return this.events.next(new ji(l.id,this.urlSerializer.serialize(l.rawUrl),p,$m.IgnoredSameUrlNavigation)),l.resolve(!1),Dt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return z(l).pipe(Vt(p=>{let v=this.transitions?.getValue();return this.events.next(new ga(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),v!==this.transitions?.getValue()?Dt:Promise.resolve(p)}),LP(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),je(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=B(k({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let v=new Iu(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(v)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:v,source:g,restoredState:y,extras:w}=l,E=new ga(p,this.urlSerializer.serialize(v),g,y);this.events.next(E);let N=DC(this.rootComponentType).snapshot;return this.currentTransition=o=B(k({},l),{targetSnapshot:N,urlAfterRedirects:v,extras:B(k({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,z(o)}else{let p="";return this.events.next(new ji(l.id,this.urlSerializer.serialize(l.extractedUrl),p,$m.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Dt}}),je(l=>{let c=new Hm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),q(l=>(this.currentTransition=o=B(k({},l),{guards:rP(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),pP(this.environmentInjector,l=>this.events.next(l)),je(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw ku(this.urlSerializer,l.guardsResult);let c=new zm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),vt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Wt.GuardRejected),!1)),Fm(l=>{if(l.guards.canActivateChecks.length)return z(l).pipe(je(c=>{let f=new qm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),Vt(c=>{let f=!1;return z(c).pipe(VP(this.paramsInheritanceStrategy,this.environmentInjector),je({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(c,"",Wt.NoDataFromResolver)}}))}),je(c=>{let f=new Wm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}))}),Fm(l=>{let c=f=>{let p=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(f.routeConfig).pipe(je(v=>{f.component=v}),q(()=>{})));for(let v of f.children)p.push(...c(v));return p};return _o(c(l.targetSnapshot.root)).pipe(Rr(null),Lt(1))}),Fm(()=>this.afterPreactivation()),Vt(()=>{let{currentSnapshot:l,targetSnapshot:c}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return f?Le(f).pipe(q(()=>o)):z(o)}),q(l=>{let c=JN(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=B(k({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,o}),je(()=>{this.events.next(new _a)}),nP(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Lt(1),je({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ei(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Ms(this.transitionAbortSubject.pipe(je(l=>{throw l}))),nr(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Wt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),kn(l=>{if(this.destroyed)return o.resolve(!1),Dt;if(a=!0,AC(l))this.events.next(new Cr(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),tP(l)?this.events.next(new Ko(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let c=new va(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let f=Bt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(f instanceof ba){let{message:p,cancellationCode:v}=ku(this.urlSerializer,f);this.events.next(new Cr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,v)),this.events.next(new Ko(f.redirectTo,f.navigationBehaviorOptions))}else throw this.events.next(c),l}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return Dt}))}))}cancelNavigationTransition(e,r,i){let o=new Cr(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YP(n){return n!==fa}var JP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>I(XP),providedIn:"root"})}return n})(),cg=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},XP=(()=>{class n extends cg{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ln(n)))(i||n)}})();static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:()=>I(eO),providedIn:"root"})}return n})(),eO=(()=>{class n extends VC{location=I(Js);urlSerializer=I(ug);options=I(pg,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=I(vg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Er;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=DC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&e(r.url,r.state)})}handleRouterEvent(e,r){if(e instanceof ga)this.stateMemento=this.createStateMemento();else if(e instanceof ji)this.rawUrlTree=r.initialUrl;else if(e instanceof Iu){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else e instanceof _a?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):e instanceof Cr&&(e.code===Wt.GuardRejected||e.code===Wt.NoDataFromResolver)?this.restoreHistory(r):e instanceof va?this.restoreHistory(r,!0):e instanceof ei&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,r){let i=e instanceof Er?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=k(k({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=k(k({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ln(n)))(i||n)}})();static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tO(n,t){n.events.pipe(vt(e=>e instanceof ei||e instanceof Cr||e instanceof va||e instanceof ji),q(e=>e instanceof ei||e instanceof ji?0:(e instanceof Cr?e.code===Wt.Redirect||e.code===Wt.SupersededByNewNavigation:!1)?2:1),vt(e=>e!==2),Lt(1)).subscribe(()=>{t()})}var nO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$e=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=I(Zp);stateManager=I(VC);options=I(pg,{optional:!0})||{};pendingTasks=I(hr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=I(ZP);urlSerializer=I(ug);location=I(Js);urlHandlingStrategy=I(vg);_events=new Pe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=I(JP);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=I(gg,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!I(hg,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ne;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Cr&&r.code!==Wt.Redirect&&r.code!==Wt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ei)this.navigated=!0;else if(r instanceof Ko){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||YP(i.source)},s);this.scheduleNavigation(a,fa,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}oO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",r)},0)})}navigateToSyncWithBrowser(e,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=k({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(mg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let v=i?i.snapshot:this.routerState.snapshot.root;p=wC(v)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),p=this.currentUrlTree.root}return CC(p,e,f,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=Vi(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,fa,null,r)}navigate(e,r={skipLocationChange:!1}){return iO(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=k({},nO):r===!1?i=k({},rO):i=r,Vi(e))return iC(this.currentUrlTree,e,i);let o=this.parseUrl(e);return iC(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(e,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((p,v)=>{a=p,l=v});let f=this.pendingTasks.add();return tO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iO(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new T(4008,!1)}function oO(n){return!(n instanceof _a)&&!(n instanceof Ko)}var mt=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Pe;constructor(e,r,i,o,s,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof ei&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Vi(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let r=this.href===null?null:tb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(e,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,e,r):i.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Vi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(x($e),x(Et),jc("tabindex"),x(wn),x(Je),x(Zr))};static \u0275dir=be({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&C("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Gr("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",En],skipLocationChange:[2,"skipLocationChange","skipLocationChange",En],replaceUrl:[2,"replaceUrl","replaceUrl",En],routerLink:"routerLink"},features:[Oi,fr]})}return n})();var sO=new L("");function jC(n,...t){return Ro([{provide:gg,multi:!0,useValue:n},[],{provide:Et,useFactory:aO,deps:[$e]},{provide:Qc,multi:!0,useFactory:cO},t.map(e=>e.\u0275providers)])}function aO(n){return n.routerState.root}function lO(n,t){return{\u0275kind:n,\u0275providers:t}}function cO(){let n=I(ut);return t=>{let e=n.get(cr);if(t!==e.components[0])return;let r=n.get($e),i=n.get(uO);n.get(dO)===1&&r.initialNavigation(),n.get(fO,null,ae.Optional)?.setUpPreloading(),n.get(sO,null,ae.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var uO=new L("",{factory:()=>new Pe}),dO=new L("",{providedIn:"root",factory:()=>1});var fO=new L("");function UC(){return lO(6,[{provide:Zr,useClass:Ew}])}var _g;try{_g=typeof Intl<"u"&&Intl.v8BreakIterator}catch{_g=!1}var Ru=(()=>{class n{_platformId=I(dt);isBrowser=this._platformId?on(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||_g)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yg(n){return Array.isArray(n)?n:[n]}var BC=new Set,Ui,hO=(()=>{class n{_platform=I(Ru);_nonce=I(Qs,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):mO}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&pO(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pO(n,t){if(!BC.has(n))try{Ui||(Ui=document.createElement("style"),t&&Ui.setAttribute("nonce",t),Ui.setAttribute("type","text/css"),document.head.appendChild(Ui)),Ui.sheet&&(Ui.sheet.insertRule(`@media ${n} {body{ }}`,0),BC.add(n))}catch(e){console.error(e)}}function mO(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var HC=(()=>{class n{_mediaMatcher=I(hO);_zone=I(De);_queries=new Map;_destroySubject=new Pe;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return $C(yg(e)).some(i=>this._registerQuery(i).mql.matches)}observe(e){let i=$C(yg(e)).map(s=>this._registerQuery(s).observable),o=_o(i);return o=Pr(o.pipe(Lt(1)),o.pipe(jf(1),Of(0))),o.pipe(q(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let r=this._mediaMatcher.matchMedia(e),o={observable:new he(s=>{let a=l=>this._zone.run(()=>s.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Ts(r),q(({matches:s})=>({query:e,matches:s})),Ms(this._destroySubject)),mql:r};return this._queries.set(e,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $C(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var Bi=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Bi||{}),zC="cdk-high-contrast-black-on-white",qC="cdk-high-contrast-white-on-black",bg="cdk-high-contrast-active",WC=(()=>{class n{_platform=I(Ru);_hasCheckedHighContrastMode;_document=I(Oe);_breakpointSubscription;constructor(){this._breakpointSubscription=I(HC).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Bi.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(e):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Bi.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Bi.BLACK_ON_WHITE}return Bi.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(bg,zC,qC),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Bi.BLACK_ON_WHITE?e.add(bg,zC):r===Bi.WHITE_ON_BLACK&&e.add(bg,qC)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var wg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Ye({})}return n})();var Cg=(()=>{class n{constructor(){I(WC)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Ye({imports:[wg,wg]})}return n})();var gO=["*"],Fu;function vO(){if(Fu===void 0&&(Fu=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(Fu=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Fu}function Ia(n){return vO()?.createHTML(n)||n}function GC(n){return Error(`Unable to find icon with the name "${n}"`)}function _O(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function QC(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function KC(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var Dr=class{url;svgText;options;svgElement;constructor(t,e,r){this.url=t,this.svgText=e,this.options=r}},yO=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,r,i,o){this._httpClient=e,this._sanitizer=r,this._errorHandler=o,this._document=i}addSvgIcon(e,r,i){return this.addSvgIconInNamespace("",e,r,i)}addSvgIconLiteral(e,r,i){return this.addSvgIconLiteralInNamespace("",e,r,i)}addSvgIconInNamespace(e,r,i,o){return this._addSvgIconConfig(e,r,new Dr(i,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,i,o){let s=this._sanitizer.sanitize(ft.HTML,i);if(!s)throw KC(i);let a=Ia(s);return this._addSvgIconConfig(e,r,new Dr("",a,o))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,i){return this._addSvgIconSetConfig(e,new Dr(r,null,i))}addSvgIconSetLiteralInNamespace(e,r,i){let o=this._sanitizer.sanitize(ft.HTML,r);if(!o)throw KC(r);let s=Ia(o);return this._addSvgIconSetConfig(e,new Dr("",s,i))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let r=this._sanitizer.sanitize(ft.RESOURCE_URL,e);if(!r)throw QC(e);let i=this._cachedIconsByUrl.get(r);return i?z(Lu(i)):this._loadSvgIconFromConfig(new Dr(e,null)).pipe(je(o=>this._cachedIconsByUrl.set(r,o)),q(o=>Lu(o)))}getNamedSvgIcon(e,r=""){let i=ZC(r,e),o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,e),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(r);return s?this._getSvgFromIconSetConfigs(e,s):Nr(GC(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?z(Lu(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(q(r=>Lu(r)))}_getSvgFromIconSetConfigs(e,r){let i=this._extractIconWithNameFromAnySet(e,r);if(i)return z(i);let o=r.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(kn(a=>{let c=`Loading icon set URL: ${this._sanitizer.sanitize(ft.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),z(null)})));return xs(o).pipe(q(()=>{let s=this._extractIconWithNameFromAnySet(e,r);if(!s)throw GC(e);return s}))}_extractIconWithNameFromAnySet(e,r){for(let i=r.length-1;i>=0;i--){let o=r[i];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,e,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(je(r=>e.svgText=r),q(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?z(null):this._fetchIcon(e).pipe(je(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,i){let o=e.querySelector(`[id="${r}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,i);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),i);let a=this._svgElementFromString(Ia("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,i)}_svgElementFromString(e){let r=this._document.createElement("DIV");r.innerHTML=e;let i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(e){let r=this._svgElementFromString(Ia("<svg></svg>")),i=e.attributes;for(let o=0;o<i.length;o++){let{name:s,value:a}=i[o];s!=="id"&&r.setAttribute(s,a)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){let{url:r,options:i}=e,o=i?.withCredentials??!1;if(!this._httpClient)throw _O();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let s=this._sanitizer.sanitize(ft.RESOURCE_URL,r);if(!s)throw QC(r);let a=this._inProgressUrlFetches.get(s);if(a)return a;let l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(q(c=>Ia(c)),nr(()=>this._inProgressUrlFetches.delete(s)),Vf());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(e,r,i){return this._svgIconConfigs.set(ZC(e,r),i),this}_addSvgIconSetConfig(e,r){let i=this._iconSetConfigs.get(e);return i?i.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){let r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let i=0;i<this._resolvers.length;i++){let o=this._resolvers[i](r,e);if(o)return bO(o)?new Dr(o.url,null,o.options):new Dr(o,null)}}static \u0275fac=function(r){return new(r||n)(P(Sm,8),P(la),P(Oe,8),P(At))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lu(n){return n.cloneNode(!0)}function ZC(n,t){return n+":"+t}function bO(n){return!!(n.url&&n.options)}var wO=new L("MAT_ICON_DEFAULT_OPTIONS"),CO=new L("mat-icon-location",{providedIn:"root",factory:EO});function EO(){let n=I(Oe),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var YC=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],SO=YC.map(n=>`[${n}]`).join(", "),DO=/^url\(['"]?#(.*?)['"]?\)$/,an=(()=>{class n{_elementRef=I(Je);_iconRegistry=I(yO);_location=I(CO);_errorHandler=I(At);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Ne.EMPTY;constructor(){let e=I(new fc("aria-hidden"),{optional:!0}),r=I(wO,{optional:!0});r&&(r.color&&(this.color=this._defaultColor=r.color),r.fontSet&&(this.fontSet=r.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let i=e.childNodes[r];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>e.classList.remove(i)),r.forEach(i=>e.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){let r=e.querySelectorAll(SO),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)YC.forEach(s=>{let a=r[o],l=a.getAttribute(s),c=l?l.match(DO):null;if(c){let f=i.get(a);f||(f=[],i.set(a,f)),f.push({name:s,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[r,i]=this._splitIconName(e);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Lt(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${r}:${i}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=K({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){r&2&&(Gr("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Yb(i.color?"mat-"+i.color:""),Y("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",En],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Oi],ngContentSelectors:gO,decls:1,vars:0,template:function(r,i){r&1&&(Yp(),Jp(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),JC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Ye({imports:[Cg,Cg]})}return n})();var XC=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-MAQGHWLI.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var xa=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},Vu=class extends xa{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},ju=class extends xa{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Uu=class extends xa{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},Eg=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(Eg||{});var xO=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{c(r.next(f))}catch(p){s(p)}}function l(f){try{c(r.throw(f))}catch(p){s(p)}}function c(f){f.done?o(f.value):i(f.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},Ta=class{constructor(t,{headers:e={},customFetch:r,region:i=Eg.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=XC(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return xO(this,void 0,void 0,function*(){try{let{headers:i,method:o,body:s}=e,a={},{region:l}=e;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=s):typeof s=="string"?(a["Content-Type"]="text/plain",c=s):typeof FormData<"u"&&s instanceof FormData?c=s:(a["Content-Type"]="application/json",c=JSON.stringify(s)));let f=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(y=>{throw new Vu(y)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new ju(f);if(!f.ok)throw new Uu(f);let v=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return v==="application/json"?g=yield f.json():v==="application/octet-stream"?g=yield f.blob():v==="text/event-stream"?g=f:v==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null}}catch(i){return{data:null,error:i}}})}};var fE=_D(dE(),1),{PostgrestClient:hE,PostgrestQueryBuilder:Cz,PostgrestFilterBuilder:Ez,PostgrestTransformBuilder:Sz,PostgrestBuilder:Dz,PostgrestError:jO}=fE.default;var pE="2.11.2";var mE={"X-Client-Info":`realtime-js/${pE}`},gE="1.0.0",zu=1e4,vE=1e3,Xo=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(Xo||{}),Gt=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(Gt||{}),ln=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(ln||{}),Rg=function(n){return n.websocket="websocket",n}(Rg||{}),$i=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}($i||{});var qu=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){let i=e.getUint8(1),o=e.getUint8(2),s=this.HEADER_LENGTH+2,a=r.decode(t.slice(s,s+i));s=s+i;let l=r.decode(t.slice(s,s+o));s=s+o;let c=JSON.parse(r.decode(t.slice(s,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}};var es=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ke=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(ke||{}),Lg=(n,t,e={})=>{var r;let i=(r=e.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((o,s)=>(o[s]=UO(s,n,t,i),o),{})},UO=(n,t,e,r)=>{let i=t.find(a=>a.name===n),o=i?.type,s=e[n];return o&&!r.includes(o)?_E(o,s):Fg(s)},_E=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return zO(t,e)}switch(n){case ke.bool:return BO(t);case ke.float4:case ke.float8:case ke.int2:case ke.int4:case ke.int8:case ke.numeric:case ke.oid:return $O(t);case ke.json:case ke.jsonb:return HO(t);case ke.timestamp:return qO(t);case ke.abstime:case ke.date:case ke.daterange:case ke.int4range:case ke.int8range:case ke.money:case ke.reltime:case ke.text:case ke.time:case ke.timestamptz:case ke.timetz:case ke.tsrange:case ke.tstzrange:return Fg(t);default:return Fg(t)}},Fg=n=>n,BO=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},$O=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},HO=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},zO=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let o,s=n.slice(1,e);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>_E(t,a))}return n},qO=n=>typeof n=="string"?n.replace(" ","T"):n,Wu=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};var ts=class{constructor(t,e,r={},i=zu){this.channel=t,this.event=e,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var Ra=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,o,s),this.pendingDiffs.forEach(l=>{this.state=n.syncDiff(this.state,l,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,i){let o=this.cloneDeep(t),s=this.transformState(e),a={},l={};return this.map(o,(c,f)=>{s[c]||(l[c]=f)}),this.map(s,(c,f)=>{let p=o[c];if(p){let v=f.map(E=>E.presence_ref),g=p.map(E=>E.presence_ref),y=f.filter(E=>g.indexOf(E.presence_ref)<0),w=p.filter(E=>v.indexOf(E.presence_ref)<0);y.length>0&&(a[c]=y),w.length>0&&(l[c]=w)}else a[c]=f}),this.syncDiff(o,{joins:a,leaves:l},r,i)}static syncDiff(t,e,r,i){let{joins:o,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var c;let f=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),f.length>0){let p=t[a].map(g=>g.presence_ref),v=f.filter(g=>p.indexOf(g.presence_ref)<0);t[a].unshift(...v)}r(a,f,l)}),this.map(s,(a,l)=>{let c=t[a];if(!c)return;let f=l.map(p=>p.presence_ref);c=c.filter(p=>f.indexOf(p.presence_ref)<0),t[a]=c,i(a,c,l),c.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let i=t[r];return"metas"in i?e[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):e[r]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Ir=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(Ir||{});var Fa=class n{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=Gt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new ts(this,ln.join,this.params,this.timeout),this.rejoinTimer=new es(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Gt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Gt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ln.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new Ra(this),this.broadcastEndpointURL=Wu(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:o,presence:s,private:a}}=this.params;this._onError(f=>t?.(Ir.CHANNEL_ERROR,f)),this._onClose(()=>t?.(Ir.CLOSED));let l={},c={broadcast:o,presence:s,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket.setAuth(),f===void 0){t?.(Ir.SUBSCRIBED);return}else{let v=this.bindings.postgres_changes,g=(p=v?.length)!==null&&p!==void 0?p:0,y=[];for(let w=0;w<g;w++){let E=v[w],{filter:{event:N,schema:F,table:V,filter:H}}=E,W=f&&f[w];if(W&&W.event===N&&W.schema===F&&W.table===V&&W.filter===H)y.push(Object.assign(Object.assign({},E),{id:W.id}));else{this.unsubscribe(),t?.(Ir.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Ir.SUBSCRIBED);return}}).receive("error",f=>{t?.(Ir.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t?.(Ir.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,r){return this._on(t,e,r)}async send(t,e={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){let{event:o,payload:s}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{let c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=e.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,l;let c=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Gt.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ln.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let i=new ts(this,ln.leave,{},t);i.receive("ok",()=>{e(),r("ok")}).receive("timeout",()=>{e(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(t,e,r){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(o),s}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ts(this,t,e,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:f}=ln;if(r&&[a,l,c,f].indexOf(s)>=0&&r!==this._joinRef())return;let v=this._onMessage(s,e,r);if(e&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var y,w,E;return((y=g.filter)===null||y===void 0?void 0:y.event)==="*"||((E=(w=g.filter)===null||w===void 0?void 0:w.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===s}).map(g=>g.callback(v,r)):(o=this.bindings[s])===null||o===void 0||o.filter(g=>{var y,w,E,N,F,V;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in g){let H=g.id,W=(y=g.filter)===null||y===void 0?void 0:y.event;return H&&((w=e.ids)===null||w===void 0?void 0:w.includes(H))&&(W==="*"||W?.toLocaleLowerCase()===((E=e.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{let H=(F=(N=g?.filter)===null||N===void 0?void 0:N.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return H==="*"||H===((V=e?.event)===null||V===void 0?void 0:V.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===s}).map(g=>{if(typeof v=="object"&&"ids"in v){let y=v.data,{schema:w,table:E,commit_timestamp:N,type:F,errors:V}=y;v=Object.assign(Object.assign({},{schema:w,table:E,commit_timestamp:N,eventType:F,new:{},old:{},errors:V}),this._getPayloadRecords(y))}g.callback(v,r)})}_isClosed(){return this.state===Gt.closed}_isJoined(){return this.state===Gt.joined}_isJoining(){return this.state===Gt.joining}_isLeaving(){return this.state===Gt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let i=t.toLocaleLowerCase(),o={type:i,filter:e,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&n.isEqual(i.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ln.close,{},t)}_onError(t){this._on(ln.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=Lg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=Lg(t.columns,t.old_record)),e}};var GO=()=>{},QO=typeof WebSocket<"u",KO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,La=class{constructor(t,e){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=mE,this.params={},this.timeout=zu,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=GO,this.conn=null,this.sendBuffer=[],this.serializer=new qu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...a)=>import("./chunk-MAQGHWLI.js").then(({default:l})=>l(...a)):s=fetch,(...a)=>s(...a)},this.endPoint=`${t}/${Rg.websocket}`,this.httpEndpoint=Wu(t),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let i=(r=e?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=e?.encode?e.encode:(o,s)=>s(JSON.stringify(o)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new es(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(QO){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Vg(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-KYSFV2V4.js").then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:gE}))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){let e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){let t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),t}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Xo.connecting:return $i.Connecting;case Xo.open:return $i.Open;case Xo.closing:return $i.Closing;default:return $i.Closed}}isConnected(){return this.connectionState()===$i.Open}channel(t,e={config:{}}){let r=new Fa(`realtime:${t}`,e,this);return this.channels.push(r),r}push(t){let{topic:e,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){let e=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(e){let r=null;try{r=JSON.parse(atob(e.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=e,this.channels.forEach(i=>{e&&i.updateJoinPayload({access_token:e}),i.joinedOnce&&i._isJoined()&&i._push(ln.access_token,{access_token:e})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(vE,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:r,event:i,payload:o,ref:s}=e;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${i} ${s&&"("+s+")"||""}`,o),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,o,s)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ln.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${r}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([KO],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}};var Vg=class{constructor(t,e,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Xo.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}};var ns=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Ge(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Gu=class extends ns{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Hi=class extends ns{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var ZO=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{c(r.next(f))}catch(p){s(p)}}function l(f){try{c(r.throw(f))}catch(p){s(p)}}function c(f){f.done?o(f.value):i(f.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},Ku=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-MAQGHWLI.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},yE=()=>ZO(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-MAQGHWLI.js")).Response:Response}),Qu=n=>{if(Array.isArray(n))return n.map(e=>Qu(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let i=e.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=Qu(r)}),t};var zi=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{c(r.next(f))}catch(p){s(p)}}function l(f){try{c(r.throw(f))}catch(p){s(p)}}function c(f){f.done?o(f.value):i(f.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},jg=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),YO=(n,t,e)=>zi(void 0,void 0,void 0,function*(){let r=yield yE();n instanceof r&&!e?.noResolveJson?n.json().then(i=>{t(new Gu(jg(i),n.status||500))}).catch(i=>{t(new Hi(jg(i),i))}):t(new Hi(jg(n),n))}),JO=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),e))};function Va(n,t,e,r,i,o){return zi(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,JO(t,r,i,o)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>YO(l,a,r))})})}function rs(n,t,e,r){return zi(this,void 0,void 0,function*(){return Va(n,"GET",t,e,r)})}function qn(n,t,e,r,i){return zi(this,void 0,void 0,function*(){return Va(n,"POST",t,r,i,e)})}function bE(n,t,e,r,i){return zi(this,void 0,void 0,function*(){return Va(n,"PUT",t,r,i,e)})}function wE(n,t,e,r){return zi(this,void 0,void 0,function*(){return Va(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function Zu(n,t,e,r,i){return zi(this,void 0,void 0,function*(){return Va(n,"DELETE",t,r,i,e)})}var Pt=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{c(r.next(f))}catch(p){s(p)}}function l(f){try{c(r.throw(f))}catch(p){s(p)}}function c(f){f.done?o(f.value):i(f.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},XO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},CE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Yu=class{constructor(t,e={},r,i){this.url=t,this.headers=e,this.bucketId=r,this.fetch=Ku(i)}uploadOrUpdate(t,e,r,i){return Pt(this,void 0,void 0,function*(){try{let o,s=Object.assign(Object.assign({},CE),i),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)}),l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let c=this._removeEmptyFolders(e),f=this._getFinalPath(c),p=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:t,body:o,headers:a},s?.duplex?{duplex:s.duplex}:{})),v=yield p.json();return p.ok?{data:{path:c,id:v.Id,fullPath:v.Key},error:null}:{data:null,error:v}}catch(o){if(Ge(o))return{data:null,error:o};throw o}})}upload(t,e,r){return Pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,i){return Pt(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(t),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let l,c=Object.assign({upsert:CE.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType);let p=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:f}),v=yield p.json();return p.ok?{data:{path:o,fullPath:v.Key},error:null}:{data:null,error:v}}catch(l){if(Ge(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return Pt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");let o=yield qn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new ns("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}update(t,e,r){return Pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return Pt(this,void 0,void 0,function*(){try{return{data:yield qn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}copy(t,e,r){return Pt(this,void 0,void 0,function*(){try{return{data:{path:(yield qn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,r){return Pt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield qn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,r){return Pt(this,void 0,void 0,function*(){try{let i=yield qn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}download(t,e){return Pt(this,void 0,void 0,function*(){let i=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),s=o?`?${o}`:"";try{let a=this._getFinalPath(t);return{data:yield(yield rs(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ge(a))return{data:null,error:a};throw a}})}info(t){return Pt(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield rs(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Qu(r),error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}exists(t){return Pt(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield wE(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ge(r)&&r instanceof Hi){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),i=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);let a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return Pt(this,void 0,void 0,function*(){try{return{data:yield Zu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(Ge(e))return{data:null,error:e};throw e}})}list(t,e,r){return Pt(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},XO),e),{prefix:t||""});return{data:yield qn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Ge(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var EE="2.7.1";var SE={"X-Client-Info":`storage-js/${EE}`};var is=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{c(r.next(f))}catch(p){s(p)}}function l(f){try{c(r.throw(f))}catch(p){s(p)}}function c(f){f.done?o(f.value):i(f.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},Ju=class{constructor(t,e={},r){this.url=t,this.headers=Object.assign(Object.assign({},SE),e),this.fetch=Ku(r)}listBuckets(){return is(this,void 0,void 0,function*(){try{return{data:yield rs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ge(t))return{data:null,error:t};throw t}})}getBucket(t){return is(this,void 0,void 0,function*(){try{return{data:yield rs(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(Ge(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return is(this,void 0,void 0,function*(){try{return{data:yield qn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}updateBucket(t,e){return is(this,void 0,void 0,function*(){try{return{data:yield bE(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ge(r))return{data:null,error:r};throw r}})}emptyBucket(t){return is(this,void 0,void 0,function*(){try{return{data:yield qn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(Ge(e))return{data:null,error:e};throw e}})}deleteBucket(t){return is(this,void 0,void 0,function*(){try{return{data:yield Zu(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(Ge(e))return{data:null,error:e};throw e}})}};var ja=class extends Ju{constructor(t,e={},r){super(t,e,r)}from(t){return new Yu(this.url,this.headers,t,this.fetch)}};var DE="2.48.1";var Ua="";typeof Deno<"u"?Ua="deno":typeof document<"u"?Ua="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ua="react-native":Ua="node";var eR={"X-Client-Info":`supabase-js-${Ua}/${DE}`},IE={headers:eR},xE={schema:"public"},TE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ME={};qv();var tR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{c(r.next(f))}catch(p){s(p)}}function l(f){try{c(r.throw(f))}catch(p){s(p)}}function c(f){f.done?o(f.value):i(f.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},nR=n=>{let t;return n?t=n:typeof fetch>"u"?t=Hv:t=fetch,(...e)=>t(...e)},rR=()=>typeof Headers>"u"?zv:Headers,AE=(n,t,e)=>{let r=nR(e),i=rR();return(o,s)=>tR(void 0,void 0,void 0,function*(){var a;let l=(a=yield t())!==null&&a!==void 0?a:n,c=new i(s?.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},s),{headers:c}))})};var iR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{c(r.next(f))}catch(p){s(p)}}function l(f){try{c(r.throw(f))}catch(p){s(p)}}function c(f){f.done?o(f.value):i(f.value).then(a,l)}c((r=r.apply(n,t||[])).next())})};function kE(n){return n.replace(/\/$/,"")}function NE(n,t){let{db:e,auth:r,realtime:i,global:o}=n,{db:s,auth:a,realtime:l,global:c}=t,f={db:Object.assign(Object.assign({},s),e),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),o),accessToken:()=>iR(this,void 0,void 0,function*(){return""})};return n.accessToken?f.accessToken=n.accessToken:delete f.accessToken,f}function PE(n){return Math.round(Date.now()/1e3)+n}function OE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var In=()=>typeof document<"u",qi={tested:!1,writable:!1},ni=()=>{if(!In())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qi.tested)return qi.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),qi.tested=!0,qi.writable=!0}catch{qi.tested=!0,qi.writable=!1}return qi.writable};function Xu(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return e.searchParams.forEach((r,i)=>{t[i]=r}),t}var ed=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-MAQGHWLI.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},RE=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",ri=async(n,t,e)=>{await n.setItem(t,JSON.stringify(e))},$a=async(n,t)=>{let e=await n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},td=async(n,t)=>{await n.removeItem(t)};function oR(n){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="",r,i,o,s,a,l,c,f=0;for(n=n.replace("-","+").replace("_","/");f<n.length;)s=t.indexOf(n.charAt(f++)),a=t.indexOf(n.charAt(f++)),l=t.indexOf(n.charAt(f++)),c=t.indexOf(n.charAt(f++)),r=s<<2|a>>4,i=(a&15)<<4|l>>2,o=(l&3)<<6|c,e=e+String.fromCharCode(r),l!=64&&i!=0&&(e=e+String.fromCharCode(i)),c!=64&&o!=0&&(e=e+String.fromCharCode(o));return e}var Ba=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};Ba.promiseConstructor=Promise;function Ug(n){let t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=n.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");let r=e[1];return JSON.parse(oR(r))}async function FE(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function LE(n,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{let s=await n(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})()})}function sR(n){return("0"+n.toString(16)).substr(-2)}function Wi(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,i="";for(let o=0;o<56;o++)i+=e.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,sR).join("")}async function aR(n){let e=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",e),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}function lR(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gi(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=await aR(n);return lR(e)}var Ha=class extends Error{constructor(t,e){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e}};function de(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var nd=class extends Ha{constructor(t,e){super(t,e),this.name="AuthApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}};function VE(n){return de(n)&&n.name==="AuthApiError"}var os=class extends Ha{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},xr=class extends Ha{constructor(t,e,r){super(t),this.name=e,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Tr=class extends xr{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}},ss=class extends xr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}},Qi=class extends xr{constructor(t){super(t,"AuthInvalidCredentialsError",400)}},Ki=class extends xr{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},za=class extends xr{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},as=class extends xr{constructor(t,e){super(t,"AuthRetryableFetchError",e)}};function id(n){return de(n)&&n.name==="AuthRetryableFetchError"}var rd=class extends xr{constructor(t,e,r){super(t,"AuthWeakPasswordError",e),this.reasons=r}};var cR=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},ls=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),uR=[502,503,504];async function jE(n){if(!RE(n))throw new as(ls(n),0);if(uR.includes(n.status))throw new as(ls(n),n.status);let t;try{t=await n.json()}catch(e){throw new os(ls(e),e)}throw typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)?new rd(ls(t),n.status,t.weak_password.reasons):new nd(ls(t),n.status||500)}var dR=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),e))};async function me(n,t,e,r){var i;let o=Object.assign({},r?.headers);r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await fR(n,t,e+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function fR(n,t,e,r,i,o){let s=dR(t,r,i,o),a;try{a=await n(e,s)}catch(l){throw console.error(l),new as(ls(l),0)}if(a.ok||await jE(a),r?.noResolveJson)return a;try{return await a.json()}catch(l){await jE(l)}}function ii(n){var t;let e=null;hR(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=PE(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function Bg(n){let t=ii(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function Wn(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function UE(n){return{data:n,error:null}}function BE(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o}=n,s=cR(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},s);return{data:{properties:a,user:l},error:null}}function $E(n){return n}function hR(n){return n.access_token&&n.refresh_token&&n.expires_in}var pR=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},cs=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=ed(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,e="global"){try{return await me(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,e={}){try{return await me(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:Wn})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{let{options:e}=t,r=pR(t,["options"]),i=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:BE,redirectTo:e?.redirectTo})}catch(e){if(de(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await me(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Wn})}catch(e){if(de(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,r,i,o,s,a,l;try{let c={nextPage:null,lastPage:0,total:0},f=await me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:$E});if(f.error)throw f.error;let p=await f.json(),v=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,g=(l=(a=f.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(y=>{let w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(y.split(";")[1].split("=")[1]);c[`${E}Page`]=w}),c.total=parseInt(v)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(de(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){try{return await me(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Wn})}catch(e){if(de(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){try{return await me(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:Wn})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,e=!1){try{return await me(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:Wn})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{let{data:e,error:r}=await me(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:r}}catch(e){if(de(e))return{data:null,error:e};throw e}}async _deleteFactor(t){try{return{data:await me(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(de(e))return{data:null,error:e};throw e}}};var od="2.61.0";var HE="http://localhost:9999",zE="supabase.auth.token";var qE={"X-Client-Info":`gotrue-js/${od}`},$g=10;var WE={getItem:n=>ni()?globalThis.localStorage.getItem(n):null,setItem:(n,t)=>{ni()&&globalThis.localStorage.setItem(n,t)},removeItem:n=>{ni()&&globalThis.localStorage.removeItem(n)}};function Hg(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}function GE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var mR={debug:!!(globalThis&&ni()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},sd=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}};GE();var gR={url:HE,storageKey:zE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qE,flowType:"implicit",debug:!1},qa=30*1e3,QE=3;async function vR(n,t,e){return await e()}var zg=(()=>{class n{constructor(e){var r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&In()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let i=Object.assign(Object.assign({},gR),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new cs({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=ed(i.fetch),this.lock=i.lock||vR,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:ni()?this.storage=WE:(this.memoryStorage={},this.storage=Hg(this.memoryStorage)):(this.memoryStorage={},this.storage=Hg(this.memoryStorage)),In()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${od}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{let e=In()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:r,error:i}=await this._getSessionFromURL(e);if(i)return this._debug("#_initialize()","error detecting session from URL",i),i?.message==="Identity is already linked"||i?.message==="Identity is already linked to another user"?{error:i}:(await this._removeSession(),{error:i});let{session:o,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return de(e)?{error:e}:{error:new os("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var r,i,o;try{await this._removeSession();let s;if("email"in e){let{email:p,password:v,options:g}=e,y=null,w=null;if(this.flowType==="pkce"){let E=Wi();await ri(this.storage,`${this.storageKey}-code-verifier`,E),y=await Gi(E),w=E===y?"plain":"s256"}s=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g?.emailRedirectTo,body:{email:p,password:v,data:(r=g?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:y,code_challenge_method:w},xform:ii})}else if("phone"in e){let{phone:p,password:v,options:g}=e;s=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:v,data:(i=g?.data)!==null&&i!==void 0?i:{},channel:(o=g?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:ii})}else throw new Qi("You must provide either an email or phone number and a password");let{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};let c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let r;if("email"in e){let{email:s,password:a,options:l}=e;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Bg})}else if("phone"in e){let{phone:s,password:a,options:l}=e;r=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Bg})}else throw new Qi("You must provide either an email or phone number and a password");let{data:i,error:o}=r;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new ss}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(de(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,i,o,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){let r=await $a(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/"),{data:s,error:a}=await me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:ii});return await td(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new ss}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=e,l=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:ii}),{data:c,error:f}=l;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ss}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(r){if(de(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,i,o,s,a;try{if(await this._removeSession(),"email"in e){let{email:l,options:c}=e,f=null,p=null;if(this.flowType==="pkce"){let g=Wi();await ri(this.storage,`${this.storageKey}-code-verifier`,g),f=await Gi(g),p=g===f?"plain":"s256"}let{error:v}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){let{phone:l,options:c}=e,{data:f,error:p}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=c?.data)!==null&&o!==void 0?o:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:f?.message_id},error:p}}throw new Qi("You must provide either an email or phone number.")}catch(l){if(de(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,i;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let o,s;"options"in e&&(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:l}=await me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:ii});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,f=a.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(o){if(de(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var r,i,o;try{await this._removeSession();let s=null,a=null;if(this.flowType==="pkce"){let l=Wi();await ri(this.storage,`${this.storageKey}-code-verifier`,l),s=await Gi(l),a=l===s?"plain":"s256"}return await me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:UE})}catch(s){if(de(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new Tr;let{error:o}=await me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(de(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();let r=`${this.url}/resend`;if("email"in e){let{email:i,type:o,options:s}=e,{error:a}=await me(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:i,type:o,options:s}=e,{data:a,error:l}=await me(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new Qi("You must provide either an email or phone number and a type")}catch(r){if(de(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=await $a(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let i=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i)return{data:{session:e},error:null};let{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wn}):await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Wn})})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async i=>{let{data:o,error:s}=i;if(s)throw s;if(!o.session)throw new Tr;let a=o.session,l=null,c=null;if(this.flowType==="pkce"&&e.email!=null){let v=Wi();await ri(this.storage,`${this.storageKey}-code-verifier`,v),l=await Gi(v),c=v===l?"plain":"s256"}let{data:f,error:p}=await me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Wn});if(p)throw p;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(i){if(de(i))return{data:{user:null},error:i};throw i}}_decodeJWT(e){return Ug(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Tr;let r=Date.now()/1e3,i=r,o=!0,s=null,a=Ug(e.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{let{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(de(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var i;if(!e){let{data:a,error:l}=r;if(l)throw l;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Tr;let{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(de(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e){try{if(!In())throw new Ki("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Ki("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new za("Not a valid PKCE flow url.");let r=Xu(window.location.href);if(e){if(!r.code)throw new za("No code detected.");let{data:V,error:H}=await this._exchangeCodeForSession(r.code);if(H)throw H;let W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:V.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new Ki(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:l,expires_at:c,token_type:f}=r;if(!s||!l||!a||!f)throw new Ki("No session defined in URL");let p=Math.round(Date.now()/1e3),v=parseInt(l),g=p+v;c&&(g=parseInt(c));let y=g-p;y*1e3<=qa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${v}s`);let w=g-v;p-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,g,p):p-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",w,g,p);let{data:E,error:N}=await this._getUser(s);if(N)throw N;let F={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:v,expires_at:g,refresh_token:a,token_type:f,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:F,redirectType:r.type},error:null}}catch(r){if(de(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){let e=Xu(window.location.href);return!!(In()&&(e.access_token||e.error_description))}async _isPKCEFlow(){let e=Xu(window.location.href),r=await $a(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return{error:s};let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:l}=await this.admin.signOut(a,e);if(l&&!(VE(l)&&(l.status===404||l.status===401)))return{error:l}}return e!=="others"&&(await this._removeSession(),await td(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){let r=OE(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async r=>{var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let i=null,o=null;if(this.flowType==="pkce"){let s=Wi();await ri(this.storage,`${this.storageKey}-code-verifier`,`${s}/PASSWORD_RECOVERY`),i=await Gi(s),o=s===i?"plain":"s256"}try{return await me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(de(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{let{data:i,error:o}=await this._useSession(async s=>{var a,l,c,f,p;let{data:v,error:g}=s;if(g)throw g;let y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await me(this.fetch,"GET",y,{headers:this.headers,jwt:(p=(f=v.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(o)throw o;return In()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(de(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await LE(async o=>(await FE(o*200),this._debug(r,"refreshing attempt",o),await me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ii})),(o,s,a)=>a&&a.error&&id(a.error)&&Date.now()+(o+1)*200-i<qa)}catch(i){if(this._debug(r,"error",i),de(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),In()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let i=await $a(this.storage,this.storageKey);if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}let o=Math.round(Date.now()/1e3),s=((e=i.expires_at)!==null&&e!==void 0?e:1/0)<o+$g;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${$g}s`),s){if(this.autoRefreshToken&&i.refresh_token){let{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),id(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,i;if(!e)throw new Tr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Ba;let{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Tr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(o,"error",s),de(s)){let a={session:null,error:s};return id(s)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,r,i=!0){let o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){s.push(c)}});if(await Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await ri(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await td(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&In()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),qa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-e)/qa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${qa}ms, refresh threshold is ${QE} ticks`),o<=QE&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sd)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!In()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,i){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let s=Wi();await ri(this.storage,`${this.storageKey}-code-verifier`,s);let a=await Gi(s),l=s===a?"plain":"s256";this._debug("PKCE","code verifier",`${s.substring(0,5)}...`,"code challenge",a,"method",l);let c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});o.push(c.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?{data:null,error:s}:await me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)return{data:null,error:a};let{data:l,error:c}=await me(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return c?{data:null,error:c}:(!((o=l?.totp)===null||o===void 0)&&o.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return{data:null,error:s};let{data:a,error:l}=await me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(de(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?{data:null,error:s}:await me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(de(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){let{data:r,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){let{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};let i=e?.factors||[],o=i.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:i,totp:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,i;let{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let a=this._decodeJWT(o.access_token),l=null;a.aal&&(l=a.aal);let c=l;((i=(r=o.user.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(c="aal2");let p=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:p},error:null}}))}}return n.nextInstanceID=0,n})();var _R=zg,qg=_R;var ad=class extends qg{constructor(t){super(t)}};var yR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{c(r.next(f))}catch(p){s(p)}}function l(f){try{c(r.throw(f))}catch(p){s(p)}}function c(f){f.done?o(f.value):i(f.value).then(a,l)}c((r=r.apply(n,t||[])).next())})},Zi=class{constructor(t,e,r){var i,o,s;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let a=kE(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;let l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:xE,realtime:ME,auth:Object.assign(Object.assign({},TE),{storageKey:l}),global:IE},f=NE(r??{},c);this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=f.auth)!==null&&s!==void 0?s:{},this.headers,f.global.fetch),this.fetch=AE(e,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new hE(`${a}/rest/v1`,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new Ta(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ja(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return yR(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,storageKey:o,flowType:s,lock:a,debug:l},c,f){let p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ad({url:this.authUrl,headers:Object.assign(Object.assign({},p),c),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,flowType:s,lock:a,debug:l,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new La(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var KE=(n,t,e)=>new Zi(n,t,e);var us={API_URL:"https://jsgltiaidlacvchyjjha.supabase.co",FUNC_URL:"https://jsgltiaidlacvchyjjha.supabase.co",anon_key:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpzZ2x0aWFpZGxhY3ZjaHlqamhhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2NjIzNDIsImV4cCI6MjA1NTIzODM0Mn0.bPtRMhXapLzUgPEIf6GoW9r52umh0F1YZhG1bfLyb0s",supabase_LocalStorage_key:"sb-jsgltiaidlacvchyjjha-auth-token"};var Ce=class n{constructor(t){this.platformId=t;this.supabase=KE(us.API_URL,us.anon_key,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),this.setupAuthStateSignalSync()}supabase;USER_PROFILE_KEY="userProfile";user=U(null);currentUsername=U(null);loginStatus=U(null);GetClient(){return this.supabase}setupAuthStateSignalSync(){on(this.platformId)&&(this.supabase.auth.getSession().then(({data:t})=>{this.updateSignalsFromSession(t.session)}),this.supabase.auth.onAuthStateChange((t,e)=>{this.updateSignalsFromSession(e)}))}updateSignalsFromSession(t){if(t&&t.user){this.user.set(t.user);let e=t.user?.identities?.[0]?.identity_data?.firstname||null;this.currentUsername.set(e),this.loginStatus.set(!0)}else this.user.set(null),this.currentUsername.set(null),this.loginStatus.set(!1)}supaScream(){return"SupaScream"}static \u0275fac=function(e){return new(e||n)(P(dt))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var ld=class n{constructor(t){this.supabaseService=t;this.userFirstName=this.supabaseService.currentUsername()}userFirstName;static \u0275fac=function(e){return new(e||n)(x(Ce))};static \u0275cmp=K({type:n,selectors:[["app-landing-page"]],decls:66,vars:4,consts:[[1,"container","mt-4"],[1,"mb-4","text-center"],[1,"row","g-4","mb-5"],[1,"col-md-6"],[1,"card","h-100","shadow-sm"],[1,"card-body","d-flex","align-items-center"],[1,"ms-4","me-4","step-icon",2,"--step-color","#2563eb"],[1,"flex-grow-1"],[1,"text-uppercase","fw-bold","text-secondary",2,"letter-spacing","2px"],[1,"fw-semibold","mb-1"],[1,"mb-3","text-secondary"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#2563eb","color","#fff",3,"routerLink"],[1,"ms-4","me-4","step-icon",2,"--step-color","#15803d"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#15803d","color","#fff",3,"routerLink"],[1,"ms-4","me-4","step-icon",2,"--step-color","#b45309"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#b45309","color","#fff",3,"routerLink"],[1,"ms-4","me-4","step-icon",2,"--step-color","#6d28d9"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#6d28d9","color","#fff",3,"routerLink"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"h2",1),h(2,"Begin Your Trading Transformation"),u(),d(3,"h2",1),h(4,"Your Professional Workflow"),u(),d(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"mat-icon"),h(11,"check_circle"),u()(),d(12,"div",7)(13,"div",8),h(14,"Step 1 "),u(),d(15,"h4",9),h(16,"Daily Emotional Check-in"),u(),d(17,"p",10),h(18,"Understand your emotional state before making trading decisions."),u(),d(19,"a",11),h(20,"Begin Assessment"),u()()()()(),d(21,"div",3)(22,"div",4)(23,"div",5)(24,"div",12)(25,"mat-icon"),h(26,"trending_up"),u()(),d(27,"div",7)(28,"div",8),h(29,"Step 2 "),u(),d(30,"h4",9),h(31,"Plan Your Trades"),u(),d(32,"p",10),h(33,"Document your trading plan before executing any trades."),u(),d(34,"a",13),h(35,"Create Trading Plan"),u()()()()(),d(36,"div",3)(37,"div",4)(38,"div",5)(39,"div",14)(40,"mat-icon"),h(41,"candlestick_chart"),u()(),d(42,"div",7)(43,"div",8),h(44,"Step 3 "),u(),d(45,"h4",9),h(46,"Update your Trades"),u(),d(47,"p",10),h(48,"Record results and analyze your trading performance."),u(),d(49,"a",15),h(50,"Manage Positions"),u()()()()(),d(51,"div",3)(52,"div",4)(53,"div",5)(54,"div",16)(55,"mat-icon"),h(56,"psychology"),u()(),d(57,"div",7)(58,"div",8),h(59,"Step 4 "),u(),d(60,"h4",9),h(61,"Reflection & Meditation"),u(),d(62,"p",10),h(63,"Clear your mind with mindfulness practices."),u(),d(64,"a",17),h(65,"Begin Session"),u()()()()()()()),e&2&&(m(19),_("routerLink","/emotions"),m(15),_("routerLink","/tradejournal"),m(15),_("routerLink","/tradejournal"),m(15),_("routerLink","/meditationhub"))},dependencies:[mt,ie,JC,an],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:8px}.card-body[_ngcontent-%COMP%]{padding-left:0}.card-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.75rem}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}.btn-custom[_ngcontent-%COMP%]{border-radius:20px;font-weight:600}.step-icon[_ngcontent-%COMP%]{width:64px;height:64px;background:var(--step-color, --primary-btn-color);border-radius:16px;display:flex;align-items:center;justify-content:center;flex-shrink:0;box-shadow:0 2px 8px #0000000a}.step-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:36px;width:36px;height:36px;line-height:36px;display:flex;align-items:center;justify-content:center}.card-body.d-flex.align-items-center[_ngcontent-%COMP%]{gap:1.5rem}@media (max-width: 576px){.card-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.btn-custom[_ngcontent-%COMP%]{padding:.5rem 1rem}}"]})};var Ot=class n{constructor(t,e){this.supabaseService=t;this.router=e}canActivate(t,e){return this.supabaseService.loginStatus()?!0:this.router.createUrlTree([""],{queryParams:{returnUrl:e.url}})}static \u0275fac=function(e){return new(e||n)(P(Ce),P($e))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wa=class n{constructor(t,e){this.supabaseService=t;this.router=e}canActivate(t,e){return this.supabaseService.loginStatus()?this.router.createUrlTree(["/home"]):!0}static \u0275fac=function(e){return new(e||n)(P(Ce),P($e))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var oS=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||n)(x(wn),x(Je))};static \u0275dir=be({type:n})}return n})(),ps=(()=>{class n extends oS{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ln(n)))(i||n)}})();static \u0275dir=be({type:n,features:[Nt]})}return n})(),ai=new L(""),bR={provide:ai,useExisting:tn(()=>Xi),multi:!0},Xi=(()=>{class n extends ps{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ln(n)))(i||n)}})();static \u0275dir=be({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&C("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[nn([bR]),Nt]})}return n})(),wR={provide:ai,useExisting:tn(()=>Se),multi:!0};function CR(){let n=br()?br().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var ER=new L(""),Se=(()=>{class n extends oS{_compositionMode;_composing=!1;constructor(e,r,i){super(e,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!CR())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||n)(x(wn),x(Je),x(ER,8))};static \u0275dir=be({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&C("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[nn([wR]),Nt]})}return n})();function oi(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function sS(n){return n!=null&&typeof n.length=="number"}var Jg=new L(""),Xg=new L(""),SR=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ee=class{static min(t){return DR(t)}static max(t){return IR(t)}static required(t){return xR(t)}static requiredTrue(t){return TR(t)}static email(t){return MR(t)}static minLength(t){return AR(t)}static maxLength(t){return kR(t)}static pattern(t){return NR(t)}static nullValidator(t){return aS(t)}static compose(t){return hS(t)}static composeAsync(t){return mS(t)}};function DR(n){return t=>{if(oi(t.value)||oi(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function IR(n){return t=>{if(oi(t.value)||oi(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function xR(n){return oi(n.value)?{required:!0}:null}function TR(n){return n.value===!0?null:{required:!0}}function MR(n){return oi(n.value)||SR.test(n.value)?null:{email:!0}}function AR(n){return t=>oi(t.value)||!sS(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function kR(n){return t=>sS(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function NR(n){if(!n)return aS;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(oi(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function aS(n){return null}function lS(n){return n!=null}function cS(n){return Ri(n)?Le(n):n}function uS(n){let t={};return n.forEach(e=>{t=e!=null?k(k({},t),e):t}),Object.keys(t).length===0?null:t}function dS(n,t){return t.map(e=>e(n))}function PR(n){return!n.validate}function fS(n){return n.map(t=>PR(t)?t:e=>t.validate(e))}function hS(n){if(!n)return null;let t=n.filter(lS);return t.length==0?null:function(e){return uS(dS(e,t))}}function pS(n){return n!=null?hS(fS(n)):null}function mS(n){if(!n)return null;let t=n.filter(lS);return t.length==0?null:function(e){let r=dS(e,t).map(cS);return xs(r).pipe(q(uS))}}function gS(n){return n!=null?mS(fS(n)):null}function ZE(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function vS(n){return n._rawValidators}function _S(n){return n._rawAsyncValidators}function Wg(n){return n?Array.isArray(n)?n:[n]:[]}function ud(n,t){return Array.isArray(n)?n.includes(t):n===t}function YE(n,t){let e=Wg(t);return Wg(n).forEach(i=>{ud(e,i)||e.push(i)}),e}function JE(n,t){return Wg(t).filter(e=>!ud(n,e))}var dd=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=pS(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=gS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Yi=class extends dd{name;get formDirective(){return null}get path(){return null}},Ji=class extends dd{_parent=null;name=null;valueAccessor=null},fd=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},OR={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},vW=B(k({},OR),{"[class.ng-submitted]":"isSubmitted"}),Me=(()=>{class n extends fd{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(x(Ji,2))};static \u0275dir=be({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Y("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Nt]})}return n})(),Gn=(()=>{class n extends fd{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(x(Yi,10))};static \u0275dir=be({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Y("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Nt]})}return n})();var Ga="VALID",cd="INVALID",ds="PENDING",Qa="DISABLED",si=class{},hd=class extends si{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Ka=class extends si{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Za=class extends si{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},fs=class extends si{status;source;constructor(t,e){super(),this.status=t,this.source=e}},Gg=class extends si{source;constructor(t){super(),this.source=t}},Qg=class extends si{source;constructor(t){super(),this.source=t}};function ev(n){return(vd(n)?n.validators:n)||null}function RR(n){return Array.isArray(n)?pS(n):n||null}function tv(n,t){return(vd(t)?t.asyncValidators:n)||null}function FR(n){return Array.isArray(n)?gS(n):n||null}function vd(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function yS(n,t,e){let r=n.controls;if(!(t?Object.keys(r):r).length)throw new T(1e3,"");if(!r[e])throw new T(1001,"")}function bS(n,t,e){n._forEachChild((r,i)=>{if(e[i]===void 0)throw new T(1002,"")})}var hs=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return gr(this.statusReactive)}set status(t){gr(()=>this.statusReactive.set(t))}_status=et(()=>this.statusReactive());statusReactive=U(void 0);get valid(){return this.status===Ga}get invalid(){return this.status===cd}get pending(){return this.status==ds}get disabled(){return this.status===Qa}get enabled(){return this.status!==Qa}errors;get pristine(){return gr(this.pristineReactive)}set pristine(t){gr(()=>this.pristineReactive.set(t))}_pristine=et(()=>this.pristineReactive());pristineReactive=U(!0);get dirty(){return!this.pristine}get touched(){return gr(this.touchedReactive)}set touched(t){gr(()=>this.touchedReactive.set(t))}_touched=et(()=>this.touchedReactive());touchedReactive=U(!1);get untouched(){return!this.touched}_events=new Pe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(YE(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(YE(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(JE(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(JE(t,this._rawAsyncValidators))}hasValidator(t){return ud(this._rawValidators,t)}hasAsyncValidator(t){return ud(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(B(k({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Za(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new Za(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(B(k({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Ka(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new Ka(!0,r))}markAsPending(t={}){this.status=ds;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new fs(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(B(k({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Qa,this.errors=null,this._forEachChild(i=>{i.disable(B(k({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new hd(this.value,r)),this._events.next(new fs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(B(k({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ga,this._forEachChild(r=>{r.enable(B(k({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(B(k({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ga||this.status===ds)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new hd(this.value,e)),this._events.next(new fs(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(B(k({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qa:Ga}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=ds,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let r=cS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new fs(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new ye,this.statusChanges=new ye}_calculateStatus(){return this._allControlsDisabled()?Qa:this.errors?cd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ds)?ds:this._anyControlsHaveStatus(cd)?cd:Ga}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new Ka(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Za(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){vd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=RR(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=FR(this._rawAsyncValidators)}},pd=class extends hs{constructor(t,e,r){super(ev(e),tv(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){bS(this,!0,t),Object.keys(t).forEach(r=>{yS(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Kg=class extends pd{};var _d=new L("",{providedIn:"root",factory:()=>yd}),yd="always";function wS(n,t){return[...t.path,n]}function Zg(n,t,e=yd){nv(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),VR(n,t),UR(n,t),jR(n,t),LR(n,t)}function XE(n,t,e=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),gd(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function md(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function LR(n,t){if(t.valueAccessor.setDisabledState){let e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function nv(n,t){let e=vS(n);t.validator!==null?n.setValidators(ZE(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let r=_S(n);t.asyncValidator!==null?n.setAsyncValidators(ZE(r,t.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();md(t._rawValidators,i),md(t._rawAsyncValidators,i)}function gd(n,t){let e=!1;if(n!==null){if(t.validator!==null){let i=vS(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let i=_S(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}let r=()=>{};return md(t._rawValidators,r),md(t._rawAsyncValidators,r),e}function VR(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&CS(n,t)})}function jR(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&CS(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function CS(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function UR(n,t){let e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function BR(n,t){n==null,nv(n,t)}function $R(n,t){return gd(n,t)}function ES(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function HR(n){return Object.getPrototypeOf(n.constructor)===ps}function zR(n,t){n._syncPendingControls(),t.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function SS(n,t){if(!t)return null;Array.isArray(t);let e,r,i;return t.forEach(o=>{o.constructor===Se?e=o:HR(o)?r=o:i=o}),i||r||e||null}function qR(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function eS(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function tS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Ya=class extends hs{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,r){super(ev(e),tv(r,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vd(e)&&(e.nonNullable||e.initialValueIsDefault)&&(tS(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){eS(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){eS(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){tS(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var WR=n=>n instanceof Ya;var GR={provide:Ji,useExisting:tn(()=>st)},nS=Promise.resolve(),st=(()=>{class n extends Ji{_changeDetectorRef;callSetDisabledState;control=new Ya;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ye;constructor(e,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=SS(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),ES(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Zg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){nS.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let r=e.isDisabled.currentValue,i=r!==0&&En(r);nS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?wS(e,this._parent):[e]}static \u0275fac=function(r){return new(r||n)(x(Yi,9),x(Jg,10),x(Xg,10),x(ai,10),x(Ae,8),x(_d,8))};static \u0275dir=be({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[nn([GR]),Nt,fr]})}return n})(),Qn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=be({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),QR={provide:ai,useExisting:tn(()=>Ja),multi:!0},Ja=(()=>{class n extends ps{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ln(n)))(i||n)}})();static \u0275dir=be({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&C("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[nn([QR]),Nt]})}return n})();var KR={provide:ai,useExisting:tn(()=>Xa),multi:!0},Xa=(()=>{class n extends ps{writeValue(e){this.setProperty("value",parseFloat(e))}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ln(n)))(i||n)}})();static \u0275dir=be({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,i){r&1&&C("change",function(s){return i.onChange(s.target.value)})("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[nn([KR]),Nt]})}return n})(),DS=new L("");var ZR={provide:Yi,useExisting:tn(()=>xn)},xn=(()=>{class n extends Yi{callSetDisabledState;get submitted(){return gr(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=et(()=>this._submittedReactive());_submittedReactive=U(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new ye;constructor(e,r,i){super(),this.callSetDisabledState=i,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(gd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let r=this.form.get(e.path);return Zg(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){XE(e.control||null,e,!1),qR(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this._submittedReactive.set(!0),zR(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Gg(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new Qg(this.form))}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,i=this.form.get(e.path);r!==i&&(XE(r||null,e),WR(i)&&(Zg(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);BR(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&$R(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nv(this.form,this),this._oldForm&&gd(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(x(Jg,10),x(Xg,10),x(_d,8))};static \u0275dir=be({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&C("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[nn([ZR]),Nt,fr]})}return n})();var YR={provide:Ji,useExisting:tn(()=>Tn)},Tn=(()=>{class n extends Ji{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new ye;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=SS(this,o)}ngOnChanges(e){this._added||this._setUpControl(),ES(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return wS(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(x(Yi,13),x(Jg,10),x(Xg,10),x(ai,10),x(DS,8))};static \u0275dir=be({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[nn([YR]),Nt,fr]})}return n})(),JR={provide:ai,useExisting:tn(()=>ms),multi:!0};function IS(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function XR(n){return n.split(":")[0]}var ms=(()=>{class n extends ps{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let r=this._getOptionId(e),i=IS(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){let r=XR(e);return this._optionMap.has(r)?this._optionMap.get(r):e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ln(n)))(i||n)}})();static \u0275dir=be({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&C("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[nn([JR]),Nt]})}return n})(),bd=(()=>{class n{_element;_renderer;_select;id;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(IS(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(x(Je),x(wn),x(ms,9))};static \u0275dir=be({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),eF={provide:ai,useExisting:tn(()=>xS),multi:!0};function rS(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function tF(n){return n.split(":")[0]}var xS=(()=>{class n extends ps{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let r;if(Array.isArray(e)){let i=e.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],c=this._getOptionValue(l.value);i.push(c)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let c=this._getOptionValue(l.value);i.push(c)}}}this.value=i,e(i)}}_registerOption(e){let r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){let r=tF(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ln(n)))(i||n)}})();static \u0275dir=be({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&C("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[nn([eF]),Nt]})}return n})(),wd=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(rS(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(rS(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(x(Je),x(wn),x(xS,9))};static \u0275dir=be({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var TS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Ye({})}return n})(),Yg=class extends hs{constructor(t,e,r){super(ev(e),tv(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){bS(this,!1,t),t.forEach((r,i)=>{yS(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,r)=>r._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function iS(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Kn=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,r=null){let i=this._reduceControls(e),o={};return iS(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new pd(i,o)}record(e,r=null){let i=this._reduceControls(e);return new Kg(i,r)}control(e,r,i){let o={};return this.useNonNullable?(iS(r)?o=r:(o.validators=r,o.asyncValidators=i),new Ya(e,B(k({},o),{nonNullable:!0}))):new Ya(e,r,i)}array(e,r,i){let o=e.map(s=>this._createControl(s));return new Yg(o,r,i)}_reduceControls(e){let r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){if(e instanceof Ya)return e;if(e instanceof hs)return e;if(Array.isArray(e)){let r=e[0],i=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(r,i,o)}else return this.control(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:_d,useValue:e.callSetDisabledState??yd}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Ye({imports:[TS]})}return n})(),un=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:DS,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:_d,useValue:e.callSetDisabledState??yd}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Xe({type:n});static \u0275inj=Ye({imports:[TS]})}return n})();var gs=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;async loadQuestions(){let{data:t,error:e}=await this.supabase.rpc("get_random_activequestions");if(e)throw console.error("Error loading questions: ",e),e;return t}async canLoadCheckInQuestions(){let t=this.supabaseService.user()?.id;if(!t)return console.error("User not authenticated, cannot check check-in status."),!1;let{data:e,error:r}=await this.supabase.rpc("can_checkin",{user_id:t});return r?(console.error("Error in RPC can_checkin:",r),!1):e===!0}async getEmotionCheckInResultForDate(t){let e=this.supabaseService.user()?.id;if(!e)return console.error("User not authenticated"),null;let r=new Date(t.setHours(0,0,0,0)).toISOString(),i=new Date(t.setHours(23,59,59,999)).toISOString(),{data:o,error:s}=await this.supabase.from("answers").select("analysis").eq("user_id",e).gte("created_at",r).lte("created_at",i).order("created_at",{ascending:!1}).limit(1).single();return s?s.code==="PGRST116"?(console.log(`No check-in found for date: ${t.toDateString()}`),null):(console.error("Error fetching check-in result for date:",s),null):o?o.analysis:null}async submitUserCheckIn(t){let e=this.supabaseService.user()?.id;if(!e)return{error:new Error("User not authenticated")};let{error:r}=await this.supabase.rpc("perform_checkin",{in_user_id:e,in_answers:t.answers,in_analysis:t.analysis});return{error:r}}async adminLoadQuestions(){let{data:t,error:e}=await this.supabase.from("adminquestions").select("*");if(e)throw console.error("Error loading questions: ",e),e;return t}async adminSaveQuestions(t){let e=null;for(let r of t.filter(i=>i.isModified))if(r.question_id){let{data:i,error:o}=await this.supabase.from("adminquestions").update({question_data:r.question_data,active:r.active}).eq("question_id",r.question_id).select().single();if(o){console.error("Error updating question:",o),e=o;break}else r.updated_at=i.updated_at,r.isModified=!1}else{let{data:i,error:o}=await this.supabase.from("adminquestions").insert([{question_data:r.question_data,active:r.active}]).select().single();if(o){console.error("Error inserting question:",o),e=o;break}else r.question_id=i.question_id,r.created_at=i.created_at,r.updated_at=i.updated_at,r.isModified=!1}return{error:e}}async deleteQuestion(t){let{error:e}=await this.supabase.from("adminquestions").delete().eq("question_id",t.question_id);return{error:e}}static \u0275fac=function(e){return new(e||n)(P(Ce))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var nF=(n,t)=>({"alert-success":n,"alert-danger":t});function rF(n,t){if(n&1&&(d(0,"div",18),h(1),u()),n&2){let e=b();_("ngClass",Cn(2,nF,e.messageType==="success",e.messageType==="error")),m(),ee(" ",e.message," ")}}function iF(n,t){if(n&1){let e=J();Un(0),d(1,"input",27),ne("ngModelChange",function(i){S(e);let o=b().$implicit;return re(o.choicesInput,i)||(o.choicesInput=i),D(i)}),C("change",function(){S(e);let i=b().$implicit,o=b();return D(o.updateChoices(i))}),u(),d(2,"div",28),h(3,'e.g., "Option A, Option B, Option C"'),u(),Bn()}if(n&2){let e=b().$implicit;m(),te("ngModel",e.choicesInput)}}function oF(n,t){if(n&1){let e=J();d(0,"tr")(1,"td")(2,"select",19),ne("ngModelChange",function(i){let o=S(e).$implicit;return re(o.question_data.question_type,i)||(o.question_data.question_type=i),D(i)}),C("change",function(){let i=S(e).$implicit,o=b();return D(o.onQuestionChange(i))}),d(3,"option",9),h(4,"Fill"),u(),d(5,"option",10),h(6,"Multiple"),u(),d(7,"option",11),h(8,"Select One"),u()()(),d(9,"td")(10,"input",20),ne("ngModelChange",function(i){let o=S(e).$implicit;return re(o.question_data.question_icon,i)||(o.question_data.question_icon=i),D(i)}),C("change",function(){let i=S(e).$implicit,o=b();return D(o.onQuestionChange(i))}),u()(),d(11,"td")(12,"input",21),ne("ngModelChange",function(i){let o=S(e).$implicit;return re(o.question_data.question_title,i)||(o.question_data.question_title=i),D(i)}),C("change",function(){let i=S(e).$implicit,o=b();return D(o.onQuestionChange(i))}),u()(),d(13,"td")(14,"textarea",22),ne("ngModelChange",function(i){let o=S(e).$implicit;return re(o.question_data.question,i)||(o.question_data.question=i),D(i)}),C("change",function(){let i=S(e).$implicit,o=b();return D(o.onQuestionChange(i))}),u()(),d(15,"td"),A(16,iF,4,1,"ng-container",23),u(),d(17,"td")(18,"input",24),ne("ngModelChange",function(i){let o=S(e).$implicit;return re(o.question_data.placeholder,i)||(o.question_data.placeholder=i),D(i)}),C("change",function(){let i=S(e).$implicit,o=b();return D(o.onQuestionChange(i))}),u()(),d(19,"td")(20,"div",25)(21,"input",26),ne("ngModelChange",function(i){let o=S(e).$implicit;return re(o.active,i)||(o.active=i),D(i)}),C("change",function(){let i=S(e).$implicit,o=b();return D(o.onQuestionChange(i))}),u()()(),d(22,"td"),h(23),ht(24,"date"),u()()}if(n&2){let e=t.$implicit;m(2),te("ngModel",e.question_data.question_type),m(8),te("ngModel",e.question_data.question_icon),m(2),te("ngModel",e.question_data.question_title),m(2),te("ngModel",e.question_data.question),m(2),_("ngIf",e.question_data.question_type!=="fill"),m(2),te("ngModel",e.question_data.placeholder),m(3),te("ngModel",e.active),m(2),O(pt(24,8,e.updated_at,"short"))}}function sF(n,t){if(n&1){let e=J();d(0,"div",29)(1,"input",30),ne("ngModelChange",function(i){S(e);let o=b();return re(o.newQuestionChoices,i)||(o.newQuestionChoices=i),D(i)}),u()()}if(n&2){let e=b();m(),te("ngModel",e.newQuestionChoices)}}var Cd=class n{constructor(t,e){this.cdr=t;this.supabaseService=e}questions=[];newQuestionText="";newQuestionType="fill";newQuestionChoices="";message="";messageType="success";async ngOnInit(){let t=await this.supabaseService.adminLoadQuestions();this.questions=t.map(e=>B(k({},e),{choicesInput:e.question_data.choices?.join(", ")||""})),this.cdr.markForCheck()}onQuestionChange(t){t.isModified=!0}updateChoices(t){let e=t.choicesInput??"";t.question_data.choices=e.split(",").map(r=>r.trim()).filter(r=>r),t.isModified=!0}addQuestion(){if(!this.newQuestionText.trim())return;let t={question_type:this.newQuestionType,question:this.newQuestionText.trim(),placeholder:this.newQuestionText.trim()};if(this.newQuestionType!=="fill"){let e=this.newQuestionChoices.split(",").map(r=>r.trim()).filter(r=>r);t.choices=e}this.questions.push({question_data:t,choicesInput:this.newQuestionChoices,active:!0,isModified:!0}),this.newQuestionText="",this.newQuestionChoices="",this.newQuestionType="fill",this.cdr.detectChanges()}async saveChanges(){let{error:t}=await this.supabaseService.adminSaveQuestions(this.questions);t?this.showMessage("Error saving questions","error"):this.showMessage("Questions saved successfully","success"),this.cdr.detectChanges()}async deleteQuestion(t){if(!t.question_id){this.questions=this.questions.filter(r=>r!==t),this.showMessage("Question removed locally","success"),this.cdr.markForCheck();return}let{error:e}=await this.supabaseService.deleteQuestion(t);e?this.showMessage("Error deleting question","error"):(this.questions=this.questions.filter(r=>r.question_id!==t.question_id),this.showMessage("Question deleted successfully","success")),this.cdr.markForCheck()}showMessage(t,e){this.message=t,this.messageType=e,this.cdr.markForCheck(),setTimeout(()=>{this.message="",this.cdr.markForCheck()},4e3)}hasChanges(){return this.questions.some(t=>t.isModified)}static \u0275fac=function(e){return new(e||n)(x(Ae),x(gs))};static \u0275cmp=K({type:n,selectors:[["app-admin-emotion-dashboard"]],decls:53,vars:6,consts:[[1,"container-fluid","mt-4","p-5"],["class","alert",3,"ngClass",4,"ngIf"],[1,"table","mt-5"],[4,"ngFor","ngForOf"],["href","https://fonts.google.com/icons","target","_blank"],[1,"mt-4"],[1,"row","g-3","align-items-center","mb-3"],[1,"col-md-3"],[1,"form-select",3,"ngModelChange","ngModel"],["value","fill"],["value","multiple"],["value","select-one"],[1,"col-md-5"],["type","text","placeholder","Enter question text",1,"form-control",3,"ngModelChange","ngModel"],["class","col-md-4",4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click","disabled"],[1,"alert",3,"ngClass"],[1,"form-select",3,"ngModelChange","change","ngModel"],["type","text","placeholder","Enter icon URL or name",1,"form-control",3,"ngModelChange","change","ngModel"],["type","text","placeholder","Enter question title",1,"form-control",3,"ngModelChange","change","ngModel"],["type","text",1,"form-control",3,"ngModelChange","change","ngModel"],[4,"ngIf"],["type","text","placeholder","Enter placeholder text",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"form-check","form-switch"],["type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel"],["type","text","placeholder","Comma-separated choices",1,"form-control","mb-1",3,"ngModelChange","change","ngModel"],[1,"text-muted","small"],[1,"col-md-4"],["type","text","placeholder","Comma-separated choices",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,r){e&1&&(d(0,"div",0),A(1,rF,2,5,"div",1),d(2,"h1"),h(3,"Admin Emotion Question Dashboard"),u(),d(4,"table",2)(5,"thead")(6,"tr")(7,"th"),h(8,"Type"),u(),d(9,"th"),h(10,"Question Icon"),u(),d(11,"th"),h(12,"Question Title"),u(),d(13,"th"),h(14,"Question Text"),u(),d(15,"th"),h(16,"Choices"),u(),d(17,"th"),h(18,"Placeholder"),u(),d(19,"th"),h(20,"Active"),u(),d(21,"th"),h(22,"Last Updated"),u()()(),d(23,"tbody"),A(24,oF,25,11,"tr",3),u()(),d(25,"label"),h(26,"For icons, go to this website: "),d(27,"a",4),h(28,"https://fonts.google.com/icons"),u(),h(29,". "),R(30,"br"),h(31,"Search for favourite icon. When you click your icon, you will look for the name of the icon and "),R(32,"br"),h(33," put it into the space"),u(),d(34,"h4",5),h(35,"Add New Question"),u(),d(36,"div",6)(37,"div",7)(38,"select",8),ne("ngModelChange",function(o){return re(r.newQuestionType,o)||(r.newQuestionType=o),o}),d(39,"option",9),h(40,"Fill"),u(),d(41,"option",10),h(42,"Multiple"),u(),d(43,"option",11),h(44,"Select One"),u()()(),d(45,"div",12)(46,"input",13),ne("ngModelChange",function(o){return re(r.newQuestionText,o)||(r.newQuestionText=o),o}),u()(),A(47,sF,2,1,"div",14),u(),d(48,"div",15)(49,"button",16),C("click",function(){return r.addQuestion()}),h(50,"Add Question"),u(),d(51,"button",17),C("click",function(){return r.saveChanges()}),h(52,"Save Changes"),u()()()),e&2&&(m(),_("ngIf",r.message),m(23),_("ngForOf",r.questions),m(14),te("ngModel",r.newQuestionType),m(8),te("ngModel",r.newQuestionText),m(),_("ngIf",r.newQuestionType!=="fill"),m(4),_("disabled",!r.hasChanges()))},dependencies:[gt,bd,wd,Se,Xi,ms,Me,st,ie,Hn,nt,_e,$o],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:auto}.question-row[_ngcontent-%COMP%]{position:relative}.delete-button[_ngcontent-%COMP%]{display:none;position:absolute;right:10px;top:50%;transform:translateY(-50%)}.question-row[_ngcontent-%COMP%]:hover   .delete-button[_ngcontent-%COMP%]{display:block}.alert[_ngcontent-%COMP%]{padding:10px 20px;margin-bottom:15px;border-radius:4px;text-align:center}.table[_ngcontent-%COMP%]{--bs-table-bg: transparent}"]})};var ov=(n,t)=>t.some(e=>n instanceof e),AS,kS;function aF(){return AS||(AS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lF(){return kS||(kS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var sv=new WeakMap,rv=new WeakMap,Ed=new WeakMap;function cF(n){let t=new Promise((e,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{e(eo(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return Ed.set(t,n),t}function uF(n){if(sv.has(n))return;let t=new Promise((e,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{e(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});sv.set(n,t)}var av={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return sv.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return eo(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function RS(n){av=n(av)}function dF(n){return lF().includes(n)?function(...t){return n.apply(lv(this),t),eo(this.request)}:function(...t){return eo(n.apply(lv(this),t))}}function fF(n){return typeof n=="function"?dF(n):(n instanceof IDBTransaction&&uF(n),ov(n,aF())?new Proxy(n,av):n)}function eo(n){if(n instanceof IDBRequest)return cF(n);if(rv.has(n))return rv.get(n);let t=fF(n);return t!==n&&(rv.set(n,t),Ed.set(t,n)),t}var lv=n=>Ed.get(n);function el(n,t,{blocked:e,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,t),a=eo(s);return r&&s.addEventListener("upgradeneeded",l=>{r(eo(s.result),l.oldVersion,l.newVersion,eo(s.transaction),l)}),e&&s.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var hF=["get","getKey","getAll","getAllKeys","count"],pF=["put","add","delete","clear"],iv=new Map;function NS(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(iv.get(t))return iv.get(t);let e=t.replace(/FromIndex$/,""),r=t!==e,i=pF.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hF.includes(e)))return;let o=async function(s,...a){let l=this.transaction(s,i?"readwrite":"readonly"),c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[e](...a),i&&l.done]))[0]};return iv.set(t,o),o}RS(n=>B(k({},n),{get:(t,e,r)=>NS(t,e)||n.get(t,e,r),has:(t,e)=>!!NS(t,e)||n.has(t,e)}));var mF=["continue","continuePrimaryKey","advance"],PS={},cv=new WeakMap,FS=new WeakMap,gF={get(n,t){if(!mF.includes(t))return n[t];let e=PS[t];return e||(e=PS[t]=function(...r){cv.set(this,FS.get(this)[t](...r))}),e}};async function*vF(...n){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...n)),!t)return;t=t;let e=new Proxy(t,gF);for(FS.set(e,t),Ed.set(e,lv(t));t;)yield e,t=await(cv.get(e)||t.continue()),cv.delete(e)}function OS(n,t){return t===Symbol.asyncIterator&&ov(n,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&ov(n,[IDBIndex,IDBObjectStore])}RS(n=>B(k({},n),{get(t,e,r){return OS(t,e)?vF:n.get(t,e,r)},has(t,e){return OS(t,e)||n.has(t,e)}}));var dn=class n{constructor(t,e){this.supabaseService=t;this.platformId=e;this.supabase=this.supabaseService.GetClient()}supabase;ngOnInit(){}async getUserTradeAccounts(){let t=this.supabaseService.user();if(!t)throw new Error("User not authenticated");let e="tradeaccount",r=!1,i=null;if(typeof window<"u"){r=sessionStorage.getItem(`${e}_refresh`)==="yes";let a=sessionStorage.getItem(e);if(a)try{i=JSON.parse(a)}catch(l){console.error("Error parsing cached trade accounts:",l),i=null}}if(!r&&i)return i;let{data:o,error:s}=await this.supabase.from(e).select("*").eq("user_id",t.id);if(s)throw console.error("Error fetching trade accounts:",s),s;return typeof window<"u"&&(sessionStorage.setItem(e,JSON.stringify(o)),sessionStorage.removeItem(`${e}_refresh`)),o||[]}async addTradeAccount(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let c=t,{track_pl:r,include_in_analytics:i,trading_instruments:o}=c,s=ao(c,["track_pl","include_in_analytics","trading_instruments"]),a={track_pl:r,include_in_analytics:i,trading_instruments:o},{error:l}=await this.supabase.from("tradeaccount").insert([B(k({},s),{user_id:e.id,metadata:a})]);return l?(console.error("Failed to add trade account:",l),!1):(sessionStorage.setItem("tradeaccount_refresh","yes"),!0)}async editTradeAccount(t,e){let r=this.supabaseService.user();if(!r)throw new Error("User not authenticated");let f=e,{track_pl:i,include_in_analytics:o,trading_instruments:s}=f,a=ao(f,["track_pl","include_in_analytics","trading_instruments"]),l={track_pl:i,include_in_analytics:o,trading_instruments:s},{error:c}=await this.supabase.from("tradeaccount").update(B(k({},a),{metadata:l})).eq("account_id",t).eq("user_id",r.id);return c?(console.error("Failed to update trade account:",c),!1):(sessionStorage.setItem("tradeaccount_refresh","yes"),!0)}async removeTradeAccount(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let{error:r}=await this.supabase.from("tradejournal").delete().eq("trade_account_id",t).eq("userid",e.id);if(r)return console.error("Failed to delete associated trade logs:",r),!1;let{error:i}=await this.supabase.from("tradeaccount").delete().eq("account_id",t).eq("user_id",e.id);return i?(console.error("Failed to remove trade account:",i),!1):(typeof window<"u"&&(sessionStorage.setItem("tradeaccount_refresh","yes"),sessionStorage.setItem(`tradejournal_${t}_refresh`,"yes")),!0)}async getProfile(){console.log("getting profile picture");let t=this.supabaseService.user();if(!t)throw new Error("User not authenticated");return this.supabase.from("usersaccount").select("*").eq("user_id",t.id).single()}async createProfile(t){if(!this.supabaseService.user())throw new Error("User not authenticated");return this.supabase.from("usersaccount").insert(t)}async updateProfile(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");return this.supabase.from("usersaccount").update(t).eq("user_id",e.id)}async uploadProfilePicture(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let r=t.name.split(".").pop(),i=`${e.id}/profile.${r}`;await(await el("profile-cache",1,{upgrade(a){a.createObjectStore("pictures")}})).delete("pictures",i);let{error:s}=await this.supabase.storage.from("user-profile-pictures").upload(i,t,{upsert:!0});return s?null:i}async cacheProfilePictureBlob(t,e){await(await el("profile-cache",1,{upgrade(i){i.createObjectStore("pictures")}})).put("pictures",e,t)}async getCachedProfilePictureBlobUrl(t){if(!t)return null;let e=await el("profile-cache",1,{upgrade(a){a.createObjectStore("pictures")}}),r=await e.get("pictures",t);if(r)return URL.createObjectURL(r);let i=await this.getPublicUrl(t);if(!i)return null;let o=await fetch(i);if(!o.ok)return null;let s=await o.blob();return await e.put("pictures",s,t),URL.createObjectURL(s)}clearCachedProfilePictureBlobUrl(){if(on(this.platformId)){let t=sessionStorage.getItem("profile_picture_blob_url");t&&(URL.revokeObjectURL(t),sessionStorage.removeItem("profile_picture_blob_url"))}}async deleteProfilePicture(){let{data:{user:t}}=await this.supabase.auth.getUser();if(!t)return;let e=`${t.id}/profile.png`,r=`${t.id}/profile.jpg`,i=`${t.id}/profile.jpeg`,o=`${t.id}/profile.webp`;await this.supabase.storage.from("user-profile-pictures").remove([e,r,i,o]);let s=await el("profile-cache",1,{upgrade(a){a.createObjectStore("pictures")}});await s.delete("pictures",e),await s.delete("pictures",r),await s.delete("pictures",i),await s.delete("pictures",o)}async getPublicUrl(t){let{data:e}=await this.supabase.storage.from("user-profile-pictures").createSignedUrl(t,60);return e?.signedUrl??null}static \u0275fac=function(e){return new(e||n)(P(Ce),P(dt))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var Zn=class n{constructor(t,e,r,i){this.supabaseService=t;this.supabaseAccountService=e;this.router=r;this.document=i;this.supabase=this.supabaseService.GetClient(),this.rootDomainName="https://app.tradingrehab.io/auth/update-password"}supabase;rootDomainName;async signIn(t,e){try{let{error:r}=await this.supabase.auth.signInWithPassword({email:t,password:e});if(r)throw r;return{success:!0}}catch(r){return console.error("Sign in error:",r),{success:!1,error:r}}}async logout(t=!0){try{await this.supabase.auth.signOut()}catch(e){console.error("Sign out error:",e)}this.supabaseService.updateSignalsFromSession(null),this.supabaseAccountService.clearCachedProfilePictureBlobUrl(),on(this.supabaseService.platformId)&&(sessionStorage.clear(),localStorage.clear()),t&&this.router.navigate(["/"])}async signUp(t,e,r,i){let{error:o}=await this.supabase.auth.signUp({email:t,password:e,options:{data:{firstname:r,lastname:i}}});return o?{success:!1,error:o}:{success:!0}}async requestPasswordReset(t){let{error:e}=await this.supabase.auth.resetPasswordForEmail(t,{redirectTo:"https://app.tradingrehab.io/#/?returnUrl=%2Fauth%2Fupdate-password"});return e?{success:!1,error:e}:{success:!0}}async updatePassword(t){let{error:e}=await this.supabase.auth.updateUser({password:t});return e?{success:!1,error:e}:{success:!0}}static \u0275fac=function(e){return new(e||n)(P(Ce),P(dn),P($e),P(Oe))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};function _F(n,t){if(n&1&&(d(0,"div",13),h(1),u()),n&2){let e=b();m(),ee(" ",e.errorMessage," ")}}function yF(n,t){n&1&&(d(0,"div",28),h(1," A valid email is required. "),u())}function bF(n,t){n&1&&(d(0,"div",28),h(1," Password must be at least 6 characters. "),u())}function wF(n,t){if(n&1){let e=J();d(0,"form",14),C("ngSubmit",function(){S(e);let i=b();return D(i.onSubmit())}),d(1,"div",15)(2,"label",16),h(3,"Email"),u(),R(4,"input",17),A(5,yF,2,0,"div",18),u(),d(6,"div",15)(7,"label",19),h(8,"Password"),u(),R(9,"input",20),A(10,bF,2,0,"div",18),d(11,"div",21)(12,"a",22),h(13,"Forgot password?"),u()()(),d(14,"div",23)(15,"button",24),h(16,"Continue"),u()(),d(17,"div",25)(18,"p",26),h(19,"Don't have an account? "),d(20,"a",27),C("click",function(){S(e);let i=b();return D(i.setActiveTab("signup"))}),h(21,"Sign up"),u()()()()}if(n&2){let e,r,i=b();_("formGroup",i.signinForm),m(5),_("ngIf",((e=i.signinForm.get("email"))==null?null:e.invalid)&&((e=i.signinForm.get("email"))==null?null:e.touched)),m(5),_("ngIf",((r=i.signinForm.get("password"))==null?null:r.invalid)&&((r=i.signinForm.get("password"))==null?null:r.touched)),m(5),_("disabled",i.signinForm.invalid)}}function CF(n,t){n&1&&(d(0,"small",43),h(1," First name is required "),u())}function EF(n,t){n&1&&(d(0,"small",43),h(1," Last name is required "),u())}function SF(n,t){n&1&&(d(0,"small",43),h(1," Valid email is required "),u())}function DF(n,t){n&1&&(d(0,"small",43),h(1," Password must be at least 6 characters "),u())}function IF(n,t){n&1&&(d(0,"small",43),h(1," Passwords do not match "),u())}function xF(n,t){if(n&1){let e=J();d(0,"form",14),C("ngSubmit",function(){S(e);let i=b();return D(i.onSignupSubmit())}),d(1,"div",29)(2,"div",30)(3,"label",31),h(4,"First Name"),u(),R(5,"input",32),A(6,CF,2,0,"small",33),u(),d(7,"div",30)(8,"label",34),h(9,"Last Name"),u(),R(10,"input",35),A(11,EF,2,0,"small",33),u()(),d(12,"div",15)(13,"label",36),h(14,"Email"),u(),R(15,"input",37),A(16,SF,2,0,"small",33),u(),d(17,"div",15)(18,"label",38),h(19,"Password"),u(),R(20,"input",39),A(21,DF,2,0,"small",33),u(),d(22,"div",15)(23,"label",40),h(24,"Confirm Password"),u(),R(25,"input",41),A(26,IF,2,0,"small",33),u(),d(27,"div",21)(28,"a",22),h(29,"Forgot password?"),u()(),d(30,"div",23)(31,"button",24),h(32,"Create Account"),u()(),d(33,"div",25)(34,"p",26),h(35,"Already have an account? "),d(36,"a",42),C("click",function(){S(e);let i=b();return D(i.setActiveTab("login"))}),h(37,"Login"),u()()()()}if(n&2){let e,r,i,o,s,a=b();_("formGroup",a.signupForm),m(6),_("ngIf",((e=a.signupForm.get("firstname"))==null?null:e.invalid)&&((e=a.signupForm.get("firstname"))==null?null:e.touched)),m(5),_("ngIf",((r=a.signupForm.get("lastname"))==null?null:r.invalid)&&((r=a.signupForm.get("lastname"))==null?null:r.touched)),m(5),_("ngIf",((i=a.signupForm.get("email"))==null?null:i.invalid)&&((i=a.signupForm.get("email"))==null?null:i.touched)),m(5),_("ngIf",((o=a.signupForm.get("password"))==null?null:o.invalid)&&((o=a.signupForm.get("password"))==null?null:o.touched)),m(5),_("ngIf",a.signupForm.hasError("mismatch")&&((s=a.signupForm.get("confirmPassword"))==null?null:s.touched)),m(5),_("disabled",a.signupForm.invalid)}}var Dd=class n{constructor(t,e,r,i,o,s,a){this.fb=t;this.router=e;this.route=r;this.cdr=i;this.supabaseService=o;this.supabaseAuthService=s;this.supabaseAccountService=a;this.signinForm=this.fb.group({email:["",[Ee.required,Ee.email]],password:["",[Ee.required,Ee.minLength(6)]]}),this.signupForm=this.fb.group({firstname:["",Ee.required],lastname:["",Ee.required],email:["",[Ee.required,Ee.email]],password:["",[Ee.required,Ee.minLength(6)]],confirmPassword:["",Ee.required]},{validators:this.passwordMatchValidator})}activeTab="login";signinForm;signupForm;errorMessage=null;ngOnInit(){this.route.queryParams.subscribe(t=>{t.mode==="signup"&&(this.activeTab="signup")})}passwordMatchValidator(t){let e=t.get("password")?.value,r=t.get("confirmPassword")?.value;return e===r?null:{mismatch:!0}}setActiveTab(t){this.activeTab=t,this.errorMessage=null}async onSubmit(){if(this.signinForm.invalid){this.signinForm.markAllAsTouched();return}let{email:t,password:e}=this.signinForm.getRawValue();try{if(await this.supabaseAuthService.signIn(t,e),!this.supabaseService.currentUsername()){this.errorMessage="Login failed. Please try again.",this.cdr.markForCheck();return}this.signinForm.reset();let r=this.route.snapshot.queryParams.returnUrl||"/home";this.router.navigateByUrl(r),this.cdr.markForCheck()}catch(r){this.errorMessage=r.message||"An unexpected error occurred.",this.cdr.markForCheck()}}async onSignupSubmit(){if(this.signupForm.invalid){this.errorMessage="Please fill them correctly.",this.signupForm.markAllAsTouched(),this.cdr.markForCheck();return}let{email:t,password:e,firstname:r,lastname:i}=this.signupForm.getRawValue();try{let{success:o,error:s}=await this.supabaseAuthService.signUp(t,e,r,i);if(!o){this.errorMessage=s?.message||"Signup failed.",this.cdr.markForCheck();return}let a=this.supabaseService.user();if(!a){this.errorMessage="User not found after signup.",this.cdr.markForCheck();return}await this.supabaseAccountService.createProfile({user_id:a.id,firstname:r,lastname:i,email:t,phone:null,profile_picture_url:null,updated_at:new Date().toISOString(),preferences:{},metadata:{}}),this.signupForm.reset(),this.router.navigateByUrl("/home"),this.cdr.markForCheck()}catch(o){this.errorMessage=o.message||"An unexpected error occurred.",this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(x(Kn),x($e),x(Et),x(Ae),x(Ce),x(Zn),x(dn))};static \u0275cmp=K({type:n,selectors:[["app-login-signup"]],decls:20,vars:7,consts:[[1,"auth-container"],[1,"auth-card"],[1,"text-center","mb-4"],[1,"logo-circle","mx-auto"],["src","/tr_logo.svg","alt","Logo",1,"img-fluid"],[1,"brand-name","mt-3"],[1,"brand-tagline"],[1,"auth-tabs","d-flex","justify-content-center","mb-4"],[1,"tabs-container"],[1,"tab",3,"click"],[1,"mx-2","tab-separator"],["class","alert alert-danger mb-3",4,"ngIf"],["class","auth-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert","alert-danger","mb-3"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"form-control"],[1,"d-flex","justify-content-end","mt-2"],["routerLink","/auth/forgot-password",1,"forgot-link"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-tr","btn-primary","btn-md",3,"disabled"],[1,"text-center","mt-4"],[1,"mb-0"],["href","javascript:void(0)",1,"signup-link",3,"click"],[1,"text-danger","small","mt-1"],[1,"row"],[1,"col-md-6","mb-3"],["for","firstname",1,"form-label"],["type","text","id","firstname","formControlName","firstname","placeholder","First name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","lastname",1,"form-label"],["type","text","id","lastname","formControlName","lastname","placeholder","Last name",1,"form-control"],["for","signup-email",1,"form-label"],["type","email","id","signup-email","formControlName","email","placeholder","Enter your email",1,"form-control"],["for","signup-password",1,"form-label"],["type","password","id","signup-password","formControlName","password","placeholder","Create a password",1,"form-control"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password",1,"form-control"],["href","javascript:void(0)",1,"login-link",3,"click"],[1,"text-danger"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),R(4,"img",4),u(),d(5,"h2",5),h(6,"TRADING REHAB"),u(),d(7,"p",6),h(8,"Where Disciplined Trading Begins"),u()(),d(9,"div",7)(10,"div",8)(11,"span",9),C("click",function(){return r.setActiveTab("login")}),h(12,"Login"),u(),d(13,"span",10),h(14,"\u2022"),u(),d(15,"span",9),C("click",function(){return r.setActiveTab("signup")}),h(16,"Sign Up"),u()()(),A(17,_F,2,1,"div",11)(18,wF,22,4,"form",12)(19,xF,38,7,"form",12),u()()),e&2&&(m(11),Y("active",r.activeTab==="login"),m(4),Y("active",r.activeTab==="signup"),m(2),_("ngIf",r.errorMessage),m(),_("ngIf",r.activeTab==="login"),m(),_("ngIf",r.activeTab==="signup"))},dependencies:[ie,_e,un,Qn,Se,Me,Gn,xn,Tn,mt],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100dvh;display:flex;align-items:center;justify-content:center}.auth-card[_ngcontent-%COMP%]{background-color:transparent;border-radius:12px;width:100%;max-width:450px;padding:30px}.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:transparent;position:relative;display:flex;align-items:center;justify-content:center;margin:0 auto}.dots-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;position:relative;background-image:radial-gradient(circle,#5046e5 3px,transparent 3px);background-size:15px 15px;transform:rotate(45deg)}.brand-name[_ngcontent-%COMP%]{font-weight:700;font-size:24px;margin-bottom:5px;letter-spacing:.5px}.brand-tagline[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.tabs-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-bottom:1px solid #eee;padding-bottom:5px}.tab[_ngcontent-%COMP%]{padding:8px 15px;cursor:pointer;color:#888;font-weight:500;font-size:16px;transition:color .2s}.tab.active[_ngcontent-%COMP%]{color:#5046e5;border-bottom:2px solid #5046e5}.tab-separator[_ngcontent-%COMP%]{color:#ccc}.auth-form[_ngcontent-%COMP%]{margin-top:10px}.form-control[_ngcontent-%COMP%]{height:auto;padding:12px 15px;border-radius:8px;border:1px solid #ddd;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{border-color:#5046e5;box-shadow:0 0 0 .2rem #5046e526}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555;margin-bottom:8px}.forgot-link[_ngcontent-%COMP%]{font-size:14px;color:#5046e5;text-decoration:none}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{color:#5046e5;font-weight:500;text-decoration:none}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-primary[_ngcontent-%COMP%]{background-color:#5046e5;border-color:#5046e5;padding:12px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus{background-color:#4238d0;border-color:#4238d0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#a8a4e0;border-color:#a8a4e0}.separator[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;color:#888;font-size:14px}.separator[_ngcontent-%COMP%]:before, .separator[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #ddd}.separator[_ngcontent-%COMP%]:before{margin-right:1em}.separator[_ngcontent-%COMP%]:after{margin-left:1em}.google-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;border:1px solid #ddd;color:#333;padding:12px;font-weight:500}.google-btn[_ngcontent-%COMP%]:hover{background-color:#f8f8f8;color:#333}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{padding:20px 15px}.brand-name[_ngcontent-%COMP%]{font-size:20px}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{padding:10px}}']})};var Id=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=K({type:n,selectors:[["app-welcome-message"]],decls:5,vars:0,consts:[[1,"text-center","p-3","bg-light","rounded-3","shadow-sm","mb-4"],[1,"fs-2","fw-bold","text-dark"],[1,"text-secondary","mb-0"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"h1",1),h(2,"Welcome to Your Meditation Hub!"),u(),d(3,"p",2),h(4,"Find your calm, track your journey."),u()())},encapsulation:2})};var TF=(n,t)=>({"btn-danger":n,"btn-success":t}),xd=class n{meditationDuration=U(10);timeLeft=U(10*60);isRunning=!1;timerInterval;timerCompleted=new ye;ngOnInit(){this.resetTimer()}ngOnDestroy(){this.clearTimerInterval()}formatTime(){let t=this.timeLeft(),e=Math.floor(t/60),r=t%60;return`${e.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}onDurationChange(t){this.meditationDuration.set(t),this.resetTimer()}toggleTimer(){this.isRunning=!this.isRunning,this.isRunning?this.startTimer():this.clearTimerInterval()}resetTimer(){this.isRunning=!1,this.clearTimerInterval(),this.timeLeft.set(this.meditationDuration()*60)}startTimer(){this.clearTimerInterval(),this.timerInterval=setInterval(()=>{this.timeLeft.update(t=>t-1),this.timeLeft()<=0&&(this.resetTimer(),this.timerCompleted.emit())},1e3)}clearTimerInterval(){this.timerInterval&&clearInterval(this.timerInterval)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=K({type:n,selectors:[["app-meditation-timer"]],outputs:{timerCompleted:"timerCompleted"},decls:22,vars:10,consts:[[1,"card","p-4","rounded-3","h-100","d-flex","flex-column","text-center"],[1,"fs-3","fw-bold","text-dark","mb-4"],[1,"display-4","fw-light","text-success","mb-4","p-3","bg-light","rounded-3","shadow-inset","mx-auto",2,"min-width","180px"],[1,"mb-4","w-100"],["for","duration",1,"form-label","text-dark","fs-6","fw-semibold","mb-2"],["type","range","id","duration","min","1","max","60",1,"form-range",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-center","gap-3"],[1,"btn","btn-lg","rounded-pill","text-white","fw-bold","shadow-sm","d-flex","align-items-center",3,"click","ngClass"],[1,"ms-2"],[1,"btn","btn-lg","btn-secondary","rounded-pill","text-white","fw-bold","shadow-sm","d-flex","align-items-center",3,"click"],[1,"mt-3","text-secondary","mb-0"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"h2",1),h(2,"Meditation Timer"),u(),d(3,"div",2),h(4),u(),d(5,"div",3)(6,"label",4),h(7),u(),d(8,"input",5),C("ngModelChange",function(o){return r.onDurationChange(o)}),u()(),d(9,"div",6)(10,"button",7),C("click",function(){return r.toggleTimer()}),d(11,"mat-icon"),h(12),u(),d(13,"span",8),h(14),u()(),d(15,"button",9),C("click",function(){return r.resetTimer()}),d(16,"mat-icon"),h(17,"restart_alt"),u(),d(18,"span",8),h(19,"Reset"),u()()(),d(20,"p",10),h(21),u()()),e&2&&(m(4),ee(" ",r.formatTime()," "),m(3),ee(" Duration (",r.meditationDuration()," min): "),m(),_("ngModel",r.meditationDuration()),m(2),_("ngClass",Cn(7,TF,r.isRunning,!r.isRunning)),m(2),O(r.isRunning?"pause":"play_arrow"),m(2),O(r.isRunning?"Pause":"Start"),m(7),ee(" ",r.isRunning?"Focus on your breath...":"Ready to begin?"," "))},dependencies:[ie,Hn,gt,Se,Xa,Me,st,an],styles:[".shadow-inset[_ngcontent-%COMP%]{box-shadow:inset 0 2px 4px #0000000f}"]})};function MF(n,t){if(n&1){let e=J();d(0,"div",4)(1,"div",5),C("click",function(){let i=S(e).$implicit,o=b();return D(o.selectMedia(i))}),d(2,"img",6),C("error",function(i){let o=S(e).$implicit,s=b();return D(s.onImageError(i,o.type))}),u(),d(3,"div",7)(4,"h3",8),h(5),u(),d(6,"p",9),h(7),u()()()()}if(n&2){let e=t.$implicit;m(2),_("src",e.thumbnail,Vn)("alt",e.title),m(3),O(e.title),m(2),O(e.type)}}var Td=class n{mediaLibrary=[];mediaSelected=new ye;selectMedia(t){this.mediaSelected.emit(t)}onImageError(t,e){let r=t.target;r.src=`https://placehold.co/300x180/E0F2F1/004D40?text=${e==="video"?"Video":"Audio"}`}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=K({type:n,selectors:[["app-media-catalog"]],inputs:{mediaLibrary:"mediaLibrary"},outputs:{mediaSelected:"mediaSelected"},decls:5,vars:1,consts:[[1,"card","bg-white","bg-opacity-90","p-4","rounded-3","shadow-sm","h-100","d-flex","flex-column"],[1,"fs-3","fw-bold","text-dark","mb-4","text-center"],[1,"row","row-cols-1","row-cols-sm-2","g-3","overflow-auto","flex-grow-1","pe-2"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"card","bg-light","bg-opacity-75","rounded-3","shadow-sm","overflow-hidden","cursor-pointer","hover-shadow-lg",3,"click"],[1,"card-img-top","object-fit-cover",2,"height","120px",3,"error","src","alt"],[1,"card-body","p-3"],[1,"card-title","fs-6","fw-semibold","text-dark","text-truncate","mb-1"],[1,"card-text","text-secondary","text-capitalize","small","mb-0"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"h2",1),h(2,"Video & Audio Catalog"),u(),d(3,"div",2),A(4,MF,8,4,"div",3),u()()),e&2&&(m(4),_("ngForOf",r.mediaLibrary))},dependencies:[ie,nt],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.hover-shadow-lg[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #00000026!important;transition:box-shadow .2s}"]})};function AF(n,t){if(n&1){let e=J();d(0,"div",3)(1,"h3",4),h(2),u(),d(3,"div",5),R(4,"iframe",6),u(),d(5,"div",7)(6,"button",8),C("click",function(){S(e);let i=b();return D(i.stop())}),d(7,"mat-icon"),h(8,"stop"),u(),d(9,"span",9),h(10,"Stop Playing"),u()()()()}if(n&2){let e=b();m(2),ee("Now Playing: ",e.media.title,""),m(2),_("src",e.safeUrl,kp)("title",e.media.title)}}function kF(n,t){n&1&&(d(0,"p",10),h(1,"Select a video or audio from the catalog to play."),u())}var Md=class n{constructor(t){this.sanitizer=t}_media=null;safeUrl=null;set media(t){this._media=t,this.safeUrl=t?this.sanitizer.bypassSecurityTrustResourceUrl(t.url):null}get media(){return this._media}playbackStopped=new ye;stop(){this.playbackStopped.emit()}static \u0275fac=function(e){return new(e||n)(x(la))};static \u0275cmp=K({type:n,selectors:[["app-media-player"]],inputs:{media:"media"},outputs:{playbackStopped:"playbackStopped"},decls:4,vars:2,consts:[["noMediaSelected",""],[1,"card","bg-white","bg-opacity-90","p-4","rounded-3","shadow-sm","min-h-150px","d-flex","align-items-center","justify-content-center"],["class","w-100 h-100",4,"ngIf","ngIfElse"],[1,"w-100","h-100"],[1,"fs-4","fw-semibold","text-dark","mb-3","text-center"],[1,"ratio","ratio-16x9","rounded-3","overflow-hidden","mb-3"],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src","title"],[1,"text-center"],[1,"btn","btn-danger","rounded-pill","d-inline-flex","align-items-center",3,"click"],[1,"ms-2"],[1,"text-secondary","fs-5"]],template:function(e,r){if(e&1&&(d(0,"div",1),A(1,AF,11,3,"div",2)(2,kF,2,0,"ng-template",null,0,Qr),u()),e&2){let i=$n(3);m(),_("ngIf",r.media)("ngIfElse",i)}},dependencies:[ie,_e,an],styles:[".min-h-150px[_ngcontent-%COMP%]{min-height:250px}"],changeDetection:0})};var Ad=class n{entrySaved=new ye;journalEntry="";save(){let t=this.journalEntry.trim();t&&(this.entrySaved.emit(t),this.journalEntry="")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=K({type:n,selectors:[["app-journal-writer"]],outputs:{entrySaved:"entrySaved"},decls:9,vars:1,consts:[[1,"card","bg-white","bg-opacity-90","p-4","rounded-3","shadow-sm","h-100","d-flex","flex-column"],[1,"fs-3","fw-bold","text-dark","mb-4","text-center"],["placeholder","Write about your meditation experience...","rows","5",1,"form-control","p-3","rounded-3","border","border-secondary","flex-grow-1","mb-3",3,"ngModelChange","ngModel"],[1,"btn","btn-success","rounded-pill","fw-bold","shadow-sm","d-inline-flex","align-items-center","justify-content-center",3,"click"],[1,"ms-2"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"h2",1),h(2,"Meditation Journal"),u(),d(3,"textarea",2),ne("ngModelChange",function(o){return re(r.journalEntry,o)||(r.journalEntry=o),o}),u(),d(4,"button",3),C("click",function(){return r.save()}),d(5,"mat-icon"),h(6,"save"),u(),d(7,"span",4),h(8,"Save Entry"),u()()()),e&2&&(m(3),te("ngModel",r.journalEntry))},dependencies:[ie,gt,Se,Me,st,an],encapsulation:2})};function NF(n,t){if(n&1&&(d(0,"div",6)(1,"p",7),h(2),u(),d(3,"p",8),h(4),u()()),n&2){let e=t.$implicit;m(2),O(e.date),m(2),O(e.content)}}function PF(n,t){if(n&1&&(d(0,"div",4),A(1,NF,5,2,"div",5),u()),n&2){let e=b();m(),_("ngForOf",e.entries)}}function OF(n,t){n&1&&(d(0,"div",9)(1,"p"),h(2,"No journal entries yet."),u()())}var kd=class n{entries=[];static \u0275fac=function(e){return new(e||n)};static \u0275cmp=K({type:n,selectors:[["app-journal-history"]],inputs:{entries:"entries"},decls:6,vars:2,consts:[["noEntries",""],[1,"card","bg-white","bg-opacity-90","p-4","rounded-3","shadow-sm","h-100","d-flex","flex-column"],[1,"fs-3","fw-bold","text-dark","mb-4","text-center"],["class","overflow-auto flex-grow-1 pe-2",4,"ngIf","ngIfElse"],[1,"overflow-auto","flex-grow-1","pe-2"],["class","card bg-light bg-opacity-75 p-3 rounded shadow-sm mb-3",4,"ngFor","ngForOf"],[1,"card","bg-light","bg-opacity-75","p-3","rounded","shadow-sm","mb-3"],[1,"text-secondary","small","mb-1"],[1,"text-dark","small","mb-0",2,"white-space","pre-wrap"],[1,"text-secondary","text-center","flex-grow-1","d-flex","align-items-center","justify-content-center","mb-0"]],template:function(e,r){if(e&1&&(d(0,"div",1)(1,"h2",2),h(2,"Journal History"),u(),A(3,PF,2,1,"div",3)(4,OF,3,0,"ng-template",null,0,Qr),u()),e&2){let i=$n(5);m(3),_("ngIf",r.entries.length>0)("ngIfElse",i)}},dependencies:[ie,nt,_e],encapsulation:2,changeDetection:0})};var LS=(n,t)=>({"btn-success":n,"btn-light":t});function RF(n,t){if(n&1){let e=J();d(0,"div",16)(1,"label",17),h(2,"Choose a color:"),u(),d(3,"input",18),ne("ngModelChange",function(i){S(e);let o=b(2);return re(o.color,i)||(o.color=i),D(i)}),C("change",function(){S(e);let i=b(2);return D(i.updateBackground())}),u()()}if(n&2){let e=b(2);m(3),te("ngModel",e.color)}}function FF(n,t){if(n&1&&(d(0,"div",23),R(1,"img",24),u()),n&2){let e=b(3);m(),_("src",e.image,Vn)}}function LF(n,t){if(n&1){let e=J();d(0,"div",16)(1,"input",19,0),C("change",function(i){S(e);let o=b(2);return D(o.handleImageUpload(i))}),u(),d(3,"button",20),C("click",function(){S(e);let i=$n(2);return D(i.click())}),d(4,"mat-icon"),h(5,"upload"),u(),d(6,"span",21),h(7,"Select Image"),u()(),A(8,FF,2,1,"div",22),u()}if(n&2){let e=b(2);m(8),_("ngIf",e.image)}}function VF(n,t){if(n&1){let e=J();d(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"button",8),C("click",function(){S(e);let i=b();return D(i.showModal=!1)}),u()(),d(5,"div",9)(6,"h2",10),h(7,"Customize Background"),u(),d(8,"div",11)(9,"button",12),C("click",function(){S(e);let i=b();return D(i.backgroundType="color")}),h(10,"Solid Color"),u(),d(11,"button",12),C("click",function(){S(e);let i=b();return D(i.backgroundType="image")}),h(12,"Image"),u()(),A(13,RF,4,1,"div",13)(14,LF,9,1,"div",13),d(15,"div",14)(16,"button",15),C("click",function(){S(e);let i=b();return D(i.showModal=!1)}),h(17,"Done"),u()()()()()()}if(n&2){let e=b();m(9),_("ngClass",Cn(4,LS,e.backgroundType==="color",e.backgroundType!=="color")),m(2),_("ngClass",Cn(7,LS,e.backgroundType==="image",e.backgroundType!=="image")),m(2),_("ngIf",e.backgroundType==="color"),m(),_("ngIf",e.backgroundType==="image")}}function jF(n,t){n&1&&R(0,"div",25)}var Nd=class n{backgroundChanged=new ye;showModal=!1;backgroundType="color";color="#ffffff";image=null;handleImageUpload(t){let e=t.target;if(e.files?.[0]){let r=new FileReader;r.onload=()=>{this.image=r.result,this.backgroundType="image",this.updateBackground()},r.readAsDataURL(e.files[0])}}updateBackground(){let t=this.backgroundType==="color"?{"background-color":this.color}:{"background-image":`url(${this.image})`,"background-size":"cover","background-position":"center"};this.backgroundChanged.emit(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=K({type:n,selectors:[["app-settings"]],outputs:{backgroundChanged:"backgroundChanged"},decls:5,vars:2,consts:[["fileInput",""],["title","Customize Background",1,"btn","btn-lg","bg-light","rounded-circle","shadow-lg","hover-rotate-45","d-flex","align-items-center","justify-content-center",2,"width","58px","height","58px",3,"click"],["class","modal d-block","tabindex","-1",4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],["tabindex","-1",1,"modal","d-block"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-3","shadow-lg"],[1,"modal-header","border-0","pb-0"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","p-4","pt-0","text-center"],[1,"fs-2","fw-bold","text-dark","mb-4"],[1,"d-flex","justify-content-center","gap-3","mb-4"],[1,"btn","rounded-pill","fw-semibold",3,"click","ngClass"],["class","text-center",4,"ngIf"],[1,"mt-4","text-center"],[1,"btn","btn-success","rounded-pill","fw-bold",3,"click"],[1,"text-center"],["for","colorPicker",1,"form-label","fs-5","fw-semibold","mb-3"],["type","color","id","colorPicker",1,"form-control","form-control-color","mx-auto",2,"width","96px","height","96px",3,"ngModelChange","change","ngModel"],["type","file","accept","image/*",1,"d-none",3,"change"],[1,"btn","btn-primary","rounded-pill","fw-bold","d-inline-flex","align-items-center",3,"click"],[1,"ms-2"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["alt","Preview",1,"img-fluid","rounded-3","shadow-sm","mx-auto",2,"max-height","192px","object-fit","cover",3,"src"],[1,"modal-backdrop","fade","show"]],template:function(e,r){e&1&&(d(0,"button",1),C("click",function(){return r.showModal=!0}),d(1,"mat-icon"),h(2,"settings"),u()(),A(3,VF,18,10,"div",2)(4,jF,1,0,"div",3)),e&2&&(m(3),_("ngIf",r.showModal),m(),_("ngIf",r.showModal))},dependencies:[ie,Hn,_e,gt,Se,Me,st,an],styles:[".modal.d-block[_ngcontent-%COMP%]{display:block}.hover-rotate-45[_ngcontent-%COMP%]:hover{transform:rotate(45deg);transition:transform .3s ease-in-out}"]})};function UF(n,t){if(n&1&&(d(0,"div",13),h(1),u()),n&2){let e=b();m(),ee(" ",e.message," ")}}var Pd=class n{selectedMedia=null;savedEntries=[];backgroundStyle={"background-color":"#f8f9fa"};message="";mediaLibrary=[{id:1,type:"video",title:"Calm Forest Walk",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Forest+Walk",url:"https://www.youtube.com/embed/dQw4w9WgXcQ"},{id:2,type:"audio",title:"Ocean Waves",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Ocean+Waves",url:"https://www.youtube.com/embed/V-_O7nl0Ii0"},{id:3,type:"video",title:"Zen Garden",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Zen+Garden",url:"https://www.youtube.com/embed/z63o1jJ4h_4"},{id:4,type:"audio",title:"Gentle Rain",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Gentle+Rain",url:"https://www.youtube.com/embed/q76bMs-mupk"}];onMediaSelected(t){this.selectedMedia=t,this.setMessage(`Now playing: ${t.title}`)}onPlaybackStopped(){this.selectedMedia=null}onMeditationComplete(){this.setMessage("Meditation complete! \u{1F64F}")}onJournalEntrySaved(t){let e={id:Date.now(),date:new Date().toLocaleString(),content:t};this.savedEntries=[e,...this.savedEntries],this.setMessage("Journal entry saved!")}onBackgroundChanged(t){this.backgroundStyle=t,this.setMessage("Background updated!")}setMessage(t){this.message=t,setTimeout(()=>{this.message=""},3e3)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=K({type:n,selectors:[["app-meditation-hub"]],decls:18,vars:5,consts:[[1,"d-flex","flex-column","align-items-center","justify-content-center","p-3","font-inter","min-vh-100",3,"ngStyle"],["class","position-absolute top-0 mt-5 bg-white bg-opacity-90 text-dark px-4 py-2 rounded shadow-lg z-index-1000 animate-fade-in-down",4,"ngIf"],[1,"p-4","w-100"],[1,"row","g-4"],[1,"col-12"],[1,"col-12","col-lg-6"],[3,"timerCompleted"],[3,"mediaSelected","mediaLibrary"],[3,"playbackStopped","media"],[3,"entrySaved"],[3,"entries"],[1,"col-12","text-center","py-3"],[3,"backgroundChanged"],[1,"position-absolute","top-0","mt-5","bg-white","bg-opacity-90","text-dark","px-4","py-2","rounded","shadow-lg","z-index-1000","animate-fade-in-down"]],template:function(e,r){e&1&&(d(0,"div",0),A(1,UF,2,1,"div",1),d(2,"div",2)(3,"div",3)(4,"div",4),R(5,"app-welcome-message"),u(),d(6,"section",5)(7,"app-meditation-timer",6),C("timerCompleted",function(){return r.onMeditationComplete()}),u()(),d(8,"section",5)(9,"app-media-catalog",7),C("mediaSelected",function(o){return r.onMediaSelected(o)}),u()(),d(10,"section",4)(11,"app-media-player",8),C("playbackStopped",function(){return r.onPlaybackStopped()}),u()(),d(12,"section",5)(13,"app-journal-writer",9),C("entrySaved",function(o){return r.onJournalEntrySaved(o)}),u()(),d(14,"section",5),R(15,"app-journal-history",10),u(),d(16,"div",11)(17,"app-settings",12),C("backgroundChanged",function(o){return r.onBackgroundChanged(o)}),u()()()()()),e&2&&(_("ngStyle",r.backgroundStyle),m(),_("ngIf",r.message),m(8),_("mediaLibrary",r.mediaLibrary),m(2),_("media",r.selectedMedia),m(4),_("entries",r.savedEntries))},dependencies:[ie,_e,Mw,Id,xd,Td,Md,Ad,kd,Nd],styles:["[_nghost-%COMP%]{--animate-duration: .5s}.font-inter[_ngcontent-%COMP%]{font-family:Inter,sans-serif}.z-index-1000[_ngcontent-%COMP%]{z-index:1000}.animate-fade-in-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInDown var(--animate-duration) ease-out forwards}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"]})};var Od=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;ngOnInit(){}async addTradeLog(t,e){let r=this.supabaseService.user();if(!r)throw new Error("User not authenticated");t.userid=r.id;let{data:i,error:o}=await this.supabase.from(e).insert([t]);if(o)throw console.error("Error inserting trade log: ",o),o;return typeof window<"u"&&sessionStorage.setItem(`${e}_refresh`,"yes"),i}async getTradeLogs(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let r=!1,i=null;if(typeof window<"u"){r=sessionStorage.getItem(`${t}_refresh`)==="yes";let a=sessionStorage.getItem(t);if(a)try{i=JSON.parse(a)}catch(l){console.error("Error parsing cached trade logs:",l),i=null}}if(!r&&i)return i;let{data:o,error:s}=await this.supabase.from(t).select("*").eq("userid",e.id);if(s)throw console.error("Error fetching trade logs:",s),s;return typeof window<"u"&&(sessionStorage.setItem(t,JSON.stringify(o)),sessionStorage.removeItem(`${t}_refresh`)),o}async getTradeLogsOfSelectedAccount(t,e){let r=this.supabaseService.user();if(!r)throw new Error("User not authenticated");let i=`${t}_${e}`,o=`${i}_refresh`,s=!1,a=null;if(typeof window<"u"){s=sessionStorage.getItem(o)==="yes";let f=sessionStorage.getItem(i);if(f)try{a=JSON.parse(f)}catch(p){console.error("Error parsing cached trade logs:",p),a=null}}if(!s&&a)return a;let{data:l,error:c}=await this.supabase.from(t).select("*").eq("userid",r.id).eq("trade_account_id",e);if(c)throw console.error("Error fetching trade logs:",c),c;return typeof window<"u"&&(sessionStorage.setItem(i,JSON.stringify(l)),sessionStorage.removeItem(o)),l}async addTradeLogOfSelectedAccount(t,e,r){let i=this.supabaseService.user();if(!i)throw new Error("User not authenticated");t.userid=i.id;let{data:o,error:s}=await this.supabase.from(e).insert([t]);if(s)throw console.error("Error inserting trade log: ",s),s;return typeof window<"u"&&sessionStorage.setItem(`${e}_${r}_refresh`,"yes"),o}async updateTradeLogOfSelectedAccount(t,e,r){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:o,error:s}=await this.supabase.from(e).update(t).eq("tradeid",t.tradeid);if(s)throw console.error("Error updating trade log: ",s),s;return typeof window<"u"&&sessionStorage.setItem(`${e}_${r}_refresh`,"yes"),o}async deleteTradeLogOfSelectedAccount(t,e,r){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:o,error:s}=await this.supabase.from(e).delete().eq("tradeid",t);if(s)throw console.error("Error deleting trade log: ",s),s;return typeof window<"u"&&sessionStorage.setItem(`${e}_${r}_refresh`,"yes"),o}async updateTradeLog(t,e){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:i,error:o}=await this.supabase.from(e).update(t).eq("tradeid",t.tradeid);if(o)throw console.error("Error updating trade log: ",o),o;return typeof window<"u"&&sessionStorage.setItem(`${e}_refresh`,"yes"),i}async deleteTradeLog(t,e){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:i,error:o}=await this.supabase.from(e).delete().eq("tradeid",t);if(o)throw console.error("Error deleting trade log: ",o),o;return typeof window<"u"&&sessionStorage.setItem(`${e}_refresh`,"yes"),i}async canLogTrade(){if(this.supabaseService.user()?.id===null)throw new Error("User not authenticated");let{data:e,error:r}=await this.supabase.rpc("can_log_trade");return!r&&e===!0}static \u0275fac=function(e){return new(e||n)(P(Ce))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};function $F(n,t){if(n&1&&(d(0,"div",14),h(1),u()),n&2){let e=b();m(),O(e.actionSuccess)}}function HF(n,t){if(n&1&&(d(0,"div",15),h(1),u()),n&2){let e=b();m(),O(e.actionError)}}function zF(n,t){if(n&1){let e=J();d(0,"li",16)(1,"div",17)(2,"i",18),C("click",function(){let i=S(e).$implicit,o=b();return D(o.onRowClick(i))}),u(),d(3,"div",19),C("click",function(){let i=S(e).$implicit,o=b();return D(o.onRowClick(i))}),d(4,"h5",20),h(5),u(),d(6,"span",21)(7,"span",22),h(8),u(),h(9," | "),d(10,"span",22),h(11),u(),h(12," | "),d(13,"span",22),h(14),ht(15,"date"),u()()(),d(16,"div",23),C("click",function(){let i=S(e).$implicit,o=b();return D(o.deleteAccount(i.account_id))}),R(17,"i",24),u()()()}if(n&2){let e=t.$implicit;m(5),O(e.account_name),m(3),ee("Broker: ",e.broker_name,""),m(3),Zs("Balance: ",e.balance," ",e.currency,""),m(3),ee("Created At: ",pt(15,5,e.created_at,"y, MMMM, d h:mm a"),"")}}function qF(n,t){if(n&1&&(d(0,"div",15),h(1),u()),n&2){let e=b(2);m(),O(e.formError)}}function WF(n,t){if(n&1){let e=J();d(0,"div",25),C("click",function(i){S(e);let o=b();return D(o.closeFormOnOutside(i))})("keydown.escape",function(){S(e);let i=b();return D(i.toggleForm())}),d(1,"div",26),C("click",function(i){return S(e),D(i.stopPropagation())}),d(2,"nav",27)(3,"ol",28)(4,"li",3)(5,"a",4),h(6,"Dashboard"),u()(),d(7,"li",3)(8,"a",29),C("click",function(i){S(e);let o=b();return D(o.closeFormOnOutside(i))}),h(9,"Trading Accounts"),u()(),d(10,"li",5),h(11,"Create Manual Account"),u()()(),d(12,"h4",30),h(13,"Create Manual Account"),u(),d(14,"p",31),h(15,"Set up a manual trading account to track your trades"),u(),d(16,"form",32),C("ngSubmit",function(){S(e);let i=b();return D(i.submitForm())}),d(17,"div",33)(18,"label",34),h(19,"Account Name"),u(),R(20,"input",35),u(),d(21,"div",33)(22,"label",34),h(23,"Broker Name"),u(),R(24,"input",36),u(),d(25,"div",33)(26,"label",34),h(27,"Account Type"),u(),R(28,"input",37),u(),d(29,"div",33)(30,"label",34),h(31,"Currency"),u(),R(32,"input",38),u(),d(33,"div",33)(34,"label",34),h(35,"Initial Balance"),u(),R(36,"input",39),u(),d(37,"div",33)(38,"label",34),h(39,"Account Notes (Optional)"),u(),R(40,"textarea",40),u(),d(41,"h5",8),h(42,"Trading Preferences"),u(),d(43,"div",41),R(44,"input",42),d(45,"label",43),h(46,"Track P&L"),u(),d(47,"small",44),h(48,"Enable profit and loss tracking for this account"),u()(),d(49,"div",41),R(50,"input",45),d(51,"label",46),h(52,"Include in Analytics"),u(),d(53,"small",44),h(54,"Include this account in overall performance metrics"),u()(),A(55,qF,2,1,"div",10),d(56,"div",47)(57,"button",48),C("click",function(){S(e);let i=b();return D(i.toggleForm())}),h(58,"Cancel"),u(),d(59,"button",49),h(60,"Create Account"),u()()()()()}if(n&2){let e=b();m(16),_("formGroup",e.tradeAccountForm),m(39),_("ngIf",e.formError)}}function GF(n,t){if(n&1){let e=J();d(0,"div",25),C("click",function(){S(e);let i=b();return D(i.cancelDelete())})("keydown.escape",function(){S(e);let i=b();return D(i.cancelDelete())}),d(1,"div",26),C("click",function(i){return S(e),D(i.stopPropagation())}),d(2,"h5",33),h(3,"Confirm Deletion"),u(),d(4,"p"),h(5,"Are you sure you want to delete this trading account and all its associated data?"),u(),d(6,"div",47)(7,"button",50),C("click",function(){S(e);let i=b();return D(i.cancelDelete())}),h(8,"Cancel"),u(),d(9,"button",7),C("click",function(){S(e);let i=b();return D(i.confirmDelete())}),h(10,"Delete"),u()()()()}}var Rd=class n{constructor(t,e,r,i){this.fb=t;this.supabaseService=e;this.supabaseAccountService=r;this.cdr=i;this.tradeAccountForm=this.fb.group({account_name:["",Ee.required],broker_name:[""],account_type:[""],currency:["USD"],balance:[0,Ee.min(0)],track_pl:[!1],include_in_analytics:[!1]})}tradeAccounts=[];showForm=!1;tradeAccountForm;formError=null;actionError=null;actionSuccess=null;selectedAccountId=null;showDeleteConfirm=!1;pendingDeleteAccountId=null;funMaterialIcons=["movie","music_note","videogame_asset","theater_comedy","sports_esports","fastfood","local_cafe","restaurant_menu","icecream","emoji_food_beverage","flight_takeoff","directions_car","hiking","beach_access","camping","smartphone","computer","memory","developer_mode","settings","mood","sentiment_satisfied","sentiment_very_dissatisfied","celebration","favorite","auto_awesome","nightlight","stars","magic_wand","castle"];ngOnInit(){this.loadAccounts()}async loadAccounts(){try{this.tradeAccounts=await this.supabaseAccountService.getUserTradeAccounts()}catch{this.actionError="Failed to load accounts. Please try again."}finally{this.cdr.markForCheck()}}async onRowClick(t){this.selectedAccountId=t.account_id,this.tradeAccountForm.patchValue({account_name:t.account_name,broker_name:t.broker_name,account_type:t.account_type,currency:t.currency,balance:t.balance,track_pl:t.metadata?.track_pl||!1,include_in_analytics:t.metadata?.include_in_analytics||!1}),this.showForm=!0}toggleForm(){this.showForm=!this.showForm,this.formError=null,this.actionSuccess=null,this.actionError=null,this.selectedAccountId=null,this.showForm||this.tradeAccountForm.reset({currency:"USD",balance:0})}async submitForm(){if(this.formError="",this.tradeAccountForm.valid){let t=this.tradeAccountForm.value;this.selectedAccountId?await this.supabaseAccountService.editTradeAccount(this.selectedAccountId,t)?(this.actionSuccess="Account updated successfully",this.loadAccounts(),this.toggleForm()):this.formError="Failed to update account":await this.supabaseAccountService.addTradeAccount(t)?(this.actionSuccess="Account added successfully",this.loadAccounts(),this.toggleForm()):this.formError="Failed to add account"}this.cdr.markForCheck()}async deleteAccount(t){this.showDeleteConfirm=!0,this.pendingDeleteAccountId=t}confirmDelete(){this.pendingDeleteAccountId&&this.performAccountDeletion(this.pendingDeleteAccountId),this.showDeleteConfirm=!1,this.pendingDeleteAccountId=null}cancelDelete(){this.showDeleteConfirm=!1,this.pendingDeleteAccountId=null}async performAccountDeletion(t){this.actionError=null,this.actionSuccess=null;try{await this.supabaseAccountService.removeTradeAccount(t)?(this.loadAccounts(),this.actionSuccess="Account deleted successfully."):this.actionError="Failed to delete account."}catch{this.actionError="An unexpected error occurred while deleting."}finally{this.cdr.markForCheck(),setTimeout(()=>{this.actionSuccess="",this.cdr.markForCheck()},5e3)}}handleEscape(t){this.showForm&&this.toggleForm()}closeFormOnOutside(t){t.target===t.currentTarget&&this.toggleForm()}static \u0275fac=function(e){return new(e||n)(x(Kn),x(Od),x(dn),x(Ae))};static \u0275cmp=K({type:n,selectors:[["app-tradeaccountmanage"]],hostBindings:function(e,r){e&1&&C("keydown.escape",function(o){return r.handleEscape(o)},!1,rb)},decls:23,vars:5,consts:[[1,"container","mt-4"],["aria-label","breadcrumb",2,"--bs-breadcrumb-divider",`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E")`],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/home",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],[1,"btn","btn-tr",3,"click"],[1,"mt-4"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"list-group"],["class","list-group-item bg-transparent",4,"ngFor","ngForOf"],["class","overlay","tabindex","0",3,"click","keydown.escape",4,"ngIf"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[1,"list-group-item","bg-transparent"],[1,"d-flex","align-items-center"],[1,"logo-circle","bi","bi-star-fill","text-primary",2,"font-size","2rem",3,"click"],[1,"ms-3",3,"click"],[1,"mt-2"],[1,"d-block","row","text-muted"],[1,"col-4"],["title","Delete Account",1,"delete-button","justify-content-end",3,"click"],[1,"bi","bi-trash"],["tabindex","0",1,"overlay",3,"click","keydown.escape"],[1,"modal-card",3,"click"],["aria-label","breadcrumb"],[1,"breadcrumb","small"],[3,"click"],[1,"mb-1"],[1,"text-muted","mb-3"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","account_name","placeholder","e.g., My Futures Account",1,"form-control"],["type","text","formControlName","broker_name","placeholder","e.g., NinjaTrader, TastyWorks",1,"form-control"],["type","text","formControlName","account_type","placeholder","e.g., Margin, Cash",1,"form-control"],["type","text","formControlName","currency","placeholder","USD",1,"form-control"],["type","number","formControlName","balance",1,"form-control"],["rows","3","placeholder","Add any additional information about this account","disabled","",1,"form-control"],[1,"form-check","form-switch","mb-2"],["type","checkbox","formControlName","track_pl","id","track_pl",1,"form-check-input"],["for","track_pl",1,"form-check-label"],[1,"text-muted","d-block","ms-4"],["type","checkbox","formControlName","include_in_analytics","id","include_in_analytics",1,"form-check-input"],["for","include_in_analytics",1,"form-check-label"],[1,"d-flex","justify-content-end","gap-2","mt-3"],["type","button",1,"btn","btn-tr-secondary",3,"click"],["type","submit",1,"btn","btn-tr"],[1,"btn","btn-tr-secondary",3,"click"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),h(5,"Dashboard"),u()(),d(6,"li",5),h(7,"Trading Accounts"),u()()(),d(8,"div",6)(9,"h3"),h(10,"Your Trade Accounts"),u(),d(11,"button",7),C("click",function(){return r.toggleForm()}),h(12,"Add Account"),u()(),d(13,"div",8)(14,"h5"),h(15,"Manage your trading accounts"),u()(),A(16,$F,2,1,"div",9)(17,HF,2,1,"div",10),d(18,"div",0)(19,"ul",11),A(20,zF,18,8,"li",12),u()(),A(21,WF,61,2,"div",13)(22,GF,11,0,"div",13),u()),e&2&&(m(16),_("ngIf",r.actionSuccess),m(),_("ngIf",r.actionError),m(3),_("ngForOf",r.tradeAccounts),m(),_("ngIf",r.showForm),m(),_("ngIf",r.showDeleteConfirm))},dependencies:[un,Qn,Se,Ja,Xi,Me,Gn,xn,Tn,ie,nt,_e,$o,mt],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;z-index:1050}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1050}.modal-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;width:100%;max-width:600px;max-height:90dvh;overflow-y:auto;box-shadow:0 10px 25px #00000026}.list-group-item[_ngcontent-%COMP%]{cursor:pointer}.delete-button[_ngcontent-%COMP%]{color:red;display:none;margin-left:auto}.list-group-item[_ngcontent-%COMP%]:hover   .delete-button[_ngcontent-%COMP%]{color:red;display:block}"]})};function QF(n,t){if(n&1&&R(0,"img",35),n&2){let e=b();_("src",e.currentImageUrl,Vn)}}function KF(n,t){if(n&1&&R(0,"img",36),n&2){let e=b();_("src",e.previewUrl,Vn)}}function ZF(n,t){n&1&&(d(0,"div",14),h(1,"No new image selected"),u())}function YF(n,t){if(n&1&&(d(0,"div",23)(1,"div",37),h(2),u()()),n&2){let e=b();m(2),O(e.errorMessage)}}function JF(n,t){if(n&1&&(d(0,"button",38),h(1," Save Changes "),u()),n&2){let e=b();_("disabled",e.profileForm.invalid)}}var Fd=class n{constructor(t,e,r){this.fb=t;this.supabaseService=e;this.cdr=r;this.profileForm=this.fb.group({firstname:["",Ee.required],lastname:[""],email:["",[Ee.required,Ee.email]],phone:[""]})}profileForm;currentImageUrl=null;previewUrl=null;selectedFile=null;userId="";originalFormValue;formChanged=!1;errorMessage="";async ngOnInit(){await this.loadProfile(),this.trackFormChanges()}async loadProfile(){try{let{data:t,error:e}=await this.supabaseService.getProfile();if(e){this.errorMessage="Failed to load profile: "+e.message,console.error("Supabase profile load error:",e);return}t?(this.profileForm.patchValue({firstname:t.firstname,lastname:t.lastname,email:t.email,phone:t.phone}),this.originalFormValue=this.profileForm.getRawValue(),t.profile_picture_url?(this.currentImageUrl=await this.supabaseService.getCachedProfilePictureBlobUrl(t.profile_picture_url),this.previewUrl=this.currentImageUrl):(this.currentImageUrl=null,this.previewUrl=null)):(this.errorMessage="No profile data found. Please complete your profile.",console.warn("No profile data received from Supabase."))}catch(t){this.errorMessage="An unexpected error occurred while loading profile.",console.error("Error in loadProfile:",t)}finally{this.cdr.markForCheck()}}async removeProfilePicture(){try{this.errorMessage="",await this.supabaseService.deleteProfilePicture(),this.supabaseService.clearCachedProfilePictureBlobUrl(),await this.supabaseService.updateProfile({profile_picture_url:null}),this.currentImageUrl=null,this.previewUrl=null,this.selectedFile=null,this.formChanged=!0}catch(t){this.errorMessage="Failed to remove profile picture: "+(t.message||t.toString()),console.error("Error removing profile picture:",t)}finally{this.cdr.markForCheck()}}trackFormChanges(){this.profileForm.valueChanges.subscribe(()=>{this.formChanged=this.profileForm.dirty||!!this.selectedFile,this.cdr.markForCheck()})}onFileChange(t){this.errorMessage="";let e=t.target,r=e?.files?.[0];if(!r){this.selectedFile=null;return}if(!["image/jpeg","image/png","image/webp"].includes(r.type)){this.errorMessage="Only JPG, PNG, or WEBP images are allowed.",this.selectedFile=null,e.value="";return}if(r.size>1024*1024){this.errorMessage="File size must be less than 1MB.",this.selectedFile=null,e.value="";return}this.selectedFile=r,this.previewUrl&&URL.revokeObjectURL(this.previewUrl),this.previewUrl=URL.createObjectURL(r),this.formChanged=!0,this.cdr.markForCheck()}async saveChanges(){if(this.errorMessage="",!this.formChanged){this.errorMessage="No changes detected.";return}if(this.profileForm.invalid){this.errorMessage="Please correct the highlighted form errors.",this.profileForm.markAllAsTouched(),this.cdr.markForCheck();return}let t=this.originalFormValue.profile_picture_url??null;if(this.selectedFile)try{if(t=await this.supabaseService.uploadProfilePicture(this.selectedFile),!t){this.errorMessage="Failed to upload profile picture. Please try again.",console.error("Supabase uploadProfilePicture returned null filePath");return}}catch(i){this.errorMessage="Error uploading profile picture: "+(i.message||i.toString()),console.error("Error during profile picture upload:",i);return}let e=this.profileForm.getRawValue(),r={firstname:e.firstname,lastname:e.lastname,email:e.email,phone:e.phone,profile_picture_url:t,updated_at:new Date().toISOString(),preferences:{},metadata:{}};try{await this.supabaseService.updateProfile(r),t&&(this.supabaseService.clearCachedProfilePictureBlobUrl(),this.currentImageUrl=await this.supabaseService.getCachedProfilePictureBlobUrl(t),this.previewUrl=this.currentImageUrl),this.formChanged=!1,this.selectedFile=null,this.originalFormValue=this.profileForm.getRawValue(),this.errorMessage=""}catch(i){this.errorMessage="Failed to save changes: "+(i.message||i.toString()),console.error("Error during profile update:",i)}finally{this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(x(Kn),x(dn),x(Ae))};static \u0275cmp=K({type:n,selectors:[["app-user-account-settings"]],decls:58,vars:6,consts:[[1,"container","mb-5"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"mb-2"],[1,"text-muted","mb-4"],[1,"row","g-3","mb-4"],[1,""],[1,"card","border-0","shadow-sm","p-3","h-100"],[1,"d-flex","align-items-center","mb-2"],["alt","Profile","class","rounded-circle me-2","style","width: 40px; height: 40px; object-fit: cover;",3,"src",4,"ngIf"],[1,"mb-0"],[1,"text-muted"],[1,"row","g-4",3,"ngSubmit","formGroup"],[1,"fw-bold"],[1,"col-md-6"],[1,"form-label"],["formControlName","firstname","placeholder","First name",1,"form-control"],["formControlName","lastname","placeholder","Last name",1,"form-control"],["formControlName","email","placeholder","Email","type","email",1,"form-control"],["formControlName","phone","placeholder","+1 (123) 456-7890",1,"form-control"],[1,"col-12"],[1,"fw-bold","mt-3"],[1,"card","p-3","shadow-sm","border-light","bg-light-subtle"],[1,"form-label","d-block"],["alt","Preview","class","img-thumbnail","style","width: 120px;",3,"src",4,"ngIf"],["class","text-muted",4,"ngIf"],["type","file",1,"form-control","mt-2",3,"change"],[1,"mt-2","d-flex","gap-2"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],["class","col-12",4,"ngIf"],[1,"col-12","text-end"],["type","submit","class","btn btn-tr",3,"disabled",4,"ngIf"],["alt","Profile",1,"rounded-circle","me-2",2,"width","40px","height","40px","object-fit","cover",3,"src"],["alt","Preview",1,"img-thumbnail",2,"width","120px",3,"src"],[1,"alert","alert-danger"],["type","submit",1,"btn","btn-tr",3,"disabled"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),h(5,"Dashboard"),u()(),d(6,"li",5),h(7,"Account Settings"),u()()(),d(8,"h2",6),h(9,"Account Settings"),u(),d(10,"p",7),h(11,"Manage your profile, subscription, and preferences"),u(),d(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11),A(16,QF,1,1,"img",12),d(17,"h5",13),h(18,"Profile Information"),u()(),d(19,"small",14),h(20,"Update your personal details and public profile"),u()()()(),d(21,"form",15),C("ngSubmit",function(){return r.saveChanges()}),d(22,"h5",16),h(23,"Personal Information"),u(),d(24,"div",17)(25,"label",18),h(26,"First Name"),u(),R(27,"input",19),u(),d(28,"div",17)(29,"label",18),h(30,"Last Name"),u(),R(31,"input",20),u(),d(32,"div",17)(33,"label",18),h(34,"Email Address"),u(),R(35,"input",21),u(),d(36,"div",17)(37,"label",18),h(38,"Phone"),u(),R(39,"input",22),u(),d(40,"div",23)(41,"h6",24),h(42,"Profile Picture"),u(),d(43,"div",25)(44,"div",6)(45,"label",26),h(46,"Preview New Photo"),u(),A(47,KF,1,1,"img",27)(48,ZF,2,0,"div",28),u(),d(49,"input",29),C("change",function(o){return r.onFileChange(o)}),u(),d(50,"small",14),h(51,"JPG, PNG or GIF. Max 1MB."),u(),d(52,"div",30)(53,"button",31),C("click",function(){return r.removeProfilePicture()}),h(54,"Remove"),u()()()(),A(55,YF,3,1,"div",32),d(56,"div",33),A(57,JF,2,1,"button",34),u()()()),e&2&&(m(16),_("ngIf",r.currentImageUrl),m(5),_("formGroup",r.profileForm),m(26),_("ngIf",r.previewUrl),m(),_("ngIf",!r.previewUrl),m(7),_("ngIf",r.errorMessage),m(2),_("ngIf",r.formChanged))},dependencies:[un,Qn,Se,Me,Gn,xn,Tn,ie,_e,mt],encapsulation:2})};var Ld=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;ngOnInit(){}async adminLoadMeditationVideos(){let{data:t,error:e}=await this.supabase.from("adminmeditationvideos").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Error loading meditation videos: ",e),e;return t}async loadActiveMeditationVideos(){let{data:t,error:e}=await this.supabase.from("activemeditationvideos").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Error loading meditation videos: ",e),e;return t}async addMeditationVideo(t){let{error:e}=await this.supabase.from("adminmeditationvideos").insert([{title:t.title,url:t.url,category:t.category,description:t.description,isactive:t.isactive}]);return e&&console.error("Error adding meditation video: ",e),{error:e}}async updateMeditationVideo(t){let{error:e}=await this.supabase.from("adminmeditationvideos").update({title:t.title,url:t.url,category:t.category,description:t.description,isactive:t.isactive,updated_time:t.updated_time}).eq("id",t.id);return e&&console.error("Error updating meditation video: ",e),{error:e}}static \u0275fac=function(e){return new(e||n)(P(Ce))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var eL=(n,t)=>({"alert-success":n,"alert-danger":t});function tL(n,t){if(n&1&&(d(0,"div",7),h(1),u()),n&2){let e=b();_("ngClass",Cn(2,eL,e.messageType==="success",e.messageType==="error")),m(),ee(" ",e.message," ")}}function nL(n,t){if(n&1){let e=J();d(0,"tr")(1,"td")(2,"input",8),ne("ngModelChange",function(i){let o=S(e).$implicit;return re(o.title,i)||(o.title=i),D(i)}),C("ngModelChange",function(){let i=S(e).$implicit,o=b();return D(o.onFieldChange(i))}),u()(),d(3,"td")(4,"input",8),ne("ngModelChange",function(i){let o=S(e).$implicit;return re(o.url,i)||(o.url=i),D(i)}),C("ngModelChange",function(){let i=S(e).$implicit,o=b();return D(o.onFieldChange(i))}),u()(),d(5,"td")(6,"input",8),ne("ngModelChange",function(i){let o=S(e).$implicit;return re(o.category,i)||(o.category=i),D(i)}),C("ngModelChange",function(){let i=S(e).$implicit,o=b();return D(o.onFieldChange(i))}),u()(),d(7,"td")(8,"textarea",8),ne("ngModelChange",function(i){let o=S(e).$implicit;return re(o.description,i)||(o.description=i),D(i)}),C("ngModelChange",function(){let i=S(e).$implicit,o=b();return D(o.onFieldChange(i))}),u()(),d(9,"td")(10,"input",9),ne("ngModelChange",function(i){let o=S(e).$implicit;return re(o.isactive,i)||(o.isactive=i),D(i)}),C("change",function(){let i=S(e).$implicit,o=b();return D(o.onFieldChange(i))}),u()(),d(11,"td"),h(12),ht(13,"date"),u()()}if(n&2){let e=t.$implicit;m(2),te("ngModel",e.title),m(2),te("ngModel",e.url),m(2),te("ngModel",e.category),m(2),te("ngModel",e.description),m(2),te("ngModel",e.isactive),m(2),O(pt(13,6,e.updated_time,"short"))}}var Vd=class n{constructor(t,e){this.cdr=t;this.supabaseMeditationTableService=e}videos=[];message="";messageType="success";async ngOnInit(){let t=await this.supabaseMeditationTableService.adminLoadMeditationVideos();this.videos=t.map(e=>B(k({},e),{isModified:!1})),this.cdr.markForCheck()}onFieldChange(t){t.isModified=!0}addVideo(){this.videos.push({title:"",url:"",category:"",description:"",isactive:!0,isModified:!0}),this.cdr.detectChanges()}async saveChanges(){let t=this.videos.filter(e=>e.isModified);for(let e of t){if(e.id){e.updated_time=new Date().toISOString();let{error:r}=await this.supabaseMeditationTableService.updateMeditationVideo(e);if(r)return this.showMessage("Error saving some videos","error")}else{let{error:r}=await this.supabaseMeditationTableService.addMeditationVideo(e);if(r)return this.showMessage("Error adding new video","error")}e.isModified=!1}this.showMessage("Videos saved successfully","success"),this.cdr.detectChanges()}hasChanges(){return this.videos.some(t=>t.isModified)}showMessage(t,e){this.message=t,this.messageType=e,this.cdr.markForCheck(),setTimeout(()=>{this.message="",this.cdr.markForCheck()},4e3)}static \u0275fac=function(e){return new(e||n)(x(Ae),x(Ld))};static \u0275cmp=K({type:n,selectors:[["app-admin-meditation-dashboard"]],decls:26,vars:3,consts:[[1,"container","mt-4","p-4"],["class","alert",3,"ngClass",4,"ngIf"],[1,"table","mt-4"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mt-3"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-success",3,"click","disabled"],[1,"alert",3,"ngClass"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel"]],template:function(e,r){e&1&&(d(0,"div",0),A(1,tL,2,5,"div",1),d(2,"h2"),h(3,"Meditation Video Admin Dashboard"),u(),d(4,"table",2)(5,"thead")(6,"tr")(7,"th"),h(8,"Title"),u(),d(9,"th"),h(10,"URL"),u(),d(11,"th"),h(12,"Category"),u(),d(13,"th"),h(14,"Description"),u(),d(15,"th"),h(16,"Active"),u(),d(17,"th"),h(18,"Last Updated"),u()()(),d(19,"tbody"),A(20,nL,14,9,"tr",3),u()(),d(21,"div",4)(22,"button",5),C("click",function(){return r.addVideo()}),h(23,"Add Video"),u(),d(24,"button",6),C("click",function(){return r.saveChanges()}),h(25,"Save Changes"),u()()()),e&2&&(m(),_("ngIf",r.message),m(19),_("ngForOf",r.videos),m(4),_("disabled",!r.hasChanges()))},dependencies:[ie,Hn,nt,_e,$o,gt,Se,Xi,Me,st],encapsulation:2})};var vs=class n{supabaseFunctionClient;constructor(){this.supabaseFunctionClient=new Zi(us.FUNC_URL,us.anon_key,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})}async callEdgeFunction(t,e){let{data:r,error:i}=await this.supabaseFunctionClient.functions.invoke(t,{body:e});return{data:r,error:i}}static \u0275fac=function(e){return new(e||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var iL=["conversationContainer"],oL=(n,t)=>({"bot-message":n,"user-message":t});function sL(n,t){if(n&1){let e=J();d(0,"div",14),C("click",function(){let i=S(e).$implicit,o=b();return D(o.selectDate(i.date))}),d(1,"div",15),h(2),u(),d(3,"div",16),h(4),u()()}if(n&2){let e=t.$implicit,r=b();Y("active",r.isDateSelected(e.date))("today",r.isToday(e.date)),m(2),O(e.dayName),m(2),O(e.dayNumber)}}function aL(n,t){n&1&&(d(0,"div",17)(1,"div",18)(2,"span",19),h(3,"Loading..."),u()()())}function lL(n,t){if(n&1&&(d(0,"div",29),h(1),u()),n&2){let e=t.$implicit;_("ngClass",Cn(2,oL,e.sender==="bot",e.sender==="user")),m(),ee(" ",e.text," ")}}function cL(n,t){n&1&&(d(0,"span"),h(1,"Continue"),u())}function uL(n,t){n&1&&R(0,"span",30)}function dL(n,t){if(n&1){let e=J();d(0,"div")(1,"div",20),R(2,"div",21),u(),d(3,"div",22,0),A(5,lL,2,5,"div",23),u(),d(6,"div",24)(7,"input",25),ne("ngModelChange",function(i){S(e);let o=b();return re(o.currentInput,i)||(o.currentInput=i),D(i)}),C("keydown.enter",function(){S(e);let i=b();return D(i.submitAnswer())}),u(),d(8,"button",26),C("click",function(){S(e);let i=b();return D(i.submitAnswer())}),A(9,cL,2,0,"span",27)(10,uL,1,0,"span",28),u()()()}if(n&2){let e=b();m(2),jn("width",e.progressPercentage()),m(3),_("ngForOf",e.conversation()),m(2),te("ngModel",e.currentInput),_("disabled",e.isLoading()),m(),_("disabled",e.isLoading()||!e.currentInput),m(),_("ngIf",!e.isLoading()),m(),_("ngIf",e.isLoading())}}function fL(n,t){if(n&1&&(d(0,"div",45)(1,"div",46)(2,"mat-icon"),h(3,"fact_check"),u(),h(4," Emotional State "),u(),d(5,"div",47)(6,"div")(7,"div"),h(8,"Patience"),u(),d(9,"div",48),h(10),u()(),d(11,"div")(12,"div"),h(13,"Confidence"),u(),d(14,"div",48),h(15),u()(),d(16,"div")(17,"div"),h(18,"Doubt"),u(),d(19,"div",48),h(20),u()()()()),n&2){let e=b().ngIf;m(10),O(e.emotionalState.Patience),m(5),O(e.emotionalState.Confidence),m(5),O(e.emotionalState.Doubt)}}function hL(n,t){if(n&1&&(d(0,"div")(1,"p"),h(2),u()()),n&2){let e=t.$implicit;m(2),O(e.category)}}function pL(n,t){if(n&1&&(d(0,"div",45)(1,"div",46)(2,"mat-icon"),h(3,"tips_and_updates"),u(),h(4," Behavior Patterns "),u(),A(5,hL,3,1,"div",49),u()),n&2){let e=b().ngIf;m(5),_("ngForOf",e.behaviorPattern)}}function mL(n,t){if(n&1&&(d(0,"div",50)(1,"div",46)(2,"mat-icon"),h(3,"warning_amber"),u(),h(4," Immediate Action "),u(),d(5,"p"),h(6),u()()),n&2){let e=b().ngIf;m(6),O(e.actionableitem)}}function gL(n,t){if(n&1&&(d(0,"div",53)(1,"div",54),h(2),u(),d(3,"div",55),R(4,"div",56),u(),d(5,"div",57),h(6),u()()),n&2){let e=t.$implicit;m(2),O(e.emotion),m(2),jn("width",e.percentage)("background-color",e.color||"#748ffc"),m(2),O(e.percentage)}}function vL(n,t){if(n&1&&(d(0,"div",51)(1,"div",46)(2,"mat-icon"),h(3,"bar_chart"),u(),h(4," Emotional State Summary "),u(),A(5,gL,7,6,"div",52),u()),n&2){let e=b().ngIf;m(5),_("ngForOf",e.emotion)}}function _L(n,t){if(n&1&&(d(0,"li"),h(1),u()),n&2){let e=t.$implicit;m(),O(e)}}function yL(n,t){if(n&1&&(d(0,"div",45)(1,"div",46)(2,"mat-icon"),h(3,"psychology"),u(),h(4," AI Recommendations "),u(),d(5,"ul",58),A(6,_L,2,1,"li",49),u()()),n&2){let e=b().ngIf;m(6),_("ngForOf",e.recommendation)}}function bL(n,t){if(n&1){let e=J();Un(0),d(1,"div",33)(2,"div",34)(3,"mat-icon"),h(4,"task_alt"),u()(),d(5,"h2"),h(6,"Thank you for sharing!"),u(),d(7,"p",5),h(8,"Here are your personalized insights based on our conversation"),u()(),d(9,"div",35)(10,"div",36)(11,"div",37)(12,"mat-icon"),h(13,"track_changes"),u(),h(14," Trading Readiness "),u(),d(15,"div",38),h(16),u()(),A(17,fL,21,3,"div",39)(18,pL,6,1,"div",39)(19,mL,7,1,"div",40)(20,vL,6,1,"div",41)(21,yL,7,1,"div",39),u(),d(22,"div",42)(23,"button",43),h(24,"View Analytics"),u(),d(25,"button",44),C("click",function(){S(e);let i=b(2);return D(i.startNewCheckIn())}),h(26,"New Check-In"),u()(),Bn()}if(n&2){let e=t.ngIf;m(16),O(e.readiness),m(),_("ngIf",e.emotionalState),m(),_("ngIf",e.behaviorPattern==null?null:e.behaviorPattern.length),m(),_("ngIf",e.actionableitem),m(),_("ngIf",e.emotion==null?null:e.emotion.length),m(),_("ngIf",e.recommendation==null?null:e.recommendation.length)}}function wL(n,t){n&1&&(d(0,"div",59)(1,"h3"),h(2,"No Check-in Data"),u(),d(3,"p"),h(4,"There is no analysis available for the selected date."),u()())}function CL(n,t){if(n&1&&(d(0,"div",31),A(1,bL,27,6,"ng-container",32)(2,wL,5,0,"ng-template",null,1,Qr),u()),n&2){let e=$n(3),r=b();m(),_("ngIf",r.analysisResult())("ngIfElse",e)}}function EL(n,t){if(n&1&&(d(0,"div",59)(1,"h3"),h(2,"Check-in Not Available Yet"),u(),d(3,"p"),h(4),u()()),n&2){let e=b();m(4),ee("Please come back on this date to complete your check-in. ",e.futureMessage(),"")}}var jd=class n{constructor(t,e,r){this.supabaseEmotionService=t;this.supabaseFunctionService=e;this.supabaseService=r}conversationContainer;viewMode=U("loading");weekDates=U([]);selectedDate=U(new Date);futureMessage=U("");isLoading=U(!1);questions=U([]);currentQuestionIndex=U(0);conversation=U([]);userAnswers=[];currentInput="";analysisResult=U(null);progressPercentage=et(()=>{let t=this.questions().length;return t===0?"0%":`${this.currentQuestionIndex()/t*100}%`});ngOnInit(){this.generateWeekDays(),this.selectDate(new Date)}scrollToBottom(){setTimeout(()=>{try{this.conversationContainer?.nativeElement&&(this.conversationContainer.nativeElement.scrollTop=this.conversationContainer.nativeElement.scrollHeight)}catch(t){console.error("Could not scroll to bottom:",t)}},0)}generateWeekDays(){let t=new Date,e=new Date(t.setDate(t.getDate()-t.getDay())),r=[];for(let i=0;i<7;i++){let o=new Date(e);o.setDate(o.getDate()+i),r.push({date:o,dayName:o.toLocaleDateString("en-US",{weekday:"short"}),dayNumber:o.getDate().toString()})}this.weekDates.set(r)}async selectDate(t){this.selectedDate.set(t),this.viewMode.set("loading"),this.analysisResult.set(null);let e=new Date;e.setHours(0,0,0,0);let r=new Date(t);r.setHours(0,0,0,0),r>e?this.handleFutureDate(r):r.getTime()===e.getTime()?await this.handleToday():await this.handlePastDate(r)}isToday(t){return new Date(t).toDateString()===new Date().toDateString()}isDateSelected(t){return new Date(t).toDateString()===new Date(this.selectedDate()).toDateString()}handleFutureDate(t){let e=new Date,r=t.getTime()-e.getTime(),i=Math.floor(r/(1e3*60*60*24)),o=Math.floor(r%(1e3*60*60*24)/(1e3*60*60));this.futureMessage.set(`Check-in will open in ${i} days and ${o} hours.`),this.viewMode.set("future")}async handleToday(){try{if(this.isLoading.set(!0),await this.supabaseEmotionService.canLoadCheckInQuestions())await this.startCheckIn();else{let e=await this.supabaseEmotionService.getEmotionCheckInResultForDate(new Date);this.analysisResult.set(e),this.viewMode.set("analysis")}}catch(t){console.error("Error handling today's check-in:",t),this.viewMode.set("analysis")}finally{this.isLoading.set(!1)}}async handlePastDate(t){this.isLoading.set(!0);let e=await this.supabaseEmotionService.getEmotionCheckInResultForDate(t);this.analysisResult.set(e),this.viewMode.set("analysis"),this.isLoading.set(!1)}async startCheckIn(){this.isLoading.set(!0),this.conversation.set([]),this.userAnswers=[],this.currentQuestionIndex.set(0);let t=await this.supabaseEmotionService.loadQuestions();this.questions.set(t),t.length>0?(this.conversation.update(e=>[...e,{sender:"bot",text:t[0].question_data.question}]),this.viewMode.set("checkin"),this.scrollToBottom()):this.viewMode.set("analysis"),this.isLoading.set(!1)}async submitAnswer(){if(!this.currentInput.trim()||this.isLoading())return;this.isLoading.set(!0);let t=this.questions()[this.currentQuestionIndex()],e=this.currentInput;this.conversation.update(r=>[...r,{sender:"user",text:e}]),this.scrollToBottom(),this.userAnswers.push({question_id:t.question_id,answer:e}),this.currentInput="",setTimeout(async()=>{let r=this.currentQuestionIndex()+1;if(r<this.questions().length){this.currentQuestionIndex.set(r);let i=this.questions()[r];this.conversation.update(o=>[...o,{sender:"bot",text:i.question_data.question}]),this.scrollToBottom(),this.isLoading.set(!1)}else await this.finalizeCheckIn()},300)}processAnalysisResponse(t){let e={};for(let r of t){let i=Object.keys(r)[0];if(!i)continue;let o=r[i];switch(i){case"emotion":e.emotion=o;break;case"behaviorPattern":e.behaviorPattern=o.map(s=>({category:s.category,icon:s.icon,color:s.Color||s.color}));break;case"recommendation":e.recommendation=o;break;case"readiness":e.readiness=o;break;case"actionableitem":e.actionableitem=o;break;case"emotionalState":e.emotionalState=o;break}}return{emotion:e.emotion||[],behaviorPattern:e.behaviorPattern||[],recommendation:e.recommendation||[],readiness:e.readiness||"N/A",actionableitem:e.actionableitem||"No specific action item.",emotionalState:e.emotionalState}}async finalizeCheckIn(){this.viewMode.set("loading");try{let t=this.userAnswers.map(a=>`Q: ${this.questions().find(c=>c.question_id===a.question_id)?.question_data.question} A:${a.answer}`).join(" "),{data:e,error:r}=await this.supabaseFunctionService.callEdgeFunction("emotion-analyst-gemini",{prompt:t});if(r)throw r;if(!e||!Array.isArray(e))throw new Error("Invalid analysis data format received from function.");let i=this.processAnalysisResponse(e),o={user_id:this.supabaseService.user()?.id,answers:this.userAnswers,analysis:i},{error:s}=await this.supabaseEmotionService.submitUserCheckIn(o);if(s)throw s;this.analysisResult.set(i),this.viewMode.set("analysis")}catch(t){console.error("Error finalizing check-in:",t),this.viewMode.set("analysis")}finally{this.isLoading.set(!1)}}startNewCheckIn(){this.selectDate(new Date)}static \u0275fac=function(e){return new(e||n)(x(gs),x(vs),x(Ce))};static \u0275cmp=K({type:n,selectors:[["app-user-emotion-analysis"]],viewQuery:function(e,r){if(e&1&&Xp(iL,5),e&2){let i;Kc(i=Zc())&&(r.conversationContainer=i.first)}},decls:14,vars:6,consts:[["conversationContainer",""],["noAnalysis",""],[1,"container-fluid"],[1,"mb-4"],[1,"h4","fw-bold"],[1,"text-muted"],[1,"date-bar"],["class","date-item",3,"active","today","click",4,"ngFor","ngForOf"],[1,"main-card"],[3,"ngSwitch"],["class","text-center p-5",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","analysis-view",4,"ngSwitchCase"],["class","message-view",4,"ngSwitchCase"],[1,"date-item",3,"click"],[1,"day-name"],[1,"day-number"],[1,"text-center","p-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"progress-bar-container"],[1,"progress-bar"],[1,"conversation-container"],["class","message",3,"ngClass",4,"ngFor","ngForOf"],[1,"input-area"],["type","text","placeholder","Type your response here...",1,"form-control",3,"ngModelChange","keydown.enter","ngModel","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"message",3,"ngClass"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"analysis-view"],[4,"ngIf","ngIfElse"],[1,"analysis-header"],[1,"icon-wrapper"],[1,"analysis-grid"],[1,"analysis-card","readiness"],[1,"card-title","mb-0"],[1,"readiness-value"],["class","analysis-card",4,"ngIf"],["class","analysis-card bg-warning-subtle border-warning",4,"ngIf"],["class","analysis-card emotion-summary",4,"ngIf"],[1,"analysis-buttons"],[1,"btn","btn-outline-primary"],[1,"btn","btn-primary",3,"click"],[1,"analysis-card"],[1,"card-title"],[1,"emotion-state-items"],[1,"value"],[4,"ngFor","ngForOf"],[1,"analysis-card","bg-warning-subtle","border-warning"],[1,"analysis-card","emotion-summary"],["class","emotion-item",4,"ngFor","ngForOf"],[1,"emotion-item"],[1,"emotion-label"],[1,"emotion-bar-container"],[1,"emotion-bar"],[1,"emotion-percentage"],[1,"recommendation-list"],[1,"message-view"]],template:function(e,r){e&1&&(d(0,"div",2)(1,"div",3)(2,"h1",4),h(3,"Daily Emotional Check-in"),u(),d(4,"p",5),h(5,"Share how you\u2019re feeling today. This helps us provide personalized insights for your trading journey."),u()(),d(6,"div",6),A(7,sL,5,6,"div",7),u(),d(8,"div",8)(9,"div",9),A(10,aL,4,0,"div",10)(11,dL,11,8,"div",11)(12,CL,4,2,"div",12)(13,EL,5,1,"div",13),u()()()),e&2&&(m(7),_("ngForOf",r.weekDates()),m(2),_("ngSwitch",r.viewMode()),m(),_("ngSwitchCase","loading"),m(),_("ngSwitchCase","checkin"),m(),_("ngSwitchCase","analysis"),m(),_("ngSwitchCase","future"))},dependencies:[ie,Hn,nt,_e,pm,Tw,gt,Se,Me,st,an],styles:['[_nghost-%COMP%]{display:block;max-width:800px;margin:2rem auto;padding:0 1rem;font-family:Inter,sans-serif}.date-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;background-color:#f8f9fa;border-radius:12px;padding:8px;margin-bottom:2rem}.date-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:.5rem;border-radius:8px;cursor:pointer;width:calc(100% / 7);transition:background-color .3s ease;border:2px solid transparent}.date-item[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.date-item.active[_ngcontent-%COMP%]{background-color:#0d6efd;color:#fff;font-weight:700}.date-item.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{position:relative}.date-item.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-4px;left:50%;transform:translate(-50%);width:5px;height:5px;border-radius:50%;background-color:#0d6efd}.date-item.active.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]:after{background-color:#fff}.day-name[_ngcontent-%COMP%]{font-size:.8rem;font-weight:500}.day-number[_ngcontent-%COMP%]{font-size:1.25rem}.main-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 8px 32px #00000014}.conversation-container[_ngcontent-%COMP%]{height:400px;overflow-y:auto;padding:1rem;margin-bottom:1rem;display:flex;flex-direction:column;gap:1rem;scroll-behavior:smooth}.message[_ngcontent-%COMP%]{padding:.75rem 1.25rem;border-radius:1.25rem;max-width:75%;line-height:1.5}.bot-message[_ngcontent-%COMP%]{background-color:#f1f3f5;color:#343a40;border-bottom-left-radius:.25rem;align-self:flex-start}.user-message[_ngcontent-%COMP%]{background-color:#e7f5ff;color:#1971c2;border-bottom-right-radius:.25rem;align-self:flex-end}.input-area[_ngcontent-%COMP%]{display:flex;gap:.5rem;border-top:1px solid #e9ecef;padding-top:1rem}.input-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;border-radius:20px;border:1px solid #ced4da;padding:.5rem 1rem}.input-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0d6efd;box-shadow:0 0 0 2px #0d6efd40}.progress-bar-container[_ngcontent-%COMP%]{height:8px;background-color:#e9ecef;border-radius:4px;margin-bottom:1rem}.progress-bar[_ngcontent-%COMP%]{height:100%;background-color:#0d6efd;border-radius:4px;transition:width .4s ease}.analysis-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.analysis-header[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background-color:#e6f7ff;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem;color:#1890ff}.analysis-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:auto;height:auto}.analysis-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;color:#343a40}.analysis-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.analysis-card[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #e9ecef;padding:1.5rem;border-radius:12px}.analysis-card.readiness[_ngcontent-%COMP%]{background-color:#e7f5ff;border-color:#a5d8ff;display:flex;justify-content:space-between;align-items:center}.readiness[_ngcontent-%COMP%]   .readiness-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#1971c2}.card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem;font-weight:600;color:#495057}.emotion-state-items[_ngcontent-%COMP%]{display:flex;justify-content:space-around;text-align:center}.emotion-state-items[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;font-size:1.2rem}.emotion-summary[_ngcontent-%COMP%]   .emotion-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:.75rem}.emotion-summary[_ngcontent-%COMP%]   .emotion-label[_ngcontent-%COMP%]{width:100px}.emotion-summary[_ngcontent-%COMP%]   .emotion-bar-container[_ngcontent-%COMP%]{flex-grow:1;height:10px;background-color:#e9ecef;border-radius:5px}.emotion-summary[_ngcontent-%COMP%]   .emotion-bar[_ngcontent-%COMP%]{height:100%;background-color:#748ffc;border-radius:5px}.recommendation-list[_ngcontent-%COMP%]{list-style-type:none;padding-left:0}.recommendation-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0;border-bottom:1px solid #e9ecef}.recommendation-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.analysis-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:2rem}.message-view[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem}.message-view[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057}.message-view[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d}'],changeDetection:0})};function SL(n,t){if(n&1&&(d(0,"div",19),h(1),u()),n&2){let e=b();m(),ee(" ",e.message," ")}}function DL(n,t){if(n&1&&(d(0,"div",20),h(1),u()),n&2){let e=b();m(),ee(" ",e.errorMessage," ")}}function IL(n,t){n&1&&(d(0,"div",21),h(1," A valid email is required. "),u())}var Ud=class n{constructor(t,e,r,i){this.fb=t;this.router=e;this.cdr=r;this.supabaseAuthService=i;this.forgotPasswordForm=this.fb.group({email:["",[Ee.required,Ee.email]]})}forgotPasswordForm;message=null;errorMessage=null;async onSubmit(){if(this.forgotPasswordForm.invalid){this.forgotPasswordForm.markAllAsTouched();return}let{email:t}=this.forgotPasswordForm.getRawValue();this.errorMessage=null,this.message=null;try{let{success:e,error:r}=await this.supabaseAuthService.requestPasswordReset(t);e?this.message="If an account with that email exists, you will receive a password reset link!":this.errorMessage=r?.message||"Failed to send reset link. Please try again.",this.cdr.markForCheck()}catch(e){this.errorMessage=e.message||"An unexpected error occurred.",this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(x(Kn),x($e),x(Ae),x(Zn))};static \u0275cmp=K({type:n,selectors:[["app-forgot-password"]],decls:26,vars:5,consts:[[1,"auth-container"],[1,"auth-card"],[1,"text-center","mb-4"],[1,"logo-circle","mx-auto"],["src","/tr_logo.png","alt","Logo",1,"img-fluid"],[1,"brand-name","mt-3"],[1,"brand-tagline"],["class","alert alert-info mb-3",4,"ngIf"],["class","alert alert-danger mb-3",4,"ngIf"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-tr","btn-primary","btn-md",3,"disabled"],[1,"text-center","mt-4"],[1,"mb-0"],["routerLink","",1,"login-link"],[1,"alert","alert-info","mb-3"],[1,"alert","alert-danger","mb-3"],[1,"text-danger","small","mt-1"]],template:function(e,r){if(e&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),R(4,"img",4),u()(),d(5,"div",2)(6,"h2",5),h(7,"Forgot Password"),u(),d(8,"p",6),h(9,"Enter your email to receive a password reset link."),u()(),A(10,SL,2,1,"div",7)(11,DL,2,1,"div",8),d(12,"form",9),C("ngSubmit",function(){return r.onSubmit()}),d(13,"div",10)(14,"label",11),h(15,"Email"),u(),R(16,"input",12),A(17,IL,2,0,"div",13),u(),d(18,"div",14)(19,"button",15),h(20,"Send Reset Link"),u()(),d(21,"div",16)(22,"p",17),h(23,"Remember your password? "),d(24,"a",18),h(25,"Login"),u()()()()()()),e&2){let i;m(10),_("ngIf",r.message),m(),_("ngIf",r.errorMessage),m(),_("formGroup",r.forgotPasswordForm),m(5),_("ngIf",((i=r.forgotPasswordForm.get("email"))==null?null:i.invalid)&&((i=r.forgotPasswordForm.get("email"))==null?null:i.touched)),m(2),_("disabled",r.forgotPasswordForm.invalid)}},dependencies:[ie,_e,un,Qn,Se,Me,Gn,xn,Tn,mt],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100dvh;display:flex;align-items:center;justify-content:center}.auth-card[_ngcontent-%COMP%]{background-color:transparent;border-radius:12px;width:100%;max-width:450px;padding:30px}.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:transparent;position:relative;display:flex;align-items:center;justify-content:center;margin:0 auto}.dots-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;position:relative;background-image:radial-gradient(circle,#5046e5 3px,transparent 3px);background-size:15px 15px;transform:rotate(45deg)}.brand-name[_ngcontent-%COMP%]{font-weight:700;font-size:24px;margin-bottom:5px;letter-spacing:.5px}.brand-tagline[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.tabs-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-bottom:1px solid #eee;padding-bottom:5px}.tab[_ngcontent-%COMP%]{padding:8px 15px;cursor:pointer;color:#888;font-weight:500;font-size:16px;transition:color .2s}.tab.active[_ngcontent-%COMP%]{color:#5046e5;border-bottom:2px solid #5046e5}.tab-separator[_ngcontent-%COMP%]{color:#ccc}.auth-form[_ngcontent-%COMP%]{margin-top:10px}.form-control[_ngcontent-%COMP%]{height:auto;padding:12px 15px;border-radius:8px;border:1px solid #ddd;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{border-color:#5046e5;box-shadow:0 0 0 .2rem #5046e526}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555;margin-bottom:8px}.forgot-link[_ngcontent-%COMP%]{font-size:14px;color:#5046e5;text-decoration:none}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{color:#5046e5;font-weight:500;text-decoration:none}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-primary[_ngcontent-%COMP%]{background-color:#5046e5;border-color:#5046e5;padding:12px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus{background-color:#4238d0;border-color:#4238d0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#a8a4e0;border-color:#a8a4e0}.separator[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;color:#888;font-size:14px}.separator[_ngcontent-%COMP%]:before, .separator[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #ddd}.separator[_ngcontent-%COMP%]:before{margin-right:1em}.separator[_ngcontent-%COMP%]:after{margin-left:1em}.google-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;border:1px solid #ddd;color:#333;padding:12px;font-weight:500}.google-btn[_ngcontent-%COMP%]:hover{background-color:#f8f8f8;color:#333}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{padding:20px 15px}.brand-name[_ngcontent-%COMP%]{font-size:20px}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{padding:10px}}']})};function xL(n,t){if(n&1&&(d(0,"div",22),h(1),u()),n&2){let e=b();m(),ee(" ",e.errorMessage," ")}}function TL(n,t){if(n&1&&(d(0,"div",23),h(1),u()),n&2){let e=b();m(),ee(" ",e.successMessage," ")}}function ML(n,t){n&1&&(d(0,"div",24),h(1," Password must be at least 6 characters. "),u())}function AL(n,t){n&1&&(d(0,"small",25),h(1," Passwords do not match "),u())}var Bd=class n{constructor(t,e,r,i,o){this.fb=t;this.router=e;this.route=r;this.cdr=i;this.supabaseAuthService=o;this.updatePasswordForm=this.fb.group({newPassword:["",[Ee.required,Ee.minLength(6)]],confirmNewPassword:["",Ee.required]},{validators:this.passwordMatchValidator})}updatePasswordForm;errorMessage=null;successMessage=null;ngOnInit(){}passwordMatchValidator(t){let e=t.get("newPassword")?.value,r=t.get("confirmNewPassword")?.value;return e===r?null:{mismatch:!0}}async onSubmit(){if(this.updatePasswordForm.invalid){this.updatePasswordForm.markAllAsTouched();return}let{newPassword:t}=this.updatePasswordForm.getRawValue();this.errorMessage=null,this.successMessage=null;try{let{success:e,error:r}=await this.supabaseAuthService.updatePassword(t);e?(this.successMessage="Your password has been updated successfully! Redirecting to login...",this.updatePasswordForm.reset(),setTimeout(()=>{this.router.navigate(["/auth"])},3e3)):this.errorMessage=r?.message||"Failed to update password. Please try again.",this.cdr.markForCheck()}catch(e){this.errorMessage=e.message||"An unexpected error occurred.",this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(x(Kn),x($e),x(Et),x(Ae),x(Zn))};static \u0275cmp=K({type:n,selectors:[["app-update-password"]],decls:31,vars:6,consts:[[1,"auth-container"],[1,"auth-card"],[1,"text-center","mb-4"],[1,"logo-circle","mx-auto"],["src","/tr_logo.png","alt","Logo",1,"img-fluid"],[1,"brand-name","mt-3"],[1,"brand-tagline"],["class","alert alert-danger mb-3",4,"ngIf"],["class","alert alert-success mb-3",4,"ngIf"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","newPassword",1,"form-label"],["type","password","id","newPassword","formControlName","newPassword","placeholder","Enter new password",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","confirmNewPassword",1,"form-label"],["type","password","id","confirmNewPassword","formControlName","confirmNewPassword","placeholder","Confirm new password",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-tr","btn-primary","btn-md",3,"disabled"],[1,"text-center","mt-4"],[1,"mb-0"],["routerLink","/auth",1,"login-link"],[1,"alert","alert-danger","mb-3"],[1,"alert","alert-success","mb-3"],[1,"text-danger","small","mt-1"],[1,"text-danger"]],template:function(e,r){if(e&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),R(4,"img",4),u()(),d(5,"div",2)(6,"h2",5),h(7,"Set New Password"),u(),d(8,"p",6),h(9,"Please enter your new password."),u()(),A(10,xL,2,1,"div",7)(11,TL,2,1,"div",8),d(12,"form",9),C("ngSubmit",function(){return r.onSubmit()}),d(13,"div",10)(14,"label",11),h(15,"New Password"),u(),R(16,"input",12),A(17,ML,2,0,"div",13),u(),d(18,"div",10)(19,"label",14),h(20,"Confirm New Password"),u(),R(21,"input",15),A(22,AL,2,0,"small",16),u(),d(23,"div",17)(24,"button",18),h(25,"Update Password"),u()(),d(26,"div",19)(27,"p",20),h(28,"Go back to "),d(29,"a",21),h(30,"Login"),u()()()()()()),e&2){let i,o;m(10),_("ngIf",r.errorMessage),m(),_("ngIf",r.successMessage),m(),_("formGroup",r.updatePasswordForm),m(5),_("ngIf",((i=r.updatePasswordForm.get("newPassword"))==null?null:i.invalid)&&((i=r.updatePasswordForm.get("newPassword"))==null?null:i.touched)),m(5),_("ngIf",r.updatePasswordForm.hasError("mismatch")&&((o=r.updatePasswordForm.get("confirmNewPassword"))==null?null:o.touched)),m(2),_("disabled",r.updatePasswordForm.invalid)}},dependencies:[ie,_e,un,Qn,Se,Me,Gn,xn,Tn],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100dvh;display:flex;align-items:center;justify-content:center}.auth-card[_ngcontent-%COMP%]{background-color:transparent;border-radius:12px;width:100%;max-width:450px;padding:30px}.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:transparent;position:relative;display:flex;align-items:center;justify-content:center;margin:0 auto}.dots-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;position:relative;background-image:radial-gradient(circle,#5046e5 3px,transparent 3px);background-size:15px 15px;transform:rotate(45deg)}.brand-name[_ngcontent-%COMP%]{font-weight:700;font-size:24px;margin-bottom:5px;letter-spacing:.5px}.brand-tagline[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.tabs-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-bottom:1px solid #eee;padding-bottom:5px}.tab[_ngcontent-%COMP%]{padding:8px 15px;cursor:pointer;color:#888;font-weight:500;font-size:16px;transition:color .2s}.tab.active[_ngcontent-%COMP%]{color:#5046e5;border-bottom:2px solid #5046e5}.tab-separator[_ngcontent-%COMP%]{color:#ccc}.auth-form[_ngcontent-%COMP%]{margin-top:10px}.form-control[_ngcontent-%COMP%]{height:auto;padding:12px 15px;border-radius:8px;border:1px solid #ddd;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{border-color:#5046e5;box-shadow:0 0 0 .2rem #5046e526}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555;margin-bottom:8px}.forgot-link[_ngcontent-%COMP%]{font-size:14px;color:#5046e5;text-decoration:none}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{color:#5046e5;font-weight:500;text-decoration:none}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-primary[_ngcontent-%COMP%]{background-color:#5046e5;border-color:#5046e5;padding:12px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus{background-color:#4238d0;border-color:#4238d0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#a8a4e0;border-color:#a8a4e0}.separator[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;color:#888;font-size:14px}.separator[_ngcontent-%COMP%]:before, .separator[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #ddd}.separator[_ngcontent-%COMP%]:before{margin-right:1em}.separator[_ngcontent-%COMP%]:after{margin-left:1em}.google-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;border:1px solid #ddd;color:#333;padding:12px;font-weight:500}.google-btn[_ngcontent-%COMP%]:hover{background-color:#f8f8f8;color:#333}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{padding:20px 15px}.brand-name[_ngcontent-%COMP%]{font-size:20px}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{padding:10px}}']})};var $d=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;async getTradeAnalytics(){let t=this.supabaseService.user();if(!t)throw new Error("User not authenticated");let{data:e,error:r}=await this.supabase.rpc("get_user_trade_analytics",{user_id:t.id});if(r)throw console.error("Error fetching trade analytics:",r),r;return e}static \u0275fac=function(e){return new(e||n)(P(Ce))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};function NL(n,t){if(n&1&&(d(0,"div",18)(1,"div",19)(2,"div",7)(3,"div",20),h(4),u(),d(5,"h6",16),h(6),u(),d(7,"p",21),h(8),ht(9,"number"),u()()()()),n&2){let e=t.$implicit;m(4),O(e.icon),m(2),O(e.label),m(2),O(e.format?pt(9,3,e.value,e.format):e.value)}}function PL(n,t){if(n&1&&(d(0,"div",22)(1,"div",19)(2,"div",7)(3,"div",23),h(4),u(),d(5,"h6",16),h(6),u(),d(7,"p",24),h(8),ht(9,"number"),u()()()()),n&2){let e=t.$implicit;m(4),O(e.icon),m(2),O(e.label),m(2),O(pt(9,3,e.value,e.format))}}function OL(n,t){if(n&1&&(d(0,"div",1)(1,"h3",2),h(2,"\u{1F4CA} Trade Analytics Overview"),u(),d(3,"div",3),A(4,NL,10,6,"div",4),u(),d(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h6",8),h(10,"\u{1F3C6} Win Rate"),u(),d(11,"div",9)(12,"div",10),h(13),ht(14,"number"),u()()()()(),d(15,"div",5)(16,"div",6)(17,"div",7)(18,"h6",8),h(19,"\u{1F4C9} Loss Rate"),u(),d(20,"div",9)(21,"div",11),h(22),ht(23,"number"),u()()()()()(),d(24,"div",12),A(25,PL,10,6,"div",13),u(),d(26,"div",14)(27,"div",5)(28,"div",15)(29,"div",7)(30,"h6",16),h(31,"\u23F1\uFE0F Avg Trade Duration (Seconds)"),u(),d(32,"p",17),h(33),ht(34,"number"),u()()()(),d(35,"div",5)(36,"div",15)(37,"div",7)(38,"h6",16),h(39,"\u{1F3AF} Avg Entry Slippage"),u(),d(40,"p",17),h(41),ht(42,"number"),u()()()()()()),n&2){let e=b();m(4),_("ngForOf",e.kpiList),m(8),jn("width",e.analytics.win_rate*100,"%"),m(),ee(" ",pt(14,10,e.analytics.win_rate*100,"1.0-0"),"% "),m(8),jn("width",e.analytics.loss_rate*100,"%"),m(),ee(" ",pt(23,13,e.analytics.loss_rate*100,"1.0-0"),"% "),m(3),_("ngForOf",e.extraStats),m(8),O(pt(34,16,e.analytics.average_trade_duration_seconds,"1.0-0")),m(8),O(pt(42,19,e.analytics.average_entry_slippage,"1.2-2"))}}var Hd=class n{constructor(t){this.supabaseAnalytic=t}analytics=null;kpiList=[];extraStats=[];async ngOnInit(){this.analytics=await this.supabaseAnalytic.getTradeAnalytics(),this.analytics&&this.initializeCards(),console.log(this.analytics)}initializeCards(){this.kpiList=[{label:"Discipline Score",value:this.analytics.discipline_score,icon:"\u{1F3AF}",format:"1.1-1"},{label:"Profit Factor",value:this.analytics.profit_factor,icon:"\u{1F4B0}",format:"1.2-2"},{label:"Total P/L ($)",value:this.analytics.total_realized_profit,icon:"\u{1F4B5}",format:"1.2-2"},{label:"Avg P/L ($)",value:this.analytics.average_profit_per_trade,icon:"\u2696\uFE0F",format:"1.2-2"}],this.extraStats=[{label:"Avg. Confidence Drift (During)",value:this.analytics.avg_confidence_drift_before_during,icon:"\u{1F9E0}",format:"1.1-1"},{label:"Avg. Confidence Drift (After)",value:this.analytics.avg_confidence_drift_before_after,icon:"\u{1F9D8}",format:"1.1-1"},{label:"Avg. Risk/Reward Ratio",value:this.analytics.average_risk_reward_ratio,icon:"\u{1F3B2}",format:"1.2-2"}]}static \u0275fac=function(e){return new(e||n)(x($d))};static \u0275cmp=K({type:n,selectors:[["app-trade-analytic"]],decls:1,vars:1,consts:[["class","container mt-4",4,"ngIf"],[1,"container","mt-4"],[1,"text-center","mb-4","fw-bold"],[1,"row","g-3","mb-4"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"card","shadow","border-0"],[1,"card-body"],[1,"mb-2","fw-bold"],[1,"progress",2,"height","20px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-danger"],[1,"row","g-3"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"row","g-3","mt-4"],[1,"card","text-center","shadow","border-0"],[1,"text-muted"],[1,"h4","fw-bold","text-info","mt-2"],[1,"col-md-3"],[1,"card","text-center","shadow","border-0","h-100"],[1,"display-6","mb-2"],[1,"h5","fw-bold","mt-2","text-primary"],[1,"col-md-4"],[1,"mb-1"],[1,"h5","fw-bold","mt-2","text-dark"]],template:function(e,r){e&1&&A(0,OL,43,22,"div",0),e&2&&_("ngIf",r.analytics)},dependencies:[ie,nt,_e,uu],styles:[".card[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 4px 16px #00000026}.progress-bar[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600}"]})};var zd=class n{rows=U([]);setRows(t){this.rows.set(t)}upsert(t){let e=this.rows(),r=e.findIndex(i=>i.trade_id===t.trade_id);r>=0?e[r]=t:e.unshift(t),this.rows.set([...e])}remove(t){this.rows.set(this.rows().filter(e=>e.trade_id!==t))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var qd=class n{accounts=U([]);upsert(t){let e=this.accounts(),r=e.findIndex(i=>i.account_id===t.account_id);r>=0?e[r]=t:e.unshift(t),this.accounts.set([...e])}setAll(t){this.accounts.set(t)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wd=class n{table="tradesjournal";sb=I(Ce).GetClient();async listByState(t){let{data:e,error:r}=await this.sb.from(this.table).select("*").eq("trade_state",t).order("created_at",{ascending:!1}).order("trade_id",{ascending:!1}).limit(50);if(r)throw r;return e??[]}async insertPlanned(t){let{data:e,error:r}=await this.sb.from(this.table).insert(t).select("*").single();if(r)throw r;return e}async markExecuted(t,e){let r={actual_entry_price:e.actual_entry_price,actual_stop_loss:e.actual_stop_loss,actual_take_profit:e.actual_take_profit,actual_lot_size:e.actual_lot_size,actual_entry_date:new Date().toISOString(),trade_state:"EXECUTING",updated_at:new Date().toISOString()},{data:i,error:o}=await this.sb.from(this.table).update(r).eq("trade_id",t).select("*").single();if(o)throw o;return i}async completeAndApply(t,e){let r={exit_price:e.exit_price,broker_fees:e.broker_fees,trade_outcome:e.outcome,emotional_after_state:e.emotion_after,confidence_after_level:e.conf_after,trade_notes:e.notes??null,lesson_learned:e.lessons??null,points_to_improve:e.improve??null,exit_date:new Date().toISOString(),trade_state:"COMPLETED",updated_at:new Date().toISOString()},{data:i,error:o}=await this.sb.from(this.table).update(r).eq("trade_id",t).select("*").single();if(o)throw o;return{updated_trade:i}}async remove(t){let{error:e}=await this.sb.from(this.table).delete().eq("trade_id",t);if(e)throw e}async updatePlanned(t,e){let{data:r,error:i}=await this.sb.from(this.table).update(B(k({},e),{updated_at:new Date().toISOString()})).eq("trade_id",t).select("*").single();if(i)throw i;return r}async updateExecuting(t,e){let{data:r,error:i}=await this.sb.from(this.table).update(B(k({},e),{updated_at:new Date().toISOString()})).eq("trade_id",t).select("*").single();if(i)throw i;return r}async getById(t){let{data:e,error:r}=await this.sb.from(this.table).select("*").eq("trade_id",t).single();if(r)throw r;return e}async listByStatePaged(t,e,r){let i=this.sb.from(this.table).select("*").eq("trade_state",t).order("created_at",{ascending:!1}).order("trade_id",{ascending:!1}).limit(e);if(r){let a=encodeURIComponent(r.created_at),l=encodeURIComponent(r.trade_id);i=i.or(`and(created_at.lt.${a}),and(created_at.eq.${a},trade_id.lt.${l})`)}let{data:o,error:s}=await i;if(s)throw s;return o??[]}async listByDateRange(t,e,r){let i=t==="COMPLETED"?"exit_date":"created_at",o=new Date(r),s=new Date(o.getTime()+24*60*60*1e3-1).toISOString(),{data:a,error:l}=await this.sb.from(this.table).select("*").eq("trade_state",t).gte(i,new Date(e).toISOString()).lte(i,s).order(i,{ascending:!1}).order("trade_id",{ascending:!1});if(l)throw l;return a??[]}static \u0275fac=function(e){return new(e||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var Gd=class n{sb=I(Ce).GetClient();async listMine(){let{data:t,error:e}=await this.sb.from("tradeaccount").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}static \u0275fac=function(e){return new(e||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};var _s=class n{tradesStore=I(zd);accountsStore=I(qd);tradeApi=I(Wd);tradeAccountsApi=I(Gd);supabaseFunction=I(vs);loading=U(!1);error=U(null);get tradesSig(){return this.tradesStore.rows}get trades(){return this.tradesStore.rows()}get accounts(){return this.accountsStore.accounts}async wrap(t){this.loading.set(!0),this.error.set(null);try{return await t()}catch(e){let r=e?.message??JSON.stringify(e);console.error("[TradesFacade]",r,e),this.error.set(r);return}finally{this.loading.set(!1)}}async loadTab(t){await this.wrap(async()=>{let e=await this.tradeApi.listByState(t);this.tradesStore.setRows(e)})}async loadAccounts(){await this.wrap(async()=>{let t=await this.tradeAccountsApi.listMine();this.accountsStore.setAll(t)})}async createPlanned(t){await this.wrap(async()=>{let e=await this.tradeApi.insertPlanned(t);this.tradesStore.upsert(e)})}async markExecuted(t,e){await this.wrap(async()=>{let r=await this.tradeApi.markExecuted(t,e);this.tradesStore.upsert(r),this.resetCacheForState(r.trade_state)})}async completeAndApply(t,e){await this.wrap(async()=>{let r=await this.tradeApi.completeAndApply(t,e);this.tradesStore.upsert(r.updated_trade),r.updated_account&&this.accountsStore.upsert(r.updated_account),this.resetCacheForState("EXECUTING"),this.resetCacheForState("COMPLETED")})}async remove(t){await this.wrap(async()=>{await this.tradeApi.remove(t),this.tradesStore.remove(t),this.resetAllCaches()})}async updatePlanned(t,e){await this.wrap(async()=>{let r=await this.tradeApi.updatePlanned(t,e);this.tradesStore.upsert(r),this.resetCacheForState("PLANNED")})}async updateExecuting(t,e){await this.wrap(async()=>{let r=await this.tradeApi.updateExecuting(t,e);this.tradesStore.upsert(r),this.resetCacheForState("EXECUTING")})}async getTradeById(t){return await this.wrap(async()=>await this.tradeApi.getById(t))}async analyzeChart(t){return await this.wrap(async()=>{let r={image_base64:await this.fileToBase64(t),filename:t.name,mimetype:t.type,expected_schema:"pretrade.v1"},{data:i,error:o}=await this.supabaseFunction.callEdgeFunction("trade-chart-extraction-gemini",r);if(o)throw new Error(o?.message??"Edge function failed");let s=typeof i=="string"?JSON.parse(i):i;return this.normalizeAi(s)})??null}async fileToBase64(t){let e=await t.arrayBuffer(),r=new Uint8Array(e),i="";for(let o=0;o<r.length;o++)i+=String.fromCharCode(r[o]);return`data:${t.type};base64,${btoa(i)}`}normalizeAi(t){if(typeof t=="string")try{t=JSON.parse(t)}catch{t={}}let e=a=>a==null?null:Number.isFinite(Number(a))?Number(a):null,r=a=>a==null?null:String(a),i=a=>a==="LONG"||a==="SHORT"?a:null,o=Array.isArray(t?.tags)?t.tags.map(a=>String(a).toLowerCase().trim()).filter(Boolean).slice(0,8):[],s={is_relevant:!!t?.is_relevant,confidence:Math.max(0,Math.min(1,Number(t?.confidence??0))),symbol:r(t?.symbol),direction:i(t?.direction),planned_entry_price:e(t?.planned_entry_price),planned_stop_loss:e(t?.planned_stop_loss),planned_take_profit:e(t?.planned_take_profit),planned_lot_size:e(t?.planned_lot_size),planned_risk_percentage:e(t?.planned_risk_percentage),planned_risk_amount:e(t?.planned_risk_amount),strategy_name:r(t?.strategy_name),tags:o,entry_criteria:String(t?.entry_criteria??"")};return s.is_relevant?s:{is_relevant:!1,confidence:s.confidence??0,symbol:null,direction:null,planned_entry_price:null,planned_stop_loss:null,planned_take_profit:null,planned_lot_size:null,planned_risk_percentage:null,planned_risk_amount:null,strategy_name:null,tags:[],entry_criteria:""}}PAGE_SIZE=20;pageCache={PLANNED:[],EXECUTING:[],COMPLETED:[]};resetCacheForState(t){this.pageCache[t]=[]}resetAllCaches(){this.pageCache={PLANNED:[],EXECUTING:[],COMPLETED:[]}}async loadTabPage(t,e=!1){if(e&&this.resetCacheForState(t),this.pageCache[t][0]){this.tradesStore.setRows(this.pageCache[t][0].rows);return}await this.wrap(async()=>{let r=await this.tradeApi.listByStatePaged(t,this.PAGE_SIZE+1,null),{page:i,nextCursor:o}=this.splitToPage(r);this.pageCache[t][0]={rows:i,nextCursor:o},this.tradesStore.setRows(i)})}async ensurePageLoaded(t,e){if(this.pageCache[t][e])return!0;let r=this.pageCache[t][e-1];if(!r||!r.nextCursor)return!1;let i=await this.wrap(async()=>await this.tradeApi.listByStatePaged(t,this.PAGE_SIZE+1,r.nextCursor));if(!i)return!1;let{page:o,nextCursor:s}=this.splitToPage(i);return this.pageCache[t][e]={rows:o,nextCursor:s},!0}pagedRows(t,e){return this.pageCache[t][e]?.rows??[]}reflectPageToStore(t,e){let r=this.pageCache[t][e]?.rows??[];this.tradesStore.setRows(r)}hasNextPage(t,e){return!!this.pageCache[t][e]?.nextCursor}splitToPage(t){let e=t.length>this.PAGE_SIZE,r=t.slice(0,this.PAGE_SIZE),i=e?t[this.PAGE_SIZE-1]:t[t.length-1],o=e&&i?{created_at:String(i.created_at),trade_id:String(i.trade_id)}:null;return{page:r,nextCursor:o}}async fetchRangeForExport(t,e,r){return await this.wrap(async()=>await this.tradeApi.listByDateRange(t,e,r))??[]}static \u0275fac=function(e){return new(e||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})};function RL(n,t){if(n&1&&(d(0,"option",14),h(1),u()),n&2){let e=t.$implicit;_("ngValue",e.id),m(),O(e.name)}}function FL(n,t){if(n&1&&(d(0,"div",38)(1,"div",39),h(2),u(),d(3,"div",40),h(4),ht(5,"number"),u()()),n&2){let e=t.ngIf;m(2),O(e.name),m(2),ee("Balance \u2022 ",pt(5,2,e.balance,"1.0-2"),"")}}function LL(n,t){if(n&1){let e=J();d(0,"div",41)(1,"label",42),h(2,"Manual Balance (fallback)"),u(),d(3,"input",43),C("ngModelChange",function(i){S(e);let o=b();return o.manualBalance.set(i),D(o.resyncRiskFromPercentOrDollar())}),u(),d(4,"div",44),h(5,"Used only when selected account has no balance."),u()()}if(n&2){let e=b();m(3),_("ngModel",e.manualBalance())}}function VL(n,t){if(n&1&&(d(0,"div",45),h(1),u()),n&2){let e=b();m(),O(e.aiMessage())}}function jL(n,t){if(n&1&&(d(0,"div",46),h(1),u()),n&2){let e=b();m(),O(e.aiWarn())}}function UL(n,t){if(n&1&&(d(0,"div",47),h(1),u()),n&2){let e=b();m(),O(e.aiErr())}}function BL(n,t){n&1&&(d(0,"div",65),h(1,"Required for auto risk from SL."),u())}function $L(n,t){n&1&&(d(0,"div",44),h(1,"1.00 = standard lot"),u())}function HL(n,t){n&1&&(d(0,"div",65),h(1,"Required for auto risk from SL."),u())}function zL(n,t){if(n&1){let e=J();d(0,"div",10)(1,"div",48)(2,"div",49)(3,"label",42),h(4,"Instrument Type"),u(),d(5,"select",13),C("ngModelChange",function(i){S(e);let o=b();return o.instrumentType.set(i),D(o.recalcRiskFromSL())}),d(6,"option",50),h(7,"Forex"),u(),d(8,"option",51),h(9,"Metals"),u(),d(10,"option",52),h(11,"Indices"),u(),d(12,"option",53),h(13,"Stocks"),u(),d(14,"option",54),h(15,"Crypto"),u(),d(16,"option",55),h(17,"Other"),u()()(),d(18,"div",49)(19,"label",42),h(20,"Symbol"),u(),d(21,"input",56),ne("ngModelChange",function(i){S(e);let o=b();return re(o.form.symbol,i)||(o.form.symbol=i),D(i)}),C("input",function(){S(e);let i=b();return D(i.recalcRiskFromSL())}),u()(),d(22,"div",49)(23,"label",42),h(24,"Direction"),u(),d(25,"select",13),ne("ngModelChange",function(i){S(e);let o=b();return re(o.form.direction,i)||(o.form.direction=i),D(i)}),d(26,"option",57),h(27,"Long"),u(),d(28,"option",58),h(29,"Short"),u()()(),d(30,"div",49)(31,"label",42),h(32,"Entry Price"),u(),d(33,"input",59),ne("ngModelChange",function(i){S(e);let o=b();return re(o.form.planned_entry_price,i)||(o.form.planned_entry_price=i),D(i)}),C("input",function(){S(e);let i=b();return D(i.recalcRiskFromSL())}),u(),A(34,BL,2,0,"div",60),u(),d(35,"div",49)(36,"label",42),h(37),u(),d(38,"input",61),ne("ngModelChange",function(i){S(e);let o=b();return re(o.form.planned_lot_size,i)||(o.form.planned_lot_size=i),D(i)}),C("input",function(){S(e);let i=b();return D(i.recalcRiskFromSL())}),u(),A(39,$L,2,0,"div",62)(40,HL,2,0,"div",60),u(),d(41,"div",49)(42,"label",42),h(43,"Strategy Name"),u(),d(44,"input",63),ne("ngModelChange",function(i){S(e);let o=b();return re(o.form.strategy_name,i)||(o.form.strategy_name=i),D(i)}),u()(),d(45,"div",41)(46,"label",42),h(47,"Tags (comma separated)"),u(),d(48,"input",64),ne("ngModelChange",function(i){S(e);let o=b();return re(o.tagsStr,i)||(o.tagsStr=i),D(i)}),u()()()()}if(n&2){let e=b();m(5),_("ngModel",e.instrumentType()),m(16),te("ngModel",e.form.symbol),m(4),te("ngModel",e.form.direction),m(8),te("ngModel",e.form.planned_entry_price),m(),_("ngIf",!e.form.planned_entry_price),m(3),O(e.isForex()?"Lot Size (lots)":"Quantity / Contracts"),m(),te("ngModel",e.form.planned_lot_size),m(),_("ngIf",e.isForex()),m(),_("ngIf",!e.form.planned_lot_size),m(4),te("ngModel",e.form.strategy_name),m(4),te("ngModel",e.tagsStr)}}function qL(n,t){n&1&&(d(0,"div",65),h(1,"Required for auto risk from SL."),u())}function WL(n,t){if(n&1){let e=J();d(0,"div",49)(1,"label",42),h(2,"$ per pip (per 1.00 lot)"),u(),d(3,"input",75),C("ngModelChange",function(i){S(e);let o=b(3);return o.pipValuePerStdLot.set(i),D(o.recalcRiskFromSL())}),u(),d(4,"div",44),h(5,"Default 10 for most FX; JPY pairs pip size 0.01."),u()()}if(n&2){let e=b(3);m(3),_("ngModel",e.pipValuePerStdLot())}}function GL(n,t){if(n&1&&(Un(0),A(1,WL,6,1,"div",74),Bn()),n&2){let e=b(2);m(),_("ngIf",e.autoRiskFromSL())}}function QL(n,t){if(n&1){let e=J();d(0,"div",49)(1,"label",42),h(2,"Point Size"),u(),d(3,"input",76),C("ngModelChange",function(i){S(e);let o=b(3);return o.pointSize.set(i),D(o.recalcRiskFromSL())}),u(),d(4,"div",44),h(5,"e.g., 0.01; adjust per instrument."),u()()}if(n&2){let e=b(3);m(3),_("ngModel",e.pointSize())}}function KL(n,t){if(n&1){let e=J();d(0,"div",49)(1,"label",42),h(2,"$ per point (per 1 unit)"),u(),d(3,"input",77),C("ngModelChange",function(i){S(e);let o=b(3);return o.valuePerPointPerUnit.set(i),D(o.recalcRiskFromSL())}),u()()}if(n&2){let e=b(3);m(3),_("ngModel",e.valuePerPointPerUnit())}}function ZL(n,t){if(n&1){let e=J();d(0,"div",49)(1,"label",42),h(2,"Contract Multiplier"),u(),d(3,"input",75),C("ngModelChange",function(i){S(e);let o=b(3);return o.contractMultiplier.set(i),D(o.recalcRiskFromSL())}),u(),d(4,"div",44),h(5,"1 for shares. Use broker spec for CFDs/indices."),u()()}if(n&2){let e=b(3);m(3),_("ngModel",e.contractMultiplier())}}function YL(n,t){if(n&1&&A(0,QL,6,1,"div",74)(1,KL,4,1,"div",74)(2,ZL,6,1,"div",74),n&2){let e=b(2);_("ngIf",e.autoRiskFromSL()),m(),_("ngIf",e.autoRiskFromSL()),m(),_("ngIf",e.autoRiskFromSL())}}function JL(n,t){if(n&1){let e=J();d(0,"div",10)(1,"div",48)(2,"div",66)(3,"label",42),h(4,"Stop Loss Price"),u(),d(5,"input",67),ne("ngModelChange",function(i){S(e);let o=b();return re(o.form.planned_stop_loss,i)||(o.form.planned_stop_loss=i),D(i)}),C("input",function(){S(e);let i=b();return D(i.recalcRiskFromSL())}),u(),A(6,qL,2,0,"div",60),u(),d(7,"div",66)(8,"label",42),h(9,"Take Profit Price"),u(),d(10,"input",68),ne("ngModelChange",function(i){S(e);let o=b();return re(o.form.planned_take_profit,i)||(o.form.planned_take_profit=i),D(i)}),u()(),A(11,GL,2,1,"ng-container",69)(12,YL,3,3,"ng-template",null,0,Qr),d(14,"div",49)(15,"label",42),h(16,"Risk % per Trade"),u(),d(17,"input",70),ne("ngModelChange",function(i){S(e);let o=b();return re(o.form.planned_risk_percentage,i)||(o.form.planned_risk_percentage=i),D(i)}),C("input",function(){S(e);let i=b();return D(i.onRiskPercentChange())}),u(),d(18,"div",44),h(19),ht(20,"number"),u()(),d(21,"div",49)(22,"label",42),h(23,"Risk $ per Trade"),u(),d(24,"input",70),ne("ngModelChange",function(i){S(e);let o=b();return re(o.form.planned_risk_amount,i)||(o.form.planned_risk_amount=i),D(i)}),C("input",function(){S(e);let i=b();return D(i.onRiskDollarChange())}),u(),d(25,"div",44),h(26),u()(),d(27,"div",49)(28,"div",71)(29,"div",72),h(30,"Reward:Risk Ratio"),u(),d(31,"div",73),h(32),u(),d(33,"div",4),h(34,"Auto-calculated"),u()()()()()}if(n&2){let e=$n(13),r=b();m(5),te("ngModel",r.form.planned_stop_loss),m(),_("ngIf",!r.form.planned_stop_loss),m(4),te("ngModel",r.form.planned_take_profit),m(),_("ngIf",r.isForex())("ngIfElse",e),m(6),te("ngModel",r.form.planned_risk_percentage),m(2),Zs("\u2248 ",r.riskDollarPreview()," (from ",pt(20,11,r.baseBalance(),"1.0-2")," balance)"),m(5),te("ngModel",r.form.planned_risk_amount),m(2),ee("\u2248 ",r.riskPercentPreview()," of balance"),m(6),O(r.rrRatio())}}function XL(n,t){if(n&1){let e=J();d(0,"div",10)(1,"label",42),h(2,"Entry Criteria (Why are you taking this trade?) *"),u(),d(3,"textarea",78),ne("ngModelChange",function(i){S(e);let o=b();return re(o.form.entry_criteria,i)||(o.form.entry_criteria=i),D(i)}),u(),d(4,"div",79),h(5),u()()}if(n&2){let e=b();m(3),te("ngModel",e.form.entry_criteria),m(),Y("text-danger",e.wordCount()<50),m(),ee(" Current: ",e.wordCount()," words (minimum 50 required) ")}}function e2(n,t){if(n&1){let e=J();d(0,"div",10)(1,"div",48)(2,"div",49)(3,"label",42),h(4,"Current Emotional State"),u(),d(5,"select",13),ne("ngModelChange",function(i){S(e);let o=b();return re(o.form.emotional_before_state,i)||(o.form.emotional_before_state=i),D(i)}),d(6,"option",14),h(7,"Select emotional state"),u(),d(8,"option"),h(9,"calm"),u(),d(10,"option"),h(11,"confident"),u(),d(12,"option"),h(13,"anxious"),u(),d(14,"option"),h(15,"fearful"),u(),d(16,"option"),h(17,"euphoric"),u()()(),d(18,"div",49)(19,"label",42),h(20,"Potential Bias"),u(),d(21,"select",13),ne("ngModelChange",function(i){S(e);let o=b();return re(o.form.emotional_before_potential_bias,i)||(o.form.emotional_before_potential_bias=i),D(i)}),d(22,"option"),h(23,"None - Clear Mindset"),u(),d(24,"option"),h(25,"FOMO"),u(),d(26,"option"),h(27,"Revenge"),u(),d(28,"option"),h(29,"Confirmation"),u(),d(30,"option"),h(31,"Overconfidence"),u()()(),d(32,"div",49)(33,"label",80),h(34,"Trade Confidence (1-5)"),u(),d(35,"input",81),ne("ngModelChange",function(i){S(e);let o=b();return re(o.form.confidence_before_level,i)||(o.form.confidence_before_level=i),D(i)}),u(),d(36,"div",82)(37,"span"),h(38,"Low"),u(),d(39,"span"),h(40,"Medium"),u(),d(41,"span"),h(42,"High"),u()(),d(43,"div"),h(44),u()(),d(45,"div",41)(46,"label",42),h(47,"Additional Notes"),u(),d(48,"textarea",83),ne("ngModelChange",function(i){S(e);let o=b();return re(o.form.additional_notes,i)||(o.form.additional_notes=i),D(i)}),u()()()()}if(n&2){let e,r=b();m(5),te("ngModel",r.form.emotional_before_state),m(),_("ngValue",null),m(15),te("ngModel",r.form.emotional_before_potential_bias),m(14),te("ngModel",r.form.confidence_before_level),m(9),ee("Confidence Level: ",(e=r.form.confidence_before_level)!==null&&e!==void 0?e:3,""),m(4),te("ngModel",r.form.additional_notes)}}function t2(n,t){if(n&1&&(d(0,"div",84),h(1),u()),n&2){let e=b();m(),O(e.uc.error())}}function n2(n,t){if(n&1&&(d(0,"div",85),h(1),u()),n&2){let e=b();m(),ee(" ",e.isEditing()?"Updated!":"Saved!"," You can move to \u201CPlanned Trades\u201D. ")}}var Qd=class n{constructor(t,e,r){this.uc=t;this.route=e;this.router=r}ngOnInit(){this.uc.loadAccounts(),this.loadEditIfAny(),Kr(()=>{let t=this.accounts();!this.accountId()&&t.length===1&&this.accountId.set(t[0].id)})}multiOpen=U(!1);basicOpen=U(!0);riskOpen=U(!0);analysisOpen=U(!1);emotionOpen=U(!1);setAll(t){this.basicOpen.set(t),this.riskOpen.set(t),this.analysisOpen.set(t),this.emotionOpen.set(t)}toggle(t){if(this.multiOpen()){let e=this.getState(t);e.set(!e())}else{let e=this.getState(t)();this.setAll(!1),this.getState(t).set(!e)}}getState(t){return t==="basic"?this.basicOpen:t==="risk"?this.riskOpen:t==="analysis"?this.analysisOpen:this.emotionOpen}dzDrag=!1;onDzDrag(t){t.preventDefault(),this.dzDrag=!0}onDzDrop(t){t.preventDefault(),this.dzDrag=!1;let e=t.dataTransfer?.files?.[0];e&&this.handleChart(e)}accounts=et(()=>this.uc.accounts().map(t=>({id:t.account_id,name:t.account_name,balance:Number(t.balance??0)})));accountId=U(null);selectedAccount=et(()=>this.accounts().find(t=>t.id===this.accountId())??null);manualBalance=U(0);baseBalance=et(()=>{let t=Number(this.selectedAccount()?.balance??0);return t>0?t:Number(this.manualBalance()||0)});instrumentType=U("forex");isForex=()=>this.instrumentType()==="forex";autoRiskFromSL=U(!0);pipValuePerStdLot=U(10);pointSize=U(.01);valuePerPointPerUnit=U(1);contractMultiplier=U(1);editingTradeId=U(null);isEditing=et(()=>this.editingTradeId()!==null);form={symbol:"",direction:"LONG",planned_entry_price:null,planned_stop_loss:null,planned_take_profit:null,planned_lot_size:null,planned_risk_percentage:null,planned_risk_amount:null,strategy_name:"",entry_criteria:"",emotional_before_state:null,emotional_before_potential_bias:"None - Clear Mindset",confidence_before_level:3,additional_notes:null};tagsStr="";success=U(!1);aiMessage=U(null);aiWarn=U(null);aiErr=U(null);wordCount(){let t=(this.form.entry_criteria??"").toString().trim();return t?t.split(/\s+/).length:0}syncOnBalanceChange=Kr(()=>{let t=this.baseBalance(),e=Number(this.form.planned_risk_percentage??0),r=Number(this.form.planned_risk_amount??0);t&&(e>0?this.form.planned_risk_amount=+(e/100*t).toFixed(2):r>0&&(this.form.planned_risk_percentage=+(r/t*100).toFixed(2)))});riskPercentPreview=et(()=>{let t=this.baseBalance(),e=Number(this.form.planned_risk_amount??0),r=t?e/t*100:Number(this.form.planned_risk_percentage??0);return`${(isFinite(r)?r:0).toFixed(2)}%`});riskDollarPreview=et(()=>{let t=this.baseBalance(),r=Number(this.form.planned_risk_percentage??0)/100*t,i=Number(this.form.planned_risk_amount??0)||r;return`$${(isFinite(i)?i:0).toFixed(2)}`});rrRatio=et(()=>{let t=Number(this.form.planned_entry_price??0),e=Number(this.form.planned_stop_loss??0),r=Number(this.form.planned_take_profit??0);if(!t||!e||!r)return"\u2014";let i=Math.abs(t-e),o=Math.abs(r-t);return i?`1:${(o/i).toFixed(2)}`:"\u2014"});pipSizeFor(t){let e=(t||"").toUpperCase().trim();return e&&/JPY$/.test(e)?.01:1e-4}applyRiskAmount(t){let e=this.baseBalance(),r=+Number(t||0).toFixed(2);this.form.planned_risk_amount=r,this.form.planned_risk_percentage=e?+(r/e*100).toFixed(2):this.form.planned_risk_percentage}recalcRiskFromSL_FX(){let t=Number(this.form.planned_entry_price??0),e=Number(this.form.planned_stop_loss??0),r=Number(this.form.planned_lot_size??0);if(!t||!e||!r)return;let i=this.pipSizeFor(this.form.symbol),s=Math.abs(t-e)/i*this.pipValuePerStdLot()*r;this.applyRiskAmount(s)}recalcRiskFromSL_NonFX(){let t=Number(this.form.planned_entry_price??0),e=Number(this.form.planned_stop_loss??0),r=Number(this.form.planned_lot_size??0);if(!t||!e||!r)return;let i=Number(this.pointSize()||0),o=Number(this.valuePerPointPerUnit()||0),s=Number(this.contractMultiplier()||1);if(!i||!o)return;let l=Math.abs(t-e)/i*o*r*s;this.applyRiskAmount(l)}recalcRiskFromSL(){this.autoRiskFromSL()&&(this.isForex()?this.recalcRiskFromSL_FX():this.recalcRiskFromSL_NonFX())}recomputeOnInputs=Kr(()=>{let t=this.autoRiskFromSL(),e=this.instrumentType(),r=this.form.symbol,i=this.form.planned_entry_price,o=this.form.planned_stop_loss,s=this.form.planned_lot_size,a=this.pipValuePerStdLot(),l=this.pointSize(),c=this.valuePerPointPerUnit(),f=this.contractMultiplier();this.recalcRiskFromSL()});onRiskPercentChange(){let t=this.baseBalance(),e=Number(this.form.planned_risk_percentage??0);this.form.planned_risk_amount=t&&e>0?+(e/100*t).toFixed(2):null}onRiskDollarChange(){let t=this.baseBalance(),e=Number(this.form.planned_risk_amount??0);this.form.planned_risk_percentage=t&&e>0?+(e/t*100).toFixed(2):null}resyncRiskFromPercentOrDollar(){this.form.planned_risk_percentage?this.onRiskPercentChange():this.form.planned_risk_amount&&this.onRiskDollarChange()}canSubmit(){return!0}async onChartFile(t){let e=t.target.files?.[0];e&&await this.handleChart(e)}async handleChart(t){this.aiErr.set(null),this.aiWarn.set(null),this.aiMessage.set("Analyzing chart\u2026");let e=await this.uc.analyzeChart(t);if(!e){this.aiMessage.set(null),this.aiErr.set(this.uc.error()||"Could not analyze the image.");return}if(!e.is_relevant){this.aiMessage.set(null),this.aiWarn.set("Image does not look like a trading/chart screenshot. Nothing applied.");return}this.applyAiPrefill(e),this.aiMessage.set(`Fields prefilled (confidence ${Math.round((e.confidence??0)*100)}%). Review before saving.`)}applyAiPrefill(t){let e=r=>Number.isFinite(Number(r))?Number(r):null;t.symbol!=null&&(this.form.symbol=t.symbol||""),t.direction!=null&&(this.form.direction=t.direction||"LONG"),this.form.planned_entry_price=e(t.planned_entry_price)??this.form.planned_entry_price??null,this.form.planned_stop_loss=e(t.planned_stop_loss)??this.form.planned_stop_loss??null,this.form.planned_take_profit=e(t.planned_take_profit)??this.form.planned_take_profit??null,this.form.planned_lot_size=e(t.planned_lot_size)??this.form.planned_lot_size??null,this.form.planned_risk_percentage=e(t.planned_risk_percentage)??this.form.planned_risk_percentage??null,this.form.planned_risk_amount=e(t.planned_risk_amount)??this.form.planned_risk_amount??null,t.strategy_name!=null&&(this.form.strategy_name=t.strategy_name||""),t.entry_criteria&&(this.form.entry_criteria=t.entry_criteria),Array.isArray(t.tags)&&(this.tagsStr=t.tags.map(r=>String(r).trim().toLowerCase()).filter(Boolean).join(", ")),this.recalcRiskFromSL()}async save(){this.success.set(!1);let t=B(k({},this.form),{account_id:this.accountId(),tags:this.tagsStr.split(",").map(r=>r.trim()).filter(Boolean)}),e=this.editingTradeId();e?await this.uc.updatePlanned(e,t):await this.uc.createPlanned(t),this.uc.error()||(this.success.set(!0),this.router.navigate(["/tradejournal"],{queryParams:{tab:"PLANNED"}}))}cancelEdit(){this.router.navigate([],{queryParams:{}}),this.editingTradeId.set(null),this.success.set(!1)}async loadEditIfAny(){let t=this.route.snapshot.queryParamMap.get("edit")||null;if(!t)return;this.editingTradeId.set(t);let e=this.uc.trades.find(r=>r.trade_id===t);!e&&this.uc.getTradeById&&(e=await this.uc.getTradeById(t)),e&&(this.accounts().length||await this.uc.loadAccounts(),this.prefillFromTrade(e))}prefillFromTrade(t){this.accountId.set(t.account_id??null),this.form={symbol:t.symbol??"",direction:t.direction??"LONG",planned_entry_price:t.planned_entry_price??null,planned_stop_loss:t.planned_stop_loss??null,planned_take_profit:t.planned_take_profit??null,planned_lot_size:t.planned_lot_size??null,planned_risk_percentage:t.planned_risk_percentage??null,planned_risk_amount:t.planned_risk_amount??null,strategy_name:t.strategy_name??"",entry_criteria:t.entry_criteria??"",emotional_before_state:t.emotional_before_state??null,emotional_before_potential_bias:t.emotional_before_potential_bias??"None - Clear Mindset",confidence_before_level:t.confidence_before_level??3,additional_notes:t.additional_notes??null},this.tagsStr=Array.isArray(t.tags)?t.tags.join(", "):"",this.recalcRiskFromSL()}static \u0275fac=function(e){return new(e||n)(x(_s),x(Et),x($e))};static \u0275cmp=K({type:n,selectors:[["app-pretradeform"]],decls:84,vars:28,consts:[["nonForexBlock",""],[1,"container","my-4","page-shell"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0"],[1,"muted"],[1,"d-flex","align-items-center","gap-2"],["routerLink","/tradeaccounts",1,"btn","btn-light","border","ms-2"],[1,"me-2"],[1,"section-card","mb-3"],[1,"section-head"],[1,"p-3"],[1,"row","g-3","align-items-center"],[1,"col-md-8"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-4","d-flex"],["class","acct-pill w-100",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"muted","mb-2"],[1,"dropzone",3,"dragover","dragleave","drop"],[1,"dz-icon"],[1,"fw-semibold"],[1,"btn","btn-outline-primary","mt-2"],["type","file","accept","image/png,image/jpeg",1,"d-none",3,"change"],["class","alert alert-info mt-2 py-2 px-3",4,"ngIf"],["class","alert alert-warning mt-2 py-2 px-3",4,"ngIf"],["class","alert alert-danger mt-2 py-2 px-3",4,"ngIf"],["role","button",1,"section-head",3,"click"],[1,"badge-req","ms-2"],[1,"chev","ms-2"],["class","p-3",4,"ngIf"],[1,"text-danger"],[1,"badge-opt","ms-2"],[1,"mt-3"],[1,"btn","btn-primary","w-100",3,"click","disabled"],["class","alert alert-danger mt-3",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],[1,"acct-pill","w-100"],[1,"fw-semibold","small"],[1,"small"],[1,"col-12"],[1,"form-label"],["type","number","step","0.01","placeholder","Enter your account balance to enable Risk % \u2192 $",1,"form-control",3,"ngModelChange","ngModel"],[1,"hint"],[1,"alert","alert-info","mt-2","py-2","px-3"],[1,"alert","alert-warning","mt-2","py-2","px-3"],[1,"alert","alert-danger","mt-2","py-2","px-3"],[1,"row","g-3"],[1,"col-md-4"],["value","forex"],["value","metal"],["value","index"],["value","stock"],["value","crypto"],["value","other"],["placeholder","e.g., AUDNZD / XAUUSD / SPX",1,"form-control",3,"ngModelChange","input","ngModel"],["value","LONG"],["value","SHORT"],["type","number","step","0.000001","placeholder","1.0875",1,"form-control",3,"ngModelChange","input","ngModel"],["class","warn",4,"ngIf"],["type","number","step","0.0001","placeholder","0.01",1,"form-control",3,"ngModelChange","input","ngModel"],["class","hint",4,"ngIf"],["placeholder","e.g., FVG Retracement",1,"form-control",3,"ngModelChange","ngModel"],["placeholder","e.g., fvg, retracement, support",1,"form-control",3,"ngModelChange","ngModel"],[1,"warn"],[1,"col-md-6"],["type","number","step","0.000001","placeholder","1.0850",1,"form-control",3,"ngModelChange","input","ngModel"],["type","number","step","0.000001","placeholder","1.0925",1,"form-control",3,"ngModelChange","ngModel"],[4,"ngIf","ngIfElse"],["type","number","step","0.01",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"metric","good"],[1,"label"],[1,"value"],["class","col-md-4",4,"ngIf"],["type","number","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.000001",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.0001",1,"form-control",3,"ngModelChange","ngModel"],["rows","6","placeholder","Explain your technicals, fundamentals, market conditions, setup confirmation, etc.",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-1","small"],[1,"form-label","d-block"],["type","range","min","1","max","5",1,"form-range",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between","small","muted"],["rows","3","placeholder","Document any important notes for this trade",1,"form-control",3,"ngModelChange","ngModel"],[1,"alert","alert-danger","mt-3"],[1,"alert","alert-success","mt-3"]],template:function(e,r){e&1&&(d(0,"div",1)(1,"div",2)(2,"div")(3,"h4",3),h(4),u(),d(5,"small",4),h(6),u()(),d(7,"div",5)(8,"a",6)(9,"span",7),h(10,"\u2699\uFE0F"),u(),h(11,"Manage Accounts"),u()()(),d(12,"div",8)(13,"div",9),h(14,"Trading Account"),u(),d(15,"div",10)(16,"div",11)(17,"div",12)(18,"select",13),C("ngModelChange",function(o){return r.accountId.set(o)}),d(19,"option",14),h(20,"Select an account"),u(),A(21,RL,2,2,"option",15),u()(),d(22,"div",16),A(23,FL,6,5,"div",17),u(),A(24,LL,6,1,"div",18),u()()(),d(25,"div",8)(26,"div",9)(27,"span"),h(28,"\u{1F4C8}"),u(),h(29," Chart Image Analysis"),u(),d(30,"div",10)(31,"div",19),h(32,"Upload your analyzed chart image and let AI automatically fill your trade fields"),u(),d(33,"div",20),C("dragover",function(o){return r.onDzDrag(o)})("dragleave",function(){return r.dzDrag=!1})("drop",function(o){return r.onDzDrop(o)}),d(34,"div",21),h(35,"\u2B06\uFE0E"),u(),d(36,"div",22),h(37,"Upload Chart Image"),u(),d(38,"small",4),h(39,"PNG/JPG up to 10MB"),u(),d(40,"label",23),h(41,"Choose File "),d(42,"input",24),C("change",function(o){return r.onChartFile(o)}),u()()(),A(43,VL,2,1,"div",25)(44,jL,2,1,"div",26)(45,UL,2,1,"div",27),u()(),d(46,"div",8)(47,"div",28),C("click",function(){return r.toggle("basic")}),h(48," Basic Trade Information "),d(49,"span",29),h(50,"Required"),u(),d(51,"span",30),h(52,"\u25BE"),u()(),A(53,zL,49,11,"div",31),u(),d(54,"div",8)(55,"div",28),C("click",function(){return r.toggle("risk")}),d(56,"span",32),h(57,"Risk Management"),u(),d(58,"span",29),h(59,"Critical"),u(),d(60,"span",30),h(61,"\u25BE"),u()(),A(62,JL,35,14,"div",31),u(),d(63,"div",8)(64,"div",28),C("click",function(){return r.toggle("analysis")}),h(65," Trade Analysis "),d(66,"span",29),h(67,"Required \u2013 Min 100 words"),u(),d(68,"span",30),h(69,"\u25BE"),u()(),A(70,XL,6,4,"div",31),u(),d(71,"div",8)(72,"div",28),C("click",function(){return r.toggle("emotion")}),h(73," Emotional Check-In "),d(74,"span",33),h(75,"Optional but Recommended"),u(),d(76,"span",30),h(77,"\u25BE"),u()(),A(78,e2,49,6,"div",31),u(),d(79,"div",34)(80,"button",35),C("click",function(){return r.save()}),h(81),u()(),A(82,t2,2,1,"div",36)(83,n2,2,1,"div",37),u()),e&2&&(m(4),O(r.isEditing()?"Edit Trade Plan \u2022 "+(r.form.symbol||"-"):"Pre-Trade Plan"),m(2),O(r.isEditing()?"Editing existing planned trade":"Complete your trading plan step by step"),m(12),_("ngModel",r.accountId()),m(),_("ngValue",null),m(2),_("ngForOf",r.accounts()),m(2),_("ngIf",r.selectedAccount()),m(),_("ngIf",r.baseBalance()===0),m(9),Y("drag",r.dzDrag),m(10),_("ngIf",r.aiMessage()),m(),_("ngIf",r.aiWarn()),m(),_("ngIf",r.aiErr()),m(6),Y("rot",r.basicOpen()),m(2),_("ngIf",r.basicOpen()),m(7),Y("rot",r.riskOpen()),m(2),_("ngIf",r.riskOpen()),m(6),Y("rot",r.analysisOpen()),m(2),_("ngIf",r.analysisOpen()),m(6),Y("rot",r.emotionOpen()),m(2),_("ngIf",r.emotionOpen()),m(2),_("disabled",!r.canSubmit()),m(),ee(" ",r.isEditing()?"Update Trade Plan":"Submit Trade Plan"," "),m(),_("ngIf",r.uc.error()),m(),_("ngIf",r.success()))},dependencies:[ie,nt,_e,uu,gt,bd,wd,Se,Ja,Xa,ms,Me,st,un,mt],styles:[".page-shell[_ngcontent-%COMP%]{max-width:980px}.section-card[_ngcontent-%COMP%]{border:1px solid #e9eef5;border-radius:14px;overflow:hidden}.section-head[_ngcontent-%COMP%]{background:#f7f9fc;border-bottom:1px solid #eef2f7;padding:.85rem 1rem;font-weight:600;display:flex;align-items:center;gap:.5rem;cursor:pointer}.badge-req[_ngcontent-%COMP%]{color:#b30000;background:#ffecec;font-weight:600}.badge-opt[_ngcontent-%COMP%]{color:#7a5b00;background:#fff6d6;font-weight:600}.chev[_ngcontent-%COMP%]{margin-left:auto;opacity:.6;transition:transform .15s ease}.chev.rot[_ngcontent-%COMP%]{transform:rotate(180deg)}.acct-pill[_ngcontent-%COMP%]{background:#f1f5ff;border:1px solid #dfebff;color:#2c5cff;border-radius:10px;padding:.5rem .75rem}.dropzone[_ngcontent-%COMP%]{border:2px dashed #b8cdfa;border-radius:12px;background:#fbfdff;min-height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;gap:.5rem}.dropzone.drag[_ngcontent-%COMP%]{background:#f0f6ff}.dz-icon[_ngcontent-%COMP%]{font-size:34px;width:34px;height:34px;border-radius:50%;background:#eaf1ff;display:grid;place-items:center}.metric[_ngcontent-%COMP%]{border:1px solid #eef2f7;border-radius:12px;padding:.75rem;background:#fff;height:100%}.metric[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.78rem;color:#6b7280}.metric[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:700}.metric.good[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#0a8a00}.metric.warn[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#b30000}.muted[_ngcontent-%COMP%]{color:#8a94a6}.hint[_ngcontent-%COMP%]{font-size:.8rem;color:#6b7280;margin-top:.25rem}.warn[_ngcontent-%COMP%]{font-size:.85rem;color:#b30000;margin-top:.25rem}"]})};function r2(n,t){if(n&1){let e=J();d(0,"tr")(1,"td",33),h(2),u(),d(3,"td",7),h(4),u(),d(5,"td"),h(6),u(),d(7,"td"),h(8),u(),d(9,"td"),h(10),u(),d(11,"td"),h(12),u(),d(13,"td")(14,"span",34),h(15,"planned"),u()(),d(16,"td",22)(17,"div",35)(18,"button",36),C("click",function(){let i=S(e).$implicit,o=b(2);return D(o.edit(i))}),h(19,"Edit"),u(),d(20,"button",37),C("click",function(){let i=S(e).$implicit,o=b(2);return D(o.openExecute(i))}),h(21,"Trade Executed"),u(),d(22,"button",38),C("click",function(){let i=S(e).$implicit,o=b(2);return D(o.remove(i))}),h(23,"Delete"),u()()()()}if(n&2){let e=t.$implicit,r=b(2);m(2),O(e.symbol),m(),Y("dir-long",e.direction==="LONG")("dir-short",e.direction==="SHORT"),m(),O(e.direction),m(2),O(r.asMoney(e.planned_entry_price)),m(2),O(e.strategy_name||"\u2014"),m(2),O(e.emotional_before_state||"\u2014"),m(2),O(r.dateOnly(e.planned_at||e.created_at))}}function i2(n,t){if(n&1&&(d(0,"tbody"),A(1,r2,24,10,"tr",32),u()),n&2){let e=b();m(),_("ngForOf",e.viewRows())("ngForTrackBy",e.trackById)}}function o2(n,t){if(n&1){let e=J();d(0,"tr")(1,"td",33),h(2),u(),d(3,"td",7),h(4),u(),d(5,"td"),h(6),u(),d(7,"td"),h(8),u(),d(9,"td"),h(10),u(),d(11,"td"),h(12),u(),d(13,"td")(14,"span",34),h(15,"executing"),u()(),d(16,"td",22)(17,"div",35)(18,"button",36),C("click",function(){let i=S(e).$implicit,o=b(2);return D(o.editExecuting(i))}),h(19,"Edit"),u(),d(20,"button",39),C("click",function(){let i=S(e).$implicit,o=b(2);return D(o.openComplete(i))}),h(21,"Complete"),u()()()()}if(n&2){let e,r=t.$implicit,i=b(2);m(2),O(r.symbol),m(),Y("dir-long",r.direction==="LONG")("dir-short",r.direction==="SHORT"),m(),O(r.direction),m(2),O(i.asMoney((e=r.actual_entry_price)!==null&&e!==void 0?e:r.planned_entry_price)),m(2),O(r.strategy_name||"\u2014"),m(2),O(r.emotional_before_state||"\u2014"),m(2),O(i.dateOnly(r.actual_entry_date))}}function s2(n,t){if(n&1&&(d(0,"tbody"),A(1,o2,22,10,"tr",32),u()),n&2){let e=b();m(),_("ngForOf",e.viewRows())("ngForTrackBy",e.trackById)}}function a2(n,t){if(n&1){let e=J();d(0,"tr")(1,"td",33),h(2),u(),d(3,"td",7),h(4),u(),d(5,"td"),h(6),u(),d(7,"td"),h(8),u(),d(9,"td"),h(10),u(),d(11,"td"),h(12),u(),d(13,"td")(14,"span",40),h(15,"completed"),u()(),d(16,"td",22)(17,"button",36),C("click",function(){let i=S(e).$implicit,o=b(2);return D(o.openView(i))}),h(18,"View"),u()()()}if(n&2){let e=t.$implicit,r=b(2);m(2),O(e.symbol),m(),Y("dir-long",e.direction==="LONG")("dir-short",e.direction==="SHORT"),m(),O(e.direction),m(2),O(r.asMoney(e.exit_price)),m(2),O(e.strategy_name||"\u2014"),m(2),O(e.emotional_after_state||e.emotional_before_state||"\u2014"),m(2),O(r.dateOnly(e.exit_date))}}function l2(n,t){if(n&1&&(d(0,"tbody"),A(1,a2,19,10,"tr",32),u()),n&2){let e=b();m(),_("ngForOf",e.viewRows())("ngForTrackBy",e.trackById)}}function c2(n,t){n&1&&(d(0,"div",41),h(1,"No trades yet."),u())}function u2(n,t){if(n&1&&(d(0,"div",42),h(1),u()),n&2){let e=b();m(),O(e.uc.error())}}function d2(n,t){n&1&&R(0,"div",43)}function f2(n,t){n&1&&R(0,"div",44)}function h2(n,t){n&1&&R(0,"div",44)}function p2(n,t){n&1&&R(0,"div",44)}function m2(n,t){n&1&&(d(0,"div",61),h(1," Please choose a valid range of 1\u201314 days. "),u())}function g2(n,t){if(n&1){let e=J();d(0,"div",44)(1,"div",45)(2,"div",46)(3,"h5",47),h(4,"Export Trades"),u(),d(5,"button",48),C("click",function(){S(e);let i=b();return D(i.closeExport())}),u()(),d(6,"div",49)(7,"div",50)(8,"div",51)(9,"label",52),h(10,"From"),u(),d(11,"input",53),ne("ngModelChange",function(i){S(e);let o=b();return re(o.fromDate,i)||(o.fromDate=i),D(i)}),u()(),d(12,"div",51)(13,"label",52),h(14,"To"),u(),d(15,"input",53),ne("ngModelChange",function(i){S(e);let o=b();return re(o.toDate,i)||(o.toDate=i),D(i)}),u()(),d(16,"div",54)(17,"div",55),h(18,"Range must be \u2264 14 days. Preset to last 3 days (inclusive)."),u(),A(19,m2,2,0,"div",56),u()()(),d(20,"div",57)(21,"button",58),C("click",function(){S(e);let i=b();return D(i.closeExport())}),h(22,"Cancel"),u(),d(23,"div",26)(24,"button",59),C("click",function(){S(e);let i=b();return D(i.exportRangeCsv())}),h(25,"Export CSV"),u(),d(26,"button",60),C("click",function(){S(e);let i=b();return D(i.exportRangePdf())}),h(27,"Export PDF"),u()()()()()}if(n&2){let e=b();m(11),te("ngModel",e.fromDate),m(4),te("ngModel",e.toDate),m(4),_("ngIf",!e.canExportRange()),m(5),_("disabled",!e.canExportRange()),m(2),_("disabled",!e.canExportRange())}}var Kd=class n{constructor(t,e){this.uc=t;this.router=e;this.refresh(),this.rows=this.uc.tradesSig}rows;tab=U("PLANNED");pageIndex=U(0);hasNext=U(!1);hasPrev=U(!1);exportModalOpen=U(!1);fromDate=null;toDate=null;viewRows=et(()=>this.rows());trackById=(t,e)=>e.trade_id;async refresh(){await this.uc.loadTabPage(this.tab(),!0),this.pageIndex.set(0),this.uc.reflectPageToStore(this.tab(),0),this.syncPagerFlags()}switchTab(t){this.tab.set(t),this.refresh()}syncPagerFlags(){let t=this.pageIndex();this.hasPrev.set(t>0),this.hasNext.set(this.uc.hasNextPage(this.tab(),t))}async nextPage(){let t=this.pageIndex();if(await this.uc.ensurePageLoaded(this.tab(),t+1)){let r=t+1;this.pageIndex.set(r),this.uc.reflectPageToStore(this.tab(),r),this.syncPagerFlags()}}async prevPage(){let t=this.pageIndex();if(t<=0)return;let e=t-1;this.pageIndex.set(e),this.uc.reflectPageToStore(this.tab(),e),this.syncPagerFlags()}execModalOpen=U(!1);execTarget=null;execForm={actual_entry_price:null,actual_stop_loss:null,actual_take_profit:null,actual_lot_size:null};execMode=U("mark");openExecute(t){this.completeModalOpen.set(!1),this.viewModalOpen.set(!1),this.execTarget=t,this.execForm={actual_entry_price:t.planned_entry_price??null,actual_stop_loss:t.planned_stop_loss??null,actual_take_profit:t.planned_take_profit??null,actual_lot_size:t.planned_lot_size??null},this.execMode.set("mark"),this.execModalOpen.set(!0)}editExecuting(t){this.completeModalOpen.set(!1),this.viewModalOpen.set(!1),this.execTarget=t,this.execForm={actual_entry_price:t.actual_entry_price??t.planned_entry_price??null,actual_stop_loss:t.actual_stop_loss??t.planned_stop_loss??null,actual_take_profit:t.actual_take_profit??t.planned_take_profit??null,actual_lot_size:t.actual_lot_size??t.planned_lot_size??null},this.execMode.set("update"),this.execModalOpen.set(!0)}async confirmExec(){if(!this.execTarget)return;let t={actual_entry_price:Number(this.execForm.actual_entry_price??0),actual_stop_loss:Number(this.execForm.actual_stop_loss??0),actual_take_profit:Number(this.execForm.actual_take_profit??0),actual_lot_size:Number(this.execForm.actual_lot_size??0)};this.execMode()==="mark"?await this.uc.markExecuted(this.execTarget.trade_id,t):await this.uc.updateExecuting(this.execTarget.trade_id,t),this.execModalOpen.set(!1),this.execTarget=null,this.switchTab("EXECUTING")}closeExec(){this.execModalOpen.set(!1),this.execTarget=null}completeModalOpen=U(!1);completeTarget=null;completeForm={};openComplete(t){this.execModalOpen.set(!1),this.viewModalOpen.set(!1),this.completeTarget=t,this.completeForm={exit_price:null,exit_date:new Date().toISOString().slice(0,10),broker_fees:0,trade_outcome:"Win",emotional_after_state:"neutral",confidence_after_level:5,trade_notes:""},this.completeModalOpen.set(!0)}closeComplete(){this.completeModalOpen.set(!1),this.completeTarget=null}pnlPreview(){let t=this.completeTarget?.actual_entry_price??this.completeTarget?.planned_entry_price,e=this.completeForm.exit_price,r=Number(t),i=Number(e);if(!Number.isFinite(r)||!Number.isFinite(i))return 0;let o=Number(this.completeTarget?.actual_lot_size??this.completeTarget?.planned_lot_size??1)||1,s=Number(this.completeForm.broker_fees)||0,l=String(this.completeTarget?.direction||"LONG").toUpperCase()==="SHORT"?(r-i)*o:(i-r)*o;return Number((l-s).toFixed(2))}marginPreview(){let t=+(this.completeTarget?.actual_entry_price??this.completeTarget?.planned_entry_price??0),e=+(this.completeForm.exit_price??0);return!t||!e?"0.00%":((e-t)/t*100).toFixed(2)+"%"}rrPreview(){let t=+(this.completeTarget?.actual_entry_price??this.completeTarget?.planned_entry_price??0),e=+(this.completeTarget?.actual_stop_loss??this.completeTarget?.planned_stop_loss??0),r=+(this.completeTarget?.actual_take_profit??this.completeTarget?.planned_take_profit??0);if(!t||!e||!r)return"0.00";let i=Math.abs(t-e),o=Math.abs(r-t);return i?(o/i).toFixed(2):"0.00"}async confirmComplete(){this.completeTarget&&(await this.uc.completeAndApply(this.completeTarget.trade_id,{exit_price:Number(this.completeForm.exit_price),broker_fees:Number(this.completeForm.broker_fees||0),outcome:String(this.completeForm.trade_outcome||"Win"),emotion_after:String(this.completeForm.emotional_after_state||"neutral"),conf_after:Number(this.completeForm.confidence_after_level||5),notes:this.completeForm.trade_notes??"",lessons:this.completeForm.lesson_learned??"",improve:this.completeForm.points_to_improve??""}),this.completeModalOpen.set(!1),this.completeTarget=null,this.switchTab("COMPLETED"))}viewModalOpen=U(!1);viewTarget=null;openView(t){this.execModalOpen.set(!1),this.completeModalOpen.set(!1),this.viewTarget=t,this.viewModalOpen.set(!0)}closeView(){this.viewModalOpen.set(!1),this.viewTarget=null}edit(t){this.router.navigate(["/pretrade"],{queryParams:{edit:t.trade_id}})}asMoney(t){return t==null||isNaN(+t)?"\u2014":`$${Number(t).toFixed(2)}`}asPercent(t){return t==null||isNaN(+t)?"\u2014":`${Number(t).toFixed(2)}%`}dateOnly(t){return t?new Date(t).toLocaleDateString():"\u2014"}dateTime(t){if(!t)return"\u2014";let e=new Date(t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()}asJsonOneLine(t){if(!t)return"\u2014";try{return JSON.stringify(t)}catch{return"\u2014"}}async remove(t){await this.uc.remove(t.trade_id)}downloadFile(t,e,r){let i=r instanceof Blob?r:new Blob([r],{type:e}),o=URL.createObjectURL(i),s=document.createElement("a");s.href=o,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(o)}buildViewPairs(){let t=this.viewTarget,e=r=>r==null||typeof r=="number"&&!Number.isFinite(r)?"\u2014":String(r);return[["Symbol",e(t?.symbol)],["Direction",e(t?.direction)],["Strategy",e(t?.strategy_name)],["Tags",(t?.tags||[]).join(", ")||"\u2014"],["Trade State",t?.trade_state??"\u2014"],["Account ID",e(t?.account_id)],["Planned Entry",this.asMoney(t?.planned_entry_price)],["Planned SL",this.asMoney(t?.planned_stop_loss)],["Planned TP",this.asMoney(t?.planned_take_profit)],["Planned Lots",e(t?.planned_lot_size)],["Planned Risk $",this.asMoney(t?.planned_risk_amount)],["Planned Risk %",this.asPercent(t?.planned_risk_percentage)],["Planned At",this.dateTime(t?.planned_at)],["Actual Entry",this.asMoney(t?.actual_entry_price)],["Actual SL",this.asMoney(t?.actual_stop_loss)],["Actual TP",this.asMoney(t?.actual_take_profit)],["Actual Lots",e(t?.actual_lot_size)],["Actual Entry Date",this.dateTime(t?.actual_entry_date)],["Exit Price",this.asMoney(t?.exit_price)],["Exit Date",this.dateTime(t?.exit_date)],["Broker Fees",this.asMoney(t?.broker_fees)],["Realized P&L",this.asMoney(t?.realized_pnl)],["Outcome",e(t?.trade_outcome)],["Before Emotion",e(t?.emotional_before_state)],["Before Confidence",e(t?.confidence_before_level)],["Before Bias",e(t?.emotional_before_potential_bias)],["After Emotion",e(t?.emotional_after_state)],["After Confidence",e(t?.confidence_after_level)],["After Bias",e(t?.emotional_after_potential_bias)],["Entry Criteria",e(t?.entry_criteria)],["Trade Notes",e(t?.trade_notes)],["Lesson Learned",e(t?.lesson_learned)],["Points to Improve",e(t?.points_to_improve)],["Additional Notes",e(t?.additional_notes)],["Chart Analysis (JSON)",t?.chart_analysis?JSON.stringify(t.chart_analysis):"\u2014"],["Trade ID",e(t?.trade_id)],["Created At",this.dateTime(t?.created_at)],["Updated At",this.dateTime(t?.updated_at)]]}toCsv(t){let e=i=>`"${String(i??"").replace(/"/g,'""')}"`;return[["Field","Value"],...t.map(([i,o])=>[i,o])].map(i=>i.map(e).join(",")).join(`
`)}exportCsvSingle(){if(!this.viewTarget)return;let t=this.toCsv(this.buildViewPairs()),e=(this.viewTarget.symbol||"trade").replace(/[^\w-]+/g,"_"),r=new Date().toISOString().slice(0,10);this.downloadFile(`${e}_details_${r}.csv`,"text/csv;charset=utf-8",t)}exportPdfViaPrint(){let t=document.getElementById("viewModalCard");if(!t)return;let e=`
<!doctype html><html><head><meta charset="utf-8"/>
<title>Trade Details</title>
<style>
  body{font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; margin:24px;background:#fff}
  h1,h2,h3,h4,h5{margin:.25rem 0}
  .soft-card{border:1px solid #e9ecef;border-radius:1rem;box-shadow:none}
  .kv-grid{display:grid;grid-template-columns:1fr 1fr;gap:.5rem .75rem}
  .kv-item{display:flex;justify-content:space-between;gap:.75rem;padding:.5rem .75rem;border:1px solid #eef2f7;border-radius:.5rem}
  .kv-k{color:#6c757d}
  .kv-v{font-weight:600}
  .metric{border-radius:.75rem;border:1px solid #eef2f7;padding:1rem;text-align:center}
  .metric .k{font-size:.85rem;color:#6c757d}
  .metric .v{font-weight:700;font-size:1.1rem}
  @media print { body{margin:0} }
</style></head><body>
  ${t.outerHTML}
  <script>window.addEventListener('afterprint',()=>setTimeout(()=>window.close(),50));setTimeout(()=>window.print(),150);<\/script>
</body></html>`,r=window.open("","_blank","noopener,noreferrer,width=980");r&&(r.document.open(),r.document.write(e),r.document.close())}canExportRange(){if(!this.fromDate||!this.toDate)return!1;let t=new Date(this.fromDate),e=new Date(this.toDate);if(isNaN(+t)||isNaN(+e)||e<t)return!1;let r=Math.floor((+e-+t)/864e5)+1;return r>0&&r<=14}csvFromRows(t){let e=o=>`"${String(o??"").replace(/"/g,'""')}"`,i=[["trade_id","symbol","direction","strategy_name","tags","trade_state","planned_entry_price","planned_stop_loss","planned_take_profit","planned_lot_size","planned_risk_amount","planned_risk_percentage","planned_at","actual_entry_price","actual_stop_loss","actual_take_profit","actual_lot_size","actual_entry_date","exit_price","exit_date","broker_fees","realized_pnl","trade_outcome","emotional_before_state","confidence_before_level","emotional_before_potential_bias","emotional_after_state","confidence_after_level","emotional_after_potential_bias","entry_criteria","trade_notes","lesson_learned","points_to_improve","additional_notes","created_at","updated_at","account_id"]];for(let o of t)i.push([this.val(o.trade_id),this.val(o.symbol),this.val(o.direction),this.val(o.strategy_name),(o.tags??[]).join("|"),this.val(o.trade_state),this.val(o.planned_entry_price),this.val(o.planned_stop_loss),this.val(o.planned_take_profit),this.val(o.planned_lot_size),this.val(o.planned_risk_amount),this.val(o.planned_risk_percentage),this.val(o.planned_at),this.val(o.actual_entry_price),this.val(o.actual_stop_loss),this.val(o.actual_take_profit),this.val(o.actual_lot_size),this.val(o.actual_entry_date),this.val(o.exit_price),this.val(o.exit_date),this.val(o.broker_fees),this.val(o.realized_pnl),this.val(o.trade_outcome),this.val(o.emotional_before_state),this.val(o.confidence_before_level),this.val(o.emotional_before_potential_bias),this.val(o.emotional_after_state),this.val(o.confidence_after_level),this.val(o.emotional_after_potential_bias),this.val(o.entry_criteria),this.val(o.trade_notes),this.val(o.lesson_learned),this.val(o.points_to_improve),this.val(o.additional_notes),this.val(o.created_at),this.val(o.updated_at),this.val(o.account_id)]);return i.map(o=>o.map(e).join(",")).join(`
`)}val(t){return t==null?"":String(t)}async exportRangeCsv(){if(!this.canExportRange())return;let t=await this.uc.fetchRangeForExport(this.tab(),this.fromDate,this.toDate),e=this.csvFromRows(t),r=this.tab().toLowerCase();this.downloadFile(`trades_${r}_${this.fromDate}_${this.toDate}.csv`,"text/csv;charset=utf-8",e)}async exportRangePdf(){if(!this.canExportRange())return;let t=await this.uc.fetchRangeForExport(this.tab(),this.fromDate,this.toDate),e=`
      <table border="1" cellspacing="0" cellpadding="6" style="border-collapse:collapse;width:100%;font-size:12px">
        <thead><tr>
          <th>Symbol</th><th>Dir</th><th>State</th>
          <th>Planned Entry</th><th>Actual Entry</th><th>Exit</th>
          <th>Outcome</th><th>Realized P&L</th>
          <th>Created</th><th>Exit Date</th>
        </tr></thead>
        <tbody>
          ${t.map(a=>`
            <tr>
              <td>${a.symbol??""}</td>
              <td>${a.direction??""}</td>
              <td>${a.trade_state??""}</td>
              <td>${this.asMoney(a.planned_entry_price)}</td>
              <td>${this.asMoney(a.actual_entry_price)}</td>
              <td>${this.asMoney(a.exit_price)}</td>
              <td>${a.trade_outcome??""}</td>
              <td>${this.asMoney(a.realized_pnl)}</td>
              <td>${this.dateTime(a.created_at)}</td>
              <td>${this.dateTime(a.exit_date)}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>
    `,r=`
    <!doctype html><html><head><meta charset="utf-8"/>
    <title>Trades ${this.fromDate} - ${this.toDate}</title>
    <style>
      body{font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; margin:24px}
      h3{margin:0 0 12px}
      .muted{color:#666}
      @media print { body{margin:0} }
    </style>
    </head><body>
      <h3>Trades (${this.tab()}) \u2014 ${this.fromDate} to ${this.toDate}</h3>
      <div class="muted">Exported ${t.length} trades</div>
      ${e}
      <script>
        // Print only AFTER the HTML finishes loading
        window.onload = () => { setTimeout(() => { window.print(); }, 50); };
        window.onafterprint = () => { setTimeout(() => { window.close(); }, 50); };
      <\/script>
    </body></html>`.trim(),i=new Blob([r],{type:"text/html"}),o=URL.createObjectURL(i);if(!window.open(o,"_blank","noopener,noreferrer,width=1024")){URL.revokeObjectURL(o),alert("Popup blocked. Please allow popups for this site to export.");return}setTimeout(()=>URL.revokeObjectURL(o),3e4)}isoDate(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()).toISOString().slice(0,10)}presetExportDates(){let t=new Date,e=new Date(t);e.setDate(t.getDate()-2),this.fromDate=this.isoDate(e),this.toDate=this.isoDate(t)}openExport(){this.presetExportDates(),this.exportModalOpen.set(!0)}closeExport(){this.exportModalOpen.set(!1)}static \u0275fac=function(e){return new(e||n)(x(_s),x($e))};static \u0275cmp=K({type:n,selectors:[["app-tradejournal"]],decls:74,vars:19,consts:[[1,"container","my-4"],[1,"page-head"],[1,"mb-1"],[1,"subtle"],[1,"card","soft-card","my-3"],[1,"card-body","d-flex","flex-wrap","align-items-center","gap-3"],[1,"me-auto"],[1,"fw-semibold"],[1,"subtle","small"],["routerLink","/pretrade",1,"btn","btn-outline-primary","btn-rounded","d-flex","align-items-center","gap-2"],[1,"bi","bi-gear"],[1,"d-flex","justify-content-between","align-items-center","my-3"],[1,"segmented"],[1,"seg-btn",3,"click"],[1,"soft-card","bg-white"],[1,"card-head","d-flex","align-items-center"],[1,"ms-auto"],["routerLink","/pretrade",1,"btn","btn-primary","btn-rounded","px-3","me-3"],[1,"btn","btn-outline-primary","btn-rounded",3,"click"],[1,"table-responsive"],[1,"table","clean","align-middle","mb-0"],[1,"ps-4"],[1,"pe-4","text-end"],[4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","p-3"],[1,"small","subtle"],[1,"d-flex","gap-2"],[1,"btn","btn-light","btn-sm","btn-rounded","px-3",3,"click","disabled"],["class","p-4 text-center subtle",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],["class","modal-backdrop-custom",4,"ngIf"],["class","modal-shell",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"ps-4","fw-semibold"],[1,"badge-pill","badge-soft-warning","text-capitalize"],[1,"d-inline-flex","gap-2"],["type","button",1,"btn","btn-light","btn-sm","btn-rounded","px-3",3,"click"],["type","button",1,"btn","btn-outline-warning","btn-sm","btn-rounded","px-3",3,"click"],["type","button",1,"btn","btn-danger","btn-sm","btn-rounded","px-3",3,"click"],["type","button",1,"btn","btn-success","btn-sm","btn-rounded","px-3",3,"click"],[1,"badge-pill","badge-soft-success","text-capitalize"],[1,"p-4","text-center","subtle"],[1,"alert","alert-danger","mt-3"],[1,"modal-backdrop-custom"],[1,"modal-shell"],[1,"modal-card"],[1,"modal-header","d-flex","align-items-center","justify-content-between"],[1,"m-0","fw-semibold"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","g-3"],[1,"col-md-6"],[1,"form-label","mb-1"],["type","date",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],[1,"small","muted"],["class","text-danger small mt-2",4,"ngIf"],[1,"modal-footer","d-flex","justify-content-between"],[1,"btn","btn-light","btn-rounded","px-3",3,"click"],[1,"btn","btn-outline-secondary","btn-rounded",3,"click","disabled"],[1,"btn","btn-outline-primary","btn-rounded",3,"click","disabled"],[1,"text-danger","small","mt-2"]],template:function(e,r){e&1&&(d(0,"div",0)(1,"div",1)(2,"h2",2),h(3,"Trading Dashboard"),u(),d(4,"div",3),h(5,"Manage your trades from planning to completion"),u()(),d(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),h(10,"Trade Entry Mode"),u(),d(11,"div",8),h(12,"Manually enter and manage trades"),u()(),d(13,"a",9),R(14,"span",10),h(15," Manual Entry "),u()()(),d(16,"div",11)(17,"div",12)(18,"button",13),C("click",function(){return r.switchTab("PLANNED")}),h(19,"Planned Trades"),u(),d(20,"button",13),C("click",function(){return r.switchTab("EXECUTING")}),h(21,"Executed Trades"),u(),d(22,"button",13),C("click",function(){return r.switchTab("COMPLETED")}),h(23,"Completed Trades"),u()()(),d(24,"div",14)(25,"div",15)(26,"div")(27,"div",7),h(28,"Your Trade Plans"),u(),d(29,"div",8),h(30,"Review and manage your planned trades"),u()(),d(31,"div",16)(32,"a",17),h(33,"New Trade Plan"),u(),d(34,"button",18),C("click",function(){return r.openExport()}),h(35,"Export"),u()()(),d(36,"div",19)(37,"table",20)(38,"thead")(39,"tr")(40,"th",21),h(41,"Symbol"),u(),d(42,"th"),h(43,"Direction"),u(),d(44,"th"),h(45,"Entry/Exit"),u(),d(46,"th"),h(47,"Strategy"),u(),d(48,"th"),h(49,"Emotional State"),u(),d(50,"th"),h(51,"Date"),u(),d(52,"th"),h(53,"Status"),u(),d(54,"th",22),h(55,"Actions"),u()()(),A(56,i2,2,2,"tbody",23)(57,s2,2,2,"tbody",23)(58,l2,2,2,"tbody",23),u()(),d(59,"div",24)(60,"div",25),h(61),u(),d(62,"div",26)(63,"button",27),C("click",function(){return r.prevPage()}),h(64,"Prev"),u(),d(65,"button",27),C("click",function(){return r.nextPage()}),h(66,"Next"),u()()(),A(67,c2,2,0,"div",28),u(),A(68,u2,2,1,"div",29),u(),A(69,d2,1,0,"div",30)(70,f2,1,0,"div",31)(71,h2,1,0,"div",31)(72,p2,1,0,"div",31)(73,g2,28,5,"div",31)),e&2&&(m(18),Y("active",r.tab()==="PLANNED"),m(2),Y("active",r.tab()==="EXECUTING"),m(2),Y("active",r.tab()==="COMPLETED"),m(34),_("ngIf",r.tab()==="PLANNED"),m(),_("ngIf",r.tab()==="EXECUTING"),m(),_("ngIf",r.tab()==="COMPLETED"),m(3),ee("Page ",r.pageIndex()+1,""),m(2),_("disabled",!r.hasPrev()),m(2),_("disabled",!r.hasNext()),m(2),_("ngIf",r.viewRows().length===0),m(),_("ngIf",r.uc.error()),m(),_("ngIf",r.execModalOpen()||r.completeModalOpen()||r.viewModalOpen()||r.exportModalOpen()),m(),_("ngIf",r.execModalOpen()),m(),_("ngIf",r.completeModalOpen()),m(),_("ngIf",r.viewModalOpen()),m(),_("ngIf",r.exportModalOpen()))},dependencies:[ie,nt,_e,gt,Se,Me,st,mt],styles:['.page-head[_ngcontent-%COMP%]{padding:1.25rem 0 .25rem}.subtle[_ngcontent-%COMP%], .muted[_ngcontent-%COMP%]{color:#6c757d}.soft-card[_ngcontent-%COMP%]{border-radius:1rem;border:1px solid #e9ecef;box-shadow:0 1px 2px #10182805}.card-head[_ngcontent-%COMP%]{padding:1rem 1.25rem;border-bottom:1px solid #eef2f7}.segmented[_ngcontent-%COMP%]{display:inline-flex;gap:.25rem;padding:.25rem;border-radius:9999px;background:#f1f3f5}.segmented[_ngcontent-%COMP%]   .seg-btn[_ngcontent-%COMP%]{border:0;border-radius:9999px;background:transparent;padding:.5rem 1.25rem;font-weight:600;color:#495057}.segmented[_ngcontent-%COMP%]   .seg-btn.active[_ngcontent-%COMP%]{background:#fff;box-shadow:0 1px 2px #0000000f;color:#0d6efd}.table.clean[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(caption) > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{border-bottom-width:0}.table.clean[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] + tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:1px solid #eef2f7}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#6c757d;font-weight:600}.badge-pill[_ngcontent-%COMP%]{border-radius:9999px;padding:.35rem .75rem;font-weight:600}.badge-soft-warning[_ngcontent-%COMP%]{background:#fff8e1;color:#946200}.badge-soft-success[_ngcontent-%COMP%]{background:#eafff2;color:#117c36}.btn-rounded[_ngcontent-%COMP%]{border-radius:.75rem}.btn-danger[_ngcontent-%COMP%]{background:#ffe8e6;color:#c2271c;border:0}.btn-danger[_ngcontent-%COMP%]:hover{background:#ffd8d5;color:#a61f16}.modal-backdrop-custom[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000073;opacity:1;transition:opacity .15s;z-index:1050}.modal-shell[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;align-items:flex-start;justify-content:center;padding:3rem 1rem;overflow:auto;z-index:1060}.modal-card[_ngcontent-%COMP%]{width:min(980px,calc(100vw - 2rem));background:#fff;border-radius:1rem;box-shadow:0 10px 30px #1018282e;animation:_ngcontent-%COMP%_pop .12s ease-out}@keyframes _ngcontent-%COMP%_pop{0%{transform:scale(.98);opacity:.6}to{transform:scale(1);opacity:1}}.modal-section[_ngcontent-%COMP%]{border-bottom:1px solid #eef2f7}.modal-header[_ngcontent-%COMP%]{padding:1rem 1.25rem;border-bottom:1px solid #eef2f7}.modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{padding:1rem 1.25rem}.form-control.form-lg[_ngcontent-%COMP%]{border-radius:.75rem;padding:.75rem 1rem;font-size:1rem}.metric[_ngcontent-%COMP%]{border-radius:.75rem;border:1px solid #eef2f7;padding:1rem;text-align:center}.metric[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d}.metric[_ngcontent-%COMP%]   .v[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem}.metric.g[_ngcontent-%COMP%]{color:#117c36}.metric.b[_ngcontent-%COMP%]{color:#0d6efd}.metric.o[_ngcontent-%COMP%]{color:#0a7}.pill-toggle[_ngcontent-%COMP%]{display:inline-flex;border-radius:.75rem;background:#f1f3f5;overflow:hidden}.pill-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;background:transparent;padding:.5rem 1rem;font-weight:600}.pill-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#dbeafe;color:#0d6efd}.label-strong[_ngcontent-%COMP%]{font-weight:600}.dir-long[_ngcontent-%COMP%]{color:#198754}.dir-short[_ngcontent-%COMP%]{color:#dc3545}.field-help[_ngcontent-%COMP%]{color:#6c757d;font-size:.85rem}.input-dollar[_ngcontent-%COMP%]:before{content:"$";position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:#6c757d}.input-dollar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:1.6rem}.kv-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.5rem .75rem}.kv-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:.75rem;padding:.5rem .75rem;border:1px solid #eef2f7;border-radius:.5rem}.kv-k[_ngcontent-%COMP%]{color:#6c757d}.kv-v[_ngcontent-%COMP%]{font-weight:600}@media (max-width: 768px){.kv-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})};var jS=[{path:"",component:Dd,canActivate:[Wa]},{path:"home",component:ld,canActivate:[Ot]},{path:"emotions",component:jd,canActivate:[Ot]},{path:"pretrade",component:Qd,canActivate:[Ot]},{path:"tradejournal",component:Kd,canActivate:[Ot]},{path:"meditationhub",component:Pd,canActivate:[Ot]},{path:"analytics",component:Hd,canActivate:[Ot]},{path:"tradeaccounts",component:Rd,canActivate:[Ot]},{path:"useraccount",component:Fd,canActivate:[Ot]},{path:"admin/emotionquestion",component:Cd,canActivate:[Ot]},{path:"admin/meditationvideo",component:Vd,canActivate:[Ot]},{path:"auth/forgot-password",component:Ud,canActivate:[Wa]},{path:"auth/update-password",component:Bd,canActivate:[Ot]},{path:"**",redirectTo:""}];var fe=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(fe||{}),Yn="*";function US(n,t=null){return{type:fe.Sequence,steps:n,options:t}}function uv(n){return{type:fe.Style,styles:n,offset:null}}var li=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},nl=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){let t=this.players.reduce((e,r)=>e===null||r.totalTime>e.totalTime?r:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},Zd="!";function BS(n){return new T(3e3,!1)}function v2(){return new T(3100,!1)}function _2(){return new T(3101,!1)}function y2(n){return new T(3001,!1)}function b2(n){return new T(3003,!1)}function w2(n){return new T(3004,!1)}function C2(n,t){return new T(3005,!1)}function E2(){return new T(3006,!1)}function S2(){return new T(3007,!1)}function D2(n,t){return new T(3008,!1)}function I2(n){return new T(3002,!1)}function x2(n,t,e,r,i){return new T(3010,!1)}function T2(){return new T(3011,!1)}function M2(){return new T(3012,!1)}function A2(){return new T(3200,!1)}function k2(){return new T(3202,!1)}function N2(){return new T(3013,!1)}function P2(n){return new T(3014,!1)}function O2(n){return new T(3015,!1)}function R2(n){return new T(3016,!1)}function F2(n,t){return new T(3404,!1)}function L2(n){return new T(3502,!1)}function V2(n){return new T(3503,!1)}function j2(){return new T(3300,!1)}function U2(n){return new T(3504,!1)}function B2(n){return new T(3301,!1)}function $2(n,t){return new T(3302,!1)}function H2(n){return new T(3303,!1)}function z2(n,t){return new T(3400,!1)}function q2(n){return new T(3401,!1)}function W2(n){return new T(3402,!1)}function G2(n,t){return new T(3505,!1)}function ci(n){switch(n.length){case 0:return new li;case 1:return n[0];default:return new nl(n)}}function tD(n,t,e=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(t.forEach(l=>{let c=l.get("offset"),f=c==s,p=f&&a||new Map;l.forEach((v,g)=>{let y=g,w=v;if(g!=="offset")switch(y=n.normalizePropertyName(y,i),w){case Zd:w=e.get(g);break;case Yn:w=r.get(g);break;default:w=n.normalizeStyleValue(g,y,w,i);break}p.set(y,w)}),f||o.push(p),a=p,s=c}),i.length)throw L2(i);return o}function Nv(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&dv(e,"start",n)));break;case"done":n.onDone(()=>r(e&&dv(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&dv(e,"destroy",n)));break}}function dv(n,t,e){let r=e.totalTime,i=!!e.disabled,o=Pv(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function Pv(n,t,e,r,i="",o=0,s){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function Zt(n,t,e){let r=n.get(t);return r||n.set(t,r=e),r}function $S(n){let t=n.indexOf(":"),e=n.substring(1,t),r=n.slice(t+1);return[e,r]}var Q2=typeof document>"u"?null:document.documentElement;function Ov(n){let t=n.parentNode||n.host||null;return t===Q2?null:t}function K2(n){return n.substring(1,6)=="ebkit"}var to=null,HS=!1;function Z2(n){to||(to=Y2()||{},HS=to.style?"WebkitAppearance"in to.style:!1);let t=!0;return to.style&&!K2(n)&&(t=n in to.style,!t&&HS&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in to.style)),t}function Y2(){return typeof document<"u"?document.body:null}function nD(n,t){for(;t;){if(t===n)return!0;t=Ov(t)}return!1}function rD(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let r=n.querySelector(t);return r?[r]:[]}var Rv=(()=>{class n{validateStyleProperty(e){return Z2(e)}containsElement(e,r){return nD(e,r)}getParentElement(e){return Ov(e)}query(e,r,i){return rD(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,o,s,a=[],l){return new li(i,o)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})(),io=class{static NOOP=new Rv},oo=class{};var J2=1e3,iD="{{",X2="}}",oD="ng-enter",vv="ng-leave",Yd="ng-trigger",nf=".ng-trigger",zS="ng-animating",_v=".ng-animating";function Mr(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:yv(parseFloat(t[1]),t[2])}function yv(n,t){switch(t){case"s":return n*J2;default:return n}}function rf(n,t,e){return n.hasOwnProperty("duration")?n:eV(n,t,e)}function eV(n,t,e){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,o=0,s="";if(typeof n=="string"){let a=n.match(r);if(a===null)return t.push(BS(n)),{duration:0,delay:0,easing:""};i=yv(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=yv(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else i=n;if(!e){let a=!1,l=t.length;i<0&&(t.push(v2()),a=!0),o<0&&(t.push(_2()),a=!0),a&&t.splice(l,0,BS(n))}return{duration:i,delay:o,easing:s}}function tV(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function Jn(n,t,e){t.forEach((r,i)=>{let o=Fv(i);e&&!e.has(i)&&e.set(i,n.style[o]),n.style[o]=r})}function ro(n,t){t.forEach((e,r)=>{let i=Fv(r);n.style[i]=""})}function rl(n){return Array.isArray(n)?n.length==1?n[0]:US(n):n}function nV(n,t,e){let r=t.params||{},i=sD(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||e.push(y2(o))})}var bv=new RegExp(`${iD}\\s*(.+?)\\s*${X2}`,"g");function sD(n){let t=[];if(typeof n=="string"){let e;for(;e=bv.exec(n);)t.push(e[1]);bv.lastIndex=0}return t}function ol(n,t,e){let r=`${n}`,i=r.replace(bv,(o,s)=>{let a=t[s];return a==null&&(e.push(b2(s)),a=""),a.toString()});return i==r?n:i}var rV=/-+([a-z0-9])/g;function Fv(n){return n.replace(rV,(...t)=>t[1].toUpperCase())}function iV(n,t){return n===0||t===0}function oV(n,t,e){if(e.size&&t.length){let r=t[0],i=[];if(e.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<t.length;o++){let s=t[o];i.forEach(a=>s.set(a,Lv(n,a)))}}return t}function Kt(n,t,e){switch(t.type){case fe.Trigger:return n.visitTrigger(t,e);case fe.State:return n.visitState(t,e);case fe.Transition:return n.visitTransition(t,e);case fe.Sequence:return n.visitSequence(t,e);case fe.Group:return n.visitGroup(t,e);case fe.Animate:return n.visitAnimate(t,e);case fe.Keyframes:return n.visitKeyframes(t,e);case fe.Style:return n.visitStyle(t,e);case fe.Reference:return n.visitReference(t,e);case fe.AnimateChild:return n.visitAnimateChild(t,e);case fe.AnimateRef:return n.visitAnimateRef(t,e);case fe.Query:return n.visitQuery(t,e);case fe.Stagger:return n.visitStagger(t,e);default:throw w2(t.type)}}function Lv(n,t){return window.getComputedStyle(n)[t]}var sV=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),of=class extends oo{normalizePropertyName(t,e){return Fv(t)}normalizeStyleValue(t,e,r,i){let o="",s=r.toString().trim();if(sV.has(e)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(C2(t,r))}return s+o}};var sf="*";function aV(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>lV(r,e,t)):e.push(n),e}function lV(n,t,e){if(n[0]==":"){let l=cV(n,e);if(typeof l=="function"){t.push(l);return}n=l}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return e.push(O2(n)),t;let i=r[1],o=r[2],s=r[3];t.push(qS(i,s));let a=i==sf&&s==sf;o[0]=="<"&&!a&&t.push(qS(s,i))}function cV(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(R2(n)),"* => *"}}var Jd=new Set(["true","1"]),Xd=new Set(["false","0"]);function qS(n,t){let e=Jd.has(n)||Xd.has(n),r=Jd.has(t)||Xd.has(t);return(i,o)=>{let s=n==sf||n==i,a=t==sf||t==o;return!s&&e&&typeof i=="boolean"&&(s=i?Jd.has(n):Xd.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?Jd.has(t):Xd.has(t)),s&&a}}var aD=":self",uV=new RegExp(`s*${aD}s*,?`,"g");function lD(n,t,e,r){return new wv(n).build(t,e,r)}var WS="",wv=class{_driver;constructor(t){this._driver=t}build(t,e,r){let i=new Cv(e);return this._resetContextStyleTimingState(i),Kt(this,rl(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector=WS,t.collectedStyles=new Map,t.collectedStyles.set(WS,new Map),t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0,o=[],s=[];return t.name.charAt(0)=="@"&&e.errors.push(E2()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==fe.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(f=>{l.name=f,o.push(this.visitState(l,e))}),l.name=c}else if(a.type==fe.Transition){let l=this.visitTransition(a,e);r+=l.queryCount,i+=l.depCount,s.push(l)}else e.errors.push(S2())}),{type:fe.Trigger,name:t.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(t,e){let r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{sD(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&e.errors.push(D2(t.name,[...o.values()]))}return{type:fe.State,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let r=Kt(this,rl(t.animation),e),i=aV(t.expr,e.errors);return{type:fe.Transition,matchers:i,animation:r,queryCount:e.queryCount,depCount:e.depCount,options:no(t.options)}}visitSequence(t,e){return{type:fe.Sequence,steps:t.steps.map(r=>Kt(this,r,e)),options:no(t.options)}}visitGroup(t,e){let r=e.currentTime,i=0,o=t.steps.map(s=>{e.currentTime=r;let a=Kt(this,s,e);return i=Math.max(i,e.currentTime),a});return e.currentTime=i,{type:fe.Group,steps:o,options:no(t.options)}}visitAnimate(t,e){let r=pV(t.timings,e.errors);e.currentAnimateTimings=r;let i,o=t.styles?t.styles:uv({});if(o.type==fe.Keyframes)i=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;let c={};r.easing&&(c.easing=r.easing),s=uv(c)}e.currentTime+=r.duration+r.delay;let l=this.visitStyle(s,e);l.isEmptyStep=a,i=l}return e.currentAnimateTimings=null,{type:fe.Animate,timings:r,style:i,options:null}}visitStyle(t,e){let r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){let r=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of i)typeof a=="string"?a===Yn?r.push(a):e.errors.push(I2(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(iD)>=0){o=!0;break}}}),{type:fe.Style,styles:r,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){let r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=e.collectedStyles.get(e.currentQuerySelector),f=c.get(l),p=!0;f&&(o!=i&&o>=f.startTime&&i<=f.endTime&&(e.errors.push(x2(l,f.startTime,f.endTime,o,i)),p=!1),o=f.startTime),p&&c.set(l,{startTime:o,endTime:i}),e.options&&nV(a,e.options,e.errors)})})}visitKeyframes(t,e){let r={type:fe.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(T2()),r;let i=1,o=0,s=[],a=!1,l=!1,c=0,f=t.steps.map(N=>{let F=this._makeStyleAst(N,e),V=F.offset!=null?F.offset:hV(F.styles),H=0;return V!=null&&(o++,H=F.offset=V),l=l||H<0||H>1,a=a||H<c,c=H,s.push(H),F});l&&e.errors.push(M2()),a&&e.errors.push(A2());let p=t.steps.length,v=0;o>0&&o<p?e.errors.push(k2()):o==0&&(v=i/(p-1));let g=p-1,y=e.currentTime,w=e.currentAnimateTimings,E=w.duration;return f.forEach((N,F)=>{let V=v>0?F==g?1:v*F:s[F],H=V*E;e.currentTime=y+w.delay+H,w.duration=H,this._validateStyleAst(N,e),N.offset=V,r.styles.push(N)}),r}visitReference(t,e){return{type:fe.Reference,animation:Kt(this,rl(t.animation),e),options:no(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:fe.AnimateChild,options:no(t.options)}}visitAnimateRef(t,e){return{type:fe.AnimateRef,animation:this.visitReference(t.animation,e),options:no(t.options)}}visitQuery(t,e){let r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;let[o,s]=dV(t.selector);e.currentQuerySelector=r.length?r+" "+o:o,Zt(e.collectedStyles,e.currentQuerySelector,new Map);let a=Kt(this,rl(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:fe.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:no(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(N2());let r=t.timings==="full"?{duration:0,delay:0,easing:"full"}:rf(t.timings,e.errors,!0);return{type:fe.Stagger,animation:Kt(this,rl(t.animation),e),timings:r,options:null}}};function dV(n){let t=!!n.split(/\s*,\s*/).find(e=>e==aD);return t&&(n=n.replace(uV,"")),n=n.replace(/@\*/g,nf).replace(/@\w+/g,e=>nf+"-"+e.slice(1)).replace(/:animating/g,_v),[n,t]}function fV(n){return n?k({},n):null}var Cv=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function hV(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let r=e;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function pV(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=rf(n,t).duration;return fv(o,0,"")}let e=n;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=fv(0,0,"");return o.dynamic=!0,o.strValue=e,o}let i=rf(e,t);return fv(i.duration,i.delay,i.easing)}function no(n){return n?(n=k({},n),n.params&&(n.params=fV(n.params))):n={},n}function fv(n,t,e){return{duration:n,delay:t,easing:e}}function Vv(n,t,e,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var sl=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},mV=1,gV=":enter",vV=new RegExp(gV,"g"),_V=":leave",yV=new RegExp(_V,"g");function cD(n,t,e,r,i,o=new Map,s=new Map,a,l,c=[]){return new Ev().buildKeyframes(n,t,e,r,i,o,s,a,l,c)}var Ev=class{buildKeyframes(t,e,r,i,o,s,a,l,c,f=[]){c=c||new sl;let p=new Sv(t,e,c,i,o,f,[]);p.options=l;let v=l.delay?Mr(l.delay):0;p.currentTimeline.delayNextStep(v),p.currentTimeline.setStyles([s],null,p.errors,l),Kt(this,r,p);let g=p.timelines.filter(y=>y.containsAnimation());if(g.length&&a.size){let y;for(let w=g.length-1;w>=0;w--){let E=g[w];if(E.element===e){y=E;break}}y&&!y.allowOnlyTimelineStyles()&&y.setStyles([a],null,p.errors,l)}return g.length?g.map(y=>y.buildKeyframes()):[Vv(e,[],[],[],0,v,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let r=e.subInstructions.get(e.element);if(r){let i=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){let r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,r),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,r){for(let i of t){let o=i?.delay;if(o){let s=typeof o=="number"?o:Mr(ol(o,i?.params??{},e.errors));r.delayNextStep(s)}}}_visitSubInstructions(t,e,r){let o=e.currentTimeline.currentTime,s=r.duration!=null?Mr(r.duration):null,a=r.delay!=null?Mr(r.delay):null;return s!==0&&t.forEach(l=>{let c=e.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),Kt(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==fe.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=af);let s=Mr(o.delay);i.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>Kt(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?Mr(t.options.delay):0;t.steps.forEach(s=>{let a=e.createSubContext(t.options);o&&a.delayNextStep(o),Kt(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let r=t.strValue,i=e.params?ol(r,e.params,e.errors):r;return rf(i,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());let o=t.style;o.type==fe.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(r.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(o):r.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let r=e.currentAnimateTimings,i=e.currentTimeline.duration,o=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,t.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(i+o),e.previousNode=t}visitQuery(t,e){let r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?Mr(i.delay):0;o&&(e.previousNode.type===fe.Style||r==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=af);let s=r,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,f)=>{e.currentQueryIndex=f;let p=e.createSubContext(t.options,c);o&&p.delayNextStep(o),c===e.element&&(l=p.currentTimeline),Kt(this,t.animation,p),p.currentTimeline.applyStylesToKeyframe();let v=p.currentTimeline.currentTime;s=Math.max(s,v)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let r=e.parentContext,i=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1),l=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime;break}let f=e.currentTimeline;l&&f.delayNextStep(l);let p=f.currentTime;Kt(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-p+(i.startTime-r.currentTimeline.startTime)}},af={},Sv=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=af;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,r,i,o,s,a,l){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new lf(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let r=t,i=this.options;r.duration!=null&&(i.duration=Mr(r.duration)),r.delay!=null&&(i.delay=Mr(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=ol(o[a],s,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){let i=e||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=af,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){let i={duration:e??t.duration,delay:this.currentTimeline.currentTime+(r??0)+t.delay,easing:""},o=new Dv(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,o,s){let a=[];if(i&&a.push(this.element),t.length>0){t=t.replace(vV,"."+this._enterClassName),t=t.replace(yV,"."+this._leaveClassName);let l=r!=1,c=this._driver.query(this.element,t,l);r!==0&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!o&&a.length==0&&s.push(P2(e)),a}},lf=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=mV,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||Yn),this._currentKeyframe.set(e,Yn);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&this._previousKeyframe.set("easing",e);let o=i&&i.params||{},s=bV(t,this._globalTimelineStyles);for(let[a,l]of s){let c=ol(l,o,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Yn),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,r)=>{let i=this._styleSummary.get(r);(!i||e.time>i.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((f,p)=>{f===Zd?t.add(p):f===Yn&&e.add(p)}),r||c.set("offset",l/this.duration),i.push(c)});let o=[...t.values()],s=[...e.values()];if(r){let a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return Vv(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},Dv=class extends lf{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,r,i,o,s,a=!1){super(t,e,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],s=r+e,a=e/s,l=new Map(t[0]);l.set("offset",0),o.push(l);let c=new Map(t[0]);c.set("offset",GS(a)),o.push(c);let f=t.length-1;for(let p=1;p<=f;p++){let v=new Map(t[p]),g=v.get("offset"),y=e+g*r;v.set("offset",GS(y/s)),o.push(v)}r=s,e=0,i="",t=o}return Vv(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}};function GS(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function bV(n,t){let e=new Map,r;return n.forEach(i=>{if(i==="*"){r??=t.keys();for(let o of r)e.set(o,Yn)}else for(let[o,s]of i)e.set(o,s)}),e}function QS(n,t,e,r,i,o,s,a,l,c,f,p,v){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:f,totalTime:p,errors:v}}var hv={},cf=class{_triggerName;ast;_stateStyles;constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return wV(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){let i=this._stateStyles.get("*");return t!==void 0&&(i=this._stateStyles.get(t?.toString())||i),i?i.buildStyles(e,r):new Map}build(t,e,r,i,o,s,a,l,c,f){let p=[],v=this.ast.options&&this.ast.options.params||hv,g=a&&a.params||hv,y=this.buildStyles(r,g,p),w=l&&l.params||hv,E=this.buildStyles(i,w,p),N=new Set,F=new Map,V=new Map,H=i==="void",W={params:uD(w,v),delay:this.ast.options?.delay},Ve=f?[]:cD(t,e,this.ast.animation,o,s,y,E,W,c,p),He=0;return Ve.forEach(at=>{He=Math.max(at.duration+at.delay,He)}),p.length?QS(e,this._triggerName,r,i,H,y,E,[],[],F,V,He,p):(Ve.forEach(at=>{let ui=at.element,so=Zt(F,ui,new Set);at.preStyleProps.forEach(di=>so.add(di));let jv=Zt(V,ui,new Set);at.postStyleProps.forEach(di=>jv.add(di)),ui!==e&&N.add(ui)}),QS(e,this._triggerName,r,i,H,y,E,Ve,[...N.values()],F,V,He))}};function wV(n,t,e,r,i){return n.some(o=>o(t,e,r,i))}function uD(n,t){let e=k({},t);return Object.entries(n).forEach(([r,i])=>{i!=null&&(e[r]=i)}),e}var Iv=class{styles;defaultParams;normalizer;constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){let r=new Map,i=uD(t,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=ol(s,i,e));let l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),r.set(a,s)})}),r}};function CV(n,t,e){return new xv(n,t,e)}var xv=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,e.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new Iv(i.style,o,r))}),KS(this.states,"true","1"),KS(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new cf(t,i,this.states))}),this.fallbackTransition=EV(t,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(s=>s.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}};function EV(n,t,e){let r=[(s,a)=>!0],i={type:fe.Sequence,steps:[],options:null},o={type:fe.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new cf(n,o,t)}function KS(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var SV=new sl,Tv=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r}register(t,e){let r=[],i=[],o=lD(this._driver,e,r,i);if(r.length)throw V2(r);this._animations.set(t,o)}_buildPlayer(t,e,r){let i=t.element,o=tD(this._normalizer,t.keyframes,e,r);return this._driver.animate(i,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){let i=[],o=this._animations.get(t),s,a=new Map;if(o?(s=cD(this._driver,e,o,oD,vv,new Map,new Map,r,SV,i),s.forEach(f=>{let p=Zt(a,f.element,new Map);f.postStyleProps.forEach(v=>p.set(v,null))})):(i.push(j2()),s=[]),i.length)throw U2(i);a.forEach((f,p)=>{f.forEach((v,g)=>{f.set(g,this._driver.computeStyle(p,g,Yn))})});let l=s.map(f=>{let p=a.get(f.element);return this._buildPlayer(f,new Map,p)}),c=ci(l);return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw B2(t);return e}listen(t,e,r,i){let o=Pv(e,"","","");return Nv(this._getPlayer(t),r,o,i),()=>{}}command(t,e,r,i){if(r=="register"){this.register(t,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(t,e,s);return}let o=this._getPlayer(t);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t);break}}},ZS="ng-animate-queued",DV=".ng-animate-queued",pv="ng-animate-disabled",IV=".ng-animate-disabled",xV="ng-star-inserted",TV=".ng-star-inserted",MV=[],dD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},AV={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Mn="__ng_removed",al=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let r=t&&t.hasOwnProperty("value"),i=r?t.value:t;if(this.value=NV(i),r){let o=t,{value:s}=o,a=ao(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let r=this.options.params;Object.keys(e).forEach(i=>{r[i]==null&&(r[i]=e[i])})}}},il="void",mv=new al(il),Mv=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this._hostClassName="ng-tns-"+t,fn(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.has(e))throw $2(r,e);if(r==null||r.length==0)throw H2(e);if(!PV(r))throw z2(r,e);let o=Zt(this._elementListeners,t,[]),s={name:e,phase:r,callback:i};o.push(s);let a=Zt(this._engine.statesByElement,t,new Map);return a.has(e)||(fn(t,Yd),fn(t,Yd+"-"+e),a.set(e,mv)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw q2(t);return e}trigger(t,e,r,i=!0){let o=this._getTrigger(e),s=new ll(this.id,e,t),a=this._engine.statesByElement.get(t);a||(fn(t,Yd),fn(t,Yd+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e),c=new al(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=mv),!(c.value===il)&&l.value===c.value){if(!FV(l.params,c.params)){let w=[],E=o.matchStyles(l.value,l.params,w),N=o.matchStyles(c.value,c.params,w);w.length?this._engine.reportError(w):this._engine.afterFlush(()=>{ro(t,E),Jn(t,N)})}return}let v=Zt(this._engine.playersByElement,t,[]);v.forEach(w=>{w.namespaceId==this.id&&w.triggerName==e&&w.queued&&w.destroy()});let g=o.matchTransition(l.value,c.value,t,c.params),y=!1;if(!g){if(!i)return;g=o.fallbackTransition,y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:g,fromState:l,toState:c,player:s,isFallbackTransition:y}),y||(fn(t,ZS),s.onStart(()=>{ys(t,ZS)})),s.onDone(()=>{let w=this.players.indexOf(s);w>=0&&this.players.splice(w,1);let E=this._engine.playersByElement.get(t);if(E){let N=E.indexOf(s);N>=0&&E.splice(N,1)}}),this.players.push(s),v.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let r=this._engine.driver.query(t,nf,!0);r.forEach(i=>{if(i[Mn])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){let o=this._engine.statesByElement.get(t),s=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let f=this.trigger(t,c,il,i);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),r&&ci(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){let i=new Set;e.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let l=this._triggers.get(s).fallbackTransition,c=r.get(s)||mv,f=new al(il),p=new ll(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:c,toState:f,player:p,isFallbackTransition:!0})})}}removeNode(t,e){let r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else{let s=t;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{let o=t[Mn];(!o||o===dD)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){fn(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let l=Pv(o,r.triggerName,r.fromState.value,r.toState.value);l._data=t,Nv(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},Av=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){let r=new Mv(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let l=i.get(a);if(l){let c=r.indexOf(l);r.splice(c+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(t);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,r=this.statesByElement.get(t);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&e.add(o)}}return e}trigger(t,e,r,i){if(ef(e)){let o=this._fetchNamespace(t);if(o)return o.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!ef(e))return;let o=e[Mn];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){let s=this._fetchNamespace(t);s&&s.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),fn(t,pv)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),ys(t,pv))}removeNode(t,e,r){if(ef(e)){let i=t?this._fetchNamespace(t):null;i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r);let o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,r,i,o){this.collectedLeaveElements.push(e),e[Mn]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,r,i,o){return ef(e)?this._fetchNamespace(t).listen(e,r,i,o):()=>{}}_buildInstruction(t,e,r,i,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,nf,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,_v,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return ci(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[Mn];if(e&&e.setForRemoval){if(t[Mn]=dD,e.namespaceId){this.destroyInnerAnimations(t);let r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(pv)&&this.markElementAsDisabled(t,!1),this.driver.query(t,IV,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];fn(i,xV)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],e.length?ci(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw W2(t)}_flushAnimations(t,e){let r=new sl,i=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,f=new Set;this.disabledNodes.forEach(j=>{f.add(j);let $=this.driver.query(j,DV,!0);for(let G=0;G<$.length;G++)f.add($[G])});let p=this.bodyNode,v=Array.from(this.statesByElement.keys()),g=XS(v,this.collectedEnterElements),y=new Map,w=0;g.forEach((j,$)=>{let G=oD+w++;y.set($,G),j.forEach(ve=>fn(ve,G))});let E=[],N=new Set,F=new Set;for(let j=0;j<this.collectedLeaveElements.length;j++){let $=this.collectedLeaveElements[j],G=$[Mn];G&&G.setForRemoval&&(E.push($),N.add($),G.hasAnimation?this.driver.query($,TV,!0).forEach(ve=>N.add(ve)):F.add($))}let V=new Map,H=XS(v,Array.from(N));H.forEach((j,$)=>{let G=vv+w++;V.set($,G),j.forEach(ve=>fn(ve,G))}),t.push(()=>{g.forEach((j,$)=>{let G=y.get($);j.forEach(ve=>ys(ve,G))}),H.forEach((j,$)=>{let G=V.get($);j.forEach(ve=>ys(ve,G))}),E.forEach(j=>{this.processLeaveNode(j)})});let W=[],Ve=[];for(let j=this._namespaceList.length-1;j>=0;j--)this._namespaceList[j].drainQueuedTransitions(e).forEach(G=>{let ve=G.player,tt=G.element;if(W.push(ve),this.collectedEnterElements.length){let lt=tt[Mn];if(lt&&lt.setForMove){if(lt.previousTriggersValues&&lt.previousTriggersValues.has(G.triggerName)){let fi=lt.previousTriggersValues.get(G.triggerName),Yt=this.statesByElement.get(G.element);if(Yt&&Yt.has(G.triggerName)){let cl=Yt.get(G.triggerName);cl.value=fi,Yt.set(G.triggerName,cl)}}ve.destroy();return}}let An=!p||!this.driver.containsElement(p,tt),Rt=V.get(tt),Ar=y.get(tt),Re=this._buildInstruction(G,r,Ar,Rt,An);if(Re.errors&&Re.errors.length){Ve.push(Re);return}if(An){ve.onStart(()=>ro(tt,Re.fromStyles)),ve.onDestroy(()=>Jn(tt,Re.toStyles)),i.push(ve);return}if(G.isFallbackTransition){ve.onStart(()=>ro(tt,Re.fromStyles)),ve.onDestroy(()=>Jn(tt,Re.toStyles)),i.push(ve);return}let $v=[];Re.timelines.forEach(lt=>{lt.stretchStartingKeyframe=!0,this.disabledNodes.has(lt.element)||$v.push(lt)}),Re.timelines=$v,r.append(tt,Re.timelines);let vD={instruction:Re,player:ve,element:tt};s.push(vD),Re.queriedElements.forEach(lt=>Zt(a,lt,[]).push(ve)),Re.preStyleProps.forEach((lt,fi)=>{if(lt.size){let Yt=l.get(fi);Yt||l.set(fi,Yt=new Set),lt.forEach((cl,gf)=>Yt.add(gf))}}),Re.postStyleProps.forEach((lt,fi)=>{let Yt=c.get(fi);Yt||c.set(fi,Yt=new Set),lt.forEach((cl,gf)=>Yt.add(gf))})});if(Ve.length){let j=[];Ve.forEach($=>{j.push(G2($.triggerName,$.errors))}),W.forEach($=>$.destroy()),this.reportError(j)}let He=new Map,at=new Map;s.forEach(j=>{let $=j.element;r.has($)&&(at.set($,$),this._beforeAnimationBuild(j.player.namespaceId,j.instruction,He))}),i.forEach(j=>{let $=j.element;this._getPreviousPlayers($,!1,j.namespaceId,j.triggerName,null).forEach(ve=>{Zt(He,$,[]).push(ve),ve.destroy()})});let ui=E.filter(j=>eD(j,l,c)),so=new Map;JS(so,this.driver,F,c,Yn).forEach(j=>{eD(j,l,c)&&ui.push(j)});let di=new Map;g.forEach((j,$)=>{JS(di,this.driver,new Set(j),l,Zd)}),ui.forEach(j=>{let $=so.get(j),G=di.get(j);so.set(j,new Map([...$?.entries()??[],...G?.entries()??[]]))});let mf=[],Uv=[],Bv={};s.forEach(j=>{let{element:$,player:G,instruction:ve}=j;if(r.has($)){if(f.has($)){G.onDestroy(()=>Jn($,ve.toStyles)),G.disabled=!0,G.overrideTotalTime(ve.totalTime),i.push(G);return}let tt=Bv;if(at.size>1){let Rt=$,Ar=[];for(;Rt=Rt.parentNode;){let Re=at.get(Rt);if(Re){tt=Re;break}Ar.push(Rt)}Ar.forEach(Re=>at.set(Re,tt))}let An=this._buildAnimation(G.namespaceId,ve,He,o,di,so);if(G.setRealPlayer(An),tt===Bv)mf.push(G);else{let Rt=this.playersByElement.get(tt);Rt&&Rt.length&&(G.parentPlayer=ci(Rt)),i.push(G)}}else ro($,ve.fromStyles),G.onDestroy(()=>Jn($,ve.toStyles)),Uv.push(G),f.has($)&&i.push(G)}),Uv.forEach(j=>{let $=o.get(j.element);if($&&$.length){let G=ci($);j.setRealPlayer(G)}}),i.forEach(j=>{j.parentPlayer?j.syncPlayerEvents(j.parentPlayer):j.destroy()});for(let j=0;j<E.length;j++){let $=E[j],G=$[Mn];if(ys($,vv),G&&G.hasAnimation)continue;let ve=[];if(a.size){let An=a.get($);An&&An.length&&ve.push(...An);let Rt=this.driver.query($,_v,!0);for(let Ar=0;Ar<Rt.length;Ar++){let Re=a.get(Rt[Ar]);Re&&Re.length&&ve.push(...Re)}}let tt=ve.filter(An=>!An.destroyed);tt.length?OV(this,$,tt):this.processLeaveNode($)}return E.length=0,mf.forEach(j=>{this.players.push(j),j.onDone(()=>{j.destroy();let $=this.players.indexOf(j);this.players.splice($,1)}),j.play()}),mf}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,o){let s=[];if(e){let a=this.playersByQueriedElement.get(t);a&&(s=a)}else{let a=this.playersByElement.get(t);if(a){let l=!o||o==il;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||s.push(c)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(t,e,r){let i=e.triggerName,o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:i;for(let l of e.timelines){let c=l.element,f=c!==o,p=Zt(r,c,[]);this._getPreviousPlayers(c,f,s,a,e.toState).forEach(g=>{let y=g.getRealPlayer();y.beforeDestroy&&y.beforeDestroy(),g.destroy(),p.push(g)})}ro(o,e.fromStyles)}_buildAnimation(t,e,r,i,o,s){let a=e.triggerName,l=e.element,c=[],f=new Set,p=new Set,v=e.timelines.map(y=>{let w=y.element;f.add(w);let E=w[Mn];if(E&&E.removedBeforeQueried)return new li(y.duration,y.delay);let N=w!==l,F=RV((r.get(w)||MV).map(He=>He.getRealPlayer())).filter(He=>{let at=He;return at.element?at.element===w:!1}),V=o.get(w),H=s.get(w),W=tD(this._normalizer,y.keyframes,V,H),Ve=this._buildPlayer(y,W,F);if(y.subTimeline&&i&&p.add(w),N){let He=new ll(t,a,w);He.setRealPlayer(Ve),c.push(He)}return Ve});c.forEach(y=>{Zt(this.playersByQueriedElement,y.element,[]).push(y),y.onDone(()=>kV(this.playersByQueriedElement,y.element,y))}),f.forEach(y=>fn(y,zS));let g=ci(v);return g.onDestroy(()=>{f.forEach(y=>ys(y,zS)),Jn(l,e.toStyles)}),p.forEach(y=>{Zt(i,y,[]).push(g)}),g}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new li(t.duration,t.delay)}},ll=class{namespaceId;triggerName;element;_player=new li;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,r)=>{e.forEach(i=>Nv(t,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Zt(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function kV(n,t,e){let r=n.get(t);if(r){if(r.length){let i=r.indexOf(e);r.splice(i,1)}r.length==0&&n.delete(t)}return r}function NV(n){return n??null}function ef(n){return n&&n.nodeType===1}function PV(n){return n=="start"||n=="done"}function YS(n,t){let e=n.style.display;return n.style.display=t??"none",e}function JS(n,t,e,r,i){let o=[];e.forEach(l=>o.push(YS(l)));let s=[];r.forEach((l,c)=>{let f=new Map;l.forEach(p=>{let v=t.computeStyle(c,p,i);f.set(p,v),(!v||v.length==0)&&(c[Mn]=AV,s.push(c))}),n.set(c,f)});let a=0;return e.forEach(l=>YS(l,o[a++])),s}function XS(n,t){let e=new Map;if(n.forEach(a=>e.set(a,[])),t.length==0)return e;let r=1,i=new Set(t),o=new Map;function s(a){if(!a)return r;let l=o.get(a);if(l)return l;let c=a.parentNode;return e.has(c)?l=c:i.has(c)?l=r:l=s(c),o.set(a,l),l}return t.forEach(a=>{let l=s(a);l!==r&&e.get(l).push(a)}),e}function fn(n,t){n.classList?.add(t)}function ys(n,t){n.classList?.remove(t)}function OV(n,t,e){ci(e).onDone(()=>n.processLeaveNode(t))}function RV(n){let t=[];return fD(n,t),t}function fD(n,t){for(let e=0;e<n.length;e++){let r=n[e];r instanceof nl?fD(r.players,t):t.push(r)}}function FV(n,t){let e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){let o=e[i];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}function eD(n,t,e){let r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(o=>i.add(o)):t.set(n,r),e.delete(n),!0}var bs=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,r){this._driver=e,this._normalizer=r,this._transitionEngine=new Av(t.body,e,r),this._timelineEngine=new Tv(t.body,e,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(t,e,r,i,o){let s=t+"-"+i,a=this._triggerCache[s];if(!a){let l=[],c=[],f=lD(this._driver,o,l,c);if(l.length)throw F2(i,l);a=CV(i,f,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,i,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r){this._transitionEngine.removeNode(t,e,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if(r.charAt(0)=="@"){let[o,s]=$S(r),a=i;this._timelineEngine.command(o,e,s,a)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,o){if(r.charAt(0)=="@"){let[s,a]=$S(r);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,r,i,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function LV(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=gv(t[0]),t.length>1&&(r=gv(t[t.length-1]))):t instanceof Map&&(e=gv(t)),e||r?new VV(n,e,r):null}var VV=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Jn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Jn(this._element,this._initialStyles),this._endStyles&&(Jn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ro(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ro(this._element,this._endStyles),this._endStyles=null),Jn(this._element,this._initialStyles),this._state=3)}}return n})();function gv(n){let t=null;return n.forEach((e,r)=>{jV(r)&&(t=t||new Map,t.set(r,e))}),t}function jV(n){return n==="display"||n==="position"}var uf=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(t,e,r){return t.animate(this._convertKeyframesToObject(e),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&t.set(i,this._finished?r:Lv(this.element,i))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},df=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return nD(t,e)}getParentElement(t){return Ov(t)}query(t,e,r){return rD(t,e,r)}computeStyle(t,e,r){return Lv(t,e)}animate(t,e,r,i,o,s=[]){let a=i==0?"both":"forwards",l={duration:r,delay:i,fill:a};o&&(l.easing=o);let c=new Map,f=s.filter(g=>g instanceof uf);iV(r,i)&&f.forEach(g=>{g.currentSnapshot.forEach((y,w)=>c.set(w,y))});let p=tV(e).map(g=>new Map(g));p=oV(t,p,c);let v=LV(t,p);return new uf(t,p,l,v)}};var tf="@",hD="@.disabled",ff=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,r,i){this.namespaceId=t,this.delegate=e,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){e.charAt(0)==tf&&e==hD?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r,i){return this.delegate.listen(t,e,r,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},kv=class extends ff{factory;constructor(t,e,r,i,o){super(e,r,i,o),this.factory=t,this.namespaceId=e}setProperty(t,e,r){e.charAt(0)==tf?e.charAt(1)=="."&&e==hD?(r=r===void 0?!0:!!r,this.disableAnimations(t,r)):this.engine.process(this.namespaceId,t,e.slice(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r,i){if(e.charAt(0)==tf){let o=UV(t),s=e.slice(1),a="";return s.charAt(0)!=tf&&([s,a]=BV(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,r,l)})}return this.delegate.listen(t,e,r,i)}};function UV(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function BV(n){let t=n.indexOf("."),e=n.substring(0,t),r=n.slice(t+1);return[e,r]}var hf=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,r){this.delegate=t,this.engine=e,this._zone=r,e.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(t,e){let r="",i=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let c=this._rendererCache,f=c.get(i);if(!f){let p=()=>c.delete(i);f=new ff(r,i,this.engine,p),c.set(i,f)}return f}let o=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,t);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,t,c.name,c)};return e.data.animation.forEach(a),new kv(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,r){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([e,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var HV=(()=>{class n extends bs{constructor(e,r,i){super(e,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(P(Oe),P(io),P(oo))};static \u0275prov=M({token:n,factory:n.\u0275fac})}return n})();function zV(){return new of}function qV(n,t,e){return new hf(n,t,e)}var pD=[{provide:oo,useFactory:zV},{provide:bs,useClass:HV},{provide:$r,useFactory:qV,deps:[vu,bs,De]}],WV=[{provide:io,useFactory:()=>new df},{provide:$c,useValue:"BrowserAnimations"},...pD],$7=[{provide:io,useClass:Rv},{provide:$c,useValue:"NoopAnimations"},...pD];function mD(){return _n("NgEagerAnimations"),[...WV]}var gD={providers:[lw(),jC(jS,UC()),Ww(Gw()),mD()]};function GV(n,t){n&1&&(Un(0),d(1,"div",2),R(2,"router-outlet"),u(),Bn())}function QV(n,t){n&1&&(d(0,"span"),h(1,"Dashboard"),u())}function KV(n,t){n&1&&(d(0,"span"),h(1,"Morning Check-In"),u())}function ZV(n,t){n&1&&(d(0,"span"),h(1,"Pre Trade Journal"),u())}function YV(n,t){n&1&&(d(0,"span"),h(1,"Trades"),u())}function JV(n,t){n&1&&(d(0,"span"),h(1,"Meditation Hub"),u())}function XV(n,t){n&1&&(d(0,"span"),h(1,"Analytics"),u())}function ej(n,t){n&1&&(d(0,"span"),h(1,"Trade Accounts"),u())}function tj(n,t){if(n&1){let e=J();d(0,"div",20)(1,"a",21),C("click",function(){S(e);let i=b(2);return i.navigateToUrl("/home"),D(i.onNavLinkClick())}),R(2,"i",22),A(3,QV,2,0,"span",0),u(),d(4,"a",21),C("click",function(){S(e);let i=b(2);return i.navigateToUrl("/emotions"),D(i.onNavLinkClick())}),R(5,"i",23),A(6,KV,2,0,"span",0),u(),d(7,"a",21),C("click",function(){S(e);let i=b(2);return i.navigateToUrl("/pretrade"),D(i.onNavLinkClick())}),R(8,"i",24),A(9,ZV,2,0,"span",0),u(),d(10,"a",21),C("click",function(){S(e);let i=b(2);return i.navigateToUrl("/tradejournal"),D(i.onNavLinkClick())}),R(11,"i",25),A(12,YV,2,0,"span",0),u(),d(13,"a",21),C("click",function(){S(e);let i=b(2);return i.navigateToUrl("/meditationhub"),D(i.onNavLinkClick())}),R(14,"i",26),A(15,JV,2,0,"span",0),u(),d(16,"a",21),C("click",function(){S(e);let i=b(2);return i.navigateToUrl("/analytics"),D(i.onNavLinkClick())}),R(17,"i",27),A(18,XV,2,0,"span",0),u(),d(19,"a",21),C("click",function(){S(e);let i=b(2);return i.navigateToUrl("/tradeaccounts"),D(i.onNavLinkClick())}),R(20,"i",28),A(21,ej,2,0,"span",0),u()()}if(n&2){let e=b(2);m(),Y("active",e.isActiveRoute("/home")),_("title",e.sidebarCollapsed()?"Dashboard":""),m(),Y("me-3",!e.sidebarCollapsed()),m(),_("ngIf",!e.sidebarCollapsed()),m(),Y("active",e.isActiveRoute("/emotions")),_("title",e.sidebarCollapsed()?"Morning Check-In":""),m(),Y("me-3",!e.sidebarCollapsed()),m(),_("ngIf",!e.sidebarCollapsed()),m(),Y("active",e.isActiveRoute("/pretrade")),_("title",e.sidebarCollapsed()?"Trade Journal":""),m(),Y("me-3",!e.sidebarCollapsed()),m(),_("ngIf",!e.sidebarCollapsed()),m(),Y("active",e.isActiveRoute("/tradejournal")),_("title",e.sidebarCollapsed()?"Trade Journal":""),m(),Y("me-3",!e.sidebarCollapsed()),m(),_("ngIf",!e.sidebarCollapsed()),m(),Y("active",e.isActiveRoute("/meditationhub")),_("title",e.sidebarCollapsed()?"Meditation Hub":""),m(),Y("me-3",!e.sidebarCollapsed()),m(),_("ngIf",!e.sidebarCollapsed()),m(),Y("active",e.isActiveRoute("/analytics")),_("title",e.sidebarCollapsed()?"Analytics":""),m(),Y("me-3",!e.sidebarCollapsed()),m(),_("ngIf",!e.sidebarCollapsed()),m(),Y("active",e.isActiveRoute("/tradeaccounts")),_("title",e.sidebarCollapsed()?"Trade Accounts":""),m(),Y("me-3",!e.sidebarCollapsed()),m(),_("ngIf",!e.sidebarCollapsed())}}function nj(n,t){if(n&1&&(d(0,"div"),R(1,"img",33),u()),n&2){let e=b(3);m(),Y("me-2",!e.sidebarCollapsed()),_("src",e.profile_image_blob_url,Vn)}}function rj(n,t){n&1&&(d(0,"div"),R(1,"i",34),u())}function ij(n,t){if(n&1&&(d(0,"div"),h(1," \xA0\xA0 "),d(2,"p",35),h(3),u()()),n&2){let e=b(3);m(3),ee("Welcome, ",e.user_firstname,"!")}}function oj(n,t){n&1&&(d(0,"span"),h(1,"Logout\xA0\xA0\xA0"),u())}function sj(n,t){if(n&1){let e=J();d(0,"div",29)(1,"div",30),C("click",function(){S(e);let i=b(2);return D(i.onNavLinkClick())}),A(2,nj,2,3,"div",0)(3,rj,2,0,"div",0)(4,ij,4,1,"div",0),u(),d(5,"button",31),C("click",function(){S(e);let i=b(2);return D(i.logOut())}),A(6,oj,2,0,"span",0),R(7,"i",32),u()()}if(n&2){let e=b(2);m(),Y("justify-content-center",e.sidebarCollapsed()),m(),_("ngIf",e.profile_image_blob_url),m(),_("ngIf",!e.profile_image_blob_url),m(),_("ngIf",!e.sidebarCollapsed()),m(),_("title",e.sidebarCollapsed()?"Logout":""),m(),_("ngIf",!e.sidebarCollapsed())}}function aj(n,t){if(n&1){let e=J();d(0,"div",36),C("click",function(){S(e);let i=b(2);return D(i.closeSidebar())}),u()}}function lj(n,t){if(n&1){let e=J();Un(0),d(1,"div",3)(2,"nav",4)(3,"div",5)(4,"div",6)(5,"button",7),C("click",function(){S(e);let i=b();return i.navigateToUrl("/home"),D(i.onNavLinkClick())}),d(6,"img",8),C("click",function(){S(e);let i=b();return i.navigateToUrl("/home"),D(i.onNavLinkClick())}),u()(),d(7,"button",9),C("click",function(){S(e);let i=b();return D(i.closeSidebar())}),u()(),A(8,tj,22,42,"div",10),u(),A(9,sj,8,7,"div",11),u(),A(10,aj,1,0,"div",12),d(11,"div",13)(12,"nav",14)(13,"div",15)(14,"div",16)(15,"button",17),C("click",function(){S(e);let i=b();return D(i.toggleSidebar())}),R(16,"span",18),u()()()(),d(17,"div",19),R(18,"router-outlet"),u()()(),Bn()}if(n&2){let e=b();m(2),Y("collapsed",e.sidebarCollapsed()),m(4),jn("height",e.sidebarCollapsed()?"40px":"90px"),m(2),_("ngIf",e.loginStatus()),m(),_("ngIf",e.loginStatus()),m(),_("ngIf",e.isMobile()&&!e.sidebarCollapsed()),m(),Y("expanded",e.sidebarCollapsed())}}var pf=class n{constructor(t,e,r,i,o,s,a){this.cdr=t;this.supabaseService=e;this.supabaseAuthService=r;this.supabaseAccountService=i;this.router=o;this.route=s;this.platformId=a;this.loginStatus=et(()=>e.loginStatus()),Kr(()=>{this.loginStatus()&&(this.route.queryParams.subscribe(l=>{let c=l.returnUrl;c?this.router.navigate([c]):(this.router.url==="/"||this.router.url==="/login")&&this.router.navigate(["/home"])}),this.loginStatus()&&!this.userProfileLoaded&&(this.userProfileLoaded=!0,this.loadUserProfile()))}),Mp(()=>{})}title="TR-prototype";profile_image_blob_url="";loginStatus;sidebarCollapsed=U(!1);isMobile=U(!1);user_firstname="";resizeObserver;userProfileLoaded=!1;async ngOnInit(){this.checkScreenSize(),on(this.platformId)&&(this.sidebarCollapsed.set(this.isMobile()),this.resizeObserver=new ResizeObserver(()=>{this.checkScreenSize(),this.cdr.detectChanges()}),this.resizeObserver.observe(document.body))}ngOnDestroy(){on(this.platformId)&&this.resizeObserver&&this.resizeObserver.disconnect()}async loadUserProfile(){let{data:t}=await this.supabaseAccountService.getProfile();t&&(this.user_firstname=t.firstname,t.profile_picture_url&&(this.profile_image_blob_url=await this.supabaseAccountService.getCachedProfilePictureBlobUrl(t.profile_picture_url)),this.cdr.markForCheck())}async logOut(){await this.supabaseAuthService.logout(),this.router.navigateByUrl("/")}toggleSidebar(){this.sidebarCollapsed.update(t=>!t),this.cdr.detectChanges()}navigateToUrl(t){this.router.navigateByUrl(t)}closeSidebar(){this.sidebarCollapsed.set(!0),this.cdr.detectChanges()}onNavLinkClick(){this.isMobile()&&this.closeSidebar()}isActiveRoute(t){return this.router.url===t||this.router.url.startsWith(t+"/")}checkScreenSize(){on(this.platformId)&&this.isMobile.set(window.innerWidth<768)}static \u0275fac=function(e){return new(e||n)(x(Ae),x(Ce),x(Zn),x(dn),x($e),x(Et),x(dt))};static \u0275cmp=K({type:n,selectors:[["app-root"]],decls:4,vars:2,consts:[[4,"ngIf"],["align","center",1,"m-5"],[1,"container-fluid","p-0"],[1,"sidebar-container"],["id","sidebar",1,"d-flex","flex-column","h-100"],[1,"p-3","flex-grow-1"],[1,"mb-3","d-flex","align-items-center"],[1,"text-decoration-none","me-auto","btn","btn-link","p-0","me-3",3,"click"],["src","/tr_logo.svg",1,"img-fluid",3,"click"],["type","button",1,"btn-close","d-md-none",3,"click"],["class","nav flex-column",4,"ngIf"],["class","p-3 border-top mt-auto",4,"ngIf"],["class","sidebar-overlay",3,"click",4,"ngIf"],[1,"content"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid"],[1,"d-flex","align-items-center"],[1,"btn","me-2",3,"click"],[1,"navbar-toggler-icon"],[1,"container-fluid","ps-3"],[1,"nav","flex-column"],[1,"nav-link",3,"click","title"],[1,"bi","bi-columns-gap"],[1,"bi","bi-brightness-high"],[1,"bi","bi-card-checklist"],[1,"bi","bi-bookmark-check"],[1,"bi","bi-person-arms-up"],[1,"bi","bi-clipboard-data"],[1,"bi","bi-journals"],[1,"p-3","border-top","mt-auto"],["routerLink","/useraccount",1,"d-flex","align-items-center","mb-2",2,"cursor","pointer",3,"click"],[1,"btn","btn-outline-secondary","btn-tr","w-100",3,"click","title"],[1,"bi","bi-box-arrow-right"],["alt","Profile",1,"rounded-circle",2,"width","40px","height","40px","object-fit","cover",3,"src"],[1,"bi","bi-person-circle","text-black",2,"font-size","30px"],[1,"text-black","mb-0"],[1,"sidebar-overlay",3,"click"]],template:function(e,r){e&1&&(A(0,GV,3,0,"ng-container",0)(1,lj,19,9,"ng-container",0),d(2,"footer",1),h(3,"\xA9 2025 Trading Rehab AI. All rights reserved."),u()),e&2&&(_("ngIf",!r.supabaseService.loginStatus()),m(),_("ngIf",r.supabaseService.loginStatus()))},dependencies:[ie,_e,fg,mt],styles:[".sidebar-container[_ngcontent-%COMP%]{display:flex;position:relative}#sidebar[_ngcontent-%COMP%]{width:250px;position:fixed;top:0;left:0;height:100dvh;z-index:999;background:#f8f9facc;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease-in-out;box-shadow:0 0 15px #0000001a;border-right:1px solid rgba(0,0,0,.05)}#sidebar.collapsed[_ngcontent-%COMP%]{width:88px}.content[_ngcontent-%COMP%]{width:calc(100% - 250px);margin-left:250px;transition:all .3s ease-in-out;min-height:100dvh;background-color:transparent}.content.expanded[_ngcontent-%COMP%]{width:calc(100% - 88px);margin-left:88px}@media (max-width: 768px){#sidebar[_ngcontent-%COMP%]{margin-left:-250px}#sidebar[_ngcontent-%COMP%]:not(.collapsed){margin-left:0}#sidebar.collapsed[_ngcontent-%COMP%]{margin-left:-250px}.content[_ngcontent-%COMP%], .content.expanded[_ngcontent-%COMP%]{width:100%;margin-left:0}}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 20px;color:#343a40;cursor:pointer;text-decoration:none;border-radius:12px;margin:4px 12px;font-weight:500;transition:background-color .2s ease,color .2s ease;position:relative}.nav-link[_ngcontent-%COMP%]:hover{background-color:#e9ecef;color:#000}.nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,#634aff,#9932ff);color:#fff!important;font-weight:600;box-shadow:0 4px 12px #634aff4d}.nav-link.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff!important}.nav-link.active[_ngcontent-%COMP%]:after{display:none}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:center;padding:0;margin:8px auto;width:52px;height:52px;border-radius:14px}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0!important;font-size:1.4em}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:background: linear-gradient(90deg,#634aff,#9932ff);color:#fff;box-shadow:0 2px 8px #0003}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background-color:#dee2e6}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:hover{background:#495057}#sidebar.collapsed[_ngcontent-%COMP%]   .p-3[_ngcontent-%COMP%], #sidebar.collapsed[_ngcontent-%COMP%]   .border-top[_ngcontent-%COMP%]{padding:1rem .5rem!important}.navbar[_ngcontent-%COMP%]{padding:15px 10px}.sidebar-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:998}.btn-tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}"]})};nC(pf,gD).catch(n=>console.error(n));
