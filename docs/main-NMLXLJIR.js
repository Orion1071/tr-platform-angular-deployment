import{b as Ev,c as Sv,f as X1,g as Dv}from"./chunk-65CJINC2.js";import{a as N,b as G,c as _o,e as fr,g as Y1,h as J1}from"./chunk-VOSPIT4N.js";var e0=fr(Xg=>{"use strict";Object.defineProperty(Xg,"__esModule",{value:!0});var Jg=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Xg.default=Jg});var n0=fr(qa=>{"use strict";var PE=qa&&qa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qa,"__esModule",{value:!0});var aR=PE((Dv(),J1(X1))),lR=PE(e0()),t0=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=aR.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var s,a,l;let d=null,p=null,m=null,y=o.status,v=o.statusText;if(o.ok){if(this.method!=="HEAD"){let A=await o.text();A===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=A:p=JSON.parse(A))}let C=(s=this.headers.Prefer)===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),x=(a=o.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");C&&x&&x.length>1&&(m=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(d={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,m=null,y=406,v="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{let C=await o.text();try{d=JSON.parse(C),Array.isArray(d)&&o.status===404&&(p=[],d=null,y=200,v="OK")}catch{o.status===404&&C===""?(y=204,v="No Content"):d={message:C}}if(d&&this.isMaybeSingle&&(!((l=d?.details)===null||l===void 0)&&l.includes("0 rows"))&&(d=null,y=200,v="OK"),d&&this.shouldThrowOnError)throw new lR.default(d)}return{error:d,data:p,count:m,status:y,statusText:v}});return this.shouldThrowOnError||(i=i.catch(o=>{var s,a,l;return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:`${(a=o?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=o?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}};qa.default=t0});var i0=fr(Ga=>{"use strict";var cR=Ga&&Ga.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ga,"__esModule",{value:!0});var uR=cR(n0()),r0=class extends uR.default{select(t){let e=!1,r=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:i,referencedTable:o=i}={}){let s=o?`${o}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:i=r}={}){let o=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:i=!1,wal:o=!1,format:s="text"}={}){var a;let l=[t?"analyze":null,e?"verbose":null,r?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${d}"; options=${l};`,s==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ga.default=r0});var od=fr(Wa=>{"use strict";var dR=Wa&&Wa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Wa,"__esModule",{value:!0});var fR=dR(i0()),o0=class extends fR.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");let s=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${o}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};Wa.default=o0});var a0=fr(Ka=>{"use strict";var pR=Ka&&Ka.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ka,"__esModule",{value:!0});var Qa=pR(od()),s0=class{constructor(t,{headers:e={},schema:r,fetch:i}){this.url=t,this.headers=e,this.schema=r,this.fetch=i}select(t,{head:e=!1,count:r}={}){let i=e?"HEAD":"GET",o=!1,s=(t??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",s),r&&(this.headers.Prefer=`count=${r}`),new Qa.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:r=!0}={}){let i="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),e&&o.push(`count=${e}`),r||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){let s=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(s.length>0){let a=[...new Set(s)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Qa.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:i,defaultToNull:o=!0}={}){let s="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),o||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){let l=t.reduce((d,p)=>d.concat(Object.keys(p)),[]);if(l.length>0){let d=[...new Set(l)].map(p=>`"${p}"`);this.url.searchParams.set("columns",d.join(","))}}return new Qa.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),e&&i.push(`count=${e}`),this.headers.Prefer=i.join(","),new Qa.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Qa.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ka.default=s0});var OE=fr(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});sd.version=void 0;sd.version="0.0.0-automated"});var RE=fr(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});ad.DEFAULT_HEADERS=void 0;var hR=OE();ad.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${hR.version}`}});var LE=fr(Za=>{"use strict";var FE=Za&&Za.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Za,"__esModule",{value:!0});var mR=FE(a0()),gR=FE(od()),vR=RE(),l0=class n{constructor(t,{headers:e={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},vR.DEFAULT_HEADERS),e),this.schemaName=r,this.fetch=i}from(t){let e=new URL(`${this.url}/${t}`);return new mR.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:i=!1,count:o}={}){let s,a=new URL(`${this.url}/rpc/${t}`),l;r||i?(s=r?"HEAD":"GET",Object.entries(e).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{a.searchParams.append(p,m)})):(s="POST",l=e);let d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new gR.default({method:s,url:a,headers:d,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Za.default=l0});var zE=fr(yt=>{"use strict";var us=yt&&yt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(yt,"__esModule",{value:!0});yt.PostgrestError=yt.PostgrestBuilder=yt.PostgrestTransformBuilder=yt.PostgrestFilterBuilder=yt.PostgrestQueryBuilder=yt.PostgrestClient=void 0;var VE=us(LE());yt.PostgrestClient=VE.default;var jE=us(a0());yt.PostgrestQueryBuilder=jE.default;var UE=us(od());yt.PostgrestFilterBuilder=UE.default;var BE=us(i0());yt.PostgrestTransformBuilder=BE.default;var $E=us(n0());yt.PostgrestBuilder=$E.default;var HE=us(e0());yt.PostgrestError=HE.default;yt.default={PostgrestClient:VE.default,PostgrestQueryBuilder:jE.default,PostgrestFilterBuilder:UE.default,PostgrestTransformBuilder:BE.default,PostgrestBuilder:$E.default,PostgrestError:HE.default}});function Iv(n,t){return Object.is(n,t)}var ot=null,Ls=!1,qf=1,Lt=Symbol("SIGNAL");function ye(n){let t=ot;return ot=n,t}function Tv(){return ot}function eD(){return Ls}var wi={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xl(n){if(Ls)throw new Error("");if(ot===null)return;ot.consumerOnSignalRead(n);let t=ot.nextProducerIndex++;if(Tl(ot),t<ot.producerNode.length&&ot.producerNode[t]!==n&&Vs(ot)){let e=ot.producerNode[t];Il(e,ot.producerIndexOfThis[t])}ot.producerNode[t]!==n&&(ot.producerNode[t]=n,ot.producerIndexOfThis[t]=Vs(ot)?Pv(n,ot,t):0),ot.producerLastReadVersion[t]=n.version}function tD(){qf++}function Mv(n){if(!(Vs(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===qf)){if(!n.producerMustRecompute(n)&&!Us(n)){xv(n);return}n.producerRecomputeValue(n),xv(n)}}function Av(n){if(n.liveConsumerNode===void 0)return;let t=Ls;Ls=!0;try{for(let e of n.liveConsumerNode)e.dirty||Nv(e)}finally{Ls=t}}function kv(){return ot?.consumerAllowSignalWrites!==!1}function Nv(n){n.dirty=!0,Av(n),n.consumerMarkedDirty?.(n)}function xv(n){n.dirty=!1,n.lastCleanEpoch=qf}function bo(n){return n&&(n.nextProducerIndex=0),ye(n)}function js(n,t){if(ye(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Vs(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)Il(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Us(n){Tl(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],r=n.producerLastReadVersion[t];if(r!==e.version||(Mv(e),r!==e.version))return!0}return!1}function wo(n){if(Tl(n),Vs(n))for(let t=0;t<n.producerNode.length;t++)Il(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Pv(n,t,e){if(Ov(n),n.liveConsumerNode.length===0&&Rv(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Pv(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function Il(n,t){if(Ov(n),n.liveConsumerNode.length===1&&Rv(n))for(let r=0;r<n.producerNode.length;r++)Il(n.producerNode[r],n.producerIndexOfThis[r]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[t],i=n.liveConsumerNode[t];Tl(i),i.producerIndexOfThis[r]=t}}function Vs(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Tl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Ov(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Rv(n){return n.producerNode!==void 0}function Fv(n){let t=Object.create(nD);t.computation=n;let e=()=>{if(Mv(t),xl(t),t.value===Dl)throw t.error;return t.value};return e[Lt]=t,e}var $f=Symbol("UNSET"),Hf=Symbol("COMPUTING"),Dl=Symbol("ERRORED"),nD=G(N({},wi),{value:$f,dirty:!0,error:null,equal:Iv,kind:"computed",producerMustRecompute(n){return n.value===$f||n.value===Hf},producerRecomputeValue(n){if(n.value===Hf)throw new Error("Detected cycle in computations.");let t=n.value;n.value=Hf;let e=bo(n),r,i=!1;try{r=n.computation(),ye(null),i=t!==$f&&t!==Dl&&r!==Dl&&n.equal(t,r)}catch(o){r=Dl,n.error=o}finally{js(n,e)}if(i){n.value=t;return}n.value=r,n.version++}});function rD(){throw new Error}var Lv=rD;function Vv(){Lv()}function jv(n){Lv=n}var iD=null;function Uv(n){let t=Object.create(Gf);t.value=n;let e=()=>(xl(t),t.value);return e[Lt]=t,e}function Ml(n,t){kv()||Vv(),n.equal(n.value,t)||(n.value=t,oD(n))}function Bv(n,t){kv()||Vv(),Ml(n,t(n.value))}var Gf=G(N({},wi),{equal:Iv,value:void 0,kind:"signal"});function oD(n){n.version++,tD(),Av(n),iD?.()}function $v(n,t,e){let r=Object.create(sD);e&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=t;let i=l=>{r.cleanupFn=l};function o(l){return l.fn===null&&l.schedule===null}function s(l){o(l)||(wo(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=zf)}let a=()=>{if(r.fn===null)return;if(eD())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Us(r))return;r.hasRun=!0;let l=bo(r);try{r.cleanupFn(),r.cleanupFn=zf,r.fn(i)}finally{js(r,l)}};return r.ref={notify:()=>Nv(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[Lt]:r},r.ref}var zf=()=>{},sD=G(N({},wi),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:zf});function te(n){return typeof n=="function"}function Co(n){let e=n(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Al=Co(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Ci(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var je=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){t=o instanceof Al?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Hv(o)}catch(s){t=t??[],s instanceof Al?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Al(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Hv(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Ci(e,t)}remove(t){let{_finalizers:e}=this;e&&Ci(e,t),t instanceof n&&t._removeParent(this)}};je.EMPTY=(()=>{let n=new je;return n.closed=!0,n})();var Wf=je.EMPTY;function kl(n){return n instanceof je||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function Hv(n){te(n)?n():n.unsubscribe()}var Pn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Eo={setTimeout(n,t,...e){let{delegate:r}=Eo;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=Eo;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Nl(n){Eo.setTimeout(()=>{let{onUnhandledError:t}=Pn;if(t)t(n);else throw n})}function Bs(){}var zv=Qf("C",void 0,void 0);function qv(n){return Qf("E",void 0,n)}function Gv(n){return Qf("N",n,void 0)}function Qf(n,t,e){return{kind:n,value:t,error:e}}var Ei=null;function So(n){if(Pn.useDeprecatedSynchronousErrorHandling){let t=!Ei;if(t&&(Ei={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:r}=Ei;if(Ei=null,e)throw r}}else n()}function Wv(n){Pn.useDeprecatedSynchronousErrorHandling&&Ei&&(Ei.errorThrown=!0,Ei.error=n)}var Si=class extends je{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,kl(t)&&t.add(this)):this.destination=cD}static create(t,e,r){return new pr(t,e,r)}next(t){this.isStopped?Zf(Gv(t),this):this._next(t)}error(t){this.isStopped?Zf(qv(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Zf(zv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},aD=Function.prototype.bind;function Kf(n,t){return aD.call(n,t)}var Yf=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){Pl(r)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){Pl(r)}else Pl(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Pl(e)}}},pr=class extends Si{constructor(t,e,r){super();let i;if(te(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&Pn.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Kf(t.next,o),error:t.error&&Kf(t.error,o),complete:t.complete&&Kf(t.complete,o)}):i=t}this.destination=new Yf(i)}};function Pl(n){Pn.useDeprecatedSynchronousErrorHandling?Wv(n):Nl(n)}function lD(n){throw n}function Zf(n,t){let{onStoppedNotification:e}=Pn;e&&Eo.setTimeout(()=>e(n,t))}var cD={closed:!0,next:Bs,error:lD,complete:Bs};var Do=typeof Symbol=="function"&&Symbol.observable||"@@observable";function tn(n){return n}function Jf(...n){return Xf(n)}function Xf(n){return n.length===0?tn:n.length===1?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}var me=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){let o=dD(e)?e:new pr(e,r,i);return So(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=Qv(r),new r((i,o)=>{let s=new pr({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[Do](){return this}pipe(...e){return Xf(e)(this)}toPromise(e){return e=Qv(e),new e((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function Qv(n){var t;return(t=n??Pn.Promise)!==null&&t!==void 0?t:Promise}function uD(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function dD(n){return n&&n instanceof Si||uD(n)&&kl(n)}function ep(n){return te(n?.lift)}function ce(n){return t=>{if(ep(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(n,t,e,r,i){return new tp(n,t,e,r,i)}var tp=class extends Si{constructor(t,e,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function xo(){return ce((n,t)=>{let e=null;n._refCount++;let r=ue(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let i=n._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}var Io=class extends me{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,ep(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new je;let e=this.getSubject();t.add(this.source.subscribe(ue(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=je.EMPTY)}return t}refCount(){return xo()(this)}};var Kv=Co(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class n extends me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new Ol(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new Kv}next(e){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){So(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Wf:(this.currentObservers=null,o.push(e),new je(()=>{this.currentObservers=null,Ci(o,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){let e=new me;return e.source=this,e}}return n.create=(t,e)=>new Ol(t,e),n})(),Ol=class extends Ue{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,t)}error(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&r!==void 0?r:Wf}};var ht=class extends Ue{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var np={now(){return(np.delegate||Date).now()},delegate:void 0};var Rl=class extends je{constructor(t,e){super()}schedule(t,e=0){return this}};var $s={setInterval(n,t,...e){let{delegate:r}=$s;return r?.setInterval?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=$s;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var Fl=class extends Rl{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,r=0){return $s.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return e;e!=null&&$s.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,e);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Ci(r,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var To=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}};To.now=np.now;var Ll=class extends To{constructor(t,e=To.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}};var Zv=new Ll(Fl);var Vt=new me(n=>n.complete());function Yv(n){return n&&te(n.schedule)}function Jv(n){return n[n.length-1]}function Vl(n){return te(Jv(n))?n.pop():void 0}function Gr(n){return Yv(Jv(n))?n.pop():void 0}function ey(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(m){s(m)}}function l(p){try{d(r.throw(p))}catch(m){s(m)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})}function Xv(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Di(n){return this instanceof Di?(this.v=n,this):new Di(n)}function ty(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(b){return Promise.resolve(b).then(v,m)}}function a(v,b){r[v]&&(i[v]=function(C){return new Promise(function(x,A){o.push([v,C,x,A])>1||l(v,C)})},b&&(i[v]=b(i[v])))}function l(v,b){try{d(r[v](b))}catch(C){y(o[0][3],C)}}function d(v){v.value instanceof Di?Promise.resolve(v.value.v).then(p,m):y(o[0][2],v)}function p(v){l("next",v)}function m(v){l("throw",v)}function y(v,b){v(b),o.shift(),o.length&&l(o[0][0],o[0][1])}}function ny(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof Xv=="function"?Xv(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(d){o({value:d,done:a})},s)}}var jl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ul(n){return te(n?.then)}function Bl(n){return te(n[Do])}function $l(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function Hl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function fD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zl=fD();function ql(n){return te(n?.[zl])}function Gl(n){return ty(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:r,done:i}=yield Di(e.read());if(i)return yield Di(void 0);yield yield Di(r)}}finally{e.releaseLock()}})}function Wl(n){return te(n?.getReader)}function We(n){if(n instanceof me)return n;if(n!=null){if(Bl(n))return pD(n);if(jl(n))return hD(n);if(Ul(n))return mD(n);if($l(n))return ry(n);if(ql(n))return gD(n);if(Wl(n))return vD(n)}throw Hl(n)}function pD(n){return new me(t=>{let e=n[Do]();if(te(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function hD(n){return new me(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function mD(n){return new me(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Nl)})}function gD(n){return new me(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function ry(n){return new me(t=>{yD(n,t).catch(e=>t.error(e))})}function vD(n){return ry(Gl(n))}function yD(n,t){var e,r,i,o;return ey(this,void 0,void 0,function*(){try{for(e=ny(n);r=yield e.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})}function jt(n,t,e,r=0,i=!1){let o=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ql(n,t=0){return ce((e,r)=>{e.subscribe(ue(r,i=>jt(r,n,()=>r.next(i),t),()=>jt(r,n,()=>r.complete(),t),i=>jt(r,n,()=>r.error(i),t)))})}function Kl(n,t=0){return ce((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function iy(n,t){return We(n).pipe(Kl(t),Ql(t))}function oy(n,t){return We(n).pipe(Kl(t),Ql(t))}function sy(n,t){return new me(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function ay(n,t){return new me(e=>{let r;return jt(e,t,()=>{r=n[zl](),jt(e,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){e.error(s);return}o?e.complete():e.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function Zl(n,t){if(!n)throw new Error("Iterable cannot be null");return new me(e=>{jt(e,t,()=>{let r=n[Symbol.asyncIterator]();jt(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function ly(n,t){return Zl(Gl(n),t)}function cy(n,t){if(n!=null){if(Bl(n))return iy(n,t);if(jl(n))return sy(n,t);if(Ul(n))return oy(n,t);if($l(n))return Zl(n,t);if(ql(n))return ay(n,t);if(Wl(n))return ly(n,t)}throw Hl(n)}function Qe(n,t){return t?cy(n,t):We(n)}function Z(...n){let t=Gr(n);return Qe(n,t)}function Wr(n,t){let e=te(n)?n:()=>n,r=i=>i.error(e());return new me(t?i=>t.schedule(r,0,i):r)}function rp(n){return!!n&&(n instanceof me||te(n.lift)&&te(n.subscribe))}var hr=Co(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Y(n,t){return ce((e,r)=>{let i=0;e.subscribe(ue(r,o=>{r.next(n.call(t,o,i++))}))})}var{isArray:_D}=Array;function bD(n,t){return _D(t)?n(...t):n(t)}function Yl(n){return Y(t=>bD(n,t))}var{isArray:wD}=Array,{getPrototypeOf:CD,prototype:ED,keys:SD}=Object;function Jl(n){if(n.length===1){let t=n[0];if(wD(t))return{args:t,keys:null};if(DD(t)){let e=SD(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}function DD(n){return n&&typeof n=="object"&&CD(n)===ED}function Xl(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function Mo(...n){let t=Gr(n),e=Vl(n),{args:r,keys:i}=Jl(n);if(r.length===0)return Qe([],t);let o=new me(xD(r,t,i?s=>Xl(i,s):tn));return e?o.pipe(Yl(e)):o}function xD(n,t,e=tn){return r=>{uy(t,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)uy(t,()=>{let d=Qe(n[l],t),p=!1;d.subscribe(ue(r,m=>{o[l]=m,p||(p=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function uy(n,t,e){n?jt(e,n,t):t()}function dy(n,t,e,r,i,o,s,a){let l=[],d=0,p=0,m=!1,y=()=>{m&&!l.length&&!d&&t.complete()},v=C=>d<r?b(C):l.push(C),b=C=>{o&&t.next(C),d++;let x=!1;We(e(C,p++)).subscribe(ue(t,A=>{i?.(A),o?v(A):t.next(A)},()=>{x=!0},void 0,()=>{if(x)try{for(d--;l.length&&d<r;){let A=l.shift();s?jt(t,s,()=>b(A)):b(A)}y()}catch(A){t.error(A)}}))};return n.subscribe(ue(t,v,()=>{m=!0,y()})),()=>{a?.()}}function st(n,t,e=1/0){return te(t)?st((r,i)=>Y((o,s)=>t(r,o,i,s))(We(n(r,i))),e):(typeof t=="number"&&(e=t),ce((r,i)=>dy(r,i,n,e)))}function ip(n=1/0){return st(tn,n)}function fy(){return ip(1)}function Qr(...n){return fy()(Qe(n,Gr(n)))}function ec(n){return new me(t=>{We(n()).subscribe(t)})}function Hs(...n){let t=Vl(n),{args:e,keys:r}=Jl(n),i=new me(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,d=s;for(let p=0;p<s;p++){let m=!1;We(e[p]).subscribe(ue(o,y=>{m||(m=!0,d--),a[p]=y},()=>l--,void 0,()=>{(!l||!m)&&(d||o.next(r?Xl(r,a):a),o.complete())}))}});return t?i.pipe(Yl(t)):i}function At(n,t){return ce((e,r)=>{let i=0;e.subscribe(ue(r,o=>n.call(t,o,i++)&&r.next(o)))})}function Kn(n){return ce((t,e)=>{let r=null,i=!1,o;r=t.subscribe(ue(e,void 0,void 0,s=>{o=We(n(s,Kn(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function py(n,t,e,r,i){return(o,s)=>{let a=e,l=t,d=0;o.subscribe(ue(s,p=>{let m=d++;l=a?n(l,p,m):(a=!0,p),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function Kr(n,t){return te(t)?st(n,t,1):st(n,1)}function op(n,t=Zv){return ce((e,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let d=o;o=null,r.next(d)}};function l(){let d=s+n,p=t.now();if(p<d){i=this.schedule(void 0,d-p),r.add(i);return}a()}e.subscribe(ue(r,d=>{o=d,s=t.now(),i||(i=t.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Zr(n){return ce((t,e)=>{let r=!1;t.subscribe(ue(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function nn(n){return n<=0?()=>Vt:ce((t,e)=>{let r=0;t.subscribe(ue(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function tc(n=ID){return ce((t,e)=>{let r=!1;t.subscribe(ue(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function ID(){return new hr}function mr(n){return ce((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function gr(n,t){let e=arguments.length>=2;return r=>r.pipe(n?At((i,o)=>n(i,o,r)):tn,nn(1),e?Zr(t):tc(()=>new hr))}function Ao(n){return n<=0?()=>Vt:ce((t,e)=>{let r=[];t.subscribe(ue(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function sp(n,t){let e=arguments.length>=2;return r=>r.pipe(n?At((i,o)=>n(i,o,r)):tn,Ao(1),e?Zr(t):tc(()=>new hr))}function ap(n,t){return ce(py(n,t,arguments.length>=2,!0))}function cp(n={}){let{connector:t=()=>new Ue,resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,l,d=0,p=!1,m=!1,y=()=>{a?.unsubscribe(),a=void 0},v=()=>{y(),s=l=void 0,p=m=!1},b=()=>{let C=s;v(),C?.unsubscribe()};return ce((C,x)=>{d++,!m&&!p&&y();let A=l=l??t();x.add(()=>{d--,d===0&&!m&&!p&&(a=lp(b,i))}),A.subscribe(x),!s&&d>0&&(s=new pr({next:j=>A.next(j),error:j=>{m=!0,y(),a=lp(v,e,j),A.error(j)},complete:()=>{p=!0,y(),a=lp(v,r),A.complete()}}),We(C).subscribe(s))})(o)}}function lp(n,t,...e){if(t===!0){n();return}if(t===!1)return;let r=new pr({next:()=>{r.unsubscribe(),n()}});return We(t(...e)).subscribe(r)}function up(n){return At((t,e)=>n<=e)}function zs(...n){let t=Gr(n);return ce((e,r)=>{(t?Qr(n,e,t):Qr(n,e)).subscribe(r)})}function rn(n,t){return ce((e,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();e.subscribe(ue(r,l=>{i?.unsubscribe();let d=0,p=o++;We(n(l,p)).subscribe(i=ue(r,m=>r.next(t?t(l,m,p,d++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function qs(n){return ce((t,e)=>{We(n).subscribe(ue(e,()=>e.complete(),Bs)),!e.closed&&t.subscribe(e)})}function Ze(n,t,e){let r=te(n)||t||e?{next:n,error:t,complete:e}:n;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,l=>{var d;(d=r.next)===null||d===void 0||d.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,l),o.error(l)},()=>{var l,d;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):tn}var e_="https://g.co/ng/security#xss",k=class extends Error{code;constructor(t,e){super($c(t,e)),this.code=t}};function $c(n,t){return`${`NG0${Math.abs(n)}`}${t?": "+t:""}`}var t_=Symbol("InputSignalNode#UNSET"),TD=G(N({},Gf),{transformFn:void 0,applyValueToInputSignal(n,t){Ml(n,t)}});function n_(n,t){let e=Object.create(TD);e.value=n,e.transformFn=t?.transform;function r(){if(xl(e),e.value===t_)throw new k(-950,!1);return e.value}return r[Lt]=e,r}function sa(n){return{toString:n}.toString()}var nc="__parameters__";function MD(n){return function(...e){if(n){let r=n(...e);for(let i in r)this[i]=r[i]}}}function r_(n,t,e){return sa(()=>{let r=MD(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,d,p){let m=l.hasOwnProperty(nc)?l[nc]:Object.defineProperty(l,nc,{value:[]})[nc];for(;m.length<=p;)m.push(null);return(m[p]=m[p]||[]).push(s),l}}return e&&(i.prototype=Object.create(e.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var vr=globalThis;function Ae(n){for(let t in n)if(n[t]===Ae)return t;throw Error("Could not find renamed property on target object.")}function AD(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Nt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Nt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let t=n.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function Ep(n,t){return n==null||n===""?t===null?"":t:t==null||t===""?n:n+" "+t}var kD=Ae({__forward_ref__:Ae});function Ct(n){return n.__forward_ref__=Ct,n.toString=function(){return Nt(this())},n}function kt(n){return i_(n)?n():n}function i_(n){return typeof n=="function"&&n.hasOwnProperty(kD)&&n.__forward_ref__===Ct}function P(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function at(n){return{providers:n.providers||[],imports:n.imports||[]}}function Hc(n){return hy(n,s_)||hy(n,a_)}function o_(n){return Hc(n)!==null}function hy(n,t){return n.hasOwnProperty(t)?n[t]:null}function ND(n){let t=n&&(n[s_]||n[a_]);return t||null}function my(n){return n&&(n.hasOwnProperty(gy)||n.hasOwnProperty(PD))?n[gy]:null}var s_=Ae({\u0275prov:Ae}),gy=Ae({\u0275inj:Ae}),a_=Ae({ngInjectableDef:Ae}),PD=Ae({ngInjectorDef:Ae}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=P({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function l_(n){return n&&!!n.\u0275providers}var OD=Ae({\u0275cmp:Ae}),RD=Ae({\u0275dir:Ae}),FD=Ae({\u0275pipe:Ae}),LD=Ae({\u0275mod:Ae}),mc=Ae({\u0275fac:Ae}),Ks=Ae({__NG_ELEMENT_ID__:Ae}),vy=Ae({__NG_ENV_ID__:Ae});function yr(n){return typeof n=="string"?n:n==null?"":String(n)}function VD(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():yr(n)}function jD(n,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new k(-200,n)}function Ah(n,t){throw new k(-201,!1)}var se=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(se||{}),Sp;function c_(){return Sp}function Ut(n){let t=Sp;return Sp=n,t}function u_(n,t,e){let r=Hc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&se.Optional)return null;if(t!==void 0)return t;Ah(n,"Injector")}var UD={},Zs=UD,Dp="__NG_DI_FLAG__",gc="ngTempTokenPath",BD="ngTokenPath",$D=/\n/gm,HD="\u0275",yy="__source",Ro;function zD(){return Ro}function Yr(n){let t=Ro;return Ro=n,t}function qD(n,t=se.Default){if(Ro===void 0)throw new k(-203,!1);return Ro===null?u_(n,void 0,t):Ro.get(n,t&se.Optional?null:void 0,t)}function F(n,t=se.Default){return(c_()||qD)(kt(n),t)}function I(n,t=se.Default){return F(n,zc(t))}function zc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function xp(n){let t=[];for(let e=0;e<n.length;e++){let r=kt(n[e]);if(Array.isArray(r)){if(r.length===0)throw new k(900,!1);let i,o=se.Default;for(let s=0;s<r.length;s++){let a=r[s],l=GD(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}t.push(F(i,o))}else t.push(F(r))}return t}function d_(n,t){return n[Dp]=t,n.prototype[Dp]=t,n}function GD(n){return n[Dp]}function WD(n,t,e,r){let i=n[gc];throw t[yy]&&i.unshift(t[yy]),n.message=QD(`
`+n.message,i,e,r),n[BD]=i,n[gc]=null,n}function QD(n,t,e,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==HD?n.slice(2):n;let i=Nt(t);if(Array.isArray(t))i=t.map(Nt).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Nt(a)))}i=`{${o.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${n.replace($D,`
  `)}`}var qc=d_(r_("Optional"),8);var kh=d_(r_("SkipSelf"),4);function Ti(n,t){let e=n.hasOwnProperty(mc);return e?n[mc]:null}function KD(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}function ZD(n){return n.flat(Number.POSITIVE_INFINITY)}function Nh(n,t){n.forEach(e=>Array.isArray(e)?Nh(e,t):t(e))}function f_(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function vc(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function YD(n,t){let e=[];for(let r=0;r<n;r++)e.push(t);return e}function JD(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(i===1)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;){let o=i-2;n[i]=n[o],i--}n[t]=e,n[t+1]=r}}function Ph(n,t,e){let r=aa(n,t);return r>=0?n[r|1]=e:(r=~r,JD(n,r,t,e)),r}function dp(n,t){let e=aa(n,t);if(e>=0)return n[e|1]}function aa(n,t){return XD(n,t,1)}function XD(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}var Lo={},Bt=[],Vo=new $(""),p_=new $("",-1),h_=new $(""),yc=class{get(t,e=Zs){if(e===Zs){let r=new Error(`NullInjectorError: No provider for ${Nt(t)}!`);throw r.name="NullInjectorError",r}return e}};function m_(n,t){let e=n[LD]||null;if(!e&&t===!0)throw new Error(`Type ${Nt(n)} does not have '\u0275mod' property.`);return e}function Mi(n){return n[OD]||null}function g_(n){return n[RD]||null}function v_(n){return n[FD]||null}function y_(n){let t=Mi(n)||g_(n)||v_(n);return t!==null&&t.standalone}function qo(n){return{\u0275providers:n}}function ex(...n){return{\u0275providers:__(!0,n),\u0275fromNgModule:!0}}function __(n,...t){let e=[],r=new Set,i,o=s=>{e.push(s)};return Nh(t,s=>{let a=s;Ip(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&b_(i,o),e}function b_(n,t){for(let e=0;e<n.length;e++){let{ngModule:r,providers:i}=n[e];Oh(i,o=>{t(o,r)})}}function Ip(n,t,e,r){if(n=kt(n),!n)return!1;let i=null,o=my(n),s=!o&&Mi(n);if(!o&&!s){let l=n.ngModule;if(o=my(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of l)Ip(d,t,e,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let d;try{Nh(o.imports,p=>{Ip(p,t,e,r)&&(d||=[],d.push(p))})}finally{}d!==void 0&&b_(d,t)}if(!a){let d=Ti(i)||(()=>new i);t({provide:i,useFactory:d,deps:Bt},i),t({provide:h_,useValue:i,multi:!0},i),t({provide:Vo,useValue:()=>F(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let d=n;Oh(l,p=>{t(p,d)})}}else return!1;return i!==n&&n.providers!==void 0}function Oh(n,t){for(let e of n)l_(e)&&(e=e.\u0275providers),Array.isArray(e)?Oh(e,t):t(e)}var tx=Ae({provide:String,useValue:Ae});function w_(n){return n!==null&&typeof n=="object"&&tx in n}function nx(n){return!!(n&&n.useExisting)}function rx(n){return!!(n&&n.useFactory)}function jo(n){return typeof n=="function"}function ix(n){return!!n.useClass}var Gc=new $(""),lc={},ox={},fp;function Rh(){return fp===void 0&&(fp=new yc),fp}var $t=class{},Ys=class extends $t{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,Mp(t,s=>this.processProvider(s)),this.records.set(p_,ko(void 0,this)),i.has("environment")&&this.records.set($t,ko(void 0,this));let o=this.records.get(Gc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(h_,Bt,se.Self))}destroy(){Ws(this),this._destroyed=!0;let t=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(t)}}onDestroy(t){return Ws(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Ws(this);let e=Yr(this),r=Ut(void 0),i;try{return t()}finally{Yr(e),Ut(r)}}get(t,e=Zs,r=se.Default){if(Ws(this),t.hasOwnProperty(vy))return t[vy](this);r=zc(r);let i,o=Yr(this),s=Ut(void 0);try{if(!(r&se.SkipSelf)){let l=this.records.get(t);if(l===void 0){let d=ux(t)&&Hc(t);d&&this.injectableDefInScope(d)?l=ko(Tp(t),lc):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=r&se.Self?Rh():this.parent;return e=r&se.Optional&&e===Zs?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[gc]=a[gc]||[]).unshift(Nt(t)),o)throw a;return WD(a,t,"R3InjectorError",this.source)}else throw a}finally{Ut(s),Yr(o)}}resolveInjectorInitializers(){let t=ye(null),e=Yr(this),r=Ut(void 0),i;try{let o=this.get(Vo,Bt,se.Self);for(let s of o)s()}finally{Yr(e),Ut(r),ye(t)}}toString(){let t=[],e=this.records;for(let r of e.keys())t.push(Nt(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=kt(t);let e=jo(t)?t:kt(t&&t.provide),r=ax(t);if(!jo(t)&&t.multi===!0){let i=this.records.get(e);i||(i=ko(void 0,lc,!0),i.factory=()=>xp(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e){let r=ye(null);try{return e.value===lc&&(e.value=ox,e.value=e.factory()),typeof e.value=="object"&&e.value&&cx(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{ye(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=kt(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function Tp(n){let t=Hc(n),e=t!==null?t.factory:Ti(n);if(e!==null)return e;if(n instanceof $)throw new k(204,!1);if(n instanceof Function)return sx(n);throw new k(204,!1)}function sx(n){if(n.length>0)throw new k(204,!1);let e=ND(n);return e!==null?()=>e.factory(n):()=>new n}function ax(n){if(w_(n))return ko(void 0,n.useValue);{let t=C_(n);return ko(t,lc)}}function C_(n,t,e){let r;if(jo(n)){let i=kt(n);return Ti(i)||Tp(i)}else if(w_(n))r=()=>kt(n.useValue);else if(rx(n))r=()=>n.useFactory(...xp(n.deps||[]));else if(nx(n))r=()=>F(kt(n.useExisting));else{let i=kt(n&&(n.useClass||n.provide));if(lx(n))r=()=>new i(...xp(n.deps));else return Ti(i)||Tp(i)}return r}function Ws(n){if(n.destroyed)throw new k(205,!1)}function ko(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function lx(n){return!!n.deps}function cx(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function ux(n){return typeof n=="function"||typeof n=="object"&&n instanceof $}function Mp(n,t){for(let e of n)Array.isArray(e)?Mp(e,t):e&&l_(e)?Mp(e.\u0275providers,t):t(e)}function an(n,t){n instanceof Ys&&Ws(n);let e,r=Yr(n),i=Ut(void 0);try{return t()}finally{Yr(r),Ut(i)}}function E_(){return c_()!==void 0||zD()!=null}function Fh(n){if(!E_())throw new k(-203,!1)}function dx(n){return typeof n=="function"}var Dr=0,de=1,ee=2,wt=3,Fn=4,zt=5,Js=6,_c=7,Cn=8,Xs=9,_r=10,Ye=11,ea=12,_y=13,Go=14,En=15,Ai=16,No=17,br=18,Wc=19,S_=20,Jr=21,cc=22,ki=23,on=24,Pt=25,D_=1;var Ni=7,bc=8,Uo=9,sn=10;function Xr(n){return Array.isArray(n)&&typeof n[D_]=="object"}function xr(n){return Array.isArray(n)&&n[D_]===!0}function Lh(n){return(n.flags&4)!==0}function Vi(n){return n.componentOffset>-1}function Qc(n){return(n.flags&1)===1}function wr(n){return!!n.template}function wc(n){return(n[ee]&512)!==0}function la(n){return(n[ee]&256)===256}var Ap=class{previousValue;currentValue;firstChange;constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function x_(n,t,e,r){t!==null?t.applyValueToInputSignal(t,r):n[e]=r}var Ln=(()=>{let n=()=>I_;return n.ngInherit=!0,n})();function I_(n){return n.type.prototype.ngOnChanges&&(n.setInput=px),fx}function fx(){let n=M_(this),t=n?.current;if(t){let e=n.previous;if(e===Lo)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function px(n,t,e,r,i){let o=this.declaredInputs[r],s=M_(n)||hx(n,{previous:Lo,current:null}),a=s.current||(s.current={}),l=s.previous,d=l[o];a[o]=new Ap(d&&d.currentValue,e,l===Lo),x_(n,t,i,e)}var T_="__ngSimpleChanges__";function M_(n){return n[T_]||null}function hx(n,t){return n[T_]=t}var by=null;var wn=function(n,t,e){by?.(n,t,e)},mx="svg",gx="math";function Yn(n){for(;Array.isArray(n);)n=n[Dr];return n}function A_(n,t){return Yn(t[n])}function Vn(n,t){return Yn(t[n.index])}function k_(n,t){return n.data[t]}function N_(n,t){return n[t]}function Jn(n,t){let e=t[n];return Xr(e)?e:e[Dr]}function vx(n){return(n[ee]&4)===4}function Vh(n){return(n[ee]&128)===128}function yx(n){return xr(n[wt])}function Bo(n,t){return t==null?null:n[t]}function P_(n){n[No]=0}function jh(n){n[ee]&1024||(n[ee]|=1024,Vh(n)&&ca(n))}function _x(n,t){for(;n>0;)t=t[Go],n--;return t}function Kc(n){return!!(n[ee]&9216||n[on]?.dirty)}function kp(n){n[_r].changeDetectionScheduler?.notify(9),n[ee]&64&&(n[ee]|=1024),Kc(n)&&ca(n)}function ca(n){n[_r].changeDetectionScheduler?.notify(0);let t=Pi(n);for(;t!==null&&!(t[ee]&8192||(t[ee]|=8192,!Vh(t)));)t=Pi(t)}function O_(n,t){if(la(n))throw new k(911,!1);n[Jr]===null&&(n[Jr]=[]),n[Jr].push(t)}function bx(n,t){if(n[Jr]===null)return;let e=n[Jr].indexOf(t);e!==-1&&n[Jr].splice(e,1)}function Pi(n){let t=n[wt];return xr(t)?t[wt]:t}function R_(n){return n[_c]??=[]}function F_(n){return n.cleanup??=[]}function wx(n,t,e,r){let i=R_(t);i.push(e),n.firstCreatePass&&F_(n).push(r,i.length-1)}var ie={lFrame:q_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Np=!1;function Cx(){return ie.lFrame.elementDepthCount}function Ex(){ie.lFrame.elementDepthCount++}function Sx(){ie.lFrame.elementDepthCount--}function L_(){return ie.bindingsEnabled}function V_(){return ie.skipHydrationRootTNode!==null}function Dx(n){return ie.skipHydrationRootTNode===n}function xx(){ie.skipHydrationRootTNode=null}function ae(){return ie.lFrame.lView}function tt(){return ie.lFrame.tView}function T(n){return ie.lFrame.contextLView=n,n[Cn]}function M(n){return ie.lFrame.contextLView=null,n}function Ot(){let n=j_();for(;n!==null&&n.type===64;)n=n.parent;return n}function j_(){return ie.lFrame.currentTNode}function Ix(){let n=ie.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function ji(n,t){let e=ie.lFrame;e.currentTNode=n,e.isParent=t}function Uh(){return ie.lFrame.isParent}function Bh(){ie.lFrame.isParent=!1}function Tx(){return ie.lFrame.contextLView}function U_(){return Np}function Cc(n){let t=Np;return Np=n,t}function Zc(){let n=ie.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function B_(){return ie.lFrame.bindingIndex}function Mx(n){return ie.lFrame.bindingIndex=n}function Yc(){return ie.lFrame.bindingIndex++}function Jc(n){let t=ie.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function Ax(){return ie.lFrame.inI18n}function kx(n,t){let e=ie.lFrame;e.bindingIndex=e.bindingRootIndex=n,Pp(t)}function Nx(){return ie.lFrame.currentDirectiveIndex}function Pp(n){ie.lFrame.currentDirectiveIndex=n}function Px(n){let t=ie.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function $_(){return ie.lFrame.currentQueryIndex}function $h(n){ie.lFrame.currentQueryIndex=n}function Ox(n){let t=n[de];return t.type===2?t.declTNode:t.type===1?n[zt]:null}function H_(n,t,e){if(e&se.SkipSelf){let i=t,o=n;for(;i=i.parent,i===null&&!(e&se.Host);)if(i=Ox(o),i===null||(o=o[Go],i.type&10))break;if(i===null)return!1;t=i,n=o}let r=ie.lFrame=z_();return r.currentTNode=t,r.lView=n,!0}function Hh(n){let t=z_(),e=n[de];ie.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function z_(){let n=ie.lFrame,t=n===null?null:n.child;return t===null?q_(n):t}function q_(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function G_(){let n=ie.lFrame;return ie.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var W_=G_;function zh(){let n=G_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Rx(n){return(ie.lFrame.contextLView=_x(n,ie.lFrame.contextLView))[Cn]}function Ir(){return ie.lFrame.selectedIndex}function Oi(n){ie.lFrame.selectedIndex=n}function qh(){let n=ie.lFrame;return k_(n.tView,n.selectedIndex)}function Fx(){return ie.lFrame.currentNamespace}var Q_=!0;function Xc(){return Q_}function eu(n){Q_=n}function Lx(n,t,e){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=I_(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}i&&(e.preOrderHooks??=[]).push(0-n,i),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function tu(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:d,ngOnDestroy:p}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),d&&((n.viewHooks??=[]).push(e,d),(n.viewCheckHooks??=[]).push(e,d)),p!=null&&(n.destroyHooks??=[]).push(e,p)}}function uc(n,t,e){K_(n,t,3,e)}function dc(n,t,e,r){(n[ee]&3)===e&&K_(n,t,e,r)}function pp(n,t){let e=n[ee];(e&3)===t&&(e&=16383,e+=1,n[ee]=e)}function K_(n,t,e,r){let i=r!==void 0?n[No]&65535:0,o=r??-1,s=t.length-1,a=0;for(let l=i;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],r!=null&&a>=r)break}else t[l]<0&&(n[No]+=65536),(a<o||o==-1)&&(Vx(n,e,t,l),n[No]=(n[No]&4294901760)+l+2),l++}function wy(n,t){wn(4,n,t);let e=ye(null);try{t.call(n)}finally{ye(e),wn(5,n,t)}}function Vx(n,t,e,r){let i=e[r]<0,o=e[r+1],s=i?-e[r]:e[r],a=n[s];i?n[ee]>>14<n[No]>>16&&(n[ee]&3)===t&&(n[ee]+=16384,wy(a,o)):wy(a,o)}var Fo=-1,Ri=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,r){this.factory=t,this.canSeeViewProviders=e,this.injectImpl=r}};function jx(n){return n instanceof Ri}function Ux(n){return(n.flags&8)!==0}function Bx(n){return(n.flags&16)!==0}function $x(n,t,e){let r=0;for(;r<e.length;){let i=e[r];if(typeof i=="number"){if(i!==0)break;r++;let o=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,o)}else{let o=i,s=e[++r];Hx(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),r++}}return r}function Z_(n){return n===3||n===4||n===6}function Hx(n){return n.charCodeAt(0)===64}function $o(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?e=i:e===0||(e===-1||e===2?Cy(n,e,i,null,t[++r]):Cy(n,e,i,null,null))}}return n}function Cy(n,t,e,r,i){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var hp={},Op=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=zc(r);let i=this.injector.get(t,hp,r);return i!==hp||e===hp?i:this.parentInjector.get(t,e,r)}};function Y_(n){return n!==Fo}function Ec(n){return n&32767}function zx(n){return n>>16}function Sc(n,t){let e=zx(n),r=t;for(;e>0;)r=r[Go],e--;return r}var Rp=!0;function Dc(n){let t=Rp;return Rp=n,t}var qx=256,J_=qx-1,X_=5,Gx=0,Zn={};function Wx(n,t,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(Ks)&&(r=e[Ks]),r==null&&(r=e[Ks]=Gx++);let i=r&J_,o=1<<i;t.data[n+(i>>X_)]|=o}function xc(n,t){let e=eb(n,t);if(e!==-1)return e;let r=t[de];r.firstCreatePass&&(n.injectorIndex=t.length,mp(r.data,n),mp(t,null),mp(r.blueprint,null));let i=Gh(n,t),o=n.injectorIndex;if(Y_(i)){let s=Ec(i),a=Sc(i,t),l=a[de].data;for(let d=0;d<8;d++)t[o+d]=a[s+d]|l[s+d]}return t[o+8]=i,o}function mp(n,t){n.push(0,0,0,0,0,0,0,0,t)}function eb(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function Gh(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;i!==null;){if(r=ob(i),r===null)return Fo;if(e++,i=i[Go],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return Fo}function Fp(n,t,e){Wx(n,t,e)}function Qx(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let r=e.length,i=0;for(;i<r;){let o=e[i];if(Z_(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof e[i]=="string";)i++;else{if(o===t)return e[i+1];i=i+2}}}return null}function tb(n,t,e){if(e&se.Optional||n!==void 0)return n;Ah(t,"NodeInjector")}function nb(n,t,e,r){if(e&se.Optional&&r===void 0&&(r=null),!(e&(se.Self|se.Host))){let i=n[Xs],o=Ut(void 0);try{return i?i.get(t,r,e&se.Optional):u_(t,r,e&se.Optional)}finally{Ut(o)}}return tb(r,t,e)}function rb(n,t,e,r=se.Default,i){if(n!==null){if(t[ee]&2048&&!(r&se.Self)){let s=Jx(n,t,e,r,Zn);if(s!==Zn)return s}let o=ib(n,t,e,r,Zn);if(o!==Zn)return o}return nb(t,e,r,i)}function ib(n,t,e,r,i){let o=Zx(e);if(typeof o=="function"){if(!H_(t,n,r))return r&se.Host?tb(i,e,r):nb(t,e,r,i);try{let s;if(s=o(r),s==null&&!(r&se.Optional))Ah(e);else return s}finally{W_()}}else if(typeof o=="number"){let s=null,a=eb(n,t),l=Fo,d=r&se.Host?t[En][zt]:null;for((a===-1||r&se.SkipSelf)&&(l=a===-1?Gh(n,t):t[a+8],l===Fo||!Sy(r,!1)?a=-1:(s=t[de],a=Ec(l),t=Sc(l,t)));a!==-1;){let p=t[de];if(Ey(o,a,p.data)){let m=Kx(a,t,e,s,r,d);if(m!==Zn)return m}l=t[a+8],l!==Fo&&Sy(r,t[de].data[a+8]===d)&&Ey(o,a,t)?(s=p,a=Ec(l),t=Sc(l,t)):a=-1}}return i}function Kx(n,t,e,r,i,o){let s=t[de],a=s.data[n+8],l=r==null?Vi(a)&&Rp:r!=s&&(a.type&3)!==0,d=i&se.Host&&o===a,p=fc(a,s,e,l,d);return p!==null?ta(t,s,p,a):Zn}function fc(n,t,e,r,i){let o=n.providerIndexes,s=t.data,a=o&1048575,l=n.directiveStart,d=n.directiveEnd,p=o>>20,m=r?a:a+p,y=i?a+p:d;for(let v=m;v<y;v++){let b=s[v];if(v<l&&e===b||v>=l&&b.type===e)return v}if(i){let v=s[l];if(v&&wr(v)&&v.type===e)return l}return null}function ta(n,t,e,r){let i=n[e],o=t.data;if(jx(i)){let s=i;s.resolving&&jD(VD(o[e]));let a=Dc(s.canSeeViewProviders);s.resolving=!0;let l,d=s.injectImpl?Ut(s.injectImpl):null,p=H_(n,r,se.Default);try{i=n[e]=s.factory(void 0,o,n,r),t.firstCreatePass&&e>=r.directiveStart&&Lx(e,o[e],t)}finally{d!==null&&Ut(d),Dc(a),s.resolving=!1,W_()}}return i}function Zx(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Ks)?n[Ks]:void 0;return typeof t=="number"?t>=0?t&J_:Yx:t}function Ey(n,t,e){let r=1<<n;return!!(e[t+(n>>X_)]&r)}function Sy(n,t){return!(n&se.Self)&&!(n&se.Host&&t)}var Ii=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return rb(this._tNode,this._lView,t,zc(r),e)}};function Yx(){return new Ii(Ot(),ae())}function Sn(n){return sa(()=>{let t=n.prototype.constructor,e=t[mc]||Lp(t),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[mc]||Lp(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Lp(n){return i_(n)?()=>{let t=Lp(kt(n));return t&&t()}:Ti(n)}function Jx(n,t,e,r,i){let o=n,s=t;for(;o!==null&&s!==null&&s[ee]&2048&&!wc(s);){let a=ib(o,s,e,r|se.Self,Zn);if(a!==Zn)return a;let l=o.parent;if(!l){let d=s[S_];if(d){let p=d.get(e,Zn,r);if(p!==Zn)return p}l=ob(s),s=s[Go]}o=l}return i}function ob(n){let t=n[de],e=t.type;return e===2?t.declTNode:e===1?n[zt]:null}function nu(n){return Qx(Ot(),n)}function Dy(n,t=null,e=null,r){let i=sb(n,t,e,r);return i.resolveInjectorInitializers(),i}function sb(n,t=null,e=null,r,i=new Set){let o=[e||Bt,ex(n)];return r=r||(typeof n=="object"?void 0:Nt(n)),new Ys(o,t||Rh(),r||null,i)}var mt=class n{static THROW_IF_NOT_FOUND=Zs;static NULL=new yc;static create(t,e){if(Array.isArray(t))return Dy({name:""},e,t,"");{let r=t.name??"";return Dy({name:r},t.parent,t.providers,r)}}static \u0275prov=P({token:n,providedIn:"any",factory:()=>F(p_)});static __NG_ELEMENT_ID__=-1};var Ic=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>nu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},Xx=new $("");Xx.__NG_ELEMENT_ID__=n=>{let t=Ot();if(t===null)throw new k(204,!1);if(t.type&2)return t.value;if(n&se.Optional)return null;throw new k(204,!1)};var ab=!1,Ui=(()=>{class n{static __NG_ELEMENT_ID__=eI;static __NG_ENV_ID__=e=>e}return n})(),Tc=class extends Ui{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return O_(this._lView,t),()=>bx(this._lView,t)}};function eI(){return new Tc(ae())}var ei=class{},ru=new $("",{providedIn:"root",factory:()=>!1});var lb=new $(""),Wh=new $(""),Tr=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new ht(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=P({token:n,providedIn:"root",factory:()=>new n})}return n})();var Vp=class extends Ue{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,E_()&&(this.destroyRef=I(Ui,{optional:!0})??void 0,this.pendingTasks=I(Tr,{optional:!0})??void 0)}emit(t){let e=ye(null);try{super.next(t)}finally{ye(e)}}subscribe(t,e,r){let i=t,o=e||(()=>null),s=r;if(t&&typeof t=="object"){let l=t;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof je&&t.add(a),a}wrapInTimeout(t){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(e),r!==void 0&&this.pendingTasks?.remove(r)})}}},ne=Vp;function na(...n){}function cb(n){let t,e;function r(){n=na;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),r()})),()=>r()}function xy(n){return queueMicrotask(()=>n()),()=>{n=na}}var Qh="isAngularZone",Mc=Qh+"_ID",tI=0,Me=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ne(!1);onMicrotaskEmpty=new ne(!1);onStable=new ne(!1);onError=new ne(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=ab}=t;if(typeof Zone>"u")throw new k(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,iI(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Qh)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new k(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new k(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,nI,na,na);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}},nI={};function Kh(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function rI(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){cb(()=>{n.callbackScheduled=!1,jp(n),n.isCheckStableRunning=!0,Kh(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),jp(n)}function iI(n){let t=()=>{rI(n)},e=tI++;n._inner=n._inner.fork({name:"angular",properties:{[Qh]:!0,[Mc]:e,[Mc+e]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(oI(l))return r.invokeTask(o,s,a,l);try{return Iy(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),Ty(n)}},onInvoke:(r,i,o,s,a,l,d)=>{try{return Iy(n),r.invoke(o,s,a,l,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!sI(l)&&t(),Ty(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,jp(n),Kh(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function jp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Iy(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Ty(n){n._nesting--,Kh(n)}var Ac=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ne;onMicrotaskEmpty=new ne;onStable=new ne;onError=new ne;run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}};function oI(n){return ub(n,"__ignore_ng_zone__")}function sI(n){return ub(n,"__scheduler_tick__")}function ub(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var Ht=class{_console=console;handleError(t){this._console.error("ERROR",t)}},aI=new $("",{providedIn:"root",factory:()=>{let n=I(Me),t=I(Ht);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function My(n,t){return n_(n,t)}function lI(n){return n_(t_,n)}var db=(My.required=lI,My);function cI(){return Wo(Ot(),ae())}function Wo(n,t){return new nt(Vn(n,t))}var nt=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=cI}return n})();function uI(n){return n instanceof nt?n.nativeElement:n}var Ay=new Set;function jn(n){Ay.has(n)||(Ay.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Zh(n){return typeof n=="function"&&n[Lt]!==void 0}function xe(n,t){jn("NgSignals");let e=Uv(n),r=e[Lt];return t?.equal&&(r.equal=t.equal),e.set=i=>Ml(r,i),e.update=i=>Bv(r,i),e.asReadonly=dI.bind(e),e}function dI(){let n=this[Lt];if(n.readonlyFn===void 0){let t=()=>this();t[Lt]=n,n.readonlyFn=t}return n.readonlyFn}function fb(n){return Zh(n)&&typeof n.set=="function"}function fI(){return this._results[Symbol.iterator]()}var kc=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ue}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let r=ZD(t);(this._changesDetected=!KD(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=fI};function pb(n){return(n.flags&128)===128}var hb=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(hb||{}),mb=new Map,pI=0;function hI(){return pI++}function mI(n){mb.set(n[Wc],n)}function Up(n){mb.delete(n[Wc])}var ky="__ngContext__";function Bi(n,t){Xr(t)?(n[ky]=t[Wc],mI(t)):n[ky]=t}function gb(n){return yb(n[ea])}function vb(n){return yb(n[Fn])}function yb(n){for(;n!==null&&!xr(n);)n=n[Fn];return n}var Bp;function _b(n){Bp=n}function gI(){if(Bp!==void 0)return Bp;if(typeof document<"u")return document;throw new k(210,!1)}var iu=new $("",{providedIn:"root",factory:()=>vI}),vI="ng",Yh=new $(""),Et=new $("",{providedIn:"platform",factory:()=>"unknown"});var ou=new $(""),ua=new $("",{providedIn:"root",factory:()=>gI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var yI="h",_I="b";var bb=!1,bI=new $("",{providedIn:"root",factory:()=>bb});var Jh=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Jh||{}),Qo=new $("");var Po=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Po||{}),wb=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=P({token:n,providedIn:"root",factory:()=>new n})}return n})(),wI=[Po.EarlyRead,Po.Write,Po.MixedReadWrite,Po.Read],CI=(()=>{class n{ngZone=I(Me);scheduler=I(ei);errorHandler=I(Ht,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){I(Qo,{optional:!0})}execute(){this.executing=!0;for(let e of wI)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[e]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>r.hooks[e](r.pipelinedValue),r.snapshot))}catch(i){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(7))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,r){return r?r.run(Jh.AFTER_NEXT_RENDER,e):e()}static \u0275prov=P({token:n,providedIn:"root",factory:()=>new n})}return n})(),$p=class{impl;hooks;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,r,i,o=null){this.impl=t,this.hooks=e,this.once=r,this.snapshot=o,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Xh(n,t){!t?.injector&&Fh(Xh);let e=t?.injector??I(mt);return jn("NgAfterRender"),SI(n,e,t,!1)}function EI(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function SI(n,t,e,r){let i=t.get(wb);i.impl??=t.get(CI);let o=t.get(Qo,null,{optional:!0}),s=e?.phase??Po.MixedReadWrite,a=e?.manualCleanup!==!0?t.get(Ui):null,l=new $p(i.impl,EI(n,s),r,a,o?.snapshot(null));return i.impl.register(l),l}var DI=()=>null;function Cb(n,t,e=!1){return DI(n,t,e)}function Eb(n,t){let e=n.contentQueries;if(e!==null){let r=ye(null);try{for(let i=0;i<e.length;i+=2){let o=e[i],s=e[i+1];if(s!==-1){let a=n.data[s];$h(o),a.contentQueries(2,t[s],s)}}}finally{ye(r)}}}function Hp(n,t,e){$h(0);let r=ye(null);try{t(n,e)}finally{ye(r)}}function em(n,t,e){if(Lh(t)){let r=ye(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{ye(r)}}}var Xn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Xn||{}),rc;function xI(){if(rc===void 0&&(rc=null,vr.trustedTypes))try{rc=vr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return rc}function su(n){return xI()?.createHTML(n)||n}var ic;function II(){if(ic===void 0&&(ic=null,vr.trustedTypes))try{ic=vr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ic}function Ny(n){return II()?.createScriptURL(n)||n}var Cr=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${e_})`}},zp=class extends Cr{getTypeName(){return"HTML"}},qp=class extends Cr{getTypeName(){return"Style"}},Gp=class extends Cr{getTypeName(){return"Script"}},Wp=class extends Cr{getTypeName(){return"URL"}},Qp=class extends Cr{getTypeName(){return"ResourceURL"}};function Un(n){return n instanceof Cr?n.changingThisBreaksApplicationSecurity:n}function oi(n,t){let e=TI(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${e_})`)}return e===t}function TI(n){return n instanceof Cr&&n.getTypeName()||null}function Sb(n){return new zp(n)}function Db(n){return new qp(n)}function xb(n){return new Gp(n)}function Ib(n){return new Wp(n)}function Tb(n){return new Qp(n)}function MI(n){let t=new Zp(n);return AI()?new Kp(t):t}var Kp=class{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(su(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},Zp=class{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=su(t),e}};function AI(){try{return!!new window.DOMParser().parseFromString(su(""),"text/html")}catch{return!1}}var kI=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function au(n){return n=String(n),n.match(kI)?n:"unsafe:"+n}function Mr(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function da(...n){let t={};for(let e of n)for(let r in e)e.hasOwnProperty(r)&&(t[r]=!0);return t}var Mb=Mr("area,br,col,hr,img,wbr"),Ab=Mr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),kb=Mr("rp,rt"),NI=da(kb,Ab),PI=da(Ab,Mr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),OI=da(kb,Mr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Py=da(Mb,PI,OI,NI),Nb=Mr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),RI=Mr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),FI=Mr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),LI=da(Nb,RI,FI),VI=Mr("script,style,template"),Yp=class{sanitizedSomething=!1;buf=[];sanitizeChildren(t){let e=t.firstChild,r=!0,i=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild){i.push(e),e=BI(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=UI(e);if(o){e=o;break}e=i.pop()}}return this.buf.join("")}startElement(t){let e=Oy(t).toLowerCase();if(!Py.hasOwnProperty(e))return this.sanitizedSomething=!0,!VI.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let r=t.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!LI.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;Nb[a]&&(l=au(l)),this.buf.push(" ",s,'="',Ry(l),'"')}return this.buf.push(">"),!0}endElement(t){let e=Oy(t).toLowerCase();Py.hasOwnProperty(e)&&!Mb.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Ry(t))}};function jI(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function UI(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw Pb(t);return t}function BI(n){let t=n.firstChild;if(t&&jI(n,t))throw Pb(t);return t}function Oy(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function Pb(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var $I=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,HI=/([^\#-~ |!])/g;function Ry(n){return n.replace(/&/g,"&amp;").replace($I,function(t){let e=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((e-55296)*1024+(r-56320)+65536)+";"}).replace(HI,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var oc;function Ob(n,t){let e=null;try{oc=oc||MI(n);let r=t?String(t):"";e=oc.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=e.innerHTML,e=oc.getInertBodyElement(r)}while(r!==o);let a=new Yp().sanitizeChildren(Fy(e)||e);return su(a)}finally{if(e){let r=Fy(e)||e;for(;r.firstChild;)r.firstChild.remove()}}}function Fy(n){return"content"in n&&zI(n)?n.content:null}function zI(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var St=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(St||{});function Dn(n){let t=Fb();return t?t.sanitize(St.URL,n)||"":oi(n,"URL")?Un(n):au(yr(n))}function tm(n){let t=Fb();if(t)return Ny(t.sanitize(St.RESOURCE_URL,n)||"");if(oi(n,"ResourceURL"))return Ny(Un(n));throw new k(904,!1)}function qI(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?tm:Dn}function Rb(n,t,e){return qI(t,e)(n)}function Fb(){let n=ae();return n&&n[_r].sanitizer}var GI=/^>|^->|<!--|-->|--!>|<!-$/g,WI=/(<|>)/g,QI="\u200B$1\u200B";function KI(n){return n.replace(GI,t=>t.replace(WI,QI))}function Lb(n){return n.ownerDocument}function Vb(n){return n instanceof Function?n():n}var ti=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ti||{});function ZI(n,t,e){let r=n.length;for(;;){let i=n.indexOf(t,e);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}var jb="ng-template";function YI(n,t,e,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&ZI(t[i+1].toLowerCase(),e,0)!==-1)return!0}else if(nm(n))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===e)return!0}return!1}function nm(n){return n.type===4&&n.value!==jb}function JI(n,t,e){let r=n.type===4&&!e?jb:n.value;return t===r}function XI(n,t,e){let r=4,i=n.attrs,o=i!==null?nT(i):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!On(r)&&!On(l))return!1;if(s&&On(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!JI(n,l,e)||l===""&&t.length===1){if(On(r))return!1;s=!0}}else if(r&8){if(i===null||!YI(n,i,l,e)){if(On(r))return!1;s=!0}}else{let d=t[++a],p=eT(l,i,nm(n),e);if(p===-1){if(On(r))return!1;s=!0;continue}if(d!==""){let m;if(p>o?m="":m=i[p+1].toLowerCase(),r&2&&d!==m){if(On(r))return!1;s=!0}}}}return On(r)||s}function On(n){return(n&1)===0}function eT(n,t,e,r){if(t===null)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){let s=t[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return rT(t,n)}function Ub(n,t,e=!1){for(let r=0;r<t.length;r++)if(XI(n,t[r],e))return!0;return!1}function tT(n){let t=n.attrs;if(t!=null){let e=t.indexOf(5);if(!(e&1))return t[e+1]}return null}function nT(n){for(let t=0;t<n.length;t++){let e=n[t];if(Z_(e))return t}return n.length}function rT(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let r=n[e];if(typeof r=="number")return-1;if(r===t)return e;e++}return-1}function iT(n,t){e:for(let e=0;e<t.length;e++){let r=t[e];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Ly(n,t){return n?":not("+t.trim()+")":t}function oT(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(r&2){let a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!On(s)&&(t+=Ly(o,i),i=""),r=s,o=o||!On(r);e++}return i!==""&&(t+=Ly(o,i)),t}function sT(n){return n.map(oT).join(",")}function aT(n){let t=[],e=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&t.push(o,n[++r]):i===8&&e.push(o);else{if(!On(i))break;i=o}r++}return e.length&&t.push(1,...e),t}var qt={};function lT(n,t){return n.createText(t)}function cT(n,t,e){n.setValue(t,e)}function uT(n,t){return n.createComment(KI(t))}function Bb(n,t,e){return n.createElement(t,e)}function Nc(n,t,e,r,i){n.insertBefore(t,e,r,i)}function $b(n,t,e){n.appendChild(t,e)}function Vy(n,t,e,r,i){r!==null?Nc(n,t,e,r,i):$b(n,t,e)}function dT(n,t,e){n.removeChild(null,t,e)}function fT(n,t,e){n.setAttribute(t,"style",e)}function pT(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Hb(n,t,e){let{mergedAttrs:r,classes:i,styles:o}=e;r!==null&&$x(n,t,r),i!==null&&pT(n,t,i),o!==null&&fT(n,t,o)}function h(n=1){zb(tt(),ae(),Ir()+n,!1)}function zb(n,t,e,r){if(!r)if((t[ee]&3)===3){let o=n.preOrderCheckHooks;o!==null&&uc(t,o,e)}else{let o=n.preOrderHooks;o!==null&&dc(t,o,0,e)}Oi(e)}function D(n,t=se.Default){let e=ae();if(e===null)return F(n,t);let r=Ot();return rb(r,e,kt(n),t)}function qb(n,t,e,r,i,o){let s=ye(null);try{let a=null;i&ti.SignalBased&&(a=t[r][Lt]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&ti.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(t,o)),n.setInput!==null?n.setInput(t,a,o,e,r):x_(t,a,r,o)}finally{ye(s)}}function rm(n,t,e,r,i,o,s,a,l,d,p){let m=t.blueprint.slice();return m[Dr]=i,m[ee]=r|4|128|8|64|1024,(d!==null||n&&n[ee]&2048)&&(m[ee]|=2048),P_(m),m[wt]=m[Go]=n,m[Cn]=e,m[_r]=s||n&&n[_r],m[Ye]=a||n&&n[Ye],m[Xs]=l||n&&n[Xs]||null,m[zt]=o,m[Wc]=hI(),m[Js]=p,m[S_]=d,m[En]=t.type==2?n[En]:m,m}function Gb(n,t,e,r){if(e===0)return-1;let i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function Wb(n,t,e,r,i){let o=Ir(),s=r&2;try{Oi(-1),s&&t.length>Pt&&zb(n,t,Pt,!1),wn(s?2:0,i),e(r,i)}finally{Oi(o),wn(s?3:1,i)}}function im(n,t,e){L_()&&(Bi(Vn(e,t),t),Qb(n,t,e))}function Qb(n,t,e){ST(n,t,e),(e.flags&64)===64&&DT(n,t,e)}function om(n,t,e=Vn){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?e(t,n):n[s];n[i++]=a}}}function hT(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=sm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function sm(n,t,e,r,i,o,s,a,l,d,p){let m=Pt+r,y=m+i,v=mT(m,y),b=typeof d=="function"?d():d;return v[de]={type:n,blueprint:v,template:e,queries:null,viewQuery:a,declTNode:t,data:v.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1,ssrId:p}}function mT(n,t){let e=[];for(let r=0;r<t;r++)e.push(r<n?null:qt);return e}function gT(n,t,e,r){let o=r.get(bI,bb)||e===Xn.ShadowDom,s=n.selectRootElement(t,o);return vT(s),s}function vT(n){yT(n)}var yT=()=>null;function jy(n,t,e,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;r??={};let a,l=ti.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let d=o;if(i!==null){if(!i.hasOwnProperty(o))continue;d=i[o]}n===0?Uy(r,e,d,a,l):Uy(r,e,d,a)}return r}function Uy(n,t,e,r,i){let o;n.hasOwnProperty(e)?(o=n[e]).push(t,r):o=n[e]=[t,r],i!==void 0&&o.push(i)}function _T(n,t,e){let r=t.directiveStart,i=t.directiveEnd,o=n.data,s=t.attrs,a=[],l=null,d=null;for(let p=r;p<i;p++){let m=o[p],y=e?e.get(m):null,v=y?y.inputs:null,b=y?y.outputs:null;l=jy(0,m.inputs,p,l,v),d=jy(1,m.outputs,p,d,b);let C=l!==null&&s!==null&&!nm(t)?VT(l,p,s):null;a.push(C)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=d}function bT(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Kb(n,t,e,r,i,o,s,a){let l=Vn(t,e),d=t.inputs,p;!a&&d!=null&&(p=d[r])?(cm(n,e,p,r,i),Vi(t)&&wT(e,t.index)):t.type&3?(r=bT(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(l,r,i)):t.type&12}function wT(n,t){let e=Jn(t,n);e[ee]&16||(e[ee]|=64)}function am(n,t,e,r){if(L_()){let i=r===null?null:{"":-1},o=IT(n,e);if(o!==null){let[s,a]=Yb(n,e,o);Zb(n,t,e,s,i,a)}i&&MT(e,r,i)}e.mergedAttrs=$o(e.mergedAttrs,e.attrs)}function Zb(n,t,e,r,i,o){for(let d=0;d<r.length;d++)Fp(xc(e,t),n,r[d].type);kT(e,n.data.length,r.length);for(let d=0;d<r.length;d++){let p=r[d];p.providersResolver&&p.providersResolver(p)}let s=!1,a=!1,l=Gb(n,t,r.length,null);for(let d=0;d<r.length;d++){let p=r[d];e.mergedAttrs=$o(e.mergedAttrs,p.hostAttrs),NT(n,e,t,l,p),AT(l,p,i),p.contentQueries!==null&&(e.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(e.flags|=64);let m=p.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),s=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}_T(n,e,o)}function CT(n,t,e,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;ET(s)!=a&&s.push(a),s.push(e,r,o)}}function ET(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function ST(n,t,e){let r=e.directiveStart,i=e.directiveEnd;Vi(e)&&OT(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||xc(e,t);let o=e.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=ta(t,n,s,e);if(Bi(l,t),o!==null&&LT(t,s-r,l,a,e,o),wr(a)){let d=Jn(e.index,t);d[Cn]=ta(t,n,s,e)}}}function DT(n,t,e){let r=e.directiveStart,i=e.directiveEnd,o=e.index,s=Nx();try{Oi(o);for(let a=r;a<i;a++){let l=n.data[a],d=t[a];Pp(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&xT(l,d)}}finally{Oi(-1),Pp(s)}}function xT(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function IT(n,t){let e=n.directiveRegistry,r=null;if(e)for(let i=0;i<e.length;i++){let o=e[i];Ub(t,o.selectors,!1)&&(r??=[],wr(o)?r.unshift(o):r.push(o))}return r}function Yb(n,t,e){let r=[],i=null;for(let o of e)o.findHostDirectiveDefs!==null&&(i??=new Map,o.findHostDirectiveDefs(o,r,i)),wr(o)&&(r.push(o),TT(n,t,r.length-1));return Vi(t)?r.push(...e.slice(1)):r.push(...e),[r,i]}function TT(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function MT(n,t,e){if(t){let r=n.localNames=[];for(let i=0;i<t.length;i+=2){let o=e[t[i+1]];if(o==null)throw new k(-301,!1);r.push(t[i],o)}}}function AT(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;wr(t)&&(e[""]=n)}}function kT(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function NT(n,t,e,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ti(i.type,!0)),s=new Ri(o,wr(i),D);n.blueprint[r]=s,e[r]=s,CT(n,t,r,Gb(n,e,i.hostVars,qt),i)}function PT(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function OT(n,t,e){let r=Vn(t,n),i=hT(e),o=n[_r].rendererFactory,s=lm(n,rm(n,i,null,PT(e),r,t,null,o.createRenderer(r,e),null,null,null));return n[t.index]=s}function RT(n,t,e,r,i,o){let s=Vn(n,t);FT(t[Ye],s,o,n.value,e,r,i)}function FT(n,t,e,r,i,o,s){if(o==null)n.removeAttribute(t,i,e);else{let a=s==null?yr(o):s(o,r||"",i);n.setAttribute(t,i,a,e)}}function LT(n,t,e,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],d=s[a++],p=s[a++],m=s[a++];qb(r,e,l,d,p,m)}}function VT(n,t,e){let r=null,i=0;for(;i<e.length;){let o=e[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(o,s[a+1],s[a+2],e[i+1]);break}}i+=2}return r}function Jb(n,t,e,r){return[n,!0,0,t,null,r,null,e,null,null]}function lm(n,t){return n[ea]?n[_y][Fn]=t:n[ea]=t,n[_y]=t,t}function Xb(n,t){let e=n[Xs],r=e?e.get(Ht,null):null;r&&r.handleError(t)}function cm(n,t,e,r,i){for(let o=0;o<e.length;){let s=e[o++],a=e[o++],l=e[o++],d=t[s],p=n.data[s];qb(p,d,r,a,l,i)}}function jT(n,t){let e=Jn(t,n),r=e[de];UT(r,e);let i=e[Dr];i!==null&&e[Js]===null&&(e[Js]=Cb(i,e[Xs])),um(r,e,e[Cn])}function UT(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function um(n,t,e){Hh(t);try{let r=n.viewQuery;r!==null&&Hp(1,r,e);let i=n.template;i!==null&&Wb(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[br]?.finishViewCreation(n),n.staticContentQueries&&Eb(n,t),n.staticViewQueries&&Hp(2,n.viewQuery,e);let o=n.components;o!==null&&BT(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[ee]&=-5,zh()}}function BT(n,t){for(let e=0;e<t.length;e++)jT(n,t[e])}var er=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(er||{}),$T;function dm(n,t){return $T(n,t)}function fm(n){return(n.flags&32)===32}function Oo(n,t,e,r,i){if(r!=null){let o,s=!1;xr(r)?o=r:Xr(r)&&(s=!0,r=r[Dr]);let a=Yn(r);n===0&&e!==null?i==null?$b(t,e,a):Nc(t,e,a,i||null,!0):n===1&&e!==null?Nc(t,e,a,i||null,!0):n===2?dT(t,a,s):n===3&&t.destroyNode(a),o!=null&&XT(t,n,o,e,i)}}function HT(n,t){ew(n,t),t[Dr]=null,t[zt]=null}function zT(n,t,e,r,i,o){r[Dr]=i,r[zt]=t,cu(n,r,e,1,i,o)}function ew(n,t){t[_r].changeDetectionScheduler?.notify(10),cu(n,t,t[Ye],2,null,null)}function qT(n){let t=n[ea];if(!t)return gp(n[de],n);for(;t;){let e=null;if(Xr(t))e=t[ea];else{let r=t[sn];r&&(e=r)}if(!e){for(;t&&!t[Fn]&&t!==n;)Xr(t)&&gp(t[de],t),t=t[wt];t===null&&(t=n),Xr(t)&&gp(t[de],t),e=t&&t[Fn]}t=e}}function GT(n,t,e,r){let i=sn+r,o=e.length;r>0&&(e[i-1][Fn]=t),r<o-sn?(t[Fn]=e[i],f_(e,sn+r,t)):(e.push(t),t[Fn]=null),t[wt]=e;let s=t[Ai];s!==null&&e!==s&&tw(s,t);let a=t[br];a!==null&&a.insertView(n),kp(t),t[ee]|=128}function tw(n,t){let e=n[Uo],r=t[wt];if(Xr(r))n[ee]|=2;else{let i=r[wt][En];t[En]!==i&&(n[ee]|=2)}e===null?n[Uo]=[t]:e.push(t)}function pm(n,t){let e=n[Uo],r=e.indexOf(t);e.splice(r,1)}function Jp(n,t){if(n.length<=sn)return;let e=sn+t,r=n[e];if(r){let i=r[Ai];i!==null&&i!==n&&pm(i,r),t>0&&(n[e-1][Fn]=r[Fn]);let o=vc(n,sn+t);HT(r[de],r);let s=o[br];s!==null&&s.detachView(o[de]),r[wt]=null,r[Fn]=null,r[ee]&=-129}return r}function nw(n,t){if(la(t))return;let e=t[Ye];e.destroyNode&&cu(n,t,e,3,null,null),qT(t)}function gp(n,t){if(la(t))return;let e=ye(null);try{t[ee]&=-129,t[ee]|=256,t[on]&&wo(t[on]),QT(n,t),WT(n,t),t[de].type===1&&t[Ye].destroy();let r=t[Ai];if(r!==null&&xr(t[wt])){r!==t[wt]&&pm(r,t);let i=t[br];i!==null&&i.detachView(n)}Up(t)}finally{ye(e)}}function WT(n,t){let e=n.cleanup,r=t[_c];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[e[s+1]];e[s].call(a)}r!==null&&(t[_c]=null);let i=t[Jr];if(i!==null){t[Jr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[ki];if(o!==null){t[ki]=null;for(let s of o)s.destroy()}}function QT(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let i=t[e[r]];if(!(i instanceof Ri)){let o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];wn(4,a,l);try{l.call(a)}finally{wn(5,a,l)}}else{wn(4,i,o);try{o.call(i)}finally{wn(5,i,o)}}}}}function rw(n,t,e){return KT(n,t.parent,e)}function KT(n,t,e){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return e[Dr];if(Vi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Xn.None||i===Xn.Emulated)return null}return Vn(r,e)}function iw(n,t,e){return YT(n,t,e)}function ZT(n,t,e){return n.type&40?Vn(n,e):null}var YT=ZT,By;function lu(n,t,e,r){let i=rw(n,r,t),o=t[Ye],s=r.parent||t[zt],a=iw(s,r,t);if(i!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)Vy(o,i,e[l],a,!1);else Vy(o,i,e,a,!1);By!==void 0&&By(o,r,t,e,i)}function Qs(n,t){if(t!==null){let e=t.type;if(e&3)return Vn(t,n);if(e&4)return Xp(-1,n[t.index]);if(e&8){let r=t.child;if(r!==null)return Qs(n,r);{let i=n[t.index];return xr(i)?Xp(-1,i):Yn(i)}}else{if(e&128)return Qs(n,t.next);if(e&32)return dm(t,n)()||Yn(n[t.index]);{let r=ow(n,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Pi(n[En]);return Qs(i,r)}else return Qs(n,t.next)}}}return null}function ow(n,t){if(t!==null){let r=n[En][zt],i=t.projection;return r.projection[i]}return null}function Xp(n,t){let e=sn+n+1;if(e<t.length){let r=t[e],i=r[de].firstChild;if(i!==null)return Qs(r,i)}return t[Ni]}function hm(n,t,e,r,i,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=r[e.index],l=e.type;if(s&&t===0&&(a&&Bi(Yn(a),r),e.flags|=2),!fm(e))if(l&8)hm(n,t,e.child,r,i,o,!1),Oo(t,n,i,a,o);else if(l&32){let d=dm(e,r),p;for(;p=d();)Oo(t,n,i,p,o);Oo(t,n,i,a,o)}else l&16?sw(n,t,r,e,i,o):Oo(t,n,i,a,o);e=s?e.projectionNext:e.next}}function cu(n,t,e,r,i,o){hm(e,r,n.firstChild,t,i,o,!1)}function JT(n,t,e){let r=t[Ye],i=rw(n,e,t),o=e.parent||t[zt],s=iw(o,e,t);sw(r,0,t,e,i,s)}function sw(n,t,e,r,i,o){let s=e[En],l=s[zt].projection[r.projection];if(Array.isArray(l))for(let d=0;d<l.length;d++){let p=l[d];Oo(t,n,i,p,o)}else{let d=l,p=s[wt];pb(r)&&(d.flags|=128),hm(n,t,d,p,i,o,!0)}}function XT(n,t,e,r,i){let o=e[Ni],s=Yn(e);o!==s&&Oo(t,n,r,o,i);for(let a=sn;a<e.length;a++){let l=e[a];cu(l[de],l,n,t,r,o)}}function eM(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let o=r.indexOf("-")===-1?void 0:er.DashCase;i==null?n.removeStyle(e,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=er.Important),n.setStyle(e,r,i,o))}}function aw(n,t,e,r){let i=ye(null);try{let o=t.tView,a=n[ee]&4096?4096:16,l=rm(n,o,e,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[t.index];l[Ai]=d;let p=n[br];return p!==null&&(l[br]=p.createEmbeddedView(o)),um(o,l,e),l}finally{ye(i)}}function eh(n,t){return!t||t.firstChild===null||pb(n)}function lw(n,t,e,r=!0){let i=t[de];if(GT(i,t,n,e),r){let s=Xp(e,n),a=t[Ye],l=a.parentNode(n[Ni]);l!==null&&zT(i,n[zt],a,t,l,s)}let o=t[Js];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Pc(n,t,e,r,i=!1){for(;e!==null;){if(e.type===128){e=i?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&r.push(Yn(o)),xr(o)&&tM(o,r);let s=e.type;if(s&8)Pc(n,t,e.child,r);else if(s&32){let a=dm(e,t),l;for(;l=a();)r.push(l)}else if(s&16){let a=ow(t,e);if(Array.isArray(a))r.push(...a);else{let l=Pi(t[En]);Pc(l[de],l,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function tM(n,t){for(let e=sn;e<n.length;e++){let r=n[e],i=r[de].firstChild;i!==null&&Pc(r[de],r,i,t)}n[Ni]!==n[Dr]&&t.push(n[Ni])}var cw=[];function nM(n){return n[on]??rM(n)}function rM(n){let t=cw.pop()??Object.create(oM);return t.lView=n,t}function iM(n){n.lView[on]!==n&&(n.lView=null,cw.push(n))}var oM=G(N({},wi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ca(n.lView)},consumerOnSignalRead(){this.lView[on]=this}});function sM(n){let t=n[on]??Object.create(aM);return t.lView=n,t}var aM=G(N({},wi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=Pi(n.lView);for(;t&&!uw(t[de]);)t=Pi(t);t&&jh(t)},consumerOnSignalRead(){this.lView[on]=this}});function uw(n){return n.type!==2}function dw(n){if(n[ki]===null)return;let t=!0;for(;t;){let e=!1;for(let r of n[ki])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=e&&!!(n[ee]&8192)}}var lM=100;function fw(n,t=!0,e=0){let i=n[_r].rendererFactory,o=!1;o||i.begin?.();try{cM(n,e)}catch(s){throw t&&Xb(n,s),s}finally{o||i.end?.()}}function cM(n,t){let e=U_();try{Cc(!0),th(n,t);let r=0;for(;Kc(n);){if(r===lM)throw new k(103,!1);r++,th(n,1)}}finally{Cc(e)}}function uM(n,t,e,r){if(la(t))return;let i=t[ee],o=!1,s=!1;Hh(t);let a=!0,l=null,d=null;o||(uw(n)?(d=nM(t),l=bo(d)):Tv()===null?(a=!1,d=sM(t),l=bo(d)):t[on]&&(wo(t[on]),t[on]=null));try{P_(t),Mx(n.bindingStartIndex),e!==null&&Wb(n,t,e,2,r);let p=(i&3)===3;if(!o)if(p){let v=n.preOrderCheckHooks;v!==null&&uc(t,v,null)}else{let v=n.preOrderHooks;v!==null&&dc(t,v,0,null),pp(t,0)}if(s||dM(t),dw(t),pw(t,0),n.contentQueries!==null&&Eb(n,t),!o)if(p){let v=n.contentCheckHooks;v!==null&&uc(t,v)}else{let v=n.contentHooks;v!==null&&dc(t,v,1),pp(t,1)}pM(n,t);let m=n.components;m!==null&&mw(t,m,0);let y=n.viewQuery;if(y!==null&&Hp(2,y,r),!o)if(p){let v=n.viewCheckHooks;v!==null&&uc(t,v)}else{let v=n.viewHooks;v!==null&&dc(t,v,2),pp(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[cc]){for(let v of t[cc])v();t[cc]=null}o||(t[ee]&=-73)}catch(p){throw o||ca(t),p}finally{d!==null&&(js(d,l),a&&iM(d)),zh()}}function pw(n,t){for(let e=gb(n);e!==null;e=vb(e))for(let r=sn;r<e.length;r++){let i=e[r];hw(i,t)}}function dM(n){for(let t=gb(n);t!==null;t=vb(t)){if(!(t[ee]&2))continue;let e=t[Uo];for(let r=0;r<e.length;r++){let i=e[r];jh(i)}}}function fM(n,t,e){let r=Jn(t,n);hw(r,e)}function hw(n,t){Vh(n)&&th(n,t)}function th(n,t){let r=n[de],i=n[ee],o=n[on],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&Us(o)),s||=!1,o&&(o.dirty=!1),n[ee]&=-9217,s)uM(r,n,r.template,n[Cn]);else if(i&8192){dw(n),pw(n,1);let a=r.components;a!==null&&mw(n,a,1)}}function mw(n,t,e){for(let r=0;r<t.length;r++)fM(n,t[r],e)}function pM(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let i=e[r];if(i<0)Oi(~i);else{let o=i,s=e[++r],a=e[++r];kx(s,o);let l=t[o];wn(24,l),a(2,l),wn(25,l)}}}finally{Oi(-1)}}function mm(n,t){let e=U_()?64:1088;for(n[_r].changeDetectionScheduler?.notify(t);n;){n[ee]|=e;let r=Pi(n);if(wc(n)&&!r)return n;n=r}return null}var Fi=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,e=t[de];return Pc(e,t,e.firstChild,[])}constructor(t,e,r=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=r}get context(){return this._lView[Cn]}get dirty(){return!!(this._lView[ee]&9280)||!!this._lView[on]?.dirty}set context(t){this._lView[Cn]=t}get destroyed(){return la(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[wt];if(xr(t)){let e=t[bc],r=e?e.indexOf(this):-1;r>-1&&(Jp(t,r),vc(e,r))}this._attachedToViewContainer=!1}nw(this._lView[de],this._lView)}onDestroy(t){O_(this._lView,t)}markForCheck(){mm(this._cdRefInjectingView||this._lView,4)}markForRefresh(){jh(this._cdRefInjectingView||this._lView)}detach(){this._lView[ee]&=-129}reattach(){kp(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,fw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new k(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=wc(this._lView),e=this._lView[Ai];e!==null&&!t&&pm(e,this._lView),ew(this._lView[de],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new k(902,!1);this._appRef=t;let e=wc(this._lView),r=this._lView[Ai];r!==null&&!e&&tw(r,this._lView),kp(this._lView)}},ni=(()=>{class n{static __NG_ELEMENT_ID__=gM}return n})(),hM=ni,mM=class extends hM{_declarationLView;_declarationTContainer;elementRef;constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,r){let i=aw(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:r});return new Fi(i)}};function gM(){return uu(Ot(),ae())}function uu(n,t){return n.type&4?new mM(t,n,Wo(n,t)):null}function Ko(n,t,e,r,i){let o=n.data[t];if(o===null)o=vM(n,t,e,r,i),Ax()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=r,o.attrs=i;let s=Ix();o.injectorIndex=s===null?-1:s.injectorIndex}return ji(o,!0),o}function vM(n,t,e,r,i){let o=j_(),s=Uh(),a=s?o:o&&o.parent,l=n.data[t]=_M(n,a,e,t,r,i);return yM(n,l,o,s),l}function yM(n,t,e,r){n.firstChild===null&&(n.firstChild=t),e!==null&&(r?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function _M(n,t,e,r,i,o){let s=t?t.injectorIndex:-1,a=0;return V_()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var k6=new RegExp(`^(\\d+)*(${_I}|${yI})*(.*)`);var bM=()=>null;function nh(n,t){return bM(n,t)}var rh=class{},Oc=class{},ih=class{resolveComponentFactory(t){throw Error(`No component factory found for ${Nt(t)}.`)}},Ho=class{static NULL=new ih},ri=class{},xn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>wM()}return n})();function wM(){let n=ae(),t=Ot(),e=Jn(t.index,n);return(Xr(e)?e:n)[Ye]}var CM=(()=>{class n{static \u0275prov=P({token:n,providedIn:"root",factory:()=>null})}return n})();function Rc(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=Ep(i,a);else if(o==2){let l=a,d=t[++s];r=Ep(r,l+": "+d+";")}}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}var Fc=class extends Ho{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=Mi(t);return new ra(e,this.ngModule)}};function $y(n,t){let e=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:ti.None;t?e.push({propName:s,templateName:r,isSignal:(a&ti.SignalBased)!==0}):e.push({propName:s,templateName:r})}return e}function EM(n){let t=n.toLowerCase();return t==="svg"?mx:t==="math"?gx:null}var ra=class extends Oc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let t=this.componentDef,e=t.inputTransforms,r=$y(t.inputs,!0);if(e!==null)for(let i of r)e.hasOwnProperty(i.propName)&&(i.transform=e[i.propName]);return r}get outputs(){return $y(this.componentDef.outputs,!1)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=sT(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,r,i){let o=ye(null);try{i=i||this.ngModule;let s=i instanceof $t?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Op(t,s):t,l=a.get(ri,null);if(l===null)throw new k(407,!1);let d=a.get(CM,null),p=a.get(ei,null),m={rendererFactory:l,sanitizer:d,changeDetectionScheduler:p},y=l.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?gT(y,r,this.componentDef.encapsulation,a):Bb(y,v,EM(v)),C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let x=null;b!==null&&(x=Cb(b,a,!0));let A=sm(0,null,null,1,0,null,null,null,null,null,null),j=rm(null,A,null,C,null,null,m,y,a,null,x);j[Pt]=b,Hh(j);let U=null;try{let q=r?["ng-version","19.1.4"]:aT(this.componentDef.selectors[0]),Q=Ko(A,Pt,2,"#host",q),[De,Te]=Yb(A,Q,[this.componentDef]);Zb(A,j,Q,De,{},Te);for(let qe of De)Q.mergedAttrs=$o(Q.mergedAttrs,qe.hostAttrs);Q.mergedAttrs=$o(Q.mergedAttrs,q),Rc(Q,Q.mergedAttrs,!0),b&&(Hb(y,b,Q),Bi(b,j)),e!==void 0&&SM(Q,this.ngContentSelectors,e),Qb(A,j,Q),em(A,Q,j),tu(A,Q),U=Jn(Q.index,j),j[Cn]=U[Cn],um(A,j,null)}catch(q){throw U!==null&&Up(U),Up(j),q}finally{zh()}return new oh(this.componentType,j)}finally{ye(o)}}},oh=class extends rh{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e){super(),this._rootLView=e,this._tNode=k_(e[de],Pt),this.location=Wo(this._tNode,e),this.instance=Jn(this._tNode.index,e)[Cn],this.hostView=this.changeDetectorRef=new Fi(e,void 0,!1),this.componentType=t}setInput(t,e){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let o=this._rootLView;cm(o[de],o,i,t,e),this.previousInputValues.set(t,e);let s=Jn(this._tNode.index,o);mm(s,1)}}get injector(){return new Ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function SM(n,t,e){let r=n.projection=[];for(let i=0;i<t.length;i++){let o=e[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ar=(()=>{class n{static __NG_ELEMENT_ID__=DM}return n})();function DM(){let n=Ot();return vw(n,ae())}var xM=Ar,gw=class extends xM{_lContainer;_hostTNode;_hostLView;constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return Wo(this._hostTNode,this._hostLView)}get injector(){return new Ii(this._hostTNode,this._hostLView)}get parentInjector(){let t=Gh(this._hostTNode,this._hostLView);if(Y_(t)){let e=Sc(t,this._hostLView),r=Ec(t),i=e[de].data[r+8];return new Ii(i,e)}else return new Ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=Hy(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-sn}createEmbeddedView(t,e,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=nh(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,i,eh(this._hostTNode,s)),a}createComponent(t,e,r,i,o){let s=t&&!dx(t),a;if(s)a=e;else{let b=e||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let l=s?t:new ra(Mi(t)),d=r||this.parentInjector;if(!o&&l.ngModule==null){let C=(s?d:this.parentInjector).get($t,null);C&&(o=C)}let p=Mi(l.componentType??{}),m=nh(this._lContainer,p?.id??null),y=m?.firstChild??null,v=l.create(d,i,y,o);return this.insertImpl(v.hostView,a,eh(this._hostTNode,m)),v}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){let i=t._lView;if(yx(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=i[wt],d=new gw(l,l[zt],l[wt]);d.detach(d.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return lw(s,i,o,r),t.attachToViewContainerRef(),f_(vp(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=Hy(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),r=Jp(this._lContainer,e);r&&(vc(vp(this._lContainer),e),nw(r[de],r))}detach(t){let e=this._adjustIndex(t,-1),r=Jp(this._lContainer,e);return r&&vc(vp(this._lContainer),e)!=null?new Fi(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function Hy(n){return n[bc]}function vp(n){return n[bc]||(n[bc]=[])}function vw(n,t){let e,r=t[n.index];return xr(r)?e=r:(e=Jb(r,t,null,n),t[n.index]=e,lm(t,e)),TM(e,t,n,r),new gw(e,n,t)}function IM(n,t){let e=n[Ye],r=e.createComment(""),i=Vn(t,n),o=e.parentNode(i);return Nc(e,o,r,e.nextSibling(i),!1),r}var TM=kM,MM=()=>!1;function AM(n,t,e){return MM(n,t,e)}function kM(n,t,e,r){if(n[Ni])return;let i;e.type&8?i=Yn(r):i=IM(t,e),n[Ni]=i}var sh=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},ah=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let r=t.contentQueries!==null?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)gm(t,e).matches!==null&&this.queries[e].setDirty()}},lh=class{flags;read;predicate;constructor(t,e,r=null){this.flags=e,this.read=r,typeof t=="string"?this.predicate=jM(t):this.predicate=t}},ch=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){let i=e!==null?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},uh=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,e,NM(e,o)),this.matchTNodeWithReadOption(t,e,fc(e,t,o,!1,!1))}else r===ni?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,fc(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===nt||i===Ar||i===ni&&e.type&4)this.addMatch(e.index,-2);else{let o=fc(e,t,i,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function NM(n,t){let e=n.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1]}return null}function PM(n,t){return n.type&11?Wo(n,t):n.type&4?uu(n,t):null}function OM(n,t,e,r){return e===-1?PM(t,n):e===-2?RM(n,t,r):ta(n,n[de],e,t)}function RM(n,t,e){if(e===nt)return Wo(t,n);if(e===ni)return uu(t,n);if(e===Ar)return vw(t,n)}function yw(n,t,e,r){let i=t[br].queries[r];if(i.matches===null){let o=n.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let d=s[l];if(d<0)a.push(null);else{let p=o[d];a.push(OM(t,p,s[l+1],e.metadata.read))}}i.matches=a}return i.matches}function dh(n,t,e,r){let i=n.queries.getByIndex(e),o=i.matches;if(o!==null){let s=yw(n,t,i,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let d=o[a+1],p=t[-l];for(let m=sn;m<p.length;m++){let y=p[m];y[Ai]===y[wt]&&dh(y[de],y,d,r)}if(p[Uo]!==null){let m=p[Uo];for(let y=0;y<m.length;y++){let v=m[y];dh(v[de],v,d,r)}}}}}return r}function FM(n,t){return n[br].queries[t].queryList}function LM(n,t,e){let r=new kc((e&4)===4);return wx(n,t,r,r.destroy),(t[br]??=new ah).queries.push(new sh(r))-1}function VM(n,t,e){let r=tt();return r.firstCreatePass&&(UM(r,new lh(n,t,e),-1),(t&2)===2&&(r.staticViewQueries=!0)),LM(r,ae(),t)}function jM(n){return n.split(",").map(t=>t.trim())}function UM(n,t,e){n.queries===null&&(n.queries=new ch),n.queries.track(new uh(t,e))}function gm(n,t){return n.queries.getByIndex(t)}function BM(n,t){let e=n[de],r=gm(e,t);return r.crossesNgTemplate?dh(e,n,t,[]):yw(e,n,r,t)}var ii=class{},ia=class{};var fh=class extends ii{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Fc(this);constructor(t,e,r,i=!0){super(),this.ngModuleType=t,this._parent=e;let o=m_(t);this._bootstrapComponents=Vb(o.bootstrap),this._r3Injector=sb(t,e,[{provide:ii,useValue:this},{provide:Ho,useValue:this.componentFactoryResolver},...r],Nt(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},ph=class extends ia{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new fh(this.moduleType,t,[])}};var Lc=class extends ii{injector;componentFactoryResolver=new Fc(this);instance=null;constructor(t){super();let e=new Ys([...t.providers,{provide:ii,useValue:this},{provide:Ho,useValue:this.componentFactoryResolver}],t.parent||Rh(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function vm(n,t,e=null){return new Lc({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var $M=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=__(!1,e.type),i=r.length>0?vm([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=P({token:n,providedIn:"environment",factory:()=>new n(F($t))})}return n})();function V(n){return sa(()=>{let t=_w(n),e=G(N({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===hb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get($M).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Xn.Emulated,styles:n.styles||Bt,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&jn("NgStandalone"),bw(e);let r=n.dependencies;return e.directiveDefs=qy(r,!1),e.pipeDefs=qy(r,!0),e.id=qM(e),e})}function HM(n){return Mi(n)||g_(n)}function zM(n){return n!==null}function lt(n){return sa(()=>({type:n.type,bootstrap:n.bootstrap||Bt,declarations:n.declarations||Bt,imports:n.imports||Bt,exports:n.exports||Bt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function zy(n,t){if(n==null)return Lo;let e={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=ti.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),t?(e[o]=a!==ti.None?[r,a]:r,t[o]=s):e[o]=r}return e}function ve(n){return sa(()=>{let t=_w(n);return bw(t),t})}function ym(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function _w(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||Lo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Bt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zy(n.inputs,t),outputs:zy(n.outputs),debugInfo:null}}function bw(n){n.features?.forEach(t=>t(n))}function qy(n,t){if(!n)return null;let e=t?v_:HM;return()=>(typeof n=="function"?n():n).map(r=>e(r)).filter(zM)}function qM(n){let t=0,e=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function GM(n){return Object.getPrototypeOf(n.prototype).constructor}function ut(n){let t=GM(n.type),e=!0,r=[n];for(;t;){let i;if(wr(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new k(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);let s=n;s.inputs=sc(n.inputs),s.inputTransforms=sc(n.inputTransforms),s.declaredInputs=sc(n.declaredInputs),s.outputs=sc(n.outputs);let a=i.hostBindings;a&&YM(n,a);let l=i.viewQuery,d=i.contentQueries;if(l&&KM(n,l),d&&ZM(n,d),WM(n,i),AD(n.outputs,i.outputs),wr(i)&&i.data.animation){let p=n.data;p.animation=(p.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ut&&(e=!1)}}t=Object.getPrototypeOf(t)}QM(r)}function WM(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let r=t.inputs[e];if(r!==void 0&&(n.inputs[e]=r,n.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=t.inputTransforms[i]}}}function QM(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=$o(i.hostAttrs,e=$o(e,i.hostAttrs))}}function sc(n){return n===Lo?{}:n===Bt?[]:n}function KM(n,t){let e=n.viewQuery;e?n.viewQuery=(r,i)=>{t(r,i),e(r,i)}:n.viewQuery=t}function ZM(n,t){let e=n.contentQueries;e?n.contentQueries=(r,i,o)=>{t(r,i,o),e(r,i,o)}:n.contentQueries=t}function YM(n,t){let e=n.hostBindings;e?n.hostBindings=(r,i)=>{t(r,i),e(r,i)}:n.hostBindings=t}function $i(n){let t=n.inputConfig,e={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r];Array.isArray(i)&&i[3]&&(e[r]=i[3])}n.inputTransforms=e}function ww(n){return _m(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function JM(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),r;for(;!(r=e.next()).done;)t(r.value)}}function _m(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function bm(n,t,e){return n[t]=e}function XM(n,t){return n[t]}function Er(n,t,e){let r=n[t];return Object.is(r,e)?!1:(n[t]=e,!0)}function wm(n,t,e,r){let i=Er(n,t,e);return Er(n,t+1,r)||i}function Cw(n,t,e,r,i){let o=wm(n,t,e,r);return Er(n,t+2,i)||o}function eA(n,t,e,r,i,o,s,a,l){let d=t.consts,p=Ko(t,n,4,s||null,a||null);am(t,e,p,Bo(d,l)),tu(t,p);let m=p.tView=sm(2,p,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,d,null);return t.queries!==null&&(t.queries.template(t,p),m.queries=t.queries.embeddedTView(p)),p}function Ew(n,t,e,r,i,o,s,a,l,d){let p=e+Pt,m=t.firstCreatePass?eA(p,t,n,r,i,o,s,a,l):t.data[p];ji(m,!1);let y=tA(t,n,m,e);Xc()&&lu(t,n,y,m),Bi(y,n);let v=Jb(y,n,y,m);return n[p]=v,lm(n,v),AM(v,m,n),Qc(m)&&im(t,n,m),l!=null&&om(n,m,d),m}function E(n,t,e,r,i,o,s,a){let l=ae(),d=tt(),p=Bo(d.consts,o);return Ew(l,d,n,t,e,r,i,p,s,a),E}var tA=nA;function nA(n,t,e,r){return eu(!0),t[Ye].createComment("")}var Cm=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Sw=new $("");function Hi(n){return!!n&&typeof n.then=="function"}function Dw(n){return!!n&&typeof n.subscribe=="function"}var xw=new $("");var Iw=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=I(xw,{optional:!0})??[];injector=I(mt);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let o=an(this.injector,i);if(Hi(o))e.push(o);else if(Dw(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Tw=(()=>{class n{static \u0275prov=P({token:n,providedIn:"root",factory:()=>new Vc})}return n})(),Vc=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let e=t.zone,r=this.queues.get(e);r.has(t)&&(r.delete(t),this.queuedEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}},du=new $("");function rA(){jv(()=>{throw new k(600,!1)})}function iA(n){return n.isBoundToModule}var oA=10;function sA(n,t,e){try{let r=e();return Hi(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}var Sr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=I(aI);afterRenderManager=I(wb);zonelessEnabled=I(ru);rootEffectScheduler=I(Tw);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Ue;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=I(Tr).hasPendingTasks.pipe(Y(e=>!e));constructor(){I(Qo,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=I($t);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){let i=e instanceof Oc;if(!this._injector.get(Iw).done){let y=!i&&y_(e),v=!1;throw new k(405,v)}let s;i?s=e:s=this._injector.get(Ho).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=iA(s)?void 0:this._injector.get(ii),l=r||s.selector,d=s.create(mt.NULL,[],l,a),p=d.location.nativeElement,m=d.injector.get(Sw,null);return m?.registerApplication(p),d.onDestroy(()=>{this.detachView(d.hostView),pc(this.components,d),m?.unregisterApplication(p)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(Jh.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new k(101,!1);let e=ye(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ye(e),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ri,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let e=0;for(;this.dirtyFlags!==0&&e++<oA;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)aA(r,i,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Kc(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;pc(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(du,[]).forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>pc(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new k(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pc(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function aA(n,t,e,r){if(!e&&!Kc(n))return;fw(n,t,e&&!r?0:1)}function tr(n,t,e,r){let i=ae(),o=Yc();if(Er(i,o,t)){let s=tt(),a=qh();RT(a,i,n,t,e,r)}return tr}function lA(n,t,e,r){return Er(n,Yc(),e)?t+yr(e)+r:qt}function cA(n,t,e,r,i,o){let s=B_(),a=wm(n,s,e,i);return Jc(2),a?t+yr(e)+r+yr(i)+o:qt}function uA(n,t,e,r,i,o,s,a){let l=B_(),d=Cw(n,l,e,i,s);return Jc(3),d?t+yr(e)+r+yr(i)+o+yr(s)+a:qt}function ac(n,t){return n<<17|t<<2}function Li(n){return n>>17&32767}function dA(n){return(n&2)==2}function fA(n,t){return n&131071|t<<17}function hh(n){return n|2}function zo(n){return(n&131068)>>2}function yp(n,t){return n&-131069|t<<2}function pA(n){return(n&1)===1}function mh(n){return n|1}function hA(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Li(s),l=zo(s);n[r]=e;let d=!1,p;if(Array.isArray(e)){let m=e;p=m[1],(p===null||aa(m,p)>0)&&(d=!0)}else p=e;if(i)if(l!==0){let y=Li(n[a+1]);n[r+1]=ac(y,a),y!==0&&(n[y+1]=yp(n[y+1],r)),n[a+1]=fA(n[a+1],r)}else n[r+1]=ac(a,0),a!==0&&(n[a+1]=yp(n[a+1],r)),a=r;else n[r+1]=ac(l,0),a===0?a=r:n[l+1]=yp(n[l+1],r),l=r;d&&(n[r+1]=hh(n[r+1])),Gy(n,p,r,!0),Gy(n,p,r,!1),mA(t,p,n,r,o),s=ac(a,l),o?t.classBindings=s:t.styleBindings=s}function mA(n,t,e,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&aa(o,t)>=0&&(e[r+1]=mh(e[r+1]))}function Gy(n,t,e,r){let i=n[e+1],o=t===null,s=r?Li(i):zo(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],d=n[s+1];gA(l,t)&&(a=!0,n[s+1]=r?mh(d):hh(d)),s=r?Li(d):zo(d)}a&&(n[e+1]=r?hh(i):mh(i))}function gA(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?aa(n,t)>=0:!1}var Rn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function vA(n){return n.substring(Rn.key,Rn.keyEnd)}function yA(n){return _A(n),Mw(n,Aw(n,0,Rn.textEnd))}function Mw(n,t){let e=Rn.textEnd;return e===t?-1:(t=Rn.keyEnd=bA(n,Rn.key=t,e),Aw(n,t,e))}function _A(n){Rn.key=0,Rn.keyEnd=0,Rn.value=0,Rn.valueEnd=0,Rn.textEnd=n.length}function Aw(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function bA(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function g(n,t,e){let r=ae(),i=Yc();if(Er(r,i,t)){let o=tt(),s=qh();Kb(o,s,r,n,t,r[Ye],e,!1)}return g}function gh(n,t,e,r,i){let o=t.inputs,s=i?"class":"style";cm(n,e,o[s],s,r)}function Gt(n,t,e){return kw(n,t,e,!1),Gt}function Ee(n,t){return kw(n,t,null,!0),Ee}function fu(n){CA(TA,wA,n,!0)}function wA(n,t){for(let e=yA(t);e>=0;e=Mw(t,e))Ph(n,vA(t),!0)}function kw(n,t,e,r){let i=ae(),o=tt(),s=Jc(2);if(o.firstUpdatePass&&Pw(o,n,s,r),t!==qt&&Er(i,s,t)){let a=o.data[Ir()];Ow(o,a,i,i[Ye],n,i[s+1]=AA(t,e),r,s)}}function CA(n,t,e,r){let i=tt(),o=Jc(2);i.firstUpdatePass&&Pw(i,null,o,r);let s=ae();if(e!==qt&&Er(s,o,e)){let a=i.data[Ir()];if(Rw(a,r)&&!Nw(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=Ep(l,e||"")),gh(i,a,s,e,r)}else MA(i,a,s,s[Ye],s[o+1],s[o+1]=IA(n,t,e),r,o)}}function Nw(n,t){return t>=n.expandoStartIndex}function Pw(n,t,e,r){let i=n.data;if(i[e+1]===null){let o=i[Ir()],s=Nw(n,e);Rw(o,r)&&t===null&&!s&&(t=!1),t=EA(i,o,t,r),hA(i,o,t,e,s,r)}}function EA(n,t,e,r){let i=Px(n),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(e=_p(null,n,t,e,r),e=oa(e,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==i)if(e=_p(i,n,t,e,r),o===null){let l=SA(n,t,r);l!==void 0&&Array.isArray(l)&&(l=_p(null,n,t,l[1],r),l=oa(l,t.attrs,r),DA(n,t,r,l))}else o=xA(n,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),e}function SA(n,t,e){let r=e?t.classBindings:t.styleBindings;if(zo(r)!==0)return n[Li(r)]}function DA(n,t,e,r){let i=e?t.classBindings:t.styleBindings;n[Li(i)]=r}function xA(n,t,e){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=oa(r,s,e)}return oa(r,t.attrs,e)}function _p(n,t,e,r,i){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],r=oa(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),r}function oa(n,t,e){let r=e?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Ph(n,s,e?!0:t[++o]))}return n===void 0?null:n}function IA(n,t,e){if(e==null||e==="")return Bt;let r=[],i=Un(e);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function TA(n,t,e){let r=String(t);r!==""&&!r.includes(" ")&&Ph(n,r,e)}function MA(n,t,e,r,i,o,s,a){i===qt&&(i=Bt);let l=0,d=0,p=0<i.length?i[0]:null,m=0<o.length?o[0]:null;for(;p!==null||m!==null;){let y=l<i.length?i[l+1]:void 0,v=d<o.length?o[d+1]:void 0,b=null,C;p===m?(l+=2,d+=2,y!==v&&(b=m,C=v)):m===null||p!==null&&p<m?(l+=2,b=p):(d+=2,b=m,C=v),b!==null&&Ow(n,t,e,r,b,C,s,a),p=l<i.length?i[l]:null,m=d<o.length?o[d]:null}}function Ow(n,t,e,r,i,o,s,a){if(!(t.type&3))return;let l=n.data,d=l[a+1],p=pA(d)?Wy(l,t,e,i,zo(d),s):void 0;if(!jc(p)){jc(o)||dA(d)&&(o=Wy(l,null,e,i,a,s));let m=A_(Ir(),e);eM(r,s,m,i,o)}}function Wy(n,t,e,r,i,o){let s=t===null,a;for(;i>0;){let l=n[i],d=Array.isArray(l),p=d?l[1]:l,m=p===null,y=e[i+1];y===qt&&(y=m?Bt:void 0);let v=m?dp(y,r):p===r?y:void 0;if(d&&!jc(v)&&(v=dp(l,r)),jc(v)&&(a=v,s))return a;let b=n[i+1];i=s?Li(b):zo(b)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=dp(l,r))}return a}function jc(n){return n!==void 0}function AA(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=Nt(Un(n)))),n}function Rw(n,t){return(n.flags&(t?8:16))!==0}function kA(n,t,e,r,i,o){let s=t.consts,a=Bo(s,i),l=Ko(t,n,2,r,a);return am(t,e,l,Bo(s,o)),l.attrs!==null&&Rc(l,l.attrs,!1),l.mergedAttrs!==null&&Rc(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function u(n,t,e,r){let i=ae(),o=tt(),s=Pt+n,a=i[Ye],l=o.firstCreatePass?kA(s,o,i,t,e,r):o.data[s],d=NA(o,i,l,a,t,n);i[s]=d;let p=Qc(l);return ji(l,!0),Hb(a,d,l),!fm(l)&&Xc()&&lu(o,i,d,l),Cx()===0&&Bi(d,i),Ex(),p&&(im(o,i,l),em(o,l,i)),r!==null&&om(i,l),u}function c(){let n=Ot();Uh()?Bh():(n=n.parent,ji(n,!1));let t=n;Dx(t)&&xx(),Sx();let e=tt();return e.firstCreatePass&&(tu(e,n),Lh(n)&&e.queries.elementEnd(n)),t.classesWithoutHost!=null&&Ux(t)&&gh(e,t,ae(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Bx(t)&&gh(e,t,ae(),t.stylesWithoutHost,!1),c}function _(n,t,e,r){return u(n,t,e,r),c(),_}var NA=(n,t,e,r,i,o)=>(eu(!0),Bb(r,i,Fx()));function PA(n,t,e,r,i){let o=t.consts,s=Bo(o,r),a=Ko(t,n,8,"ng-container",s);s!==null&&Rc(a,s,!0);let l=Bo(o,i);return am(t,e,a,l),t.queries!==null&&t.queries.elementStart(t,a),a}function Dt(n,t,e){let r=ae(),i=tt(),o=n+Pt,s=i.firstCreatePass?PA(o,i,r,t,e):i.data[o];ji(s,!0);let a=OA(i,r,s,n);return r[o]=a,Xc()&&lu(i,r,a,s),Bi(a,r),Qc(s)&&(im(i,r,s),em(i,s,r)),e!=null&&om(r,s),Dt}function xt(){let n=Ot(),t=tt();return Uh()?Bh():(n=n.parent,ji(n,!1)),t.firstCreatePass&&(tu(t,n),Lh(n)&&t.queries.elementEnd(n)),xt}var OA=(n,t,e,r)=>(eu(!0),uT(t[Ye],""));function J(){return ae()}var xi=void 0;function RA(n){let t=n,e=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&r===0?1:5}var FA=["en",[["a","p"],["AM","PM"],xi],[["AM","PM"],xi,xi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xi,"{1} 'at' {0}",xi],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",RA],bp={};function ln(n){let t=LA(n),e=Qy(t);if(e)return e;let r=t.split("-")[0];if(e=Qy(r),e)return e;if(r==="en")return FA;throw new k(701,!1)}function Qy(n){return n in bp||(bp[n]=vr.ng&&vr.ng.common&&vr.ng.common.locales&&vr.ng.common.locales[n]),bp[n]}var Je=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Je||{});function LA(n){return n.toLowerCase().replace(/_/g,"-")}var Uc="en-US";var VA=Uc;function jA(n){typeof n=="string"&&(VA=n.toLowerCase().replace(/_/g,"-"))}var UA=(n,t,e)=>{};function S(n,t,e,r){let i=ae(),o=tt(),s=Ot();return Fw(o,i,i[Ye],s,n,t,r),S}function BA(n,t,e,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===e&&i[o+1]===r){let a=t[_c],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function Fw(n,t,e,r,i,o,s){let a=Qc(r),d=n.firstCreatePass&&F_(n),p=t[Cn],m=R_(t),y=!0;if(r.type&3||s){let C=Vn(r,t),x=s?s(C):C,A=m.length,j=s?q=>s(Yn(q[r.index])):r.index,U=null;if(!s&&a&&(U=BA(n,t,i,r.index)),U!==null){let q=U.__ngLastListenerFn__||U;q.__ngNextListenerFn__=o,U.__ngLastListenerFn__=o,y=!1}else{o=Zy(r,t,p,o),UA(C,i,o);let q=e.listen(x,i,o);m.push(o,q),d&&d.push(i,j,A,A+1)}}else o=Zy(r,t,p,o);let v=r.outputs,b;if(y&&v!==null&&(b=v[i])){let C=b.length;if(C)for(let x=0;x<C;x+=2){let A=b[x],j=b[x+1],Q=t[A][j].subscribe(o),De=m.length;m.push(o,Q),d&&d.push(i,r.index,De,-(De+1))}}}function Ky(n,t,e,r){let i=ye(null);try{return wn(6,t,e),e(r)!==!1}catch(o){return Xb(n,o),!1}finally{wn(7,t,e),ye(i)}}function Zy(n,t,e,r){return function i(o){if(o===Function)return r;let s=Vi(n)?Jn(n.index,t):t;mm(s,5);let a=Ky(t,e,r,o),l=i.__ngNextListenerFn__;for(;l;)a=Ky(t,e,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function w(n=1){return Rx(n)}function $A(n,t){let e=null,r=tT(n);for(let i=0;i<t.length;i++){let o=t[i];if(o==="*"){e=i;continue}if(r===null?Ub(n,o,!0):iT(r,o))return i}return e}function Em(n){let t=ae()[En][zt];if(!t.projection){let e=n?n.length:1,r=t.projection=YD(e,null),i=r.slice(),o=t.child;for(;o!==null;){if(o.type!==128){let s=n?$A(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function Sm(n,t=0,e,r,i,o){let s=ae(),a=tt(),l=r?n+1:null;l!==null&&Ew(s,a,l,r,i,o,null,e);let d=Ko(a,Pt+n,16,null,e||null);d.projection===null&&(d.projection=t),Bh();let m=!s[Js]||V_();s[En][zt].projection[d.projection]===null&&l!==null?HA(s,a,l):m&&!fm(d)&&JT(a,s,d)}function HA(n,t,e){let r=Pt+e,i=t.data[r],o=n[r],s=nh(o,i.tView.ssrId),a=aw(n,i,void 0,{dehydratedView:s});lw(o,a,0,eh(i,s))}function Dm(n,t,e){VM(n,t,e)}function pu(n){let t=ae(),e=tt(),r=$_();$h(r+1);let i=gm(e,r);if(n.dirty&&vx(t)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=BM(t,r);n.reset(o,uI),n.notifyOnChanges()}return!0}return!1}function hu(){return FM(ae(),$_())}function zA(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}function nr(n){let t=Tx();return N_(t,Pt+n)}function f(n,t=""){let e=ae(),r=tt(),i=n+Pt,o=r.firstCreatePass?Ko(r,i,1,t,null):r.data[i],s=qA(r,e,o,t,n);e[i]=s,Xc()&&lu(r,e,s,o),ji(o,!1)}var qA=(n,t,e,r,i)=>(eu(!0),lT(t[Ye],r));function L(n){return O("",n,""),L}function O(n,t,e){let r=ae(),i=lA(r,n,t,e);return i!==qt&&Im(r,Ir(),i),O}function fa(n,t,e,r,i){let o=ae(),s=cA(o,n,t,e,r,i);return s!==qt&&Im(o,Ir(),s),fa}function xm(n,t,e,r,i,o,s){let a=ae(),l=uA(a,n,t,e,r,i,o,s);return l!==qt&&Im(a,Ir(),l),xm}function Im(n,t,e){let r=A_(t,n);cT(n[Ye],r,e)}function Be(n,t,e){fb(t)&&(t=t());let r=ae(),i=Yc();if(Er(r,i,t)){let o=tt(),s=qh();Kb(o,s,r,n,t,r[Ye],e,!1)}return Be}function Ke(n,t){let e=fb(n);return e&&n.set(t),e}function $e(n,t){let e=ae(),r=tt(),i=Ot();return Fw(r,e,e[Ye],i,n,t),$e}function GA(n,t,e){let r=tt();if(r.firstCreatePass){let i=wr(n);vh(e,r.data,r.blueprint,i,!0),vh(t,r.data,r.blueprint,i,!1)}}function vh(n,t,e,r,i){if(n=kt(n),Array.isArray(n))for(let o=0;o<n.length;o++)vh(n[o],t,e,r,i);else{let o=tt(),s=ae(),a=Ot(),l=jo(n)?n:kt(n.provide),d=C_(n),p=a.providerIndexes&1048575,m=a.directiveStart,y=a.providerIndexes>>20;if(jo(n)||!n.multi){let v=new Ri(d,i,D),b=Cp(l,t,i?p:p+y,m);b===-1?(Fp(xc(a,s),o,l),wp(o,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(v),s.push(v)):(e[b]=v,s[b]=v)}else{let v=Cp(l,t,p+y,m),b=Cp(l,t,p,p+y),C=v>=0&&e[v],x=b>=0&&e[b];if(i&&!x||!i&&!C){Fp(xc(a,s),o,l);let A=KA(i?QA:WA,e.length,i,r,d);!i&&x&&(e[b].providerFactory=A),wp(o,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(A),s.push(A)}else{let A=Lw(e[i?b:v],d,!i&&r);wp(o,n,v>-1?v:b,A)}!i&&r&&x&&e[b].componentProviders++}}}function wp(n,t,e,r){let i=jo(t),o=ix(t);if(i||o){let l=(o?kt(t.useClass):t).prototype.ngOnDestroy;if(l){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){let p=d.indexOf(e);p===-1?d.push(e,[r,l]):d[p+1].push(r,l)}else d.push(e,l)}}}function Lw(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Cp(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function WA(n,t,e,r){return yh(this.multi,[])}function QA(n,t,e,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ta(e,e[de],this.providerFactory.index,r);o=a.slice(0,s),yh(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],yh(i,o);return o}function yh(n,t){for(let e=0;e<n.length;e++){let r=n[e];t.push(r())}return t}function KA(n,t,e,r,i){let o=new Ri(n,e,D);return o.multi=[],o.index=t,o.componentProviders=0,Lw(o,i,r&&!e),o}function It(n,t=[]){return e=>{e.providersResolver=(r,i)=>GA(r,i?i(n):n,t)}}function mu(n,t,e){let r=Zc()+n,i=ae();return i[r]===qt?bm(i,r,e?t.call(e):t()):XM(i,r)}function dt(n,t,e,r,i){return jw(ae(),Zc(),n,t,e,r,i)}function zi(n,t,e,r,i,o){return ZA(ae(),Zc(),n,t,e,r,i,o)}function Vw(n,t){let e=n[t];return e===qt?void 0:e}function jw(n,t,e,r,i,o,s){let a=t+e;return wm(n,a,i,o)?bm(n,a+2,s?r.call(s,i,o):r(i,o)):Vw(n,a+2)}function ZA(n,t,e,r,i,o,s,a){let l=t+e;return Cw(n,l,i,o,s)?bm(n,l+3,a?r.call(a,i,o,s):r(i,o,s)):Vw(n,l+3)}function Re(n,t){let e=tt(),r,i=n+Pt;e.firstCreatePass?(r=YA(t,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks??=[]).push(i,r.onDestroy)):r=e.data[i];let o=r.factory||(r.factory=Ti(r.type,!0)),s,a=Ut(D);try{let l=Dc(!1),d=o();return Dc(l),zA(e,ae(),i,d),d}finally{Ut(a)}}function YA(n,t){if(t)for(let e=t.length-1;e>=0;e--){let r=t[e];if(n===r.name)return r}}function Fe(n,t,e,r){let i=n+Pt,o=ae(),s=N_(o,i);return JA(o,i)?jw(o,Zc(),t,s.transform,e,r,s):s.transform(e,r)}function JA(n,t){return n[de].data[t].pure}function Zo(n,t){return uu(n,t)}var _h=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},Tm=(()=>{class n{compileModuleSync(e){return new ph(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),i=m_(e),o=Vb(i.declarations).reduce((s,a)=>{let l=Mi(a);return l&&s.push(new ra(l)),s},[]);return new _h(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var XA=(()=>{class n{zone=I(Me);changeDetectionScheduler=I(ei);applicationRef=I(Sr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ek({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new Me(G(N({},tk()),{scheduleInRootZone:e})),[{provide:Me,useFactory:n},{provide:Vo,multi:!0,useFactory:()=>{let r=I(XA,{optional:!0});return()=>r.initialize()}},{provide:Vo,multi:!0,useFactory:()=>{let r=I(nk);return()=>{r.initialize()}}},t===!0?{provide:lb,useValue:!0}:[],{provide:Wh,useValue:e??ab}]}function tk(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var nk=(()=>{class n{subscription=new je;initialized=!1;zone=I(Me);pendingTasks=I(Tr);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Me.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Me.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Uw=(()=>{class n{appRef=I(Sr);taskService=I(Tr);ngZone=I(Me);zonelessEnabled=I(ru);tracing=I(Qo,{optional:!0});disableScheduling=I(lb,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Mc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(I(Wh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ac||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let r=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?xy:cb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Mc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(e),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,xy(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bw(){return jn("NgZoneless"),qo([{provide:ei,useExisting:Uw},{provide:Me,useClass:Ac},{provide:ru,useValue:!0},{provide:Wh,useValue:!1},[]])}function rk(){return typeof $localize<"u"&&$localize.locale||Uc}var Yo=new $("",{providedIn:"root",factory:()=>I(Yo,se.Optional|se.SkipSelf)||rk()});var bh=new $(""),ik=new $("");function Gs(n){return!n.moduleRef}function ok(n){let t=Gs(n)?n.r3Injector:n.moduleRef.injector,e=t.get(Me);return e.run(()=>{Gs(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=t.get(Ht,null),i;if(e.runOutsideAngular(()=>{i=e.onError.subscribe({next:o=>{r.handleError(o)}})}),Gs(n)){let o=()=>t.destroy(),s=n.platformInjector.get(bh);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(bh);s.add(o),n.moduleRef.onDestroy(()=>{pc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return sA(r,e,()=>{let o=t.get(Iw);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(Yo,Uc);if(jA(s||Uc),!t.get(ik,!0))return Gs(n)?t.get(Sr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Gs(n)){let l=t.get(Sr);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return sk(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function sk(n,t){let e=n.injector.get(Sr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>e.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new k(-403,!1);t.push(n)}var hc=null;function ak(n=[],t){return mt.create({name:t,providers:[{provide:Gc,useValue:"platform"},{provide:bh,useValue:new Set([()=>hc=null])},...n]})}function lk(n=[]){if(hc)return hc;let t=ak(n);return hc=t,rA(),ck(t),t}function ck(n){let t=n.get(Yh,null);an(n,()=>{t?.forEach(e=>e())})}var le=(()=>{class n{static __NG_ELEMENT_ID__=uk}return n})();function uk(n){return dk(Ot(),ae(),(n&16)===16)}function dk(n,t,e){if(Vi(n)&&!e){let r=Jn(n.index,t);return new Fi(r,r)}else if(n.type&175){let r=t[En];return new Fi(r,t)}return null}var wh=class{constructor(){}supports(t){return ww(t)}create(t){return new Ch(t)}},fk=(n,t)=>t,Ch=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||fk}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){let s=!r||e&&e.currentIndex<Yy(r,i,o)?e:r,a=Yy(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,s.previousIndex==null)i++;else{o||(o=[]);let d=a-i,p=l-i;if(d!=p){for(let y=0;y<d;y++){let v=y<o.length?o[y]:o[y]=0,b=v+y;p<=b&&b<d&&(o[y]=v+1)}let m=s.previousIndex;o[m]=p-d}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!ww(t))throw new k(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),r=!0):(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else i=0,JM(t,a=>{s=this._trackByFn(i,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,i),r=!0):(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):t=this._addAfter(new Eh(e,r),o,i)),t}_verifyReinsertion(t,e,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){let i=e===null?this._itHead:e._next;return t._next=i,t._prev=e,i===null?this._itTail=t:i._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Bc),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,r=t._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Bc),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Eh=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},Sh=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let e=t._prevDup,r=t._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},Bc=class{map=new Map;put(t){let e=t.trackById,r=this.map.get(e);r||(r=new Sh,this.map.set(e,r)),r.add(t)}get(t,e){let r=t,i=this.map.get(r);return i?i.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Yy(n,t,e){let r=n.previousIndex;if(r===null)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}var Dh=class{constructor(){}supports(t){return t instanceof Map||_m(t)}create(){return new xh}},xh=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||_m(t)))throw new k(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(e&&e.key===i)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(i,r);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let i=this._records.get(t);this._maybeAddToChanges(i,e);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Ih(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}},Ih=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(t){this.key=t}};function Jy(){return new Mm([new wh])}var Mm=(()=>{class n{factories;static \u0275prov=P({token:n,providedIn:"root",factory:Jy});constructor(e){this.factories=e}static create(e,r){if(r!=null){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||Jy()),deps:[[n,new kh,new qc]]}}find(e){let r=this.factories.find(i=>i.supports(e));if(r!=null)return r;throw new k(901,!1)}}return n})();function Xy(){return new Am([new Dh])}var Am=(()=>{class n{static \u0275prov=P({token:n,providedIn:"root",factory:Xy});factories;constructor(e){this.factories=e}static create(e,r){if(r){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||Xy()),deps:[[n,new kh,new qc]]}}find(e){let r=this.factories.find(i=>i.supports(e));if(r)return r;throw new k(901,!1)}}return n})();function $w(n){try{let{rootComponent:t,appProviders:e,platformProviders:r}=n,i=lk(r),o=[ek({}),{provide:ei,useExisting:Uw},...e||[]],s=new Lc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return ok({r3Injector:s.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}}function Bn(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function cn(n,t){jn("NgSignals");let e=Fv(n);return t?.equal&&(e[Lt].equal=t.equal),e}function kr(n){let t=ye(null);try{return n()}finally{ye(t)}}var Hw=(()=>{class n{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=pk}return n})();function pk(){return new Hw(ae(),Ot())}var hk=!1,mk=(()=>{class n extends Vc{pendingTasks=I(Tr);taskId=null;schedule(e){super.schedule(e),this.taskId===null&&(this.taskId=this.pendingTasks.add(),queueMicrotask(()=>this.flush()))}flush(){try{super.flush()}finally{this.taskId!==null&&(this.pendingTasks.remove(this.taskId),this.taskId=null)}}static \u0275prov=P({token:n,providedIn:"root",factory:()=>new n})}return n})(),Th=class{scheduler;effectFn;zone;injector;unregisterOnDestroy;watcher;constructor(t,e,r,i,o,s){this.scheduler=t,this.effectFn=e,this.zone=r,this.injector=o,this.watcher=$v(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(t){try{this.effectFn(t)}catch(e){this.injector.get(Ht,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.schedule(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function gk(){}function vk(n,t){jn("NgSignals"),!t?.injector&&Fh(gk);let e=t?.injector??I(mt),r=t?.manualCleanup!==!0?e.get(Ui):null,i=new Th(e.get(mk),n,typeof Zone>"u"?null:Zone.current,r,e,t?.allowSignalWrites??!1),o=e.get(le,null,{optional:!0});return!o||!(o._lView[ee]&8)?i.watcher.notify():(o._lView[cc]??=[]).push(i.watcher.notify),i}var yk=hk;var Mh=class{[Lt];constructor(t){this[Lt]=t}destroy(){this[Lt].destroy()}};function Jo(n,t){if(yk)return vk(n,t);jn("NgSignals"),!t?.injector&&Fh(Jo);let e=t?.injector??I(mt),r=t?.manualCleanup!==!0?e.get(Ui):null,i,o=e.get(Hw,null,{optional:!0}),s=e.get(ei);return o!==null&&!t?.forceRoot?(i=wk(o.view,s,n),r instanceof Tc&&r._lView===o.view&&(r=null)):i=Ck(n,e.get(Tw),s),i.injector=e,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Mh(i)}var zw=G(N({},wi),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:na,run(){if(this.dirty=!1,this.hasRun&&!Us(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),t=bo(this),e=Cc(!1);try{this.maybeCleanup(),this.fn(n)}finally{Cc(e),js(this,t)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),_k=G(N({},zw),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(13)},destroy(){wo(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),bk=G(N({},zw),{consumerMarkedDirty(){this.view[ee]|=8192,ca(this.view),this.notifier.notify(14)},destroy(){wo(this),this.onDestroyFn(),this.maybeCleanup(),this.view[ki]?.delete(this)}});function wk(n,t,e){let r=Object.create(bk);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=t,r.fn=e,n[ki]??=new Set,n[ki].add(r),r.consumerMarkedDirty(r),r}function Ck(n,t,e){let r=Object.create(_k);return r.fn=n,r.scheduler=t,r.notifier=e,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(13),r}var Jw=null;function Rr(){return Jw}function Xw(n){Jw??=n}var Su=class{};var He=new $(""),Um=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>I(Ek),providedIn:"platform"})}return n})();var Ek=(()=>{class n extends Um{_location;_history;_doc=I(He);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rr().getBaseHref(this._doc)}onPopState(e){let r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=Rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Bm(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function qw(n){let t=n.match(/#|\?|$/),e=t&&t.index||n.length,r=e-(n[e-1]==="/"?1:0);return n.slice(0,r)+n.slice(e)}function Pr(n){return n&&n[0]!=="?"?"?"+n:n}var si=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>I(tC),providedIn:"root"})}return n})(),eC=new $(""),tC=(()=>{class n extends si{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??I(He).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Bm(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+Pr(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+Pr(o));this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+Pr(o));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(F(Um),F(eC,8))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nC=(()=>{class n extends si{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(e){let r=Bm(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+Pr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+Pr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(F(Um),F(eC,8))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),ha=(()=>{class n{_subject=new Ue;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=xk(qw(Gw(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Pr(r))}normalize(e){return n.stripTrailingSlash(Dk(this._basePath,Gw(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Pr(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Pr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Pr;static joinWithSlash=Bm;static stripTrailingSlash=qw;static \u0275fac=function(r){return new(r||n)(F(si))};static \u0275prov=P({token:n,factory:()=>Sk(),providedIn:"root"})}return n})();function Sk(){return new ha(F(si))}function Dk(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function Gw(n){return n.replace(/\/index.html$/,"")}function xk(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var rC=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(rC||{});var Rt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Rt||{}),ke=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(ke||{}),un=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(un||{}),dn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ik(n){return ln(n)[Je.LocaleId]}function Tk(n,t,e){let r=ln(n),i=[r[Je.DayPeriodsFormat],r[Je.DayPeriodsStandalone]],o=In(i,t);return In(o,e)}function Mk(n,t,e){let r=ln(n),i=[r[Je.DaysFormat],r[Je.DaysStandalone]],o=In(i,t);return In(o,e)}function Ak(n,t,e){let r=ln(n),i=[r[Je.MonthsFormat],r[Je.MonthsStandalone]],o=In(i,t);return In(o,e)}function kk(n,t){let r=ln(n)[Je.Eras];return In(r,t)}function gu(n,t){let e=ln(n);return In(e[Je.DateFormat],t)}function vu(n,t){let e=ln(n);return In(e[Je.TimeFormat],t)}function yu(n,t){let r=ln(n)[Je.DateTimeFormat];return In(r,t)}function Or(n,t){let e=ln(n),r=e[Je.NumberSymbols][t];if(typeof r>"u"){if(t===dn.CurrencyDecimal)return e[Je.NumberSymbols][dn.Decimal];if(t===dn.CurrencyGroup)return e[Je.NumberSymbols][dn.Group]}return r}function Nk(n,t){return ln(n)[Je.NumberFormats][t]}function iC(n){if(!n[Je.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Je.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Pk(n){let t=ln(n);return iC(t),(t[Je.ExtraData][2]||[]).map(r=>typeof r=="string"?km(r):[km(r[0]),km(r[1])])}function Ok(n,t,e){let r=ln(n);iC(r);let i=[r[Je.ExtraData][0],r[Je.ExtraData][1]],o=In(i,t)||[];return In(o,e)||[]}function In(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function km(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var Rk=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,_u={},Fk=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Lk(n,t,e,r){let i=Gk(n);t=Nr(e,t)||t;let s=[],a;for(;t;)if(a=Fk.exec(t),a){s=s.concat(a.slice(1));let p=s.pop();if(!p)break;t=p}else{s.push(t);break}let l=i.getTimezoneOffset();r&&(l=sC(r,l),i=qk(i,r,!0));let d="";return s.forEach(p=>{let m=Hk(p);d+=m?m(i,e,l):p==="''"?"'":p.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function Du(n,t,e){let r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function Nr(n,t){let e=Ik(n);if(_u[e]??={},_u[e][t])return _u[e][t];let r="";switch(t){case"shortDate":r=gu(n,un.Short);break;case"mediumDate":r=gu(n,un.Medium);break;case"longDate":r=gu(n,un.Long);break;case"fullDate":r=gu(n,un.Full);break;case"shortTime":r=vu(n,un.Short);break;case"mediumTime":r=vu(n,un.Medium);break;case"longTime":r=vu(n,un.Long);break;case"fullTime":r=vu(n,un.Full);break;case"short":let i=Nr(n,"shortTime"),o=Nr(n,"shortDate");r=bu(yu(n,un.Short),[i,o]);break;case"medium":let s=Nr(n,"mediumTime"),a=Nr(n,"mediumDate");r=bu(yu(n,un.Medium),[s,a]);break;case"long":let l=Nr(n,"longTime"),d=Nr(n,"longDate");r=bu(yu(n,un.Long),[l,d]);break;case"full":let p=Nr(n,"fullTime"),m=Nr(n,"fullDate");r=bu(yu(n,un.Full),[p,m]);break}return r&&(_u[e][t]=r),r}function bu(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return t!=null&&r in t?t[r]:e})),n}function $n(n,t,e="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function Vk(n,t){return $n(n,3).substring(0,t)}function rt(n,t,e=0,r=!1,i=!1){return function(o,s){let a=jk(n,o);if((e>0||a>-e)&&(a+=e),n===3)a===0&&e===-12&&(a=12);else if(n===6)return Vk(a,t);let l=Or(s,dn.MinusSign);return $n(a,t,l,r,i)}}function jk(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Pe(n,t,e=Rt.Format,r=!1){return function(i,o){return Uk(i,o,n,t,e,r)}}function Uk(n,t,e,r,i,o){switch(e){case 2:return Ak(t,i,r)[n.getMonth()];case 1:return Mk(t,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let d=Pk(t),p=Ok(t,i,r),m=d.findIndex(y=>{if(Array.isArray(y)){let[v,b]=y,C=s>=v.hours&&a>=v.minutes,x=s<b.hours||s===b.hours&&a<b.minutes;if(v.hours<b.hours){if(C&&x)return!0}else if(C||x)return!0}else if(y.hours===s&&y.minutes===a)return!0;return!1});if(m!==-1)return p[m]}return Tk(t,i,r)[s<12?0:1];case 3:return kk(t,r)[n.getFullYear()<=0?0:1];default:let l=e;throw new Error(`unexpected translation type ${l}`)}}function wu(n){return function(t,e,r){let i=-1*r,o=Or(e,dn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+$n(s,2,o)+$n(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+$n(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+$n(s,2,o)+":"+$n(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+$n(s,2,o)+":"+$n(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var Bk=0,Eu=4;function $k(n){let t=Du(n,Bk,1).getDay();return Du(n,0,1+(t<=Eu?Eu:Eu+7)-t)}function oC(n){let t=n.getDay(),e=t===0?-3:Eu-t;return Du(n.getFullYear(),n.getMonth(),n.getDate()+e)}function Nm(n,t=!1){return function(e,r){let i;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();i=1+Math.floor((s+o)/7)}else{let o=oC(e),s=$k(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return $n(i,n,Or(r,dn.MinusSign))}}function Cu(n,t=!1){return function(e,r){let o=oC(e).getFullYear();return $n(o,n,Or(r,dn.MinusSign),t)}}var Pm={};function Hk(n){if(Pm[n])return Pm[n];let t;switch(n){case"G":case"GG":case"GGG":t=Pe(3,ke.Abbreviated);break;case"GGGG":t=Pe(3,ke.Wide);break;case"GGGGG":t=Pe(3,ke.Narrow);break;case"y":t=rt(0,1,0,!1,!0);break;case"yy":t=rt(0,2,0,!0,!0);break;case"yyy":t=rt(0,3,0,!1,!0);break;case"yyyy":t=rt(0,4,0,!1,!0);break;case"Y":t=Cu(1);break;case"YY":t=Cu(2,!0);break;case"YYY":t=Cu(3);break;case"YYYY":t=Cu(4);break;case"M":case"L":t=rt(1,1,1);break;case"MM":case"LL":t=rt(1,2,1);break;case"MMM":t=Pe(2,ke.Abbreviated);break;case"MMMM":t=Pe(2,ke.Wide);break;case"MMMMM":t=Pe(2,ke.Narrow);break;case"LLL":t=Pe(2,ke.Abbreviated,Rt.Standalone);break;case"LLLL":t=Pe(2,ke.Wide,Rt.Standalone);break;case"LLLLL":t=Pe(2,ke.Narrow,Rt.Standalone);break;case"w":t=Nm(1);break;case"ww":t=Nm(2);break;case"W":t=Nm(1,!0);break;case"d":t=rt(2,1);break;case"dd":t=rt(2,2);break;case"c":case"cc":t=rt(7,1);break;case"ccc":t=Pe(1,ke.Abbreviated,Rt.Standalone);break;case"cccc":t=Pe(1,ke.Wide,Rt.Standalone);break;case"ccccc":t=Pe(1,ke.Narrow,Rt.Standalone);break;case"cccccc":t=Pe(1,ke.Short,Rt.Standalone);break;case"E":case"EE":case"EEE":t=Pe(1,ke.Abbreviated);break;case"EEEE":t=Pe(1,ke.Wide);break;case"EEEEE":t=Pe(1,ke.Narrow);break;case"EEEEEE":t=Pe(1,ke.Short);break;case"a":case"aa":case"aaa":t=Pe(0,ke.Abbreviated);break;case"aaaa":t=Pe(0,ke.Wide);break;case"aaaaa":t=Pe(0,ke.Narrow);break;case"b":case"bb":case"bbb":t=Pe(0,ke.Abbreviated,Rt.Standalone,!0);break;case"bbbb":t=Pe(0,ke.Wide,Rt.Standalone,!0);break;case"bbbbb":t=Pe(0,ke.Narrow,Rt.Standalone,!0);break;case"B":case"BB":case"BBB":t=Pe(0,ke.Abbreviated,Rt.Format,!0);break;case"BBBB":t=Pe(0,ke.Wide,Rt.Format,!0);break;case"BBBBB":t=Pe(0,ke.Narrow,Rt.Format,!0);break;case"h":t=rt(3,1,-12);break;case"hh":t=rt(3,2,-12);break;case"H":t=rt(3,1);break;case"HH":t=rt(3,2);break;case"m":t=rt(4,1);break;case"mm":t=rt(4,2);break;case"s":t=rt(5,1);break;case"ss":t=rt(5,2);break;case"S":t=rt(6,1);break;case"SS":t=rt(6,2);break;case"SSS":t=rt(6,3);break;case"Z":case"ZZ":case"ZZZ":t=wu(0);break;case"ZZZZZ":t=wu(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=wu(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=wu(2);break;default:return null}return Pm[n]=t,t}function sC(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function zk(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function qk(n,t,e){let r=e?-1:1,i=n.getTimezoneOffset(),o=sC(t,i);return zk(n,r*(o-i))}function Gk(n){if(Ww(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Du(i,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(Rk))return Wk(r)}let t=new Date(n);if(!Ww(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function Wk(n){let t=new Date(0),e=0,r=0,i=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-r,l=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,l,d),t}function Ww(n){return n instanceof Date&&!isNaN(n.valueOf())}var Qk=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Qw=22,xu=".",pa="0",Kk=";",Zk=",",Om="#";function Yk(n,t,e,r,i,o,s=!1){let a="",l=!1;if(!isFinite(n))a=Or(e,dn.Infinity);else{let d=tN(n);s&&(d=eN(d));let p=t.minInt,m=t.minFrac,y=t.maxFrac;if(o){let j=o.match(Qk);if(j===null)throw new Error(`${o} is not a valid digit info`);let U=j[1],q=j[3],Q=j[5];U!=null&&(p=Rm(U)),q!=null&&(m=Rm(q)),Q!=null?y=Rm(Q):q!=null&&m>y&&(y=m)}nN(d,m,y);let v=d.digits,b=d.integerLen,C=d.exponent,x=[];for(l=v.every(j=>!j);b<p;b++)v.unshift(0);for(;b<0;b++)v.unshift(0);b>0?x=v.splice(b,v.length):(x=v,v=[0]);let A=[];for(v.length>=t.lgSize&&A.unshift(v.splice(-t.lgSize,v.length).join(""));v.length>t.gSize;)A.unshift(v.splice(-t.gSize,v.length).join(""));v.length&&A.unshift(v.join("")),a=A.join(Or(e,r)),x.length&&(a+=Or(e,i)+x.join("")),C&&(a+=Or(e,dn.Exponential)+"+"+C)}return n<0&&!l?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function Jk(n,t,e){let r=Nk(t,rC.Decimal),i=Xk(r,Or(t,dn.MinusSign));return Yk(n,i,t,dn.Group,dn.Decimal,e)}function Xk(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(Kk),i=r[0],o=r[1],s=i.indexOf(xu)!==-1?i.split(xu):[i.substring(0,i.lastIndexOf(pa)+1),i.substring(i.lastIndexOf(pa)+1)],a=s[0],l=s[1]||"";e.posPre=a.substring(0,a.indexOf(Om));for(let p=0;p<l.length;p++){let m=l.charAt(p);m===pa?e.minFrac=e.maxFrac=p+1:m===Om?e.maxFrac=p+1:e.posSuf+=m}let d=a.split(Zk);if(e.gSize=d[1]?d[1].length:0,e.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,o){let p=i.length-e.posPre.length-e.posSuf.length,m=o.indexOf(Om);e.negPre=o.substring(0,m).replace(/'/g,""),e.negSuf=o.slice(m+p).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function eN(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function tN(n){let t=Math.abs(n)+"",e=0,r,i,o,s,a;for((i=t.indexOf(xu))>-1&&(t=t.replace(xu,"")),(o=t.search(/e/i))>0?(i<0&&(i=o),i+=+t.slice(o+1),t=t.substring(0,o)):i<0&&(i=t.length),o=0;t.charAt(o)===pa;o++);if(o===(a=t.length))r=[0],i=1;else{for(a--;t.charAt(a)===pa;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(t.charAt(o))}return i>Qw&&(r=r.splice(0,Qw-1),e=i-1,i=1),{digits:r,exponent:e,integerLen:i}}function nN(n,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(t,i),e),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let m=s;m<r.length;m++)r[m]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let m=1;m<s;m++)r[m]=0}if(a>=5)if(s-1<0){for(let m=0;m>s;m--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=o!==0,d=t+n.integerLen,p=r.reduceRight(function(m,y,v,b){return y=y+m,b[v]=y<10?y:y-10,l&&(b[v]===0&&v>=d?b.pop():l=!1),y>=10?1:0},0);p&&(r.unshift(p),n.integerLen++)}function Rm(n){let t=parseInt(n);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+n);return t}function Tu(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let r=e.indexOf("="),[i,o]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var Fm=/\s+/,Kw=[],ft=(()=>{class n{_ngEl;_renderer;initialClasses=Kw;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(Fm):Kw}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(Fm):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(Fm).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(D(nt),D(xn))};static \u0275dir=ve({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Lm=class{$implicit;ngForOf;index;count;constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ze=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Lm(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Zw(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Zw(o,i)})}static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(D(Ar),D(ni),D(Mm))};static \u0275dir=ve({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Zw(n,t){n.context.$implicit=t.item}var K=(()=>{class n{_viewContainer;_context=new Vm;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,r){this._viewContainer=e,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Yw("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Yw("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(D(Ar),D(ni))};static \u0275dir=ve({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Vm=class{$implicit=null;ngIf=null};function Yw(n,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Nt(t)}'.`)}var jm=class{_viewContainerRef;_templateRef;_created=!1;constructor(t,e){this._viewContainerRef=t,this._templateRef=e}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}},$m=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(e){this._ngSwitch=e,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){let r=e===this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(let r of this._defaultViews)r.enforceState(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ve({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),aC=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(e,r,i){this.ngSwitch=i,i._addCase(),this._view=new jm(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(r){return new(r||n)(D(Ar),D(ni),D($m,9))};static \u0275dir=ve({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})();var lC=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,r,i){this._ngEl=e,this._differs=r,this._renderer=i}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,r){let[i,o]=e.split("."),s=i.indexOf("-")===-1?void 0:er.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(e){e.forEachRemovedItem(r=>this._setStyle(r.key,null)),e.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),e.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||n)(D(nt),D(Am),D(xn))};static \u0275dir=ve({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})();function cC(n,t){return new k(2100,!1)}var rN="mediumDate",iN=new $(""),oN=new $(""),rr=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,r,i){this.locale=e,this.defaultTimezone=r,this.defaultOptions=i}transform(e,r,i,o){if(e==null||e===""||e!==e)return null;try{let s=r??this.defaultOptions?.dateFormat??rN,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Lk(e,s,o||this.locale,a)}catch(s){throw cC(n,s.message)}}static \u0275fac=function(r){return new(r||n)(D(Yo,16),D(iN,24),D(oN,24))};static \u0275pipe=ym({name:"date",type:n,pure:!0})}return n})();var es=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,r,i){if(!sN(e))return null;i||=this._locale;try{let o=aN(e);return Jk(o,i,r)}catch(o){throw cC(n,o.message)}}static \u0275fac=function(r){return new(r||n)(D(Yo,16))};static \u0275pipe=ym({name:"number",type:n,pure:!0})}return n})();function sN(n){return!(n==null||n===""||n!==n)}function aN(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var B=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=lt({type:n});static \u0275inj=at({})}return n})(),Hm="browser",lN="server";function Tn(n){return n===Hm}function zm(n){return n===lN}var Xo=class{};var va=class{},ya=class{},Fr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),o=e.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let i=(t.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(t,e){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Wm=class{encodeKey(t){return uC(t)}encodeValue(t){return uC(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function uN(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var dN=/%(\d[a-f0-9])/gi,fN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function uC(n){return encodeURIComponent(n).replace(dN,(t,e)=>fN[e]??t)}function Mu(n){return`${n}`}var li=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new Wm,t.fromString){if(t.fromObject)throw new k(2805,!1);this.map=uN(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],i=Array.isArray(r)?r.map(Mu):[Mu(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Mu(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(Mu(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Qm=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function pN(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function dC(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function fC(n){return typeof Blob<"u"&&n instanceof Blob}function pC(n){return typeof FormData<"u"&&n instanceof FormData}function hN(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ma="Content-Type",Au="Accept",Ym="X-Request-URL",vC="text/plain",yC="application/json",_C=`${yC}, ${vC}, */*`,ga=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,r,i){this.url=e,this.method=t.toUpperCase();let o;if(pN(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Fr,this.context??=new Qm,!this.params)this.params=new li,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||dC(this.body)||fC(this.body)||pC(this.body)||hN(this.body)?this.body:this.body instanceof li?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||pC(this.body)?null:fC(this.body)?this.body.type||null:dC(this.body)?null:typeof this.body=="string"?vC:this.body instanceof li?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?yC:null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,d=t.headers||this.headers,p=t.params||this.params,m=t.context??this.context;return t.setHeaders!==void 0&&(d=Object.keys(t.setHeaders).reduce((y,v)=>y.set(v,t.setHeaders[v]),d)),t.setParams&&(p=Object.keys(t.setParams).reduce((y,v)=>y.set(v,t.setParams[v]),p)),new n(e,r,s,{params:p,headers:d,context:m,reportProgress:l,responseType:i,withCredentials:a,transferCache:o})}},ci=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ci||{}),_a=class{headers;status;statusText;url;ok;type;constructor(t,e=200,r="OK"){this.headers=t.headers||new Fr,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},ku=class n extends _a{constructor(t={}){super(t)}type=ci.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},ba=class n extends _a{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=ci.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},ai=class extends _a{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},bC=200,mN=204;function qm(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Jm=(()=>{class n{handler;constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof ga)o=e;else{let l;i.headers instanceof Fr?l=i.headers:l=new Fr(i.headers);let d;i.params&&(i.params instanceof li?d=i.params:d=new li({fromObject:i.params})),o=new ga(e,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=Z(o).pipe(Kr(l=>this.handler.handle(l)));if(e instanceof ga||i.observe==="events")return s;let a=s.pipe(At(l=>l instanceof ba));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Y(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new k(2806,!1);return l.body}));case"blob":return a.pipe(Y(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new k(2807,!1);return l.body}));case"text":return a.pipe(Y(l=>{if(l.body!==null&&typeof l.body!="string")throw new k(2808,!1);return l.body}));case"json":default:return a.pipe(Y(l=>l.body))}case"response":return a;default:throw new k(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new li().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,qm(i,r))}post(e,r,i={}){return this.request("POST",e,qm(i,r))}put(e,r,i={}){return this.request("PUT",e,qm(i,r))}static \u0275fac=function(r){return new(r||n)(F(va))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),gN=/^\)\]\}',?\n/;function hC(n){if(n.url)return n.url;let t=Ym.toLocaleLowerCase();return n.headers.get(t)}var wC=new $(""),Gm=(()=>{class n{fetchImpl=I(Km,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e));ngZone=I(Me);handle(e){return new me(r=>{let i=new AbortController;return this.doRequest(e,i.signal,r).then(Zm,o=>r.error(new ai({error:o}))),()=>i.abort()})}async doRequest(e,r,i){let o=this.createRequestInit(e),s;try{let v=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,N({signal:r},o)));vN(v),i.next({type:ci.Sent}),s=await v}catch(v){i.error(new ai({error:v,status:v.status??0,statusText:v.statusText,url:e.urlWithParams,headers:v.headers}));return}let a=new Fr(s.headers),l=s.statusText,d=hC(s)??e.urlWithParams,p=s.status,m=null;if(e.reportProgress&&i.next(new ku({headers:a,status:p,statusText:l,url:d})),s.body){let v=s.headers.get("content-length"),b=[],C=s.body.getReader(),x=0,A,j,U=typeof Zone<"u"&&Zone.current;await this.ngZone.runOutsideAngular(async()=>{for(;;){let{done:Q,value:De}=await C.read();if(Q)break;if(b.push(De),x+=De.length,e.reportProgress){j=e.responseType==="text"?(j??"")+(A??=new TextDecoder).decode(De,{stream:!0}):void 0;let Te=()=>i.next({type:ci.DownloadProgress,total:v?+v:void 0,loaded:x,partialText:j});U?U.run(Te):Te()}}});let q=this.concatChunks(b,x);try{let Q=s.headers.get(ma)??"";m=this.parseBody(e,q,Q)}catch(Q){i.error(new ai({error:Q,headers:new Fr(s.headers),status:s.status,statusText:s.statusText,url:hC(s)??e.urlWithParams}));return}}p===0&&(p=m?bC:0),p>=200&&p<300?(i.next(new ba({body:m,headers:a,status:p,statusText:l,url:d})),i.complete()):i.error(new ai({error:m,headers:a,status:p,statusText:l,url:d}))}parseBody(e,r,i){switch(e.responseType){case"json":let o=new TextDecoder().decode(r).replace(gN,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(e){let r={},i=e.withCredentials?"include":void 0;if(e.headers.forEach((o,s)=>r[o]=s.join(",")),e.headers.has(Au)||(r[Au]=_C),!e.headers.has(ma)){let o=e.detectContentTypeHeader();o!==null&&(r[ma]=o)}return{body:e.serializeBody(),method:e.method,headers:r,credentials:i}}concatChunks(e,r){let i=new Uint8Array(r),o=0;for(let s of e)i.set(s,o),o+=s.length;return i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),Km=class{};function Zm(){}function vN(n){n.then(Zm,Zm)}function yN(n,t){return t(n)}function _N(n,t,e){return(r,i)=>an(e,()=>t(r,o=>n(o,i)))}var CC=new $(""),bN=new $(""),wN=new $("",{providedIn:"root",factory:()=>!0});var mC=(()=>{class n extends va{backend;injector;chain=null;pendingTasks=I(Tr);contributeToStability=I(wN);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(CC),...this.injector.get(bN,[])]));this.chain=r.reduceRight((i,o)=>_N(i,o,this.injector),yN)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(mr(()=>this.pendingTasks.remove(r)))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(F(ya),F($t))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})();var CN=/^\)\]\}',?\n/,EN=RegExp(`^${Ym}:`,"m");function SN(n){return"responseURL"in n&&n.responseURL?n.responseURL:EN.test(n.getAllResponseHeaders())?n.getResponseHeader(Ym):null}var gC=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new k(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Qe(r.\u0275loadImpl()):Z(null)).pipe(rn(()=>new me(o=>{let s=r.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((C,x)=>s.setRequestHeader(C,x.join(","))),e.headers.has(Au)||s.setRequestHeader(Au,_C),!e.headers.has(ma)){let C=e.detectContentTypeHeader();C!==null&&s.setRequestHeader(ma,C)}if(e.responseType){let C=e.responseType.toLowerCase();s.responseType=C!=="json"?C:"text"}let a=e.serializeBody(),l=null,d=()=>{if(l!==null)return l;let C=s.statusText||"OK",x=new Fr(s.getAllResponseHeaders()),A=SN(s)||e.url;return l=new ku({headers:x,status:s.status,statusText:C,url:A}),l},p=()=>{let{headers:C,status:x,statusText:A,url:j}=d(),U=null;x!==mN&&(U=typeof s.response>"u"?s.responseText:s.response),x===0&&(x=U?bC:0);let q=x>=200&&x<300;if(e.responseType==="json"&&typeof U=="string"){let Q=U;U=U.replace(CN,"");try{U=U!==""?JSON.parse(U):null}catch(De){U=Q,q&&(q=!1,U={error:De,text:U})}}q?(o.next(new ba({body:U,headers:C,status:x,statusText:A,url:j||void 0})),o.complete()):o.error(new ai({error:U,headers:C,status:x,statusText:A,url:j||void 0}))},m=C=>{let{url:x}=d(),A=new ai({error:C,status:s.status||0,statusText:s.statusText||"Unknown Error",url:x||void 0});o.error(A)},y=!1,v=C=>{y||(o.next(d()),y=!0);let x={type:ci.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(x.total=C.total),e.responseType==="text"&&s.responseText&&(x.partialText=s.responseText),o.next(x)},b=C=>{let x={type:ci.UploadProgress,loaded:C.loaded};C.lengthComputable&&(x.total=C.total),o.next(x)};return s.addEventListener("load",p),s.addEventListener("error",m),s.addEventListener("timeout",m),s.addEventListener("abort",m),e.reportProgress&&(s.addEventListener("progress",v),a!==null&&s.upload&&s.upload.addEventListener("progress",b)),s.send(a),o.next({type:ci.Sent}),()=>{s.removeEventListener("error",m),s.removeEventListener("abort",m),s.removeEventListener("load",p),s.removeEventListener("timeout",m),e.reportProgress&&(s.removeEventListener("progress",v),a!==null&&s.upload&&s.upload.removeEventListener("progress",b)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(F(Xo))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),EC=new $(""),DN="XSRF-TOKEN",xN=new $("",{providedIn:"root",factory:()=>DN}),IN="X-XSRF-TOKEN",TN=new $("",{providedIn:"root",factory:()=>IN}),Nu=class{},MN=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Tu(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||n)(F(He),F(Et),F(xN))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})();function AN(n,t){let e=n.url.toLowerCase();if(!I(EC)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let r=I(Nu).getToken(),i=I(TN);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}var SC=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(SC||{});function kN(n,t){return{\u0275kind:n,\u0275providers:t}}function DC(...n){let t=[Jm,gC,mC,{provide:va,useExisting:mC},{provide:ya,useFactory:()=>I(wC,{optional:!0})??I(gC)},{provide:CC,useValue:AN,multi:!0},{provide:EC,useValue:!0},{provide:Nu,useClass:MN}];for(let e of n)t.push(...e.\u0275providers);return qo(t)}function xC(){return kN(SC.Fetch,[Gm,{provide:wC,useExisting:Gm},{provide:ya,useExisting:Gm}])}var eg=class extends Su{supportsDOMEvents=!0},tg=class n extends eg{static makeCurrent(){Xw(new n)}onAndCancel(t,e,r,i){return t.addEventListener(e,r,i),()=>{t.removeEventListener(e,r,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=PN();return e==null?null:ON(e)}resetBaseElement(){wa=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Tu(document.cookie,t)}},wa=null;function PN(){return wa=wa||document.querySelector("base"),wa?wa.getAttribute("href"):null}function ON(n){return new URL(n,document.baseURI).pathname}var RN=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),ng=new $(""),kC=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i,o){return this._findPluginFor(r).addEventListener(e,r,i,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new k(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(F(ng),F(Me))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),Ou=class{_doc;constructor(t){this._doc=t}manager},Pu="ng-app-id";function IC(n){for(let t of n)t.remove()}function TC(n,t){let e=t.createElement("style");return e.textContent=n,e}function FN(n,t,e,r){let i=n.head?.querySelectorAll(`style[${Pu}="${t}"],link[${Pu}="${t}"]`);if(i)for(let o of i)o.removeAttribute(Pu),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function rg(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var NC=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,this.isServer=zm(o),FN(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,TC);r?.forEach(i=>this.addUsage(i,this.external,rg))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let o=r.get(e);o?o.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(IC(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])IC(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,TC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,rg(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Pu,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(F(He),F(iu),F(ua,8),F(Et))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),Xm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},og=/%COMP%/g;var PC="%COMP%",LN=`_nghost-${PC}`,VN=`_ngcontent-${PC}`,jN=!0,UN=new $("",{providedIn:"root",factory:()=>jN});function BN(n){return VN.replace(og,n)}function $N(n){return LN.replace(og,n)}function OC(n,t){return t.map(e=>e.replace(og,n))}var Ru=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,o,s,a,l,d=null,p=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=d,this.tracingService=p,this.platformIsServer=zm(a),this.defaultRenderer=new Ca(e,s,l,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Xn.ShadowDom&&(r=G(N({},r),{encapsulation:Xn.Emulated}));let i=this.getOrCreateRenderer(e,r);return i instanceof Fu?i.applyToHost(e):i instanceof Ea&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case Xn.Emulated:o=new Fu(l,d,r,this.appId,p,s,a,m,y);break;case Xn.ShadowDom:return new ig(l,d,e,r,s,a,this.nonce,m,y);default:o=new Ea(l,d,r,p,s,a,m,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(F(kC),F(NC),F(iu),F(UN),F(He),F(Et),F(Me),F(ua),F(Qo,8))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),Ca=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,i,o){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Xm[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(MC(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(MC(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new k(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let o=Xm[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=Xm[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(er.DashCase|er.Important)?t.style.setProperty(e,r,i&er.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&er.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,i){if(typeof t=="string"&&(t=Rr().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);let o=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,e,o)),this.eventManager.addEventListener(t,e,o,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function MC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ig=class extends Ca{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,i,o,s,a,l,d){super(t,o,s,l,d),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=i.styles;p=OC(i.id,p);for(let y of p){let v=document.createElement("style");a&&v.setAttribute("nonce",a),v.textContent=y,this.shadowRoot.appendChild(v)}let m=i.getExternalStyles?.();if(m)for(let y of m){let v=rg(y,o);a&&v.setAttribute("nonce",a),this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ea=class extends Ca{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,i,o,s,a,l,d){super(t,o,s,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let p=r.styles;this.styles=d?OC(d,p):p,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Fu=class extends Ea{contentAttr;hostAttr;constructor(t,e,r,i,o,s,a,l,d){let p=i+"-"+r.id;super(t,e,r,o,s,a,l,d,p),this.contentAttr=BN(p),this.hostAttr=$N(p)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}},HN=(()=>{class n extends Ou{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,o){return e.addEventListener(r,i,o),()=>this.removeEventListener(e,r,i,o)}removeEventListener(e,r,i,o){return e.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(F(He))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),AC=["alt","control","meta","shift"],zN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},GN=(()=>{class n extends Ou{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rr().onAndCancel(e,s.domEventName,a,o))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),AC.forEach(d=>{let p=r.indexOf(d);p>-1&&(r.splice(p,1),s+=d+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(e,r){let i=zN[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),AC.forEach(s=>{if(s!==i){let a=qN[s];a(e)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(F(He))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})();function RC(n,t){return $w(N({rootComponent:n},WN(t)))}function WN(n){return{appProviders:[...JN,...n?.providers??[]],platformProviders:YN}}function QN(){tg.makeCurrent()}function KN(){return new Ht}function ZN(){return _b(document),document}var YN=[{provide:Et,useValue:Hm},{provide:Yh,useValue:QN,multi:!0},{provide:He,useFactory:ZN,deps:[]}];var JN=[{provide:Gc,useValue:"root"},{provide:Ht,useFactory:KN,deps:[]},{provide:ng,useClass:HN,multi:!0,deps:[He,Me,Et]},{provide:ng,useClass:GN,multi:!0,deps:[He]},Ru,NC,kC,{provide:ri,useExisting:Ru},{provide:Xo,useClass:RN,deps:[]},[]];var FC=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(F(He))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Sa=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=F(XN),i},providedIn:"root"})}return n})(),XN=(()=>{class n extends Sa{_doc;constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case St.NONE:return r;case St.HTML:return oi(r,"HTML")?Un(r):Ob(this._doc,String(r)).toString();case St.STYLE:return oi(r,"Style")?Un(r):r;case St.SCRIPT:if(oi(r,"Script"))return Un(r);throw new k(5200,!1);case St.URL:return oi(r,"URL")?Un(r):au(String(r));case St.RESOURCE_URL:if(oi(r,"ResourceURL"))return Un(r);throw new k(5201,!1);default:throw new k(5202,!1)}}bypassSecurityTrustHtml(e){return Sb(e)}bypassSecurityTrustStyle(e){return Db(e)}bypassSecurityTrustScript(e){return xb(e)}bypassSecurityTrustUrl(e){return Ib(e)}bypassSecurityTrustResourceUrl(e){return Tb(e)}static \u0275fac=function(r){return new(r||n)(F(He))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var re="primary",ja=Symbol("RouteTitle"),dg=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function ss(n){return new dg(n)}function tP(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function nP(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ir(n[e],t[e]))return!1;return!0}function ir(n,t){let e=n?fg(n):void 0,r=t?fg(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!zC(n[i],t[i]))return!1;return!0}function fg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function zC(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}else return n===t}function qC(n){return n.length>0?n[n.length-1]:null}function di(n){return rp(n)?n:Hi(n)?Qe(Promise.resolve(n)):Z(n)}var rP={exact:WC,subset:QC},GC={exact:iP,subset:oP,ignored:()=>!0};function LC(n,t,e){return rP[e.paths](n.root,t.root,e.matrixParams)&&GC[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function iP(n,t){return ir(n,t)}function WC(n,t,e){if(!Gi(n.segments,t.segments)||!ju(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!WC(n.children[r],t.children[r],e))return!1;return!0}function oP(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>zC(n[e],t[e]))}function QC(n,t,e){return KC(n,t,t.segments,e)}function KC(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!Gi(i,e)||t.hasChildren()||!ju(i,e,r))}else if(n.segments.length===e.length){if(!Gi(n.segments,e)||!ju(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!QC(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!Gi(n.segments,i)||!ju(n.segments,i,r)||!n.children[re]?!1:KC(n.children[re],t,o,r)}}function ju(n,t,e){return t.every((r,i)=>GC[e](n[i].parameters,r.parameters))}var Vr=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Se([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ss(this.queryParams),this._queryParamMap}toString(){return lP.serialize(this)}},Se=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Uu(this)}},qi=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=ss(this.parameters),this._parameterMap}toString(){return YC(this)}};function sP(n,t){return Gi(n,t)&&n.every((e,r)=>ir(e.parameters,t[r].parameters))}function Gi(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function aP(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===re&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==re&&(e=e.concat(t(i,r)))}),e}var Vg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>new Aa,providedIn:"root"})}return n})(),Aa=class{parse(t){let e=new hg(t);return new Vr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Da(t.root,!0)}`,r=dP(t.queryParams),i=typeof t.fragment=="string"?`#${cP(t.fragment)}`:"";return`${e}${r}${i}`}},lP=new Aa;function Uu(n){return n.segments.map(t=>YC(t)).join("/")}function Da(n,t){if(!n.hasChildren())return Uu(n);if(t){let e=n.children[re]?Da(n.children[re],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${Da(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=aP(n,(r,i)=>i===re?[Da(n.children[re],!1)]:[`${i}:${Da(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${Uu(n)}/${e[0]}`:`${Uu(n)}/(${e.join("//")})`}}function ZC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lu(n){return ZC(n).replace(/%3B/gi,";")}function cP(n){return encodeURI(n)}function pg(n){return ZC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bu(n){return decodeURIComponent(n)}function VC(n){return Bu(n.replace(/\+/g,"%20"))}function YC(n){return`${pg(n.path)}${uP(n.parameters)}`}function uP(n){return Object.entries(n).map(([t,e])=>`;${pg(t)}=${pg(e)}`).join("")}function dP(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${Lu(e)}=${Lu(i)}`).join("&"):`${Lu(e)}=${Lu(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var fP=/^[^\/()?;#]+/;function ag(n){let t=n.match(fP);return t?t[0]:""}var pP=/^[^\/()?;=#]+/;function hP(n){let t=n.match(pP);return t?t[0]:""}var mP=/^[^=?&#]+/;function gP(n){let t=n.match(mP);return t?t[0]:""}var vP=/^[^&#]+/;function yP(n){let t=n.match(vP);return t?t[0]:""}var hg=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[re]=new Se(t,e)),r}parseSegment(){let t=ag(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new k(4009,!1);return this.capture(t),new qi(Bu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=hP(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=ag(this.remaining);i&&(r=i,this.capture(r))}t[Bu(e)]=Bu(r)}parseQueryParam(t){let e=gP(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=yP(this.remaining);s&&(r=s,this.capture(r))}let i=VC(e),o=VC(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ag(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new k(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=re);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[re]:new Se([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new k(4011,!1)}};function JC(n){return n.segments.length>0?new Se([],{[re]:n}):n}function XC(n){let t={};for(let[r,i]of Object.entries(n.children)){let o=XC(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let e=new Se(n.segments,t);return _P(e)}function _P(n){if(n.numberOfChildren===1&&n.children[re]){let t=n.children[re];return new Se(n.segments.concat(t.segments),t.children)}return n}function Wi(n){return n instanceof Vr}function bP(n,t,e=null,r=null){let i=eE(n);return tE(i,t,e,r)}function eE(n){let t;function e(o){let s={};for(let l of o.children){let d=e(l);s[l.outlet]=d}let a=new Se(o.url,s);return o===n&&(t=a),a}let r=e(n.root),i=JC(r);return t??i}function tE(n,t,e,r){let i=n;for(;i.parent;)i=i.parent;if(t.length===0)return lg(i,i,i,e,r);let o=wP(t);if(o.toRoot())return lg(i,i,new Se([],{}),e,r);let s=CP(o,i,n),a=s.processChildren?Ia(s.segmentGroup,s.index,o.commands):rE(s.segmentGroup,s.index,o.commands);return lg(i,s.segmentGroup,a,e,r)}function $u(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ka(n){return typeof n=="object"&&n!=null&&n.outlets}function lg(n,t,e,r,i){let o={};r&&Object.entries(r).forEach(([l,d])=>{o[l]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let s;n===t?s=e:s=nE(n,t,e);let a=JC(XC(s));return new Vr(a,o,i)}function nE(n,t,e){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===t?r[i]=e:r[i]=nE(o,t,e)}),new Se(n.segments,r)}var Hu=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&$u(r[0]))throw new k(4003,!1);let i=r.find(ka);if(i&&i!==qC(r))throw new k(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function wP(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Hu(!0,0,n);let t=0,e=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,d])=>{a[l]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Hu(e,t,r)}var rs=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function CP(n,t,e){if(n.isAbsolute)return new rs(t,!0,0);if(!e)return new rs(t,!1,NaN);if(e.parent===null)return new rs(e,!0,0);let r=$u(n.commands[0])?0:1,i=e.segments.length-1+r;return EP(e,i,n.numberOfDoubleDots)}function EP(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new k(4005,!1);i=r.segments.length}return new rs(r,!1,i-o)}function SP(n){return ka(n[0])?n[0].outlets:{[re]:n}}function rE(n,t,e){if(n??=new Se([],{}),n.segments.length===0&&n.hasChildren())return Ia(n,t,e);let r=DP(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Se(n.segments.slice(0,r.pathIndex),{});return o.children[re]=new Se(n.segments.slice(r.pathIndex),n.children),Ia(o,0,i)}else return r.match&&i.length===0?new Se(n.segments,{}):r.match&&!n.hasChildren()?mg(n,t,e):r.match?Ia(n,0,i):mg(n,t,e)}function Ia(n,t,e){if(e.length===0)return new Se(n.segments,{});{let r=SP(e),i={};if(Object.keys(r).some(o=>o!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let o=Ia(n.children[re],t,e);return new Se(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=rE(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Se(n.segments,i)}}function DP(n,t,e){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;let s=n.segments[i],a=e[r];if(ka(a))break;let l=`${a}`,d=r<e.length-1?e[r+1]:null;if(i>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!UC(l,d,s))return o;r+=2}else{if(!UC(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function mg(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let o=e[i];if(ka(o)){let l=xP(o.outlets);return new Se(r,l)}if(i===0&&$u(e[0])){let l=n.segments[t];r.push(new qi(l.path,jC(e[0]))),i++;continue}let s=ka(o)?o.outlets[re]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&$u(a)?(r.push(new qi(s,jC(a))),i+=2):(r.push(new qi(s,{})),i++)}return new Se(r,{})}function xP(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=mg(new Se([],{}),0,r))}),t}function jC(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function UC(n,t,e){return n==e.path&&ir(t,e.parameters)}var Ta="imperative",gt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(gt||{}),Mn=class{id;url;constructor(t,e){this.id=t,this.url=e}},Na=class extends Mn{type=gt.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ui=class extends Mn{urlAfterRedirects;type=gt.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},pn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(pn||{}),gg=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(gg||{}),Lr=class extends Mn{reason;code;type=gt.NavigationCancel;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qi=class extends Mn{reason;code;type=gt.NavigationSkipped;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}},Pa=class extends Mn{error;target;type=gt.NavigationError;constructor(t,e,r,i){super(t,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},zu=class extends Mn{urlAfterRedirects;state;type=gt.RoutesRecognized;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vg=class extends Mn{urlAfterRedirects;state;type=gt.GuardsCheckStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yg=class extends Mn{urlAfterRedirects;state;shouldActivate;type=gt.GuardsCheckEnd;constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},_g=class extends Mn{urlAfterRedirects;state;type=gt.ResolveStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bg=class extends Mn{urlAfterRedirects;state;type=gt.ResolveEnd;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wg=class{route;type=gt.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Cg=class{route;type=gt.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Eg=class{snapshot;type=gt.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sg=class{snapshot;type=gt.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dg=class{snapshot;type=gt.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xg=class{snapshot;type=gt.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Oa=class{},as=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function IP(n,t){return n.providers&&!n._injector&&(n._injector=vm(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Hn(n){return n.outlet||re}function TP(n,t){let e=n.filter(r=>Hn(r)===t);return e.push(...n.filter(r=>Hn(r)!==t)),e}function Ua(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Ig=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ua(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Yu(this.rootInjector)}},Yu=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new Ig(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(F($t))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qu=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Tg(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=Tg(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Mg(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Mg(t,this._root).map(e=>e.value)}};function Tg(n,t){if(n===t.value)return t;for(let e of t.children){let r=Tg(n,e);if(r)return r}return null}function Mg(n,t){if(n===t.value)return[t];for(let e of t.children){let r=Mg(n,e);if(r.length)return r.unshift(t),r}return[]}var fn=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function ns(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Gu=class extends qu{snapshot;constructor(t,e){super(t),this.snapshot=e,jg(this,t)}toString(){return this.snapshot.toString()}};function iE(n){let t=MP(n),e=new ht([new qi("",{})]),r=new ht({}),i=new ht({}),o=new ht({}),s=new ht(""),a=new hn(e,r,o,s,i,re,n,t.root);return a.snapshot=t.root,new Gu(new fn(a,[]),t)}function MP(n){let t={},e={},r={},i="",o=new is([],t,r,i,e,re,n,null,{});return new Qu("",new fn(o,[]))}var hn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,i,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Y(d=>d[ja]))??Z(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(t=>ss(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(t=>ss(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Wu(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:N(N({},t.params),n.params),data:N(N({},t.data),n.data),resolve:N(N(N(N({},n.data),t.data),i?.data),n._resolvedData)}:r={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},i&&sE(i)&&(r.resolve[ja]=i.title),r}var is=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ja]}constructor(t,e,r,i,o,s,a,l,d){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ss(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ss(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Qu=class extends qu{url;constructor(t,e){super(e),this.url=t,jg(this,e)}toString(){return oE(this._root)}};function jg(n,t){t.value._routerState=n,t.children.forEach(e=>jg(n,e))}function oE(n){let t=n.children.length>0?` { ${n.children.map(oE).join(", ")} } `:"";return`${n.value}${t}`}function cg(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ir(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),ir(t.params,e.params)||n.paramsSubject.next(e.params),nP(t.url,e.url)||n.urlSubject.next(e.url),ir(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ag(n,t){let e=ir(n.params,t.params)&&sP(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||Ag(n.parent,t.parent))}function sE(n){return typeof n.title=="string"||n.title===null}var AP=new $(""),Ug=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new ne;deactivateEvents=new ne;attachEvents=new ne;detachEvents=new ne;routerOutletData=db(void 0);parentContexts=I(Yu);location=I(Ar);changeDetector=I(le);inputBinder=I(Bg,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new k(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new k(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new k(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new k(4013,!1);this._activatedRoute=e;let i=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new kg(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ve({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ln]})}return n})(),kg=class n{route;childContexts;parent;outletData;__ngOutletInjector(t){return new n(this.route,this.childContexts,t,this.outletData)}constructor(t,e,r,i){this.route=t,this.childContexts=e,this.parent=r,this.outletData=i}get(t,e){return t===hn?this.route:t===Yu?this.childContexts:t===AP?this.outletData:this.parent.get(t,e)}},Bg=new $("");function kP(n,t,e){let r=Ra(n,t._root,e?e._root:void 0);return new Gu(r,t)}function Ra(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=NP(n,t,e);return new fn(r,i)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Ra(n,a)),s}}let r=PP(t.value),i=t.children.map(o=>Ra(n,o));return new fn(r,i)}}function NP(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ra(n,r,i);return Ra(n,r)})}function PP(n){return new hn(new ht(n.url),new ht(n.params),new ht(n.queryParams),new ht(n.fragment),new ht(n.data),n.outlet,n.component,n)}var Fa=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},aE="ngNavigationCancelingError";function Ku(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=Wi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=lE(!1,pn.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function lE(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[aE]=!0,e.cancellationCode=t,e}function OP(n){return cE(n)&&Wi(n.url)}function cE(n){return!!n&&n[aE]}var RP=(n,t,e,r)=>Y(i=>(new Ng(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),Ng=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,i,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),cg(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=ns(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=ns(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=ns(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=ns(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new xg(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Sg(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(cg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),cg(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},Zu=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},os=class{component;route;constructor(t,e){this.component=t,this.route=e}};function FP(n,t,e){let r=n._root,i=t?t._root:null;return xa(r,i,e,[r.value])}function LP(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function cs(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!o_(n)?n:t.get(n):r}function xa(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ns(t);return n.children.forEach(s=>{VP(s,o[s.value.outlet],e,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ma(a,e.getContext(s),i)),i}function VP(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=jP(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Zu(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?xa(n,t,a?a.children:null,r,i):xa(n,t,e,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new os(a.outlet.component,s))}else s&&Ma(t,a,i),i.canActivateChecks.push(new Zu(r)),o.component?xa(n,null,a?a.children:null,r,i):xa(n,null,e,r,i);return i}function jP(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Gi(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Gi(n.url,t.url)||!ir(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ag(n,t)||!ir(n.queryParams,t.queryParams);case"paramsChange":default:return!Ag(n,t)}}function Ma(n,t,e){let r=ns(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?t?Ma(s,t.children.getContext(o),e):Ma(s,null,e):Ma(s,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new os(t.outlet.component,i)):e.canDeactivateChecks.push(new os(null,i)):e.canDeactivateChecks.push(new os(null,i))}function Ba(n){return typeof n=="function"}function UP(n){return typeof n=="boolean"}function BP(n){return n&&Ba(n.canLoad)}function $P(n){return n&&Ba(n.canActivate)}function HP(n){return n&&Ba(n.canActivateChild)}function zP(n){return n&&Ba(n.canDeactivate)}function qP(n){return n&&Ba(n.canMatch)}function uE(n){return n instanceof hr||n?.name==="EmptyError"}var Vu=Symbol("INITIAL_VALUE");function ls(){return rn(n=>Mo(n.map(t=>t.pipe(nn(1),zs(Vu)))).pipe(Y(t=>{for(let e of t)if(e!==!0){if(e===Vu)return Vu;if(e===!1||GP(e))return e}return!0}),At(t=>t!==Vu),nn(1)))}function GP(n){return Wi(n)||n instanceof Fa}function WP(n,t){return st(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?Z(G(N({},e),{guardsResult:!0})):QP(s,r,i,n).pipe(st(a=>a&&UP(a)?KP(r,o,n,t):Z(a)),Y(a=>G(N({},e),{guardsResult:a})))})}function QP(n,t,e,r){return Qe(n).pipe(st(i=>eO(i.component,i.route,e,t,r)),gr(i=>i!==!0,!0))}function KP(n,t,e,r){return Qe(t).pipe(Kr(i=>Qr(YP(i.route.parent,r),ZP(i.route,r),XP(n,i.path,e),JP(n,i.route,e))),gr(i=>i!==!0,!0))}function ZP(n,t){return n!==null&&t&&t(new Dg(n)),Z(!0)}function YP(n,t){return n!==null&&t&&t(new Eg(n)),Z(!0)}function JP(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>ec(()=>{let s=Ua(t)??e,a=cs(o,s),l=$P(a)?a.canActivate(t,n):an(s,()=>a(t,n));return di(l).pipe(gr())}));return Z(i).pipe(ls())}function XP(n,t,e){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>LP(s)).filter(s=>s!==null).map(s=>ec(()=>{let a=s.guards.map(l=>{let d=Ua(s.node)??e,p=cs(l,d),m=HP(p)?p.canActivateChild(r,n):an(d,()=>p(r,n));return di(m).pipe(gr())});return Z(a).pipe(ls())}));return Z(o).pipe(ls())}function eO(n,t,e,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let l=Ua(t)??i,d=cs(a,l),p=zP(d)?d.canDeactivate(n,t,e,r):an(l,()=>d(n,t,e,r));return di(p).pipe(gr())});return Z(s).pipe(ls())}function tO(n,t,e,r){let i=t.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=cs(s,n),l=BP(a)?a.canLoad(t,e):an(n,()=>a(t,e));return di(l)});return Z(o).pipe(ls(),dE(r))}function dE(n){return Jf(Ze(t=>{if(typeof t!="boolean")throw Ku(n,t)}),Y(t=>t===!0))}function nO(n,t,e,r){let i=t.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=cs(s,n),l=qP(a)?a.canMatch(t,e):an(n,()=>a(t,e));return di(l)});return Z(o).pipe(ls(),dE(r))}var La=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Va=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function ts(n){return Wr(new La(n))}function rO(n){return Wr(new k(4e3,!1))}function iO(n){return Wr(lE(!1,pn.GuardRejected))}var Pg=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[re])return rO(`${t.redirectTo}`);i=i.children[re]}}applyRedirectCommands(t,e,r,i,o){if(typeof e!="string"){let a=e,{queryParams:l,fragment:d,routeConfig:p,url:m,outlet:y,params:v,data:b,title:C}=i,x=an(o,()=>a({params:v,data:b,queryParams:l,fragment:d,routeConfig:p,url:m,outlet:y,title:C}));if(x instanceof Vr)throw new Va(x);e=x}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r);if(e[0]==="/")throw new Va(s);return s}applyRedirectCreateUrlTree(t,e,r,i){let o=this.createSegmentGroup(t,e.root,r,i);return new Vr(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(t,e,r,i){let o=this.createSegments(t,e.segments,r,i),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,r,i)}),new Se(o,s)}createSegments(t,e,r,i){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new k(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}},Og={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oO(n,t,e,r,i){let o=fE(n,t,e);return o.matched?(r=IP(t,r),nO(r,t,e,i).pipe(Y(s=>s===!0?o:N({},Og)))):Z(o)}function fE(n,t,e){if(t.path==="**")return sO(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?N({},Og):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||tP)(e,n,t);if(!i)return N({},Og);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?N(N({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function sO(n){return{matched:!0,parameters:n.length>0?qC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function BC(n,t,e,r){return e.length>0&&cO(n,e,r)?{segmentGroup:new Se(t,lO(r,new Se(e,n.children))),slicedSegments:[]}:e.length===0&&uO(n,e,r)?{segmentGroup:new Se(n.segments,aO(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new Se(n.segments,n.children),slicedSegments:e}}function aO(n,t,e,r){let i={};for(let o of e)if(Ju(n,t,o)&&!r[Hn(o)]){let s=new Se([],{});i[Hn(o)]=s}return N(N({},r),i)}function lO(n,t){let e={};e[re]=t;for(let r of n)if(r.path===""&&Hn(r)!==re){let i=new Se([],{});e[Hn(r)]=i}return e}function cO(n,t,e){return e.some(r=>Ju(n,t,r)&&Hn(r)!==re)}function uO(n,t,e){return e.some(r=>Ju(n,t,r))}function Ju(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function dO(n,t,e){return t.length===0&&!n.children[e]}var Rg=class{};function fO(n,t,e,r,i,o,s="emptyOnly"){return new Fg(n,t,e,r,i,s,o).recognize()}var pO=31,Fg=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,i,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Pg(this.urlSerializer,this.urlTree)}noMatchError(t){return new k(4002,`'${t.segmentGroup}'`)}recognize(){let t=BC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Y(({children:e,rootSnapshot:r})=>{let i=new fn(r,e),o=new Qu("",i),s=bP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new is([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,re,e).pipe(Y(r=>({children:r,rootSnapshot:e})),Kn(r=>{if(r instanceof Va)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof La?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,o):this.processSegment(t,e,r,r.segments,i,!0,o).pipe(Y(s=>s instanceof fn?[s]:[]))}processChildren(t,e,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Qe(o).pipe(Kr(s=>{let a=r.children[s],l=TP(e,s);return this.processSegmentGroup(t,l,a,s,i)}),ap((s,a)=>(s.push(...a),s)),Zr(null),sp(),st(s=>{if(s===null)return ts(r);let a=pE(s);return hO(a),Z(a)}))}processSegment(t,e,r,i,o,s,a){return Qe(e).pipe(Kr(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,r,i,o,s,a).pipe(Kn(d=>{if(d instanceof La)return Z(null);throw d}))),gr(l=>!!l),Kn(l=>{if(uE(l))return dO(r,i,o)?Z(new Rg):ts(r);throw l}))}processSegmentAgainstRoute(t,e,r,i,o,s,a,l){return Hn(r)!==s&&(s===re||!Ju(i,o,r))?ts(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,o,s,l):ts(i)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s,a){let{matched:l,parameters:d,consumedSegments:p,positionalParamSegments:m,remainingSegments:y}=fE(e,i,o);if(!l)return ts(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>pO&&(this.allowRedirects=!1));let v=new is(o,d,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,$C(i),Hn(i),i.component??i._loadedComponent??null,i,HC(i)),b=Wu(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let C=this.applyRedirects.applyRedirectCommands(p,i.redirectTo,m,v,t);return this.applyRedirects.lineralizeSegments(i,C).pipe(st(x=>this.processSegment(t,r,e,x.concat(y),s,!1,a)))}matchSegmentAgainstRoute(t,e,r,i,o,s){let a=oO(e,r,i,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(rn(l=>l.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(rn(({routes:d})=>{let p=r._loadedInjector??t,{parameters:m,consumedSegments:y,remainingSegments:v}=l,b=new is(y,m,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,$C(r),Hn(r),r.component??r._loadedComponent??null,r,HC(r)),C=Wu(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(C.params),b.data=Object.freeze(C.data);let{segmentGroup:x,slicedSegments:A}=BC(e,y,v,d);if(A.length===0&&x.hasChildren())return this.processChildren(p,d,x,b).pipe(Y(U=>new fn(b,U)));if(d.length===0&&A.length===0)return Z(new fn(b,[]));let j=Hn(r)===o;return this.processSegment(p,d,x,A,j?re:o,!0,b).pipe(Y(U=>new fn(b,U instanceof fn?[U]:[])))}))):ts(e)))}getChildConfig(t,e,r){return e.children?Z({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?Z({routes:e._loadedRoutes,injector:e._loadedInjector}):tO(t,e,r,this.urlSerializer).pipe(st(i=>i?this.configLoader.loadChildren(t,e).pipe(Ze(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):iO(e))):Z({routes:[],injector:t})}};function hO(n){n.sort((t,e)=>t.value.outlet===re?-1:e.value.outlet===re?1:t.value.outlet.localeCompare(e.value.outlet))}function mO(n){let t=n.value.routeConfig;return t&&t.path===""}function pE(n){let t=[],e=new Set;for(let r of n){if(!mO(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=pE(r.children);t.push(new fn(r.value,i))}return t.filter(r=>!e.has(r))}function $C(n){return n.data||{}}function HC(n){return n.resolve||{}}function gO(n,t,e,r,i,o){return st(s=>fO(n,t,e,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:l})=>G(N({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function vO(n,t){return st(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return Z(e);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let d of hE(l))s.add(d);let a=0;return Qe(s).pipe(Kr(l=>o.has(l)?yO(l,r,n,t):(l.data=Wu(l,l.parent,n).resolve,Z(void 0))),Ze(()=>a++),Ao(1),st(l=>a===s.size?Z(e):Vt))})}function hE(n){let t=n.children.map(e=>hE(e)).flat();return[n,...t]}function yO(n,t,e,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!sE(i)&&(o[ja]=i.title),_O(o,n,t,r).pipe(Y(s=>(n._resolvedData=s,n.data=Wu(n,n.parent,e).resolve,null)))}function _O(n,t,e,r){let i=fg(n);if(i.length===0)return Z({});let o={};return Qe(i).pipe(st(s=>bO(n[s],t,e,r).pipe(gr(),Ze(a=>{if(a instanceof Fa)throw Ku(new Aa,a);o[s]=a}))),Ao(1),Y(()=>o),Kn(s=>uE(s)?Vt:Wr(s)))}function bO(n,t,e,r){let i=Ua(t)??r,o=cs(n,i),s=o.resolve?o.resolve(t,e):an(i,()=>o(t,e));return di(s)}function ug(n){return rn(t=>{let e=n(t);return e?Qe(e).pipe(Y(()=>t)):Z(t)})}var mE=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(e){return e.data[ja]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>I(wO),providedIn:"root"})}return n})(),wO=(()=>{class n extends mE{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(F(FC))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$g=new $("",{providedIn:"root",factory:()=>({})}),CO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=V({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&_(0,"router-outlet")},dependencies:[Ug],encapsulation:2})}return n})();function Hg(n){let t=n.children&&n.children.map(Hg),e=t?G(N({},n),{children:t}):N({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==re&&(e.component=CO),e}var zg=new $(""),EO=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=I(Tm);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Z(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=di(e.loadComponent()).pipe(Y(gE),Ze(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),mr(()=>{this.componentLoaders.delete(e)})),i=new Io(r,()=>new Ue).pipe(xo());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=SO(r,this.compiler,e,this.onLoadEndListener).pipe(mr(()=>{this.childrenLoaders.delete(r)})),s=new Io(o,()=>new Ue).pipe(xo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SO(n,t,e,r){return di(n.loadChildren()).pipe(Y(gE),st(i=>i instanceof ia||Array.isArray(i)?Z(i):Qe(t.compileModuleAsync(i))),Y(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(e).injector,s=o.get(zg,[],{optional:!0,self:!0}).flat()),{routes:s.map(Hg),injector:o}}))}function DO(n){return n&&typeof n=="object"&&"default"in n}function gE(n){return DO(n)?n.default:n}var qg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>I(xO),providedIn:"root"})}return n})(),xO=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IO=new $("");var TO=new $(""),MO=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ue;transitionAbortSubject=new Ue;configLoader=I(EO);environmentInjector=I($t);destroyRef=I(Ui);urlSerializer=I(Vg);rootContexts=I(Yu);location=I(ha);inputBindingEnabled=I(Bg,{optional:!0})!==null;titleStrategy=I(mE);options=I($g,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=I(qg);createViewTransition=I(IO,{optional:!0});navigationErrorHandler=I(TO,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Z(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new wg(i)),r=i=>this.events.next(new Cg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(G(N(N({},this.transitions.value),e),{id:r}))}setupNavigations(e,r,i){return this.transitions=new ht({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ta,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(At(o=>o.id!==0),Y(o=>G(N({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),rn(o=>{let s=!1,a=!1;return Z(o).pipe(rn(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",pn.SupersededByNewNavigation),Vt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?G(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!d&&p!=="reload"){let m="";return this.events.next(new Qi(l.id,this.urlSerializer.serialize(l.rawUrl),m,gg.IgnoredSameUrlNavigation)),l.resolve(!1),Vt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Z(l).pipe(rn(m=>{let y=this.transitions?.getValue();return this.events.next(new Na(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?Vt:Promise.resolve(m)}),gO(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Ze(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=G(N({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let y=new zu(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:y,source:v,restoredState:b,extras:C}=l,x=new Na(m,this.urlSerializer.serialize(y),v,b);this.events.next(x);let A=iE(this.rootComponentType).snapshot;return this.currentTransition=o=G(N({},l),{targetSnapshot:A,urlAfterRedirects:y,extras:G(N({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Z(o)}else{let m="";return this.events.next(new Qi(l.id,this.urlSerializer.serialize(l.extractedUrl),m,gg.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Vt}}),Ze(l=>{let d=new vg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Y(l=>(this.currentTransition=o=G(N({},l),{guards:FP(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),WP(this.environmentInjector,l=>this.events.next(l)),Ze(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Ku(this.urlSerializer,l.guardsResult);let d=new yg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),At(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",pn.GuardRejected),!1)),ug(l=>{if(l.guards.canActivateChecks.length)return Z(l).pipe(Ze(d=>{let p=new _g(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),rn(d=>{let p=!1;return Z(d).pipe(vO(this.paramsInheritanceStrategy,this.environmentInjector),Ze({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(d,"",pn.NoDataFromResolver)}}))}),Ze(d=>{let p=new bg(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),ug(l=>{let d=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(Ze(y=>{p.component=y}),Y(()=>{})));for(let y of p.children)m.push(...d(y));return m};return Mo(d(l.targetSnapshot.root)).pipe(Zr(null),nn(1))}),ug(()=>this.afterPreactivation()),rn(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return p?Qe(p).pipe(Y(()=>o)):Z(o)}),Y(l=>{let d=kP(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=G(N({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),Ze(()=>{this.events.next(new Oa)}),RP(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),nn(1),Ze({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ui(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),qs(this.transitionAbortSubject.pipe(Ze(l=>{throw l}))),mr(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",pn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Kn(l=>{if(this.destroyed)return o.resolve(!1),Vt;if(a=!0,cE(l))this.events.next(new Lr(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),OP(l)?this.events.next(new as(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let d=new Pa(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let p=an(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(p instanceof Fa){let{message:m,cancellationCode:y}=Ku(this.urlSerializer,p);this.events.next(new Lr(o.id,this.urlSerializer.serialize(o.extractedUrl),m,y)),this.events.next(new as(p.redirectTo,p.navigationBehaviorOptions))}else throw this.events.next(d),l}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return Vt}))}))}cancelNavigationTransition(e,r,i){let o=new Lr(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function AO(n){return n!==Ta}var kO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>I(NO),providedIn:"root"})}return n})(),Lg=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},NO=(()=>{class n extends Lg{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Sn(n)))(i||n)}})();static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:()=>I(PO),providedIn:"root"})}return n})(),PO=(()=>{class n extends vE{location=I(ha);urlSerializer=I(Vg);options=I($g,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=I(qg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Vr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=iE(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&e(r.url,r.state)})}handleRouterEvent(e,r){if(e instanceof Na)this.stateMemento=this.createStateMemento();else if(e instanceof Qi)this.rawUrlTree=r.initialUrl;else if(e instanceof zu){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else e instanceof Oa?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):e instanceof Lr&&(e.code===pn.GuardRejected||e.code===pn.NoDataFromResolver)?this.restoreHistory(r):e instanceof Pa?this.restoreHistory(r,!0):e instanceof ui&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,r){let i=e instanceof Vr?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=N(N({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=N(N({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Sn(n)))(i||n)}})();static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OO(n,t){n.events.pipe(At(e=>e instanceof ui||e instanceof Lr||e instanceof Pa||e instanceof Qi),Y(e=>e instanceof ui||e instanceof Qi?0:(e instanceof Lr?e.code===pn.Redirect||e.code===pn.SupersededByNewNavigation:!1)?2:1),At(e=>e!==2),nn(1)).subscribe(()=>{t()})}var RO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},vt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=I(Cm);stateManager=I(vE);options=I($g,{optional:!0})||{};pendingTasks=I(Tr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=I(MO);urlSerializer=I(Vg);location=I(ha);urlHandlingStrategy=I(qg);_events=new Ue;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=I(kO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=I(zg,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!I(Bg,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new je;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Lr&&r.code!==pn.Redirect&&r.code!==pn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ui)this.navigated=!0;else if(r instanceof as){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=N({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||AO(i.source)},s);this.scheduleNavigation(a,Ta,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}VO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ta,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",r)},0)})}navigateToSyncWithBrowser(e,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=N({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Hg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:s,p=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":p=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let y=i?i.snapshot:this.routerState.snapshot.root;m=eE(y)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),m=this.currentUrlTree.root}return tE(m,e,p,d??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=Wi(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ta,null,r)}navigate(e,r={skipLocationChange:!1}){return LO(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=N({},RO):r===!1?i=N({},FO):i=r,Wi(e))return LC(this.currentUrlTree,e,i);let o=this.parseUrl(e);return LC(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(e,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,d;s?(a=s.resolve,l=s.reject,d=s.promise):d=new Promise((m,y)=>{a=m,l=y});let p=this.pendingTasks.add();return OO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LO(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new k(4008,!1)}function VO(n){return!(n instanceof Oa)&&!(n instanceof as)}var Xe=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ue;constructor(e,r,i,o,s,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(d=>{d instanceof ui&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Wi(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let r=this.href===null?null:Rb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(e,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,e,r):i.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Wi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(D(vt),D(hn),nu("tabindex"),D(xn),D(nt),D(si))};static \u0275dir=ve({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&S("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&tr("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Bn],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Bn],replaceUrl:[2,"replaceUrl","replaceUrl",Bn],routerLink:"routerLink"},features:[$i,Ln]})}return n})();var jO=new $("");function yE(n,...t){return qo([{provide:zg,multi:!0,useValue:n},[],{provide:hn,useFactory:UO,deps:[vt]},{provide:du,multi:!0,useFactory:$O},t.map(e=>e.\u0275providers)])}function UO(n){return n.routerState.root}function BO(n,t){return{\u0275kind:n,\u0275providers:t}}function $O(){let n=I(mt);return t=>{let e=n.get(Sr);if(t!==e.components[0])return;let r=n.get(vt),i=n.get(HO);n.get(zO)===1&&r.initialNavigation(),n.get(qO,null,se.Optional)?.setUpPreloading(),n.get(jO,null,se.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var HO=new $("",{factory:()=>new Ue}),zO=new $("",{providedIn:"root",factory:()=>1});var qO=new $("");function _E(){return BO(6,[{provide:si,useClass:nC}])}var Gg;try{Gg=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Gg=!1}var Xu=(()=>{class n{_platformId=I(Et);isBrowser=this._platformId?Tn(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Gg)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wg(n){return Array.isArray(n)?n:[n]}var bE=new Set,Zi,GO=(()=>{class n{_platform=I(Xu);_nonce=I(ua,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):QO}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&WO(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function WO(n,t){if(!bE.has(n))try{Zi||(Zi=document.createElement("style"),t&&Zi.setAttribute("nonce",t),Zi.setAttribute("type","text/css"),document.head.appendChild(Zi)),Zi.sheet&&(Zi.sheet.insertRule(`@media ${n} {body{ }}`,0),bE.add(n))}catch(e){console.error(e)}}function QO(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var CE=(()=>{class n{_mediaMatcher=I(GO);_zone=I(Me);_queries=new Map;_destroySubject=new Ue;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return wE(Wg(e)).some(i=>this._registerQuery(i).mql.matches)}observe(e){let i=wE(Wg(e)).map(s=>this._registerQuery(s).observable),o=Mo(i);return o=Qr(o.pipe(nn(1)),o.pipe(up(1),op(0))),o.pipe(Y(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:d})=>{a.matches=a.matches||l,a.breakpoints[d]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let r=this._mediaMatcher.matchMedia(e),o={observable:new me(s=>{let a=l=>this._zone.run(()=>s.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(zs(r),Y(({matches:s})=>({query:e,matches:s})),qs(this._destroySubject)),mql:r};return this._queries.set(e,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wE(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var Yi=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Yi||{}),EE="cdk-high-contrast-black-on-white",SE="cdk-high-contrast-white-on-black",Qg="cdk-high-contrast-active",DE=(()=>{class n{_platform=I(Xu);_hasCheckedHighContrastMode;_document=I(He);_breakpointSubscription;constructor(){this._breakpointSubscription=I(CE).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Yi.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(e):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Yi.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Yi.BLACK_ON_WHITE}return Yi.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(Qg,EE,SE),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Yi.BLACK_ON_WHITE?e.add(Qg,EE):r===Yi.WHITE_ON_BLACK&&e.add(Qg,SE)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Kg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=lt({type:n});static \u0275inj=at({})}return n})();var Zg=(()=>{class n{constructor(){I(DE)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=lt({type:n});static \u0275inj=at({imports:[Kg,Kg]})}return n})();var KO=["*"],ed;function ZO(){if(ed===void 0&&(ed=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(ed=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return ed}function $a(n){return ZO()?.createHTML(n)||n}function xE(n){return Error(`Unable to find icon with the name "${n}"`)}function YO(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function IE(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function TE(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var jr=class{url;svgText;options;svgElement;constructor(t,e,r){this.url=t,this.svgText=e,this.options=r}},JO=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,r,i,o){this._httpClient=e,this._sanitizer=r,this._errorHandler=o,this._document=i}addSvgIcon(e,r,i){return this.addSvgIconInNamespace("",e,r,i)}addSvgIconLiteral(e,r,i){return this.addSvgIconLiteralInNamespace("",e,r,i)}addSvgIconInNamespace(e,r,i,o){return this._addSvgIconConfig(e,r,new jr(i,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,i,o){let s=this._sanitizer.sanitize(St.HTML,i);if(!s)throw TE(i);let a=$a(s);return this._addSvgIconConfig(e,r,new jr("",a,o))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,i){return this._addSvgIconSetConfig(e,new jr(r,null,i))}addSvgIconSetLiteralInNamespace(e,r,i){let o=this._sanitizer.sanitize(St.HTML,r);if(!o)throw TE(r);let s=$a(o);return this._addSvgIconSetConfig(e,new jr("",s,i))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let r=this._sanitizer.sanitize(St.RESOURCE_URL,e);if(!r)throw IE(e);let i=this._cachedIconsByUrl.get(r);return i?Z(td(i)):this._loadSvgIconFromConfig(new jr(e,null)).pipe(Ze(o=>this._cachedIconsByUrl.set(r,o)),Y(o=>td(o)))}getNamedSvgIcon(e,r=""){let i=ME(r,e),o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,e),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(r);return s?this._getSvgFromIconSetConfigs(e,s):Wr(xE(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Z(td(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Y(r=>td(r)))}_getSvgFromIconSetConfigs(e,r){let i=this._extractIconWithNameFromAnySet(e,r);if(i)return Z(i);let o=r.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Kn(a=>{let d=`Loading icon set URL: ${this._sanitizer.sanitize(St.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(d)),Z(null)})));return Hs(o).pipe(Y(()=>{let s=this._extractIconWithNameFromAnySet(e,r);if(!s)throw xE(e);return s}))}_extractIconWithNameFromAnySet(e,r){for(let i=r.length-1;i>=0;i--){let o=r[i];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,e,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Ze(r=>e.svgText=r),Y(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Z(null):this._fetchIcon(e).pipe(Ze(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,i){let o=e.querySelector(`[id="${r}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,i);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),i);let a=this._svgElementFromString($a("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,i)}_svgElementFromString(e){let r=this._document.createElement("DIV");r.innerHTML=e;let i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(e){let r=this._svgElementFromString($a("<svg></svg>")),i=e.attributes;for(let o=0;o<i.length;o++){let{name:s,value:a}=i[o];s!=="id"&&r.setAttribute(s,a)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){let{url:r,options:i}=e,o=i?.withCredentials??!1;if(!this._httpClient)throw YO();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let s=this._sanitizer.sanitize(St.RESOURCE_URL,r);if(!s)throw IE(r);let a=this._inProgressUrlFetches.get(s);if(a)return a;let l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(Y(d=>$a(d)),mr(()=>this._inProgressUrlFetches.delete(s)),cp());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(e,r,i){return this._svgIconConfigs.set(ME(e,r),i),this}_addSvgIconSetConfig(e,r){let i=this._iconSetConfigs.get(e);return i?i.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){let r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let i=0;i<this._resolvers.length;i++){let o=this._resolvers[i](r,e);if(o)return XO(o)?new jr(o.url,null,o.options):new jr(o,null)}}static \u0275fac=function(r){return new(r||n)(F(Jm,8),F(Sa),F(He,8),F(Ht))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function td(n){return n.cloneNode(!0)}function ME(n,t){return n+":"+t}function XO(n){return!!(n.url&&n.options)}var eR=new $("MAT_ICON_DEFAULT_OPTIONS"),tR=new $("mat-icon-location",{providedIn:"root",factory:nR});function nR(){let n=I(He),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var AE=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],rR=AE.map(n=>`[${n}]`).join(", "),iR=/^url\(['"]?#(.*?)['"]?\)$/,An=(()=>{class n{_elementRef=I(nt);_iconRegistry=I(JO);_location=I(tR);_errorHandler=I(Ht);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=je.EMPTY;constructor(){let e=I(new Ic("aria-hidden"),{optional:!0}),r=I(eR,{optional:!0});r&&(r.color&&(this.color=this._defaultColor=r.color),r.fontSet&&(this.fontSet=r.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let i=e.childNodes[r];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>e.classList.remove(i)),r.forEach(i=>e.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){let r=e.querySelectorAll(rR),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)AE.forEach(s=>{let a=r[o],l=a.getAttribute(s),d=l?l.match(iR):null;if(d){let p=i.get(a);p||(p=[],i.set(a,p)),p.push({name:s,value:d[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[r,i]=this._splitIconName(e);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(nn(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${r}:${i}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=V({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){r&2&&(tr("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),fu(i.color?"mat-"+i.color:""),Ee("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Bn],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[$i],ngContentSelectors:KO,decls:1,vars:0,template:function(r,i){r&1&&(Em(),Sm(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),kE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=lt({type:n});static \u0275inj=at({imports:[Zg,Zg]})}return n})();var NE=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-MAQGHWLI.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var Ha=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},nd=class extends Ha{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},rd=class extends Ha{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},id=class extends Ha{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},Yg=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(Yg||{});var sR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(m){s(m)}}function l(p){try{d(r.throw(p))}catch(m){s(m)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})},za=class{constructor(t,{headers:e={},customFetch:r,region:i=Yg.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=NE(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return sR(this,void 0,void 0,function*(){try{let{headers:i,method:o,body:s}=e,a={},{region:l}=e;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let d;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=s):typeof s=="string"?(a["Content-Type"]="text/plain",d=s):typeof FormData<"u"&&s instanceof FormData?d=s:(a["Content-Type"]="application/json",d=JSON.stringify(s)));let p=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:d}).catch(b=>{throw new nd(b)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new rd(p);if(!p.ok)throw new id(p);let y=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return y==="application/json"?v=yield p.json():y==="application/octet-stream"?v=yield p.blob():y==="text/event-stream"?v=p:y==="multipart/form-data"?v=yield p.formData():v=yield p.text(),{data:v,error:null}}catch(i){return{data:null,error:i}}})}};var qE=Y1(zE(),1),{PostgrestClient:GE,PostgrestQueryBuilder:I9,PostgrestFilterBuilder:T9,PostgrestTransformBuilder:M9,PostgrestBuilder:A9,PostgrestError:yR}=qE.default;var WE="2.11.2";var QE={"X-Client-Info":`realtime-js/${WE}`},KE="1.0.0",ld=1e4,ZE=1e3,ds=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(ds||{}),mn=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(mn||{}),kn=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(kn||{}),c0=function(n){return n.websocket="websocket",n}(c0||{}),Ji=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(Ji||{});var cd=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){let i=e.getUint8(1),o=e.getUint8(2),s=this.HEADER_LENGTH+2,a=r.decode(t.slice(s,s+i));s=s+i;let l=r.decode(t.slice(s,s+o));s=s+o;let d=JSON.parse(r.decode(t.slice(s,t.byteLength)));return{ref:null,topic:a,event:l,payload:d}}};var fs=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Le=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(Le||{}),d0=(n,t,e={})=>{var r;let i=(r=e.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((o,s)=>(o[s]=_R(s,n,t,i),o),{})},_R=(n,t,e,r)=>{let i=t.find(a=>a.name===n),o=i?.type,s=e[n];return o&&!r.includes(o)?YE(o,s):u0(s)},YE=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return ER(t,e)}switch(n){case Le.bool:return bR(t);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return wR(t);case Le.json:case Le.jsonb:return CR(t);case Le.timestamp:return SR(t);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:return u0(t);default:return u0(t)}},u0=n=>n,bR=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},wR=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},CR=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},ER=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let o,s=n.slice(1,e);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>YE(t,a))}return n},SR=n=>typeof n=="string"?n.replace(" ","T"):n,ud=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};var ps=class{constructor(t,e,r={},i=ld){this.channel=t,this.event=e,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var Ya=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,o,s),this.pendingDiffs.forEach(l=>{this.state=n.syncDiff(this.state,l,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,i){let o=this.cloneDeep(t),s=this.transformState(e),a={},l={};return this.map(o,(d,p)=>{s[d]||(l[d]=p)}),this.map(s,(d,p)=>{let m=o[d];if(m){let y=p.map(x=>x.presence_ref),v=m.map(x=>x.presence_ref),b=p.filter(x=>v.indexOf(x.presence_ref)<0),C=m.filter(x=>y.indexOf(x.presence_ref)<0);b.length>0&&(a[d]=b),C.length>0&&(l[d]=C)}else a[d]=p}),this.syncDiff(o,{joins:a,leaves:l},r,i)}static syncDiff(t,e,r,i){let{joins:o,leaves:s}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,l)=>{var d;let p=(d=t[a])!==null&&d!==void 0?d:[];if(t[a]=this.cloneDeep(l),p.length>0){let m=t[a].map(v=>v.presence_ref),y=p.filter(v=>m.indexOf(v.presence_ref)<0);t[a].unshift(...y)}r(a,p,l)}),this.map(s,(a,l)=>{let d=t[a];if(!d)return;let p=l.map(m=>m.presence_ref);d=d.filter(m=>p.indexOf(m.presence_ref)<0),t[a]=d,i(a,d,l),d.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let i=t[r];return"metas"in i?e[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):e[r]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Ur=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(Ur||{});var Ja=class n{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=mn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new ps(this,kn.join,this.params,this.timeout),this.rejoinTimer=new fs(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(kn.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new Ya(this),this.broadcastEndpointURL=ud(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:o,presence:s,private:a}}=this.params;this._onError(p=>t?.(Ur.CHANNEL_ERROR,p)),this._onClose(()=>t?.(Ur.CLOSED));let l={},d={broadcast:o,presence:s,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},l)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket.setAuth(),p===void 0){t?.(Ur.SUBSCRIBED);return}else{let y=this.bindings.postgres_changes,v=(m=y?.length)!==null&&m!==void 0?m:0,b=[];for(let C=0;C<v;C++){let x=y[C],{filter:{event:A,schema:j,table:U,filter:q}}=x,Q=p&&p[C];if(Q&&Q.event===A&&Q.schema===j&&Q.table===U&&Q.filter===q)b.push(Object.assign(Object.assign({},x),{id:Q.id}));else{this.unsubscribe(),t?.(Ur.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Ur.SUBSCRIBED);return}}).receive("error",p=>{t?.(Ur.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t?.(Ur.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,r){return this._on(t,e,r)}async send(t,e={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){let{event:o,payload:s}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{let d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=e.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,l;let d=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=mn.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kn.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let i=new ps(this,kn.leave,{},t);i.receive("ok",()=>{e(),r("ok")}).receive("timeout",()=>{e(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(t,e,r){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(o),s}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ps(this,t,e,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:l,leave:d,join:p}=kn;if(r&&[a,l,d,p].indexOf(s)>=0&&r!==this._joinRef())return;let y=this._onMessage(s,e,r);if(e&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var b,C,x;return((b=v.filter)===null||b===void 0?void 0:b.event)==="*"||((x=(C=v.filter)===null||C===void 0?void 0:C.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(v=>v.callback(y,r)):(o=this.bindings[s])===null||o===void 0||o.filter(v=>{var b,C,x,A,j,U;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in v){let q=v.id,Q=(b=v.filter)===null||b===void 0?void 0:b.event;return q&&((C=e.ids)===null||C===void 0?void 0:C.includes(q))&&(Q==="*"||Q?.toLocaleLowerCase()===((x=e.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{let q=(j=(A=v?.filter)===null||A===void 0?void 0:A.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return q==="*"||q===((U=e?.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===s}).map(v=>{if(typeof y=="object"&&"ids"in y){let b=y.data,{schema:C,table:x,commit_timestamp:A,type:j,errors:U}=b;y=Object.assign(Object.assign({},{schema:C,table:x,commit_timestamp:A,eventType:j,new:{},old:{},errors:U}),this._getPayloadRecords(b))}v.callback(y,r)})}_isClosed(){return this.state===mn.closed}_isJoined(){return this.state===mn.joined}_isJoining(){return this.state===mn.joining}_isLeaving(){return this.state===mn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let i=t.toLocaleLowerCase(),o={type:i,filter:e,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&n.isEqual(i.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(kn.close,{},t)}_onError(t){this._on(kn.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=d0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=d0(t.columns,t.old_record)),e}};var xR=()=>{},IR=typeof WebSocket<"u",TR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Xa=class{constructor(t,e){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=QE,this.params={},this.timeout=ld,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=xR,this.conn=null,this.sendBuffer=[],this.serializer=new cd,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let s;return o?s=o:typeof fetch>"u"?s=(...a)=>import("./chunk-MAQGHWLI.js").then(({default:l})=>l(...a)):s=fetch,(...a)=>s(...a)},this.endPoint=`${t}/${c0.websocket}`,this.httpEndpoint=ud(t),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let i=(r=e?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=e?.encode?e.encode:(o,s)=>s(JSON.stringify(o)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new fs(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(IR){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new f0(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-KYSFV2V4.js").then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:KE}))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){let e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){let t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),t}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ds.connecting:return Ji.Connecting;case ds.open:return Ji.Open;case ds.closing:return Ji.Closing;default:return Ji.Closed}}isConnected(){return this.connectionState()===Ji.Open}channel(t,e={config:{}}){let r=new Ja(`realtime:${t}`,e,this);return this.channels.push(r),r}push(t){let{topic:e,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){let e=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(e){let r=null;try{r=JSON.parse(atob(e.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=e,this.channels.forEach(i=>{e&&i.updateJoinPayload({access_token:e}),i.joinedOnce&&i._isJoined()&&i._push(kn.access_token,{access_token:e})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(ZE,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:r,event:i,payload:o,ref:s}=e;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${i} ${s&&"("+s+")"||""}`,o),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,o,s)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(kn.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${r}${i}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([TR],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}};var f0=class{constructor(t,e,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ds.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}};var hs=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function it(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var dd=class extends hs{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Xi=class extends hs{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var MR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(m){s(m)}}function l(p){try{d(r.throw(p))}catch(m){s(m)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})},pd=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-MAQGHWLI.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},JE=()=>MR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-MAQGHWLI.js")).Response:Response}),fd=n=>{if(Array.isArray(n))return n.map(e=>fd(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let i=e.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=fd(r)}),t};var eo=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(m){s(m)}}function l(p){try{d(r.throw(p))}catch(m){s(m)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})},p0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),AR=(n,t,e)=>eo(void 0,void 0,void 0,function*(){let r=yield JE();n instanceof r&&!e?.noResolveJson?n.json().then(i=>{t(new dd(p0(i),n.status||500))}).catch(i=>{t(new Xi(p0(i),i))}):t(new Xi(p0(n),n))}),kR=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),e))};function el(n,t,e,r,i,o){return eo(this,void 0,void 0,function*(){return new Promise((s,a)=>{n(e,kR(t,r,i,o)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>s(l)).catch(l=>AR(l,a,r))})})}function ms(n,t,e,r){return eo(this,void 0,void 0,function*(){return el(n,"GET",t,e,r)})}function or(n,t,e,r,i){return eo(this,void 0,void 0,function*(){return el(n,"POST",t,r,i,e)})}function XE(n,t,e,r,i){return eo(this,void 0,void 0,function*(){return el(n,"PUT",t,r,i,e)})}function eS(n,t,e,r){return eo(this,void 0,void 0,function*(){return el(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function hd(n,t,e,r,i){return eo(this,void 0,void 0,function*(){return el(n,"DELETE",t,r,i,e)})}var Wt=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(m){s(m)}}function l(p){try{d(r.throw(p))}catch(m){s(m)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})},NR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},md=class{constructor(t,e={},r,i){this.url=t,this.headers=e,this.bucketId=r,this.fetch=pd(i)}uploadOrUpdate(t,e,r,i){return Wt(this,void 0,void 0,function*(){try{let o,s=Object.assign(Object.assign({},tS),i),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)}),l=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",s.cacheControl),l&&o.append("metadata",this.encodeMetadata(l))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let d=this._removeEmptyFolders(e),p=this._getFinalPath(d),m=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:t,body:o,headers:a},s?.duplex?{duplex:s.duplex}:{})),y=yield m.json();return m.ok?{data:{path:d,id:y.Id,fullPath:y.Key},error:null}:{data:null,error:y}}catch(o){if(it(o))return{data:null,error:o};throw o}})}upload(t,e,r){return Wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,i){return Wt(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(t),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",e);try{let l,d=Object.assign({upsert:tS.upsert},i),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",d.cacheControl)):(l=r,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType);let m=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:p}),y=yield m.json();return m.ok?{data:{path:o,fullPath:y.Key},error:null}:{data:null,error:y}}catch(l){if(it(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return Wt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");let o=yield or(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new hs("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:a},error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}})}update(t,e,r){return Wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return Wt(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(it(i))return{data:null,error:i};throw i}})}copy(t,e,r){return Wt(this,void 0,void 0,function*(){try{return{data:{path:(yield or(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(it(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,r){return Wt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),o=yield or(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(it(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,r){return Wt(this,void 0,void 0,function*(){try{let i=yield or(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(it(i))return{data:null,error:i};throw i}})}download(t,e){return Wt(this,void 0,void 0,function*(){let i=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),s=o?`?${o}`:"";try{let a=this._getFinalPath(t);return{data:yield(yield ms(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(it(a))return{data:null,error:a};throw a}})}info(t){return Wt(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield ms(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:fd(r),error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}})}exists(t){return Wt(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield eS(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(it(r)&&r instanceof Xi){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),i=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);let a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&i.push(l);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${d}`)}}}remove(t){return Wt(this,void 0,void 0,function*(){try{return{data:yield hd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(it(e))return{data:null,error:e};throw e}})}list(t,e,r){return Wt(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},NR),e),{prefix:t||""});return{data:yield or(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(it(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var nS="2.7.1";var rS={"X-Client-Info":`storage-js/${nS}`};var gs=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(m){s(m)}}function l(p){try{d(r.throw(p))}catch(m){s(m)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})},gd=class{constructor(t,e={},r){this.url=t,this.headers=Object.assign(Object.assign({},rS),e),this.fetch=pd(r)}listBuckets(){return gs(this,void 0,void 0,function*(){try{return{data:yield ms(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(it(t))return{data:null,error:t};throw t}})}getBucket(t){return gs(this,void 0,void 0,function*(){try{return{data:yield ms(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(it(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return gs(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}})}updateBucket(t,e){return gs(this,void 0,void 0,function*(){try{return{data:yield XE(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}})}emptyBucket(t){return gs(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(it(e))return{data:null,error:e};throw e}})}deleteBucket(t){return gs(this,void 0,void 0,function*(){try{return{data:yield hd(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(it(e))return{data:null,error:e};throw e}})}};var tl=class extends gd{constructor(t,e={},r){super(t,e,r)}from(t){return new md(this.url,this.headers,t,this.fetch)}};var iS="2.48.1";var nl="";typeof Deno<"u"?nl="deno":typeof document<"u"?nl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?nl="react-native":nl="node";var PR={"X-Client-Info":`supabase-js-${nl}/${iS}`},oS={headers:PR},sS={schema:"public"},aS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lS={};Dv();var OR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(m){s(m)}}function l(p){try{d(r.throw(p))}catch(m){s(m)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})},RR=n=>{let t;return n?t=n:typeof fetch>"u"?t=Ev:t=fetch,(...e)=>t(...e)},FR=()=>typeof Headers>"u"?Sv:Headers,cS=(n,t,e)=>{let r=RR(e),i=FR();return(o,s)=>OR(void 0,void 0,void 0,function*(){var a;let l=(a=yield t())!==null&&a!==void 0?a:n,d=new i(s?.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},s),{headers:d}))})};var LR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(m){s(m)}}function l(p){try{d(r.throw(p))}catch(m){s(m)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})};function uS(n){return n.replace(/\/$/,"")}function dS(n,t){let{db:e,auth:r,realtime:i,global:o}=n,{db:s,auth:a,realtime:l,global:d}=t,p={db:Object.assign(Object.assign({},s),e),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},d),o),accessToken:()=>LR(this,void 0,void 0,function*(){return""})};return n.accessToken?p.accessToken=n.accessToken:delete p.accessToken,p}function fS(n){return Math.round(Date.now()/1e3)+n}function pS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var zn=()=>typeof document<"u",to={tested:!1,writable:!1},fi=()=>{if(!zn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(to.tested)return to.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),to.tested=!0,to.writable=!0}catch{to.tested=!0,to.writable=!1}return to.writable};function vd(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return e.searchParams.forEach((r,i)=>{t[i]=r}),t}var yd=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-MAQGHWLI.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},hS=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",pi=async(n,t,e)=>{await n.setItem(t,JSON.stringify(e))},il=async(n,t)=>{let e=await n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},_d=async(n,t)=>{await n.removeItem(t)};function VR(n){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="",r,i,o,s,a,l,d,p=0;for(n=n.replace("-","+").replace("_","/");p<n.length;)s=t.indexOf(n.charAt(p++)),a=t.indexOf(n.charAt(p++)),l=t.indexOf(n.charAt(p++)),d=t.indexOf(n.charAt(p++)),r=s<<2|a>>4,i=(a&15)<<4|l>>2,o=(l&3)<<6|d,e=e+String.fromCharCode(r),l!=64&&i!=0&&(e=e+String.fromCharCode(i)),d!=64&&o!=0&&(e=e+String.fromCharCode(o));return e}var rl=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};rl.promiseConstructor=Promise;function h0(n){let t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=n.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");let r=e[1];return JSON.parse(VR(r))}async function mS(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function gS(n,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{let s=await n(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})()})}function jR(n){return("0"+n.toString(16)).substr(-2)}function no(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,i="";for(let o=0;o<56;o++)i+=e.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,jR).join("")}async function UR(n){let e=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",e),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}function BR(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ro(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=await UR(n);return BR(e)}var ol=class extends Error{constructor(t,e){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e}};function fe(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var bd=class extends ol{constructor(t,e){super(t,e),this.name="AuthApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}};function vS(n){return fe(n)&&n.name==="AuthApiError"}var vs=class extends ol{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},Br=class extends ol{constructor(t,e,r){super(t),this.name=e,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}},$r=class extends Br{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}},ys=class extends Br{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}},io=class extends Br{constructor(t){super(t,"AuthInvalidCredentialsError",400)}},oo=class extends Br{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},sl=class extends Br{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},_s=class extends Br{constructor(t,e){super(t,"AuthRetryableFetchError",e)}};function Cd(n){return fe(n)&&n.name==="AuthRetryableFetchError"}var wd=class extends Br{constructor(t,e,r){super(t,"AuthWeakPasswordError",e),this.reasons=r}};var $R=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},bs=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),HR=[502,503,504];async function yS(n){if(!hS(n))throw new _s(bs(n),0);if(HR.includes(n.status))throw new _s(bs(n),n.status);let t;try{t=await n.json()}catch(e){throw new vs(bs(e),e)}throw typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)?new wd(bs(t),n.status,t.weak_password.reasons):new bd(bs(t),n.status||500)}var zR=(n,t,e,r)=>{let i={method:n,headers:t?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),e))};async function ge(n,t,e,r){var i;let o=Object.assign({},r?.headers);r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await qR(n,t,e+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function qR(n,t,e,r,i,o){let s=zR(t,r,i,o),a;try{a=await n(e,s)}catch(l){throw console.error(l),new _s(bs(l),0)}if(a.ok||await yS(a),r?.noResolveJson)return a;try{return await a.json()}catch(l){await yS(l)}}function hi(n){var t;let e=null;GR(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=fS(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function m0(n){let t=hi(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function sr(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function _S(n){return{data:n,error:null}}function bS(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o}=n,s=$R(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},s);return{data:{properties:a,user:l},error:null}}function wS(n){return n}function GR(n){return n.access_token&&n.refresh_token&&n.expires_in}var WR=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},ws=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=yd(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,e="global"){try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,e={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:sr})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{let{options:e}=t,r=WR(t,["options"]),i=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:bS,redirectTo:e?.redirectTo})}catch(e){if(fe(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:sr})}catch(e){if(fe(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,r,i,o,s,a,l;try{let d={nextPage:null,lastPage:0,total:0},p=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:wS});if(p.error)throw p.error;let m=await p.json(),y=(s=p.headers.get("x-total-count"))!==null&&s!==void 0?s:0,v=(l=(a=p.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return v.length>0&&(v.forEach(b=>{let C=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(b.split(";")[1].split("=")[1]);d[`${x}Page`]=C}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},m),d),error:null}}catch(d){if(fe(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:sr})}catch(e){if(fe(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:sr})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,e=!1){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:sr})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{let{data:e,error:r}=await ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:r}}catch(e){if(fe(e))return{data:null,error:e};throw e}}async _deleteFactor(t){try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(fe(e))return{data:null,error:e};throw e}}};var Ed="2.61.0";var CS="http://localhost:9999",ES="supabase.auth.token";var SS={"X-Client-Info":`gotrue-js/${Ed}`},g0=10;var DS={getItem:n=>fi()?globalThis.localStorage.getItem(n):null,setItem:(n,t)=>{fi()&&globalThis.localStorage.setItem(n,t)},removeItem:n=>{fi()&&globalThis.localStorage.removeItem(n)}};function v0(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}function xS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var QR={debug:!!(globalThis&&fi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Sd=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}};xS();var KR={url:CS,storageKey:ES,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:SS,flowType:"implicit",debug:!1},al=30*1e3,IS=3;async function ZR(n,t,e){return await e()}var y0=(()=>{class n{constructor(e){var r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&zn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let i=Object.assign(Object.assign({},KR),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ws({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=yd(i.fetch),this.lock=i.lock||ZR,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:fi()?this.storage=DS:(this.memoryStorage={},this.storage=v0(this.memoryStorage)):(this.memoryStorage={},this.storage=v0(this.memoryStorage)),zn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ed}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{let e=zn()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:r,error:i}=await this._getSessionFromURL(e);if(i)return this._debug("#_initialize()","error detecting session from URL",i),i?.message==="Identity is already linked"||i?.message==="Identity is already linked to another user"?{error:i}:(await this._removeSession(),{error:i});let{session:o,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return fe(e)?{error:e}:{error:new vs("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(e){var r,i,o;try{await this._removeSession();let s;if("email"in e){let{email:m,password:y,options:v}=e,b=null,C=null;if(this.flowType==="pkce"){let x=no();await pi(this.storage,`${this.storageKey}-code-verifier`,x),b=await ro(x),C=x===b?"plain":"s256"}s=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:m,password:y,data:(r=v?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:C},xform:hi})}else if("phone"in e){let{phone:m,password:y,options:v}=e;s=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:y,data:(i=v?.data)!==null&&i!==void 0?i:{},channel:(o=v?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:hi})}else throw new io("You must provide either an email or phone number and a password");let{data:a,error:l}=s;if(l||!a)return{data:{user:null,session:null},error:l};let d=a.session,p=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let r;if("email"in e){let{email:s,password:a,options:l}=e;r=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:m0})}else if("phone"in e){let{phone:s,password:a,options:l}=e;r=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:m0})}else throw new io("You must provide either an email or phone number and a password");let{data:i,error:o}=r;return o?{data:{user:null,session:null},error:o}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new ys}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,i,o,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){let r=await il(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/"),{data:s,error:a}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:hi});return await _d(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new ys}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=e,l=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:hi}),{data:d,error:p}=l;return p?{data:{user:null,session:null},error:p}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new ys}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:p})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,i,o,s,a;try{if(await this._removeSession(),"email"in e){let{email:l,options:d}=e,p=null,m=null;if(this.flowType==="pkce"){let v=no();await pi(this.storage,`${this.storageKey}-code-verifier`,v),p=await ro(v),m=v===p?"plain":"s256"}let{error:y}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=d?.data)!==null&&r!==void 0?r:{},create_user:(i=d?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:p,code_challenge_method:m},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){let{phone:l,options:d}=e,{data:p,error:m}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=d?.data)!==null&&o!==void 0?o:{},create_user:(s=d?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(a=d?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:m}}throw new io("You must provide either an email or phone number.")}catch(l){if(fe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,i;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let o,s;"options"in e&&(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:l}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:hi});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let d=a.session,p=a.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(o){if(fe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var r,i,o;try{await this._removeSession();let s=null,a=null;if(this.flowType==="pkce"){let l=no();await pi(this.storage,`${this.storageKey}-code-verifier`,l),s=await ro(l),a=l===s?"plain":"s256"}return await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:_S})}catch(s){if(fe(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:r},error:i}=e;if(i)throw i;if(!r)throw new $r;let{error:o}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(fe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();let r=`${this.url}/resend`;if("email"in e){let{email:i,type:o,options:s}=e,{error:a}=await ge(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:i,type:o,options:s}=e,{data:a,error:l}=await ge(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new io("You must provide either an email or phone number and a type")}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=await il(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};let i=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i)return{data:{session:e},error:null};let{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:sr}):await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:sr})})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async i=>{let{data:o,error:s}=i;if(s)throw s;if(!o.session)throw new $r;let a=o.session,l=null,d=null;if(this.flowType==="pkce"&&e.email!=null){let y=no();await pi(this.storage,`${this.storageKey}-code-verifier`,y),l=await ro(y),d=y===l?"plain":"s256"}let{data:p,error:m}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:d}),jwt:a.access_token,xform:sr});if(m)throw m;return a.user=p.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(i){if(fe(i))return{data:{user:null},error:i};throw i}}_decodeJWT(e){return h0(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new $r;let r=Date.now()/1e3,i=r,o=!0,s=null,a=h0(e.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{session:l,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};s=l}else{let{data:l,error:d}=await this._getUser(e.access_token);if(d)throw d;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(fe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var i;if(!e){let{data:a,error:l}=r;if(l)throw l;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new $r;let{session:o,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e){try{if(!zn())throw new oo("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new oo("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new sl("Not a valid PKCE flow url.");let r=vd(window.location.href);if(e){if(!r.code)throw new sl("No code detected.");let{data:U,error:q}=await this._exchangeCodeForSession(r.code);if(q)throw q;let Q=new URL(window.location.href);return Q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Q.toString()),{data:{session:U.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new oo(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:l,expires_at:d,token_type:p}=r;if(!s||!l||!a||!p)throw new oo("No session defined in URL");let m=Math.round(Date.now()/1e3),y=parseInt(l),v=m+y;d&&(v=parseInt(d));let b=v-m;b*1e3<=al&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);let C=v-y;m-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,v,m):m-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",C,v,m);let{data:x,error:A}=await this._getUser(s);if(A)throw A;let j={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:y,expires_at:v,refresh_token:a,token_type:p,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:r.type},error:null}}catch(r){if(fe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){let e=vd(window.location.href);return!!(zn()&&(e.access_token||e.error_description))}async _isPKCEFlow(){let e=vd(window.location.href),r=await il(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return{error:s};let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:l}=await this.admin.signOut(a,e);if(l&&!(vS(l)&&(l.status===404||l.status===401)))return{error:l}}return e!=="others"&&(await this._removeSession(),await _d(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){let r=pS(),i={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async r=>{var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let i=null,o=null;if(this.flowType==="pkce"){let s=no();await pi(this.storage,`${this.storageKey}-code-verifier`,`${s}/PASSWORD_RECOVERY`),i=await ro(s),o=s===i?"plain":"s256"}try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(fe(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{let{data:i,error:o}=await this._useSession(async s=>{var a,l,d,p,m;let{data:y,error:v}=s;if(v)throw v;let b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",b,{headers:this.headers,jwt:(m=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&m!==void 0?m:void 0})});if(o)throw o;return zn()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(fe(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await gS(async o=>(await mS(o*200),this._debug(r,"refreshing attempt",o),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:hi})),(o,s,a)=>a&&a.error&&Cd(a.error)&&Date.now()+(o+1)*200-i<al)}catch(i){if(this._debug(r,"error",i),fe(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",i),zn()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let i=await il(this.storage,this.storageKey);if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}let o=Math.round(Date.now()/1e3),s=((e=i.expires_at)!==null&&e!==void 0?e:1/0)<o+g0;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${g0}s`),s){if(this.autoRefreshToken&&i.refresh_token){let{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),Cd(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,i;if(!e)throw new $r;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new rl;let{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new $r;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(o,"error",s),fe(s)){let a={session:null,error:s};return Cd(s)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,r,i=!0){let o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(d){s.push(d)}});if(await Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await pi(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await _d(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&zn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),al);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-e)/al);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${al}ms, refresh threshold is ${IS} ticks`),o<=IS&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Sd)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,i){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let s=no();await pi(this.storage,`${this.storageKey}-code-verifier`,s);let a=await ro(s),l=s===a?"plain":"s256";this._debug("PKCE","code verifier",`${s.substring(0,5)}...`,"code challenge",a,"method",l);let d=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});o.push(d.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?{data:null,error:s}:await ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)return{data:null,error:a};let{data:l,error:d}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return d?{data:null,error:d}:(!((o=l?.totp)===null||o===void 0)&&o.qr_code&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return{data:null,error:s};let{data:a,error:l}=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(fe(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?{data:null,error:s}:await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(fe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){let{data:r,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){let{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};let i=e?.factors||[],o=i.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:i,totp:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,i;let{data:{session:o},error:s}=e;if(s)return{data:null,error:s};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let a=this._decodeJWT(o.access_token),l=null;a.aal&&(l=a.aal);let d=l;((i=(r=o.user.factors)===null||r===void 0?void 0:r.filter(y=>y.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(d="aal2");let m=a.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:m},error:null}}))}}return n.nextInstanceID=0,n})();var YR=y0,_0=YR;var Dd=class extends _0{constructor(t){super(t)}};var JR=function(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(p){try{d(r.next(p))}catch(m){s(m)}}function l(p){try{d(r.throw(p))}catch(m){s(m)}}function d(p){p.done?o(p.value):i(p.value).then(a,l)}d((r=r.apply(n,t||[])).next())})},so=class{constructor(t,e,r){var i,o,s;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let a=uS(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;let l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:sS,realtime:lS,auth:Object.assign(Object.assign({},aS),{storageKey:l}),global:oS},p=dS(r??{},d);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=p.auth)!==null&&s!==void 0?s:{},this.headers,p.global.fetch),this.fetch=cS(e,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new GE(`${a}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new za(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new tl(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return JR(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,storageKey:o,flowType:s,lock:a,debug:l},d,p){let m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dd({url:this.authUrl,headers:Object.assign(Object.assign({},m),d),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:i,flowType:s,lock:a,debug:l,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Xa(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var TS=(n,t,e)=>new so(n,t,e);var Cs={API_URL:"https://jsgltiaidlacvchyjjha.supabase.co",FUNC_URL:"https://jsgltiaidlacvchyjjha.supabase.co",anon_key:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpzZ2x0aWFpZGxhY3ZjaHlqamhhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2NjIzNDIsImV4cCI6MjA1NTIzODM0Mn0.bPtRMhXapLzUgPEIf6GoW9r52umh0F1YZhG1bfLyb0s",supabase_LocalStorage_key:"sb-jsgltiaidlacvchyjjha-auth-token"};var Ie=class n{constructor(t){this.platformId=t;this.supabase=TS(Cs.API_URL,Cs.anon_key,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),this.setupAuthStateSignalSync()}supabase;USER_PROFILE_KEY="userProfile";user=xe(null);currentUsername=xe(null);loginStatus=xe(null);GetClient(){return this.supabase}setupAuthStateSignalSync(){Tn(this.platformId)&&(this.supabase.auth.getSession().then(({data:t})=>{this.updateSignalsFromSession(t.session)}),this.supabase.auth.onAuthStateChange((t,e)=>{this.updateSignalsFromSession(e)}))}updateSignalsFromSession(t){if(t&&t.user){this.user.set(t.user);let e=t.user?.identities?.[0]?.identity_data?.firstname||null;this.currentUsername.set(e),this.loginStatus.set(!0)}else this.user.set(null),this.currentUsername.set(null),this.loginStatus.set(!1)}supaScream(){return"SupaScream"}static \u0275fac=function(e){return new(e||n)(F(Et))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var xd=class n{constructor(t){this.supabaseService=t;this.userFirstName=this.supabaseService.currentUsername()}userFirstName;static \u0275fac=function(e){return new(e||n)(D(Ie))};static \u0275cmp=V({type:n,selectors:[["app-landing-page"]],decls:66,vars:4,consts:[[1,"container","mt-4"],[1,"mb-4","text-center"],[1,"row","g-4","mb-5"],[1,"col-md-6"],[1,"card","h-100","shadow-sm"],[1,"card-body","d-flex","align-items-center"],[1,"ms-4","me-4","step-icon",2,"--step-color","#2563eb"],[1,"flex-grow-1"],[1,"text-uppercase","fw-bold","text-secondary",2,"letter-spacing","2px"],[1,"fw-semibold","mb-1"],[1,"mb-3","text-secondary"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#2563eb","color","#fff",3,"routerLink"],[1,"ms-4","me-4","step-icon",2,"--step-color","#15803d"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#15803d","color","#fff",3,"routerLink"],[1,"ms-4","me-4","step-icon",2,"--step-color","#b45309"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#b45309","color","#fff",3,"routerLink"],[1,"ms-4","me-4","step-icon",2,"--step-color","#6d28d9"],[1,"btn","btn-lg","fw-bold","w-100",2,"background","#6d28d9","color","#fff",3,"routerLink"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"h2",1),f(2,"Begin Your Trading Transformation"),c(),u(3,"h2",1),f(4,"Your Professional Workflow"),c(),u(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"mat-icon"),f(11,"check_circle"),c()(),u(12,"div",7)(13,"div",8),f(14,"Step 1 "),c(),u(15,"h4",9),f(16,"Daily Emotional Check-in"),c(),u(17,"p",10),f(18,"Understand your emotional state before making trading decisions."),c(),u(19,"a",11),f(20,"Begin Assessment"),c()()()()(),u(21,"div",3)(22,"div",4)(23,"div",5)(24,"div",12)(25,"mat-icon"),f(26,"trending_up"),c()(),u(27,"div",7)(28,"div",8),f(29,"Step 2 "),c(),u(30,"h4",9),f(31,"Plan Your Trades"),c(),u(32,"p",10),f(33,"Document your trading plan before executing any trades."),c(),u(34,"a",13),f(35,"Create Trading Plan"),c()()()()(),u(36,"div",3)(37,"div",4)(38,"div",5)(39,"div",14)(40,"mat-icon"),f(41,"candlestick_chart"),c()(),u(42,"div",7)(43,"div",8),f(44,"Step 3 "),c(),u(45,"h4",9),f(46,"Update your Trades"),c(),u(47,"p",10),f(48,"Record results and analyze your trading performance."),c(),u(49,"a",15),f(50,"Manage Positions"),c()()()()(),u(51,"div",3)(52,"div",4)(53,"div",5)(54,"div",16)(55,"mat-icon"),f(56,"psychology"),c()(),u(57,"div",7)(58,"div",8),f(59,"Step 4 "),c(),u(60,"h4",9),f(61,"Reflection & Meditation"),c(),u(62,"p",10),f(63,"Clear your mind with mindfulness practices."),c(),u(64,"a",17),f(65,"Begin Session"),c()()()()()()()),e&2&&(h(19),g("routerLink","/emotions"),h(15),g("routerLink","/tradejournal"),h(15),g("routerLink","/tradejournal"),h(15),g("routerLink","/meditationhub"))},dependencies:[Xe,B,kE,An],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:8px}.card-body[_ngcontent-%COMP%]{padding-left:0}.card-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.75rem}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}.btn-custom[_ngcontent-%COMP%]{border-radius:20px;font-weight:600}.step-icon[_ngcontent-%COMP%]{width:64px;height:64px;background:var(--step-color, --primary-btn-color);border-radius:16px;display:flex;align-items:center;justify-content:center;flex-shrink:0;box-shadow:0 2px 8px #0000000a}.step-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:36px;width:36px;height:36px;line-height:36px;display:flex;align-items:center;justify-content:center}.card-body.d-flex.align-items-center[_ngcontent-%COMP%]{gap:1.5rem}@media (max-width: 576px){.card-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem}.card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.btn-custom[_ngcontent-%COMP%]{padding:.5rem 1rem}}"]})};var pt=class n{constructor(t,e){this.supabaseService=t;this.router=e}canActivate(t,e){return this.supabaseService.loginStatus()?!0:this.router.createUrlTree([""],{queryParams:{returnUrl:e.url}})}static \u0275fac=function(e){return new(e||n)(F(Ie),F(vt))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var ll=class n{constructor(t,e){this.supabaseService=t;this.router=e}canActivate(t,e){return this.supabaseService.loginStatus()?this.router.createUrlTree(["/home"]):!0}static \u0275fac=function(e){return new(e||n)(F(Ie),F(vt))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var LS=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||n)(D(xn),D(nt))};static \u0275dir=ve({type:n})}return n})(),lo=(()=>{class n extends LS{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Sn(n)))(i||n)}})();static \u0275dir=ve({type:n,features:[ut]})}return n})(),lr=new $(""),XR={provide:lr,useExisting:Ct(()=>Hr),multi:!0},Hr=(()=>{class n extends lo{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Sn(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&S("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[It([XR]),ut]})}return n})(),eF={provide:lr,useExisting:Ct(()=>oe),multi:!0};function tF(){let n=Rr()?Rr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var nF=new $(""),oe=(()=>{class n extends LS{_compositionMode;_composing=!1;constructor(e,r,i){super(e,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!tF())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||n)(D(xn),D(nt),D(nF,8))};static \u0275dir=ve({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&S("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[It([eF]),ut]})}return n})();function mi(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function VS(n){return n!=null&&typeof n.length=="number"}var Is=new $(""),Ld=new $(""),rF=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,R=class{static min(t){return jS(t)}static max(t){return US(t)}static required(t){return iF(t)}static requiredTrue(t){return oF(t)}static email(t){return sF(t)}static minLength(t){return aF(t)}static maxLength(t){return lF(t)}static pattern(t){return cF(t)}static nullValidator(t){return Td(t)}static compose(t){return GS(t)}static composeAsync(t){return QS(t)}};function jS(n){return t=>{if(mi(t.value)||mi(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function US(n){return t=>{if(mi(t.value)||mi(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function iF(n){return mi(n.value)?{required:!0}:null}function oF(n){return n.value===!0?null:{required:!0}}function sF(n){return mi(n.value)||rF.test(n.value)?null:{email:!0}}function aF(n){return t=>mi(t.value)||!VS(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function lF(n){return t=>VS(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function cF(n){if(!n)return Td;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(mi(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function Td(n){return null}function BS(n){return n!=null}function $S(n){return Hi(n)?Qe(n):n}function HS(n){let t={};return n.forEach(e=>{t=e!=null?N(N({},t),e):t}),Object.keys(t).length===0?null:t}function zS(n,t){return t.map(e=>e(n))}function uF(n){return!n.validate}function qS(n){return n.map(t=>uF(t)?t:e=>t.validate(e))}function GS(n){if(!n)return null;let t=n.filter(BS);return t.length==0?null:function(e){return HS(zS(e,t))}}function WS(n){return n!=null?GS(qS(n)):null}function QS(n){if(!n)return null;let t=n.filter(BS);return t.length==0?null:function(e){let r=zS(e,t).map($S);return Hs(r).pipe(Y(HS))}}function KS(n){return n!=null?QS(qS(n)):null}function MS(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function ZS(n){return n._rawValidators}function YS(n){return n._rawAsyncValidators}function b0(n){return n?Array.isArray(n)?n:[n]:[]}function Md(n,t){return Array.isArray(n)?n.includes(t):n===t}function AS(n,t){let e=b0(t);return b0(n).forEach(i=>{Md(e,i)||e.push(i)}),e}function kS(n,t){return b0(t).filter(e=>!Md(n,e))}var Ad=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=WS(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=KS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},ao=class extends Ad{name;get formDirective(){return null}get path(){return null}},ar=class extends Ad{_parent=null;name=null;valueAccessor=null},kd=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},dF={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},C7=G(N({},dF),{"[class.ng-submitted]":"isSubmitted"}),pe=(()=>{class n extends kd{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(D(ar,2))};static \u0275dir=ve({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ee("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ut]})}return n})(),Oe=(()=>{class n extends kd{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(D(ao,10))};static \u0275dir=ve({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ee("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[ut]})}return n})();var cl="VALID",Id="INVALID",Es="PENDING",ul="DISABLED",gi=class{},Nd=class extends gi{value;source;constructor(t,e){super(),this.value=t,this.source=e}},dl=class extends gi{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},fl=class extends gi{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Ss=class extends gi{status;source;constructor(t,e){super(),this.status=t,this.source=e}},w0=class extends gi{source;constructor(t){super(),this.source=t}},C0=class extends gi{source;constructor(t){super(),this.source=t}};function D0(n){return(Vd(n)?n.validators:n)||null}function fF(n){return Array.isArray(n)?WS(n):n||null}function x0(n,t){return(Vd(t)?t.asyncValidators:n)||null}function pF(n){return Array.isArray(n)?KS(n):n||null}function Vd(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function JS(n,t,e){let r=n.controls;if(!(t?Object.keys(r):r).length)throw new k(1e3,"");if(!r[e])throw new k(1001,"")}function XS(n,t,e){n._forEachChild((r,i)=>{if(e[i]===void 0)throw new k(1002,"")})}var Ds=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return kr(this.statusReactive)}set status(t){kr(()=>this.statusReactive.set(t))}_status=cn(()=>this.statusReactive());statusReactive=xe(void 0);get valid(){return this.status===cl}get invalid(){return this.status===Id}get pending(){return this.status==Es}get disabled(){return this.status===ul}get enabled(){return this.status!==ul}errors;get pristine(){return kr(this.pristineReactive)}set pristine(t){kr(()=>this.pristineReactive.set(t))}_pristine=cn(()=>this.pristineReactive());pristineReactive=xe(!0);get dirty(){return!this.pristine}get touched(){return kr(this.touchedReactive)}set touched(t){kr(()=>this.touchedReactive.set(t))}_touched=cn(()=>this.touchedReactive());touchedReactive=xe(!1);get untouched(){return!this.touched}_events=new Ue;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(AS(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(AS(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(kS(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(kS(t,this._rawAsyncValidators))}hasValidator(t){return Md(this._rawValidators,t)}hasAsyncValidator(t){return Md(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(G(N({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new fl(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new fl(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(G(N({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new dl(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new dl(!0,r))}markAsPending(t={}){this.status=Es;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ss(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(G(N({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ul,this.errors=null,this._forEachChild(i=>{i.disable(G(N({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Nd(this.value,r)),this._events.next(new Ss(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(G(N({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=cl,this._forEachChild(r=>{r.enable(G(N({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(G(N({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cl||this.status===Es)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Nd(this.value,e)),this._events.next(new Ss(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(G(N({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ul:cl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Es,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let r=$S(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Ss(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new ne,this.statusChanges=new ne}_calculateStatus(){return this._allControlsDisabled()?ul:this.errors?Id:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Es)?Es:this._anyControlsHaveStatus(Id)?Id:cl}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new dl(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new fl(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Vd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=fF(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=pF(this._rawAsyncValidators)}},xs=class extends Ds{constructor(t,e,r){super(D0(e),x0(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){XS(this,!0,t),Object.keys(t).forEach(r=>{JS(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var E0=class extends xs{};var Ts=new $("",{providedIn:"root",factory:()=>hl}),hl="always";function e1(n,t){return[...t.path,n]}function Pd(n,t,e=hl){I0(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),mF(n,t),vF(n,t),gF(n,t),hF(n,t)}function Od(n,t,e=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Fd(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Rd(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function hF(n,t){if(t.valueAccessor.setDisabledState){let e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function I0(n,t){let e=ZS(n);t.validator!==null?n.setValidators(MS(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let r=YS(n);t.asyncValidator!==null?n.setAsyncValidators(MS(r,t.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Rd(t._rawValidators,i),Rd(t._rawAsyncValidators,i)}function Fd(n,t){let e=!1;if(n!==null){if(t.validator!==null){let i=ZS(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let i=YS(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Rd(t._rawValidators,r),Rd(t._rawAsyncValidators,r),e}function mF(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&t1(n,t)})}function gF(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&t1(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function t1(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vF(n,t){let e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function yF(n,t){n==null,I0(n,t)}function _F(n,t){return Fd(n,t)}function T0(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function bF(n){return Object.getPrototypeOf(n.constructor)===lo}function wF(n,t){n._syncPendingControls(),t.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function M0(n,t){if(!t)return null;Array.isArray(t);let e,r,i;return t.forEach(o=>{o.constructor===oe?e=o:bF(o)?r=o:i=o}),i||r||e||null}function CF(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function NS(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function PS(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var pl=class extends Ds{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,r){super(D0(e),x0(r,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vd(e)&&(e.nonNullable||e.initialValueIsDefault)&&(PS(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){NS(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){NS(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){PS(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var EF=n=>n instanceof pl;var SF={provide:ar,useExisting:Ct(()=>vn)},OS=Promise.resolve(),vn=(()=>{class n extends ar{_changeDetectorRef;callSetDisabledState;control=new pl;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ne;constructor(e,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=M0(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),T0(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Pd(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){OS.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let r=e.isDisabled.currentValue,i=r!==0&&Bn(r);OS.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?e1(e,this._parent):[e]}static \u0275fac=function(r){return new(r||n)(D(ao,9),D(Is,10),D(Ld,10),D(lr,10),D(le,8),D(Ts,8))};static \u0275dir=ve({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[It([SF]),ut,Ln]})}return n})(),Qt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ve({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),DF={provide:lr,useExisting:Ct(()=>qn),multi:!0},qn=(()=>{class n extends lo{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Sn(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&S("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[It([DF]),ut]})}return n})(),xF={provide:lr,useExisting:Ct(()=>Gn),multi:!0};var IF=(()=>{class n{_accessors=[];add(e,r){this._accessors.push([e,r])}remove(e){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===e){this._accessors.splice(r,1);return}}select(e){this._accessors.forEach(r=>{this._isSameGroup(r,e)&&r[1]!==e&&r[1].fireUncheck(e.value)})}_isSameGroup(e,r){return e[0].control?e[0]._parent===r._control._parent&&e[1].name===r.name:!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gn=(()=>{class n extends lo{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=I(Ts,{optional:!0})??hl;constructor(e,r,i,o){super(e,r),this._registry=i,this._injector=o}ngOnInit(){this._control=this._injector.get(ar),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}setDisabledState(e){(this.setDisabledStateFired||e||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",e),this.setDisabledStateFired=!0}fireUncheck(e){this.writeValue(e)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||n)(D(xn),D(nt),D(IF),D(mt))};static \u0275dir=ve({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&S("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[It([xF]),ut]})}return n})(),TF={provide:lr,useExisting:Ct(()=>A0),multi:!0},A0=(()=>{class n extends lo{writeValue(e){this.setProperty("value",parseFloat(e))}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Sn(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,i){r&1&&S("change",function(s){return i.onChange(s.target.value)})("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[It([TF]),ut]})}return n})(),k0=new $(""),MF={provide:ar,useExisting:Ct(()=>N0)},N0=(()=>{class n extends ar{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(e){}model;update=new ne;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(e),this._setAsyncValidators(r),this.valueAccessor=M0(this,i)}ngOnChanges(e){if(this._isControlChanged(e)){let r=e.form.previousValue;r&&Od(r,this,!1),Pd(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}T0(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Od(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(D(Is,10),D(Ld,10),D(lr,10),D(k0,8),D(Ts,8))};static \u0275dir=ve({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[It([MF]),ut,Ln]})}return n})(),AF={provide:ao,useExisting:Ct(()=>Ne)},Ne=(()=>{class n extends ao{callSetDisabledState;get submitted(){return kr(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=cn(()=>this._submittedReactive());_submittedReactive=xe(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new ne;constructor(e,r,i){super(),this.callSetDisabledState=i,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Fd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let r=this.form.get(e.path);return Pd(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){Od(e.control||null,e,!1),CF(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this._submittedReactive.set(!0),wF(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new w0(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new C0(this.form))}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,i=this.form.get(e.path);r!==i&&(Od(r||null,e),EF(i)&&(Pd(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);yF(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&_F(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){I0(this.form,this),this._oldForm&&Fd(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(D(Is,10),D(Ld,10),D(Ts,8))};static \u0275dir=ve({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&S("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[It([AF]),ut,Ln]})}return n})();var kF={provide:ar,useExisting:Ct(()=>Ve)},Ve=(()=>{class n extends ar{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new ne;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=M0(this,o)}ngOnChanges(e){this._added||this._setUpControl(),T0(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return e1(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(D(ao,13),D(Is,10),D(Ld,10),D(lr,10),D(k0,8))};static \u0275dir=ve({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[It([kF]),ut,Ln]})}return n})(),NF={provide:lr,useExisting:Ct(()=>Kt),multi:!0};function n1(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function PF(n){return n.split(":")[0]}var Kt=(()=>{class n extends lo{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let r=this._getOptionId(e),i=n1(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){let r=PF(e);return this._optionMap.has(r)?this._optionMap.get(r):e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Sn(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&S("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[It([NF]),ut]})}return n})(),Zt=(()=>{class n{_element;_renderer;_select;id;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(n1(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(D(nt),D(xn),D(Kt,9))};static \u0275dir=ve({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),OF={provide:lr,useExisting:Ct(()=>r1),multi:!0};function RS(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function RF(n){return n.split(":")[0]}var r1=(()=>{class n extends lo{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let r;if(Array.isArray(e)){let i=e.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],d=this._getOptionValue(l.value);i.push(d)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let d=this._getOptionValue(l.value);i.push(d)}}}this.value=i,e(i)}}_registerOption(e){let r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){let r=RF(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Sn(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&S("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[It([OF]),ut]})}return n})(),Yt=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(RS(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(RS(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(D(nt),D(xn),D(r1,9))};static \u0275dir=ve({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function i1(n){return typeof n=="number"?n:parseFloat(n)}var o1=(()=>{class n{_validator=Td;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Td,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ve({type:n,features:[Ln]})}return n})(),FF={provide:Is,useExisting:Ct(()=>P0),multi:!0},P0=(()=>{class n extends o1{max;inputName="max";normalizeInput=e=>i1(e);createValidator=e=>US(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=Sn(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&tr("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[It([FF]),ut]})}return n})(),LF={provide:Is,useExisting:Ct(()=>ml),multi:!0},ml=(()=>{class n extends o1{min;inputName="min";normalizeInput=e=>i1(e);createValidator=e=>jS(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=Sn(n)))(i||n)}})();static \u0275dir=ve({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&tr("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[It([LF]),ut]})}return n})();var s1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=lt({type:n});static \u0275inj=at({})}return n})(),S0=class extends Ds{constructor(t,e,r){super(D0(e),x0(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){XS(this,!1,t),t.forEach((r,i)=>{JS(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,r)=>r._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function FS(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Tt=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,r=null){let i=this._reduceControls(e),o={};return FS(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new xs(i,o)}record(e,r=null){let i=this._reduceControls(e);return new E0(i,r)}control(e,r,i){let o={};return this.useNonNullable?(FS(r)?o=r:(o.validators=r,o.asyncValidators=i),new pl(e,G(N({},o),{nonNullable:!0}))):new pl(e,r,i)}array(e,r,i){let o=e.map(s=>this._createControl(s));return new S0(o,r,i)}_reduceControls(e){let r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){if(e instanceof pl)return e;if(e instanceof Ds)return e;if(Array.isArray(e)){let r=e[0],i=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(r,i,o)}else return this.control(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Jt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ts,useValue:e.callSetDisabledState??hl}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=lt({type:n});static \u0275inj=at({imports:[s1]})}return n})(),Ce=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:k0,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Ts,useValue:e.callSetDisabledState??hl}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=lt({type:n});static \u0275inj=at({imports:[s1]})}return n})();var _t=[];for(let n=0;n<256;++n)_t.push((n+256).toString(16).slice(1));function a1(n,t=0){return(_t[n[t+0]]+_t[n[t+1]]+_t[n[t+2]]+_t[n[t+3]]+"-"+_t[n[t+4]]+_t[n[t+5]]+"-"+_t[n[t+6]]+_t[n[t+7]]+"-"+_t[n[t+8]]+_t[n[t+9]]+"-"+_t[n[t+10]]+_t[n[t+11]]+_t[n[t+12]]+_t[n[t+13]]+_t[n[t+14]]+_t[n[t+15]]).toLowerCase()}var O0,VF=new Uint8Array(16);function R0(){if(!O0){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");O0=crypto.getRandomValues.bind(crypto)}return O0(VF)}var jF=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),F0={randomUUID:jF};function UF(n,t,e){if(F0.randomUUID&&!t&&!n)return F0.randomUUID();n=n||{};let r=n.random??n.rng?.()??R0();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){if(e=e||0,e<0||e+16>t.length)throw new RangeError(`UUID byte range ${e}:${e+15} is out of buffer bounds`);for(let i=0;i<16;++i)t[e+i]=r[i];return t}return a1(r)}var co=UF;var Mt=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;ngOnInit(){}async addTradeLog(t,e){let r=this.supabaseService.user();if(!r)throw new Error("User not authenticated");t.userid=r.id;let{data:i,error:o}=await this.supabase.from(e).insert([t]);if(o)throw console.error("Error inserting trade log: ",o),o;return typeof window<"u"&&sessionStorage.setItem(`${e}_refresh`,"yes"),i}async getTradeLogs(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let r=!1,i=null;if(typeof window<"u"){r=sessionStorage.getItem(`${t}_refresh`)==="yes";let a=sessionStorage.getItem(t);if(a)try{i=JSON.parse(a)}catch(l){console.error("Error parsing cached trade logs:",l),i=null}}if(!r&&i)return i;let{data:o,error:s}=await this.supabase.from(t).select("*").eq("userid",e.id);if(s)throw console.error("Error fetching trade logs:",s),s;return typeof window<"u"&&(sessionStorage.setItem(t,JSON.stringify(o)),sessionStorage.removeItem(`${t}_refresh`)),o}async getTradeLogsOfSelectedAccount(t,e){let r=this.supabaseService.user();if(!r)throw new Error("User not authenticated");let i=`${t}_${e}`,o=`${i}_refresh`,s=!1,a=null;if(typeof window<"u"){s=sessionStorage.getItem(o)==="yes";let p=sessionStorage.getItem(i);if(p)try{a=JSON.parse(p)}catch(m){console.error("Error parsing cached trade logs:",m),a=null}}if(!s&&a)return a;let{data:l,error:d}=await this.supabase.from(t).select("*").eq("userid",r.id).eq("trade_account_id",e);if(d)throw console.error("Error fetching trade logs:",d),d;return typeof window<"u"&&(sessionStorage.setItem(i,JSON.stringify(l)),sessionStorage.removeItem(o)),l}async addTradeLogOfSelectedAccount(t,e,r){let i=this.supabaseService.user();if(!i)throw new Error("User not authenticated");t.userid=i.id;let{data:o,error:s}=await this.supabase.from(e).insert([t]);if(s)throw console.error("Error inserting trade log: ",s),s;return typeof window<"u"&&sessionStorage.setItem(`${e}_${r}_refresh`,"yes"),o}async updateTradeLogOfSelectedAccount(t,e,r){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:o,error:s}=await this.supabase.from(e).update(t).eq("tradeid",t.tradeid);if(s)throw console.error("Error updating trade log: ",s),s;return typeof window<"u"&&sessionStorage.setItem(`${e}_${r}_refresh`,"yes"),o}async deleteTradeLogOfSelectedAccount(t,e,r){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:o,error:s}=await this.supabase.from(e).delete().eq("tradeid",t);if(s)throw console.error("Error deleting trade log: ",s),s;return typeof window<"u"&&sessionStorage.setItem(`${e}_${r}_refresh`,"yes"),o}async updateTradeLog(t,e){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:i,error:o}=await this.supabase.from(e).update(t).eq("tradeid",t.tradeid);if(o)throw console.error("Error updating trade log: ",o),o;return typeof window<"u"&&sessionStorage.setItem(`${e}_refresh`,"yes"),i}async deleteTradeLog(t,e){if(!this.supabaseService.user())throw new Error("User not authenticated");let{data:i,error:o}=await this.supabase.from(e).delete().eq("tradeid",t);if(o)throw console.error("Error deleting trade log: ",o),o;return typeof window<"u"&&sessionStorage.setItem(`${e}_refresh`,"yes"),i}async canLogTrade(){let t=this.supabaseService.user()?.id;if(t===null)throw new Error("User not authenticated");let{data:e,error:r}=await this.supabase.rpc("can_log_trade",{user_id:t});return!r&&e===!0}static \u0275fac=function(e){return new(e||n)(F(Ie))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var BF=(n,t)=>({"text-success":n,"text-danger":t});function $F(n,t){if(n&1&&(u(0,"div",138),_(1,"div",139),c()),n&2){let e=w();h(),Gt("width",e.calculateFormProgress()+"%")}}function HF(n,t){if(n&1&&(u(0,"span",140),f(1),c()),n&2){let e=w();h(),O("",e.calculateFormProgress(),"% Complete")}}function zF(n,t){n&1&&(u(0,"div",141),f(1," Account name is required "),c())}function qF(n,t){n&1&&(u(0,"div",141),f(1," Please select an instrument type "),c())}function GF(n,t){n&1&&(u(0,"div",141),f(1," Trade symbol is required "),c())}function WF(n,t){n&1&&(u(0,"div",141),f(1," Please select trade direction "),c())}function QF(n,t){n&1&&(u(0,"div",141),f(1," Time frame selection is required "),c())}function KF(n,t){n&1&&(u(0,"div",141),f(1," Please select an analysis type "),c())}function ZF(n,t){n&1&&(u(0,"div",141),f(1," Strategy name is required "),c())}function YF(n,t){n&1&&(u(0,"div",141),f(1," Order type is required "),c())}function JF(n,t){n&1&&(u(0,"div",141),f(1," Entry criteria is required (min 10 characters) "),c())}function XF(n,t){n&1&&(u(0,"div",141),f(1," Exit strategy is required (min 10 characters) "),c())}function e2(n,t){n&1&&(u(0,"div",141),f(1," Valid account balance is required "),c())}function t2(n,t){n&1&&(u(0,"div",141),f(1," Position size is required "),c())}function n2(n,t){n&1&&(u(0,"div",141),f(1," Valid entry price is required "),c())}function r2(n,t){n&1&&(u(0,"div",141),f(1," Entry date/time is required "),c())}function i2(n,t){n&1&&(u(0,"div",141),f(1," Stop loss price is required "),c())}function o2(n,t){n&1&&(u(0,"div",141),f(1," Take profit price is required "),c())}function s2(n,t){n&1&&(u(0,"div",141),f(1," Risk percentage is required "),c())}function a2(n,t){n&1&&(u(0,"div",142),_(1,"i",143),f(2," Risk exceeds recommended 2% "),c())}function l2(n,t){n&1&&(u(0,"div",141),f(1," Estimated reward is required "),c())}function c2(n,t){n&1&&(u(0,"div",141),f(1," Please select your emotional state "),c())}function u2(n,t){n&1&&(u(0,"div",142),_(1,"i",143),f(2," Consider if this emotional state might negatively impact your decision making "),c())}function d2(n,t){n&1&&(u(0,"div",144),f(1," Please rate your confidence "),c())}function f2(n,t){n&1&&(u(0,"div",141),f(1," Please identify potential biases (min 5 characters) "),c())}function p2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Trade Setup"),c())}function h2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Strategy Details"),c())}function m2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Risk Management"),c())}function g2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Psychological Analysis"),c())}function v2(n,t){if(n&1&&(u(0,"div",145),_(1,"i",146),u(2,"strong"),f(3,"Please fix the errors highlighted above before submitting."),c(),u(4,"ul",147),E(5,p2,2,0,"li",148)(6,h2,2,0,"li",148)(7,m2,2,0,"li",148)(8,g2,2,0,"li",148),c()()),n&2){let e=w();h(5),g("ngIf",e.hasErrors("tradeSetup")),h(),g("ngIf",e.hasErrors("strategyDetails")),h(),g("ngIf",e.hasErrors("riskManagement")),h(),g("ngIf",e.hasErrors("psychologicalAnalysis"))}}function y2(n,t){if(n&1){let e=J();u(0,"button",149),S("click",function(){T(e);let i=w();return M(i.onCancel())}),_(1,"i",150),f(2,"Cancel "),c()}}function _2(n,t){if(n&1&&(u(0,"div",151),_(1,"i",152),f(2),c()),n&2){let e=w();h(2),O("",e.message," ")}}function b2(n,t){if(n&1&&(u(0,"div",153),_(1,"i",146),f(2),c()),n&2){let e=w();h(2),O("",e.errorMessage," ")}}var Ms=class n{constructor(t,e,r){this.fb=t;this.supabaseTradeTableService=e;this.cdr=r}tradeLogData=null;formSubmitted=new ne;cancel=new ne;preTradeTableName="pretrade";postTradeTableName="posttrade";preTradeForm;postTradeForm;showEmotionalSection=!1;message="";errorMessage="";formSubmitMarker=!1;ngOnInit(){this.formSubmitMarker=!1,this.createForm()}createForm(){var t=co();this.preTradeForm=this.fb.group({tradeid:[this.tradeLogData?.tradeid??t],userid:[this.tradeLogData?.userid??"the-db-is-likely-hacked-1234-abcd-5678-efgh"],createdtime:[this.tradeLogData?.createdtime??new Date().toISOString()],accountname:[this.tradeLogData?.accountname??"",R.required],instrumenttype:[this.tradeLogData?.instrumenttype??"",R.required],analysistype:[this.tradeLogData?.analysistype??"",R.required],tradesymbol:[this.tradeLogData?.tradesymbol??"",R.required],tradetype:[this.tradeLogData?.tradetype??"Long",R.required],timeframe:[this.tradeLogData?.timeframe??"Day",R.required],strategyname:[this.tradeLogData?.strategyname??""],typeoforder:[this.tradeLogData?.typeoforder??"",R.required],entrycriteria:[this.tradeLogData?.entrycriteria??""],exitstrategy:[this.tradeLogData?.exitstrategy??""],entrydatetime:[this.tradeLogData?.entrydatetime??""],entryprice:[this.tradeLogData?.entryprice??""],accountbalance:[this.tradeLogData?.accountbalance??null,[R.required,R.min(0)]],positionsize:[this.tradeLogData?.positionsize??"",R.required],estimatedrisk:[this.tradeLogData?.estimatedrisk??null,R.required],estimatedpnl:[this.tradeLogData?.estimatedpnl??null,R.required],estimatedstoploss:[this.tradeLogData?.estimatedstoploss??null,R.required],estimatedtakeprofit:[this.tradeLogData?.estimatedtakeprofit??null,R.required],setupscreenshot:[this.tradeLogData?.setupscreenshot??""],tradeconfidence:[this.tradeLogData?.tradeconfidence??"1"],isopen:!0,emotionalstatebefore:[this.tradeLogData?.emotionalstatebefore??"",R.required],potentialbiases:[this.tradeLogData?.potentialbiases??"",R.required],notes:[this.tradeLogData?.notes??""],updatedtime:[new Date().toISOString()]})}toggleEmotionalSection(){this.showEmotionalSection=!this.showEmotionalSection}onFileSelected(t){let e=t.target;if(!e.files||e.files.length===0)return;let r=e.files[0],i=new FileReader;i.onload=o=>{this.preTradeForm.patchValue({setupscreenshot:o.target.result})},i.readAsDataURL(r)}async onSubmit(){if(this.formSubmitMarker=!0,this.preTradeForm.invalid){this.preTradeForm.markAllAsTouched();return}let t=this.preTradeForm.value;try{this.tradeLogData?await this.supabaseTradeTableService.updateTradeLog(t,this.preTradeTableName):await this.supabaseTradeTableService.addTradeLog(t,this.preTradeTableName),this.message="Trade log updated successfully. Resetting in 5 seconds.",setTimeout(()=>{this.cdr.markForCheck()},0),this.formSubmitted.emit(),this.formSubmitMarker=!1,this.cdr.markForCheck(),setTimeout(()=>{this.preTradeForm.reset(),this.preTradeForm.markAsPristine(),this.message="Form has been reset",this.cdr.markForCheck()},5e3),setTimeout(()=>{this.message="",this.cdr.markForCheck()},3e3)}catch(e){console.error("Error processing trade log:",e),this.errorMessage="Something went wrong.",this.cdr.markForCheck()}}async onDelete(){if(this.tradeLogData)try{await this.supabaseTradeTableService.deleteTradeLog(this.tradeLogData.tradeid,this.preTradeTableName),this.message="Trade log deleted successfully.",this.formSubmitted.emit()}catch(t){console.error("Error deleting trade log:",t),this.errorMessage="Something went wrong while deleting."}finally{this.cdr.markForCheck()}}onCancel(){this.cancel.emit()}calculateFormProgress(){let e=0;return this.preTradeForm.get("accountname")?.valid&&e++,this.preTradeForm.get("instrumenttype")?.valid&&e++,this.preTradeForm.get("tradesymbol")?.valid&&e++,this.preTradeForm.get("tradetype")?.valid&&e++,this.preTradeForm.get("timeframe")?.valid&&e++,this.preTradeForm.get("analysistype")?.valid&&e++,this.preTradeForm.get("strategyname")?.valid&&e++,this.preTradeForm.get("typeoforder")?.valid&&e++,this.preTradeForm.get("entrycriteria")?.valid&&e++,this.preTradeForm.get("exitstrategy")?.valid&&e++,this.preTradeForm.get("accountbalance")?.valid&&e++,this.preTradeForm.get("positionsize")?.valid&&e++,this.preTradeForm.get("entryprice")?.valid&&e++,this.preTradeForm.get("entrydatetime")?.valid&&e++,this.preTradeForm.get("estimatedstoploss")?.valid&&e++,this.preTradeForm.get("estimatedtakeprofit")?.valid&&e++,this.preTradeForm.get("estimatedrisk")?.valid&&e++,this.preTradeForm.get("estimatedpnl")?.valid&&e++,this.preTradeForm.get("emotionalstatebefore")?.valid&&e++,this.preTradeForm.get("tradeConfidence")?.valid&&e++,this.preTradeForm.get("potentialbiases")?.valid&&e++,Math.round(e/18*100)}calculateRiskRewardRatio(){let t=parseFloat(this.preTradeForm.get("estimatedrisk")?.value||"0"),e=parseFloat(this.preTradeForm.get("estimatedpnl")?.value||"0");return t<=0||e<=0?"N/A":`1:${(e/t).toFixed(2)}`}isGoodRiskReward(){let t=parseFloat(this.preTradeForm.get("estimatedrisk")?.value||"0"),e=parseFloat(this.preTradeForm.get("estimatedpnl")?.value||"0");return t<=0||e<=0?!1:e/t>=2}isNegativeEmotionalState(){let t=this.preTradeForm.get("emotionalstatebefore")?.value;return["Anxious","Frustrated","Fearful","Overconfident"].includes(t)}hasErrors(t){switch(t){case"tradeSetup":return this.preTradeForm.get("accountname")?.invalid||this.preTradeForm.get("instrumenttype")?.invalid||this.preTradeForm.get("tradesymbol")?.invalid||this.preTradeForm.get("tradetype")?.invalid||this.preTradeForm.get("timeframe")?.invalid||this.preTradeForm.get("analysistype")?.invalid||!1;case"strategyDetails":return this.preTradeForm.get("strategyname")?.invalid||this.preTradeForm.get("typeoforder")?.invalid||this.preTradeForm.get("entrycriteria")?.invalid||this.preTradeForm.get("exitstrategy")?.invalid||!1;case"riskManagement":return this.preTradeForm.get("accountbalance")?.invalid||this.preTradeForm.get("positionsize")?.invalid||this.preTradeForm.get("entryprice")?.invalid||this.preTradeForm.get("entrydatetime")?.invalid||this.preTradeForm.get("estimatedstoploss")?.invalid||this.preTradeForm.get("estimatedtakeprofit")?.invalid||this.preTradeForm.get("estimatedrisk")?.invalid||this.preTradeForm.get("estimatedpnl")?.invalid||!1;case"psychologicalAnalysis":return this.preTradeForm.get("emotionalstatebefore")?.invalid||this.preTradeForm.get("tradeConfidence")?.invalid||this.preTradeForm.get("potentialbiases")?.invalid||!1;default:return!1}}static \u0275fac=function(e){return new(e||n)(D(Tt),D(Mt),D(le))};static \u0275cmp=V({type:n,selectors:[["app-pre-trade-log"]],inputs:{tradeLogData:"tradeLogData"},outputs:{formSubmitted:"formSubmitted",cancel:"cancel"},decls:332,vars:40,consts:[[1,"container","my-4"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item","text-decoration-none"],["routerLink","/home"],[3,"click"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row","mb-4"],[1,"col-lg-8"],[1,"mb-2"],[1,"text-muted"],[1,"col-lg-4","text-lg-end","d-flex","align-items-center","justify-content-lg-end","mt-3","mt-lg-0"],["class","progress w-100","style","height: 8px;",4,"ngIf"],["class","ms-2 small text-muted",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-1-circle","me-2"],[1,"badge","bg-primary"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-6"],["for","accountname",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-person"],["type","text","id","accountname","formControlName","accountname","placeholder","Enter your account name",1,"form-control"],["class","text-danger mt-1 small",4,"ngIf"],["for","instrumenttype",1,"form-label"],["id","instrumenttype","formControlName","instrumenttype",1,"form-select"],["value","","selected","","disabled",""],["value","Forex"],["value","Stocks"],["value","Futures"],["value","Crypto"],["value","Options"],["value","ETF"],["value","Other"],["for","tradesymbol",1,"form-label"],[1,"bi","bi-tag"],["type","text","id","tradesymbol","formControlName","tradesymbol","placeholder","Enter ticker symbol",1,"form-control"],["for","tradetype",1,"form-label"],["role","group","aria-label","Trade type",1,"btn-group","w-100"],["type","radio","name","tradetype","id","tradetype_long","value","Long","formControlName","tradetype",1,"btn-check"],["for","tradetype_long",1,"btn","btn-outline-success"],["type","radio","name","tradetype","id","tradetype_short","value","Short","formControlName","tradetype",1,"btn-check"],["for","tradetype_short",1,"btn","btn-outline-danger"],["for","timeframe",1,"form-label"],["id","timeframe","formControlName","timeframe",1,"form-select"],["value","Scalp"],["value","Day"],["value","Swing"],["value","Position"],["value","LongTerm"],["for","analysistype",1,"form-label"],["id","analysistype","formControlName","analysistype",1,"form-select"],["value","Technical"],["value","Fundamental"],["value","Both"],["value","Sentiment"],[1,"bi","bi-2-circle","me-2"],["for","strategyname",1,"form-label"],["type","text","id","strategyname","formControlName","strategyname","placeholder","e.g., Breakout, Reversal, Trend Following",1,"form-control"],["for","typeoforder",1,"form-label"],["id","typeoforder","formControlName","typeoforder",1,"form-select"],["value","Market"],["value","Limit"],["value","Stop"],["value","StopLimit"],["value","TrailingStop"],[1,"col-12"],["for","entrycriteria",1,"form-label"],["id","entrycriteria","formControlName","entrycriteria","placeholder","Describe your specific entry conditions (e.g., technical indicators, patterns, fundamental factors)","rows","3",1,"form-control"],[1,"form-text"],["for","exitstrategy",1,"form-label"],["id","exitstrategy","formControlName","exitstrategy","placeholder","Define your profit targets and stop loss levels","rows","3",1,"form-control"],[1,"bi","bi-3-circle","me-2"],["for","accountbalance",1,"form-label"],["type","number","step","0.01","min","0","id","accountbalance","formControlName","accountbalance","placeholder","Current account value",1,"form-control"],["for","positionsize",1,"form-label"],["type","text","id","positionsize","formControlName","positionsize","placeholder","Units/Contracts/Shares",1,"form-control"],["type","button","data-bs-toggle","tooltip","title","Calculate based on risk",1,"btn","btn-outline-secondary"],["for","entryprice",1,"form-label"],["type","number","id","entryprice","formControlName","entryprice","step","0.01","min","0","placeholder","Planned entry price",1,"form-control"],["for","entrydatetime",1,"form-label"],["type","datetime-local","id","entrydatetime","formControlName","entrydatetime",1,"form-control"],["for","estimatedstoploss",1,"form-label"],["type","number","step","0.01","min","0","id","estimatedstoploss","formControlName","estimatedstoploss","placeholder","Stop loss price level",1,"form-control"],["for","estimatedtakeprofit",1,"form-label"],["type","number","step","0.01","min","0","id","estimatedtakeprofit","formControlName","estimatedtakeprofit","placeholder","Target price level",1,"form-control"],[1,"mb-3"],[1,"col-md-4"],["for","estimatedrisk",1,"form-label"],["type","number","step","0.01","min","0","max","100","id","estimatedrisk","formControlName","estimatedrisk","placeholder","1-2% recommended",1,"form-control"],["class","text-warning mt-1 small",4,"ngIf"],["for","estimatedpnl",1,"form-label"],["type","number","step","0.01","min","0","id","estimatedpnl","formControlName","estimatedpnl","placeholder","Expected % gain",1,"form-control"],[1,"form-label"],["type","text","readonly","",1,"form-control","bg-light",3,"value"],[1,"form-text",3,"ngClass"],[1,"bi","bi-5-circle","me-2"],["for","emotionalstatebefore",1,"form-label"],["id","emotionalstatebefore","formControlName","emotionalstatebefore",1,"form-select"],["value","Calm"],["value","Excited"],["value","Anxious"],["value","Frustrated"],["value","Overconfident"],["value","Fearful"],["value","Neutral"],[1,"form-label","d-block"],["role","group",1,"btn-group","w-100"],["type","radio","formControlName","tradeconfidence","id","confidence1","value","1",1,"btn-check"],["for","confidence1",1,"btn","btn-outline-danger"],["type","radio","formControlName","tradeconfidence","id","confidence2","value","2",1,"btn-check"],["for","confidence2",1,"btn","btn-outline-warning"],["type","radio","formControlName","tradeconfidence","id","confidence3","value","3",1,"btn-check"],["for","confidence3",1,"btn","btn-outline-secondary"],["type","radio","formControlName","tradeconfidence","id","confidence4","value","4",1,"btn-check"],["for","confidence4",1,"btn","btn-outline-primary"],["type","radio","formControlName","tradeconfidence","id","confidence5","value","5",1,"btn-check"],["for","confidence5",1,"btn","btn-outline-success"],[1,"form-text","text-center","mt-1"],["class","text-danger mt-1 small text-center",4,"ngIf"],["for","potentialbiases",1,"form-label"],["id","potentialbiases","formControlName","potentialbiases","placeholder","What biases might affect your decision? (e.g., revenge trading, FOMO, overconfidence)","rows","3",1,"form-control"],[1,"bi","bi-6-circle","me-2"],[1,"badge","bg-secondary"],["for","notes",1,"form-label"],["id","notes","formControlName","notes","placeholder","Any additional information or context for this trade","rows","3",1,"form-control"],["class","alert alert-danger mb-3",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-success"],[1,"bi","bi-check-circle","me-1"],["class","alert alert-success mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"progress","w-100",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success"],[1,"ms-2","small","text-muted"],[1,"text-danger","mt-1","small"],[1,"text-warning","mt-1","small"],[1,"bi","bi-exclamation-triangle"],[1,"text-danger","mt-1","small","text-center"],[1,"alert","alert-danger","mb-3"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"mb-0","mt-2"],[4,"ngIf"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-x-circle","me-1"],[1,"alert","alert-success","mt-3"],[1,"bi","bi-check-circle-fill","me-2"],[1,"alert","alert-danger","mt-3"]],template:function(e,r){if(e&1&&(u(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),c()(),u(6,"li",3)(7,"a",5),S("click",function(){return r.onCancel()}),f(8,"Pre-Trade Logs"),c()(),u(9,"li",6),f(10,"Pre-Trading Journal"),c()()(),u(11,"div",7)(12,"div",8)(13,"h2",9),f(14),c(),u(15,"p",10),f(16,"Document your strategy before entering positions to maintain discipline and clarity"),c()(),u(17,"div",11),E(18,$F,2,2,"div",12)(19,HF,2,1,"span",13),c()(),u(20,"form",14),S("ngSubmit",function(){return r.onSubmit()}),u(21,"div",15)(22,"div",16)(23,"h5",17),_(24,"i",18),f(25,"Trade Setup "),c(),u(26,"span",19),f(27,"Required"),c()(),u(28,"div",20)(29,"div",21)(30,"div",22)(31,"label",23),f(32,"Account Name"),c(),u(33,"div",24)(34,"span",25),_(35,"i",26),c(),_(36,"input",27),c(),E(37,zF,2,0,"div",28),c(),u(38,"div",22)(39,"label",29),f(40,"Instrument Type"),c(),u(41,"select",30)(42,"option",31),f(43,"Choose instrument type"),c(),u(44,"option",32),f(45,"Forex"),c(),u(46,"option",33),f(47,"Stocks"),c(),u(48,"option",34),f(49,"Futures"),c(),u(50,"option",35),f(51,"Crypto"),c(),u(52,"option",36),f(53,"Options"),c(),u(54,"option",37),f(55,"ETF"),c(),u(56,"option",38),f(57,"Other"),c()(),E(58,qF,2,0,"div",28),c(),u(59,"div",22)(60,"label",39),f(61,"Trade Symbol"),c(),u(62,"div",24)(63,"span",25),_(64,"i",40),c(),_(65,"input",41),c(),E(66,GF,2,0,"div",28),c(),u(67,"div",22)(68,"label",42),f(69,"Trade Direction"),c(),u(70,"div",43),_(71,"input",44),u(72,"label",45),f(73,"Long"),c(),_(74,"input",46),u(75,"label",47),f(76,"Short"),c()(),E(77,WF,2,0,"div",28),c(),u(78,"div",22)(79,"label",48),f(80,"Time Frame"),c(),u(81,"select",49)(82,"option",31),f(83,"Select time frame"),c(),u(84,"option",50),f(85,"Scalp (minutes)"),c(),u(86,"option",51),f(87,"Day Trade (hours)"),c(),u(88,"option",52),f(89,"Swing (days-weeks)"),c(),u(90,"option",53),f(91,"Position (weeks-months)"),c(),u(92,"option",54),f(93,"Long Term (months+)"),c()(),E(94,QF,2,0,"div",28),c(),u(95,"div",22)(96,"label",55),f(97,"Analysis Type"),c(),u(98,"select",56)(99,"option",31),f(100,"Choose analysis method"),c(),u(101,"option",57),f(102,"Technical"),c(),u(103,"option",58),f(104,"Fundamental"),c(),u(105,"option",59),f(106,"Both"),c(),u(107,"option",60),f(108,"Sentiment"),c(),u(109,"option",38),f(110,"Other"),c()(),E(111,KF,2,0,"div",28),c()()()(),u(112,"div",15)(113,"div",16)(114,"h5",17),_(115,"i",61),f(116,"Strategy Details "),c(),u(117,"span",19),f(118,"Required"),c()(),u(119,"div",20)(120,"div",21)(121,"div",22)(122,"label",62),f(123,"Strategy Name"),c(),_(124,"input",63),E(125,ZF,2,0,"div",28),c(),u(126,"div",22)(127,"label",64),f(128,"Type of Order"),c(),u(129,"select",65)(130,"option",31),f(131,"Choose order type"),c(),u(132,"option",66),f(133,"Market"),c(),u(134,"option",67),f(135,"Limit"),c(),u(136,"option",68),f(137,"Stop"),c(),u(138,"option",69),f(139,"Stop Limit"),c(),u(140,"option",70),f(141,"Trailing Stop"),c()(),E(142,YF,2,0,"div",28),c(),u(143,"div",71)(144,"label",72),f(145,"Entry Criteria "),u(146,"span",10),f(147,"(Why are you taking this trade?)"),c()(),_(148,"textarea",73),u(149,"div",74),f(150,"Be specific about what signals or conditions must be met for entry."),c(),E(151,JF,2,0,"div",28),c(),u(152,"div",71)(153,"label",75),f(154,"Exit Strategy "),u(155,"span",10),f(156,"(How will you close this position?)"),c()(),_(157,"textarea",76),u(158,"div",74),f(159,"Include both profit-taking and loss-cutting criteria."),c(),E(160,XF,2,0,"div",28),c()()()(),u(161,"div",15)(162,"div",16)(163,"h5",17),_(164,"i",77),f(165,"Risk Management "),c(),u(166,"span",19),f(167,"Required"),c()(),u(168,"div",20)(169,"div",21)(170,"div",22)(171,"label",78),f(172,"Account Balance"),c(),u(173,"div",24)(174,"span",25),f(175,"$"),c(),_(176,"input",79),c(),E(177,e2,2,0,"div",28),c(),u(178,"div",22)(179,"label",80),f(180,"Position Size"),c(),u(181,"div",24),_(182,"input",81),u(183,"button",82),f(184,"Calculate"),c()(),E(185,t2,2,0,"div",28),c(),u(186,"div",22)(187,"label",83),f(188,"Entry Price"),c(),u(189,"div",24)(190,"span",25),f(191,"$"),c(),_(192,"input",84),c(),E(193,n2,2,0,"div",28),c(),u(194,"div",22)(195,"label",85),f(196,"Entry Date/Time"),c(),_(197,"input",86),E(198,r2,2,0,"div",28),c(),u(199,"div",22)(200,"label",87),f(201,"Stop Loss Price"),c(),u(202,"div",24)(203,"span",25),f(204,"$"),c(),_(205,"input",88),c(),E(206,i2,2,0,"div",28),c(),u(207,"div",22)(208,"label",89),f(209,"Take Profit Price"),c(),u(210,"div",24)(211,"span",25),f(212,"$"),c(),_(213,"input",90),c(),E(214,o2,2,0,"div",28),c(),u(215,"div",71),_(216,"hr"),u(217,"h6",91),f(218,"Risk/Reward Analysis"),c()(),u(219,"div",92)(220,"label",93),f(221,"Risk Per Trade"),c(),u(222,"div",24),_(223,"input",94),u(224,"span",25),f(225,"%"),c()(),u(226,"div",74),f(227,"Percentage of account at risk"),c(),E(228,s2,2,0,"div",28)(229,a2,3,0,"div",95),c(),u(230,"div",92)(231,"label",96),f(232,"Estimated Reward"),c(),u(233,"div",24),_(234,"input",97),u(235,"span",25),f(236,"%"),c()(),E(237,l2,2,0,"div",28),c(),u(238,"div",92)(239,"label",98),f(240,"Risk/Reward Ratio"),c(),u(241,"div",24),_(242,"input",99),u(243,"span",25),f(244,"R:R"),c()(),u(245,"div",100),_(246,"i"),f(247),c()()()()(),u(248,"div",15)(249,"div",16)(250,"h5",17),_(251,"i",101),f(252,"Psychological Analysis "),c(),u(253,"span",19),f(254,"Required"),c()(),u(255,"div",20)(256,"div",21)(257,"div",22)(258,"label",102),f(259,"Current Emotional State"),c(),u(260,"select",103)(261,"option",31),f(262,"How are you feeling?"),c(),u(263,"option",104),f(264,"Calm & Focused"),c(),u(265,"option",105),f(266,"Excited"),c(),u(267,"option",106),f(268,"Anxious"),c(),u(269,"option",107),f(270,"Frustrated"),c(),u(271,"option",108),f(272,"Overconfident"),c(),u(273,"option",109),f(274,"Fearful"),c(),u(275,"option",110),f(276,"Neutral"),c(),u(277,"option",38),f(278,"Other"),c()(),E(279,c2,2,0,"div",28)(280,u2,3,0,"div",95),c(),u(281,"div",22)(282,"label",111),f(283,"Trading Confidence"),c(),u(284,"div",112),_(285,"input",113),u(286,"label",114),f(287,"1"),c(),_(288,"input",115),u(289,"label",116),f(290,"2"),c(),_(291,"input",117),u(292,"label",118),f(293,"3"),c(),_(294,"input",119),u(295,"label",120),f(296,"4"),c(),_(297,"input",121),u(298,"label",122),f(299,"5"),c()(),u(300,"div",123),f(301,"Low (1) to High (5)"),c(),E(302,d2,2,0,"div",124),c(),u(303,"div",71)(304,"label",125),f(305,"Potential Biases"),c(),_(306,"textarea",126),u(307,"div",74),f(308,"Identifying biases helps improve future decision making"),c(),E(309,f2,2,0,"div",28),c()()()(),u(310,"div",15)(311,"div",16)(312,"h5",17),_(313,"i",127),f(314,"Additional Notes "),c(),u(315,"span",128),f(316,"Optional"),c()(),u(317,"div",20)(318,"div",21)(319,"div",71)(320,"label",129),f(321,"Notes"),c(),_(322,"textarea",130),c()()()(),E(323,v2,9,4,"div",131),u(324,"div",132),E(325,y2,3,0,"button",133),u(326,"div")(327,"button",134),_(328,"i",135),f(329),c()()(),E(330,_2,3,1,"div",136)(331,b2,3,1,"div",137),c()()),e&2){let i,o,s,a,l,d,p,m,y,v,b,C,x,A,j,U,q,Q,De,Te,qe,Ft;h(14),L(r.tradeLogData?"Edit Pre-Trading Journal":"Create Pre-Trading Journal"),h(4),g("ngIf",!r.tradeLogData),h(),g("ngIf",!r.tradeLogData),h(),g("formGroup",r.preTradeForm),h(17),g("ngIf",((i=r.preTradeForm.get("accountname"))==null?null:i.invalid)&&(((i=r.preTradeForm.get("accountname"))==null?null:i.dirty)||((i=r.preTradeForm.get("accountname"))==null?null:i.touched)||r.formSubmitMarker)),h(21),g("ngIf",((o=r.preTradeForm.get("instrumenttype"))==null?null:o.invalid)&&(((o=r.preTradeForm.get("instrumenttype"))==null?null:o.dirty)||((o=r.preTradeForm.get("instrumenttype"))==null?null:o.touched)||r.formSubmitMarker)),h(8),g("ngIf",((s=r.preTradeForm.get("tradesymbol"))==null?null:s.invalid)&&(((s=r.preTradeForm.get("tradesymbol"))==null?null:s.dirty)||((s=r.preTradeForm.get("tradesymbol"))==null?null:s.touched)||r.formSubmitMarker)),h(11),g("ngIf",((a=r.preTradeForm.get("tradetype"))==null?null:a.invalid)&&(((a=r.preTradeForm.get("tradetype"))==null?null:a.dirty)||((a=r.preTradeForm.get("tradetype"))==null?null:a.touched)||r.formSubmitMarker)),h(17),g("ngIf",((l=r.preTradeForm.get("timeframe"))==null?null:l.invalid)&&(((l=r.preTradeForm.get("timeframe"))==null?null:l.dirty)||((l=r.preTradeForm.get("timeframe"))==null?null:l.touched)||r.formSubmitMarker)),h(17),g("ngIf",((d=r.preTradeForm.get("analysistype"))==null?null:d.invalid)&&(((d=r.preTradeForm.get("analysistype"))==null?null:d.dirty)||((d=r.preTradeForm.get("analysistype"))==null?null:d.touched)||r.formSubmitMarker)),h(14),g("ngIf",((p=r.preTradeForm.get("strategyname"))==null?null:p.invalid)&&(((p=r.preTradeForm.get("strategyname"))==null?null:p.dirty)||((p=r.preTradeForm.get("strategyname"))==null?null:p.touched)||r.formSubmitMarker)),h(17),g("ngIf",((m=r.preTradeForm.get("typeoforder"))==null?null:m.invalid)&&(((m=r.preTradeForm.get("typeoforder"))==null?null:m.dirty)||((m=r.preTradeForm.get("typeoforder"))==null?null:m.touched)||r.formSubmitMarker)),h(9),g("ngIf",((y=r.preTradeForm.get("entrycriteria"))==null?null:y.invalid)&&(((y=r.preTradeForm.get("entrycriteria"))==null?null:y.dirty)||((y=r.preTradeForm.get("entrycriteria"))==null?null:y.touched)||r.formSubmitMarker)),h(9),g("ngIf",((v=r.preTradeForm.get("exitstrategy"))==null?null:v.invalid)&&(((v=r.preTradeForm.get("exitstrategy"))==null?null:v.dirty)||((v=r.preTradeForm.get("exitstrategy"))==null?null:v.touched)||r.formSubmitMarker)),h(17),g("ngIf",((b=r.preTradeForm.get("accountbalance"))==null?null:b.invalid)&&(((b=r.preTradeForm.get("accountbalance"))==null?null:b.dirty)||((b=r.preTradeForm.get("accountbalance"))==null?null:b.touched)||r.formSubmitMarker)),h(8),g("ngIf",((C=r.preTradeForm.get("positionsize"))==null?null:C.invalid)&&(((C=r.preTradeForm.get("positionsize"))==null?null:C.dirty)||((C=r.preTradeForm.get("positionsize"))==null?null:C.touched)||r.formSubmitMarker)),h(8),g("ngIf",((x=r.preTradeForm.get("entryprice"))==null?null:x.invalid)&&(((x=r.preTradeForm.get("entryprice"))==null?null:x.dirty)||((x=r.preTradeForm.get("entryprice"))==null?null:x.touched)||r.formSubmitMarker)),h(5),g("ngIf",((A=r.preTradeForm.get("entrydatetime"))==null?null:A.invalid)&&(((A=r.preTradeForm.get("entrydatetime"))==null?null:A.dirty)||((A=r.preTradeForm.get("entrydatetime"))==null?null:A.touched)||r.formSubmitMarker)),h(8),g("ngIf",((j=r.preTradeForm.get("estimatedstoploss"))==null?null:j.invalid)&&(((j=r.preTradeForm.get("estimatedstoploss"))==null?null:j.dirty)||((j=r.preTradeForm.get("estimatedstoploss"))==null?null:j.touched)||r.formSubmitMarker)),h(8),g("ngIf",((U=r.preTradeForm.get("estimatedtakeprofit"))==null?null:U.invalid)&&(((U=r.preTradeForm.get("estimatedtakeprofit"))==null?null:U.dirty)||((U=r.preTradeForm.get("estimatedtakeprofit"))==null?null:U.touched)||r.formSubmitMarker)),h(14),g("ngIf",((q=r.preTradeForm.get("estimatedrisk"))==null?null:q.invalid)&&(((q=r.preTradeForm.get("estimatedrisk"))==null?null:q.dirty)||((q=r.preTradeForm.get("estimatedrisk"))==null?null:q.touched)||r.formSubmitMarker)),h(),g("ngIf",((Q=r.preTradeForm.get("estimatedrisk"))==null?null:Q.value)>2),h(8),g("ngIf",((De=r.preTradeForm.get("estimatedpnl"))==null?null:De.invalid)&&(((De=r.preTradeForm.get("estimatedpnl"))==null?null:De.dirty)||((De=r.preTradeForm.get("estimatedpnl"))==null?null:De.touched)||r.formSubmitMarker)),h(5),g("value",r.calculateRiskRewardRatio()),h(3),g("ngClass",dt(37,BF,r.isGoodRiskReward(),!r.isGoodRiskReward())),h(),fu(r.isGoodRiskReward()?"bi bi-check-circle":"bi bi-x-circle"),h(),O(" ",r.isGoodRiskReward()?"Good risk/reward ratio":"Risk/reward should be at least 1:2"," "),h(32),g("ngIf",((Te=r.preTradeForm.get("emotionalstatebefore"))==null?null:Te.invalid)&&(((Te=r.preTradeForm.get("emotionalstatebefore"))==null?null:Te.dirty)||((Te=r.preTradeForm.get("emotionalstatebefore"))==null?null:Te.touched)||r.formSubmitMarker)),h(),g("ngIf",r.isNegativeEmotionalState()),h(22),g("ngIf",((qe=r.preTradeForm.get("tradeconfidence"))==null?null:qe.invalid)&&(((qe=r.preTradeForm.get("tradeconfidence"))==null?null:qe.dirty)||((qe=r.preTradeForm.get("tradeconfidence"))==null?null:qe.touched)||r.formSubmitMarker)),h(7),g("ngIf",((Ft=r.preTradeForm.get("potentialbiases"))==null?null:Ft.invalid)&&(((Ft=r.preTradeForm.get("potentialbiases"))==null?null:Ft.dirty)||((Ft=r.preTradeForm.get("potentialbiases"))==null?null:Ft.touched)||r.formSubmitMarker)),h(14),g("ngIf",r.formSubmitMarker&&r.preTradeForm.invalid),h(2),g("ngIf",r.tradeLogData),h(4),O("",r.tradeLogData?"Update":"Submit"," "),h(),g("ngIf",r.message),h(),g("ngIf",r.errorMessage)}},dependencies:[B,ft,K,Ce,Qt,Zt,Yt,oe,qn,Kt,Gn,pe,Oe,ml,P0,Ne,Ve,Xe],styles:[".card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 5px #0000000d;border:1px solid rgba(0,0,0,.1);color:#000}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid rgba(0,0,0,.1);padding:12px 16px}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:6px;padding:10px 12px;background-color:#f9f9f9;border:1px solid #ced4da}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{background-color:#fff;border-color:#80bdff;box-shadow:0 0 0 .25rem #0d6efd40}textarea.form-control[_ngcontent-%COMP%]{resize:vertical}.btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:500}.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545}"]})};function w2(n,t){n&1&&(u(0,"div",12),f(1,"Loading trade logs..."),c())}function C2(n,t){if(n&1&&(u(0,"div",13),f(1),c()),n&2){let e=w();h(),L(e.errorMessage)}}function E2(n,t){if(n&1){let e=J();u(0,"div",16)(1,"div",17),S("click",function(){let i=T(e).$implicit,o=w(2);return M(o.openEditModal(i))}),u(2,"div",18),_(3,"i",19),f(4," Planned "),c(),u(5,"div",20),S("click",function(i){let o=T(e).$implicit,s=w(2);return M(s.onDeleteTradeLog(o,i))}),_(6,"i",21),c(),u(7,"div",22)(8,"h4",23),f(9),c(),u(10,"h5",24),f(11),c(),u(12,"div",25)(13,"div",26)(14,"div",27)(15,"strong"),f(16,"Analysis:"),c(),f(17),c(),u(18,"div",27)(19,"strong"),f(20,"Order:"),c(),f(21),c()(),u(22,"div",26)(23,"div",27)(24,"strong"),f(25,"Stop Loss:"),c(),f(26),c(),u(27,"div",27)(28,"strong"),f(29,"Take Profit:"),c(),f(30),c()(),u(31,"div",26)(32,"div",27)(33,"strong"),f(34,"Risk:"),c(),f(35),c(),u(36,"div",27)(37,"strong"),f(38,"Est. PnL:"),c(),f(39),c()(),u(40,"div",28)(41,"div",29)(42,"strong"),f(43,"Account:"),c(),f(44),c()()(),u(45,"div",30)(46,"small",31),f(47),Re(48,"date"),c()()()()()}if(n&2){let e=t.$implicit;h(9),L(e.tradesymbol),h(2),fa(" ",e.tradetype," | ",e.instrumenttype," "),h(6),O(" ",e.analysistype," "),h(4),O(" ",e.typeoforder," "),h(5),O(" ",e.estimatedstoploss," "),h(4),O(" ",e.estimatedtakeprofit," "),h(5),O(" ",e.estimatedrisk," "),h(4),O(" ",e.estimatedpnl," "),h(5),O(" ",e.accountname," "),h(3),L(Fe(48,11,e.createdtime,"medium"))}}function S2(n,t){if(n&1&&(u(0,"div",14),E(1,E2,49,14,"div",15),c()),n&2){let e=w();h(),g("ngForOf",e.tradeLogs)}}function D2(n,t){n&1&&(u(0,"div",32),f(1," No trade logs found. "),c())}function x2(n,t){if(n&1){let e=J();u(0,"div",33),S("click",function(i){T(e);let o=w();return M(o.closeModalOnOverlayClick(i))}),u(1,"div",34),S("click",function(i){return T(e),M(i.stopPropagation())}),u(2,"app-pre-trade-log",35),S("formSubmitted",function(){T(e);let i=w();return M(i.onFormSubmitted())})("cancel",function(){T(e);let i=w();return M(i.closeModal())}),c()()()}if(n&2){let e=w();h(2),g("tradeLogData",e.selectedTradeLog)}}var jd=class n{constructor(t,e){this.supabaseTradeTableService=t;this.cdr=e}tableName="pretrade";tradeLogs=[];loading=!1;errorMessage="";showModal=!1;selectedTradeLog=null;async ngOnInit(){this.loading=!0,await this.fetchTradeLogs(),this.loading=!1,this.cdr.markForCheck()}async fetchTradeLogs(){try{this.tradeLogs=await this.supabaseTradeTableService.getTradeLogs(this.tableName)}catch(t){console.error("Error fetching trade logs:",t),this.errorMessage="Error fetching trade logs."}}openEditModal(t){this.selectedTradeLog=t,this.showModal=!0}onFormSubmitted(){this.fetchTradeLogs(),this.closeModal()}closeModal(){this.showModal=!1,this.selectedTradeLog=null,this.cdr.markForCheck()}closeModalOnOverlayClick(t){this.closeModal(),this.cdr.markForCheck()}async onDeleteTradeLog(t,e){e.stopPropagation();try{await this.supabaseTradeTableService.deleteTradeLog(t.tradeid,this.tableName),await this.fetchTradeLogs(),this.cdr.markForCheck()}catch(r){console.error("Error deleting trade log:",r),this.errorMessage="Error deleting trade log."}}static \u0275fac=function(e){return new(e||n)(D(Mt),D(le))};static \u0275cmp=V({type:n,selectors:[["app-pre-trade-table"]],decls:18,vars:5,consts:[[1,"container","mt-3"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item","text-decoration-none"],["routerLink","/home"],["aria-current","page",1,"breadcrumb-item","active"],["routerLink","/pretradelog"],["class","alert alert-info",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","row mt-5",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"alert","alert-info"],[1,"alert","alert-danger"],[1,"row","mt-5"],["class","col-md-4 col-12 mb-4",4,"ngFor","ngForOf"],[1,"col-md-4","col-12","mb-4"],[1,"card","h-100","position-relative","shadow",2,"cursor","pointer",3,"click"],[1,"trade-status-indicator","status-planned"],[1,"bi","bi-clipboard-check"],[1,"delete-icon",3,"click"],[1,"bi","bi-trash"],[1,"card-body"],[1,"card-title","mt-5"],[1,"card-subtitle","mb-3","text-muted","fw-bold"],[1,"card-text"],[1,"row","mb-2"],[1,"col-6"],[1,"row"],[1,"col-12"],[1,"mt-3"],[1,"text-muted"],[1,"alert","alert-warning"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[3,"formSubmitted","cancel","tradeLogData"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),c()(),u(6,"li",5),f(7,"Pre-Trade Logs"),c(),u(8,"li",3)(9,"a",6),f(10,"Pre-Trading Journal"),c()()()(),u(11,"h2"),f(12,"Pre Trade Logs"),c(),E(13,w2,2,0,"div",7)(14,C2,2,1,"div",8)(15,S2,2,1,"div",9)(16,D2,2,0,"div",10),c(),E(17,x2,3,1,"div",11)),e&2&&(h(13),g("ngIf",r.loading),h(),g("ngIf",r.errorMessage),h(),g("ngIf",r.tradeLogs&&r.tradeLogs.length),h(),g("ngIf",!r.loading&&(!r.tradeLogs||r.tradeLogs.length===0)),h(),g("ngIf",r.showModal))},dependencies:[Xe,B,ze,K,rr,Ms],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;max-width:90%;max-height:90%;overflow:auto;position:relative}.card[_ngcontent-%COMP%]{position:relative;border:none;transition:all .2s ease;border-left:4px solid #6c757d!important}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0000001a!important}.delete-icon[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;display:none;color:#dc3545;background:#fffc;border-radius:50%;padding:5px;z-index:10}.card[_ngcontent-%COMP%]:hover   .delete-icon[_ngcontent-%COMP%]{display:block}.delete-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.trade-status-indicator[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;padding:5px 10px;border-radius:12px;font-size:.8rem;font-weight:700;z-index:10;color:#fff}.status-planned[_ngcontent-%COMP%]{background-color:#6c757d}.trade-status-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:3px}"],changeDetection:0})};function I2(n,t){if(n&1&&(u(0,"div",131),_(1,"div",132),c()),n&2){let e=w();h(),Gt("width",e.calculateFormProgress()+"%")}}function T2(n,t){if(n&1&&(u(0,"span",133),f(1),c()),n&2){let e=w();h(),O("",e.calculateFormProgress(),"% Complete")}}function M2(n,t){n&1&&(u(0,"div",134),f(1," Account name is required "),c())}function A2(n,t){n&1&&(u(0,"div",134),f(1," Please select an instrument type "),c())}function k2(n,t){n&1&&(u(0,"div",134),f(1," Please select an analysis type "),c())}function N2(n,t){n&1&&(u(0,"div",134),f(1," Trade symbol is required "),c())}function P2(n,t){n&1&&(u(0,"div",134),f(1," Please select trade direction "),c())}function O2(n,t){n&1&&(u(0,"div",134),f(1," Time frame selection is required "),c())}function R2(n,t){n&1&&(u(0,"div",134),f(1," Strategy name is required "),c())}function F2(n,t){n&1&&(u(0,"div",134),f(1," Order type is required "),c())}function L2(n,t){n&1&&(u(0,"div",134),f(1," Entry date/time is required "),c())}function V2(n,t){n&1&&(u(0,"div",134),f(1," Exit date/time is required "),c())}function j2(n,t){n&1&&(u(0,"div",134),f(1," Valid entry price is required "),c())}function U2(n,t){n&1&&(u(0,"div",134),f(1," Valid exit price is required "),c())}function B2(n,t){n&1&&(u(0,"div",134),f(1," Position size is required "),c())}function $2(n,t){n&1&&(u(0,"div",134),f(1," Please select trade outcome "),c())}function H2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Trade Details"),c())}function z2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Strategy Information"),c())}function q2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Trade Execution"),c())}function G2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Trade Outcome"),c())}function W2(n,t){n&1&&(u(0,"li"),f(1,"Complete all required fields in Post-Trade Analysis"),c())}function Q2(n,t){if(n&1&&(u(0,"div",135),_(1,"i",136),u(2,"strong"),f(3,"Please fix the errors highlighted above before submitting."),c(),u(4,"ul",137),E(5,H2,2,0,"li",138)(6,z2,2,0,"li",138)(7,q2,2,0,"li",138)(8,G2,2,0,"li",138)(9,W2,2,0,"li",138),c()()),n&2){let e=w();h(5),g("ngIf",e.hasErrors("tradeDetails")),h(),g("ngIf",e.hasErrors("strategyInformation")),h(),g("ngIf",e.hasErrors("tradeExecution")),h(),g("ngIf",e.hasErrors("tradeOutcome")),h(),g("ngIf",e.hasErrors("postTradeAnalysis"))}}function K2(n,t){if(n&1){let e=J();u(0,"button",139),S("click",function(){T(e);let i=w();return M(i.onCancel())}),_(1,"i",140),f(2,"Cancel "),c()}}function Z2(n,t){if(n&1&&(u(0,"div",141),_(1,"i",142),f(2),c()),n&2){let e=w();h(2),O("",e.message," ")}}function Y2(n,t){if(n&1&&(u(0,"div",143),_(1,"i",136),f(2),c()),n&2){let e=w();h(2),O("",e.errorMessage," ")}}var As=class n{constructor(t,e,r){this.fb=t;this.cdr=e;this.supabaseTradeTableService=r}tradeLogData=null;formSubmitted=new ne;cancel=new ne;tableName="posttrade";postTradeForm;message="";errorMessage="";formSubmitMarker=!1;tradeOutcomes=["Win","Loss","Breakeven"];tradeDirections=["Long","Short"];ngOnInit(){this.formSubmitMarker=!1,this.createForm()}createForm(){var t=co();this.postTradeForm=this.fb.group({tradeid:[this.tradeLogData?.tradeid??t],userid:[this.tradeLogData?.userid??"the-db-is-likely-hacked-1234-abcd-5678-efgh"],createdtime:[new Date().toISOString(),R.required],accountname:[this.tradeLogData?.accountname,[R.required,R.maxLength(255)]],accountbalance:[this.tradeLogData?.accountbalance??""],instrumenttype:[this.tradeLogData?.instrumenttype??"",[R.required,R.maxLength(50)]],analysistype:[this.tradeLogData?.analysistype??"",[R.required,R.maxLength(100)]],tradesymbol:[this.tradeLogData?.tradesymbol??"",[R.required,R.maxLength(50)]],tradetype:[this.tradeLogData?.tradetype??"",[R.required,R.maxLength(50)]],timeframe:[this.tradeLogData?.timeframe??"",[R.required,R.maxLength(50)]],entrydatetime:[this.tradeLogData?.entrydatetime??"",R.required],strategyname:[this.tradeLogData?.strategyname??"",[R.required,R.maxLength(255)]],typeoforder:[this.tradeLogData?.typeoforder??"",[R.required,R.maxLength(50)]],exitstrategy:[this.tradeLogData?.exitstrategy??""],entryprice:[this.tradeLogData?.entryprice??"",[R.required,R.min(0)]],exitprice:[this.tradeLogData?.exitprice??"",[R.required,R.min(0)]],positionsize:[this.tradeLogData?.positionsize??"",[R.required,R.maxLength(50)]],exitdatetime:[this.tradeLogData?.exitdatetime??"",R.required],tradeoutcome:[this.tradeLogData?.tradeoutcome??"",R.required],profitlossamount:[this.tradeLogData?.profitlossamount??""],setupscreenshot:[this.tradeLogData?.setupscreenshot??""],emotionalstateafter:[this.tradeLogData?.emotionalstateafter??""],emotionalimpactondecision:[this.tradeLogData?.emotionalimpactondecision??""],whatwentwell:[this.tradeLogData?.whatwentwell??""],whatcouldimprove:[this.tradeLogData?.whatcouldimprove??""],notes:[this.tradeLogData?.notes??""],isopen:[this.tradeLogData?.isopen??!0,R.required],updatedtime:[new Date().toDateString(),R.required]})}onFileSelected(t){let e=t.target;if(!e.files||e.files.length===0)return;let r=e.files[0],i=new FileReader;i.onload=o=>{this.postTradeForm.patchValue({setupScreenshot:o.target.result})},i.readAsDataURL(r)}async onSubmit(){if(this.formSubmitMarker=!0,this.postTradeForm.invalid){this.postTradeForm.markAllAsTouched();return}let t=this.postTradeForm.value;try{this.tradeLogData?await this.supabaseTradeTableService.updateTradeLog(t,this.tableName):await this.supabaseTradeTableService.addTradeLog(t,this.tableName),this.message="Trade log updated successfully. Resetting in 5 seconds.",setTimeout(()=>{this.cdr.markForCheck()},0),this.formSubmitted.emit(),this.formSubmitMarker=!1,this.cdr.markForCheck()}catch(e){console.error("Error processing trade log:",e),this.errorMessage="Something went wrong.",this.cdr.markForCheck()}}async onDelete(){if(this.tradeLogData)try{await this.supabaseTradeTableService.deleteTradeLog(this.tradeLogData.tradeid,this.tableName),this.message="Trade log deleted successfully.",this.formSubmitted.emit()}catch(t){console.error("Error deleting trade log:",t),this.errorMessage="Something went wrong while deleting."}finally{this.cdr.markForCheck()}}onCancel(){this.cancel.emit()}calculateProfitLoss(){let t=this.postTradeForm.get("entryprice")?.value,e=this.postTradeForm.get("exitprice")?.value,r=parseFloat(this.postTradeForm.get("positionsize")?.value),i=this.postTradeForm.get("tradetype")?.value;if(t&&e&&r&&i){let o=0;i==="Long"?o=(e-t)*r:i==="Short"&&(o=(t-e)*r),this.postTradeForm.get("profitlossamount")?.setValue(o.toFixed(2)),o>0?this.postTradeForm.get("tradeoutcome")?.setValue("Win"):o<0?this.postTradeForm.get("tradeoutcome")?.setValue("Loss"):this.postTradeForm.get("tradeoutcome")?.setValue("Breakeven")}}calculateFormProgress(){let t=Object.keys(this.postTradeForm.controls).filter(r=>this.postTradeForm.get(r)?.validator!==null),e=t.filter(r=>this.postTradeForm.get(r)?.valid);return Math.round(e.length/t.length*100)}hasErrors(t){let e=!1,r={tradeDetails:["accountname","instrumenttype","analysistype","tradesymbol","tradetype","timeframe"],strategyInformation:["strategyname","typeoforder"],tradeExecution:["entrydatetime","exitdatetime","entryprice","exitprice","positionsize"],tradeOutcome:["tradeoutcome"],postTradeAnalysis:["emotionalstateafter","whatwentwell","whatcouldimprove"]};return r[t]&&r[t].forEach(i=>{this.postTradeForm.get(i)?.invalid&&(e=!0)}),e}static \u0275fac=function(e){return new(e||n)(D(Tt),D(le),D(Mt))};static \u0275cmp=V({type:n,selectors:[["app-post-trade-log"]],inputs:{tradeLogData:"tradeLogData"},outputs:{formSubmitted:"formSubmitted",cancel:"cancel"},decls:299,vars:23,consts:[[1,"container","my-4"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item","text-decoration-none"],["routerLink","/home"],["routerLink","/posttrades"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row","mb-4"],[1,"col-lg-8"],[1,"mb-2"],[1,"text-muted"],[1,"col-lg-4","text-lg-end","d-flex","align-items-center","justify-content-lg-end","mt-3","mt-lg-0"],["class","progress w-100","style","height: 8px;",4,"ngIf"],["class","ms-2 small text-muted",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-1-circle","me-2"],[1,"badge","bg-primary"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-6"],["for","accountname",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-person"],["type","text","id","accountname","formControlName","accountname","placeholder","Enter your account name",1,"form-control"],["class","text-danger mt-1 small",4,"ngIf"],["for","accountbalance",1,"form-label"],["type","number","step","0.01","min","0","id","accountbalance","formControlName","accountbalance","placeholder","Current account value",1,"form-control"],["for","instrumenttype",1,"form-label"],["id","instrumenttype","formControlName","instrumenttype",1,"form-select"],["value","","selected","","disabled",""],["value","Forex"],["value","Stocks"],["value","Futures"],["value","Crypto"],["value","Options"],["value","ETF"],["value","Other"],["for","analysistype",1,"form-label"],["id","analysistype","formControlName","analysistype",1,"form-select"],["value","Technical"],["value","Fundamental"],["value","Both"],["value","Sentiment"],["for","tradesymbol",1,"form-label"],[1,"bi","bi-tag"],["type","text","id","tradesymbol","formControlName","tradesymbol","placeholder","Enter ticker symbol",1,"form-control"],["for","tradetype",1,"form-label"],["role","group","aria-label","Trade type",1,"btn-group","w-100"],["type","radio","name","tradetype","id","tradetype_long","value","Long","formControlName","tradetype",1,"btn-check"],["for","tradetype_long",1,"btn","btn-outline-success"],["type","radio","name","tradetype","id","tradetype_short","value","Short","formControlName","tradetype",1,"btn-check"],["for","tradetype_short",1,"btn","btn-outline-danger"],["for","timeframe",1,"form-label"],["id","timeframe","formControlName","timeframe",1,"form-select"],["value","Scalp"],["value","Day"],["value","Swing"],["value","Position"],["value","LongTerm"],[1,"bi","bi-2-circle","me-2"],["for","strategyname",1,"form-label"],["type","text","id","strategyname","formControlName","strategyname","placeholder","e.g., Breakout, Reversal, Trend Following",1,"form-control"],["for","typeoforder",1,"form-label"],["id","typeoforder","formControlName","typeoforder",1,"form-select"],["value","Market"],["value","Limit"],["value","Stop"],["value","StopLimit"],["value","TrailingStop"],[1,"col-12"],["for","exitstrategy",1,"form-label"],["id","exitstrategy","formControlName","exitstrategy","placeholder","Describe the exit strategy you implemented","rows","3",1,"form-control"],[1,"bi","bi-3-circle","me-2"],["for","entrydatetime",1,"form-label"],["type","datetime-local","id","entrydatetime","formControlName","entrydatetime",1,"form-control"],["for","exitdatetime",1,"form-label"],["type","datetime-local","id","exitdatetime","formControlName","exitdatetime",1,"form-control"],[1,"col-md-4"],["for","entryprice",1,"form-label"],["type","number","id","entryprice","formControlName","entryprice","step","0.01","min","0","placeholder","Actual entry price",1,"form-control"],["for","exitprice",1,"form-label"],["type","number","id","exitprice","formControlName","exitprice","step","0.01","min","0","placeholder","Actual exit price",1,"form-control"],["for","positionsize",1,"form-label"],["type","text","id","positionsize","formControlName","positionsize","placeholder","Units/Contracts/Shares",1,"form-control"],[1,"bi","bi-4-circle","me-2"],["for","tradeoutcome",1,"form-label"],["role","group","aria-label","Trade outcome",1,"btn-group","w-100"],["type","radio","name","tradeoutcome","id","tradeoutcome_win","value","Win","formControlName","tradeoutcome",1,"btn-check"],["for","tradeoutcome_win",1,"btn","btn-outline-success"],["type","radio","name","tradeoutcome","id","tradeoutcome_loss","value","Loss","formControlName","tradeoutcome",1,"btn-check"],["for","tradeoutcome_loss",1,"btn","btn-outline-danger"],["type","radio","name","tradeoutcome","id","tradeoutcome_breakeven","value","Breakeven","formControlName","tradeoutcome",1,"btn-check"],["for","tradeoutcome_breakeven",1,"btn","btn-outline-warning"],["for","profitlossamount",1,"form-label"],["type","number","step","0.01","id","profitlossamount","formControlName","profitlossamount","placeholder","e.g. 50.25 or -30.50",1,"form-control"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-6-circle","me-2"],["for","emotionalstateafter",1,"form-label"],["id","emotionalstateafter","formControlName","emotionalstateafter",1,"form-select"],["value","Satisfied"],["value","Excited"],["value","Relieved"],["value","Disappointed"],["value","Frustrated"],["value","Neutral"],["value","Angry"],["for","emotionalimpactondecision",1,"form-label"],["id","emotionalimpactondecision","formControlName","emotionalimpactondecision","placeholder","How did your emotions affect your trading decisions?","rows","3",1,"form-control"],["for","whatwentwell",1,"form-label"],["id","whatwentwell","formControlName","whatwentwell","placeholder","What aspects of this trade did you execute correctly?","rows","3",1,"form-control"],["for","whatcouldimprove",1,"form-label"],["id","whatcouldimprove","formControlName","whatcouldimprove","placeholder","What could you have done better in this trade?","rows","3",1,"form-control"],["for","isopen",1,"form-label"],[1,"form-check","form-switch"],["type","checkbox","id","isopen","formControlName","isopen",1,"form-check-input"],["for","isopen",1,"form-check-label"],[1,"bi","bi-7-circle","me-2"],[1,"badge","bg-secondary"],["for","notes",1,"form-label"],["id","notes","formControlName","notes","placeholder","Any additional information or context for this trade","rows","3",1,"form-control"],["class","alert alert-danger mb-3",4,"ngIf"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],["type","button","class","btn btn-tr-secondary",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-success"],[1,"bi","bi-check-circle","me-1"],["class","alert alert-success mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"progress","w-100",2,"height","8px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success"],[1,"ms-2","small","text-muted"],[1,"text-danger","mt-1","small"],[1,"alert","alert-danger","mb-3"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"mb-0","mt-2"],[4,"ngIf"],["type","button",1,"btn","btn-tr-secondary",3,"click"],[1,"bi","bi-x-circle","me-1"],[1,"alert","alert-success","mt-3"],[1,"bi","bi-check-circle-fill","me-2"],[1,"alert","alert-danger","mt-3"]],template:function(e,r){if(e&1&&(u(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),c()(),u(6,"li",3)(7,"a",5),f(8,"Trade Logs"),c()(),u(9,"li",6),f(10,"Post-Trading Journal"),c()()(),u(11,"div",7)(12,"div",8)(13,"h2",9),f(14),c(),u(15,"p",10),f(16,"Document your completed trades to analyze performance and improve your strategy"),c()(),u(17,"div",11),E(18,I2,2,2,"div",12)(19,T2,2,1,"span",13),c()(),u(20,"form",14),S("ngSubmit",function(){return r.onSubmit()}),u(21,"div",15)(22,"div",16)(23,"h5",17),_(24,"i",18),f(25,"Trade Details "),c(),u(26,"span",19),f(27,"Required"),c()(),u(28,"div",20)(29,"div",21)(30,"div",22)(31,"label",23),f(32,"Account Name"),c(),u(33,"div",24)(34,"span",25),_(35,"i",26),c(),_(36,"input",27),c(),E(37,M2,2,0,"div",28),c(),u(38,"div",22)(39,"label",29),f(40,"Account Balance"),c(),u(41,"div",24)(42,"span",25),f(43,"$"),c(),_(44,"input",30),c()(),u(45,"div",22)(46,"label",31),f(47,"Instrument Type"),c(),u(48,"select",32)(49,"option",33),f(50,"Choose instrument type"),c(),u(51,"option",34),f(52,"Forex"),c(),u(53,"option",35),f(54,"Stocks"),c(),u(55,"option",36),f(56,"Futures"),c(),u(57,"option",37),f(58,"Crypto"),c(),u(59,"option",38),f(60,"Options"),c(),u(61,"option",39),f(62,"ETF"),c(),u(63,"option",40),f(64,"Other"),c()(),E(65,A2,2,0,"div",28),c(),u(66,"div",22)(67,"label",41),f(68,"Analysis Type"),c(),u(69,"select",42)(70,"option",33),f(71,"Choose analysis method"),c(),u(72,"option",43),f(73,"Technical"),c(),u(74,"option",44),f(75,"Fundamental"),c(),u(76,"option",45),f(77,"Both"),c(),u(78,"option",46),f(79,"Sentiment"),c(),u(80,"option",40),f(81,"Other"),c()(),E(82,k2,2,0,"div",28),c(),u(83,"div",22)(84,"label",47),f(85,"Trade Symbol"),c(),u(86,"div",24)(87,"span",25),_(88,"i",48),c(),_(89,"input",49),c(),E(90,N2,2,0,"div",28),c(),u(91,"div",22)(92,"label",50),f(93,"Trade Direction"),c(),u(94,"div",51),_(95,"input",52),u(96,"label",53),f(97,"Long"),c(),_(98,"input",54),u(99,"label",55),f(100,"Short"),c()(),E(101,P2,2,0,"div",28),c(),u(102,"div",22)(103,"label",56),f(104,"Time Frame"),c(),u(105,"select",57)(106,"option",33),f(107,"Select time frame"),c(),u(108,"option",58),f(109,"Scalp (minutes)"),c(),u(110,"option",59),f(111,"Day Trade (hours)"),c(),u(112,"option",60),f(113,"Swing (days-weeks)"),c(),u(114,"option",61),f(115,"Position (weeks-months)"),c(),u(116,"option",62),f(117,"Long Term (months+)"),c()(),E(118,O2,2,0,"div",28),c()()()(),u(119,"div",15)(120,"div",16)(121,"h5",17),_(122,"i",63),f(123,"Strategy Information "),c(),u(124,"span",19),f(125,"Required"),c()(),u(126,"div",20)(127,"div",21)(128,"div",22)(129,"label",64),f(130,"Strategy Name"),c(),_(131,"input",65),E(132,R2,2,0,"div",28),c(),u(133,"div",22)(134,"label",66),f(135,"Type of Order"),c(),u(136,"select",67)(137,"option",33),f(138,"Choose order type"),c(),u(139,"option",68),f(140,"Market"),c(),u(141,"option",69),f(142,"Limit"),c(),u(143,"option",70),f(144,"Stop"),c(),u(145,"option",71),f(146,"Stop Limit"),c(),u(147,"option",72),f(148,"Trailing Stop"),c()(),E(149,F2,2,0,"div",28),c(),u(150,"div",73)(151,"label",74),f(152,"Exit Strategy Used"),c(),_(153,"textarea",75),c()()()(),u(154,"div",15)(155,"div",16)(156,"h5",17),_(157,"i",76),f(158,"Trade Execution "),c(),u(159,"span",19),f(160,"Required"),c()(),u(161,"div",20)(162,"div",21)(163,"div",22)(164,"label",77),f(165,"Entry Date/Time"),c(),_(166,"input",78),E(167,L2,2,0,"div",28),c(),u(168,"div",22)(169,"label",79),f(170,"Exit Date/Time"),c(),_(171,"input",80),E(172,V2,2,0,"div",28),c(),u(173,"div",81)(174,"label",82),f(175,"Entry Price"),c(),u(176,"div",24)(177,"span",25),f(178,"$"),c(),_(179,"input",83),c(),E(180,j2,2,0,"div",28),c(),u(181,"div",81)(182,"label",84),f(183,"Exit Price"),c(),u(184,"div",24)(185,"span",25),f(186,"$"),c(),_(187,"input",85),c(),E(188,U2,2,0,"div",28),c(),u(189,"div",81)(190,"label",86),f(191,"Position Size"),c(),u(192,"div",24),_(193,"input",87),c(),E(194,B2,2,0,"div",28),c()()()(),u(195,"div",15)(196,"div",16)(197,"h5",17),_(198,"i",88),f(199,"Trade Outcome "),c(),u(200,"span",19),f(201,"Required"),c()(),u(202,"div",20)(203,"div",21)(204,"div",22)(205,"label",89),f(206,"Trade Result"),c(),u(207,"div",90),_(208,"input",91),u(209,"label",92),f(210,"Win"),c(),_(211,"input",93),u(212,"label",94),f(213,"Loss"),c(),_(214,"input",95),u(215,"label",96),f(216,"Breakeven"),c()(),E(217,$2,2,0,"div",28),c(),u(218,"div",22)(219,"label",97),f(220,"Profit/Loss Amount"),c(),u(221,"div",24)(222,"span",25),f(223,"$"),c(),_(224,"input",98),u(225,"button",99),S("click",function(){return r.calculateProfitLoss()}),f(226," Calculate "),c()()()()()(),u(227,"div",15)(228,"div",16)(229,"h5",17),_(230,"i",100),f(231,"Post-Trade Analysis "),c(),u(232,"span",19),f(233,"Required"),c()(),u(234,"div",20)(235,"div",21)(236,"div",22)(237,"label",101),f(238,"Emotional State After Trade"),c(),u(239,"select",102)(240,"option",33),f(241,"How do you feel now?"),c(),u(242,"option",103),f(243,"Satisfied"),c(),u(244,"option",104),f(245,"Excited"),c(),u(246,"option",105),f(247,"Relieved"),c(),u(248,"option",106),f(249,"Disappointed"),c(),u(250,"option",107),f(251,"Frustrated"),c(),u(252,"option",108),f(253,"Neutral"),c(),u(254,"option",109),f(255,"Angry"),c(),u(256,"option",40),f(257,"Other"),c()()(),u(258,"div",73)(259,"label",110),f(260,"Emotional Impact on Decisions"),c(),_(261,"textarea",111),c(),u(262,"div",73)(263,"label",112),f(264,"What Went Well"),c(),_(265,"textarea",113),c(),u(266,"div",73)(267,"label",114),f(268,"Areas for Improvement"),c(),_(269,"textarea",115),c(),u(270,"div",22)(271,"label",116),f(272,"Trade Status"),c(),u(273,"div",117),_(274,"input",118),u(275,"label",119),f(276,"This position is still open"),c()()()()()(),u(277,"div",15)(278,"div",16)(279,"h5",17),_(280,"i",120),f(281,"Additional Notes "),c(),u(282,"span",121),f(283,"Optional"),c()(),u(284,"div",20)(285,"div",21)(286,"div",73)(287,"label",122),f(288,"Notes"),c(),_(289,"textarea",123),c()()()(),E(290,Q2,10,5,"div",124),u(291,"div",125),E(292,K2,3,0,"button",126),u(293,"div")(294,"button",127),_(295,"i",128),f(296),c()()(),E(297,Z2,3,1,"div",129)(298,Y2,3,1,"div",130),c()()),e&2){let i,o,s,a,l,d,p,m,y,v,b,C,x,A;h(14),L(r.tradeLogData?"Edit Post-Trading Journal":"Create Post-Trading Journal"),h(4),g("ngIf",!r.tradeLogData),h(),g("ngIf",!r.tradeLogData),h(),g("formGroup",r.postTradeForm),h(17),g("ngIf",((i=r.postTradeForm.get("accountname"))==null?null:i.invalid)&&(((i=r.postTradeForm.get("accountname"))==null?null:i.dirty)||((i=r.postTradeForm.get("accountname"))==null?null:i.touched)||r.formSubmitMarker)),h(28),g("ngIf",((o=r.postTradeForm.get("instrumenttype"))==null?null:o.invalid)&&(((o=r.postTradeForm.get("instrumenttype"))==null?null:o.dirty)||((o=r.postTradeForm.get("instrumenttype"))==null?null:o.touched)||r.formSubmitMarker)),h(17),g("ngIf",((s=r.postTradeForm.get("analysistype"))==null?null:s.invalid)&&(((s=r.postTradeForm.get("analysistype"))==null?null:s.dirty)||((s=r.postTradeForm.get("analysistype"))==null?null:s.touched)||r.formSubmitMarker)),h(8),g("ngIf",((a=r.postTradeForm.get("tradesymbol"))==null?null:a.invalid)&&(((a=r.postTradeForm.get("tradesymbol"))==null?null:a.dirty)||((a=r.postTradeForm.get("tradesymbol"))==null?null:a.touched)||r.formSubmitMarker)),h(11),g("ngIf",((l=r.postTradeForm.get("tradetype"))==null?null:l.invalid)&&(((l=r.postTradeForm.get("tradetype"))==null?null:l.dirty)||((l=r.postTradeForm.get("tradetype"))==null?null:l.touched)||r.formSubmitMarker)),h(17),g("ngIf",((d=r.postTradeForm.get("timeframe"))==null?null:d.invalid)&&(((d=r.postTradeForm.get("timeframe"))==null?null:d.dirty)||((d=r.postTradeForm.get("timeframe"))==null?null:d.touched)||r.formSubmitMarker)),h(14),g("ngIf",((p=r.postTradeForm.get("strategyname"))==null?null:p.invalid)&&(((p=r.postTradeForm.get("strategyname"))==null?null:p.dirty)||((p=r.postTradeForm.get("strategyname"))==null?null:p.touched)||r.formSubmitMarker)),h(17),g("ngIf",((m=r.postTradeForm.get("typeoforder"))==null?null:m.invalid)&&(((m=r.postTradeForm.get("typeoforder"))==null?null:m.dirty)||((m=r.postTradeForm.get("typeoforder"))==null?null:m.touched)||r.formSubmitMarker)),h(18),g("ngIf",((y=r.postTradeForm.get("entrydatetime"))==null?null:y.invalid)&&(((y=r.postTradeForm.get("entrydatetime"))==null?null:y.dirty)||((y=r.postTradeForm.get("entrydatetime"))==null?null:y.touched)||r.formSubmitMarker)),h(5),g("ngIf",((v=r.postTradeForm.get("exitdatetime"))==null?null:v.invalid)&&(((v=r.postTradeForm.get("exitdatetime"))==null?null:v.dirty)||((v=r.postTradeForm.get("exitdatetime"))==null?null:v.touched)||r.formSubmitMarker)),h(8),g("ngIf",((b=r.postTradeForm.get("entryprice"))==null?null:b.invalid)&&(((b=r.postTradeForm.get("entryprice"))==null?null:b.dirty)||((b=r.postTradeForm.get("entryprice"))==null?null:b.touched)||r.formSubmitMarker)),h(8),g("ngIf",((C=r.postTradeForm.get("exitprice"))==null?null:C.invalid)&&(((C=r.postTradeForm.get("exitprice"))==null?null:C.dirty)||((C=r.postTradeForm.get("exitprice"))==null?null:C.touched)||r.formSubmitMarker)),h(6),g("ngIf",((x=r.postTradeForm.get("positionsize"))==null?null:x.invalid)&&(((x=r.postTradeForm.get("positionsize"))==null?null:x.dirty)||((x=r.postTradeForm.get("positionsize"))==null?null:x.touched)||r.formSubmitMarker)),h(23),g("ngIf",((A=r.postTradeForm.get("tradeoutcome"))==null?null:A.invalid)&&(((A=r.postTradeForm.get("tradeoutcome"))==null?null:A.dirty)||((A=r.postTradeForm.get("tradeoutcome"))==null?null:A.touched)||r.formSubmitMarker)),h(73),g("ngIf",r.formSubmitMarker&&r.postTradeForm.invalid),h(2),g("ngIf",r.tradeLogData),h(4),O("",r.tradeLogData?"Update":"Submit"," "),h(),g("ngIf",r.message),h(),g("ngIf",r.errorMessage)}},dependencies:[B,K,Ce,Qt,Zt,Yt,oe,qn,Hr,Kt,Gn,pe,Oe,ml,Ne,Ve,Xe],styles:[".card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 5px #0000000d;border:1px solid rgba(0,0,0,.1);color:#000}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid rgba(0,0,0,.1);padding:12px 16px}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border-radius:6px;padding:10px 12px;background-color:#f9f9f9;border:1px solid #ced4da}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{background-color:#fff;border-color:#80bdff;box-shadow:0 0 0 .25rem #0d6efd40}textarea.form-control[_ngcontent-%COMP%]{resize:vertical}.btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:500}.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545}"]})};var J2=(n,t,e)=>({"open-trade":n,"win-trade":t,"loss-trade":e}),X2=(n,t,e)=>({"status-open":n,"status-win":t,"status-loss":e}),eL=(n,t,e)=>({"bi-clock-history":n,"bi-check-circle":t,"bi-x-circle":e}),tL=(n,t,e)=>({"text-success":n,"text-danger":t,"text-secondary":e});function nL(n,t){n&1&&(u(0,"div",12),f(1,"Loading trade logs..."),c())}function rL(n,t){if(n&1&&(u(0,"div",13),f(1),c()),n&2){let e=w();h(),L(e.errorMessage)}}function iL(n,t){if(n&1){let e=J();u(0,"div",16)(1,"div",17),S("click",function(){let i=T(e).$implicit,o=w(2);return M(o.openEditModal(i))}),u(2,"div",18),_(3,"i",19),f(4),c(),u(5,"div",20),S("click",function(i){let o=T(e).$implicit,s=w(2);return M(s.onDeleteTradeLog(o,i))}),_(6,"i",21),c(),u(7,"div",22)(8,"h4",23),f(9),c(),u(10,"h5",24),f(11),c(),u(12,"div",25)(13,"div",26)(14,"div",27)(15,"strong"),f(16,"Strategy:"),c(),f(17),c(),u(18,"div",27)(19,"strong"),f(20,"Analysis:"),c(),f(21),c()(),u(22,"div",26)(23,"div",27)(24,"strong"),f(25,"Entry:"),c(),f(26),c(),u(27,"div",27)(28,"strong"),f(29,"Exit:"),c(),f(30),c()(),u(31,"div",26)(32,"div",27)(33,"strong"),f(34,"Date:"),c(),f(35),Re(36,"date"),c(),u(37,"div",27)(38,"strong"),f(39,"Account:"),c(),f(40),c()(),u(41,"div",28)(42,"div",29)(43,"strong"),f(44,"P/L:"),c(),u(45,"span",30),f(46),c()()()(),u(47,"div",31)(48,"small",32),f(49),Re(50,"date"),c()()()()()}if(n&2){let e=t.$implicit;h(),g("ngClass",zi(23,J2,e.isopen,!e.isopen&&e.tradeoutcome==="Win",!e.isopen&&e.tradeoutcome==="Loss")),h(),g("ngClass",zi(27,X2,e.isopen,!e.isopen&&e.tradeoutcome==="Win",!e.isopen&&e.tradeoutcome==="Loss")),h(),g("ngClass",zi(31,eL,e.isopen,!e.isopen&&e.tradeoutcome==="Win",!e.isopen&&e.tradeoutcome==="Loss")),h(),O(" ",e.isopen?"In Progress":e.tradeoutcome," "),h(5),L(e.tradesymbol),h(2),xm(" ",e.tradetype," | ",e.instrumenttype," | ",e.timeframe," "),h(6),O(" ",e.strategyname," "),h(4),O(" ",e.analysistype," "),h(5),O(" ",e.entryprice," "),h(4),O(" ",e.isopen?"Pending":e.exitprice," "),h(5),O(" ",Fe(36,17,e.entrydatetime,"shortDate")," "),h(5),O(" ",e.accountname," "),h(5),g("ngClass",zi(35,tL,!e.isopen&&e.tradeoutcome==="Win",!e.isopen&&e.tradeoutcome==="Loss",e.isopen)),h(),O(" ",e.isopen?"Trade in progress":e.profitlossamount," "),h(3),L(Fe(50,20,e.createdtime,"medium"))}}function oL(n,t){if(n&1&&(u(0,"div",14),E(1,iL,51,39,"div",15),c()),n&2){let e=w();h(),g("ngForOf",e.tradeLogs)}}function sL(n,t){n&1&&(u(0,"div",33),f(1," No trade logs found. "),c())}function aL(n,t){if(n&1){let e=J();u(0,"div",34),S("click",function(i){T(e);let o=w();return M(o.closeModalOnOverlayClick(i))}),u(1,"div",35),S("click",function(i){return T(e),M(i.stopPropagation())}),u(2,"app-post-trade-log",36),S("formSubmitted",function(){T(e);let i=w();return M(i.onFormSubmitted())})("cancel",function(){T(e);let i=w();return M(i.closeModal())}),c()()()}if(n&2){let e=w();h(2),g("tradeLogData",e.selectedTradeLog)}}var Ud=class n{constructor(t,e){this.supabaseTradeTableService=t;this.cdr=e}tableName="posttrade";tradeLogs=[];loading=!1;errorMessage="";showModal=!1;selectedTradeLog=null;async ngOnInit(){this.loading=!0,await this.fetchTradeLogs(),this.loading=!1,this.cdr.detectChanges()}async fetchTradeLogs(){try{this.tradeLogs=await this.supabaseTradeTableService.getTradeLogs(this.tableName),this.cdr.markForCheck()}catch(t){console.error("Error fetching trade logs",t),this.errorMessage="Error fetching trade logs."}}openEditModal(t){this.selectedTradeLog=t,this.showModal=!0}onFormSubmitted(){this.fetchTradeLogs(),this.closeModal()}closeModal(){this.showModal=!1,this.selectedTradeLog=null}closeModalOnOverlayClick(t){this.closeModal(),this.cdr.markForCheck()}async onDeleteTradeLog(t,e){e.stopPropagation();try{await this.supabaseTradeTableService.deleteTradeLog(t.tradeid,this.tableName),await this.fetchTradeLogs()}catch(r){console.error("Error deleting trade log:",r),this.errorMessage="Error deleting trade log."}}static \u0275fac=function(e){return new(e||n)(D(Mt),D(le))};static \u0275cmp=V({type:n,selectors:[["app-post-trade-table"]],decls:18,vars:5,consts:[[1,"container","mt-3"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item","text-decoration-none"],["routerLink","/home"],["aria-current","page",1,"breadcrumb-item","active"],["routerLink","/posttradelog"],["class","alert alert-info",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","row mt-5",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"alert","alert-info"],[1,"alert","alert-danger"],[1,"row","mt-5"],["class","col-md-4 col-12 mb-4",4,"ngFor","ngForOf"],[1,"col-md-4","col-12","mb-4"],[1,"card","h-100","position-relative","shadow",2,"cursor","pointer",3,"click","ngClass"],[1,"trade-status-indicator",3,"ngClass"],[1,"bi",3,"ngClass"],[1,"delete-icon",3,"click"],[1,"bi","bi-trash"],[1,"card-body"],[1,"card-title","mt-5"],[1,"card-subtitle","mb-3","text-muted","fw-bold"],[1,"card-text"],[1,"row","mb-2"],[1,"col-6"],[1,"row"],[1,"col-12"],[3,"ngClass"],[1,"mt-3"],[1,"text-muted"],[1,"alert","alert-warning"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[3,"formSubmitted","cancel","tradeLogData"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),c()(),u(6,"li",5),f(7,"Post-Trade Logs"),c(),u(8,"li",3)(9,"a",6),f(10,"Post-Trading Journal"),c()()()(),u(11,"h2"),f(12,"Post Trade Logs"),c(),E(13,nL,2,0,"div",7)(14,rL,2,1,"div",8)(15,oL,2,1,"div",9)(16,sL,2,0,"div",10),c(),E(17,aL,3,1,"div",11)),e&2&&(h(13),g("ngIf",r.loading),h(),g("ngIf",r.errorMessage),h(),g("ngIf",r.tradeLogs&&r.tradeLogs.length),h(),g("ngIf",!r.loading&&(!r.tradeLogs||r.tradeLogs.length===0)),h(),g("ngIf",r.showModal))},dependencies:[Xe,B,ft,ze,K,rr,As],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;max-width:90%;max-height:90%;overflow:auto;position:relative}.card[_ngcontent-%COMP%]{position:relative;border:none;transition:all .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0000001a!important}.delete-icon[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;display:none;color:#dc3545;background:#fffc;border-radius:50%;padding:5px;z-index:10}.card[_ngcontent-%COMP%]:hover   .delete-icon[_ngcontent-%COMP%]{display:block}.delete-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.open-trade[_ngcontent-%COMP%]{border-left:4px solid #17a2b8!important}.win-trade[_ngcontent-%COMP%]{border-left:4px solid #28a745!important}.loss-trade[_ngcontent-%COMP%]{border-left:4px solid #dc3545!important}.trade-status-indicator[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;padding:5px 10px;border-radius:12px;font-size:.8rem;font-weight:700;z-index:10;color:#fff}.status-open[_ngcontent-%COMP%]{background-color:#17a2b8}.status-win[_ngcontent-%COMP%]{background-color:#28a745}.status-loss[_ngcontent-%COMP%]{background-color:#dc3545}.trade-status-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:3px}"]})};var ks=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;async loadQuestions(){let{data:t,error:e}=await this.supabase.rpc("get_random_activequestions");if(e)throw console.error("Error loading questions: ",e),e;return t}async canLoadCheckInQuestions(){let t=this.supabaseService.user()?.id;if(!t)return console.error("User not authenticated, cannot check check-in status."),!1;let{data:e,error:r}=await this.supabase.rpc("can_checkin",{user_id:t});return r?(console.error("Error in RPC can_checkin:",r),!1):e===!0}async getEmotionCheckInResultForDate(t){let e=this.supabaseService.user()?.id;if(!e)return console.error("User not authenticated"),null;let r=new Date(t.setHours(0,0,0,0)).toISOString(),i=new Date(t.setHours(23,59,59,999)).toISOString(),{data:o,error:s}=await this.supabase.from("answers").select("analysis").eq("user_id",e).gte("created_at",r).lte("created_at",i).order("created_at",{ascending:!1}).limit(1).single();return s?s.code==="PGRST116"?(console.log(`No check-in found for date: ${t.toDateString()}`),null):(console.error("Error fetching check-in result for date:",s),null):o?o.analysis:null}async submitUserCheckIn(t){let e=this.supabaseService.user()?.id;if(!e)return{error:new Error("User not authenticated")};let{error:r}=await this.supabase.rpc("perform_checkin",{in_user_id:e,in_answers:t.answers,in_analysis:t.analysis});return{error:r}}async adminLoadQuestions(){let{data:t,error:e}=await this.supabase.from("adminquestions").select("*");if(e)throw console.error("Error loading questions: ",e),e;return t}async adminSaveQuestions(t){let e=null;for(let r of t.filter(i=>i.isModified))if(r.question_id){let{data:i,error:o}=await this.supabase.from("adminquestions").update({question_data:r.question_data,active:r.active}).eq("question_id",r.question_id).select().single();if(o){console.error("Error updating question:",o),e=o;break}else r.updated_at=i.updated_at,r.isModified=!1}else{let{data:i,error:o}=await this.supabase.from("adminquestions").insert([{question_data:r.question_data,active:r.active}]).select().single();if(o){console.error("Error inserting question:",o),e=o;break}else r.question_id=i.question_id,r.created_at=i.created_at,r.updated_at=i.updated_at,r.isModified=!1}return{error:e}}async deleteQuestion(t){let{error:e}=await this.supabase.from("adminquestions").delete().eq("question_id",t.question_id);return{error:e}}static \u0275fac=function(e){return new(e||n)(F(Ie))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var lL=(n,t)=>({"alert-success":n,"alert-danger":t});function cL(n,t){if(n&1&&(u(0,"div",18),f(1),c()),n&2){let e=w();g("ngClass",dt(2,lL,e.messageType==="success",e.messageType==="error")),h(),O(" ",e.message," ")}}function uL(n,t){if(n&1){let e=J();Dt(0),u(1,"input",27),$e("ngModelChange",function(i){T(e);let o=w().$implicit;return Ke(o.choicesInput,i)||(o.choicesInput=i),M(i)}),S("change",function(){T(e);let i=w().$implicit,o=w();return M(o.updateChoices(i))}),c(),u(2,"div",28),f(3,'e.g., "Option A, Option B, Option C"'),c(),xt()}if(n&2){let e=w().$implicit;h(),Be("ngModel",e.choicesInput)}}function dL(n,t){if(n&1){let e=J();u(0,"tr")(1,"td")(2,"select",19),$e("ngModelChange",function(i){let o=T(e).$implicit;return Ke(o.question_data.question_type,i)||(o.question_data.question_type=i),M(i)}),S("change",function(){let i=T(e).$implicit,o=w();return M(o.onQuestionChange(i))}),u(3,"option",9),f(4,"Fill"),c(),u(5,"option",10),f(6,"Multiple"),c(),u(7,"option",11),f(8,"Select One"),c()()(),u(9,"td")(10,"input",20),$e("ngModelChange",function(i){let o=T(e).$implicit;return Ke(o.question_data.question_icon,i)||(o.question_data.question_icon=i),M(i)}),S("change",function(){let i=T(e).$implicit,o=w();return M(o.onQuestionChange(i))}),c()(),u(11,"td")(12,"input",21),$e("ngModelChange",function(i){let o=T(e).$implicit;return Ke(o.question_data.question_title,i)||(o.question_data.question_title=i),M(i)}),S("change",function(){let i=T(e).$implicit,o=w();return M(o.onQuestionChange(i))}),c()(),u(13,"td")(14,"textarea",22),$e("ngModelChange",function(i){let o=T(e).$implicit;return Ke(o.question_data.question,i)||(o.question_data.question=i),M(i)}),S("change",function(){let i=T(e).$implicit,o=w();return M(o.onQuestionChange(i))}),c()(),u(15,"td"),E(16,uL,4,1,"ng-container",23),c(),u(17,"td")(18,"input",24),$e("ngModelChange",function(i){let o=T(e).$implicit;return Ke(o.question_data.placeholder,i)||(o.question_data.placeholder=i),M(i)}),S("change",function(){let i=T(e).$implicit,o=w();return M(o.onQuestionChange(i))}),c()(),u(19,"td")(20,"div",25)(21,"input",26),$e("ngModelChange",function(i){let o=T(e).$implicit;return Ke(o.active,i)||(o.active=i),M(i)}),S("change",function(){let i=T(e).$implicit,o=w();return M(o.onQuestionChange(i))}),c()()(),u(22,"td"),f(23),Re(24,"date"),c()()}if(n&2){let e=t.$implicit;h(2),Be("ngModel",e.question_data.question_type),h(8),Be("ngModel",e.question_data.question_icon),h(2),Be("ngModel",e.question_data.question_title),h(2),Be("ngModel",e.question_data.question),h(2),g("ngIf",e.question_data.question_type!=="fill"),h(2),Be("ngModel",e.question_data.placeholder),h(3),Be("ngModel",e.active),h(2),L(Fe(24,8,e.updated_at,"short"))}}function fL(n,t){if(n&1){let e=J();u(0,"div",29)(1,"input",30),$e("ngModelChange",function(i){T(e);let o=w();return Ke(o.newQuestionChoices,i)||(o.newQuestionChoices=i),M(i)}),c()()}if(n&2){let e=w();h(),Be("ngModel",e.newQuestionChoices)}}var Bd=class n{constructor(t,e){this.cdr=t;this.supabaseService=e}questions=[];newQuestionText="";newQuestionType="fill";newQuestionChoices="";message="";messageType="success";async ngOnInit(){let t=await this.supabaseService.adminLoadQuestions();this.questions=t.map(e=>G(N({},e),{choicesInput:e.question_data.choices?.join(", ")||""})),this.cdr.markForCheck()}onQuestionChange(t){t.isModified=!0}updateChoices(t){let e=t.choicesInput??"";t.question_data.choices=e.split(",").map(r=>r.trim()).filter(r=>r),t.isModified=!0}addQuestion(){if(!this.newQuestionText.trim())return;let t={question_type:this.newQuestionType,question:this.newQuestionText.trim(),placeholder:this.newQuestionText.trim()};if(this.newQuestionType!=="fill"){let e=this.newQuestionChoices.split(",").map(r=>r.trim()).filter(r=>r);t.choices=e}this.questions.push({question_data:t,choicesInput:this.newQuestionChoices,active:!0,isModified:!0}),this.newQuestionText="",this.newQuestionChoices="",this.newQuestionType="fill",this.cdr.detectChanges()}async saveChanges(){let{error:t}=await this.supabaseService.adminSaveQuestions(this.questions);t?this.showMessage("Error saving questions","error"):this.showMessage("Questions saved successfully","success"),this.cdr.detectChanges()}async deleteQuestion(t){if(!t.question_id){this.questions=this.questions.filter(r=>r!==t),this.showMessage("Question removed locally","success"),this.cdr.markForCheck();return}let{error:e}=await this.supabaseService.deleteQuestion(t);e?this.showMessage("Error deleting question","error"):(this.questions=this.questions.filter(r=>r.question_id!==t.question_id),this.showMessage("Question deleted successfully","success")),this.cdr.markForCheck()}showMessage(t,e){this.message=t,this.messageType=e,this.cdr.markForCheck(),setTimeout(()=>{this.message="",this.cdr.markForCheck()},4e3)}hasChanges(){return this.questions.some(t=>t.isModified)}static \u0275fac=function(e){return new(e||n)(D(le),D(ks))};static \u0275cmp=V({type:n,selectors:[["app-admin-emotion-dashboard"]],decls:53,vars:6,consts:[[1,"container-fluid","mt-4","p-5"],["class","alert",3,"ngClass",4,"ngIf"],[1,"table","mt-5"],[4,"ngFor","ngForOf"],["href","https://fonts.google.com/icons","target","_blank"],[1,"mt-4"],[1,"row","g-3","align-items-center","mb-3"],[1,"col-md-3"],[1,"form-select",3,"ngModelChange","ngModel"],["value","fill"],["value","multiple"],["value","select-one"],[1,"col-md-5"],["type","text","placeholder","Enter question text",1,"form-control",3,"ngModelChange","ngModel"],["class","col-md-4",4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click","disabled"],[1,"alert",3,"ngClass"],[1,"form-select",3,"ngModelChange","change","ngModel"],["type","text","placeholder","Enter icon URL or name",1,"form-control",3,"ngModelChange","change","ngModel"],["type","text","placeholder","Enter question title",1,"form-control",3,"ngModelChange","change","ngModel"],["type","text",1,"form-control",3,"ngModelChange","change","ngModel"],[4,"ngIf"],["type","text","placeholder","Enter placeholder text",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"form-check","form-switch"],["type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel"],["type","text","placeholder","Comma-separated choices",1,"form-control","mb-1",3,"ngModelChange","change","ngModel"],[1,"text-muted","small"],[1,"col-md-4"],["type","text","placeholder","Comma-separated choices",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,r){e&1&&(u(0,"div",0),E(1,cL,2,5,"div",1),u(2,"h1"),f(3,"Admin Emotion Question Dashboard"),c(),u(4,"table",2)(5,"thead")(6,"tr")(7,"th"),f(8,"Type"),c(),u(9,"th"),f(10,"Question Icon"),c(),u(11,"th"),f(12,"Question Title"),c(),u(13,"th"),f(14,"Question Text"),c(),u(15,"th"),f(16,"Choices"),c(),u(17,"th"),f(18,"Placeholder"),c(),u(19,"th"),f(20,"Active"),c(),u(21,"th"),f(22,"Last Updated"),c()()(),u(23,"tbody"),E(24,dL,25,11,"tr",3),c()(),u(25,"label"),f(26,"For icons, go to this website: "),u(27,"a",4),f(28,"https://fonts.google.com/icons"),c(),f(29,". "),_(30,"br"),f(31,"Search for favourite icon. When you click your icon, you will look for the name of the icon and "),_(32,"br"),f(33," put it into the space"),c(),u(34,"h4",5),f(35,"Add New Question"),c(),u(36,"div",6)(37,"div",7)(38,"select",8),$e("ngModelChange",function(o){return Ke(r.newQuestionType,o)||(r.newQuestionType=o),o}),u(39,"option",9),f(40,"Fill"),c(),u(41,"option",10),f(42,"Multiple"),c(),u(43,"option",11),f(44,"Select One"),c()()(),u(45,"div",12)(46,"input",13),$e("ngModelChange",function(o){return Ke(r.newQuestionText,o)||(r.newQuestionText=o),o}),c()(),E(47,fL,2,1,"div",14),c(),u(48,"div",15)(49,"button",16),S("click",function(){return r.addQuestion()}),f(50,"Add Question"),c(),u(51,"button",17),S("click",function(){return r.saveChanges()}),f(52,"Save Changes"),c()()()),e&2&&(h(),g("ngIf",r.message),h(23),g("ngForOf",r.questions),h(14),Be("ngModel",r.newQuestionType),h(8),Be("ngModel",r.newQuestionText),h(),g("ngIf",r.newQuestionType!=="fill"),h(4),g("disabled",!r.hasChanges()))},dependencies:[Jt,Zt,Yt,oe,Hr,Kt,pe,vn,B,ft,ze,K,rr],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:auto}.question-row[_ngcontent-%COMP%]{position:relative}.delete-button[_ngcontent-%COMP%]{display:none;position:absolute;right:10px;top:50%;transform:translateY(-50%)}.question-row[_ngcontent-%COMP%]:hover   .delete-button[_ngcontent-%COMP%]{display:block}.alert[_ngcontent-%COMP%]{padding:10px 20px;margin-bottom:15px;border-radius:4px;text-align:center}.table[_ngcontent-%COMP%]{--bs-table-bg: transparent}"]})};var j0=(n,t)=>t.some(e=>n instanceof e),c1,u1;function pL(){return c1||(c1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hL(){return u1||(u1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var U0=new WeakMap,L0=new WeakMap,$d=new WeakMap;function mL(n){let t=new Promise((e,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{e(fo(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return $d.set(t,n),t}function gL(n){if(U0.has(n))return;let t=new Promise((e,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{e(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});U0.set(n,t)}var B0={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return U0.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return fo(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function h1(n){B0=n(B0)}function vL(n){return hL().includes(n)?function(...t){return n.apply($0(this),t),fo(this.request)}:function(...t){return fo(n.apply($0(this),t))}}function yL(n){return typeof n=="function"?vL(n):(n instanceof IDBTransaction&&gL(n),j0(n,pL())?new Proxy(n,B0):n)}function fo(n){if(n instanceof IDBRequest)return mL(n);if(L0.has(n))return L0.get(n);let t=yL(n);return t!==n&&(L0.set(n,t),$d.set(t,n)),t}var $0=n=>$d.get(n);function gl(n,t,{blocked:e,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,t),a=fo(s);return r&&s.addEventListener("upgradeneeded",l=>{r(fo(s.result),l.oldVersion,l.newVersion,fo(s.transaction),l)}),e&&s.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var _L=["get","getKey","getAll","getAllKeys","count"],bL=["put","add","delete","clear"],V0=new Map;function d1(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(V0.get(t))return V0.get(t);let e=t.replace(/FromIndex$/,""),r=t!==e,i=bL.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_L.includes(e)))return;let o=async function(s,...a){let l=this.transaction(s,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[e](...a),i&&l.done]))[0]};return V0.set(t,o),o}h1(n=>G(N({},n),{get:(t,e,r)=>d1(t,e)||n.get(t,e,r),has:(t,e)=>!!d1(t,e)||n.has(t,e)}));var wL=["continue","continuePrimaryKey","advance"],f1={},H0=new WeakMap,m1=new WeakMap,CL={get(n,t){if(!wL.includes(t))return n[t];let e=f1[t];return e||(e=f1[t]=function(...r){H0.set(this,m1.get(this)[t](...r))}),e}};async function*EL(...n){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...n)),!t)return;t=t;let e=new Proxy(t,CL);for(m1.set(e,t),$d.set(e,$0(t));t;)yield e,t=await(H0.get(e)||t.continue()),H0.delete(e)}function p1(n,t){return t===Symbol.asyncIterator&&j0(n,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&j0(n,[IDBIndex,IDBObjectStore])}h1(n=>G(N({},n),{get(t,e,r){return p1(t,e)?EL:n.get(t,e,r)},has(t,e){return p1(t,e)||n.has(t,e)}}));var Xt=class n{constructor(t,e){this.supabaseService=t;this.platformId=e;this.supabase=this.supabaseService.GetClient()}supabase;ngOnInit(){}async getUserTradeAccounts(){let t=this.supabaseService.user();if(!t)throw new Error("User not authenticated");let e="tradeaccount",r=!1,i=null;if(typeof window<"u"){r=sessionStorage.getItem(`${e}_refresh`)==="yes";let a=sessionStorage.getItem(e);if(a)try{i=JSON.parse(a)}catch(l){console.error("Error parsing cached trade accounts:",l),i=null}}if(!r&&i)return i;let{data:o,error:s}=await this.supabase.from(e).select("*").eq("user_id",t.id);if(s)throw console.error("Error fetching trade accounts:",s),s;return typeof window<"u"&&(sessionStorage.setItem(e,JSON.stringify(o)),sessionStorage.removeItem(`${e}_refresh`)),o||[]}async addTradeAccount(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let d=t,{track_pl:r,include_in_analytics:i,trading_instruments:o}=d,s=_o(d,["track_pl","include_in_analytics","trading_instruments"]),a={track_pl:r,include_in_analytics:i,trading_instruments:o},{error:l}=await this.supabase.from("tradeaccount").insert([G(N({},s),{user_id:e.id,metadata:a})]);return l?(console.error("Failed to add trade account:",l),!1):(sessionStorage.setItem("tradeaccount_refresh","yes"),!0)}async editTradeAccount(t,e){let r=this.supabaseService.user();if(!r)throw new Error("User not authenticated");let p=e,{track_pl:i,include_in_analytics:o,trading_instruments:s}=p,a=_o(p,["track_pl","include_in_analytics","trading_instruments"]),l={track_pl:i,include_in_analytics:o,trading_instruments:s},{error:d}=await this.supabase.from("tradeaccount").update(G(N({},a),{metadata:l})).eq("account_id",t).eq("user_id",r.id);return d?(console.error("Failed to update trade account:",d),!1):(sessionStorage.setItem("tradeaccount_refresh","yes"),!0)}async removeTradeAccount(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let{error:r}=await this.supabase.from("tradejournal").delete().eq("trade_account_id",t).eq("userid",e.id);if(r)return console.error("Failed to delete associated trade logs:",r),!1;let{error:i}=await this.supabase.from("tradeaccount").delete().eq("account_id",t).eq("user_id",e.id);return i?(console.error("Failed to remove trade account:",i),!1):(typeof window<"u"&&(sessionStorage.setItem("tradeaccount_refresh","yes"),sessionStorage.setItem(`tradejournal_${t}_refresh`,"yes")),!0)}async getProfile(){console.log("getting profile picture");let t=this.supabaseService.user();if(!t)throw new Error("User not authenticated");return this.supabase.from("usersaccount").select("*").eq("user_id",t.id).single()}async createProfile(t){if(!this.supabaseService.user())throw new Error("User not authenticated");return this.supabase.from("usersaccount").insert(t)}async updateProfile(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");return this.supabase.from("usersaccount").update(t).eq("user_id",e.id)}async uploadProfilePicture(t){let e=this.supabaseService.user();if(!e)throw new Error("User not authenticated");let r=t.name.split(".").pop(),i=`${e.id}/profile.${r}`;await(await gl("profile-cache",1,{upgrade(a){a.createObjectStore("pictures")}})).delete("pictures",i);let{error:s}=await this.supabase.storage.from("user-profile-pictures").upload(i,t,{upsert:!0});return s?null:i}async cacheProfilePictureBlob(t,e){await(await gl("profile-cache",1,{upgrade(i){i.createObjectStore("pictures")}})).put("pictures",e,t)}async getCachedProfilePictureBlobUrl(t){if(!t)return null;let e=await gl("profile-cache",1,{upgrade(a){a.createObjectStore("pictures")}}),r=await e.get("pictures",t);if(r)return URL.createObjectURL(r);let i=await this.getPublicUrl(t);if(!i)return null;let o=await fetch(i);if(!o.ok)return null;let s=await o.blob();return await e.put("pictures",s,t),URL.createObjectURL(s)}clearCachedProfilePictureBlobUrl(){if(Tn(this.platformId)){let t=sessionStorage.getItem("profile_picture_blob_url");t&&(URL.revokeObjectURL(t),sessionStorage.removeItem("profile_picture_blob_url"))}}async deleteProfilePicture(){let{data:{user:t}}=await this.supabase.auth.getUser();if(!t)return;let e=`${t.id}/profile.png`,r=`${t.id}/profile.jpg`,i=`${t.id}/profile.jpeg`,o=`${t.id}/profile.webp`;await this.supabase.storage.from("user-profile-pictures").remove([e,r,i,o]);let s=await gl("profile-cache",1,{upgrade(a){a.createObjectStore("pictures")}});await s.delete("pictures",e),await s.delete("pictures",r),await s.delete("pictures",i),await s.delete("pictures",o)}async getPublicUrl(t){let{data:e}=await this.supabase.storage.from("user-profile-pictures").createSignedUrl(t,60);return e?.signedUrl??null}static \u0275fac=function(e){return new(e||n)(F(Ie),F(Et))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var cr=class n{constructor(t,e,r,i){this.supabaseService=t;this.supabaseAccountService=e;this.router=r;this.document=i;this.supabase=this.supabaseService.GetClient(),this.rootDomainName="https://app.tradingrehab.io/auth/update-password"}supabase;rootDomainName;async signIn(t,e){try{let{error:r}=await this.supabase.auth.signInWithPassword({email:t,password:e});if(r)throw r;return{success:!0}}catch(r){return console.error("Sign in error:",r),{success:!1,error:r}}}async logout(t=!0){try{await this.supabase.auth.signOut()}catch(e){console.error("Sign out error:",e)}this.supabaseService.updateSignalsFromSession(null),this.supabaseAccountService.clearCachedProfilePictureBlobUrl(),Tn(this.supabaseService.platformId)&&(sessionStorage.clear(),localStorage.clear()),t&&this.router.navigate(["/"])}async signUp(t,e,r,i){let{error:o}=await this.supabase.auth.signUp({email:t,password:e,options:{data:{firstname:r,lastname:i}}});return o?{success:!1,error:o}:{success:!0}}async requestPasswordReset(t){let{error:e}=await this.supabase.auth.resetPasswordForEmail(t,{redirectTo:"https://app.tradingrehab.io/#/?returnUrl=%2Fauth%2Fupdate-password"});return e?{success:!1,error:e}:{success:!0}}async updatePassword(t){let{error:e}=await this.supabase.auth.updateUser({password:t});return e?{success:!1,error:e}:{success:!0}}static \u0275fac=function(e){return new(e||n)(F(Ie),F(Xt),F(vt),F(He))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};function SL(n,t){if(n&1&&(u(0,"div",13),f(1),c()),n&2){let e=w();h(),O(" ",e.errorMessage," ")}}function DL(n,t){n&1&&(u(0,"div",28),f(1," A valid email is required. "),c())}function xL(n,t){n&1&&(u(0,"div",28),f(1," Password must be at least 6 characters. "),c())}function IL(n,t){if(n&1){let e=J();u(0,"form",14),S("ngSubmit",function(){T(e);let i=w();return M(i.onSubmit())}),u(1,"div",15)(2,"label",16),f(3,"Email"),c(),_(4,"input",17),E(5,DL,2,0,"div",18),c(),u(6,"div",15)(7,"label",19),f(8,"Password"),c(),_(9,"input",20),E(10,xL,2,0,"div",18),u(11,"div",21)(12,"a",22),f(13,"Forgot password?"),c()()(),u(14,"div",23)(15,"button",24),f(16,"Continue"),c()(),u(17,"div",25)(18,"p",26),f(19,"Don't have an account? "),u(20,"a",27),S("click",function(){T(e);let i=w();return M(i.setActiveTab("signup"))}),f(21,"Sign up"),c()()()()}if(n&2){let e,r,i=w();g("formGroup",i.signinForm),h(5),g("ngIf",((e=i.signinForm.get("email"))==null?null:e.invalid)&&((e=i.signinForm.get("email"))==null?null:e.touched)),h(5),g("ngIf",((r=i.signinForm.get("password"))==null?null:r.invalid)&&((r=i.signinForm.get("password"))==null?null:r.touched)),h(5),g("disabled",i.signinForm.invalid)}}function TL(n,t){n&1&&(u(0,"small",43),f(1," First name is required "),c())}function ML(n,t){n&1&&(u(0,"small",43),f(1," Last name is required "),c())}function AL(n,t){n&1&&(u(0,"small",43),f(1," Valid email is required "),c())}function kL(n,t){n&1&&(u(0,"small",43),f(1," Password must be at least 6 characters "),c())}function NL(n,t){n&1&&(u(0,"small",43),f(1," Passwords do not match "),c())}function PL(n,t){if(n&1){let e=J();u(0,"form",14),S("ngSubmit",function(){T(e);let i=w();return M(i.onSignupSubmit())}),u(1,"div",29)(2,"div",30)(3,"label",31),f(4,"First Name"),c(),_(5,"input",32),E(6,TL,2,0,"small",33),c(),u(7,"div",30)(8,"label",34),f(9,"Last Name"),c(),_(10,"input",35),E(11,ML,2,0,"small",33),c()(),u(12,"div",15)(13,"label",36),f(14,"Email"),c(),_(15,"input",37),E(16,AL,2,0,"small",33),c(),u(17,"div",15)(18,"label",38),f(19,"Password"),c(),_(20,"input",39),E(21,kL,2,0,"small",33),c(),u(22,"div",15)(23,"label",40),f(24,"Confirm Password"),c(),_(25,"input",41),E(26,NL,2,0,"small",33),c(),u(27,"div",21)(28,"a",22),f(29,"Forgot password?"),c()(),u(30,"div",23)(31,"button",24),f(32,"Create Account"),c()(),u(33,"div",25)(34,"p",26),f(35,"Already have an account? "),u(36,"a",42),S("click",function(){T(e);let i=w();return M(i.setActiveTab("login"))}),f(37,"Login"),c()()()()}if(n&2){let e,r,i,o,s,a=w();g("formGroup",a.signupForm),h(6),g("ngIf",((e=a.signupForm.get("firstname"))==null?null:e.invalid)&&((e=a.signupForm.get("firstname"))==null?null:e.touched)),h(5),g("ngIf",((r=a.signupForm.get("lastname"))==null?null:r.invalid)&&((r=a.signupForm.get("lastname"))==null?null:r.touched)),h(5),g("ngIf",((i=a.signupForm.get("email"))==null?null:i.invalid)&&((i=a.signupForm.get("email"))==null?null:i.touched)),h(5),g("ngIf",((o=a.signupForm.get("password"))==null?null:o.invalid)&&((o=a.signupForm.get("password"))==null?null:o.touched)),h(5),g("ngIf",a.signupForm.hasError("mismatch")&&((s=a.signupForm.get("confirmPassword"))==null?null:s.touched)),h(5),g("disabled",a.signupForm.invalid)}}var zd=class n{constructor(t,e,r,i,o,s,a){this.fb=t;this.router=e;this.route=r;this.cdr=i;this.supabaseService=o;this.supabaseAuthService=s;this.supabaseAccountService=a;this.signinForm=this.fb.group({email:["",[R.required,R.email]],password:["",[R.required,R.minLength(6)]]}),this.signupForm=this.fb.group({firstname:["",R.required],lastname:["",R.required],email:["",[R.required,R.email]],password:["",[R.required,R.minLength(6)]],confirmPassword:["",R.required]},{validators:this.passwordMatchValidator})}activeTab="login";signinForm;signupForm;errorMessage=null;ngOnInit(){this.route.queryParams.subscribe(t=>{t.mode==="signup"&&(this.activeTab="signup")})}passwordMatchValidator(t){let e=t.get("password")?.value,r=t.get("confirmPassword")?.value;return e===r?null:{mismatch:!0}}setActiveTab(t){this.activeTab=t,this.errorMessage=null}async onSubmit(){if(this.signinForm.invalid){this.signinForm.markAllAsTouched();return}let{email:t,password:e}=this.signinForm.getRawValue();try{if(await this.supabaseAuthService.signIn(t,e),!this.supabaseService.currentUsername()){this.errorMessage="Login failed. Please try again.",this.cdr.markForCheck();return}this.signinForm.reset();let r=this.route.snapshot.queryParams.returnUrl||"/home";this.router.navigateByUrl(r),this.cdr.markForCheck()}catch(r){this.errorMessage=r.message||"An unexpected error occurred.",this.cdr.markForCheck()}}async onSignupSubmit(){if(this.signupForm.invalid){this.errorMessage="Please fill them correctly.",this.signupForm.markAllAsTouched(),this.cdr.markForCheck();return}let{email:t,password:e,firstname:r,lastname:i}=this.signupForm.getRawValue();try{let{success:o,error:s}=await this.supabaseAuthService.signUp(t,e,r,i);if(!o){this.errorMessage=s?.message||"Signup failed.",this.cdr.markForCheck();return}let a=this.supabaseService.user();if(!a){this.errorMessage="User not found after signup.",this.cdr.markForCheck();return}await this.supabaseAccountService.createProfile({user_id:a.id,firstname:r,lastname:i,email:t,phone:null,profile_picture_url:null,updated_at:new Date().toISOString(),preferences:{},metadata:{}}),this.signupForm.reset(),this.router.navigateByUrl("/home"),this.cdr.markForCheck()}catch(o){this.errorMessage=o.message||"An unexpected error occurred.",this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(D(Tt),D(vt),D(hn),D(le),D(Ie),D(cr),D(Xt))};static \u0275cmp=V({type:n,selectors:[["app-login-signup"]],decls:20,vars:7,consts:[[1,"auth-container"],[1,"auth-card"],[1,"text-center","mb-4"],[1,"logo-circle","mx-auto"],["src","/tr_logo.svg","alt","Logo",1,"img-fluid"],[1,"brand-name","mt-3"],[1,"brand-tagline"],[1,"auth-tabs","d-flex","justify-content-center","mb-4"],[1,"tabs-container"],[1,"tab",3,"click"],[1,"mx-2","tab-separator"],["class","alert alert-danger mb-3",4,"ngIf"],["class","auth-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert","alert-danger","mb-3"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"form-control"],[1,"d-flex","justify-content-end","mt-2"],["routerLink","/auth/forgot-password",1,"forgot-link"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-tr","btn-primary","btn-md",3,"disabled"],[1,"text-center","mt-4"],[1,"mb-0"],["href","javascript:void(0)",1,"signup-link",3,"click"],[1,"text-danger","small","mt-1"],[1,"row"],[1,"col-md-6","mb-3"],["for","firstname",1,"form-label"],["type","text","id","firstname","formControlName","firstname","placeholder","First name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","lastname",1,"form-label"],["type","text","id","lastname","formControlName","lastname","placeholder","Last name",1,"form-control"],["for","signup-email",1,"form-label"],["type","email","id","signup-email","formControlName","email","placeholder","Enter your email",1,"form-control"],["for","signup-password",1,"form-label"],["type","password","id","signup-password","formControlName","password","placeholder","Create a password",1,"form-control"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password",1,"form-control"],["href","javascript:void(0)",1,"login-link",3,"click"],[1,"text-danger"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),_(4,"img",4),c(),u(5,"h2",5),f(6,"TRADING REHAB"),c(),u(7,"p",6),f(8,"Where Disciplined Trading Begins"),c()(),u(9,"div",7)(10,"div",8)(11,"span",9),S("click",function(){return r.setActiveTab("login")}),f(12,"Login"),c(),u(13,"span",10),f(14,"\u2022"),c(),u(15,"span",9),S("click",function(){return r.setActiveTab("signup")}),f(16,"Sign Up"),c()()(),E(17,SL,2,1,"div",11)(18,IL,22,4,"form",12)(19,PL,38,7,"form",12),c()()),e&2&&(h(11),Ee("active",r.activeTab==="login"),h(4),Ee("active",r.activeTab==="signup"),h(2),g("ngIf",r.errorMessage),h(),g("ngIf",r.activeTab==="login"),h(),g("ngIf",r.activeTab==="signup"))},dependencies:[B,K,Ce,Qt,oe,pe,Oe,Ne,Ve,Xe],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100dvh;display:flex;align-items:center;justify-content:center}.auth-card[_ngcontent-%COMP%]{background-color:transparent;border-radius:12px;width:100%;max-width:450px;padding:30px}.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:transparent;position:relative;display:flex;align-items:center;justify-content:center;margin:0 auto}.dots-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;position:relative;background-image:radial-gradient(circle,#5046e5 3px,transparent 3px);background-size:15px 15px;transform:rotate(45deg)}.brand-name[_ngcontent-%COMP%]{font-weight:700;font-size:24px;margin-bottom:5px;letter-spacing:.5px}.brand-tagline[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.tabs-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-bottom:1px solid #eee;padding-bottom:5px}.tab[_ngcontent-%COMP%]{padding:8px 15px;cursor:pointer;color:#888;font-weight:500;font-size:16px;transition:color .2s}.tab.active[_ngcontent-%COMP%]{color:#5046e5;border-bottom:2px solid #5046e5}.tab-separator[_ngcontent-%COMP%]{color:#ccc}.auth-form[_ngcontent-%COMP%]{margin-top:10px}.form-control[_ngcontent-%COMP%]{height:auto;padding:12px 15px;border-radius:8px;border:1px solid #ddd;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{border-color:#5046e5;box-shadow:0 0 0 .2rem #5046e526}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555;margin-bottom:8px}.forgot-link[_ngcontent-%COMP%]{font-size:14px;color:#5046e5;text-decoration:none}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{color:#5046e5;font-weight:500;text-decoration:none}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-primary[_ngcontent-%COMP%]{background-color:#5046e5;border-color:#5046e5;padding:12px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus{background-color:#4238d0;border-color:#4238d0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#a8a4e0;border-color:#a8a4e0}.separator[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;color:#888;font-size:14px}.separator[_ngcontent-%COMP%]:before, .separator[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #ddd}.separator[_ngcontent-%COMP%]:before{margin-right:1em}.separator[_ngcontent-%COMP%]:after{margin-left:1em}.google-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;border:1px solid #ddd;color:#333;padding:12px;font-weight:500}.google-btn[_ngcontent-%COMP%]:hover{background-color:#f8f8f8;color:#333}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{padding:20px 15px}.brand-name[_ngcontent-%COMP%]{font-size:20px}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{padding:10px}}']})};var qd=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-welcome-message"]],decls:5,vars:0,consts:[[1,"text-center","p-3","bg-light","rounded-3","shadow-sm","mb-4"],[1,"fs-2","fw-bold","text-dark"],[1,"text-secondary","mb-0"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"h1",1),f(2,"Welcome to Your Meditation Hub!"),c(),u(3,"p",2),f(4,"Find your calm, track your journey."),c()())},encapsulation:2})};var OL=(n,t)=>({"btn-danger":n,"btn-success":t}),Gd=class n{meditationDuration=xe(10);timeLeft=xe(10*60);isRunning=!1;timerInterval;timerCompleted=new ne;ngOnInit(){this.resetTimer()}ngOnDestroy(){this.clearTimerInterval()}formatTime(){let t=this.timeLeft(),e=Math.floor(t/60),r=t%60;return`${e.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}onDurationChange(t){this.meditationDuration.set(t),this.resetTimer()}toggleTimer(){this.isRunning=!this.isRunning,this.isRunning?this.startTimer():this.clearTimerInterval()}resetTimer(){this.isRunning=!1,this.clearTimerInterval(),this.timeLeft.set(this.meditationDuration()*60)}startTimer(){this.clearTimerInterval(),this.timerInterval=setInterval(()=>{this.timeLeft.update(t=>t-1),this.timeLeft()<=0&&(this.resetTimer(),this.timerCompleted.emit())},1e3)}clearTimerInterval(){this.timerInterval&&clearInterval(this.timerInterval)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-meditation-timer"]],outputs:{timerCompleted:"timerCompleted"},decls:22,vars:10,consts:[[1,"card","p-4","rounded-3","h-100","d-flex","flex-column","text-center"],[1,"fs-3","fw-bold","text-dark","mb-4"],[1,"display-4","fw-light","text-success","mb-4","p-3","bg-light","rounded-3","shadow-inset","mx-auto",2,"min-width","180px"],[1,"mb-4","w-100"],["for","duration",1,"form-label","text-dark","fs-6","fw-semibold","mb-2"],["type","range","id","duration","min","1","max","60",1,"form-range",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-center","gap-3"],[1,"btn","btn-lg","rounded-pill","text-white","fw-bold","shadow-sm","d-flex","align-items-center",3,"click","ngClass"],[1,"ms-2"],[1,"btn","btn-lg","btn-secondary","rounded-pill","text-white","fw-bold","shadow-sm","d-flex","align-items-center",3,"click"],[1,"mt-3","text-secondary","mb-0"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"h2",1),f(2,"Meditation Timer"),c(),u(3,"div",2),f(4),c(),u(5,"div",3)(6,"label",4),f(7),c(),u(8,"input",5),S("ngModelChange",function(o){return r.onDurationChange(o)}),c()(),u(9,"div",6)(10,"button",7),S("click",function(){return r.toggleTimer()}),u(11,"mat-icon"),f(12),c(),u(13,"span",8),f(14),c()(),u(15,"button",9),S("click",function(){return r.resetTimer()}),u(16,"mat-icon"),f(17,"restart_alt"),c(),u(18,"span",8),f(19,"Reset"),c()()(),u(20,"p",10),f(21),c()()),e&2&&(h(4),O(" ",r.formatTime()," "),h(3),O(" Duration (",r.meditationDuration()," min): "),h(),g("ngModel",r.meditationDuration()),h(2),g("ngClass",dt(7,OL,r.isRunning,!r.isRunning)),h(2),L(r.isRunning?"pause":"play_arrow"),h(2),L(r.isRunning?"Pause":"Start"),h(7),O(" ",r.isRunning?"Focus on your breath...":"Ready to begin?"," "))},dependencies:[B,ft,Jt,oe,A0,pe,vn,An],styles:[".shadow-inset[_ngcontent-%COMP%]{box-shadow:inset 0 2px 4px #0000000f}"]})};function RL(n,t){if(n&1){let e=J();u(0,"div",4)(1,"div",5),S("click",function(){let i=T(e).$implicit,o=w();return M(o.selectMedia(i))}),u(2,"img",6),S("error",function(i){let o=T(e).$implicit,s=w();return M(s.onImageError(i,o.type))}),c(),u(3,"div",7)(4,"h3",8),f(5),c(),u(6,"p",9),f(7),c()()()()}if(n&2){let e=t.$implicit;h(2),g("src",e.thumbnail,Dn)("alt",e.title),h(3),L(e.title),h(2),L(e.type)}}var Wd=class n{mediaLibrary=[];mediaSelected=new ne;selectMedia(t){this.mediaSelected.emit(t)}onImageError(t,e){let r=t.target;r.src=`https://placehold.co/300x180/E0F2F1/004D40?text=${e==="video"?"Video":"Audio"}`}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-media-catalog"]],inputs:{mediaLibrary:"mediaLibrary"},outputs:{mediaSelected:"mediaSelected"},decls:5,vars:1,consts:[[1,"card","bg-white","bg-opacity-90","p-4","rounded-3","shadow-sm","h-100","d-flex","flex-column"],[1,"fs-3","fw-bold","text-dark","mb-4","text-center"],[1,"row","row-cols-1","row-cols-sm-2","g-3","overflow-auto","flex-grow-1","pe-2"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"card","bg-light","bg-opacity-75","rounded-3","shadow-sm","overflow-hidden","cursor-pointer","hover-shadow-lg",3,"click"],[1,"card-img-top","object-fit-cover",2,"height","120px",3,"error","src","alt"],[1,"card-body","p-3"],[1,"card-title","fs-6","fw-semibold","text-dark","text-truncate","mb-1"],[1,"card-text","text-secondary","text-capitalize","small","mb-0"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"h2",1),f(2,"Video & Audio Catalog"),c(),u(3,"div",2),E(4,RL,8,4,"div",3),c()()),e&2&&(h(4),g("ngForOf",r.mediaLibrary))},dependencies:[B,ze],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.hover-shadow-lg[_ngcontent-%COMP%]:hover{box-shadow:0 .5rem 1rem #00000026!important;transition:box-shadow .2s}"]})};function FL(n,t){if(n&1){let e=J();u(0,"div",3)(1,"h3",4),f(2),c(),u(3,"div",5),_(4,"iframe",6),c(),u(5,"div",7)(6,"button",8),S("click",function(){T(e);let i=w();return M(i.stop())}),u(7,"mat-icon"),f(8,"stop"),c(),u(9,"span",9),f(10,"Stop Playing"),c()()()()}if(n&2){let e=w();h(2),O("Now Playing: ",e.media.title,""),h(2),g("src",e.safeUrl,tm)("title",e.media.title)}}function LL(n,t){n&1&&(u(0,"p",10),f(1,"Select a video or audio from the catalog to play."),c())}var Qd=class n{constructor(t){this.sanitizer=t}_media=null;safeUrl=null;set media(t){this._media=t,this.safeUrl=t?this.sanitizer.bypassSecurityTrustResourceUrl(t.url):null}get media(){return this._media}playbackStopped=new ne;stop(){this.playbackStopped.emit()}static \u0275fac=function(e){return new(e||n)(D(Sa))};static \u0275cmp=V({type:n,selectors:[["app-media-player"]],inputs:{media:"media"},outputs:{playbackStopped:"playbackStopped"},decls:4,vars:2,consts:[["noMediaSelected",""],[1,"card","bg-white","bg-opacity-90","p-4","rounded-3","shadow-sm","min-h-150px","d-flex","align-items-center","justify-content-center"],["class","w-100 h-100",4,"ngIf","ngIfElse"],[1,"w-100","h-100"],[1,"fs-4","fw-semibold","text-dark","mb-3","text-center"],[1,"ratio","ratio-16x9","rounded-3","overflow-hidden","mb-3"],["frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src","title"],[1,"text-center"],[1,"btn","btn-danger","rounded-pill","d-inline-flex","align-items-center",3,"click"],[1,"ms-2"],[1,"text-secondary","fs-5"]],template:function(e,r){if(e&1&&(u(0,"div",1),E(1,FL,11,3,"div",2)(2,LL,2,0,"ng-template",null,0,Zo),c()),e&2){let i=nr(3);h(),g("ngIf",r.media)("ngIfElse",i)}},dependencies:[B,K,An],styles:[".min-h-150px[_ngcontent-%COMP%]{min-height:250px}"],changeDetection:0})};var Kd=class n{entrySaved=new ne;journalEntry="";save(){let t=this.journalEntry.trim();t&&(this.entrySaved.emit(t),this.journalEntry="")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-journal-writer"]],outputs:{entrySaved:"entrySaved"},decls:9,vars:1,consts:[[1,"card","bg-white","bg-opacity-90","p-4","rounded-3","shadow-sm","h-100","d-flex","flex-column"],[1,"fs-3","fw-bold","text-dark","mb-4","text-center"],["placeholder","Write about your meditation experience...","rows","5",1,"form-control","p-3","rounded-3","border","border-secondary","flex-grow-1","mb-3",3,"ngModelChange","ngModel"],[1,"btn","btn-success","rounded-pill","fw-bold","shadow-sm","d-inline-flex","align-items-center","justify-content-center",3,"click"],[1,"ms-2"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"h2",1),f(2,"Meditation Journal"),c(),u(3,"textarea",2),$e("ngModelChange",function(o){return Ke(r.journalEntry,o)||(r.journalEntry=o),o}),c(),u(4,"button",3),S("click",function(){return r.save()}),u(5,"mat-icon"),f(6,"save"),c(),u(7,"span",4),f(8,"Save Entry"),c()()()),e&2&&(h(3),Be("ngModel",r.journalEntry))},dependencies:[B,Jt,oe,pe,vn,An],encapsulation:2})};function VL(n,t){if(n&1&&(u(0,"div",6)(1,"p",7),f(2),c(),u(3,"p",8),f(4),c()()),n&2){let e=t.$implicit;h(2),L(e.date),h(2),L(e.content)}}function jL(n,t){if(n&1&&(u(0,"div",4),E(1,VL,5,2,"div",5),c()),n&2){let e=w();h(),g("ngForOf",e.entries)}}function UL(n,t){n&1&&(u(0,"div",9)(1,"p"),f(2,"No journal entries yet."),c()())}var Zd=class n{entries=[];static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-journal-history"]],inputs:{entries:"entries"},decls:6,vars:2,consts:[["noEntries",""],[1,"card","bg-white","bg-opacity-90","p-4","rounded-3","shadow-sm","h-100","d-flex","flex-column"],[1,"fs-3","fw-bold","text-dark","mb-4","text-center"],["class","overflow-auto flex-grow-1 pe-2",4,"ngIf","ngIfElse"],[1,"overflow-auto","flex-grow-1","pe-2"],["class","card bg-light bg-opacity-75 p-3 rounded shadow-sm mb-3",4,"ngFor","ngForOf"],[1,"card","bg-light","bg-opacity-75","p-3","rounded","shadow-sm","mb-3"],[1,"text-secondary","small","mb-1"],[1,"text-dark","small","mb-0",2,"white-space","pre-wrap"],[1,"text-secondary","text-center","flex-grow-1","d-flex","align-items-center","justify-content-center","mb-0"]],template:function(e,r){if(e&1&&(u(0,"div",1)(1,"h2",2),f(2,"Journal History"),c(),E(3,jL,2,1,"div",3)(4,UL,3,0,"ng-template",null,0,Zo),c()),e&2){let i=nr(5);h(3),g("ngIf",r.entries.length>0)("ngIfElse",i)}},dependencies:[B,ze,K],encapsulation:2,changeDetection:0})};var g1=(n,t)=>({"btn-success":n,"btn-light":t});function BL(n,t){if(n&1){let e=J();u(0,"div",16)(1,"label",17),f(2,"Choose a color:"),c(),u(3,"input",18),$e("ngModelChange",function(i){T(e);let o=w(2);return Ke(o.color,i)||(o.color=i),M(i)}),S("change",function(){T(e);let i=w(2);return M(i.updateBackground())}),c()()}if(n&2){let e=w(2);h(3),Be("ngModel",e.color)}}function $L(n,t){if(n&1&&(u(0,"div",23),_(1,"img",24),c()),n&2){let e=w(3);h(),g("src",e.image,Dn)}}function HL(n,t){if(n&1){let e=J();u(0,"div",16)(1,"input",19,0),S("change",function(i){T(e);let o=w(2);return M(o.handleImageUpload(i))}),c(),u(3,"button",20),S("click",function(){T(e);let i=nr(2);return M(i.click())}),u(4,"mat-icon"),f(5,"upload"),c(),u(6,"span",21),f(7,"Select Image"),c()(),E(8,$L,2,1,"div",22),c()}if(n&2){let e=w(2);h(8),g("ngIf",e.image)}}function zL(n,t){if(n&1){let e=J();u(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"button",8),S("click",function(){T(e);let i=w();return M(i.showModal=!1)}),c()(),u(5,"div",9)(6,"h2",10),f(7,"Customize Background"),c(),u(8,"div",11)(9,"button",12),S("click",function(){T(e);let i=w();return M(i.backgroundType="color")}),f(10,"Solid Color"),c(),u(11,"button",12),S("click",function(){T(e);let i=w();return M(i.backgroundType="image")}),f(12,"Image"),c()(),E(13,BL,4,1,"div",13)(14,HL,9,1,"div",13),u(15,"div",14)(16,"button",15),S("click",function(){T(e);let i=w();return M(i.showModal=!1)}),f(17,"Done"),c()()()()()()}if(n&2){let e=w();h(9),g("ngClass",dt(4,g1,e.backgroundType==="color",e.backgroundType!=="color")),h(2),g("ngClass",dt(7,g1,e.backgroundType==="image",e.backgroundType!=="image")),h(2),g("ngIf",e.backgroundType==="color"),h(),g("ngIf",e.backgroundType==="image")}}function qL(n,t){n&1&&_(0,"div",25)}var Yd=class n{backgroundChanged=new ne;showModal=!1;backgroundType="color";color="#ffffff";image=null;handleImageUpload(t){let e=t.target;if(e.files?.[0]){let r=new FileReader;r.onload=()=>{this.image=r.result,this.backgroundType="image",this.updateBackground()},r.readAsDataURL(e.files[0])}}updateBackground(){let t=this.backgroundType==="color"?{"background-color":this.color}:{"background-image":`url(${this.image})`,"background-size":"cover","background-position":"center"};this.backgroundChanged.emit(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-settings"]],outputs:{backgroundChanged:"backgroundChanged"},decls:5,vars:2,consts:[["fileInput",""],["title","Customize Background",1,"btn","btn-lg","bg-light","rounded-circle","shadow-lg","hover-rotate-45","d-flex","align-items-center","justify-content-center",2,"width","58px","height","58px",3,"click"],["class","modal d-block","tabindex","-1",4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],["tabindex","-1",1,"modal","d-block"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-3","shadow-lg"],[1,"modal-header","border-0","pb-0"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","p-4","pt-0","text-center"],[1,"fs-2","fw-bold","text-dark","mb-4"],[1,"d-flex","justify-content-center","gap-3","mb-4"],[1,"btn","rounded-pill","fw-semibold",3,"click","ngClass"],["class","text-center",4,"ngIf"],[1,"mt-4","text-center"],[1,"btn","btn-success","rounded-pill","fw-bold",3,"click"],[1,"text-center"],["for","colorPicker",1,"form-label","fs-5","fw-semibold","mb-3"],["type","color","id","colorPicker",1,"form-control","form-control-color","mx-auto",2,"width","96px","height","96px",3,"ngModelChange","change","ngModel"],["type","file","accept","image/*",1,"d-none",3,"change"],[1,"btn","btn-primary","rounded-pill","fw-bold","d-inline-flex","align-items-center",3,"click"],[1,"ms-2"],["class","mt-4",4,"ngIf"],[1,"mt-4"],["alt","Preview",1,"img-fluid","rounded-3","shadow-sm","mx-auto",2,"max-height","192px","object-fit","cover",3,"src"],[1,"modal-backdrop","fade","show"]],template:function(e,r){e&1&&(u(0,"button",1),S("click",function(){return r.showModal=!0}),u(1,"mat-icon"),f(2,"settings"),c()(),E(3,zL,18,10,"div",2)(4,qL,1,0,"div",3)),e&2&&(h(3),g("ngIf",r.showModal),h(),g("ngIf",r.showModal))},dependencies:[B,ft,K,Jt,oe,pe,vn,An],styles:[".modal.d-block[_ngcontent-%COMP%]{display:block}.hover-rotate-45[_ngcontent-%COMP%]:hover{transform:rotate(45deg);transition:transform .3s ease-in-out}"]})};function GL(n,t){if(n&1&&(u(0,"div",13),f(1),c()),n&2){let e=w();h(),O(" ",e.message," ")}}var Jd=class n{selectedMedia=null;savedEntries=[];backgroundStyle={"background-color":"#f8f9fa"};message="";mediaLibrary=[{id:1,type:"video",title:"Calm Forest Walk",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Forest+Walk",url:"https://www.youtube.com/embed/dQw4w9WgXcQ"},{id:2,type:"audio",title:"Ocean Waves",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Ocean+Waves",url:"https://www.youtube.com/embed/V-_O7nl0Ii0"},{id:3,type:"video",title:"Zen Garden",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Zen+Garden",url:"https://www.youtube.com/embed/z63o1jJ4h_4"},{id:4,type:"audio",title:"Gentle Rain",thumbnail:"https://placehold.co/300x180/E0F2F1/004D40?text=Gentle+Rain",url:"https://www.youtube.com/embed/q76bMs-mupk"}];onMediaSelected(t){this.selectedMedia=t,this.setMessage(`Now playing: ${t.title}`)}onPlaybackStopped(){this.selectedMedia=null}onMeditationComplete(){this.setMessage("Meditation complete! \u{1F64F}")}onJournalEntrySaved(t){let e={id:Date.now(),date:new Date().toLocaleString(),content:t};this.savedEntries=[e,...this.savedEntries],this.setMessage("Journal entry saved!")}onBackgroundChanged(t){this.backgroundStyle=t,this.setMessage("Background updated!")}setMessage(t){this.message=t,setTimeout(()=>{this.message=""},3e3)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-meditation-hub"]],decls:18,vars:5,consts:[[1,"d-flex","flex-column","align-items-center","justify-content-center","p-3","font-inter","min-vh-100",3,"ngStyle"],["class","position-absolute top-0 mt-5 bg-white bg-opacity-90 text-dark px-4 py-2 rounded shadow-lg z-index-1000 animate-fade-in-down",4,"ngIf"],[1,"p-4","w-100"],[1,"row","g-4"],[1,"col-12"],[1,"col-12","col-lg-6"],[3,"timerCompleted"],[3,"mediaSelected","mediaLibrary"],[3,"playbackStopped","media"],[3,"entrySaved"],[3,"entries"],[1,"col-12","text-center","py-3"],[3,"backgroundChanged"],[1,"position-absolute","top-0","mt-5","bg-white","bg-opacity-90","text-dark","px-4","py-2","rounded","shadow-lg","z-index-1000","animate-fade-in-down"]],template:function(e,r){e&1&&(u(0,"div",0),E(1,GL,2,1,"div",1),u(2,"div",2)(3,"div",3)(4,"div",4),_(5,"app-welcome-message"),c(),u(6,"section",5)(7,"app-meditation-timer",6),S("timerCompleted",function(){return r.onMeditationComplete()}),c()(),u(8,"section",5)(9,"app-media-catalog",7),S("mediaSelected",function(o){return r.onMediaSelected(o)}),c()(),u(10,"section",4)(11,"app-media-player",8),S("playbackStopped",function(){return r.onPlaybackStopped()}),c()(),u(12,"section",5)(13,"app-journal-writer",9),S("entrySaved",function(o){return r.onJournalEntrySaved(o)}),c()(),u(14,"section",5),_(15,"app-journal-history",10),c(),u(16,"div",11)(17,"app-settings",12),S("backgroundChanged",function(o){return r.onBackgroundChanged(o)}),c()()()()()),e&2&&(g("ngStyle",r.backgroundStyle),h(),g("ngIf",r.message),h(8),g("mediaLibrary",r.mediaLibrary),h(2),g("media",r.selectedMedia),h(4),g("entries",r.savedEntries))},dependencies:[B,K,lC,qd,Gd,Wd,Qd,Kd,Zd,Yd],styles:["[_nghost-%COMP%]{--animate-duration: .5s}.font-inter[_ngcontent-%COMP%]{font-family:Inter,sans-serif}.z-index-1000[_ngcontent-%COMP%]{z-index:1000}.animate-fade-in-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInDown var(--animate-duration) ease-out forwards}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"]})};function WL(n,t){if(n&1&&(u(0,"div",1)(1,"div",2)(2,"h5",3),_(3,"i",4),f(4,"Planned Trade "),c(),u(5,"span",5),f(6,"Required"),c()(),u(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),f(11,"Direction"),c(),u(12,"div",10),_(13,"input",11),u(14,"label",12),f(15,"Long"),c(),_(16,"input",13),u(17,"label",14),f(18,"Short"),c()()(),u(19,"div",8)(20,"label",9),f(21,"Entry Price"),c(),_(22,"input",15),c(),u(23,"div",8)(24,"label",9),f(25,"Lot Size"),c(),_(26,"input",16),c(),u(27,"div",8)(28,"label",9),f(29,"Stop Loss"),c(),_(30,"input",17),c(),u(31,"div",8)(32,"label",9),f(33,"Take Profit"),c(),_(34,"input",18),c()()()()),n&2){let e=w();h(7),g("formGroup",e.formGroup)}}var Xd=class n{formGroup;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-planned-trade"]],inputs:{formGroup:"formGroup"},decls:1,vars:1,consts:[["class","card mb-4 shadow-sm",4,"ngIf"],[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","me-2"],[1,"badge","bg-primary"],[1,"card-body",3,"formGroup"],[1,"row","g-3"],[1,"col-md-2"],[1,"form-label"],["role","group",1,"btn-group","w-100"],["type","radio","id","planned_long","value","Long","formControlName","trade_direction",1,"btn-check"],["for","planned_long",1,"btn","btn-outline-success"],["type","radio","id","planned_short","value","Short","formControlName","trade_direction",1,"btn-check"],["for","planned_short",1,"btn","btn-outline-danger"],["type","number","step","0.00001","formControlName","entry_price",1,"form-control"],["type","number","step","0.01","formControlName","lot_size",1,"form-control"],["type","number","step","0.00001","formControlName","stop_loss_price",1,"form-control"],["type","number","step","0.00001","formControlName","take_profit_price",1,"form-control"]],template:function(e,r){e&1&&E(0,WL,35,1,"div",0),e&2&&g("ngIf",r.formGroup)},dependencies:[B,K,Ce,oe,qn,Gn,pe,Oe,Ne,Ve],encapsulation:2})};function QL(n,t){if(n&1&&(u(0,"div",1)(1,"div",2)(2,"h5",3),_(3,"i",4),f(4,"Executing Trade "),c(),u(5,"span",5),f(6,"Required"),c()(),u(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),f(11,"Direction"),c(),u(12,"div",10),_(13,"input",11),u(14,"label",12),f(15,"Long"),c(),_(16,"input",13),u(17,"label",14),f(18,"Short"),c()()(),u(19,"div",8)(20,"label",9),f(21,"Entry Price"),c(),_(22,"input",15),c(),u(23,"div",8)(24,"label",9),f(25,"Lot Size"),c(),_(26,"input",16),c(),u(27,"div",8)(28,"label",9),f(29,"Stop Loss"),c(),_(30,"input",17),c(),u(31,"div",8)(32,"label",9),f(33,"Take Profit"),c(),_(34,"input",18),c(),u(35,"div",8)(36,"label",9),f(37,"Exit Price"),c(),_(38,"input",19),c(),u(39,"div",20)(40,"label",9),f(41,"Entry Time"),c(),_(42,"input",21),c(),u(43,"div",20)(44,"label",9),f(45,"Exit Time"),c(),_(46,"input",22),c(),u(47,"div",20)(48,"label",9),f(49,"Exit Type"),c(),u(50,"select",23)(51,"option",24),f(52,"Select exit type"),c(),u(53,"option",25),f(54,"Target"),c(),u(55,"option",26),f(56,"Stop Loss"),c(),u(57,"option",27),f(58,"Manual"),c()()()()()()),n&2){let e=w();h(7),g("formGroup",e.formGroup)}}var ef=class n{formGroup;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-executing-trade"]],inputs:{formGroup:"formGroup"},decls:1,vars:1,consts:[["class","card mb-4 shadow-sm",4,"ngIf"],[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","me-2"],[1,"badge","bg-primary"],[1,"card-body",3,"formGroup"],[1,"row","g-3"],[1,"col-md-2"],[1,"form-label"],["role","group",1,"btn-group","w-100"],["type","radio","id","exec_long","value","Long","formControlName","trade_direction",1,"btn-check"],["for","exec_long",1,"btn","btn-outline-success"],["type","radio","id","exec_short","value","Short","formControlName","trade_direction",1,"btn-check"],["for","exec_short",1,"btn","btn-outline-danger"],["type","number","formControlName","entry_price",1,"form-control"],["type","number","formControlName","lot_size",1,"form-control"],["type","number","formControlName","stop_loss_price",1,"form-control"],["type","number","formControlName","take_profit_price",1,"form-control"],["type","number","formControlName","exit_price",1,"form-control"],[1,"col-md-4"],["type","datetime-local","formControlName","entry_time",1,"form-control"],["type","datetime-local","formControlName","exit_time",1,"form-control"],["formControlName","exit",1,"form-select"],["value","","disabled",""],["value","Target"],["value","StopLoss"],["value","Manual"]],template:function(e,r){e&1&&E(0,QL,59,1,"div",0),e&2&&g("ngIf",r.formGroup)},dependencies:[B,K,Ce,Zt,Yt,oe,qn,Kt,Gn,pe,Oe,Ne,Ve],encapsulation:2})};function KL(n,t){if(n&1&&(u(0,"option",32),f(1),c()),n&2){let e=t.$implicit;g("value",e),h(),L(e)}}function ZL(n,t){if(n&1&&(Dt(0),_(1,"app-planned-trade",33),xt()),n&2){let e=w();h(),g("formGroup",e.plannedTradeGroup)}}function YL(n,t){if(n&1&&(Dt(0),_(1,"app-executing-trade",33),xt()),n&2){let e=w();h(),g("formGroup",e.executingTradeGroup)}}var tf=class n{formGroup;tradeStatus;plannedTradeGroup;executingTradeGroup;currencyPairs=["EUR/USD","USD/JPY","GBP/USD","USD/CHF","AUD/USD","USD/CAD","NZD/USD","EUR/GBP","EUR/JPY","GBP/JPY","AUD/JPY","CAD/JPY","CHF/JPY","EUR/AUD","EUR/CAD","EUR/CHF","GBP/AUD","GBP/CAD","GBP/CHF","AUD/CAD","AUD/CHF","AUD/NZD","CAD/CHF","NZD/CAD","NZD/CHF","NZD/JPY","XAUUSD","XAGUSD","USOIL","UKOIL","NATGAS","COPPER","PLATINUM","PALLADIUM","WHEAT","CORN","SOYBEANS","SUGAR","COFFEE","COCOA","COTTON","NQ","M-NQ","ES","M-ES"];static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-trade-setup"]],inputs:{formGroup:"formGroup",tradeStatus:"tradeStatus",plannedTradeGroup:"plannedTradeGroup",executingTradeGroup:"executingTradeGroup"},decls:58,vars:4,consts:[[1,"card","mb-4","shadow-sm",3,"formGroup"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-1-circle","me-2"],[1,"badge","bg-primary"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-6"],["for","trade_symbol",1,"form-label"],["id","trade_symbol","formControlName","trade_symbol",1,"form-select"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","trade_analysis",1,"form-label"],["id","trade_analysis","formControlName","trade_analysis",1,"form-select"],["value","Technical"],["value","Fundamental"],["value","Both"],["value","Sentiment"],["value","Other"],["for","trade_instrument",1,"form-label"],["type","text","id","trade_instrument","formControlName","trade_instrument",1,"form-control"],["for","type_of_order",1,"form-label"],["id","type_of_order","formControlName","type_of_order",1,"form-select"],["value","Market"],["value","Limit"],["value","Stop"],["value","StopLimit"],["value","TrailingStop"],[1,"col-12"],["for","market_condition",1,"form-label"],["id","market_condition","rows","3","formControlName","market_condition","placeholder","Describe current market conditions and relevant factors",1,"form-control"],[4,"ngIf"],[3,"value"],[3,"formGroup"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"h5",2),_(3,"i",3),f(4,"Trade Setup "),c(),u(5,"span",4),f(6,"Required"),c()(),u(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8),f(11,"Currency Pair/Commodities"),c(),u(12,"select",9)(13,"option",10),f(14,"Select..."),c(),E(15,KL,2,2,"option",11),c()(),u(16,"div",7)(17,"label",12),f(18,"Trade Analysis"),c(),u(19,"select",13)(20,"option",10),f(21,"Choose analysis method"),c(),u(22,"option",14),f(23,"Technical"),c(),u(24,"option",15),f(25,"Fundamental"),c(),u(26,"option",16),f(27,"Both"),c(),u(28,"option",17),f(29,"Sentiment"),c(),u(30,"option",18),f(31,"Other"),c()()(),u(32,"div",7)(33,"label",19),f(34,"Trade Instrument"),c(),_(35,"input",20),c(),u(36,"div",7)(37,"label",21),f(38,"Type of Order"),c(),u(39,"select",22)(40,"option",10),f(41,"Choose order type"),c(),u(42,"option",23),f(43,"Market"),c(),u(44,"option",24),f(45,"Limit"),c(),u(46,"option",25),f(47,"Stop"),c(),u(48,"option",26),f(49,"Stop Limit"),c(),u(50,"option",27),f(51,"Trailing Stop"),c()()(),u(52,"div",28)(53,"label",29),f(54,"Market Condition"),c(),_(55,"textarea",30),c(),E(56,ZL,2,1,"ng-container",31)(57,YL,2,1,"ng-container",31),c()()()),e&2&&(g("formGroup",r.formGroup),h(15),g("ngForOf",r.currencyPairs),h(41),g("ngIf",r.tradeStatus==="Planned"),h(),g("ngIf",r.tradeStatus!=="Planned"))},dependencies:[B,ze,K,Ce,Zt,Yt,oe,Kt,pe,Oe,Ne,Ve,Xd,ef],encapsulation:2})};var nf=class n{control;disabled=!1;getIcon(t){switch(t){case"Planned":return"bi bi-hourglass";case"Executing":return"bi bi-play-fill";case"Completed":return"bi bi-check-circle";default:return"bi bi-question-circle"}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-trade-status-selector"]],inputs:{control:"control",disabled:"disabled"},decls:4,vars:2,consts:[["role","group","aria-label","Trade status display",1,"btn-group","w-100","shadow-sm","mb-3"],[1,"btn","btn-tr","w-100"],[1,"me-1",3,"ngClass"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1),_(2,"i",2),f(3),c()()),e&2&&(h(2),g("ngClass",r.getIcon(r.control==null?null:r.control.value)),h(),O(" ",r.control==null?null:r.control.value," "))},dependencies:[B,ft,Ce],encapsulation:2})};var rf=class n{formGroup;get entryWordCount(){let t=this.formGroup?.get("entry_criteria")?.value||"";return t.trim().length===0?0:t.trim().split(/\s+/).length}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-trade-strategy"]],inputs:{formGroup:"formGroup"},decls:26,vars:2,consts:[[1,"card","mb-4","shadow-sm",3,"formGroup"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-2-circle","me-2"],[1,"badge","bg-primary"],[1,"card-body","col-12"],["for","strategy_name",1,"form-label"],["type","text","id","strategy_name","formControlName","strategy_name","placeholder","e.g., Breakout, Reversal, Trend Following",1,"form-control"],[1,"card-body"],[1,"mb-4"],["for","entry_criteria",1,"form-label","fw-bold"],[1,"text-danger"],["id","entry_criteria","rows","5","formControlName","entry_criteria","placeholder","Explain in detail why you are taking this trade. Include your technical analysis, fundamental reasoning, market conditions, setup confirmation, etc.",1,"form-control"],[1,"form-text","text-muted"],["for","exit_criteria",1,"form-label","fw-bold"],["id","exit_criteria","rows","3","formControlName","exit_criteria","placeholder","Explain your plan to exit the trade. What would make you close the position? Include specific targets, stop-loss thresholds, trailing exits, or indicator-based signals.",1,"form-control"],[1,"form-text"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"h5",2),_(3,"i",3),f(4,"Trade Strategy "),c(),u(5,"span",4),f(6,"Required"),c()(),u(7,"div",5)(8,"label",6),f(9,"Strategy Name"),c(),_(10,"input",7),c(),u(11,"div",8)(12,"div",9)(13,"label",10),f(14,"Entry Criteria (Why are you taking this trade?) "),u(15,"span",11),f(16,"*"),c()(),_(17,"textarea",12),u(18,"div",13),f(19),c()(),u(20,"div")(21,"label",14),f(22,"Exit Criteria"),c(),_(23,"textarea",15),u(24,"div",16),f(25," Include both profit-taking and loss-cutting criteria. "),c()()()()),e&2&&(g("formGroup",r.formGroup),h(19),O(" Minimum 100 words recommended. Current: ",r.entryWordCount," words "))},dependencies:[B,Ce,oe,pe,Oe,Ne,Ve],encapsulation:2})};var JL=()=>[1,2,3,4,5];function XL(n,t){if(n&1&&(u(0,"option",20),f(1),c()),n&2){let e=t.$implicit;g("value",e),h(),L(e)}}function eV(n,t){if(n&1&&(u(0,"option",20),f(1),c()),n&2){let e=t.$implicit;g("value",e),h(),L(e)}}function tV(n,t){if(n&1&&(u(0,"div",8)(1,"label",9),f(2,"Potential Bias"),c(),u(3,"select",21)(4,"option",11),f(5,"Select potential bias"),c(),E(6,eV,2,2,"option",12),c()()),n&2){let e=w(2);h(6),g("ngForOf",e.biases)}}function nV(n,t){if(n&1&&(Dt(0),_(1,"input",22),u(2,"label",23),f(3),c(),xt()),n&2){let e=t.$implicit;h(),g("id","confidence_"+e)("value",e),h(),g("for","confidence_"+e),h(),L(e)}}function rV(n,t){if(n&1&&(u(0,"div",1)(1,"div",2)(2,"h5",3),_(3,"i",4),f(4),c(),u(5,"span",5),f(6,"Required"),c()(),u(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),f(11,"Emotional State"),c(),u(12,"select",10)(13,"option",11),f(14,"How are you feeling?"),c(),E(15,XL,2,2,"option",12),c()(),E(16,tV,7,1,"div",13),u(17,"div",14)(18,"label",9),f(19,"Trade Confidence"),c(),u(20,"div",15),E(21,nV,4,4,"ng-container",16),c(),u(22,"div",17),f(23,"Low (1) to High (5)"),c()(),u(24,"div",18)(25,"label",9),f(26,"Reflection"),c(),_(27,"textarea",19),c()()()()),n&2){let e=w();h(4),O("",e.label," Emotional Analysis "),h(3),g("formGroup",e.formGroup),h(8),g("ngForOf",e.emotionalStates),h(),g("ngIf",e.showBias),h(5),g("ngForOf",mu(5,JL))}}var of=class n{formGroup;label="Pre-Trade";showBias=!1;emotionalStates=["Calm","Excited","Anxious","Frustrated","Overconfident","Fearful","Neutral","Other","Satisfied","Disappointed"];biases=["None - Clear Mindset","FOMO (Fear of Missing Out)","Recency Bias (Overweighting Recent Events)","Confirmation Bias O","Anchoring Bias","Loss Aversion O","Overconfidence","Revenge Trading"];static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-emotional-analysis"]],inputs:{formGroup:"formGroup",label:"label",showBias:"showBias"},decls:1,vars:1,consts:[["class","card mb-4 shadow-sm",4,"ngIf"],[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-3-circle","me-2"],[1,"badge","bg-primary"],[1,"card-body",3,"formGroup"],[1,"row","g-3"],[1,"col-md-6"],[1,"form-label"],["formControlName","emotional_state",1,"form-select"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","col-md-6",4,"ngIf"],[1,"col-md-12"],["role","group",1,"btn-group","w-100"],[4,"ngFor","ngForOf"],[1,"form-text","text-center"],[1,"col-12"],["rows","2","formControlName","reflection",1,"form-control"],[3,"value"],["formControlName","potential_bisa",1,"form-select"],["type","radio","formControlName","trade_confidence",1,"btn-check",3,"id","value"],[1,"btn","btn-outline-primary",3,"for"]],template:function(e,r){e&1&&E(0,rV,28,6,"div",0),e&2&&g("ngIf",r.formGroup)},dependencies:[B,ze,K,Ce,Zt,Yt,oe,Kt,Gn,pe,Oe,Ne,Ve],encapsulation:2})};var sf=class n{data;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-profit-analysis"]],inputs:{data:"data"},decls:36,vars:12,consts:[[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-4-circle","me-2"],[1,"badge","bg-primary"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-4"],[1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"form-control","bg-light"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"h5",2),_(3,"i",3),f(4,"Profit Analysis "),c(),u(5,"span",4),f(6,"Required"),c()(),u(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8),f(11,"Realized Profit"),c(),u(12,"div",9)(13,"span",10),f(14,"$"),c(),u(15,"span",11),f(16),Re(17,"number"),c()()(),u(18,"div",7)(19,"label",8),f(20,"Unrealized Profit"),c(),u(21,"div",9)(22,"span",10),f(23,"$"),c(),u(24,"span",11),f(25),Re(26,"number"),c()()(),u(27,"div",7)(28,"label",8),f(29,"Total Profit"),c(),u(30,"div",9)(31,"span",10),f(32,"$"),c(),u(33,"span",11),f(34),Re(35,"number"),c()()()()()()),e&2&&(h(16),O(" ",r.data!=null&&r.data.missing?"Data missing":Fe(17,3,r.data==null?null:r.data.realized,"1.2-2")," "),h(9),O(" ",r.data!=null&&r.data.missing?"Data missing":Fe(26,6,r.data==null?null:r.data.unrealized,"1.2-2")," "),h(9),O(" ",r.data!=null&&r.data.missing?"Data missing":Fe(35,9,r.data==null?null:r.data.total,"1.2-2")," "))},dependencies:[B,es],encapsulation:2})};var af=class n{control;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-notes"]],inputs:{control:"control"},decls:10,vars:1,consts:[[1,"card","mb-4","shadow-sm"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-4-circle","me-2"],[1,"badge","bg-secondary"],[1,"p-3"],["rows","3","placeholder","Any additional information or context for this trade",1,"form-control",3,"formControl"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"div",1)(2,"h5",2),_(3,"i",3),f(4,"Additional Notes "),c(),u(5,"span",4),f(6,"Optional"),c()(),u(7,"div",5)(8,"textarea",6),f(9,"        "),c()()()),e&2&&(h(8),g("formControl",r.control))},dependencies:[B,Ce,oe,pe,N0],encapsulation:2})};var lf=class n{calculateRewardRiskRatio(t,e,r){let i=Math.abs(t-e),o=Math.abs(r-t);return i>0?o/i:0}calculateRiskDollar(t,e,r,i=10){return Math.abs(t-e)*i*r}calculateRiskPercent(t,e){return e>0?t/e*100:0}calculateProfit(t,e,r,i,o=10){return(i==="Long"?e-t:t-e)*o*r}aggregateProfit(t){if(!t?.length)return{realized:0,unrealized:0,total:0,missing:!0};let e=0,r=0;for(let i of t){let{entry_price:o,exit_price:s,lot_size:a,trade_direction:l,exit:d}=i,p=this.calculateProfit(o,s,a,l);d?e+=p:r+=p}return{realized:e,unrealized:r,total:e+r,missing:!1}}getPipDifference(t,e){return Math.round(Math.abs(e-t)*1e4)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ps=class n{supabaseFunctionClient;constructor(){this.supabaseFunctionClient=new so(Cs.FUNC_URL,Cs.anon_key,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})}async callEdgeFunction(t,e){let{data:r,error:i}=await this.supabaseFunctionClient.functions.invoke(t,{body:e});return{data:r,error:i}}static \u0275fac=function(e){return new(e||n)};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};function iV(n,t){if(n&1&&(u(0,"div",19),f(1),c()),n&2){let e=w();h(),O("Selected File: ",e.fileName,"")}}function oV(n,t){if(n&1&&(u(0,"div",20),_(1,"img",21),c()),n&2){let e=w();h(),g("src",e.imagePreviewUrl,Dn)}}function sV(n,t){if(n&1&&(u(0,"div",22),_(1,"i",23),f(2),c()),n&2){let e=w();h(2),O("",e.errorMessage," ")}}function aV(n,t){n&1&&(u(0,"span"),_(1,"i",24),f(2,"Extract Trade Data "),c())}function lV(n,t){n&1&&(u(0,"span"),_(1,"span",25),f(2," Extracting... "),c())}var cf=class n{constructor(t,e){this.supabase=t;this.cdr=e}file=null;fileName="";isLoading=!1;errorMessage=null;imagePreviewUrl=null;MAX_FILE_SIZE_BYTES=10*1024*1024;ALLOWED_FILE_TYPES=["image/png","image/jpeg"];extractTradeData=new ne;onFileSelected(t){this.errorMessage=null,this.file=null,this.fileName="",this.imagePreviewUrl=null;let e=t.target;if(!e.files||e.files.length===0)return;let r=e.files[0];if(!this.ALLOWED_FILE_TYPES.includes(r.type)){this.errorMessage="Invalid file type. Please upload a PNG or JPEG image.",e.value="";return}if(r.size>this.MAX_FILE_SIZE_BYTES){this.errorMessage=`File is too large. Maximum size is ${this.MAX_FILE_SIZE_BYTES/1024/1024}MB.`,e.value="";return}this.file=r,this.fileName=this.file.name;let i=new FileReader;i.onload=()=>{this.imagePreviewUrl=i.result},i.readAsDataURL(r),this.cdr.markForCheck()}async extractTextFromImage(){if(!this.file){this.errorMessage="Please select a file first.";return}this.isLoading=!0,this.errorMessage=null;try{let{base64:t,mimeType:e}=await this.convertToBase64(this.file),{data:r,error:i}=await this.supabase.callEdgeFunction("trade-chart-extract-gemini",{imageData:t,mimeType:e});if(i){this.errorMessage="Failed to extract data from the image. Please try again.";return}this.extractTradeData.emit(JSON.parse(r))}catch{this.errorMessage="An unexpected error occurred while processing the image.",this.cdr.markForCheck()}finally{this.isLoading=!1,this.cdr.markForCheck()}}convertToBase64(t){return new Promise((e,r)=>{let i=new FileReader;i.readAsDataURL(t),i.onload=()=>{let s=i.result.split(",");if(s.length!==2){r(new Error("Invalid Base64 string format"));return}let a=s[1],l=t.type;e({base64:a,mimeType:l})},i.onerror=o=>r(o)})}static \u0275fac=function(e){return new(e||n)(D(Ps),D(le))};static \u0275cmp=V({type:n,selectors:[["app-chart-upload"]],outputs:{extractTradeData:"extractTradeData"},decls:24,vars:8,consts:[["fileInput",""],[1,"card","mb-4","shadow-sm","border-primary"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"bi","bi-image","me-2"],[1,"card-body"],[1,"mb-3","text-muted"],[1,"border","rounded","border-dashed","p-4","text-center","bg-light"],["type","file","accept","image/png, image/jpeg","hidden","",3,"change","disabled"],[1,"mb-2"],[1,"bi","bi-cloud-upload","display-4","text-primary"],[1,"btn","btn-outline-primary",3,"click","disabled"],[1,"text-muted","mt-2"],["class","mt-3 fw-bold",4,"ngIf"],["class","mt-3",4,"ngIf"],["class","alert alert-danger mt-3","role","alert",4,"ngIf"],[1,"text-end","mt-3"],[1,"btn","btn-success",3,"click","disabled"],[4,"ngIf"],[1,"mt-3","fw-bold"],[1,"mt-3"],["alt","Image Preview",1,"img-fluid","rounded","shadow-sm",2,"max-height","700px",3,"src"],["role","alert",1,"alert","alert-danger","mt-3"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"bi","bi-magic","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,r){if(e&1){let i=J();u(0,"div",1)(1,"div",2)(2,"h5",3),_(3,"i",4),f(4,"Chart Image Analysis "),c()(),u(5,"div",5)(6,"div",6),f(7," Upload your analyzed chart image and let AI automatically fill your trade fields "),c(),u(8,"div",7)(9,"input",8,0),S("change",function(s){return T(i),M(r.onFileSelected(s))}),c(),u(11,"div",9),_(12,"i",10),c(),u(13,"button",11),S("click",function(){T(i);let s=nr(10);return M(s.click())}),f(14," Upload Chart Image "),c(),u(15,"div",12),f(16,"Support for PNG, JPG, JPEG files up to 10MB"),c(),E(17,iV,2,1,"div",13)(18,oV,2,1,"div",14),c(),E(19,sV,3,1,"div",15),u(20,"div",16)(21,"button",17),S("click",function(){return T(i),M(r.extractTextFromImage())}),E(22,aV,3,0,"span",18)(23,lV,3,0,"span",18),c()()()()}e&2&&(h(9),g("disabled",r.isLoading),h(4),g("disabled",r.isLoading),h(4),g("ngIf",r.fileName),h(),g("ngIf",r.imagePreviewUrl),h(),g("ngIf",r.errorMessage),h(2),g("disabled",!r.file||r.isLoading),h(),g("ngIf",!r.isLoading),h(),g("ngIf",r.isLoading))},dependencies:[B,K,Jt],encapsulation:2})};function cV(n,t){if(n&1&&(u(0,"div",1)(1,"div",2)(2,"h5",3),_(3,"i",4),f(4,"Risk Management "),c()(),u(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),f(9,"Risk % per Trade"),c(),u(10,"div",9),f(11),c()(),u(12,"div",7)(13,"div",8),f(14,"Risk $ per Trade"),c(),u(15,"div",9),f(16),c()(),u(17,"div",7)(18,"div",8),f(19,"Reward:Risk Ratio"),c(),u(20,"div",9),f(21),c()()(),u(22,"div",10),f(23,"Auto-calculated based on your inputs. Not stored to the database."),c()()()),n&2){let e=w();h(11),O("",e.riskPercent.toFixed(2),"%"),h(5),O("$",e.riskDollar.toFixed(2),""),h(5),L(e.rrRatio)}}var uf=class n{entryPrice=0;stopLoss=0;takeProfit=0;lotSize=.01;metrics;get riskDollar(){return Math.abs(this.entryPrice-this.stopLoss)*this.lotSize*1e5}get riskPercent(){return this.entryPrice?Math.abs((this.entryPrice-this.stopLoss)/this.entryPrice)*100:0}get rrRatio(){let t=Math.abs(this.entryPrice-this.stopLoss),e=Math.abs(this.takeProfit-this.entryPrice);return t?`${(e/t).toFixed(2)}:1`:"0:1"}get hasAllInputs(){return this.entryPrice!==0&&this.stopLoss!==0&&this.takeProfit!==0&&this.lotSize!==0}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=V({type:n,selectors:[["app-risk-summary"]],inputs:{entryPrice:"entryPrice",stopLoss:"stopLoss",takeProfit:"takeProfit",lotSize:"lotSize",metrics:"metrics"},decls:1,vars:1,consts:[["class","card shadow-sm mb-4",4,"ngIf"],[1,"card","shadow-sm","mb-4"],[1,"card-header","bg-danger","bg-opacity-10","border-danger"],[1,"mb-0","text-danger"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"card-body"],[1,"row","text-center"],[1,"col-md-4"],[1,"fw-bold","text-muted"],[1,"fs-5"],[1,"text-muted","small","mt-2"]],template:function(e,r){e&1&&E(0,cV,24,3,"div",0),e&2&&g("ngIf",r.hasAllInputs)},dependencies:[B,K],encapsulation:2})};function uV(n,t){if(n&1&&_(0,"app-profit-analysis",14),n&2){let e=w();g("data",e.aggregatedProfitData())}}function dV(n,t){if(n&1&&_(0,"app-emotional-analysis",15),n&2){let e=w();g("formGroup",e.emotionBeforeGroup)("showBias",!0)}}function fV(n,t){if(n&1&&_(0,"app-emotional-analysis",16),n&2){let e=w();g("formGroup",e.emotionAfterGroup)}}var Os=class n{constructor(t,e,r){this.supabase=t;this.supabaseTradeService=e;this.cdr=r;Jo(()=>{this.tradeData&&(this.tradeForm().patchValue(G(N({},this.tradeData),{tradeid:this.tradeData.tradeid,planned_trade:this.tradeData.planned_trade?.[0]||{},executing_trade:this.tradeData.executing_trades?.[0]||{}})),this.mode==="complete"&&this.tradeForm().patchValue({trade_status:"Completed"}))})}fb=I(Tt);tradeFormService=I(lf);mode="create";tradeData=null;tradeAccountId=null;formSubmitted=new ne;cancel=new ne;tradeForm=xe(this.createForm());tradeStatus=cn(()=>this.tradeForm().get("trade_status")?.value);aggregatedProfitData=cn(()=>{let t=this.tradeForm().get("executing_trade")?.value;return this.tradeFormService.aggregateProfit([t])});riskMetrics=cn(()=>this.calculateRiskMetrics(this.tradeForm().get("planned_trade")?.value));createForm(){return this.fb.group({tradeid:[""],userid:[""],trade_status:["Planned",R.required],trade_symbol:["",R.required],trade_analysis:["",[R.minLength(1)]],trade_instrument:["",R.required],type_of_order:["",R.required],market_condition:["",R.required],strategy_name:["",R.required],entry_criteria:["",[R.minLength(1)]],exit_criteria:["",[R.minLength(1)]],planned_trade:this.fb.group({trade_direction:["Long"],entry_price:[0],lot_size:[.01],stop_loss_price:[0],take_profit_price:[0]}),executing_trade:this.fb.group({trade_direction:["Long"],entry_price:[0],lot_size:[.01],stop_loss_price:[0],take_profit_price:[0],exit_price:[0],entry_time:[""],exit_time:[""],exit:[""]}),emotion_before:this.fb.group({emotional_state:[""],potential_bisa:[""],trade_confidence:[""],reflection:[""]}),emotion_after:this.fb.group({emotional_state:[""],trade_confidence:[""],reflection:[""]}),notes:[""]})}async onSubmit(){if(this.tradeForm().valid){let t=this.tradeForm(),e=t.get("tradeid")?.value;if(this.mode==="create")(!e||typeof e!="string"||e.trim()==="")&&(e=co(),t.patchValue({tradeid:e}));else if(!e||typeof e!="string"||e.trim()===""){console.error("Missing tradeid for edit/complete mode!");return}let r=this.supabase.user()?.id;t.patchValue({trade_account_id:this.tradeAccountId,updated_time:new Date().toISOString()});let i={tradeid:e,userid:r,trade_account_id:this.tradeAccountId,trade_symbol:t.get("trade_symbol")?.value,trade_analysis:t.get("trade_analysis")?.value,trade_instrument:t.get("trade_instrument")?.value,type_of_order:t.get("type_of_order")?.value,market_condition:t.get("market_condition")?.value,trade_status:t.get("trade_status")?.value,strategy_name:t.get("strategy_name")?.value,entry_criteria:t.get("entry_criteria")?.value,exit_criteria:t.get("exit_criteria")?.value,planned_trade:[t.get("planned_trade")?.value],executing_trades:[t.get("executing_trade")?.value],planned_profit:null,realized_profit:null,unrealized_profit:null,emotion_before:t.get("emotion_before")?.value,emotion_after:t.get("emotion_after")?.value,notes:t.get("notes")?.value,updated_time:new Date().toISOString()};try{this.mode==="create"?(console.log(i),await this.supabaseTradeService.addTradeLogOfSelectedAccount(i,"tradejournal",this.tradeAccountId)):["edit","complete"].includes(this.mode)&&await this.supabaseTradeService.updateTradeLogOfSelectedAccount(i,"tradejournal",this.tradeAccountId),this.formSubmitted.emit(),this.cdr.markForCheck()}catch(o){console.error("Error submitting trade:",o)}}else{let t=this.tradeForm();this.logInvalidControls(t),console.log("Invalid form")}}logInvalidControls(t,e=""){Object.keys(t.controls).forEach(r=>{let i=t.get(r),o=e?`${e}.${r}`:r;i instanceof xs?this.logInvalidControls(i,o):i&&i.invalid&&console.warn(`Invalid control: ${o}`,i.errors)})}onCancel(){this.cancel.emit()}calculateRiskMetrics(t){let e=t?.entry_price||0,r=t?.stop_loss_price||0,i=t?.lot_size||0,o=Math.abs(e-r),s=o*i,a=e?o/e*100:0;return{riskPerLot:o,totalRisk:s,riskPercent:+a.toFixed(2)}}get tradeStatusControl(){return this.tradeForm().get("trade_status")}get notesControl(){return this.tradeForm().get("notes")}get emotionBeforeGroup(){return this.tradeForm().get("emotion_before")}get emotionAfterGroup(){return this.tradeForm().get("emotion_after")}get plannedTradeGroup(){return this.tradeForm().get("planned_trade")}get executingTradeGroup(){return this.tradeForm().get("executing_trade")}applyExtractedChartData(t){let e={};t.trade_status&&(e.trade_status=t.trade_status),t.trade_symbol&&(e.trade_symbol=t.trade_symbol),t.symbol&&!t.trade_symbol&&(e.trade_symbol=t.symbol),t.trade_analysis&&(e.trade_analysis=t.trade_analysis),t.trade_instrument&&(e.trade_instrument=t.trade_instrument),t.type_of_order&&(e.type_of_order=t.type_of_order),t.market_condition&&(e.market_condition=t.market_condition),t.strategy_name&&(e.strategy_name=t.strategy_name),t.entry_criteria&&(e.entry_criteria=t.entry_criteria),t.exit_criteria&&(e.exit_criteria=t.exit_criteria),t.planned_trade&&(e.planned_trade=t.planned_trade),t.executing_trade&&(e.executing_trade=t.executing_trade),t.emotion_before&&(e.emotion_before=t.emotion_before),t.emotion_after&&(e.emotion_after=t.emotion_after),t.notes&&(e.notes=t.notes),this.tradeForm().patchValue(e)}static \u0275fac=function(e){return new(e||n)(D(Ie),D(Mt),D(le))};static \u0275cmp=V({type:n,selectors:[["app-individual-trade"]],inputs:{mode:"mode",tradeData:"tradeData",tradeAccountId:"tradeAccountId"},outputs:{formSubmitted:"formSubmitted",cancel:"cancel"},decls:17,vars:13,consts:[[1,"container-fluid"],[1,"mb-4"],[3,"control","disabled"],[3,"extractTradeData"],[3,"formGroup","tradeStatus","plannedTradeGroup","executingTradeGroup"],[3,"formGroup"],[3,"metrics"],[3,"data",4,"ngIf"],["label","Pre-Trade",3,"formGroup","showBias",4,"ngIf"],["label","Post-Trade",3,"formGroup",4,"ngIf"],[3,"control"],[1,"d-flex","justify-content-end","mt-4","border-top","pt-3"],["type","button",1,"btn","btn-primary","me-2",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[3,"data"],["label","Pre-Trade",3,"formGroup","showBias"],["label","Post-Trade",3,"formGroup"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"h1",1),f(2,"Add Trade"),c(),_(3,"app-trade-status-selector",2),u(4,"app-chart-upload",3),S("extractTradeData",function(o){return r.applyExtractedChartData(o)}),c(),_(5,"app-trade-setup",4)(6,"app-trade-strategy",5)(7,"app-risk-summary",6),E(8,uV,1,1,"app-profit-analysis",7)(9,dV,1,2,"app-emotional-analysis",8)(10,fV,1,1,"app-emotional-analysis",9),_(11,"app-notes",10),u(12,"div",11)(13,"button",12),S("click",function(){return r.onSubmit()}),f(14,"Save"),c(),u(15,"button",13),S("click",function(){return r.onCancel()}),f(16),c()()()),e&2&&(h(3),g("control",r.tradeStatusControl)("disabled",r.mode==="view"),h(2),g("formGroup",r.tradeForm())("tradeStatus",r.tradeStatusControl.value)("plannedTradeGroup",r.plannedTradeGroup)("executingTradeGroup",r.executingTradeGroup),h(),g("formGroup",r.tradeForm()),h(),g("metrics",r.riskMetrics()),h(),g("ngIf",r.tradeStatusControl.value==="Completed"),h(),g("ngIf",r.tradeStatusControl.value==="Planned"),h(),g("ngIf",r.tradeStatusControl.value!=="Planned"),h(),g("control",r.notesControl),h(5),O(" ",r.mode==="view"?"Close":"Cancel"," "))},dependencies:[B,K,Ce,Oe,Ne,tf,nf,rf,of,sf,af,cf,uf],encapsulation:2})};function pV(n,t){if(n&1&&(u(0,"div",14),f(1),c()),n&2){let e=w();h(),L(e.actionSuccess)}}function hV(n,t){if(n&1&&(u(0,"div",15),f(1),c()),n&2){let e=w();h(),L(e.actionError)}}function mV(n,t){if(n&1){let e=J();u(0,"li",16)(1,"div",17)(2,"i",18),S("click",function(){let i=T(e).$implicit,o=w();return M(o.onRowClick(i))}),c(),u(3,"div",19),S("click",function(){let i=T(e).$implicit,o=w();return M(o.onRowClick(i))}),u(4,"h5",20),f(5),c(),u(6,"span",21)(7,"span",22),f(8),c(),f(9," | "),u(10,"span",22),f(11),c(),f(12," | "),u(13,"span",22),f(14),Re(15,"date"),c()()(),u(16,"div",23),S("click",function(){let i=T(e).$implicit,o=w();return M(o.deleteAccount(i.account_id))}),_(17,"i",24),c()()()}if(n&2){let e=t.$implicit;h(5),L(e.account_name),h(3),O("Broker: ",e.broker_name,""),h(3),fa("Balance: ",e.balance," ",e.currency,""),h(3),O("Created At: ",Fe(15,5,e.created_at,"y, MMMM, d h:mm a"),"")}}function gV(n,t){if(n&1&&(u(0,"div",15),f(1),c()),n&2){let e=w(2);h(),L(e.formError)}}function vV(n,t){if(n&1){let e=J();u(0,"div",25),S("click",function(i){T(e);let o=w();return M(o.closeFormOnOutside(i))})("keydown.escape",function(){T(e);let i=w();return M(i.toggleForm())}),u(1,"div",26),S("click",function(i){return T(e),M(i.stopPropagation())}),u(2,"nav",27)(3,"ol",28)(4,"li",3)(5,"a",4),f(6,"Dashboard"),c()(),u(7,"li",3)(8,"a",29),S("click",function(i){T(e);let o=w();return M(o.closeFormOnOutside(i))}),f(9,"Trading Accounts"),c()(),u(10,"li",5),f(11,"Create Manual Account"),c()()(),u(12,"h4",30),f(13,"Create Manual Account"),c(),u(14,"p",31),f(15,"Set up a manual trading account to track your trades"),c(),u(16,"form",32),S("ngSubmit",function(){T(e);let i=w();return M(i.submitForm())}),u(17,"div",33)(18,"label",34),f(19,"Account Name"),c(),_(20,"input",35),c(),u(21,"div",33)(22,"label",34),f(23,"Broker Name"),c(),_(24,"input",36),c(),u(25,"div",33)(26,"label",34),f(27,"Account Type"),c(),_(28,"input",37),c(),u(29,"div",33)(30,"label",34),f(31,"Currency"),c(),_(32,"input",38),c(),u(33,"div",33)(34,"label",34),f(35,"Initial Balance"),c(),_(36,"input",39),c(),u(37,"div",33)(38,"label",34),f(39,"Account Notes (Optional)"),c(),_(40,"textarea",40),c(),u(41,"h5",8),f(42,"Trading Preferences"),c(),u(43,"div",41),_(44,"input",42),u(45,"label",43),f(46,"Track P&L"),c(),u(47,"small",44),f(48,"Enable profit and loss tracking for this account"),c()(),u(49,"div",41),_(50,"input",45),u(51,"label",46),f(52,"Include in Analytics"),c(),u(53,"small",44),f(54,"Include this account in overall performance metrics"),c()(),E(55,gV,2,1,"div",10),u(56,"div",47)(57,"button",48),S("click",function(){T(e);let i=w();return M(i.toggleForm())}),f(58,"Cancel"),c(),u(59,"button",49),f(60,"Create Account"),c()()()()()}if(n&2){let e=w();h(16),g("formGroup",e.tradeAccountForm),h(39),g("ngIf",e.formError)}}function yV(n,t){if(n&1){let e=J();u(0,"div",25),S("click",function(){T(e);let i=w();return M(i.cancelDelete())})("keydown.escape",function(){T(e);let i=w();return M(i.cancelDelete())}),u(1,"div",26),S("click",function(i){return T(e),M(i.stopPropagation())}),u(2,"h5",33),f(3,"Confirm Deletion"),c(),u(4,"p"),f(5,"Are you sure you want to delete this trading account and all its associated data?"),c(),u(6,"div",47)(7,"button",50),S("click",function(){T(e);let i=w();return M(i.cancelDelete())}),f(8,"Cancel"),c(),u(9,"button",7),S("click",function(){T(e);let i=w();return M(i.confirmDelete())}),f(10,"Delete"),c()()()()}}var df=class n{constructor(t,e,r,i){this.fb=t;this.supabaseService=e;this.supabaseAccountService=r;this.cdr=i;this.tradeAccountForm=this.fb.group({account_name:["",R.required],broker_name:[""],account_type:[""],currency:["USD"],balance:[0,R.min(0)],track_pl:[!1],include_in_analytics:[!1]})}tradeAccounts=[];showForm=!1;tradeAccountForm;formError=null;actionError=null;actionSuccess=null;selectedAccountId=null;showDeleteConfirm=!1;pendingDeleteAccountId=null;funMaterialIcons=["movie","music_note","videogame_asset","theater_comedy","sports_esports","fastfood","local_cafe","restaurant_menu","icecream","emoji_food_beverage","flight_takeoff","directions_car","hiking","beach_access","camping","smartphone","computer","memory","developer_mode","settings","mood","sentiment_satisfied","sentiment_very_dissatisfied","celebration","favorite","auto_awesome","nightlight","stars","magic_wand","castle"];ngOnInit(){this.loadAccounts()}async loadAccounts(){try{this.tradeAccounts=await this.supabaseAccountService.getUserTradeAccounts()}catch{this.actionError="Failed to load accounts. Please try again."}finally{this.cdr.markForCheck()}}async onRowClick(t){this.selectedAccountId=t.account_id,this.tradeAccountForm.patchValue({account_name:t.account_name,broker_name:t.broker_name,account_type:t.account_type,currency:t.currency,balance:t.balance,track_pl:t.metadata?.track_pl||!1,include_in_analytics:t.metadata?.include_in_analytics||!1}),this.showForm=!0}toggleForm(){this.showForm=!this.showForm,this.formError=null,this.actionSuccess=null,this.actionError=null,this.selectedAccountId=null,this.showForm||this.tradeAccountForm.reset({currency:"USD",balance:0})}async submitForm(){if(this.formError="",this.tradeAccountForm.valid){let t=this.tradeAccountForm.value;this.selectedAccountId?await this.supabaseAccountService.editTradeAccount(this.selectedAccountId,t)?(this.actionSuccess="Account updated successfully",this.loadAccounts(),this.toggleForm()):this.formError="Failed to update account":await this.supabaseAccountService.addTradeAccount(t)?(this.actionSuccess="Account added successfully",this.loadAccounts(),this.toggleForm()):this.formError="Failed to add account"}this.cdr.markForCheck()}async deleteAccount(t){this.showDeleteConfirm=!0,this.pendingDeleteAccountId=t}confirmDelete(){this.pendingDeleteAccountId&&this.performAccountDeletion(this.pendingDeleteAccountId),this.showDeleteConfirm=!1,this.pendingDeleteAccountId=null}cancelDelete(){this.showDeleteConfirm=!1,this.pendingDeleteAccountId=null}async performAccountDeletion(t){this.actionError=null,this.actionSuccess=null;try{await this.supabaseAccountService.removeTradeAccount(t)?(this.loadAccounts(),this.actionSuccess="Account deleted successfully."):this.actionError="Failed to delete account."}catch{this.actionError="An unexpected error occurred while deleting."}finally{this.cdr.markForCheck(),setTimeout(()=>{this.actionSuccess="",this.cdr.markForCheck()},5e3)}}handleEscape(t){this.showForm&&this.toggleForm()}closeFormOnOutside(t){t.target===t.currentTarget&&this.toggleForm()}static \u0275fac=function(e){return new(e||n)(D(Tt),D(Mt),D(Xt),D(le))};static \u0275cmp=V({type:n,selectors:[["app-tradeaccountmanage"]],hostBindings:function(e,r){e&1&&S("keydown.escape",function(o){return r.handleEscape(o)},!1,Lb)},decls:23,vars:5,consts:[[1,"container","mt-4"],["aria-label","breadcrumb",2,"--bs-breadcrumb-divider",`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E")`],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/home",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[1,"d-flex","justify-content-between","align-items-center","mt-4"],[1,"btn","btn-tr",3,"click"],[1,"mt-4"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"list-group"],["class","list-group-item bg-transparent",4,"ngFor","ngForOf"],["class","overlay","tabindex","0",3,"click","keydown.escape",4,"ngIf"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[1,"list-group-item","bg-transparent"],[1,"d-flex","align-items-center"],[1,"logo-circle","bi","bi-star-fill","text-primary",2,"font-size","2rem",3,"click"],[1,"ms-3",3,"click"],[1,"mt-2"],[1,"d-block","row","text-muted"],[1,"col-4"],["title","Delete Account",1,"delete-button","justify-content-end",3,"click"],[1,"bi","bi-trash"],["tabindex","0",1,"overlay",3,"click","keydown.escape"],[1,"modal-card",3,"click"],["aria-label","breadcrumb"],[1,"breadcrumb","small"],[3,"click"],[1,"mb-1"],[1,"text-muted","mb-3"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","account_name","placeholder","e.g., My Futures Account",1,"form-control"],["type","text","formControlName","broker_name","placeholder","e.g., NinjaTrader, TastyWorks",1,"form-control"],["type","text","formControlName","account_type","placeholder","e.g., Margin, Cash",1,"form-control"],["type","text","formControlName","currency","placeholder","USD",1,"form-control"],["type","number","formControlName","balance",1,"form-control"],["rows","3","placeholder","Add any additional information about this account","disabled","",1,"form-control"],[1,"form-check","form-switch","mb-2"],["type","checkbox","formControlName","track_pl","id","track_pl",1,"form-check-input"],["for","track_pl",1,"form-check-label"],[1,"text-muted","d-block","ms-4"],["type","checkbox","formControlName","include_in_analytics","id","include_in_analytics",1,"form-check-input"],["for","include_in_analytics",1,"form-check-label"],[1,"d-flex","justify-content-end","gap-2","mt-3"],["type","button",1,"btn","btn-tr-secondary",3,"click"],["type","submit",1,"btn","btn-tr"],[1,"btn","btn-tr-secondary",3,"click"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),c()(),u(6,"li",5),f(7,"Trading Accounts"),c()()(),u(8,"div",6)(9,"h3"),f(10,"Your Trade Accounts"),c(),u(11,"button",7),S("click",function(){return r.toggleForm()}),f(12,"Add Account"),c()(),u(13,"div",8)(14,"h5"),f(15,"Manage your trading accounts"),c()(),E(16,pV,2,1,"div",9)(17,hV,2,1,"div",10),u(18,"div",0)(19,"ul",11),E(20,mV,18,8,"li",12),c()(),E(21,vV,61,2,"div",13)(22,yV,11,0,"div",13),c()),e&2&&(h(16),g("ngIf",r.actionSuccess),h(),g("ngIf",r.actionError),h(3),g("ngForOf",r.tradeAccounts),h(),g("ngIf",r.showForm),h(),g("ngIf",r.showDeleteConfirm))},dependencies:[Ce,Qt,oe,qn,Hr,pe,Oe,Ne,Ve,B,ze,K,rr,Xe],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;z-index:1050}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1050}.modal-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;width:100%;max-width:600px;max-height:90dvh;overflow-y:auto;box-shadow:0 10px 25px #00000026}.list-group-item[_ngcontent-%COMP%]{cursor:pointer}.delete-button[_ngcontent-%COMP%]{color:red;display:none;margin-left:auto}.list-group-item[_ngcontent-%COMP%]:hover   .delete-button[_ngcontent-%COMP%]{color:red;display:block}"]})};function _V(n,t){if(n&1&&_(0,"img",35),n&2){let e=w();g("src",e.currentImageUrl,Dn)}}function bV(n,t){if(n&1&&_(0,"img",36),n&2){let e=w();g("src",e.previewUrl,Dn)}}function wV(n,t){n&1&&(u(0,"div",14),f(1,"No new image selected"),c())}function CV(n,t){if(n&1&&(u(0,"div",23)(1,"div",37),f(2),c()()),n&2){let e=w();h(2),L(e.errorMessage)}}function EV(n,t){if(n&1&&(u(0,"button",38),f(1," Save Changes "),c()),n&2){let e=w();g("disabled",e.profileForm.invalid)}}var ff=class n{constructor(t,e,r){this.fb=t;this.supabaseService=e;this.cdr=r;this.profileForm=this.fb.group({firstname:["",R.required],lastname:[""],email:["",[R.required,R.email]],phone:[""]})}profileForm;currentImageUrl=null;previewUrl=null;selectedFile=null;userId="";originalFormValue;formChanged=!1;errorMessage="";async ngOnInit(){await this.loadProfile(),this.trackFormChanges()}async loadProfile(){try{let{data:t,error:e}=await this.supabaseService.getProfile();if(e){this.errorMessage="Failed to load profile: "+e.message,console.error("Supabase profile load error:",e);return}t?(this.profileForm.patchValue({firstname:t.firstname,lastname:t.lastname,email:t.email,phone:t.phone}),this.originalFormValue=this.profileForm.getRawValue(),t.profile_picture_url?(this.currentImageUrl=await this.supabaseService.getCachedProfilePictureBlobUrl(t.profile_picture_url),this.previewUrl=this.currentImageUrl):(this.currentImageUrl=null,this.previewUrl=null)):(this.errorMessage="No profile data found. Please complete your profile.",console.warn("No profile data received from Supabase."))}catch(t){this.errorMessage="An unexpected error occurred while loading profile.",console.error("Error in loadProfile:",t)}finally{this.cdr.markForCheck()}}async removeProfilePicture(){try{this.errorMessage="",await this.supabaseService.deleteProfilePicture(),this.supabaseService.clearCachedProfilePictureBlobUrl(),await this.supabaseService.updateProfile({profile_picture_url:null}),this.currentImageUrl=null,this.previewUrl=null,this.selectedFile=null,this.formChanged=!0}catch(t){this.errorMessage="Failed to remove profile picture: "+(t.message||t.toString()),console.error("Error removing profile picture:",t)}finally{this.cdr.markForCheck()}}trackFormChanges(){this.profileForm.valueChanges.subscribe(()=>{this.formChanged=this.profileForm.dirty||!!this.selectedFile,this.cdr.markForCheck()})}onFileChange(t){this.errorMessage="";let e=t.target,r=e?.files?.[0];if(!r){this.selectedFile=null;return}if(!["image/jpeg","image/png","image/webp"].includes(r.type)){this.errorMessage="Only JPG, PNG, or WEBP images are allowed.",this.selectedFile=null,e.value="";return}if(r.size>1024*1024){this.errorMessage="File size must be less than 1MB.",this.selectedFile=null,e.value="";return}this.selectedFile=r,this.previewUrl&&URL.revokeObjectURL(this.previewUrl),this.previewUrl=URL.createObjectURL(r),this.formChanged=!0,this.cdr.markForCheck()}async saveChanges(){if(this.errorMessage="",!this.formChanged){this.errorMessage="No changes detected.";return}if(this.profileForm.invalid){this.errorMessage="Please correct the highlighted form errors.",this.profileForm.markAllAsTouched(),this.cdr.markForCheck();return}let t=this.originalFormValue.profile_picture_url??null;if(this.selectedFile)try{if(t=await this.supabaseService.uploadProfilePicture(this.selectedFile),!t){this.errorMessage="Failed to upload profile picture. Please try again.",console.error("Supabase uploadProfilePicture returned null filePath");return}}catch(i){this.errorMessage="Error uploading profile picture: "+(i.message||i.toString()),console.error("Error during profile picture upload:",i);return}let e=this.profileForm.getRawValue(),r={firstname:e.firstname,lastname:e.lastname,email:e.email,phone:e.phone,profile_picture_url:t,updated_at:new Date().toISOString(),preferences:{},metadata:{}};try{await this.supabaseService.updateProfile(r),t&&(this.supabaseService.clearCachedProfilePictureBlobUrl(),this.currentImageUrl=await this.supabaseService.getCachedProfilePictureBlobUrl(t),this.previewUrl=this.currentImageUrl),this.formChanged=!1,this.selectedFile=null,this.originalFormValue=this.profileForm.getRawValue(),this.errorMessage=""}catch(i){this.errorMessage="Failed to save changes: "+(i.message||i.toString()),console.error("Error during profile update:",i)}finally{this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(D(Tt),D(Xt),D(le))};static \u0275cmp=V({type:n,selectors:[["app-user-account-settings"]],decls:58,vars:6,consts:[[1,"container","mb-5"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/home"],["aria-current","page",1,"breadcrumb-item","active"],[1,"mb-2"],[1,"text-muted","mb-4"],[1,"row","g-3","mb-4"],[1,""],[1,"card","border-0","shadow-sm","p-3","h-100"],[1,"d-flex","align-items-center","mb-2"],["alt","Profile","class","rounded-circle me-2","style","width: 40px; height: 40px; object-fit: cover;",3,"src",4,"ngIf"],[1,"mb-0"],[1,"text-muted"],[1,"row","g-4",3,"ngSubmit","formGroup"],[1,"fw-bold"],[1,"col-md-6"],[1,"form-label"],["formControlName","firstname","placeholder","First name",1,"form-control"],["formControlName","lastname","placeholder","Last name",1,"form-control"],["formControlName","email","placeholder","Email","type","email",1,"form-control"],["formControlName","phone","placeholder","+1 (123) 456-7890",1,"form-control"],[1,"col-12"],[1,"fw-bold","mt-3"],[1,"card","p-3","shadow-sm","border-light","bg-light-subtle"],[1,"form-label","d-block"],["alt","Preview","class","img-thumbnail","style","width: 120px;",3,"src",4,"ngIf"],["class","text-muted",4,"ngIf"],["type","file",1,"form-control","mt-2",3,"change"],[1,"mt-2","d-flex","gap-2"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],["class","col-12",4,"ngIf"],[1,"col-12","text-end"],["type","submit","class","btn btn-tr",3,"disabled",4,"ngIf"],["alt","Profile",1,"rounded-circle","me-2",2,"width","40px","height","40px","object-fit","cover",3,"src"],["alt","Preview",1,"img-thumbnail",2,"width","120px",3,"src"],[1,"alert","alert-danger"],["type","submit",1,"btn","btn-tr",3,"disabled"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),c()(),u(6,"li",5),f(7,"Account Settings"),c()()(),u(8,"h2",6),f(9,"Account Settings"),c(),u(10,"p",7),f(11,"Manage your profile, subscription, and preferences"),c(),u(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11),E(16,_V,1,1,"img",12),u(17,"h5",13),f(18,"Profile Information"),c()(),u(19,"small",14),f(20,"Update your personal details and public profile"),c()()()(),u(21,"form",15),S("ngSubmit",function(){return r.saveChanges()}),u(22,"h5",16),f(23,"Personal Information"),c(),u(24,"div",17)(25,"label",18),f(26,"First Name"),c(),_(27,"input",19),c(),u(28,"div",17)(29,"label",18),f(30,"Last Name"),c(),_(31,"input",20),c(),u(32,"div",17)(33,"label",18),f(34,"Email Address"),c(),_(35,"input",21),c(),u(36,"div",17)(37,"label",18),f(38,"Phone"),c(),_(39,"input",22),c(),u(40,"div",23)(41,"h6",24),f(42,"Profile Picture"),c(),u(43,"div",25)(44,"div",6)(45,"label",26),f(46,"Preview New Photo"),c(),E(47,bV,1,1,"img",27)(48,wV,2,0,"div",28),c(),u(49,"input",29),S("change",function(o){return r.onFileChange(o)}),c(),u(50,"small",14),f(51,"JPG, PNG or GIF. Max 1MB."),c(),u(52,"div",30)(53,"button",31),S("click",function(){return r.removeProfilePicture()}),f(54,"Remove"),c()()()(),E(55,CV,3,1,"div",32),u(56,"div",33),E(57,EV,2,1,"button",34),c()()()),e&2&&(h(16),g("ngIf",r.currentImageUrl),h(5),g("formGroup",r.profileForm),h(26),g("ngIf",r.previewUrl),h(),g("ngIf",!r.previewUrl),h(7),g("ngIf",r.errorMessage),h(2),g("ngIf",r.formChanged))},dependencies:[Ce,Qt,oe,pe,Oe,Ne,Ve,B,K,Xe],encapsulation:2})};var pf=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;ngOnInit(){}async adminLoadMeditationVideos(){let{data:t,error:e}=await this.supabase.from("adminmeditationvideos").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Error loading meditation videos: ",e),e;return t}async loadActiveMeditationVideos(){let{data:t,error:e}=await this.supabase.from("activemeditationvideos").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Error loading meditation videos: ",e),e;return t}async addMeditationVideo(t){let{error:e}=await this.supabase.from("adminmeditationvideos").insert([{title:t.title,url:t.url,category:t.category,description:t.description,isactive:t.isactive}]);return e&&console.error("Error adding meditation video: ",e),{error:e}}async updateMeditationVideo(t){let{error:e}=await this.supabase.from("adminmeditationvideos").update({title:t.title,url:t.url,category:t.category,description:t.description,isactive:t.isactive,updated_time:t.updated_time}).eq("id",t.id);return e&&console.error("Error updating meditation video: ",e),{error:e}}static \u0275fac=function(e){return new(e||n)(F(Ie))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};var DV=(n,t)=>({"alert-success":n,"alert-danger":t});function xV(n,t){if(n&1&&(u(0,"div",7),f(1),c()),n&2){let e=w();g("ngClass",dt(2,DV,e.messageType==="success",e.messageType==="error")),h(),O(" ",e.message," ")}}function IV(n,t){if(n&1){let e=J();u(0,"tr")(1,"td")(2,"input",8),$e("ngModelChange",function(i){let o=T(e).$implicit;return Ke(o.title,i)||(o.title=i),M(i)}),S("ngModelChange",function(){let i=T(e).$implicit,o=w();return M(o.onFieldChange(i))}),c()(),u(3,"td")(4,"input",8),$e("ngModelChange",function(i){let o=T(e).$implicit;return Ke(o.url,i)||(o.url=i),M(i)}),S("ngModelChange",function(){let i=T(e).$implicit,o=w();return M(o.onFieldChange(i))}),c()(),u(5,"td")(6,"input",8),$e("ngModelChange",function(i){let o=T(e).$implicit;return Ke(o.category,i)||(o.category=i),M(i)}),S("ngModelChange",function(){let i=T(e).$implicit,o=w();return M(o.onFieldChange(i))}),c()(),u(7,"td")(8,"textarea",8),$e("ngModelChange",function(i){let o=T(e).$implicit;return Ke(o.description,i)||(o.description=i),M(i)}),S("ngModelChange",function(){let i=T(e).$implicit,o=w();return M(o.onFieldChange(i))}),c()(),u(9,"td")(10,"input",9),$e("ngModelChange",function(i){let o=T(e).$implicit;return Ke(o.isactive,i)||(o.isactive=i),M(i)}),S("change",function(){let i=T(e).$implicit,o=w();return M(o.onFieldChange(i))}),c()(),u(11,"td"),f(12),Re(13,"date"),c()()}if(n&2){let e=t.$implicit;h(2),Be("ngModel",e.title),h(2),Be("ngModel",e.url),h(2),Be("ngModel",e.category),h(2),Be("ngModel",e.description),h(2),Be("ngModel",e.isactive),h(2),L(Fe(13,6,e.updated_time,"short"))}}var hf=class n{constructor(t,e){this.cdr=t;this.supabaseMeditationTableService=e}videos=[];message="";messageType="success";async ngOnInit(){let t=await this.supabaseMeditationTableService.adminLoadMeditationVideos();this.videos=t.map(e=>G(N({},e),{isModified:!1})),this.cdr.markForCheck()}onFieldChange(t){t.isModified=!0}addVideo(){this.videos.push({title:"",url:"",category:"",description:"",isactive:!0,isModified:!0}),this.cdr.detectChanges()}async saveChanges(){let t=this.videos.filter(e=>e.isModified);for(let e of t){if(e.id){e.updated_time=new Date().toISOString();let{error:r}=await this.supabaseMeditationTableService.updateMeditationVideo(e);if(r)return this.showMessage("Error saving some videos","error")}else{let{error:r}=await this.supabaseMeditationTableService.addMeditationVideo(e);if(r)return this.showMessage("Error adding new video","error")}e.isModified=!1}this.showMessage("Videos saved successfully","success"),this.cdr.detectChanges()}hasChanges(){return this.videos.some(t=>t.isModified)}showMessage(t,e){this.message=t,this.messageType=e,this.cdr.markForCheck(),setTimeout(()=>{this.message="",this.cdr.markForCheck()},4e3)}static \u0275fac=function(e){return new(e||n)(D(le),D(pf))};static \u0275cmp=V({type:n,selectors:[["app-admin-meditation-dashboard"]],decls:26,vars:3,consts:[[1,"container","mt-4","p-4"],["class","alert",3,"ngClass",4,"ngIf"],[1,"table","mt-4"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mt-3"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-success",3,"click","disabled"],[1,"alert",3,"ngClass"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","checkbox",1,"form-check-input",3,"ngModelChange","change","ngModel"]],template:function(e,r){e&1&&(u(0,"div",0),E(1,xV,2,5,"div",1),u(2,"h2"),f(3,"Meditation Video Admin Dashboard"),c(),u(4,"table",2)(5,"thead")(6,"tr")(7,"th"),f(8,"Title"),c(),u(9,"th"),f(10,"URL"),c(),u(11,"th"),f(12,"Category"),c(),u(13,"th"),f(14,"Description"),c(),u(15,"th"),f(16,"Active"),c(),u(17,"th"),f(18,"Last Updated"),c()()(),u(19,"tbody"),E(20,IV,14,9,"tr",3),c()(),u(21,"div",4)(22,"button",5),S("click",function(){return r.addVideo()}),f(23,"Add Video"),c(),u(24,"button",6),S("click",function(){return r.saveChanges()}),f(25,"Save Changes"),c()()()),e&2&&(h(),g("ngIf",r.message),h(19),g("ngForOf",r.videos),h(4),g("disabled",!r.hasChanges()))},dependencies:[B,ft,ze,K,rr,Jt,oe,Hr,pe,vn],encapsulation:2})};var TV=["conversationContainer"],MV=(n,t)=>({"bot-message":n,"user-message":t});function AV(n,t){if(n&1){let e=J();u(0,"div",14),S("click",function(){let i=T(e).$implicit,o=w();return M(o.selectDate(i.date))}),u(1,"div",15),f(2),c(),u(3,"div",16),f(4),c()()}if(n&2){let e=t.$implicit,r=w();Ee("active",r.isDateSelected(e.date))("today",r.isToday(e.date)),h(2),L(e.dayName),h(2),L(e.dayNumber)}}function kV(n,t){n&1&&(u(0,"div",17)(1,"div",18)(2,"span",19),f(3,"Loading..."),c()()())}function NV(n,t){if(n&1&&(u(0,"div",29),f(1),c()),n&2){let e=t.$implicit;g("ngClass",dt(2,MV,e.sender==="bot",e.sender==="user")),h(),O(" ",e.text," ")}}function PV(n,t){n&1&&(u(0,"span"),f(1,"Continue"),c())}function OV(n,t){n&1&&_(0,"span",30)}function RV(n,t){if(n&1){let e=J();u(0,"div")(1,"div",20),_(2,"div",21),c(),u(3,"div",22,0),E(5,NV,2,5,"div",23),c(),u(6,"div",24)(7,"input",25),$e("ngModelChange",function(i){T(e);let o=w();return Ke(o.currentInput,i)||(o.currentInput=i),M(i)}),S("keydown.enter",function(){T(e);let i=w();return M(i.submitAnswer())}),c(),u(8,"button",26),S("click",function(){T(e);let i=w();return M(i.submitAnswer())}),E(9,PV,2,0,"span",27)(10,OV,1,0,"span",28),c()()()}if(n&2){let e=w();h(2),Gt("width",e.progressPercentage()),h(3),g("ngForOf",e.conversation()),h(2),Be("ngModel",e.currentInput),g("disabled",e.isLoading()),h(),g("disabled",e.isLoading()||!e.currentInput),h(),g("ngIf",!e.isLoading()),h(),g("ngIf",e.isLoading())}}function FV(n,t){if(n&1&&(u(0,"div",45)(1,"div",46)(2,"mat-icon"),f(3,"fact_check"),c(),f(4," Emotional State "),c(),u(5,"div",47)(6,"div")(7,"div"),f(8,"Patience"),c(),u(9,"div",48),f(10),c()(),u(11,"div")(12,"div"),f(13,"Confidence"),c(),u(14,"div",48),f(15),c()(),u(16,"div")(17,"div"),f(18,"Doubt"),c(),u(19,"div",48),f(20),c()()()()),n&2){let e=w().ngIf;h(10),L(e.emotionalState.Patience),h(5),L(e.emotionalState.Confidence),h(5),L(e.emotionalState.Doubt)}}function LV(n,t){if(n&1&&(u(0,"div")(1,"p"),f(2),c()()),n&2){let e=t.$implicit;h(2),L(e.category)}}function VV(n,t){if(n&1&&(u(0,"div",45)(1,"div",46)(2,"mat-icon"),f(3,"tips_and_updates"),c(),f(4," Behavior Patterns "),c(),E(5,LV,3,1,"div",49),c()),n&2){let e=w().ngIf;h(5),g("ngForOf",e.behaviorPattern)}}function jV(n,t){if(n&1&&(u(0,"div",50)(1,"div",46)(2,"mat-icon"),f(3,"warning_amber"),c(),f(4," Immediate Action "),c(),u(5,"p"),f(6),c()()),n&2){let e=w().ngIf;h(6),L(e.actionableitem)}}function UV(n,t){if(n&1&&(u(0,"div",53)(1,"div",54),f(2),c(),u(3,"div",55),_(4,"div",56),c(),u(5,"div",57),f(6),c()()),n&2){let e=t.$implicit;h(2),L(e.emotion),h(2),Gt("width",e.percentage)("background-color",e.color||"#748ffc"),h(2),L(e.percentage)}}function BV(n,t){if(n&1&&(u(0,"div",51)(1,"div",46)(2,"mat-icon"),f(3,"bar_chart"),c(),f(4," Emotional State Summary "),c(),E(5,UV,7,6,"div",52),c()),n&2){let e=w().ngIf;h(5),g("ngForOf",e.emotion)}}function $V(n,t){if(n&1&&(u(0,"li"),f(1),c()),n&2){let e=t.$implicit;h(),L(e)}}function HV(n,t){if(n&1&&(u(0,"div",45)(1,"div",46)(2,"mat-icon"),f(3,"psychology"),c(),f(4," AI Recommendations "),c(),u(5,"ul",58),E(6,$V,2,1,"li",49),c()()),n&2){let e=w().ngIf;h(6),g("ngForOf",e.recommendation)}}function zV(n,t){if(n&1){let e=J();Dt(0),u(1,"div",33)(2,"div",34)(3,"mat-icon"),f(4,"task_alt"),c()(),u(5,"h2"),f(6,"Thank you for sharing!"),c(),u(7,"p",5),f(8,"Here are your personalized insights based on our conversation"),c()(),u(9,"div",35)(10,"div",36)(11,"div",37)(12,"mat-icon"),f(13,"track_changes"),c(),f(14," Trading Readiness "),c(),u(15,"div",38),f(16),c()(),E(17,FV,21,3,"div",39)(18,VV,6,1,"div",39)(19,jV,7,1,"div",40)(20,BV,6,1,"div",41)(21,HV,7,1,"div",39),c(),u(22,"div",42)(23,"button",43),f(24,"View Analytics"),c(),u(25,"button",44),S("click",function(){T(e);let i=w(2);return M(i.startNewCheckIn())}),f(26,"New Check-In"),c()(),xt()}if(n&2){let e=t.ngIf;h(16),L(e.readiness),h(),g("ngIf",e.emotionalState),h(),g("ngIf",e.behaviorPattern==null?null:e.behaviorPattern.length),h(),g("ngIf",e.actionableitem),h(),g("ngIf",e.emotion==null?null:e.emotion.length),h(),g("ngIf",e.recommendation==null?null:e.recommendation.length)}}function qV(n,t){n&1&&(u(0,"div",59)(1,"h3"),f(2,"No Check-in Data"),c(),u(3,"p"),f(4,"There is no analysis available for the selected date."),c()())}function GV(n,t){if(n&1&&(u(0,"div",31),E(1,zV,27,6,"ng-container",32)(2,qV,5,0,"ng-template",null,1,Zo),c()),n&2){let e=nr(3),r=w();h(),g("ngIf",r.analysisResult())("ngIfElse",e)}}function WV(n,t){if(n&1&&(u(0,"div",59)(1,"h3"),f(2,"Check-in Not Available Yet"),c(),u(3,"p"),f(4),c()()),n&2){let e=w();h(4),O("Please come back on this date to complete your check-in. ",e.futureMessage(),"")}}var mf=class n{constructor(t,e,r){this.supabaseEmotionService=t;this.supabaseFunctionService=e;this.supabaseService=r}conversationContainer;viewMode=xe("loading");weekDates=xe([]);selectedDate=xe(new Date);futureMessage=xe("");isLoading=xe(!1);questions=xe([]);currentQuestionIndex=xe(0);conversation=xe([]);userAnswers=[];currentInput="";analysisResult=xe(null);progressPercentage=cn(()=>{let t=this.questions().length;return t===0?"0%":`${this.currentQuestionIndex()/t*100}%`});ngOnInit(){this.generateWeekDays(),this.selectDate(new Date)}scrollToBottom(){setTimeout(()=>{try{this.conversationContainer?.nativeElement&&(this.conversationContainer.nativeElement.scrollTop=this.conversationContainer.nativeElement.scrollHeight)}catch(t){console.error("Could not scroll to bottom:",t)}},0)}generateWeekDays(){let t=new Date,e=new Date(t.setDate(t.getDate()-t.getDay())),r=[];for(let i=0;i<7;i++){let o=new Date(e);o.setDate(o.getDate()+i),r.push({date:o,dayName:o.toLocaleDateString("en-US",{weekday:"short"}),dayNumber:o.getDate().toString()})}this.weekDates.set(r)}async selectDate(t){this.selectedDate.set(t),this.viewMode.set("loading"),this.analysisResult.set(null);let e=new Date;e.setHours(0,0,0,0);let r=new Date(t);r.setHours(0,0,0,0),r>e?this.handleFutureDate(r):r.getTime()===e.getTime()?await this.handleToday():await this.handlePastDate(r)}isToday(t){return new Date(t).toDateString()===new Date().toDateString()}isDateSelected(t){return new Date(t).toDateString()===new Date(this.selectedDate()).toDateString()}handleFutureDate(t){let e=new Date,r=t.getTime()-e.getTime(),i=Math.floor(r/(1e3*60*60*24)),o=Math.floor(r%(1e3*60*60*24)/(1e3*60*60));this.futureMessage.set(`Check-in will open in ${i} days and ${o} hours.`),this.viewMode.set("future")}async handleToday(){try{if(this.isLoading.set(!0),await this.supabaseEmotionService.canLoadCheckInQuestions())await this.startCheckIn();else{let e=await this.supabaseEmotionService.getEmotionCheckInResultForDate(new Date);this.analysisResult.set(e),this.viewMode.set("analysis")}}catch(t){console.error("Error handling today's check-in:",t),this.viewMode.set("analysis")}finally{this.isLoading.set(!1)}}async handlePastDate(t){this.isLoading.set(!0);let e=await this.supabaseEmotionService.getEmotionCheckInResultForDate(t);this.analysisResult.set(e),this.viewMode.set("analysis"),this.isLoading.set(!1)}async startCheckIn(){this.isLoading.set(!0),this.conversation.set([]),this.userAnswers=[],this.currentQuestionIndex.set(0);let t=await this.supabaseEmotionService.loadQuestions();this.questions.set(t),t.length>0?(this.conversation.update(e=>[...e,{sender:"bot",text:t[0].question_data.question}]),this.viewMode.set("checkin"),this.scrollToBottom()):this.viewMode.set("analysis"),this.isLoading.set(!1)}async submitAnswer(){if(!this.currentInput.trim()||this.isLoading())return;this.isLoading.set(!0);let t=this.questions()[this.currentQuestionIndex()],e=this.currentInput;this.conversation.update(r=>[...r,{sender:"user",text:e}]),this.scrollToBottom(),this.userAnswers.push({question_id:t.question_id,answer:e}),this.currentInput="",setTimeout(async()=>{let r=this.currentQuestionIndex()+1;if(r<this.questions().length){this.currentQuestionIndex.set(r);let i=this.questions()[r];this.conversation.update(o=>[...o,{sender:"bot",text:i.question_data.question}]),this.scrollToBottom(),this.isLoading.set(!1)}else await this.finalizeCheckIn()},300)}processAnalysisResponse(t){let e={};for(let r of t){let i=Object.keys(r)[0];if(!i)continue;let o=r[i];switch(i){case"emotion":e.emotion=o;break;case"behaviorPattern":e.behaviorPattern=o.map(s=>({category:s.category,icon:s.icon,color:s.Color||s.color}));break;case"recommendation":e.recommendation=o;break;case"readiness":e.readiness=o;break;case"actionableitem":e.actionableitem=o;break;case"emotionalState":e.emotionalState=o;break}}return{emotion:e.emotion||[],behaviorPattern:e.behaviorPattern||[],recommendation:e.recommendation||[],readiness:e.readiness||"N/A",actionableitem:e.actionableitem||"No specific action item.",emotionalState:e.emotionalState}}async finalizeCheckIn(){this.viewMode.set("loading");try{let t=this.userAnswers.map(a=>`Q: ${this.questions().find(d=>d.question_id===a.question_id)?.question_data.question} A:${a.answer}`).join(" "),{data:e,error:r}=await this.supabaseFunctionService.callEdgeFunction("emotion-analyst-gemini",{prompt:t});if(r)throw r;if(!e||!Array.isArray(e))throw new Error("Invalid analysis data format received from function.");let i=this.processAnalysisResponse(e),o={user_id:this.supabaseService.user()?.id,answers:this.userAnswers,analysis:i},{error:s}=await this.supabaseEmotionService.submitUserCheckIn(o);if(s)throw s;this.analysisResult.set(i),this.viewMode.set("analysis")}catch(t){console.error("Error finalizing check-in:",t),this.viewMode.set("analysis")}finally{this.isLoading.set(!1)}}startNewCheckIn(){this.selectDate(new Date)}static \u0275fac=function(e){return new(e||n)(D(ks),D(Ps),D(Ie))};static \u0275cmp=V({type:n,selectors:[["app-user-emotion-analysis"]],viewQuery:function(e,r){if(e&1&&Dm(TV,5),e&2){let i;pu(i=hu())&&(r.conversationContainer=i.first)}},decls:14,vars:6,consts:[["conversationContainer",""],["noAnalysis",""],[1,"container-fluid"],[1,"mb-4"],[1,"h4","fw-bold"],[1,"text-muted"],[1,"date-bar"],["class","date-item",3,"active","today","click",4,"ngFor","ngForOf"],[1,"main-card"],[3,"ngSwitch"],["class","text-center p-5",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","analysis-view",4,"ngSwitchCase"],["class","message-view",4,"ngSwitchCase"],[1,"date-item",3,"click"],[1,"day-name"],[1,"day-number"],[1,"text-center","p-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"progress-bar-container"],[1,"progress-bar"],[1,"conversation-container"],["class","message",3,"ngClass",4,"ngFor","ngForOf"],[1,"input-area"],["type","text","placeholder","Type your response here...",1,"form-control",3,"ngModelChange","keydown.enter","ngModel","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"message",3,"ngClass"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"analysis-view"],[4,"ngIf","ngIfElse"],[1,"analysis-header"],[1,"icon-wrapper"],[1,"analysis-grid"],[1,"analysis-card","readiness"],[1,"card-title","mb-0"],[1,"readiness-value"],["class","analysis-card",4,"ngIf"],["class","analysis-card bg-warning-subtle border-warning",4,"ngIf"],["class","analysis-card emotion-summary",4,"ngIf"],[1,"analysis-buttons"],[1,"btn","btn-outline-primary"],[1,"btn","btn-primary",3,"click"],[1,"analysis-card"],[1,"card-title"],[1,"emotion-state-items"],[1,"value"],[4,"ngFor","ngForOf"],[1,"analysis-card","bg-warning-subtle","border-warning"],[1,"analysis-card","emotion-summary"],["class","emotion-item",4,"ngFor","ngForOf"],[1,"emotion-item"],[1,"emotion-label"],[1,"emotion-bar-container"],[1,"emotion-bar"],[1,"emotion-percentage"],[1,"recommendation-list"],[1,"message-view"]],template:function(e,r){e&1&&(u(0,"div",2)(1,"div",3)(2,"h1",4),f(3,"Daily Emotional Check-in"),c(),u(4,"p",5),f(5,"Share how you\u2019re feeling today. This helps us provide personalized insights for your trading journey."),c()(),u(6,"div",6),E(7,AV,5,6,"div",7),c(),u(8,"div",8)(9,"div",9),E(10,kV,4,0,"div",10)(11,RV,11,8,"div",11)(12,GV,4,2,"div",12)(13,WV,5,1,"div",13),c()()()),e&2&&(h(7),g("ngForOf",r.weekDates()),h(2),g("ngSwitch",r.viewMode()),h(),g("ngSwitchCase","loading"),h(),g("ngSwitchCase","checkin"),h(),g("ngSwitchCase","analysis"),h(),g("ngSwitchCase","future"))},dependencies:[B,ft,ze,K,$m,aC,Jt,oe,pe,vn,An],styles:['[_nghost-%COMP%]{display:block;max-width:800px;margin:2rem auto;padding:0 1rem;font-family:Inter,sans-serif}.date-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;background-color:#f8f9fa;border-radius:12px;padding:8px;margin-bottom:2rem}.date-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:.5rem;border-radius:8px;cursor:pointer;width:calc(100% / 7);transition:background-color .3s ease;border:2px solid transparent}.date-item[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.date-item.active[_ngcontent-%COMP%]{background-color:#0d6efd;color:#fff;font-weight:700}.date-item.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{position:relative}.date-item.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-4px;left:50%;transform:translate(-50%);width:5px;height:5px;border-radius:50%;background-color:#0d6efd}.date-item.active.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]:after{background-color:#fff}.day-name[_ngcontent-%COMP%]{font-size:.8rem;font-weight:500}.day-number[_ngcontent-%COMP%]{font-size:1.25rem}.main-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 8px 32px #00000014}.conversation-container[_ngcontent-%COMP%]{height:400px;overflow-y:auto;padding:1rem;margin-bottom:1rem;display:flex;flex-direction:column;gap:1rem;scroll-behavior:smooth}.message[_ngcontent-%COMP%]{padding:.75rem 1.25rem;border-radius:1.25rem;max-width:75%;line-height:1.5}.bot-message[_ngcontent-%COMP%]{background-color:#f1f3f5;color:#343a40;border-bottom-left-radius:.25rem;align-self:flex-start}.user-message[_ngcontent-%COMP%]{background-color:#e7f5ff;color:#1971c2;border-bottom-right-radius:.25rem;align-self:flex-end}.input-area[_ngcontent-%COMP%]{display:flex;gap:.5rem;border-top:1px solid #e9ecef;padding-top:1rem}.input-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-grow:1;border-radius:20px;border:1px solid #ced4da;padding:.5rem 1rem}.input-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0d6efd;box-shadow:0 0 0 2px #0d6efd40}.progress-bar-container[_ngcontent-%COMP%]{height:8px;background-color:#e9ecef;border-radius:4px;margin-bottom:1rem}.progress-bar[_ngcontent-%COMP%]{height:100%;background-color:#0d6efd;border-radius:4px;transition:width .4s ease}.analysis-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.analysis-header[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background-color:#e6f7ff;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem;color:#1890ff}.analysis-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:auto;height:auto}.analysis-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;color:#343a40}.analysis-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.analysis-card[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #e9ecef;padding:1.5rem;border-radius:12px}.analysis-card.readiness[_ngcontent-%COMP%]{background-color:#e7f5ff;border-color:#a5d8ff;display:flex;justify-content:space-between;align-items:center}.readiness[_ngcontent-%COMP%]   .readiness-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#1971c2}.card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem;font-weight:600;color:#495057}.emotion-state-items[_ngcontent-%COMP%]{display:flex;justify-content:space-around;text-align:center}.emotion-state-items[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;font-size:1.2rem}.emotion-summary[_ngcontent-%COMP%]   .emotion-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:.75rem}.emotion-summary[_ngcontent-%COMP%]   .emotion-label[_ngcontent-%COMP%]{width:100px}.emotion-summary[_ngcontent-%COMP%]   .emotion-bar-container[_ngcontent-%COMP%]{flex-grow:1;height:10px;background-color:#e9ecef;border-radius:5px}.emotion-summary[_ngcontent-%COMP%]   .emotion-bar[_ngcontent-%COMP%]{height:100%;background-color:#748ffc;border-radius:5px}.recommendation-list[_ngcontent-%COMP%]{list-style-type:none;padding-left:0}.recommendation-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.5rem 0;border-bottom:1px solid #e9ecef}.recommendation-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.analysis-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:2rem}.message-view[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem}.message-view[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057}.message-view[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d}'],changeDetection:0})};function QV(n,t){if(n&1&&(u(0,"div",19),f(1),c()),n&2){let e=w();h(),O(" ",e.message," ")}}function KV(n,t){if(n&1&&(u(0,"div",20),f(1),c()),n&2){let e=w();h(),O(" ",e.errorMessage," ")}}function ZV(n,t){n&1&&(u(0,"div",21),f(1," A valid email is required. "),c())}var gf=class n{constructor(t,e,r,i){this.fb=t;this.router=e;this.cdr=r;this.supabaseAuthService=i;this.forgotPasswordForm=this.fb.group({email:["",[R.required,R.email]]})}forgotPasswordForm;message=null;errorMessage=null;async onSubmit(){if(this.forgotPasswordForm.invalid){this.forgotPasswordForm.markAllAsTouched();return}let{email:t}=this.forgotPasswordForm.getRawValue();this.errorMessage=null,this.message=null;try{let{success:e,error:r}=await this.supabaseAuthService.requestPasswordReset(t);e?this.message="If an account with that email exists, you will receive a password reset link!":this.errorMessage=r?.message||"Failed to send reset link. Please try again.",this.cdr.markForCheck()}catch(e){this.errorMessage=e.message||"An unexpected error occurred.",this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(D(Tt),D(vt),D(le),D(cr))};static \u0275cmp=V({type:n,selectors:[["app-forgot-password"]],decls:26,vars:5,consts:[[1,"auth-container"],[1,"auth-card"],[1,"text-center","mb-4"],[1,"logo-circle","mx-auto"],["src","/tr_logo.png","alt","Logo",1,"img-fluid"],[1,"brand-name","mt-3"],[1,"brand-tagline"],["class","alert alert-info mb-3",4,"ngIf"],["class","alert alert-danger mb-3",4,"ngIf"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-tr","btn-primary","btn-md",3,"disabled"],[1,"text-center","mt-4"],[1,"mb-0"],["routerLink","",1,"login-link"],[1,"alert","alert-info","mb-3"],[1,"alert","alert-danger","mb-3"],[1,"text-danger","small","mt-1"]],template:function(e,r){if(e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),_(4,"img",4),c()(),u(5,"div",2)(6,"h2",5),f(7,"Forgot Password"),c(),u(8,"p",6),f(9,"Enter your email to receive a password reset link."),c()(),E(10,QV,2,1,"div",7)(11,KV,2,1,"div",8),u(12,"form",9),S("ngSubmit",function(){return r.onSubmit()}),u(13,"div",10)(14,"label",11),f(15,"Email"),c(),_(16,"input",12),E(17,ZV,2,0,"div",13),c(),u(18,"div",14)(19,"button",15),f(20,"Send Reset Link"),c()(),u(21,"div",16)(22,"p",17),f(23,"Remember your password? "),u(24,"a",18),f(25,"Login"),c()()()()()()),e&2){let i;h(10),g("ngIf",r.message),h(),g("ngIf",r.errorMessage),h(),g("formGroup",r.forgotPasswordForm),h(5),g("ngIf",((i=r.forgotPasswordForm.get("email"))==null?null:i.invalid)&&((i=r.forgotPasswordForm.get("email"))==null?null:i.touched)),h(2),g("disabled",r.forgotPasswordForm.invalid)}},dependencies:[B,K,Ce,Qt,oe,pe,Oe,Ne,Ve,Xe],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100dvh;display:flex;align-items:center;justify-content:center}.auth-card[_ngcontent-%COMP%]{background-color:transparent;border-radius:12px;width:100%;max-width:450px;padding:30px}.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:transparent;position:relative;display:flex;align-items:center;justify-content:center;margin:0 auto}.dots-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;position:relative;background-image:radial-gradient(circle,#5046e5 3px,transparent 3px);background-size:15px 15px;transform:rotate(45deg)}.brand-name[_ngcontent-%COMP%]{font-weight:700;font-size:24px;margin-bottom:5px;letter-spacing:.5px}.brand-tagline[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.tabs-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-bottom:1px solid #eee;padding-bottom:5px}.tab[_ngcontent-%COMP%]{padding:8px 15px;cursor:pointer;color:#888;font-weight:500;font-size:16px;transition:color .2s}.tab.active[_ngcontent-%COMP%]{color:#5046e5;border-bottom:2px solid #5046e5}.tab-separator[_ngcontent-%COMP%]{color:#ccc}.auth-form[_ngcontent-%COMP%]{margin-top:10px}.form-control[_ngcontent-%COMP%]{height:auto;padding:12px 15px;border-radius:8px;border:1px solid #ddd;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{border-color:#5046e5;box-shadow:0 0 0 .2rem #5046e526}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555;margin-bottom:8px}.forgot-link[_ngcontent-%COMP%]{font-size:14px;color:#5046e5;text-decoration:none}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{color:#5046e5;font-weight:500;text-decoration:none}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-primary[_ngcontent-%COMP%]{background-color:#5046e5;border-color:#5046e5;padding:12px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus{background-color:#4238d0;border-color:#4238d0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#a8a4e0;border-color:#a8a4e0}.separator[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;color:#888;font-size:14px}.separator[_ngcontent-%COMP%]:before, .separator[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #ddd}.separator[_ngcontent-%COMP%]:before{margin-right:1em}.separator[_ngcontent-%COMP%]:after{margin-left:1em}.google-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;border:1px solid #ddd;color:#333;padding:12px;font-weight:500}.google-btn[_ngcontent-%COMP%]:hover{background-color:#f8f8f8;color:#333}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{padding:20px 15px}.brand-name[_ngcontent-%COMP%]{font-size:20px}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{padding:10px}}']})};function YV(n,t){if(n&1&&(u(0,"div",22),f(1),c()),n&2){let e=w();h(),O(" ",e.errorMessage," ")}}function JV(n,t){if(n&1&&(u(0,"div",23),f(1),c()),n&2){let e=w();h(),O(" ",e.successMessage," ")}}function XV(n,t){n&1&&(u(0,"div",24),f(1," Password must be at least 6 characters. "),c())}function e3(n,t){n&1&&(u(0,"small",25),f(1," Passwords do not match "),c())}var vf=class n{constructor(t,e,r,i,o){this.fb=t;this.router=e;this.route=r;this.cdr=i;this.supabaseAuthService=o;this.updatePasswordForm=this.fb.group({newPassword:["",[R.required,R.minLength(6)]],confirmNewPassword:["",R.required]},{validators:this.passwordMatchValidator})}updatePasswordForm;errorMessage=null;successMessage=null;ngOnInit(){}passwordMatchValidator(t){let e=t.get("newPassword")?.value,r=t.get("confirmNewPassword")?.value;return e===r?null:{mismatch:!0}}async onSubmit(){if(this.updatePasswordForm.invalid){this.updatePasswordForm.markAllAsTouched();return}let{newPassword:t}=this.updatePasswordForm.getRawValue();this.errorMessage=null,this.successMessage=null;try{let{success:e,error:r}=await this.supabaseAuthService.updatePassword(t);e?(this.successMessage="Your password has been updated successfully! Redirecting to login...",this.updatePasswordForm.reset(),setTimeout(()=>{this.router.navigate(["/auth"])},3e3)):this.errorMessage=r?.message||"Failed to update password. Please try again.",this.cdr.markForCheck()}catch(e){this.errorMessage=e.message||"An unexpected error occurred.",this.cdr.markForCheck()}}static \u0275fac=function(e){return new(e||n)(D(Tt),D(vt),D(hn),D(le),D(cr))};static \u0275cmp=V({type:n,selectors:[["app-update-password"]],decls:31,vars:6,consts:[[1,"auth-container"],[1,"auth-card"],[1,"text-center","mb-4"],[1,"logo-circle","mx-auto"],["src","/tr_logo.png","alt","Logo",1,"img-fluid"],[1,"brand-name","mt-3"],[1,"brand-tagline"],["class","alert alert-danger mb-3",4,"ngIf"],["class","alert alert-success mb-3",4,"ngIf"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","newPassword",1,"form-label"],["type","password","id","newPassword","formControlName","newPassword","placeholder","Enter new password",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","confirmNewPassword",1,"form-label"],["type","password","id","confirmNewPassword","formControlName","confirmNewPassword","placeholder","Confirm new password",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-tr","btn-primary","btn-md",3,"disabled"],[1,"text-center","mt-4"],[1,"mb-0"],["routerLink","/auth",1,"login-link"],[1,"alert","alert-danger","mb-3"],[1,"alert","alert-success","mb-3"],[1,"text-danger","small","mt-1"],[1,"text-danger"]],template:function(e,r){if(e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),_(4,"img",4),c()(),u(5,"div",2)(6,"h2",5),f(7,"Set New Password"),c(),u(8,"p",6),f(9,"Please enter your new password."),c()(),E(10,YV,2,1,"div",7)(11,JV,2,1,"div",8),u(12,"form",9),S("ngSubmit",function(){return r.onSubmit()}),u(13,"div",10)(14,"label",11),f(15,"New Password"),c(),_(16,"input",12),E(17,XV,2,0,"div",13),c(),u(18,"div",10)(19,"label",14),f(20,"Confirm New Password"),c(),_(21,"input",15),E(22,e3,2,0,"small",16),c(),u(23,"div",17)(24,"button",18),f(25,"Update Password"),c()(),u(26,"div",19)(27,"p",20),f(28,"Go back to "),u(29,"a",21),f(30,"Login"),c()()()()()()),e&2){let i,o;h(10),g("ngIf",r.errorMessage),h(),g("ngIf",r.successMessage),h(),g("formGroup",r.updatePasswordForm),h(5),g("ngIf",((i=r.updatePasswordForm.get("newPassword"))==null?null:i.invalid)&&((i=r.updatePasswordForm.get("newPassword"))==null?null:i.touched)),h(5),g("ngIf",r.updatePasswordForm.hasError("mismatch")&&((o=r.updatePasswordForm.get("confirmNewPassword"))==null?null:o.touched)),h(2),g("disabled",r.updatePasswordForm.invalid)}},dependencies:[B,K,Ce,Qt,oe,pe,Oe,Ne,Ve],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100dvh;display:flex;align-items:center;justify-content:center}.auth-card[_ngcontent-%COMP%]{background-color:transparent;border-radius:12px;width:100%;max-width:450px;padding:30px}.logo-circle[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:transparent;position:relative;display:flex;align-items:center;justify-content:center;margin:0 auto}.dots-circle[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;position:relative;background-image:radial-gradient(circle,#5046e5 3px,transparent 3px);background-size:15px 15px;transform:rotate(45deg)}.brand-name[_ngcontent-%COMP%]{font-weight:700;font-size:24px;margin-bottom:5px;letter-spacing:.5px}.brand-tagline[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.tabs-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-bottom:1px solid #eee;padding-bottom:5px}.tab[_ngcontent-%COMP%]{padding:8px 15px;cursor:pointer;color:#888;font-weight:500;font-size:16px;transition:color .2s}.tab.active[_ngcontent-%COMP%]{color:#5046e5;border-bottom:2px solid #5046e5}.tab-separator[_ngcontent-%COMP%]{color:#ccc}.auth-form[_ngcontent-%COMP%]{margin-top:10px}.form-control[_ngcontent-%COMP%]{height:auto;padding:12px 15px;border-radius:8px;border:1px solid #ddd;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{border-color:#5046e5;box-shadow:0 0 0 .2rem #5046e526}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#555;margin-bottom:8px}.forgot-link[_ngcontent-%COMP%]{font-size:14px;color:#5046e5;text-decoration:none}.forgot-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.signup-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{color:#5046e5;font-weight:500;text-decoration:none}.signup-link[_ngcontent-%COMP%]:hover, .login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-primary[_ngcontent-%COMP%]{background-color:#5046e5;border-color:#5046e5;padding:12px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:focus{background-color:#4238d0;border-color:#4238d0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#a8a4e0;border-color:#a8a4e0}.separator[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;color:#888;font-size:14px}.separator[_ngcontent-%COMP%]:before, .separator[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #ddd}.separator[_ngcontent-%COMP%]:before{margin-right:1em}.separator[_ngcontent-%COMP%]:after{margin-left:1em}.google-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#fff;border:1px solid #ddd;color:#333;padding:12px;font-weight:500}.google-btn[_ngcontent-%COMP%]:hover{background-color:#f8f8f8;color:#333}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{padding:20px 15px}.brand-name[_ngcontent-%COMP%]{font-size:20px}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{padding:10px}}']})};var t3=()=>["Planned","Executing","Completed"],yf=(n,t)=>({"text-success":n,"text-danger":t}),n3=(n,t,e)=>({"bg-warning text-dark":n,"bg-info text-dark":t,"bg-success":e});function r3(n,t){if(n&1&&(u(0,"option",21),f(1),c()),n&2){let e=t.$implicit,r=w();g("value",e.account_id)("selected",e.account_id===r.tradeAccountId),h(),O(" ",e.account_name," ")}}function i3(n,t){if(n&1){let e=J();u(0,"li",22)(1,"a",23),S("click",function(){let i=T(e).$implicit,o=w();return M(o.activeTab=i)}),f(2),c()()}if(n&2){let e=t.$implicit,r=w();h(),Ee("active",r.activeTab===e),h(),L(e==="Executing"?"Executing Trades":e==="Planned"?"Planned Trades":"Completed Trades")}}function o3(n,t){n&1&&(u(0,"div",24),f(1,"Loading trade logs..."),c())}function s3(n,t){if(n&1&&(u(0,"div",25),f(1),c()),n&2){let e=w();h(),L(e.errorMessage)}}function a3(n,t){n&1&&(u(0,"tr")(1,"th"),f(2,"Symbol"),c(),u(3,"th"),f(4,"Direction"),c(),u(5,"th"),f(6,"Entry Price"),c(),u(7,"th"),f(8,"Strategy"),c(),u(9,"th"),f(10,"Emotional State"),c(),u(11,"th"),f(12,"Date"),c(),u(13,"th"),f(14,"Status"),c(),u(15,"th"),f(16,"Actions"),c()())}function l3(n,t){n&1&&(u(0,"tr")(1,"th"),f(2,"Symbol"),c(),u(3,"th"),f(4,"Direction"),c(),u(5,"th"),f(6,"Entry Price"),c(),u(7,"th"),f(8,"Exit Price"),c(),u(9,"th"),f(10,"P&L"),c(),u(11,"th"),f(12,"Margin %"),c(),u(13,"th"),f(14,"RR Ratio"),c(),u(15,"th"),f(16,"Entry Date"),c(),u(17,"th"),f(18,"Exit Date"),c(),u(19,"th"),f(20,"Actions"),c()())}function c3(n,t){if(n&1){let e=J();u(0,"button",39),S("click",function(i){T(e);let o=w().$implicit,s=w(3);return M(s.markAsExecuted(o,i))}),f(1,"Trade Executed"),c()}}function u3(n,t){if(n&1){let e=J();u(0,"button",40),S("click",function(i){T(e);let o=w().$implicit,s=w(3);return M(s.openCompleteModal(o,i))}),f(1,"Complete Trade"),c()}}function d3(n,t){if(n&1){let e=J();u(0,"tr")(1,"td",32),f(2),c(),u(3,"td",33),f(4),c(),u(5,"td"),f(6),c(),u(7,"td"),f(8),c(),u(9,"td"),f(10),c(),u(11,"td"),f(12),c(),u(13,"td")(14,"span",34),f(15),c()(),u(16,"td")(17,"button",35),S("click",function(){let i=T(e).$implicit,o=w(3);return M(o.openEditModal(i))}),f(18,"Edit"),c(),E(19,c3,2,0,"button",36)(20,u3,2,0,"button",37),u(21,"button",38),S("click",function(i){let o=T(e).$implicit,s=w(3);return M(s.onDeleteTradeLog(o,i))}),f(22,"Delete"),c()()()}if(n&2){let e=t.$implicit,r=w(3);h(2),L(e.trade_symbol),h(),g("ngClass",dt(11,yf,r.getDirection(e)==="LONG",r.getDirection(e)==="SHORT")),h(),L(r.getDirection(e)),h(2),O("$",r.getEntryPrice(e),""),h(2),L(e.strategy_name),h(2),L(r.getEmotion(e)),h(2),L(r.getTradeDate(e)),h(2),g("ngClass",zi(14,n3,e.trade_status==="Planned",e.trade_status==="Executing",e.trade_status==="Completed")),h(),L(e.trade_status.toLowerCase()),h(4),g("ngIf",e.trade_status==="Planned"),h(),g("ngIf",e.trade_status==="Executing")}}function f3(n,t){if(n&1&&(Dt(0),E(1,d3,23,18,"tr",31),xt()),n&2){let e=w(2);h(),g("ngForOf",e.filteredTrades)}}function p3(n,t){if(n&1){let e=J();u(0,"tr")(1,"td",32),f(2),c(),u(3,"td",33),f(4),c(),u(5,"td"),f(6),c(),u(7,"td"),f(8),c(),u(9,"td",33),f(10),Re(11,"number"),c(),u(12,"td",33),f(13),Re(14,"number"),c(),u(15,"td"),f(16),c(),u(17,"td"),f(18),c(),u(19,"td"),f(20),c(),u(21,"td")(22,"button",41),S("click",function(){let i=T(e).$implicit,o=w(3);return M(o.viewAnalysis(i))}),f(23,"View Analysis"),c()()()}if(n&2){let e=t.$implicit,r=w(3);h(2),L(e.trade_symbol),h(),g("ngClass",dt(18,yf,r.getDirection(e)==="LONG",r.getDirection(e)==="SHORT")),h(),L(r.getDirection(e)),h(2),O("$",r.getEntryPrice(e),""),h(2),O("$",r.getExitPrice(e),""),h(),g("ngClass",dt(21,yf,r.getPL(e)>0,r.getPL(e)<0)),h(),O("$",Fe(11,12,r.getPL(e),"1.2-2"),""),h(2),g("ngClass",dt(24,yf,r.getMargin(e)>0,r.getMargin(e)<0)),h(),O("",Fe(14,15,r.getMargin(e),"1.2-2"),"%"),h(3),L(r.getRR(e)),h(2),L(r.getEntryDate(e)),h(2),L(r.getExitDate(e))}}function h3(n,t){if(n&1&&(Dt(0),E(1,p3,24,27,"tr",31),xt()),n&2){let e=w(2);h(),g("ngForOf",e.filteredTrades)}}function m3(n,t){if(n&1&&(u(0,"div")(1,"div",26)(2,"div",27)(3,"h4",7),f(4),c(),u(5,"div",8),f(6),c()(),u(7,"div",28)(8,"table",29)(9,"thead"),E(10,a3,17,0,"tr",18)(11,l3,21,0,"tr",18),c(),u(12,"tbody"),E(13,f3,2,1,"ng-container",18)(14,h3,2,1,"ng-container",18),c()()(),u(15,"div",30),f(16),c()()()),n&2){let e=w();h(4),O(" ",e.activeTab==="Completed"?"Your Completed Trades":"Your Trade Plans"," "),h(2),O(" ",e.activeTab==="Completed"?"Review the performance of your completed trades":"Review and manage your "+e.activeTab.toLowerCase()+" trades"," "),h(4),g("ngIf",e.activeTab!=="Completed"),h(),g("ngIf",e.activeTab==="Completed"),h(2),g("ngIf",e.activeTab!=="Completed"),h(),g("ngIf",e.activeTab==="Completed"),h(2),O(" ",e.activeTab==="Completed"?"A list of your completed trades with performance metrics.":"A list of your recent trade plans."," ")}}function g3(n,t){n&1&&(u(0,"div",42),f(1," No trade logs found for this tab. "),c())}function v3(n,t){if(n&1){let e=J();u(0,"div",43),S("click",function(i){T(e);let o=w();return M(o.closeModalOnOverlayClick(i))}),u(1,"div",44),S("click",function(i){return T(e),M(i.stopPropagation())}),u(2,"app-individual-trade",45),S("formSubmitted",function(){T(e);let i=w();return M(i.onFormSubmitted())})("cancel",function(){T(e);let i=w();return M(i.closeModal())}),c()()()}if(n&2){let e=w();h(2),g("tradeData",e.selectedTradeLog)("mode",e.modalMode)("tradeAccountId",e.tradeAccountId)}}var _f=class n{constructor(t,e,r){this.supabaseTradeTableService=t;this.supabaseAccountService=e;this.cdr=r}tableName="tradejournal";tradeLogs=[];tradeAccounts=[];loading=!1;errorMessage="";tradeAccountId="";activeTab="Planned";get filteredTrades(){return this.tradeLogs.filter(t=>(t.trade_status||"").toLowerCase()===this.activeTab.toLowerCase())}showModal=!1;selectedTradeLog=null;modalMode="create";tradeStatus=[{status:"Planned",title:"Planning Phase"},{status:"Executing",title:"Executing Phase"},{status:"Completed",title:"Completed Phase"}];async ngOnInit(){this.loading=!0;try{await this.fetchTradeAccounts(),await this.fetchTradeLogs(),this.loading=!1,this.cdr.markForCheck()}catch{this.loading=!1,this.cdr.markForCheck()}}async fetchTradeLogs(){try{let t=await this.supabaseTradeTableService.getTradeLogsOfSelectedAccount(this.tableName,this.tradeAccountId);this.tradeLogs=t.sort((e,r)=>new Date(r.updated_time).getTime()-new Date(e.updated_time).getTime()),this.cdr.markForCheck()}catch(t){console.error("Error fetching trade logs:",t),this.errorMessage="Error fetching trade logs."}}getDirection(t){let e="";return t.planned_trade&&Array.isArray(t.planned_trade)&&t.planned_trade[0]?.trade_direction?e=t.planned_trade[0].trade_direction:t.executing_trades&&Array.isArray(t.executing_trades)&&t.executing_trades[0]?.trade_direction?e=t.executing_trades[0].trade_direction:t.trade_direction&&(e=t.trade_direction),e?e.toUpperCase():""}getEntryPrice(t){let e="";return t.planned_trade&&Array.isArray(t.planned_trade)&&t.planned_trade[0]?.entry_price?e=t.planned_trade[0].entry_price:t.executing_trades&&Array.isArray(t.executing_trades)&&t.executing_trades[0]?.entry_price?e=t.executing_trades[0].entry_price:t.entry_price&&(e=t.entry_price),e!==void 0?e:""}getExitPrice(t){return t.executing_trades&&Array.isArray(t.executing_trades)&&t.executing_trades[0]?.exit_price?t.executing_trades[0].exit_price:t.exit_price?t.exit_price:""}getPL(t){let e=parseFloat(this.getEntryPrice(t)),r=parseFloat(this.getExitPrice(t));return!isNaN(e)&&!isNaN(r)?+(r-e).toFixed(2):0}getMargin(t){let e=parseFloat(this.getEntryPrice(t)),r=parseFloat(this.getExitPrice(t));return!isNaN(e)&&e!==0&&!isNaN(r)?+((r-e)/e*100).toFixed(2):0}getRR(t){return t.rr_ratio!==void 0?t.rr_ratio:t.executing_trades&&Array.isArray(t.executing_trades)&&t.executing_trades[0]?.rr_ratio!==void 0?t.executing_trades[0].rr_ratio:""}getEntryDate(t){return t.executing_trades&&Array.isArray(t.executing_trades)&&t.executing_trades[0]?.entry_time?new Date(t.executing_trades[0].entry_time).toLocaleDateString():t.created_at?new Date(t.created_at).toLocaleDateString():""}getExitDate(t){return t.executing_trades&&Array.isArray(t.executing_trades)&&t.executing_trades[0]?.exit_time?new Date(t.executing_trades[0].exit_time).toLocaleDateString():t.updated_time?new Date(t.updated_time).toLocaleDateString():""}getTradeDate(t){return t.created_at?new Date(t.created_at).toLocaleDateString():""}viewAnalysis(t){this.selectedTradeLog=t,this.showModal=!0,this.modalMode="view"}async markAsExecuted(t,e){e.stopPropagation();try{let r=G(N({},t),{trade_status:"Executing"});await this.supabaseTradeTableService.updateTradeLogOfSelectedAccount(r,this.tableName,this.tradeAccountId),await this.fetchTradeLogs(),this.cdr.markForCheck()}catch{this.errorMessage="Error updating trade status."}}async fetchTradeAccounts(){try{if(this.tradeAccounts=await this.supabaseAccountService.getUserTradeAccounts(),this.tradeAccounts.length===0)throw this.errorMessage="No trade accounts found. Create trade account before logging trades.",new Error("No trade accounts found.");!this.tradeAccountId&&this.tradeAccounts.length>0&&(this.tradeAccountId=this.tradeAccounts[0].account_id),this.cdr.markForCheck()}catch{throw this.errorMessage="No trade accounts found. Create trade account before logging trades.",this.cdr.markForCheck(),new Error("No trade accounts found.")}}onAccountChange(t){let e=t.target;this.tradeAccountId=e.value,this.fetchTradeLogs(),this.cdr.markForCheck()}openCompleteModal(t,e){e&&e.stopPropagation(),this.selectedTradeLog=t,this.showModal=!0,this.modalMode="complete"}openEditModal(t){this.selectedTradeLog=t,this.showModal=!0,this.modalMode="edit"}async openAddModal(){await this.supabaseTradeTableService.canLogTrade()?(this.selectedTradeLog=null,this.showModal=!0,this.modalMode="create",this.cdr.markForCheck()):(this.errorMessage="You have reached the limit for today's trades logging",this.cdr.markForCheck())}onFormSubmitted(){this.fetchTradeLogs(),this.closeModal(),this.cdr.markForCheck()}closeModal(){this.showModal=!1,this.selectedTradeLog=null,this.cdr.markForCheck()}closeModalOnOverlayClick(t){this.closeModal(),this.cdr.markForCheck()}getEmotion(t){var e="None";return t.trade_status!=="Completed"?e=t.emotion_before.emotional_state_before:e=t.emotion_after.emotional_state_after,e}async onDeleteTradeLog(t,e){e.stopPropagation();try{await this.supabaseTradeTableService.deleteTradeLogOfSelectedAccount(t.tradeid,this.tableName,this.tradeAccountId),await this.fetchTradeLogs(),this.cdr.markForCheck()}catch(r){console.error("Error deleting trade log:",r),this.errorMessage="Error deleting trade log."}}static \u0275fac=function(e){return new(e||n)(D(Mt),D(Xt),D(le))};static \u0275cmp=V({type:n,selectors:[["app-trade-journal"]],decls:29,vars:8,consts:[[1,"container","mt-3"],["aria-label","breadcrumb",2,"--bs-breadcrumb-divider",`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E")`],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/home",1,"text-decoration-none"],["aria-current","page",1,"breadcrumb-item","active"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fw-bold","mb-0"],[1,"text-muted"],[1,"btn","btn-primary",3,"click"],[1,"form-group","mt-4","mb-3"],["for","accountSelector"],["id","accountSelector",1,"form-control","w-auto","d-inline-block","ms-2","btn","btn-tr",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"nav","nav-tabs","mt-4","mb-3"],["class","nav-item",4,"ngFor","ngForOf"],["class","alert alert-info",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[4,"ngIf"],["class","alert alert-warning mt-4",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"value","selected"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"alert","alert-info"],[1,"alert","alert-danger"],[1,"card","p-4"],[1,"mb-2"],[1,"table-responsive"],[1,"table","align-middle"],[1,"text-muted","mt-2",2,"font-size","0.95em"],[4,"ngFor","ngForOf"],[1,"fw-bold"],[3,"ngClass"],[1,"badge",3,"ngClass"],[1,"btn","btn-outline-secondary","btn-sm","me-1",3,"click"],["class","btn btn-outline-warning btn-sm me-1",3,"click",4,"ngIf"],["class","btn btn-outline-success btn-sm me-1",3,"click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"btn","btn-outline-warning","btn-sm","me-1",3,"click"],[1,"btn","btn-outline-success","btn-sm","me-1",3,"click"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"alert","alert-warning","mt-4"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[3,"formSubmitted","cancel","tradeData","mode","tradeAccountId"]],template:function(e,r){e&1&&(u(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),f(5,"Dashboard"),c()(),u(6,"li",5),f(7,"Trade Journal"),c()()(),u(8,"div",6)(9,"div")(10,"h2",7),f(11,"Trading Dashboard"),c(),u(12,"div",8),f(13,"Manage your trades from planning to completion"),c()(),u(14,"button",9),S("click",function(){return r.openAddModal()}),f(15," New Trade Plan "),c()(),u(16,"div",10)(17,"label",11)(18,"strong"),f(19,"Trading Account:"),c()(),u(20,"select",12),S("change",function(o){return r.onAccountChange(o)}),E(21,r3,2,3,"option",13),c()(),u(22,"ul",14),E(23,i3,3,3,"li",15),c(),E(24,o3,2,0,"div",16)(25,s3,2,1,"div",17)(26,m3,17,7,"div",18)(27,g3,2,0,"div",19),c(),E(28,v3,3,3,"div",20)),e&2&&(h(21),g("ngForOf",r.tradeAccounts),h(2),g("ngForOf",mu(7,t3)),h(),g("ngIf",r.loading),h(),g("ngIf",r.errorMessage),h(),g("ngIf",r.filteredTrades.length>0),h(),g("ngIf",!r.loading&&r.filteredTrades.length===0),h(),g("ngIf",r.showModal))},dependencies:[Ce,Zt,Yt,B,ft,ze,K,es,Os,Xe],styles:[".card[_ngcontent-%COMP%]{transition:transform .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.trade-status-indicator[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;padding:5px 10px;border-radius:5px;color:#fff;font-size:.7rem}.status-planned[_ngcontent-%COMP%]{background-color:#007bff}.status-executing[_ngcontent-%COMP%]{background-color:#ffc107}.status-completed[_ngcontent-%COMP%]{background-color:#28a745}.status-planned-card[_ngcontent-%COMP%]{border-left:4px solid #007bff!important}.status-executing-card[_ngcontent-%COMP%]{border-left:4px solid #ffc107!important}.status-completed-card[_ngcontent-%COMP%]{border-left:4px solid #28a745!important}.delete-icon[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;display:none;color:red;cursor:pointer}.card[_ngcontent-%COMP%]:hover   .delete-icon[_ngcontent-%COMP%]{display:block}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100dvw;height:100dvh;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1050}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;max-width:90vw;position:relative;max-height:98dvh;overflow-y:auto}"]})};var bf=class n{constructor(t){this.supabaseService=t;this.supabase=this.supabaseService.GetClient()}supabase;async getTradeAnalytics(){let t=this.supabaseService.user();if(!t)throw new Error("User not authenticated");let{data:e,error:r}=await this.supabase.rpc("get_user_trade_analytics",{user_id:t.id});if(r)throw console.error("Error fetching trade analytics:",r),r;return e}static \u0275fac=function(e){return new(e||n)(F(Ie))};static \u0275prov=P({token:n,factory:n.\u0275fac,providedIn:"root"})};function _3(n,t){if(n&1&&(u(0,"div",18)(1,"div",19)(2,"div",7)(3,"div",20),f(4),c(),u(5,"h6",16),f(6),c(),u(7,"p",21),f(8),Re(9,"number"),c()()()()),n&2){let e=t.$implicit;h(4),L(e.icon),h(2),L(e.label),h(2),L(e.format?Fe(9,3,e.value,e.format):e.value)}}function b3(n,t){if(n&1&&(u(0,"div",22)(1,"div",19)(2,"div",7)(3,"div",23),f(4),c(),u(5,"h6",16),f(6),c(),u(7,"p",24),f(8),Re(9,"number"),c()()()()),n&2){let e=t.$implicit;h(4),L(e.icon),h(2),L(e.label),h(2),L(Fe(9,3,e.value,e.format))}}function w3(n,t){if(n&1&&(u(0,"div",1)(1,"h3",2),f(2,"\u{1F4CA} Trade Analytics Overview"),c(),u(3,"div",3),E(4,_3,10,6,"div",4),c(),u(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"h6",8),f(10,"\u{1F3C6} Win Rate"),c(),u(11,"div",9)(12,"div",10),f(13),Re(14,"number"),c()()()()(),u(15,"div",5)(16,"div",6)(17,"div",7)(18,"h6",8),f(19,"\u{1F4C9} Loss Rate"),c(),u(20,"div",9)(21,"div",11),f(22),Re(23,"number"),c()()()()()(),u(24,"div",12),E(25,b3,10,6,"div",13),c(),u(26,"div",14)(27,"div",5)(28,"div",15)(29,"div",7)(30,"h6",16),f(31,"\u23F1\uFE0F Avg Trade Duration (Seconds)"),c(),u(32,"p",17),f(33),Re(34,"number"),c()()()(),u(35,"div",5)(36,"div",15)(37,"div",7)(38,"h6",16),f(39,"\u{1F3AF} Avg Entry Slippage"),c(),u(40,"p",17),f(41),Re(42,"number"),c()()()()()()),n&2){let e=w();h(4),g("ngForOf",e.kpiList),h(8),Gt("width",e.analytics.win_rate*100,"%"),h(),O(" ",Fe(14,10,e.analytics.win_rate*100,"1.0-0"),"% "),h(8),Gt("width",e.analytics.loss_rate*100,"%"),h(),O(" ",Fe(23,13,e.analytics.loss_rate*100,"1.0-0"),"% "),h(3),g("ngForOf",e.extraStats),h(8),L(Fe(34,16,e.analytics.average_trade_duration_seconds,"1.0-0")),h(8),L(Fe(42,19,e.analytics.average_entry_slippage,"1.2-2"))}}var wf=class n{constructor(t){this.supabaseAnalytic=t}analytics=null;kpiList=[];extraStats=[];async ngOnInit(){this.analytics=await this.supabaseAnalytic.getTradeAnalytics(),this.analytics&&this.initializeCards(),console.log(this.analytics)}initializeCards(){this.kpiList=[{label:"Discipline Score",value:this.analytics.discipline_score,icon:"\u{1F3AF}",format:"1.1-1"},{label:"Profit Factor",value:this.analytics.profit_factor,icon:"\u{1F4B0}",format:"1.2-2"},{label:"Total P/L ($)",value:this.analytics.total_realized_profit,icon:"\u{1F4B5}",format:"1.2-2"},{label:"Avg P/L ($)",value:this.analytics.average_profit_per_trade,icon:"\u2696\uFE0F",format:"1.2-2"}],this.extraStats=[{label:"Avg. Confidence Drift (During)",value:this.analytics.avg_confidence_drift_before_during,icon:"\u{1F9E0}",format:"1.1-1"},{label:"Avg. Confidence Drift (After)",value:this.analytics.avg_confidence_drift_before_after,icon:"\u{1F9D8}",format:"1.1-1"},{label:"Avg. Risk/Reward Ratio",value:this.analytics.average_risk_reward_ratio,icon:"\u{1F3B2}",format:"1.2-2"}]}static \u0275fac=function(e){return new(e||n)(D(bf))};static \u0275cmp=V({type:n,selectors:[["app-trade-analytic"]],decls:1,vars:1,consts:[["class","container mt-4",4,"ngIf"],[1,"container","mt-4"],[1,"text-center","mb-4","fw-bold"],[1,"row","g-3","mb-4"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"card","shadow","border-0"],[1,"card-body"],[1,"mb-2","fw-bold"],[1,"progress",2,"height","20px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-danger"],[1,"row","g-3"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"row","g-3","mt-4"],[1,"card","text-center","shadow","border-0"],[1,"text-muted"],[1,"h4","fw-bold","text-info","mt-2"],[1,"col-md-3"],[1,"card","text-center","shadow","border-0","h-100"],[1,"display-6","mb-2"],[1,"h5","fw-bold","mt-2","text-primary"],[1,"col-md-4"],[1,"mb-1"],[1,"h5","fw-bold","mt-2","text-dark"]],template:function(e,r){e&1&&E(0,w3,43,22,"div",0),e&2&&g("ngIf",r.analytics)},dependencies:[B,ze,K,es],styles:[".card[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 4px 16px #00000026}.progress-bar[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600}"]})};var y1=[{path:"",component:zd,canActivate:[ll]},{path:"home",component:xd,canActivate:[pt]},{path:"pretrades",component:jd,canActivate:[pt]},{path:"pretradelog",component:Ms,canActivate:[pt]},{path:"posttrades",component:Ud,canActivate:[pt]},{path:"posttradelog",component:As,canActivate:[pt]},{path:"emotions",component:mf,canActivate:[pt]},{path:"tradejournal",component:_f,canActivate:[pt]},{path:"individualTrade",component:Os,canActivate:[pt]},{path:"meditationhub",component:Jd,canActivate:[pt]},{path:"analytics",component:wf,canActivate:[pt]},{path:"tradeaccounts",component:df,canActivate:[pt]},{path:"useraccount",component:ff,canActivate:[pt]},{path:"admin/emotionquestion",component:Bd,canActivate:[pt]},{path:"admin/meditationvideo",component:hf,canActivate:[pt]},{path:"auth/forgot-password",component:gf,canActivate:[ll]},{path:"auth/update-password",component:vf,canActivate:[pt]},{path:"**",redirectTo:""}];var he=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(he||{}),ur="*";function _1(n,t=null){return{type:he.Sequence,steps:n,options:t}}function z0(n){return{type:he.Style,styles:n,offset:null}}var vi=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},vl=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){let t=this.players.reduce((e,r)=>e===null||r.totalTime>e.totalTime?r:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},Cf="!";function b1(n){return new k(3e3,!1)}function C3(){return new k(3100,!1)}function E3(){return new k(3101,!1)}function S3(n){return new k(3001,!1)}function D3(n){return new k(3003,!1)}function x3(n){return new k(3004,!1)}function I3(n,t){return new k(3005,!1)}function T3(){return new k(3006,!1)}function M3(){return new k(3007,!1)}function A3(n,t){return new k(3008,!1)}function k3(n){return new k(3002,!1)}function N3(n,t,e,r,i){return new k(3010,!1)}function P3(){return new k(3011,!1)}function O3(){return new k(3012,!1)}function R3(){return new k(3200,!1)}function F3(){return new k(3202,!1)}function L3(){return new k(3013,!1)}function V3(n){return new k(3014,!1)}function j3(n){return new k(3015,!1)}function U3(n){return new k(3016,!1)}function B3(n,t){return new k(3404,!1)}function $3(n){return new k(3502,!1)}function H3(n){return new k(3503,!1)}function z3(){return new k(3300,!1)}function q3(n){return new k(3504,!1)}function G3(n){return new k(3301,!1)}function W3(n,t){return new k(3302,!1)}function Q3(n){return new k(3303,!1)}function K3(n,t){return new k(3400,!1)}function Z3(n){return new k(3401,!1)}function Y3(n){return new k(3402,!1)}function J3(n,t){return new k(3505,!1)}function yi(n){switch(n.length){case 0:return new vi;case 1:return n[0];default:return new vl(n)}}function O1(n,t,e=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(t.forEach(l=>{let d=l.get("offset"),p=d==s,m=p&&a||new Map;l.forEach((y,v)=>{let b=v,C=y;if(v!=="offset")switch(b=n.normalizePropertyName(b,i),C){case Cf:C=e.get(v);break;case ur:C=r.get(v);break;default:C=n.normalizeStyleValue(v,b,C,i);break}m.set(b,C)}),p||o.push(m),a=m,s=d}),i.length)throw $3(i);return o}function fv(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&q0(e,"start",n)));break;case"done":n.onDone(()=>r(e&&q0(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&q0(e,"destroy",n)));break}}function q0(n,t,e){let r=e.totalTime,i=!!e.disabled,o=pv(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function pv(n,t,e,r,i="",o=0,s){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function _n(n,t,e){let r=n.get(t);return r||n.set(t,r=e),r}function w1(n){let t=n.indexOf(":"),e=n.substring(1,t),r=n.slice(t+1);return[e,r]}var X3=typeof document>"u"?null:document.documentElement;function hv(n){let t=n.parentNode||n.host||null;return t===X3?null:t}function ej(n){return n.substring(1,6)=="ebkit"}var po=null,C1=!1;function tj(n){po||(po=nj()||{},C1=po.style?"WebkitAppearance"in po.style:!1);let t=!0;return po.style&&!ej(n)&&(t=n in po.style,!t&&C1&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in po.style)),t}function nj(){return typeof document<"u"?document.body:null}function R1(n,t){for(;t;){if(t===n)return!0;t=hv(t)}return!1}function F1(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let r=n.querySelector(t);return r?[r]:[]}var mv=(()=>{class n{validateStyleProperty(e){return tj(e)}containsElement(e,r){return R1(e,r)}getParentElement(e){return hv(e)}query(e,r,i){return F1(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,o,s,a=[],l){return new vi(i,o)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})(),go=class{static NOOP=new mv},vo=class{};var rj=1e3,L1="{{",ij="}}",V1="ng-enter",Y0="ng-leave",Ef="ng-trigger",Tf=".ng-trigger",E1="ng-animating",J0=".ng-animating";function zr(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:X0(parseFloat(t[1]),t[2])}function X0(n,t){switch(t){case"s":return n*rj;default:return n}}function Mf(n,t,e){return n.hasOwnProperty("duration")?n:oj(n,t,e)}function oj(n,t,e){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,o=0,s="";if(typeof n=="string"){let a=n.match(r);if(a===null)return t.push(b1(n)),{duration:0,delay:0,easing:""};i=X0(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=X0(parseFloat(l),a[4]));let d=a[5];d&&(s=d)}else i=n;if(!e){let a=!1,l=t.length;i<0&&(t.push(C3()),a=!0),o<0&&(t.push(E3()),a=!0),a&&t.splice(l,0,b1(n))}return{duration:i,delay:o,easing:s}}function sj(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function dr(n,t,e){t.forEach((r,i)=>{let o=gv(i);e&&!e.has(i)&&e.set(i,n.style[o]),n.style[o]=r})}function mo(n,t){t.forEach((e,r)=>{let i=gv(r);n.style[i]=""})}function yl(n){return Array.isArray(n)?n.length==1?n[0]:_1(n):n}function aj(n,t,e){let r=t.params||{},i=j1(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||e.push(S3(o))})}var ev=new RegExp(`${L1}\\s*(.+?)\\s*${ij}`,"g");function j1(n){let t=[];if(typeof n=="string"){let e;for(;e=ev.exec(n);)t.push(e[1]);ev.lastIndex=0}return t}function bl(n,t,e){let r=`${n}`,i=r.replace(ev,(o,s)=>{let a=t[s];return a==null&&(e.push(D3(s)),a=""),a.toString()});return i==r?n:i}var lj=/-+([a-z0-9])/g;function gv(n){return n.replace(lj,(...t)=>t[1].toUpperCase())}function cj(n,t){return n===0||t===0}function uj(n,t,e){if(e.size&&t.length){let r=t[0],i=[];if(e.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<t.length;o++){let s=t[o];i.forEach(a=>s.set(a,vv(n,a)))}}return t}function yn(n,t,e){switch(t.type){case he.Trigger:return n.visitTrigger(t,e);case he.State:return n.visitState(t,e);case he.Transition:return n.visitTransition(t,e);case he.Sequence:return n.visitSequence(t,e);case he.Group:return n.visitGroup(t,e);case he.Animate:return n.visitAnimate(t,e);case he.Keyframes:return n.visitKeyframes(t,e);case he.Style:return n.visitStyle(t,e);case he.Reference:return n.visitReference(t,e);case he.AnimateChild:return n.visitAnimateChild(t,e);case he.AnimateRef:return n.visitAnimateRef(t,e);case he.Query:return n.visitQuery(t,e);case he.Stagger:return n.visitStagger(t,e);default:throw x3(t.type)}}function vv(n,t){return window.getComputedStyle(n)[t]}var dj=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Af=class extends vo{normalizePropertyName(t,e){return gv(t)}normalizeStyleValue(t,e,r,i){let o="",s=r.toString().trim();if(dj.has(e)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(I3(t,r))}return s+o}};var kf="*";function fj(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>pj(r,e,t)):e.push(n),e}function pj(n,t,e){if(n[0]==":"){let l=hj(n,e);if(typeof l=="function"){t.push(l);return}n=l}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return e.push(j3(n)),t;let i=r[1],o=r[2],s=r[3];t.push(S1(i,s));let a=i==kf&&s==kf;o[0]=="<"&&!a&&t.push(S1(s,i))}function hj(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(U3(n)),"* => *"}}var Sf=new Set(["true","1"]),Df=new Set(["false","0"]);function S1(n,t){let e=Sf.has(n)||Df.has(n),r=Sf.has(t)||Df.has(t);return(i,o)=>{let s=n==kf||n==i,a=t==kf||t==o;return!s&&e&&typeof i=="boolean"&&(s=i?Sf.has(n):Df.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?Sf.has(t):Df.has(t)),s&&a}}var U1=":self",mj=new RegExp(`s*${U1}s*,?`,"g");function B1(n,t,e,r){return new tv(n).build(t,e,r)}var D1="",tv=class{_driver;constructor(t){this._driver=t}build(t,e,r){let i=new nv(e);return this._resetContextStyleTimingState(i),yn(this,yl(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector=D1,t.collectedStyles=new Map,t.collectedStyles.set(D1,new Map),t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0,o=[],s=[];return t.name.charAt(0)=="@"&&e.errors.push(T3()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==he.State){let l=a,d=l.name;d.toString().split(/\s*,\s*/).forEach(p=>{l.name=p,o.push(this.visitState(l,e))}),l.name=d}else if(a.type==he.Transition){let l=this.visitTransition(a,e);r+=l.queryCount,i+=l.depCount,s.push(l)}else e.errors.push(M3())}),{type:he.Trigger,name:t.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(t,e){let r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{j1(l).forEach(d=>{s.hasOwnProperty(d)||o.add(d)})})}),o.size&&e.errors.push(A3(t.name,[...o.values()]))}return{type:he.State,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let r=yn(this,yl(t.animation),e),i=fj(t.expr,e.errors);return{type:he.Transition,matchers:i,animation:r,queryCount:e.queryCount,depCount:e.depCount,options:ho(t.options)}}visitSequence(t,e){return{type:he.Sequence,steps:t.steps.map(r=>yn(this,r,e)),options:ho(t.options)}}visitGroup(t,e){let r=e.currentTime,i=0,o=t.steps.map(s=>{e.currentTime=r;let a=yn(this,s,e);return i=Math.max(i,e.currentTime),a});return e.currentTime=i,{type:he.Group,steps:o,options:ho(t.options)}}visitAnimate(t,e){let r=_j(t.timings,e.errors);e.currentAnimateTimings=r;let i,o=t.styles?t.styles:z0({});if(o.type==he.Keyframes)i=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;let d={};r.easing&&(d.easing=r.easing),s=z0(d)}e.currentTime+=r.duration+r.delay;let l=this.visitStyle(s,e);l.isEmptyStep=a,i=l}return e.currentAnimateTimings=null,{type:he.Animate,timings:r,style:i,options:null}}visitStyle(t,e){let r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){let r=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of i)typeof a=="string"?a===ur?r.push(a):e.errors.push(k3(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(L1)>=0){o=!0;break}}}),{type:he.Style,styles:r,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){let r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let d=e.collectedStyles.get(e.currentQuerySelector),p=d.get(l),m=!0;p&&(o!=i&&o>=p.startTime&&i<=p.endTime&&(e.errors.push(N3(l,p.startTime,p.endTime,o,i)),m=!1),o=p.startTime),m&&d.set(l,{startTime:o,endTime:i}),e.options&&aj(a,e.options,e.errors)})})}visitKeyframes(t,e){let r={type:he.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(P3()),r;let i=1,o=0,s=[],a=!1,l=!1,d=0,p=t.steps.map(A=>{let j=this._makeStyleAst(A,e),U=j.offset!=null?j.offset:yj(j.styles),q=0;return U!=null&&(o++,q=j.offset=U),l=l||q<0||q>1,a=a||q<d,d=q,s.push(q),j});l&&e.errors.push(O3()),a&&e.errors.push(R3());let m=t.steps.length,y=0;o>0&&o<m?e.errors.push(F3()):o==0&&(y=i/(m-1));let v=m-1,b=e.currentTime,C=e.currentAnimateTimings,x=C.duration;return p.forEach((A,j)=>{let U=y>0?j==v?1:y*j:s[j],q=U*x;e.currentTime=b+C.delay+q,C.duration=q,this._validateStyleAst(A,e),A.offset=U,r.styles.push(A)}),r}visitReference(t,e){return{type:he.Reference,animation:yn(this,yl(t.animation),e),options:ho(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:he.AnimateChild,options:ho(t.options)}}visitAnimateRef(t,e){return{type:he.AnimateRef,animation:this.visitReference(t.animation,e),options:ho(t.options)}}visitQuery(t,e){let r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;let[o,s]=gj(t.selector);e.currentQuerySelector=r.length?r+" "+o:o,_n(e.collectedStyles,e.currentQuerySelector,new Map);let a=yn(this,yl(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:he.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:ho(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(L3());let r=t.timings==="full"?{duration:0,delay:0,easing:"full"}:Mf(t.timings,e.errors,!0);return{type:he.Stagger,animation:yn(this,yl(t.animation),e),timings:r,options:null}}};function gj(n){let t=!!n.split(/\s*,\s*/).find(e=>e==U1);return t&&(n=n.replace(mj,"")),n=n.replace(/@\*/g,Tf).replace(/@\w+/g,e=>Tf+"-"+e.slice(1)).replace(/:animating/g,J0),[n,t]}function vj(n){return n?N({},n):null}var nv=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function yj(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let r=e;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function _j(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=Mf(n,t).duration;return G0(o,0,"")}let e=n;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=G0(0,0,"");return o.dynamic=!0,o.strValue=e,o}let i=Mf(e,t);return G0(i.duration,i.delay,i.easing)}function ho(n){return n?(n=N({},n),n.params&&(n.params=vj(n.params))):n={},n}function G0(n,t,e){return{duration:n,delay:t,easing:e}}function yv(n,t,e,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var wl=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},bj=1,wj=":enter",Cj=new RegExp(wj,"g"),Ej=":leave",Sj=new RegExp(Ej,"g");function $1(n,t,e,r,i,o=new Map,s=new Map,a,l,d=[]){return new rv().buildKeyframes(n,t,e,r,i,o,s,a,l,d)}var rv=class{buildKeyframes(t,e,r,i,o,s,a,l,d,p=[]){d=d||new wl;let m=new iv(t,e,d,i,o,p,[]);m.options=l;let y=l.delay?zr(l.delay):0;m.currentTimeline.delayNextStep(y),m.currentTimeline.setStyles([s],null,m.errors,l),yn(this,r,m);let v=m.timelines.filter(b=>b.containsAnimation());if(v.length&&a.size){let b;for(let C=v.length-1;C>=0;C--){let x=v[C];if(x.element===e){b=x;break}}b&&!b.allowOnlyTimelineStyles()&&b.setStyles([a],null,m.errors,l)}return v.length?v.map(b=>b.buildKeyframes()):[yv(e,[],[],[],0,y,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let r=e.subInstructions.get(e.element);if(r){let i=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){let r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,r),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,r){for(let i of t){let o=i?.delay;if(o){let s=typeof o=="number"?o:zr(bl(o,i?.params??{},e.errors));r.delayNextStep(s)}}}_visitSubInstructions(t,e,r){let o=e.currentTimeline.currentTime,s=r.duration!=null?zr(r.duration):null,a=r.delay!=null?zr(r.delay):null;return s!==0&&t.forEach(l=>{let d=e.appendInstructionToTimeline(l,s,a);o=Math.max(o,d.duration+d.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),yn(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==he.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Nf);let s=zr(o.delay);i.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>yn(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?zr(t.options.delay):0;t.steps.forEach(s=>{let a=e.createSubContext(t.options);o&&a.delayNextStep(o),yn(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let r=t.strValue,i=e.params?bl(r,e.params,e.errors):r;return Mf(i,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());let o=t.style;o.type==he.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(r.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(o):r.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let r=e.currentAnimateTimings,i=e.currentTimeline.duration,o=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,t.styles.forEach(l=>{let d=l.offset||0;a.forwardTime(d*o),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(i+o),e.previousNode=t}visitQuery(t,e){let r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?zr(i.delay):0;o&&(e.previousNode.type===he.Style||r==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Nf);let s=r,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((d,p)=>{e.currentQueryIndex=p;let m=e.createSubContext(t.options,d);o&&m.delayNextStep(o),d===e.element&&(l=m.currentTimeline),yn(this,t.animation,m),m.currentTimeline.applyStylesToKeyframe();let y=m.currentTimeline.currentTime;s=Math.max(s,y)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let r=e.parentContext,i=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1),l=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime;break}let p=e.currentTimeline;l&&p.delayNextStep(l);let m=p.currentTime;yn(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}},Nf={},iv=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Nf;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,r,i,o,s,a,l){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new Pf(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let r=t,i=this.options;r.duration!=null&&(i.duration=zr(r.duration)),r.delay!=null&&(i.delay=zr(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=bl(o[a],s,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){let i=e||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=Nf,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){let i={duration:e??t.duration,delay:this.currentTimeline.currentTime+(r??0)+t.delay,easing:""},o=new ov(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,o,s){let a=[];if(i&&a.push(this.element),t.length>0){t=t.replace(Cj,"."+this._enterClassName),t=t.replace(Sj,"."+this._leaveClassName);let l=r!=1,d=this._driver.query(this.element,t,l);r!==0&&(d=r<0?d.slice(d.length+r,d.length):d.slice(0,r)),a.push(...d)}return!o&&a.length==0&&s.push(V3(e)),a}},Pf=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=bj,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||ur),this._currentKeyframe.set(e,ur);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&this._previousKeyframe.set("easing",e);let o=i&&i.params||{},s=Dj(t,this._globalTimelineStyles);for(let[a,l]of s){let d=bl(l,o,r);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ur),this._updateStyle(a,d)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,r)=>{let i=this._styleSummary.get(r);(!i||e.time>i.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,l)=>{let d=new Map([...this._backFill,...a]);d.forEach((p,m)=>{p===Cf?t.add(m):p===ur&&e.add(m)}),r||d.set("offset",l/this.duration),i.push(d)});let o=[...t.values()],s=[...e.values()];if(r){let a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return yv(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},ov=class extends Pf{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,r,i,o,s,a=!1){super(t,e,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],s=r+e,a=e/s,l=new Map(t[0]);l.set("offset",0),o.push(l);let d=new Map(t[0]);d.set("offset",x1(a)),o.push(d);let p=t.length-1;for(let m=1;m<=p;m++){let y=new Map(t[m]),v=y.get("offset"),b=e+v*r;y.set("offset",x1(b/s)),o.push(y)}r=s,e=0,i="",t=o}return yv(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}};function x1(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function Dj(n,t){let e=new Map,r;return n.forEach(i=>{if(i==="*"){r??=t.keys();for(let o of r)e.set(o,ur)}else for(let[o,s]of i)e.set(o,s)}),e}function I1(n,t,e,r,i,o,s,a,l,d,p,m,y){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:d,postStyleProps:p,totalTime:m,errors:y}}var W0={},Of=class{_triggerName;ast;_stateStyles;constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return xj(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){let i=this._stateStyles.get("*");return t!==void 0&&(i=this._stateStyles.get(t?.toString())||i),i?i.buildStyles(e,r):new Map}build(t,e,r,i,o,s,a,l,d,p){let m=[],y=this.ast.options&&this.ast.options.params||W0,v=a&&a.params||W0,b=this.buildStyles(r,v,m),C=l&&l.params||W0,x=this.buildStyles(i,C,m),A=new Set,j=new Map,U=new Map,q=i==="void",Q={params:H1(C,y),delay:this.ast.options?.delay},De=p?[]:$1(t,e,this.ast.animation,o,s,b,x,Q,d,m),Te=0;return De.forEach(qe=>{Te=Math.max(qe.duration+qe.delay,Te)}),m.length?I1(e,this._triggerName,r,i,q,b,x,[],[],j,U,Te,m):(De.forEach(qe=>{let Ft=qe.element,yo=_n(j,Ft,new Set);qe.preStyleProps.forEach(_i=>yo.add(_i));let _v=_n(U,Ft,new Set);qe.postStyleProps.forEach(_i=>_v.add(_i)),Ft!==e&&A.add(Ft)}),I1(e,this._triggerName,r,i,q,b,x,De,[...A.values()],j,U,Te))}};function xj(n,t,e,r,i){return n.some(o=>o(t,e,r,i))}function H1(n,t){let e=N({},t);return Object.entries(n).forEach(([r,i])=>{i!=null&&(e[r]=i)}),e}var sv=class{styles;defaultParams;normalizer;constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){let r=new Map,i=H1(t,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=bl(s,i,e));let l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),r.set(a,s)})}),r}};function Ij(n,t,e){return new av(n,t,e)}var av=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,e.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new sv(i.style,o,r))}),T1(this.states,"true","1"),T1(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new Of(t,i,this.states))}),this.fallbackTransition=Tj(t,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(s=>s.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}};function Tj(n,t,e){let r=[(s,a)=>!0],i={type:he.Sequence,steps:[],options:null},o={type:he.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new Of(n,o,t)}function T1(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var Mj=new wl,lv=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r}register(t,e){let r=[],i=[],o=B1(this._driver,e,r,i);if(r.length)throw H3(r);this._animations.set(t,o)}_buildPlayer(t,e,r){let i=t.element,o=O1(this._normalizer,t.keyframes,e,r);return this._driver.animate(i,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){let i=[],o=this._animations.get(t),s,a=new Map;if(o?(s=$1(this._driver,e,o,V1,Y0,new Map,new Map,r,Mj,i),s.forEach(p=>{let m=_n(a,p.element,new Map);p.postStyleProps.forEach(y=>m.set(y,null))})):(i.push(z3()),s=[]),i.length)throw q3(i);a.forEach((p,m)=>{p.forEach((y,v)=>{p.set(v,this._driver.computeStyle(m,v,ur))})});let l=s.map(p=>{let m=a.get(p.element);return this._buildPlayer(p,new Map,m)}),d=yi(l);return this._playersById.set(t,d),d.onDestroy(()=>this.destroy(t)),this.players.push(d),d}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw G3(t);return e}listen(t,e,r,i){let o=pv(e,"","","");return fv(this._getPlayer(t),r,o,i),()=>{}}command(t,e,r,i){if(r=="register"){this.register(t,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(t,e,s);return}let o=this._getPlayer(t);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t);break}}},M1="ng-animate-queued",Aj=".ng-animate-queued",Q0="ng-animate-disabled",kj=".ng-animate-disabled",Nj="ng-star-inserted",Pj=".ng-star-inserted",Oj=[],z1={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Rj={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Wn="__ng_removed",Cl=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let r=t&&t.hasOwnProperty("value"),i=r?t.value:t;if(this.value=Lj(i),r){let o=t,{value:s}=o,a=_o(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let r=this.options.params;Object.keys(e).forEach(i=>{r[i]==null&&(r[i]=e[i])})}}},_l="void",K0=new Cl(_l),cv=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this._hostClassName="ng-tns-"+t,Nn(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.has(e))throw W3(r,e);if(r==null||r.length==0)throw Q3(e);if(!Vj(r))throw K3(r,e);let o=_n(this._elementListeners,t,[]),s={name:e,phase:r,callback:i};o.push(s);let a=_n(this._engine.statesByElement,t,new Map);return a.has(e)||(Nn(t,Ef),Nn(t,Ef+"-"+e),a.set(e,K0)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw Z3(t);return e}trigger(t,e,r,i=!0){let o=this._getTrigger(e),s=new El(this.id,e,t),a=this._engine.statesByElement.get(t);a||(Nn(t,Ef),Nn(t,Ef+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e),d=new Cl(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&d.absorbOptions(l.options),a.set(e,d),l||(l=K0),!(d.value===_l)&&l.value===d.value){if(!Bj(l.params,d.params)){let C=[],x=o.matchStyles(l.value,l.params,C),A=o.matchStyles(d.value,d.params,C);C.length?this._engine.reportError(C):this._engine.afterFlush(()=>{mo(t,x),dr(t,A)})}return}let y=_n(this._engine.playersByElement,t,[]);y.forEach(C=>{C.namespaceId==this.id&&C.triggerName==e&&C.queued&&C.destroy()});let v=o.matchTransition(l.value,d.value,t,d.params),b=!1;if(!v){if(!i)return;v=o.fallbackTransition,b=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:v,fromState:l,toState:d,player:s,isFallbackTransition:b}),b||(Nn(t,M1),s.onStart(()=>{Rs(t,M1)})),s.onDone(()=>{let C=this.players.indexOf(s);C>=0&&this.players.splice(C,1);let x=this._engine.playersByElement.get(t);if(x){let A=x.indexOf(s);A>=0&&x.splice(A,1)}}),this.players.push(s),y.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let r=this._engine.driver.query(t,Tf,!0);r.forEach(i=>{if(i[Wn])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){let o=this._engine.statesByElement.get(t),s=new Map;if(o){let a=[];if(o.forEach((l,d)=>{if(s.set(d,l.value),this._triggers.has(d)){let p=this.trigger(t,d,_l,i);p&&a.push(p)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),r&&yi(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){let i=new Set;e.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let l=this._triggers.get(s).fallbackTransition,d=r.get(s)||K0,p=new Cl(_l),m=new El(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:d,toState:p,player:m,isFallbackTransition:!0})})}}removeNode(t,e){let r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else{let s=t;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{let o=t[Wn];(!o||o===z1)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){Nn(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let l=pv(o,r.triggerName,r.fromState.value,r.toState.value);l._data=t,fv(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},uv=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){let r=new cv(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let l=i.get(a);if(l){let d=r.indexOf(l);r.splice(d+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(t);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,r=this.statesByElement.get(t);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&e.add(o)}}return e}trigger(t,e,r,i){if(xf(e)){let o=this._fetchNamespace(t);if(o)return o.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!xf(e))return;let o=e[Wn];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){let s=this._fetchNamespace(t);s&&s.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Nn(t,Q0)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Rs(t,Q0))}removeNode(t,e,r){if(xf(e)){let i=t?this._fetchNamespace(t):null;i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r);let o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,r,i,o){this.collectedLeaveElements.push(e),e[Wn]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,r,i,o){return xf(e)?this._fetchNamespace(t).listen(e,r,i,o):()=>{}}_buildInstruction(t,e,r,i,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,Tf,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,J0,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return yi(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[Wn];if(e&&e.setForRemoval){if(t[Wn]=z1,e.namespaceId){this.destroyInnerAnimations(t);let r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(Q0)&&this.markElementAsDisabled(t,!1),this.driver.query(t,kj,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Nn(i,Nj)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],e.length?yi(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw Y3(t)}_flushAnimations(t,e){let r=new wl,i=[],o=new Map,s=[],a=new Map,l=new Map,d=new Map,p=new Set;this.disabledNodes.forEach(H=>{p.add(H);let W=this.driver.query(H,Aj,!0);for(let X=0;X<W.length;X++)p.add(W[X])});let m=this.bodyNode,y=Array.from(this.statesByElement.keys()),v=N1(y,this.collectedEnterElements),b=new Map,C=0;v.forEach((H,W)=>{let X=V1+C++;b.set(W,X),H.forEach(be=>Nn(be,X))});let x=[],A=new Set,j=new Set;for(let H=0;H<this.collectedLeaveElements.length;H++){let W=this.collectedLeaveElements[H],X=W[Wn];X&&X.setForRemoval&&(x.push(W),A.add(W),X.hasAnimation?this.driver.query(W,Pj,!0).forEach(be=>A.add(be)):j.add(W))}let U=new Map,q=N1(y,Array.from(A));q.forEach((H,W)=>{let X=Y0+C++;U.set(W,X),H.forEach(be=>Nn(be,X))}),t.push(()=>{v.forEach((H,W)=>{let X=b.get(W);H.forEach(be=>Rs(be,X))}),q.forEach((H,W)=>{let X=U.get(W);H.forEach(be=>Rs(be,X))}),x.forEach(H=>{this.processLeaveNode(H)})});let Q=[],De=[];for(let H=this._namespaceList.length-1;H>=0;H--)this._namespaceList[H].drainQueuedTransitions(e).forEach(X=>{let be=X.player,ct=X.element;if(Q.push(be),this.collectedEnterElements.length){let bt=ct[Wn];if(bt&&bt.setForMove){if(bt.previousTriggersValues&&bt.previousTriggersValues.has(X.triggerName)){let bi=bt.previousTriggersValues.get(X.triggerName),bn=this.statesByElement.get(X.element);if(bn&&bn.has(X.triggerName)){let Sl=bn.get(X.triggerName);Sl.value=bi,bn.set(X.triggerName,Sl)}}be.destroy();return}}let Qn=!m||!this.driver.containsElement(m,ct),en=U.get(ct),qr=b.get(ct),Ge=this._buildInstruction(X,r,qr,en,Qn);if(Ge.errors&&Ge.errors.length){De.push(Ge);return}if(Qn){be.onStart(()=>mo(ct,Ge.fromStyles)),be.onDestroy(()=>dr(ct,Ge.toStyles)),i.push(be);return}if(X.isFallbackTransition){be.onStart(()=>mo(ct,Ge.fromStyles)),be.onDestroy(()=>dr(ct,Ge.toStyles)),i.push(be);return}let Cv=[];Ge.timelines.forEach(bt=>{bt.stretchStartingKeyframe=!0,this.disabledNodes.has(bt.element)||Cv.push(bt)}),Ge.timelines=Cv,r.append(ct,Ge.timelines);let Z1={instruction:Ge,player:be,element:ct};s.push(Z1),Ge.queriedElements.forEach(bt=>_n(a,bt,[]).push(be)),Ge.preStyleProps.forEach((bt,bi)=>{if(bt.size){let bn=l.get(bi);bn||l.set(bi,bn=new Set),bt.forEach((Sl,Bf)=>bn.add(Bf))}}),Ge.postStyleProps.forEach((bt,bi)=>{let bn=d.get(bi);bn||d.set(bi,bn=new Set),bt.forEach((Sl,Bf)=>bn.add(Bf))})});if(De.length){let H=[];De.forEach(W=>{H.push(J3(W.triggerName,W.errors))}),Q.forEach(W=>W.destroy()),this.reportError(H)}let Te=new Map,qe=new Map;s.forEach(H=>{let W=H.element;r.has(W)&&(qe.set(W,W),this._beforeAnimationBuild(H.player.namespaceId,H.instruction,Te))}),i.forEach(H=>{let W=H.element;this._getPreviousPlayers(W,!1,H.namespaceId,H.triggerName,null).forEach(be=>{_n(Te,W,[]).push(be),be.destroy()})});let Ft=x.filter(H=>P1(H,l,d)),yo=new Map;k1(yo,this.driver,j,d,ur).forEach(H=>{P1(H,l,d)&&Ft.push(H)});let _i=new Map;v.forEach((H,W)=>{k1(_i,this.driver,new Set(H),l,Cf)}),Ft.forEach(H=>{let W=yo.get(H),X=_i.get(H);yo.set(H,new Map([...W?.entries()??[],...X?.entries()??[]]))});let Uf=[],bv=[],wv={};s.forEach(H=>{let{element:W,player:X,instruction:be}=H;if(r.has(W)){if(p.has(W)){X.onDestroy(()=>dr(W,be.toStyles)),X.disabled=!0,X.overrideTotalTime(be.totalTime),i.push(X);return}let ct=wv;if(qe.size>1){let en=W,qr=[];for(;en=en.parentNode;){let Ge=qe.get(en);if(Ge){ct=Ge;break}qr.push(en)}qr.forEach(Ge=>qe.set(Ge,ct))}let Qn=this._buildAnimation(X.namespaceId,be,Te,o,_i,yo);if(X.setRealPlayer(Qn),ct===wv)Uf.push(X);else{let en=this.playersByElement.get(ct);en&&en.length&&(X.parentPlayer=yi(en)),i.push(X)}}else mo(W,be.fromStyles),X.onDestroy(()=>dr(W,be.toStyles)),bv.push(X),p.has(W)&&i.push(X)}),bv.forEach(H=>{let W=o.get(H.element);if(W&&W.length){let X=yi(W);H.setRealPlayer(X)}}),i.forEach(H=>{H.parentPlayer?H.syncPlayerEvents(H.parentPlayer):H.destroy()});for(let H=0;H<x.length;H++){let W=x[H],X=W[Wn];if(Rs(W,Y0),X&&X.hasAnimation)continue;let be=[];if(a.size){let Qn=a.get(W);Qn&&Qn.length&&be.push(...Qn);let en=this.driver.query(W,J0,!0);for(let qr=0;qr<en.length;qr++){let Ge=a.get(en[qr]);Ge&&Ge.length&&be.push(...Ge)}}let ct=be.filter(Qn=>!Qn.destroyed);ct.length?jj(this,W,ct):this.processLeaveNode(W)}return x.length=0,Uf.forEach(H=>{this.players.push(H),H.onDone(()=>{H.destroy();let W=this.players.indexOf(H);this.players.splice(W,1)}),H.play()}),Uf}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,o){let s=[];if(e){let a=this.playersByQueriedElement.get(t);a&&(s=a)}else{let a=this.playersByElement.get(t);if(a){let l=!o||o==_l;a.forEach(d=>{d.queued||!l&&d.triggerName!=i||s.push(d)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(t,e,r){let i=e.triggerName,o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:i;for(let l of e.timelines){let d=l.element,p=d!==o,m=_n(r,d,[]);this._getPreviousPlayers(d,p,s,a,e.toState).forEach(v=>{let b=v.getRealPlayer();b.beforeDestroy&&b.beforeDestroy(),v.destroy(),m.push(v)})}mo(o,e.fromStyles)}_buildAnimation(t,e,r,i,o,s){let a=e.triggerName,l=e.element,d=[],p=new Set,m=new Set,y=e.timelines.map(b=>{let C=b.element;p.add(C);let x=C[Wn];if(x&&x.removedBeforeQueried)return new vi(b.duration,b.delay);let A=C!==l,j=Uj((r.get(C)||Oj).map(Te=>Te.getRealPlayer())).filter(Te=>{let qe=Te;return qe.element?qe.element===C:!1}),U=o.get(C),q=s.get(C),Q=O1(this._normalizer,b.keyframes,U,q),De=this._buildPlayer(b,Q,j);if(b.subTimeline&&i&&m.add(C),A){let Te=new El(t,a,C);Te.setRealPlayer(De),d.push(Te)}return De});d.forEach(b=>{_n(this.playersByQueriedElement,b.element,[]).push(b),b.onDone(()=>Fj(this.playersByQueriedElement,b.element,b))}),p.forEach(b=>Nn(b,E1));let v=yi(y);return v.onDestroy(()=>{p.forEach(b=>Rs(b,E1)),dr(l,e.toStyles)}),m.forEach(b=>{_n(i,b,[]).push(v)}),v}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new vi(t.duration,t.delay)}},El=class{namespaceId;triggerName;element;_player=new vi;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,r)=>{e.forEach(i=>fv(t,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){_n(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function Fj(n,t,e){let r=n.get(t);if(r){if(r.length){let i=r.indexOf(e);r.splice(i,1)}r.length==0&&n.delete(t)}return r}function Lj(n){return n??null}function xf(n){return n&&n.nodeType===1}function Vj(n){return n=="start"||n=="done"}function A1(n,t){let e=n.style.display;return n.style.display=t??"none",e}function k1(n,t,e,r,i){let o=[];e.forEach(l=>o.push(A1(l)));let s=[];r.forEach((l,d)=>{let p=new Map;l.forEach(m=>{let y=t.computeStyle(d,m,i);p.set(m,y),(!y||y.length==0)&&(d[Wn]=Rj,s.push(d))}),n.set(d,p)});let a=0;return e.forEach(l=>A1(l,o[a++])),s}function N1(n,t){let e=new Map;if(n.forEach(a=>e.set(a,[])),t.length==0)return e;let r=1,i=new Set(t),o=new Map;function s(a){if(!a)return r;let l=o.get(a);if(l)return l;let d=a.parentNode;return e.has(d)?l=d:i.has(d)?l=r:l=s(d),o.set(a,l),l}return t.forEach(a=>{let l=s(a);l!==r&&e.get(l).push(a)}),e}function Nn(n,t){n.classList?.add(t)}function Rs(n,t){n.classList?.remove(t)}function jj(n,t,e){yi(e).onDone(()=>n.processLeaveNode(t))}function Uj(n){let t=[];return q1(n,t),t}function q1(n,t){for(let e=0;e<n.length;e++){let r=n[e];r instanceof vl?q1(r.players,t):t.push(r)}}function Bj(n,t){let e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){let o=e[i];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}function P1(n,t,e){let r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(o=>i.add(o)):t.set(n,r),e.delete(n),!0}var Fs=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,r){this._driver=e,this._normalizer=r,this._transitionEngine=new uv(t.body,e,r),this._timelineEngine=new lv(t.body,e,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(t,e,r,i,o){let s=t+"-"+i,a=this._triggerCache[s];if(!a){let l=[],d=[],p=B1(this._driver,o,l,d);if(l.length)throw B3(i,l);a=Ij(i,p,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,i,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r){this._transitionEngine.removeNode(t,e,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if(r.charAt(0)=="@"){let[o,s]=w1(r),a=i;this._timelineEngine.command(o,e,s,a)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,o){if(r.charAt(0)=="@"){let[s,a]=w1(r);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,r,i,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function $j(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=Z0(t[0]),t.length>1&&(r=Z0(t[t.length-1]))):t instanceof Map&&(e=Z0(t)),e||r?new Hj(n,e,r):null}var Hj=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&dr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(dr(this._element,this._initialStyles),this._endStyles&&(dr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(mo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(mo(this._element,this._endStyles),this._endStyles=null),dr(this._element,this._initialStyles),this._state=3)}}return n})();function Z0(n){let t=null;return n.forEach((e,r)=>{zj(r)&&(t=t||new Map,t.set(r,e))}),t}function zj(n){return n==="display"||n==="position"}var Rf=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(t,e,r){return t.animate(this._convertKeyframesToObject(e),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&t.set(i,this._finished?r:vv(this.element,i))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},Ff=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return R1(t,e)}getParentElement(t){return hv(t)}query(t,e,r){return F1(t,e,r)}computeStyle(t,e,r){return vv(t,e)}animate(t,e,r,i,o,s=[]){let a=i==0?"both":"forwards",l={duration:r,delay:i,fill:a};o&&(l.easing=o);let d=new Map,p=s.filter(v=>v instanceof Rf);cj(r,i)&&p.forEach(v=>{v.currentSnapshot.forEach((b,C)=>d.set(C,b))});let m=sj(e).map(v=>new Map(v));m=uj(t,m,d);let y=$j(t,m);return new Rf(t,m,l,y)}};var If="@",G1="@.disabled",Lf=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,r,i){this.namespaceId=t,this.delegate=e,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){e.charAt(0)==If&&e==G1?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r,i){return this.delegate.listen(t,e,r,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},dv=class extends Lf{factory;constructor(t,e,r,i,o){super(e,r,i,o),this.factory=t,this.namespaceId=e}setProperty(t,e,r){e.charAt(0)==If?e.charAt(1)=="."&&e==G1?(r=r===void 0?!0:!!r,this.disableAnimations(t,r)):this.engine.process(this.namespaceId,t,e.slice(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r,i){if(e.charAt(0)==If){let o=qj(t),s=e.slice(1),a="";return s.charAt(0)!=If&&([s,a]=Gj(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let d=l._data||-1;this.factory.scheduleListenerCallback(d,r,l)})}return this.delegate.listen(t,e,r,i)}};function qj(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Gj(n){let t=n.indexOf("."),e=n.substring(0,t),r=n.slice(t+1);return[e,r]}var Vf=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,r){this.delegate=t,this.engine=e,this._zone=r,e.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(t,e){let r="",i=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let d=this._rendererCache,p=d.get(i);if(!p){let m=()=>d.delete(i);p=new Lf(r,i,this.engine,m),d.set(i,p)}return p}let o=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,t);let a=d=>{Array.isArray(d)?d.forEach(a):this.engine.registerTrigger(o,s,t,d.name,d)};return e.data.animation.forEach(a),new dv(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,r){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([e,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var Qj=(()=>{class n extends Fs{constructor(e,r,i){super(e,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(F(He),F(go),F(vo))};static \u0275prov=P({token:n,factory:n.\u0275fac})}return n})();function Kj(){return new Af}function Zj(n,t,e){return new Vf(n,t,e)}var W1=[{provide:vo,useFactory:Kj},{provide:Fs,useClass:Qj},{provide:ri,useFactory:Zj,deps:[Ru,Fs,Me]}],Yj=[{provide:go,useFactory:()=>new Ff},{provide:ou,useValue:"BrowserAnimations"},...W1],yY=[{provide:go,useClass:mv},{provide:ou,useValue:"NoopAnimations"},...W1];function Q1(){return jn("NgEagerAnimations"),[...Yj]}var K1={providers:[Bw(),yE(y1,_E()),DC(xC()),Q1()]};function Jj(n,t){n&1&&(Dt(0),u(1,"div",2),_(2,"router-outlet"),c(),xt())}function Xj(n,t){n&1&&(u(0,"span"),f(1,"Dashboard"),c())}function e4(n,t){n&1&&(u(0,"span"),f(1,"Morning Check-In"),c())}function t4(n,t){n&1&&(u(0,"span"),f(1,"Trade Journal"),c())}function n4(n,t){n&1&&(u(0,"span"),f(1,"Meditation Hub"),c())}function r4(n,t){n&1&&(u(0,"span"),f(1,"Analytics"),c())}function i4(n,t){n&1&&(u(0,"span"),f(1,"Trade Accounts"),c())}function o4(n,t){if(n&1){let e=J();u(0,"div",21)(1,"a",22),S("click",function(){T(e);let i=w(2);return i.navigateToUrl("/home"),M(i.onNavLinkClick())}),_(2,"i",23),E(3,Xj,2,0,"span",0),c(),u(4,"a",22),S("click",function(){T(e);let i=w(2);return i.navigateToUrl("/emotions"),M(i.onNavLinkClick())}),_(5,"i",24),E(6,e4,2,0,"span",0),c(),u(7,"a",22),S("click",function(){T(e);let i=w(2);return i.navigateToUrl("/tradejournal"),M(i.onNavLinkClick())}),_(8,"i",25),E(9,t4,2,0,"span",0),c(),u(10,"a",22),S("click",function(){T(e);let i=w(2);return i.navigateToUrl("/meditationhub"),M(i.onNavLinkClick())}),_(11,"i",26),E(12,n4,2,0,"span",0),c(),u(13,"a",22),S("click",function(){T(e);let i=w(2);return i.navigateToUrl("/analytics"),M(i.onNavLinkClick())}),_(14,"i",27),E(15,r4,2,0,"span",0),c(),u(16,"a",22),S("click",function(){T(e);let i=w(2);return i.navigateToUrl("/tradeaccounts"),M(i.onNavLinkClick())}),_(17,"i",28),E(18,i4,2,0,"span",0),c()()}if(n&2){let e=w(2);h(),Ee("active",e.isActiveRoute("/home")),g("title",e.sidebarCollapsed()?"Dashboard":""),h(),Ee("me-3",!e.sidebarCollapsed()),h(),g("ngIf",!e.sidebarCollapsed()),h(),Ee("active",e.isActiveRoute("/emotions")),g("title",e.sidebarCollapsed()?"Morning Check-In":""),h(),Ee("me-3",!e.sidebarCollapsed()),h(),g("ngIf",!e.sidebarCollapsed()),h(),Ee("active",e.isActiveRoute("/tradejournal")),g("title",e.sidebarCollapsed()?"Trade Journal":""),h(),Ee("me-3",!e.sidebarCollapsed()),h(),g("ngIf",!e.sidebarCollapsed()),h(),Ee("active",e.isActiveRoute("/meditationhub")),g("title",e.sidebarCollapsed()?"Meditation Hub":""),h(),Ee("me-3",!e.sidebarCollapsed()),h(),g("ngIf",!e.sidebarCollapsed()),h(),Ee("active",e.isActiveRoute("/analytics")),g("title",e.sidebarCollapsed()?"Analytics":""),h(),Ee("me-3",!e.sidebarCollapsed()),h(),g("ngIf",!e.sidebarCollapsed()),h(),Ee("active",e.isActiveRoute("/tradeaccounts")),g("title",e.sidebarCollapsed()?"Trade Accounts":""),h(),Ee("me-3",!e.sidebarCollapsed()),h(),g("ngIf",!e.sidebarCollapsed())}}function s4(n,t){if(n&1&&(u(0,"div"),_(1,"img",33),c()),n&2){let e=w(3);h(),Ee("me-2",!e.sidebarCollapsed()),g("src",e.profile_image_blob_url,Dn)}}function a4(n,t){n&1&&(u(0,"div"),_(1,"i",34),c())}function l4(n,t){if(n&1&&(u(0,"div"),f(1," \xA0\xA0 "),u(2,"p",35),f(3),c()()),n&2){let e=w(3);h(3),O("Welcome, ",e.user_firstname,"!")}}function c4(n,t){n&1&&(u(0,"span"),f(1,"Logout\xA0\xA0\xA0"),c())}function u4(n,t){if(n&1){let e=J();u(0,"div",29)(1,"div",30),S("click",function(){T(e);let i=w(2);return M(i.onNavLinkClick())}),E(2,s4,2,3,"div",0)(3,a4,2,0,"div",0)(4,l4,4,1,"div",0),c(),u(5,"button",31),S("click",function(){T(e);let i=w(2);return M(i.logOut())}),E(6,c4,2,0,"span",0),_(7,"i",32),c()()}if(n&2){let e=w(2);h(),Ee("justify-content-center",e.sidebarCollapsed()),h(),g("ngIf",e.profile_image_blob_url),h(),g("ngIf",!e.profile_image_blob_url),h(),g("ngIf",!e.sidebarCollapsed()),h(),g("title",e.sidebarCollapsed()?"Logout":""),h(),g("ngIf",!e.sidebarCollapsed())}}function d4(n,t){if(n&1){let e=J();u(0,"div",36),S("click",function(){T(e);let i=w(2);return M(i.closeSidebar())}),c()}}function f4(n,t){if(n&1){let e=J();u(0,"button",37),S("click",function(){T(e);let i=w(2);return M(i.navigateToUrl("/home"))}),_(1,"img",38),c()}}function p4(n,t){if(n&1){let e=J();Dt(0),u(1,"div",3)(2,"nav",4)(3,"div",5)(4,"div",6)(5,"button",7),S("click",function(){T(e);let i=w();return i.navigateToUrl("/home"),M(i.onNavLinkClick())}),u(6,"img",8),S("click",function(){T(e);let i=w();return i.navigateToUrl("/home"),M(i.onNavLinkClick())}),c()(),u(7,"button",9),S("click",function(){T(e);let i=w();return M(i.closeSidebar())}),c()(),E(8,o4,19,36,"div",10),c(),E(9,u4,8,7,"div",11),c(),E(10,d4,1,0,"div",12),u(11,"div",13)(12,"nav",14)(13,"div",15)(14,"div",16)(15,"button",17),S("click",function(){T(e);let i=w();return M(i.toggleSidebar())}),_(16,"span",18),c(),E(17,f4,2,0,"button",19),c()()(),u(18,"div",20),_(19,"router-outlet"),c()()(),xt()}if(n&2){let e=w();h(2),Ee("collapsed",e.sidebarCollapsed()),h(4),Gt("height",e.sidebarCollapsed()?"40px":"90px"),h(2),g("ngIf",e.loginStatus()),h(),g("ngIf",e.loginStatus()),h(),g("ngIf",e.isMobile()&&!e.sidebarCollapsed()),h(),Ee("expanded",e.sidebarCollapsed()),h(6),g("ngIf",e.sidebarCollapsed())}}var jf=class n{constructor(t,e,r,i,o,s,a){this.cdr=t;this.supabaseService=e;this.supabaseAuthService=r;this.supabaseAccountService=i;this.router=o;this.route=s;this.platformId=a;this.loginStatus=cn(()=>e.loginStatus()),Jo(()=>{this.loginStatus()&&(this.route.queryParams.subscribe(l=>{let d=l.returnUrl;d?this.router.navigate([d]):(this.router.url==="/"||this.router.url==="/login")&&this.router.navigate(["/home"])}),this.loginStatus()&&!this.userProfileLoaded&&(this.userProfileLoaded=!0,this.loadUserProfile()))}),Xh(()=>{})}title="TR-prototype";profile_image_blob_url="";loginStatus;sidebarCollapsed=xe(!1);isMobile=xe(!1);user_firstname="";resizeObserver;userProfileLoaded=!1;async ngOnInit(){this.checkScreenSize(),Tn(this.platformId)&&(this.sidebarCollapsed.set(this.isMobile()),this.resizeObserver=new ResizeObserver(()=>{this.checkScreenSize(),this.cdr.detectChanges()}),this.resizeObserver.observe(document.body))}ngOnDestroy(){Tn(this.platformId)&&this.resizeObserver&&this.resizeObserver.disconnect()}async loadUserProfile(){let{data:t}=await this.supabaseAccountService.getProfile();t&&(this.user_firstname=t.firstname,t.profile_picture_url&&(this.profile_image_blob_url=await this.supabaseAccountService.getCachedProfilePictureBlobUrl(t.profile_picture_url)),this.cdr.markForCheck())}async logOut(){await this.supabaseAuthService.logout(),this.router.navigateByUrl("/")}toggleSidebar(){this.sidebarCollapsed.update(t=>!t),this.cdr.detectChanges()}navigateToUrl(t){this.router.navigateByUrl(t)}closeSidebar(){this.sidebarCollapsed.set(!0),this.cdr.detectChanges()}onNavLinkClick(){this.isMobile()&&this.closeSidebar()}isActiveRoute(t){return this.router.url===t||this.router.url.startsWith(t+"/")}checkScreenSize(){Tn(this.platformId)&&this.isMobile.set(window.innerWidth<768)}static \u0275fac=function(e){return new(e||n)(D(le),D(Ie),D(cr),D(Xt),D(vt),D(hn),D(Et))};static \u0275cmp=V({type:n,selectors:[["app-root"]],decls:4,vars:2,consts:[[4,"ngIf"],["align","center",1,"m-5"],[1,"container-fluid","p-0"],[1,"sidebar-container"],["id","sidebar",1,"d-flex","flex-column","h-100"],[1,"p-3","flex-grow-1"],[1,"mb-3","d-flex","align-items-center"],[1,"text-decoration-none","me-auto","btn","btn-link","p-0","me-3",3,"click"],["src","/tr_logo.svg",1,"img-fluid",3,"click"],["type","button",1,"btn-close","d-md-none",3,"click"],["class","nav flex-column",4,"ngIf"],["class","p-3 border-top mt-auto",4,"ngIf"],["class","sidebar-overlay",3,"click",4,"ngIf"],[1,"content"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid"],[1,"d-flex","align-items-center"],[1,"btn","me-2",3,"click"],[1,"navbar-toggler-icon"],["class","btn navbar-branding text-decoration-none me-auto",3,"click",4,"ngIf"],[1,"container-fluid","ps-3"],[1,"nav","flex-column"],[1,"nav-link",3,"click","title"],[1,"bi","bi-columns-gap"],[1,"bi","bi-brightness-high"],[1,"bi","bi-bookmark-check"],[1,"bi","bi-person-arms-up"],[1,"bi","bi-clipboard-data"],[1,"bi","bi-journals"],[1,"p-3","border-top","mt-auto"],["routerLink","/useraccount",1,"d-flex","align-items-center","mb-2",2,"cursor","pointer",3,"click"],[1,"btn","btn-outline-secondary","btn-tr","w-100",3,"click","title"],[1,"bi","bi-box-arrow-right"],["alt","Profile",1,"rounded-circle",2,"width","40px","height","40px","object-fit","cover",3,"src"],[1,"bi","bi-person-circle","text-black",2,"font-size","30px"],[1,"text-black","mb-0"],[1,"sidebar-overlay",3,"click"],[1,"btn","navbar-branding","text-decoration-none","me-auto",3,"click"],["src","/tr_logo.svg","width","50px",1,"img-fluid"]],template:function(e,r){e&1&&(E(0,Jj,3,0,"ng-container",0)(1,p4,20,10,"ng-container",0),u(2,"footer",1),f(3,"\xA9 2025 Trading Rehab AI. All rights reserved."),c()),e&2&&(g("ngIf",!r.supabaseService.loginStatus()),h(),g("ngIf",r.supabaseService.loginStatus()))},dependencies:[B,K,Ug,Xe],styles:[".sidebar-container[_ngcontent-%COMP%]{display:flex;position:relative}#sidebar[_ngcontent-%COMP%]{width:250px;position:fixed;top:0;left:0;height:100dvh;z-index:999;background:#f8f9facc;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease-in-out;box-shadow:0 0 15px #0000001a;border-right:1px solid rgba(0,0,0,.05)}#sidebar.collapsed[_ngcontent-%COMP%]{width:88px}.content[_ngcontent-%COMP%]{width:calc(100% - 250px);margin-left:250px;transition:all .3s ease-in-out;min-height:100dvh;background-color:transparent}.content.expanded[_ngcontent-%COMP%]{width:calc(100% - 88px);margin-left:88px}@media (max-width: 768px){#sidebar[_ngcontent-%COMP%]{margin-left:-250px}#sidebar[_ngcontent-%COMP%]:not(.collapsed){margin-left:0}#sidebar.collapsed[_ngcontent-%COMP%]{margin-left:-250px}.content[_ngcontent-%COMP%], .content.expanded[_ngcontent-%COMP%]{width:100%;margin-left:0}}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 20px;color:#343a40;cursor:pointer;text-decoration:none;border-radius:12px;margin:4px 12px;font-weight:500;transition:background-color .2s ease,color .2s ease;position:relative}.nav-link[_ngcontent-%COMP%]:hover{background-color:#e9ecef;color:#000}.nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,#634aff,#9932ff);color:#fff!important;font-weight:600;box-shadow:0 4px 12px #634aff4d}.nav-link.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff!important}.nav-link.active[_ngcontent-%COMP%]:after{display:none}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:center;padding:0;margin:8px auto;width:52px;height:52px;border-radius:14px}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0!important;font-size:1.4em}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:background: linear-gradient(90deg,#634aff,#9932ff);color:#fff;box-shadow:0 2px 8px #0003}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background-color:#dee2e6}#sidebar.collapsed[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:hover{background:#495057}#sidebar.collapsed[_ngcontent-%COMP%]   .p-3[_ngcontent-%COMP%], #sidebar.collapsed[_ngcontent-%COMP%]   .border-top[_ngcontent-%COMP%]{padding:1rem .5rem!important}.navbar[_ngcontent-%COMP%]{padding:15px 10px}.sidebar-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:998}.btn-tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}"]})};RC(jf,K1).catch(n=>console.error(n));
